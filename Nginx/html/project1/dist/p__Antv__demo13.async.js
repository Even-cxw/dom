"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[961],{45928:function(w,v,i){i.r(v);var d=i(67294),m=i(94393),S=i(72977),f=i(7561),y=i(10932),r=i(50942),a=i(85893),n={nodes:[{id:"node0",size:100,type:"region-image",label:"\u5409\u661F\u9AD8\u7167",imgOptions:{size:[120,80],img:f}},{id:"node1",size:100,type:"region-image",label:"\u6C89\u9C7C\u843D\u96C11",imgOptions:{size:[120,80],img:f}},{id:"node2",size:100,type:"region-image",label:"\u6C89\u9C7C\u843D\u96C11",imgOptions:{size:[120,80],img:f}}],edges:[{source:"node0",target:"node1",label:"123"},{source:"node1",target:"node2"}]},_={nodes:[{id:"node0",size:100,type:"region-image",label:"\u8FD4\u749E\u5F52\u771F",imgOptions:{size:[120,80],img:f}},{id:"node1",size:100,type:"region-image",label:"\u6C89\u9C7C\u843D\u96C1",imgOptions:{size:[120,80],img:f}}]},O=function(){var o=(0,d.useRef)(null),g=(0,S.Z)(),h=g.width,E=g.height,s=(0,d.useRef)(null);(0,d.useEffect)(function(){k()},[]);var k=function(){s.current||(R(),s.current=new m.ZP.Graph({container:o.current,width:h,height:E,linkCenter:!0,modes:{default:["drag-canvas","zoom-canvas","drag-node"]},defaultNode:{type:"rect",labelCfg:{style:{fill:"#000000A6",fontSize:10}},style:{stroke:"#72CC4A",width:150}},defaultEdge:{style:{stroke:"l(0) 0:rgba(255, 255, 255, 0) 0.5:#7ec2f3 1:rgba(255, 255, 255, 0)",cursor:"pointer"},labelCfg:{autoRotate:!0,style:{fill:"#fff"}}},nodeStateStyles:{hover:{stroke:"red",lineWidth:3}},edgeStateStyles:{hover:{stroke:"blue",lineWidth:5},click:{stroke:"red",lineWidth:5}},fitView:!0,fitViewPadding:100}),s.current.data(n),s.current.render(),D(),x())},R=function(){m.ZP.registerNode("region-image",{options:{style:{},stateStyles:{hover:{},selected:{}}},draw:function(e,l){var u=e.imgOptions;l.addShape("rect",{attrs:{cursor:"pointer",x:-u.size[0]/2,y:-u.size[1]/2,width:u.size[0],height:u.size[1],stroke:"black",opacity:0,fill:"red"},draggable:!0,name:"rect-shape-Even"});var z=l.addShape("image",{attrs:{cursor:"pointer",x:-u.size[0]/2,y:-u.size[1]/2,width:u.size[0],height:u.size[1],img:u.img},draggable:!0,name:"region-image-shape"});return e.label&&l.addShape("text",{attrs:{cursor:"pointer",y:-u.size[1]/2-20,x:0,text:e.label,textAlign:"center",textBaseline:"middle",fontSize:26,fill:"#fff",draggable:!0},name:"region-image-label"}),z},update:void 0,setState:function(e,l,u){console.log("name, value, item =>>>",e,l,u);var z=u.get("group");if(e==="selected"&&l){var P=z.find(function(C){return C.get("name")==="rect-shape-Even"});P&&P.attr("opacity",.5)}else if(e==="selected"&&!l){var b=z.find(function(C){return C.get("name")==="rect-shape-Even"});b&&b.attr("opacity",0)}}},"single-node")},D=function(){var t=s.current;t.on("node:click",function(e){A(t),t.setItemState(e.item,"selected",!0)}),t.on("region-image-label:click",function(e){console.log("111111evt",e)})},A=function(t){var e=t.findAllByState("node","selected");e.forEach(function(l){t.setItemState(l,"selected",!1)})},I=function(t){var e=t.findAllByState("edge","click");e.forEach(function(l){t.setItemState(l,"click",!1)})},x=function(){var t=s.current;t.on("edge:click",function(e){I(t),console.log("evt",e),t.setItemState(e.item,"click",!0)}),t.on("edge:mouseenter",function(e){t.setItemState(e.item,"hover",!0)}),t.on("edge:mouseleave",function(e){t.setItemState(e.item,"hover",!1)})},M=function(){s.current.changeData(_),s.current.refresh()};return(0,a.jsx)("div",{ref:o,style:{width:h,height:E,backgroundColor:"black"},children:(0,a.jsxs)("div",{style:{position:"absolute"},children:[(0,a.jsx)(r.rU,{to:"/",children:(0,a.jsx)(y.ZP,{type:"dashed",children:"\u56DE\u5230\u9996\u9875"})}),(0,a.jsx)(y.ZP,{type:"dashed",onClick:M,children:"\u5207\u6362\u6807\u9898"})]})})};v.default=O},76362:function(w,v,i){i.d(v,{S1:function(){return S},ZT:function(){return d},jU:function(){return f},on:function(){return m}});var d=function(){};function m(r){for(var a=[],n=1;n<arguments.length;n++)a[n-1]=arguments[n];r&&r.addEventListener&&r.addEventListener.apply(r,a)}function S(r){for(var a=[],n=1;n<arguments.length;n++)a[n-1]=arguments[n];r&&r.removeEventListener&&r.removeEventListener.apply(r,a)}var f=typeof window!="undefined",y=typeof navigator!="undefined"},72977:function(w,v,i){i.d(v,{Z:function(){return O}});var d=i(67294),m=function(c){(0,d.useEffect)(c,[])},S=m,f=function(c){var o=(0,d.useRef)(c);o.current=c,S(function(){return function(){return o.current()}})},y=f,r=function(c){var o=(0,d.useRef)(0),g=(0,d.useState)(c),h=g[0],E=g[1],s=(0,d.useCallback)(function(k){cancelAnimationFrame(o.current),o.current=requestAnimationFrame(function(){E(k)})},[]);return y(function(){cancelAnimationFrame(o.current)}),[h,s]},a=r,n=i(76362),_=function(c,o){c===void 0&&(c=1/0),o===void 0&&(o=1/0);var g=a({width:n.jU?window.innerWidth:c,height:n.jU?window.innerHeight:o}),h=g[0],E=g[1];return(0,d.useEffect)(function(){if(n.jU){var s=function(){E({width:window.innerWidth,height:window.innerHeight})};return(0,n.on)(window,"resize",s),function(){(0,n.S1)(window,"resize",s)}}},[]),h},O=_},7561:function(w,v,i){w.exports=i.p+"static/branch_base.7caa187d.png"}}]);
