(self.webpackChunk=self.webpackChunk||[]).push([[568],{96404:function(t,l,e){"use strict";e.r(l);var n=e(5574),r=e.n(n),i=e(67294),v=e(94393),f=e(72977),u=e(33047),c=e(7561),o=e(10932),E=e(50942),m=e(85893),g={nodes:[{id:"node0",size:100,type:"region-image",label:"\u5409\u661F\u9AD8\u7167",imgOptions:{size:[120,80],img:c}},{id:"node1",size:100,type:"region-image",label:"\u6C89\u9C7C\u843D\u96C11",imgOptions:{size:[120,80],img:c}},{id:"node2",size:100,type:"region-image",label:"\u6C89\u9C7C\u843D\u96C11",imgOptions:{size:[120,80],img:c}}],edges:[{source:"node0",target:"node1",label:"123"},{source:"node1",target:"node2"}]},h={nodes:[{id:"node0",size:100,type:"region-image",label:"\u8FD4\u749E\u5F52\u771F",imgOptions:{size:[120,80],img:c}},{id:"node1",size:100,type:"region-image",label:"\u6C89\u9C7C\u843D\u96C1",imgOptions:{size:[120,80],img:c}}]},x=function(d){return Math.round(d*100)/100},S=function(){var d=(0,i.useRef)(null),A=(0,f.Z)(),M=A.width,z=A.height,y=(0,i.useRef)(null),C=(0,u.Z)(),R=r()(C,2),T=R[0],O=R[1];(0,i.useEffect)(function(){if(O.width!==0)if(y.current){var b=y.current;if(!b||b.get("destroyed"))return;var s=x(M-O.width);console.log("rightStyle",O),console.log("width",M),console.log("newWidth",s),b.changeSize(s,z)}else{var a=x(M-O.width);k(a,z)}},[O.width,M]);var k=function(s,a){y.current||(L(),y.current=new v.ZP.Graph({container:d.current,width:s,height:a,linkCenter:!0,modes:{default:["drag-canvas","zoom-canvas","drag-node","shortcuts-call"]},defaultNode:{type:"rect",labelCfg:{style:{fill:"#000000A6",fontSize:10}},style:{stroke:"#72CC4A",width:150}},defaultEdge:{style:{stroke:"l(0) 0:rgba(255, 255, 255, 0) 0.5:#7ec2f3 1:rgba(255, 255, 255, 0)",cursor:"pointer"},labelCfg:{autoRotate:!0,style:{fill:"#fff"}}},nodeStateStyles:{hover:{stroke:"red",lineWidth:3}},edgeStateStyles:{hover:{stroke:"blue",lineWidth:5},click:{stroke:"red",lineWidth:5}},fitView:!0,fitViewPadding:100}),y.current.data(g),y.current.render(),W(),N())},L=function(){v.ZP.registerNode("region-image",{options:{style:{},stateStyles:{hover:{},selected:{}}},draw:function(a,_){var p=a.imgOptions;_.addShape("rect",{attrs:{cursor:"pointer",x:-p.size[0]/2,y:-p.size[1]/2,width:p.size[0],height:p.size[1],stroke:"black",opacity:0,fill:"red"},draggable:!0,name:"rect-shape-Even"});var I=_.addShape("image",{attrs:{cursor:"pointer",x:-p.size[0]/2,y:-p.size[1]/2,width:p.size[0],height:p.size[1],img:p.img},draggable:!0,name:"region-image-shape"});return a.label&&_.addShape("text",{attrs:{cursor:"pointer",y:-p.size[1]/2-20,x:0,text:a.label,textAlign:"center",textBaseline:"middle",fontSize:26,fill:"#fff",draggable:!0},name:"region-image-label"}),I},update:void 0,setState:function(a,_,p){console.log("name, value, item =>>>",a,_,p);var I=p.get("group");if(a==="selected"&&_){var D=I.find(function(P){return P.get("name")==="rect-shape-Even"});D&&D.attr("opacity",.5)}else if(a==="selected"&&!_){var U=I.find(function(P){return P.get("name")==="rect-shape-Even"});U&&U.attr("opacity",0)}}},"single-node")},W=function(){var s=y.current;s.on("node:click",function(a){j(s),s.setItemState(a.item,"selected",!0)}),s.on("region-image-label:click",function(a){console.log("111111evt",a)})},j=function(s){var a=s.findAllByState("node","selected");a.forEach(function(_){s.setItemState(_,"selected",!1)})},B=function(s){var a=s.findAllByState("edge","click");a.forEach(function(_){s.setItemState(_,"click",!1)})},N=function(){var s=y.current;s.on("edge:click",function(a){B(s),console.log("evt",a),s.setItemState(a.item,"click",!0)}),s.on("edge:mouseenter",function(a){s.setItemState(a.item,"hover",!0)}),s.on("edge:mouseleave",function(a){s.setItemState(a.item,"hover",!1)})},K=function(){y.current.changeData(h),y.current.refresh()};return(0,m.jsxs)("div",{style:{width:"100%",height:"100%",display:"flex"},children:[(0,m.jsx)("div",{ref:d,style:{backgroundColor:"black",width:"70%"},children:(0,m.jsxs)("div",{style:{position:"absolute"},children:[(0,m.jsx)(E.rU,{to:"/",children:(0,m.jsx)(o.ZP,{type:"dashed",children:"\u56DE\u5230\u9996\u9875"})}),(0,m.jsx)(o.ZP,{type:"dashed",onClick:K,children:"\u5207\u6362\u6807\u9898"})]})}),(0,m.jsx)("div",{ref:T,style:{width:"30%",height:"100%",backgroundColor:"red"},children:"111233311223"})]})};l.default=S},76362:function(t,l,e){"use strict";e.d(l,{S1:function(){return i},ZT:function(){return n},jU:function(){return v},on:function(){return r}});var n=function(){};function r(u){for(var c=[],o=1;o<arguments.length;o++)c[o-1]=arguments[o];u&&u.addEventListener&&u.addEventListener.apply(u,c)}function i(u){for(var c=[],o=1;o<arguments.length;o++)c[o-1]=arguments[o];u&&u.removeEventListener&&u.removeEventListener.apply(u,c)}var v=typeof window!="undefined",f=typeof navigator!="undefined"},33047:function(t,l,e){"use strict";e.d(l,{Z:function(){return c}});var n=e(67294),r=e(76362),i=r.jU?n.useLayoutEffect:n.useEffect,v=i,f={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function u(){var o=(0,n.useState)(null),E=o[0],m=o[1],g=(0,n.useState)(f),h=g[0],x=g[1],S=(0,n.useMemo)(function(){return new window.ResizeObserver(function(w){if(w[0]){var d=w[0].contentRect,A=d.x,M=d.y,z=d.width,y=d.height,C=d.top,R=d.left,T=d.bottom,O=d.right;x({x:A,y:M,width:z,height:y,top:C,left:R,bottom:T,right:O})}})},[]);return v(function(){if(E)return S.observe(E),function(){S.disconnect()}},[E]),[m,h]}var c=r.jU&&typeof window.ResizeObserver!="undefined"?u:function(){return[r.ZT,f]}},72977:function(t,l,e){"use strict";e.d(l,{Z:function(){return m}});var n=e(67294),r=function(g){(0,n.useEffect)(g,[])},i=r,v=function(g){var h=(0,n.useRef)(g);h.current=g,i(function(){return function(){return h.current()}})},f=v,u=function(g){var h=(0,n.useRef)(0),x=(0,n.useState)(g),S=x[0],w=x[1],d=(0,n.useCallback)(function(A){cancelAnimationFrame(h.current),h.current=requestAnimationFrame(function(){w(A)})},[]);return f(function(){cancelAnimationFrame(h.current)}),[S,d]},c=u,o=e(76362),E=function(g,h){g===void 0&&(g=1/0),h===void 0&&(h=1/0);var x=c({width:o.jU?window.innerWidth:g,height:o.jU?window.innerHeight:h}),S=x[0],w=x[1];return(0,n.useEffect)(function(){if(o.jU){var d=function(){w({width:window.innerWidth,height:window.innerHeight})};return(0,o.on)(window,"resize",d),function(){(0,o.S1)(window,"resize",d)}}},[]),S},m=E},7561:function(t,l,e){"use strict";t.exports=e.p+"static/branch_base.7caa187d.png"},37923:function(t){function l(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,i=new Array(n);r<n;r++)i[r]=e[r];return i}t.exports=l,t.exports.__esModule=!0,t.exports.default=t.exports},82187:function(t){function l(e){if(Array.isArray(e))return e}t.exports=l,t.exports.__esModule=!0,t.exports.default=t.exports},73964:function(t){function l(e,n){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i,v,f,u,c=[],o=!0,E=!1;try{if(f=(r=r.call(e)).next,n===0){if(Object(r)!==r)return;o=!1}else for(;!(o=(i=f.call(r)).done)&&(c.push(i.value),c.length!==n);o=!0);}catch(m){E=!0,v=m}finally{try{if(!o&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(E)throw v}}return c}}t.exports=l,t.exports.__esModule=!0,t.exports.default=t.exports},69094:function(t){function l(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}t.exports=l,t.exports.__esModule=!0,t.exports.default=t.exports},5574:function(t,l,e){var n=e(82187),r=e(73964),i=e(96263),v=e(69094);function f(u,c){return n(u)||r(u,c)||i(u,c)||v()}t.exports=f,t.exports.__esModule=!0,t.exports.default=t.exports},96263:function(t,l,e){var n=e(37923);function r(i,v){if(i){if(typeof i=="string")return n(i,v);var f=Object.prototype.toString.call(i).slice(8,-1);if(f==="Object"&&i.constructor&&(f=i.constructor.name),f==="Map"||f==="Set")return Array.from(i);if(f==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(f))return n(i,v)}}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports}}]);
