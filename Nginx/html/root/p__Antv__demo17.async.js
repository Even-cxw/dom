(self.webpackChunk=self.webpackChunk||[]).push([[203],{55922:function(t,l,e){"use strict";e.r(l);var n=e(9783),r=e.n(n),s=e(5574),v=e.n(s),d=e(67294),u=e(94393),f=e(72977),o=e(33047),_=e(7561),b=e(10932),g=e(50942),c=e(85893),x={nodes:[{id:"node0",size:100,type:"region-image",label:"\u5409\u661F\u9AD8\u7167",imgOptions:{size:[120,80],img:_}},{id:"node1",size:100,type:"region-image",label:"\u6C89\u9C7C\u843D\u96C11",imgOptions:{size:[120,80],img:_}},{id:"node2",size:100,visible:!1,type:"region-image",label:"\u6C89\u9C7C\u843D\u96C11",imgOptions:{size:[120,80],img:_}}],edges:[{source:"node0",target:"node1",label:"123"},{source:"node1",target:"node2"}]},S={nodes:[{id:"node0",size:100,type:"region-image",label:"\u8FD4\u749E\u5F52\u771F",imgOptions:{size:[120,80],img:_}},{id:"node1",size:100,type:"region-image",label:"\u6C89\u9C7C\u843D\u96C1",imgOptions:{size:[120,80],img:_}}]},O=function(M){return Math.round(M*100)/100},m=function(){var M=(0,f.Z)(),I=M.width,P=M.height,y=(0,d.useRef)(null),z=(0,d.useRef)(null),U=(0,o.Z)(),R=v()(U,2),B=R[0],D=R[1],N=(0,d.useState)(30),k=v()(N,2),L=k[0],W=k[1];(0,d.useEffect)(function(){if(D.width!==0)if(y.current){var E=y.current;if(!E||E.get("destroyed"))return;console.log("leftStyle",D),console.log("width",I),E.changeSize(D.width,P)}else Z(D.width,P)},[D.width,I]);var Z=function(i,a){y.current||(K(),y.current=new u.ZP.Graph({container:z.current,width:i,height:a,linkCenter:!0,modes:{default:["drag-canvas","zoom-canvas","drag-node","shortcuts-call"]},defaultNode:{type:"rect",labelCfg:{style:{fill:"#000000A6",fontSize:10}},style:{stroke:"#72CC4A",width:150}},defaultEdge:{style:{stroke:"l(0) 0:rgba(255, 255, 255, 0) 0.5:#7ec2f3 1:rgba(255, 255, 255, 0)",cursor:"pointer"},labelCfg:{autoRotate:!0,style:{fill:"#fff"}}},nodeStateStyles:{hover:{stroke:"red",lineWidth:3}},edgeStateStyles:{hover:{stroke:"blue",lineWidth:5},click:{stroke:"red",lineWidth:5}},fitView:!0,fitViewPadding:100}),y.current.data(x),y.current.render(),F(),V())},K=function(){u.ZP.registerNode("region-image",{options:{style:{},stateStyles:{hover:{},selected:{}}},draw:function(a,p){var h=a.imgOptions;p.addShape("rect",{attrs:{cursor:"pointer",x:-h.size[0]/2,y:-h.size[1]/2,width:h.size[0],height:h.size[1],stroke:"black",opacity:0,fill:"red"},draggable:!0,name:"rect-shape-Even"});var w=p.addShape("image",{attrs:{cursor:"pointer",x:-h.size[0]/2,y:-h.size[1]/2,width:h.size[0],height:h.size[1],img:h.img},draggable:!0,name:"region-image-shape"});return a.label&&p.addShape("text",{attrs:{cursor:"pointer",y:-h.size[1]/2-20,x:0,text:a.label,textAlign:"center",textBaseline:"middle",fontSize:26,fill:"#fff",draggable:!0},name:"region-image-label"}),w},update:void 0,setState:function(a,p,h){console.log("name, value, item =>>>",a,p,h);var w=h.get("group");if(a==="selected"&&p){var A=w.find(function(j){return j.get("name")==="rect-shape-Even"});A&&A.attr("opacity",.5)}else if(a==="selected"&&!p){var T=w.find(function(j){return j.get("name")==="rect-shape-Even"});T&&T.attr("opacity",0)}}},"single-node")},F=function(){var i=y.current;i.on("node:click",function(a){G(i),i.setItemState(a.item,"selected",!0)}),i.on("region-image-label:click",function(a){console.log("111111evt",a);var p=a.item.getID(),h=i.findById(p).getModel();debugger;for(var w=[],A=0;A<3;A++)w.push(r()(r()(r()(r()({id:"".concat(p,"-child-").concat(A),label:"Child ".concat(A+1),size:100,type:"region-image"},"label","\u5B50\u8282\u70B9"),"imgOptions",{size:[120,80],img:_}),"x",h.x),"y",h.y));i.addItem("node",w),w.forEach(function(T){i.addItem("edge",{source:p,target:T.id})}),i.refresh()})},G=function(i){var a=i.findAllByState("node","selected");a.forEach(function(p){i.setItemState(p,"selected",!1)})},H=function(i){var a=i.findAllByState("edge","click");a.forEach(function(p){i.setItemState(p,"click",!1)})},V=function(){var i=y.current;i.on("edge:click",function(a){H(i),console.log("evt",a),i.setItemState(a.item,"click",!0)}),i.on("edge:mouseenter",function(a){i.setItemState(a.item,"hover",!0)}),i.on("edge:mouseleave",function(a){i.setItemState(a.item,"hover",!1)})},$=function(){y.current.changeData(S),y.current.refresh()};return(0,c.jsxs)("div",{style:{width:"100%",height:"100%",display:"flex"},children:[(0,c.jsx)("div",{ref:B,style:{backgroundColor:"black",width:"".concat(100-L,"%")},children:(0,c.jsx)("div",{ref:z,children:(0,c.jsxs)("div",{style:{position:"absolute"},children:[(0,c.jsx)(g.rU,{to:"/",children:(0,c.jsx)(b.ZP,{type:"dashed",children:"\u56DE\u5230\u9996\u9875"})}),(0,c.jsx)(b.ZP,{type:"dashed",onClick:$,children:"\u5207\u6362\u6807\u9898"}),(0,c.jsx)(b.ZP,{type:"dashed",onClick:function(){W(15)},children:"\u7F29\u653E\u53F3\u4FA7"}),(0,c.jsx)(b.ZP,{type:"dashed",onClick:function(){W(30)},children:"\u6269\u5C55\u53F3\u4FA7"}),(0,c.jsx)(b.ZP,{type:"dashed",onClick:function(){y.current.showItem("node2")},children:"\u663E\u793A\u67D0\u4E2A\u8282\u70B9"})]})})}),(0,c.jsx)("div",{style:{width:"".concat(L,"%"),height:"100%"},children:"111233311223"})]})};l.default=m},76362:function(t,l,e){"use strict";e.d(l,{S1:function(){return s},ZT:function(){return n},jU:function(){return v},on:function(){return r}});var n=function(){};function r(u){for(var f=[],o=1;o<arguments.length;o++)f[o-1]=arguments[o];u&&u.addEventListener&&u.addEventListener.apply(u,f)}function s(u){for(var f=[],o=1;o<arguments.length;o++)f[o-1]=arguments[o];u&&u.removeEventListener&&u.removeEventListener.apply(u,f)}var v=typeof window!="undefined",d=typeof navigator!="undefined"},33047:function(t,l,e){"use strict";e.d(l,{Z:function(){return f}});var n=e(67294),r=e(76362),s=r.jU?n.useLayoutEffect:n.useEffect,v=s,d={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function u(){var o=(0,n.useState)(null),_=o[0],b=o[1],g=(0,n.useState)(d),c=g[0],x=g[1],S=(0,n.useMemo)(function(){return new window.ResizeObserver(function(O){if(O[0]){var m=O[0].contentRect,C=m.x,M=m.y,I=m.width,P=m.height,y=m.top,z=m.left,U=m.bottom,R=m.right;x({x:C,y:M,width:I,height:P,top:y,left:z,bottom:U,right:R})}})},[]);return v(function(){if(_)return S.observe(_),function(){S.disconnect()}},[_]),[b,c]}var f=r.jU&&typeof window.ResizeObserver!="undefined"?u:function(){return[r.ZT,d]}},72977:function(t,l,e){"use strict";e.d(l,{Z:function(){return b}});var n=e(67294),r=function(g){(0,n.useEffect)(g,[])},s=r,v=function(g){var c=(0,n.useRef)(g);c.current=g,s(function(){return function(){return c.current()}})},d=v,u=function(g){var c=(0,n.useRef)(0),x=(0,n.useState)(g),S=x[0],O=x[1],m=(0,n.useCallback)(function(C){cancelAnimationFrame(c.current),c.current=requestAnimationFrame(function(){O(C)})},[]);return d(function(){cancelAnimationFrame(c.current)}),[S,m]},f=u,o=e(76362),_=function(g,c){g===void 0&&(g=1/0),c===void 0&&(c=1/0);var x=f({width:o.jU?window.innerWidth:g,height:o.jU?window.innerHeight:c}),S=x[0],O=x[1];return(0,n.useEffect)(function(){if(o.jU){var m=function(){O({width:window.innerWidth,height:window.innerHeight})};return(0,o.on)(window,"resize",m),function(){(0,o.S1)(window,"resize",m)}}},[]),S},b=_},7561:function(t,l,e){"use strict";t.exports=e.p+"static/branch_base.7caa187d.png"},37923:function(t){function l(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,s=new Array(n);r<n;r++)s[r]=e[r];return s}t.exports=l,t.exports.__esModule=!0,t.exports.default=t.exports},82187:function(t){function l(e){if(Array.isArray(e))return e}t.exports=l,t.exports.__esModule=!0,t.exports.default=t.exports},73964:function(t){function l(e,n){var r=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var s,v,d,u,f=[],o=!0,_=!1;try{if(d=(r=r.call(e)).next,n===0){if(Object(r)!==r)return;o=!1}else for(;!(o=(s=d.call(r)).done)&&(f.push(s.value),f.length!==n);o=!0);}catch(b){_=!0,v=b}finally{try{if(!o&&r.return!=null&&(u=r.return(),Object(u)!==u))return}finally{if(_)throw v}}return f}}t.exports=l,t.exports.__esModule=!0,t.exports.default=t.exports},69094:function(t){function l(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}t.exports=l,t.exports.__esModule=!0,t.exports.default=t.exports},5574:function(t,l,e){var n=e(82187),r=e(73964),s=e(96263),v=e(69094);function d(u,f){return n(u)||r(u,f)||s(u,f)||v()}t.exports=d,t.exports.__esModule=!0,t.exports.default=t.exports},96263:function(t,l,e){var n=e(37923);function r(s,v){if(s){if(typeof s=="string")return n(s,v);var d=Object.prototype.toString.call(s).slice(8,-1);if(d==="Object"&&s.constructor&&(d=s.constructor.name),d==="Map"||d==="Set")return Array.from(s);if(d==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d))return n(s,v)}}t.exports=r,t.exports.__esModule=!0,t.exports.default=t.exports}}]);
