(self.webpackChunk=self.webpackChunk||[]).push([[380],{62238:function(Se,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=void 0;var et=function(V,z){var H=V.nodes,F=V.edges,M=[],A={};if(!H)throw new Error("invalid nodes data!");return H&&H.forEach(function(y,x){A[y.id]=x;var p=[];M.push(p)}),F&&F.forEach(function(y){var x=y.source,p=y.target,_=A[x],E=A[p];!_&&_!==0||!E&&E!==0||(M[_][E]=1,z||(M[E][_]=1))}),M},ft=et;R.default=ft},10369:function(Se,R,et){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),Object.defineProperty(R,"GADDIAsync",{enumerable:!0,get:function(){return ft.GADDIAsync}}),Object.defineProperty(R,"connectedComponentAsync",{enumerable:!0,get:function(){return ft.connectedComponentAsync}}),R.default=void 0,Object.defineProperty(R,"detectAllCyclesAsync",{enumerable:!0,get:function(){return ft.detectAllCyclesAsync}}),Object.defineProperty(R,"detectAllDirectedCycleAsync",{enumerable:!0,get:function(){return ft.detectAllDirectedCycleAsync}}),Object.defineProperty(R,"detectAllUndirectedCycleAsync",{enumerable:!0,get:function(){return ft.detectAllUndirectedCycleAsync}}),Object.defineProperty(R,"detectCycleAsync",{enumerable:!0,get:function(){return ft.detectCycleAsync}}),R.detectDirectedCycleAsync=void 0,Object.defineProperty(R,"dijkstraAsync",{enumerable:!0,get:function(){return ft.dijkstraAsync}}),Object.defineProperty(R,"findAllPathAsync",{enumerable:!0,get:function(){return ft.findAllPathAsync}}),Object.defineProperty(R,"findShortestPathAsync",{enumerable:!0,get:function(){return ft.findShortestPathAsync}}),Object.defineProperty(R,"floydWarshallAsync",{enumerable:!0,get:function(){return ft.floydWarshallAsync}}),Object.defineProperty(R,"getAdjMatrixAsync",{enumerable:!0,get:function(){return ft.getAdjMatrixAsync}}),Object.defineProperty(R,"getDegreeAsync",{enumerable:!0,get:function(){return ft.getDegreeAsync}}),Object.defineProperty(R,"getInDegreeAsync",{enumerable:!0,get:function(){return ft.getInDegreeAsync}}),Object.defineProperty(R,"getNeighborsAsync",{enumerable:!0,get:function(){return ft.getNeighborsAsync}}),Object.defineProperty(R,"getOutDegreeAsync",{enumerable:!0,get:function(){return ft.getOutDegreeAsync}}),Object.defineProperty(R,"labelPropagationAsync",{enumerable:!0,get:function(){return ft.labelPropagationAsync}}),Object.defineProperty(R,"louvainAsync",{enumerable:!0,get:function(){return ft.louvainAsync}}),Object.defineProperty(R,"minimumSpanningTreeAsync",{enumerable:!0,get:function(){return ft.minimumSpanningTreeAsync}}),Object.defineProperty(R,"pageRankAsync",{enumerable:!0,get:function(){return ft.pageRankAsync}});var ft=et(30485),nt=ft.detectCycleAsync;R.detectDirectedCycleAsync=nt;var V={getAdjMatrixAsync:ft.getAdjMatrixAsync,connectedComponentAsync:ft.connectedComponentAsync,getDegreeAsync:ft.getDegreeAsync,getInDegreeAsync:ft.getInDegreeAsync,getOutDegreeAsync:ft.getOutDegreeAsync,detectCycleAsync:ft.detectCycleAsync,detectDirectedCycleAsync:nt,detectAllCyclesAsync:ft.detectAllCyclesAsync,detectAllDirectedCycleAsync:ft.detectAllDirectedCycleAsync,detectAllUndirectedCycleAsync:ft.detectAllUndirectedCycleAsync,dijkstraAsync:ft.dijkstraAsync,findAllPathAsync:ft.findAllPathAsync,findShortestPathAsync:ft.findShortestPathAsync,floydWarshallAsync:ft.floydWarshallAsync,labelPropagationAsync:ft.labelPropagationAsync,louvainAsync:ft.louvainAsync,minimumSpanningTreeAsync:ft.minimumSpanningTreeAsync,pageRankAsync:ft.pageRankAsync,getNeighborsAsync:ft.getNeighborsAsync,GADDIAsync:ft.GADDIAsync};R.default=V},83764:function(Se,R,et){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=void 0;var ft=V(et(93026)),nt=et(70643);function V(M){return M&&M.__esModule?M:{default:M}}function z(M){M===void 0&&(M={});var A=M,y=function(){},x=function(){var p={};return function(_){var E=_.next,b=E;return p[b]?!1:(p[b]=!0,!0)}}();return A.allowTraversal=M.allowTraversal||x,A.enter=M.enter||y,A.leave=M.leave||y,A}var H=function(A,y,x,p){p===void 0&&(p=!0);var _=z(x),E=new ft.default,b=A.edges,k=b===void 0?[]:b;E.enqueue(y);for(var N="",g=function(){var K=E.dequeue();_.enter({current:K,previous:N}),(0,nt.getNeighbors)(K,k,p?"target":void 0).forEach(function(B){_.allowTraversal({previous:N,current:K,next:B})&&E.enqueue(B)}),_.leave({current:K,previous:N}),N=K};!E.isEmpty();)g()},F=H;R.default=F},59527:function(Se,R,et){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=z,R.detectStrongConnectComponents=R.detectConnectedComponents=void 0;var ft=et(70643),nt=function(F){for(var M=F.nodes,A=M===void 0?[]:M,y=F.edges,x=y===void 0?[]:y,p=[],_={},E=[],b=function v(K){E.push(K),_[K.id]=!0;for(var B=(0,ft.getNeighbors)(K.id,x),G=function(Q){var Z=B[Q];if(!_[Z]){var rt=A.filter(function(ut){return ut.id===Z});rt.length>0&&v(rt[0])}},Y=0;Y<B.length;++Y)G(Y)},k=0;k<A.length;k++){var N=A[k];if(!_[N.id]){b(N);for(var g=[];E.length>0;)g.push(E.pop());p.push(g)}}return p};R.detectConnectedComponents=nt;var V=function(F){for(var M=F.nodes,A=M===void 0?[]:M,y=F.edges,x=y===void 0?[]:y,p=[],_={},E={},b={},k=[],N=0,g=function G(Y){E[Y.id]=N,b[Y.id]=N,N+=1,p.push(Y),_[Y.id]=!0;for(var j=(0,ft.getNeighbors)(Y.id,x,"target").filter(function(ht){return A.map(function(kt){return kt.id}).indexOf(ht)>-1}),Q=function(kt){var At=j[kt];if(!E[At]&&E[At]!==0){var Ht=A.filter(function(Rt){return Rt.id===At});Ht.length>0&&G(Ht[0]),b[Y.id]=Math.min(b[Y.id],b[At])}else _[At]&&(b[Y.id]=Math.min(b[Y.id],E[At]))},Z=0;Z<j.length;Z++)Q(Z);if(b[Y.id]===E[Y.id]){for(var rt=[];p.length>0;){var ut=p.pop();if(_[ut.id]=!1,rt.push(ut),ut===Y)break}rt.length>0&&k.push(rt)}},v=0,K=A;v<K.length;v++){var B=K[v];!E[B.id]&&E[B.id]!==0&&g(B)}return k};R.detectStrongConnectComponents=V;function z(H,F){return F?V(H):nt(H)}},92935:function(Se,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.secondReg=R.dateReg=void 0;var et=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/;R.secondReg=et;var ft=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/;R.dateReg=ft},82556:function(Se,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.getOutDegree=R.getInDegree=R.default=void 0;var et=function(H){var F={},M=H.nodes,A=M===void 0?[]:M,y=H.edges,x=y===void 0?[]:y;return A.forEach(function(p){F[p.id]={degree:0,inDegree:0,outDegree:0}}),x.forEach(function(p){F[p.source].degree++,F[p.source].outDegree++,F[p.target].degree++,F[p.target].inDegree++}),F},ft=et;R.default=ft;var nt=function(H,F){var M=et(H);return M[F]?et(H)[F].inDegree:0};R.getInDegree=nt;var V=function(H,F){var M=et(H);return M[F]?et(H)[F].outDegree:0};R.getOutDegree=V},94282:function(Se,R,et){"use strict";function ft(E){"@babel/helpers - typeof";return ft=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(b){return typeof b}:function(b){return b&&typeof Symbol=="function"&&b.constructor===Symbol&&b!==Symbol.prototype?"symbol":typeof b},ft(E)}Object.defineProperty(R,"__esModule",{value:!0}),R.detectAllUndirectedCycle=R.detectAllDirectedCycle=R.detectAllCycles=R.default=void 0;var nt=M(et(45891)),V=F(et(59527)),z=et(70643);function H(E){if(typeof WeakMap!="function")return null;var b=new WeakMap,k=new WeakMap;return(H=function(g){return g?k:b})(E)}function F(E,b){if(!b&&E&&E.__esModule)return E;if(E===null||ft(E)!=="object"&&typeof E!="function")return{default:E};var k=H(b);if(k&&k.has(E))return k.get(E);var N={},g=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var v in E)if(v!=="default"&&Object.prototype.hasOwnProperty.call(E,v)){var K=g?Object.getOwnPropertyDescriptor(E,v):null;K&&(K.get||K.set)?Object.defineProperty(N,v,K):N[v]=E[v]}return N.default=E,k&&k.set(E,N),N}function M(E){return E&&E.__esModule?E:{default:E}}var A=function(b){var k=null,N=b.nodes,g=N===void 0?[]:N,v={},K={},B={},G={};g.forEach(function(Q){K[Q.id]=Q});for(var Y={enter:function(Z){var rt=Z.current,ut=Z.previous;if(B[rt]){k={};for(var ht=rt,kt=ut;kt!==rt;)k[ht]=kt,ht=kt,kt=v[kt];k[ht]=kt}else B[rt]=rt,delete K[rt],v[rt]=ut},leave:function(Z){var rt=Z.current;G[rt]=rt,delete B[rt]},allowTraversal:function(Z){var rt=Z.next;return k?!1:!G[rt]}};Object.keys(K).length;){var j=Object.keys(K)[0];(0,nt.default)(b,j,Y)}return k},y=function(b,k,N){var g,v;N===void 0&&(N=!0);for(var K=[],B=(0,V.default)(b,!1),G=0,Y=B;G<Y.length;G++){var j=Y[G];if(j.length)for(var Q=j[0],Z=Q.id,rt=[Q],ut=(g={},g[Z]=Q,g),ht=(v={},v[Z]=new Set,v);rt.length>0;)for(var kt=rt.pop(),At=kt.id,Ht=(0,z.getNeighbors)(At,b.edges),Rt=function(ot){var yt,Lt=Ht[ot],Ot=b.nodes.find(function(me){return me.id===Lt});if(Lt===At)K.push((yt={},yt[Lt]=kt,yt));else if(!(Lt in ht))ut[Lt]=kt,rt.push(Ot),ht[Lt]=new Set([kt]);else if(!ht[At].has(Ot)){for(var Wt=!0,Jt=[Ot,kt],De=ut[At];ht[Lt].size&&!ht[Lt].has(De)&&(Jt.push(De),De!==ut[De.id]);)De=ut[De.id];if(Jt.push(De),k&&N?(Wt=!1,Jt.findIndex(function(me){return k.indexOf(me.id)>-1})>-1&&(Wt=!0)):k&&!N&&Jt.findIndex(function(me){return k.indexOf(me.id)>-1})>-1&&(Wt=!1),Wt){for(var te={},oe=1;oe<Jt.length;oe+=1)te[Jt[oe-1].id]=Jt[oe];Jt.length&&(te[Jt[Jt.length-1].id]=Jt[0]),K.push(te)}ht[Lt].add(kt)}},le=0;le<Ht.length;le+=1)Rt(le)}return K};R.detectAllUndirectedCycle=y;var x=function(b,k,N){N===void 0&&(N=!0);for(var g=[],v=new Set,K=[],B=[],G={},Y={},j=function(De){for(var te=[De];te.length>0;){var oe=te.pop();v.has(oe)&&(v.delete(oe),K[oe.id].forEach(function(me){te.push(me)}),K[oe.id].clear())}},Q=function Jt(De,te,oe){var me=!1;if(k&&N===!1&&k.indexOf(De.id)>-1)return me;g.push(De),v.add(De);for(var Ce=oe[De.id],_e=0;_e<Ce.length;_e+=1){var zt=G[Ce[_e]];if(zt===te){for(var ue={},Pe=1;Pe<g.length;Pe+=1)ue[g[Pe-1].id]=g[Pe];g.length&&(ue[g[g.length-1].id]=g[0]),B.push(ue),me=!0}else v.has(zt)||Jt(zt,te,oe)&&(me=!0)}if(me)j(De);else for(var _e=0;_e<Ce.length;_e+=1){var zt=G[Ce[_e]];K[zt.id].has(De)||K[zt.id].add(De)}return g.pop(),me},Z=b.nodes,rt=Z===void 0?[]:Z,ut=0;ut<rt.length;ut+=1){var ht=rt[ut],kt=ht.id;Y[kt]=ut,G[ut]=ht}if(k&&N)for(var At=function(De){var te=k[De];Y[rt[De].id]=Y[te],Y[te]=0,G[0]=rt.find(function(oe){return oe.id===te}),G[Y[rt[De].id]]=rt[De]},ut=0;ut<k.length;ut++)At(ut);for(var Ht=function(De){for(var te,oe,me=1/0,Ce=0;Ce<De.length;Ce+=1)for(var _e=De[Ce],zt=0;zt<_e.length;zt++){var ue=Y[_e[zt].id];ue<me&&(me=ue,oe=Ce)}for(var Pe=De[oe],Xt=[],Ce=0;Ce<Pe.length;Ce+=1){var ie=Pe[Ce];Xt[ie.id]=[];for(var Ie=0,se=(0,z.getNeighbors)(ie.id,b.edges,"target").filter(function(Tt){return Pe.map(function(nr){return nr.id}).indexOf(Tt)>-1});Ie<se.length;Ie++){var Te=se[Ie];Te===ie.id&&!(N===!1&&k.indexOf(ie.id)>-1)?B.push((te={},te[ie.id]=ie,te)):Xt[ie.id].push(Y[Te])}}return{component:Pe,adjList:Xt,minIdx:me}},Rt=0;Rt<rt.length;){var le=rt.filter(function(Jt){return Y[Jt.id]>=Rt}),dt=(0,V.detectStrongConnectComponents)({nodes:le,edges:b.edges}).filter(function(Jt){return Jt.length>1});if(dt.length===0)break;var ot=Ht(dt),yt=ot.minIdx,Lt=ot.adjList,Ot=ot.component;if(Ot.length>1){Ot.forEach(function(Jt){K[Jt.id]=new Set});var Wt=G[yt];if(k&&N&&k.indexOf(Wt.id)===-1)return B;Q(Wt,Wt,Lt),Rt=yt+1}else break}return B};R.detectAllDirectedCycle=x;var p=function(b,k,N,g){return g===void 0&&(g=!0),k?x(b,N,g):y(b,N,g)};R.detectAllCycles=p;var _=A;R.default=_},45891:function(Se,R,et){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=z;var ft=et(70643);function nt(H){H===void 0&&(H={});var F=H,M=function(){},A=function(){var y={};return function(x){var p=x.next;return y[p]?!1:(y[p]=!0,!0)}}();return F.allowTraversal=H.allowTraversal||A,F.enter=H.enter||M,F.leave=H.leave||M,F}function V(H,F,M,A,y){y===void 0&&(y=!0),A.enter({current:F,previous:M});var x=H.edges,p=x===void 0?[]:x;(0,ft.getNeighbors)(F,p,y?"target":void 0).forEach(function(_){A.allowTraversal({previous:M,current:F,next:_})&&V(H,_,F,A,y)}),A.leave({current:F,previous:M})}function z(H,F,M,A){A===void 0&&(A=!0),V(H,F,"",nt(M),A)}},78089:function(Se,R,et){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=void 0;var ft=et(97582),nt=et(13810),V=et(70643),z=function(y,x,p){for(var _=1/0,E,b=0;b<x.length;b++){var k=x[b].id;!p[k]&&y[k]<=_&&(_=y[k],E=x[b])}return E},H=function(y,x,p,_){var E=y.nodes,b=E===void 0?[]:E,k=y.edges,N=k===void 0?[]:k,g=[],v={},K={},B={};b.forEach(function(ut,ht){var kt=ut.id;g.push(kt),K[kt]=1/0,kt===x&&(K[kt]=0)});for(var G=b.length,Y=function(ht){var kt=z(K,b,v),At=kt.id;if(v[At]=!0,K[At]===1/0)return"continue";var Ht=[];p?Ht=(0,V.getOutEdgesNodeId)(At,N):Ht=(0,V.getEdgesByNodeId)(At,N),Ht.forEach(function(Rt){var le=Rt.target,dt=Rt.source,ot=le===At?dt:le,yt=_&&Rt[_]?Rt[_]:1;K[ot]>K[kt.id]+yt?(K[ot]=K[kt.id]+yt,B[ot]=[kt.id]):K[ot]===K[kt.id]+yt&&B[ot].push(kt.id)})},j=0;j<G;j++)Y(j);B[x]=[x];var Q={};for(var Z in K)K[Z]!==1/0&&M(x,Z,B,Q);var rt={};for(var Z in Q)rt[Z]=Q[Z][0];return{length:K,path:rt,allPath:Q}},F=H;R.default=F;function M(A,y,x,p){if(A===y)return[A];if(p[y])return p[y];for(var _=[],E=0,b=x[y];E<b.length;E++){var k=b[E],N=M(A,k,x,p);if(!N)return;for(var g=0,v=N;g<v.length;g++){var K=v[g];(0,nt.isArray)(K)?_.push((0,ft.__spreadArray)((0,ft.__spreadArray)([],K,!0),[y],!1)):_.push([K,y])}}return p[y]=_,p[y]}},41727:function(Se,R,et){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.findShortestPath=R.findAllPath=void 0;var ft=V(et(78089)),nt=et(70643);function V(F){return F&&F.__esModule?F:{default:F}}var z=function(M,A,y,x,p){var _=(0,ft.default)(M,A,x,p),E=_.length,b=_.path,k=_.allPath;return{length:E[y],path:b[y],allPath:k[y]}};R.findShortestPath=z;var H=function(M,A,y,x){var p;if(A===y)return[[A]];var _=M.edges,E=_===void 0?[]:_,b=[A],k=(p={},p[A]=!0,p),N=[],g=[],v=x?(0,nt.getNeighbors)(A,E,"target"):(0,nt.getNeighbors)(A,E);for(N.push(v);b.length>0&&N.length>0;){var K=N[N.length-1];if(K.length){var B=K.shift();B&&(b.push(B),k[B]=!0,v=x?(0,nt.getNeighbors)(B,E,"target"):(0,nt.getNeighbors)(B,E),N.push(v.filter(function(j){return!k[j]})))}else{var G=b.pop();k[G]=!1,N.pop();continue}if(b[b.length-1]===y){var Y=b.map(function(Q){return Q});g.push(Y);var G=b.pop();k[G]=!1,N.pop()}}return g};R.findAllPath=H},75033:function(Se,R,et){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=void 0;var ft=nt(et(62238));function nt(H){return H&&H.__esModule?H:{default:H}}var V=function(F,M){for(var A=(0,ft.default)(F,M),y=[],x=A.length,p=0;p<x;p+=1){y[p]=[];for(var _=0;_<x;_+=1)p===_?y[p][_]=0:A[p][_]===0||!A[p][_]?y[p][_]=1/0:y[p][_]=A[p][_]}for(var E=0;E<x;E+=1)for(var p=0;p<x;p+=1)for(var _=0;_<x;_+=1)y[p][_]>y[p][E]+y[E][_]&&(y[p][_]=y[p][E]+y[E][_]);return y},z=V;R.default=z},21146:function(Se,R,et){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=void 0;var ft=et(13810),nt=et(68575),V=function(){function _(E,b,k,N,g){this.fromNode=E,this.toNode=b,this.nodeEdgeNodeLabel={nodeLabel1:k||nt.VACANT_NODE_LABEL,edgeLabel:N||nt.VACANT_EDGE_LABEL,nodeLabel2:g||nt.VACANT_NODE_LABEL}}return _.prototype.equalTo=function(E){return this.fromNode===E.formNode&&this.toNode===E.toNode&&this.nodeEdgeNodeLabel===E.nodeEdgeNodeLabel},_.prototype.notEqualTo=function(E){return!this.equalTo(E)},_}(),z=function(){function _(){this.rmpath=[],this.dfsEdgeList=[]}return _.prototype.equalTo=function(E){var b=this.dfsEdgeList.length,k=E.length;if(b!==k)return!1;for(var N=0;N<b;N++)if(this.dfsEdgeList[N]!==E[N])return!1;return!0},_.prototype.notEqualTo=function(E){return!this.equalTo(E)},_.prototype.pushBack=function(E,b,k,N,g){return this.dfsEdgeList.push(new V(E,b,k,N,g)),this.dfsEdgeList},_.prototype.toGraph=function(E,b){E===void 0&&(E=nt.VACANT_GRAPH_ID),b===void 0&&(b=!1);var k=new nt.Graph(E,!0,b);return this.dfsEdgeList.forEach(function(N){var g=N.fromNode,v=N.toNode,K=N.nodeEdgeNodeLabel,B=K.nodeLabel1,G=K.edgeLabel,Y=K.nodeLabel2;B!==nt.VACANT_NODE_LABEL&&k.addNode(g,B),Y!==nt.VACANT_NODE_LABEL&&k.addNode(v,Y),B!==nt.VACANT_NODE_LABEL&&Y!==B&&k.addEdge(void 0,g,v,G)}),k},_.prototype.buildRmpath=function(){this.rmpath=[];for(var E=void 0,b=this.dfsEdgeList.length,k=b-1;k>=0;k--){var N=this.dfsEdgeList[k],g=N.fromNode,v=N.toNode;g<v&&(E===void 0||v===E)&&(this.rmpath.push(k),E=g)}return this.rmpath},_.prototype.getNodeNum=function(){var E={};return this.dfsEdgeList.forEach(function(b){E[b.fromNode]||(E[b.fromNode]=!0),E[b.toNode]||(E[b.toNode]=!0)}),Object.keys(E).length},_}(),H=function(){function _(E){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],!!E){for(;E;){var b=E.edge;this.edges.push(b),this.nodesUsed[b.from]=1,this.nodesUsed[b.to]=1,this.edgesUsed[b.id]=1,E=E.preNode}this.edges=this.edges.reverse()}}return _.prototype.hasNode=function(E){return this.nodesUsed[E.id]===1},_.prototype.hasEdge=function(E){return this.edgesUsed[E.id]===1},_}(),F=function(){function _(E){var b=E.graphs,k=E.minSupport,N=k===void 0?2:k,g=E.minNodeNum,v=g===void 0?1:g,K=E.maxNodeNum,B=K===void 0?4:K,G=E.top,Y=G===void 0?10:G,j=E.directed,Q=j===void 0?!1:j,Z=E.verbose,rt=Z===void 0?!1:Z;this.graphs=b,this.dfsCode=new z,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=N,this.top=Y,this.directed=Q,this.counter=0,this.maxNodeNum=B,this.minNodeNum=v,this.verbose=rt,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return _.prototype.findForwardRootEdges=function(E,b){var k=this,N=[],g=E.nodeMap;return b.edges.forEach(function(v){(k.directed||b.label<=g[v.to].label)&&N.push(v)}),N},_.prototype.findBackwardEdge=function(E,b,k,N){if(!this.directed&&b===k)return null;for(var g=E.nodeMap,v=g[k.to],K=v.edges,B=K.length,G=0;G<B;G++){var Y=K[G];if(!(N.hasEdge(Y)||Y.to!==b.from)){if(this.directed){if(g[b.from].label<g[k.to].label||g[b.from].label===g[k.to].label&&b.label<=Y.label)return Y}else if(b.label<Y.label||b.label===Y.label&&g[b.to].label<=g[k.to].label)return Y}}return null},_.prototype.findForwardPureEdges=function(E,b,k,N){for(var g=[],v=b.to,K=E.nodeMap[v].edges,B=K.length,G=0;G<B;G++){var Y=K[G],j=E.nodeMap[Y.to];k<=j.label&&!N.hasNode(j)&&g.push(Y)}return g},_.prototype.findForwardRmpathEdges=function(E,b,k,N){for(var g=[],v=E.nodeMap,K=v[b.to].label,B=v[b.from],G=B.edges,Y=G.length,j=0;j<Y;j++){var Q=G[j],Z=v[Q.to].label;b.to===Q.to||k>Z||N.hasNode(v[Q.to])||(b.label<Q.label||b.label===Q.label&&K<=Z)&&g.push(Q)}return g},_.prototype.getSupport=function(E){var b={};return E.forEach(function(k){b[k.graphId]||(b[k.graphId]=!0)}),Object.keys(b).length},_.prototype.findMinLabel=function(E){var b=void 0;return Object.keys(E).forEach(function(k){var N=E[k],g=N.nodeLabel1,v=N.edgeLabel,K=N.nodeLabel2;if(!b){b={nodeLabel1:g,edgeLabel:v,nodeLabel2:K};return}(g<b.nodeLabel1||g===b.nodeLabel1&&v<b.edgeLabel||g===b.nodeLabel1&&v===b.edgeLabel&&K<b.nodeLabel2)&&(b={nodeLabel1:g,edgeLabel:v,nodeLabel2:K})}),b},_.prototype.isMin=function(){var E=this,b=this.dfsCode;if(this.verbose&&console.log("isMin checking",b),b.dfsEdgeList.length===1)return!0;var k=this.directed,N=b.toGraph(nt.VACANT_GRAPH_ID,k),g=N.nodeMap,v=new z,K={};N.nodes.forEach(function(j){var Q=E.findForwardRootEdges(N,j);Q.forEach(function(Z){var rt=g[Z.to],ut="".concat(j.label,"-").concat(Z.label,"-").concat(rt.label);K[ut]||(K[ut]={projected:[],nodeLabel1:j.label,edgeLabel:Z.label,nodeLabel2:rt.label});var ht={graphId:N.id,edge:Z,preNode:null};K[ut].projected.push(ht)})});var B=this.findMinLabel(K);if(B){v.dfsEdgeList.push(new V(0,1,B.nodeLabel1,B.edgeLabel,B.nodeLabel2));var G=function j(Q){for(var Z=v.buildRmpath(),rt=v.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,ut=v.dfsEdgeList[Z[0]].toNode,ht={},kt=!1,At=0,Ht=k?-1:0,Rt=function(Ce){if(kt)return"break";Q.forEach(function(_e){var zt=new H(_e),ue=E.findBackwardEdge(N,zt.edges[Z[Ce]],zt.edges[Z[0]],zt);ue&&(ht[ue.label]||(ht[ue.label]={projected:[],edgeLabel:ue.label}),ht[ue.label].projected.push({graphId:N.id,edge:ht,preNode:_e}),At=v.dfsEdgeList[Z[Ce]].fromNode,kt=!0)})},le=Z.length-1;le>Ht;le--){var dt=Rt(le);if(dt==="break")break}if(kt){var ot=E.findMinLabel(ht);v.dfsEdgeList.push(new V(ut,At,nt.VACANT_NODE_LABEL,ot.edgeLabel,nt.VACANT_NODE_LABEL));var yt=v.dfsEdgeList.length-1;return E.dfsCode.dfsEdgeList[yt]!==v.dfsEdgeList[yt]?!1:j(ht[ot.edgeLabel].projected)}var Lt={};kt=!1;var Ot=0;Q.forEach(function(me){var Ce=new H(me),_e=E.findForwardPureEdges(N,Ce.edges[Z[0]],rt,Ce);_e.length>0&&(kt=!0,Ot=ut,_e.forEach(function(zt){var ue="".concat(zt.label,"-").concat(g[zt.to].label);Lt[ue]||(Lt[ue]={projected:[],edgeLabel:zt.label,nodeLabel2:g[zt.to].label}),Lt[ue].projected.push({graphId:N.id,edge:zt,preNode:me})}))});for(var Wt=Z.length,Jt=function(Ce){if(kt)return"break";var _e=Z[Ce];Q.forEach(function(zt){var ue=new H(zt),Pe=E.findForwardRmpathEdges(N,ue.edges[_e],rt,ue);Pe.length>0&&(kt=!0,Ot=v.dfsEdgeList[_e].fromNode,Pe.forEach(function(Xt){var ie="".concat(Xt.label,"-").concat(g[Xt.to].label);Lt[ie]||(Lt[ie]={projected:[],edgeLabel:Xt.label,nodeLabel2:g[Xt.to].label}),Lt[ie].projected.push({graphId:N.id,edge:Xt,preNode:zt})}))})},le=0;le<Wt;le++){var De=Jt(le);if(De==="break")break}if(!kt)return!0;var te=E.findMinLabel(Lt);v.dfsEdgeList.push(new V(Ot,ut+1,nt.VACANT_NODE_LABEL,te.edgeLabel,te.nodeLabel2));var oe=v.dfsEdgeList.length-1;return b.dfsEdgeList[oe]!==v.dfsEdgeList[oe]?!1:j(Lt["".concat(te.edgeLabel,"-").concat(te.nodeLabel2)].projected)},Y="".concat(B.nodeLabel1,"-").concat(B.edgeLabel,"-").concat(B.nodeLabel2);return G(K[Y].projected)}},_.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var E=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push((0,ft.clone)(E))}},_.prototype.subGraphMining=function(E){var b=this,k=this.getSupport(E);if(!(k<this.minSupport)&&this.isMin()){this.report();var N=this.dfsCode.getNodeNum(),g=this.dfsCode.buildRmpath(),v=this.dfsCode.dfsEdgeList[g[0]].toNode,K=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,B={},G={};E.forEach(function(Y){for(var j=b.graphs[Y.graphId],Q=j.nodeMap,Z=new H(Y),rt=g.length-1;rt>=0;rt--){var ut=b.findBackwardEdge(j,Z.edges[g[rt]],Z.edges[g[0]],Z);if(ut){var ht="".concat(b.dfsCode.dfsEdgeList[g[rt]].fromNode,"-").concat(ut.label);G[ht]||(G[ht]={projected:[],toNodeId:b.dfsCode.dfsEdgeList[g[rt]].fromNode,edgeLabel:ut.label}),G[ht].projected.push({graphId:Y.graphId,edge:ut,preNode:Y})}}if(!(N>=b.maxNodeNum)){var kt=b.findForwardPureEdges(j,Z.edges[g[0]],K,Z);kt.forEach(function(Ht){var Rt="".concat(v,"-").concat(Ht.label,"-").concat(Q[Ht.to].label);B[Rt]||(B[Rt]={projected:[],fromNodeId:v,edgeLabel:Ht.label,nodeLabel2:Q[Ht.to].label}),B[Rt].projected.push({graphId:Y.graphId,edge:Ht,preNode:Y})});for(var At=function(Rt){var le=b.findForwardRmpathEdges(j,Z.edges[g[Rt]],K,Z);le.forEach(function(dt){var ot="".concat(b.dfsCode.dfsEdgeList[g[Rt]].fromNode,"-").concat(dt.label,"-").concat(Q[dt.to].label);B[ot]||(B[ot]={projected:[],fromNodeId:b.dfsCode.dfsEdgeList[g[Rt]].fromNode,edgeLabel:dt.label,nodeLabel2:Q[dt.to].label}),B[ot].projected.push({graphId:Y.graphId,edge:dt,preNode:Y})})},rt=0;rt<g.length;rt++)At(rt)}}),Object.keys(G).forEach(function(Y){var j=G[Y],Q=j.toNodeId,Z=j.edgeLabel;b.dfsCode.dfsEdgeList.push(new V(v,Q,"-1",Z,"-1")),b.subGraphMining(G[Y].projected),b.dfsCode.dfsEdgeList.pop()}),Object.keys(B).forEach(function(Y){var j=B[Y],Q=j.fromNodeId,Z=j.edgeLabel,rt=j.nodeLabel2;b.dfsCode.dfsEdgeList.push(new V(Q,v+1,nt.VACANT_NODE_LABEL,Z,rt)),b.subGraphMining(B[Y].projected),b.dfsCode.dfsEdgeList.pop()})}},_.prototype.generate1EdgeFrequentSubGraphs=function(){var E=this.graphs,b=this.directed,k=this.minSupport,N=this.frequentSize1Subgraphs,g={},v={},K={},B={};return Object.keys(E).forEach(function(G){var Y=E[G],j=Y.nodeMap;Y.nodes.forEach(function(Q,Z){var rt=Q.label,ut="".concat(G,"-").concat(rt);if(!K[ut]){var ht=g[rt]||0;ht++,g[rt]=ht}K[ut]={graphKey:G,label:rt},Q.edges.forEach(function(kt){var At=rt,Ht=j[kt.to].label;if(!b&&At>Ht){var Rt=Ht;Ht=At,At=Rt}var le=kt.label,dt="".concat(G,"-").concat(At,"-").concat(le,"-").concat(Ht),ot="".concat(At,"-").concat(le,"-").concat(Ht);if(!v[ot]){var yt=v[ot]||0;yt++,v[ot]=yt}B[dt]={graphId:G,nodeLabel1:At,edgeLabel:le,nodeLabel2:Ht}})})}),Object.keys(g).forEach(function(G){var Y=g[G];if(!(Y<k)){var j={nodes:[],edges:[]};j.nodes.push({id:"0",label:G}),N.push(j)}}),N},_.prototype.run=function(){var E=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var b=this.graphs,k=this.directed,N={};Object.keys(b).forEach(function(g){var v=b[g],K=v.nodeMap;v.nodes.forEach(function(B){var G=E.findForwardRootEdges(v,B);G.forEach(function(Y){var j=K[Y.to],Q="".concat(B.label,"-").concat(Y.label,"-").concat(j.label);N[Q]||(N[Q]={projected:[],nodeLabel1:B.label,edgeLabel:Y.label,nodeLabel2:j.label});var Z={graphId:g,edge:Y,preNode:null};N[Q].projected.push(Z)})})}),Object.keys(N).forEach(function(g){var v=N[g],K=v.projected,B=v.nodeLabel1,G=v.edgeLabel,Y=v.nodeLabel2;E.dfsCode.dfsEdgeList.push(new V(0,1,B,G,Y)),E.subGraphMining(K),E.dfsCode.dfsEdgeList.pop()})}},_}(),M=function(E,b,k,N){var g={};return Object.keys(E).forEach(function(v,K){var B=E[v],G=new nt.Graph(K,!0,b),Y={};B.nodes.forEach(function(j,Q){G.addNode(Q,j[k]),Y[j.id]=Q}),B.edges.forEach(function(j,Q){var Z=Y[j.source],rt=Y[j.target];G.addEdge(-1,Z,rt,j[N])}),G&&G.getNodeNum()&&(g[G.id]=G)}),g},A=function(E,b,k){var N=[];return E.forEach(function(g){var v={nodes:[],edges:[]};g.nodes.forEach(function(K){var B;v.nodes.push((B={id:"".concat(K.id)},B[b]=K.label,B))}),g.edges.forEach(function(K){var B;v.edges.push((B={source:"".concat(K.from),target:"".concat(K.to)},B[k]=K.label,B))}),N.push(v)}),N},y="cluster",x=function(E){var b=E.graphs,k=E.directed,N=k===void 0?!1:k,g=E.nodeLabelProp,v=g===void 0?y:g,K=E.edgeLabelProp,B=K===void 0?y:K,G=M(b,N,v,B),Y=E.minSupport,j=E.maxNodeNum,Q=E.minNodeNum,Z=E.verbose,rt=E.top,ut={graphs:G,minSupport:Y,maxNodeNum:j,minNodeNum:Q,top:rt,verbose:Z,directed:N},ht=new F(ut);ht.run();var kt=A(ht.frequentSubgraphs,v,B);return kt},p=x;R.default=p},68575:function(Se,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.VACANT_NODE_LABEL=R.VACANT_NODE_ID=R.VACANT_GRAPH_ID=R.VACANT_EDGE_LABEL=R.VACANT_EDGE_ID=R.Node=R.Graph=R.Edge=R.AUTO_EDGE_ID=void 0;var et=-1;R.VACANT_EDGE_ID=et;var ft=-1;R.VACANT_NODE_ID=ft;var nt="-1";R.VACANT_EDGE_LABEL=nt;var V="-1";R.VACANT_NODE_LABEL=V;var z=-1;R.VACANT_GRAPH_ID=z;var H="-1";R.AUTO_EDGE_ID=H;var F=function(){function y(x,p,_,E){x===void 0&&(x=et),p===void 0&&(p=ft),_===void 0&&(_=ft),E===void 0&&(E=nt),this.id=x,this.from=p,this.to=_,this.label=E}return y}();R.Edge=F;var M=function(){function y(x,p){x===void 0&&(x=ft),p===void 0&&(p=V),this.id=x,this.label=p,this.edges=[],this.edgeMap={}}return y.prototype.addEdge=function(x){this.edges.push(x),this.edgeMap[x.id]=x},y}();R.Node=M;var A=function(){function y(x,p,_){x===void 0&&(x=ft),p===void 0&&(p=!0),_===void 0&&(_=!1),this.id=x,this.edgeIdAutoIncrease=p,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=_}return y.prototype.getNodeNum=function(){return this.nodes.length},y.prototype.addNode=function(x,p){if(!this.nodeMap[x]){var _=new M(x,p);this.nodes.push(_),this.nodeMap[x]=_,this.nodeLabelMap[p]||(this.nodeLabelMap[p]=[]),this.nodeLabelMap[p].push(x)}},y.prototype.addEdge=function(x,p,_,E){if((this.edgeIdAutoIncrease||x===void 0)&&(x=this.counter++),!(this.nodeMap[p]&&this.nodeMap[_]&&this.nodeMap[_].edgeMap[x])){var b=new F(x,p,_,E);if(this.edges.push(b),this.edgeMap[x]=b,this.nodeMap[p].addEdge(b),this.edgeLabelMap[E]||(this.edgeLabelMap[E]=[]),this.edgeLabelMap[E].push(b),!this.directed){var k=new F(x,_,p,E);this.nodeMap[_].addEdge(k),this.edgeLabelMap[E].push(k)}}},y}();R.Graph=A},82812:function(Se,R,et){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=void 0;var ft=et(97582),nt=F(et(75033)),V=F(et(21146)),z=F(et(78089)),H=et(70643);function F(B){return B&&B.__esModule?B:{default:B}}var M=function(G,Y,j,Q){j===void 0&&(j="cluster"),Q===void 0&&(Q=2);var Z=[],rt=G.nodes;return Y.forEach(function(ut,ht){Z.push(A(rt,ut,ht,j,Q))}),Z},A=function(G,Y,j,Q,Z){var rt=[j],ut=[],ht={};return Y.forEach(function(kt,At){if(kt<=Z&&j!==At){rt.push(At),ut.push(G[At]);var Ht=G[At][Q];ht[Ht]?(ht[Ht].count++,ht[Ht].dists.push(kt)):ht[Ht]={count:1,dists:[kt]}}}),Object.keys(ht).forEach(function(kt){ht[kt].dists=ht[kt].dists.sort(function(At,Ht){return At-Ht})}),{nodeIdx:j,nodeId:G[j].id,nodeIdxs:rt,neighbors:ut,neighborNum:rt.length-1,nodeLabelCountMap:ht}},y=function(G,Y,j,Q,Z){var rt=Math.ceil(j/Y),ut={},ht=0;return Q.forEach(function(kt,At){for(var Ht=0,Rt=0,le=kt.nodeIdxs,dt=kt.neighborNum-1;Ht<rt;){for(var ot=le[1+Math.floor(Math.random()*dt)],yt=0;(ut["".concat(At,"-").concat(ot)]||ut["".concat(ot,"-").concat(At)])&&(ot=Math.floor(Math.random()*Y),yt++,!(yt>2*Y)););if(yt<2*Y&&(ut["".concat(At,"-").concat(ot)]={start:At,end:ot,distance:Z[At][ot]},Ht++,ht++,ht>=j))return ut;if(Rt++,Rt>2*Y)break}if(Ht<rt){var Lt=rt-Ht;rt=(rt+Lt)/(Y-At-1)}}),ut},x=function(G,Y,j,Q){var Z=j.nodes;return Q||(Q={}),Object.keys(G).forEach(function(rt){var ut,ht;if(!(Q&&Q[rt])){Q[rt]={nodes:[],edges:[]};var kt=G[rt],At=(ut=Y[kt.start])===null||ut===void 0?void 0:ut.nodeIdxs,Ht=(ht=Y[kt.end])===null||ht===void 0?void 0:ht.nodeIdxs;if(!(!At||!Ht)){var Rt=new Set(Ht),le=At.filter(function(Ot){return Rt.has(Ot)});if(!(!le||!le.length)){for(var dt={},ot=le.length,yt=0;yt<ot;yt++){var Lt=Z[le[yt]];Q[rt].nodes.push(Lt),dt[Lt.id]=!0}j.edges.forEach(function(Ot){dt[Ot.source]&&dt[Ot.target]&&Q[rt].edges.push(Ot)})}}}}),Q},p=function(G,Y,j,Q){var Z,rt,ut={};G.nodes.forEach(function(kt){ut[kt.id]=kt});var ht=0;return!(!((Z=Y==null?void 0:Y.edges)===null||Z===void 0)&&Z.length)||((rt=Y==null?void 0:Y.nodes)===null||rt===void 0?void 0:rt.length)<2?0:(G.edges.forEach(function(kt){var At=ut[kt.source][j],Ht=ut[kt.target][j],Rt=Y==null?void 0:Y.nodes[0][j],le=Y==null?void 0:Y.nodes[1][j],dt=Y==null?void 0:Y.edges[0][Q];kt[Q]===dt&&(At===Rt&&Ht===le||At===le&&Ht===Rt)&&ht++}),ht)},_=function(G,Y,j){for(var Q=1/0,Z=0,rt=function(kt){var At=G[kt],Ht=Object.keys(At).sort(function(Ot,Wt){return At[Ot]-At[Wt]}),Rt=10,le=[];Ht.forEach(function(Ot,Wt){le[Wt%Rt]||(le[Wt%Rt]={graphs:[],totalCount:0,aveCount:0}),le[Wt%Rt].graphs.push(Ot),le[Wt%Rt].totalCount+=At[Ot]});var dt=0,ot=[];le.forEach(function(Ot){var Wt=Ot.totalCount/Ot.graphs.length;Ot.aveCount=Wt,ot.push(Wt);var Jt=0,De=Ot.length;Ot.graphs.forEach(function(te,oe){var me=At[te];Ot.graphs.forEach(function(Ce,_e){oe!==_e&&(Jt+=Math.abs(me-At[Ce]))})}),Jt/=De*(De-1)/2,dt+=Jt}),dt/=le.length;var yt=0;ot.forEach(function(Ot,Wt){ot.forEach(function(Jt,De){Wt!==De&&(yt+=Math.abs(Ot-Jt))}),yt/=ot.length*(ot.length-1)/2});var Lt=yt-dt;Q<Lt&&(Q=Lt,Z=kt)},ut=0;ut<Y;ut++)rt(ut);return{structure:j[Z],structureCountMap:G[Z]}},E=function(G,Y){var j={},Q={};return G.forEach(function(Z,rt){j[Z.id]={idx:rt,node:Z,degree:0,inDegree:0,outDegree:0};var ut=Z[Y];Q[ut]||(Q[ut]=[]),Q[ut].push(Z)}),{nodeMap:j,nodeLabelMap:Q}},b=function(G,Y,j){var Q={},Z={};return G.forEach(function(rt,ut){Q["".concat(H.uniqueId)]={idx:ut,edge:rt};var ht=rt[Y];Z[ht]||(Z[ht]=[]),Z[ht].push(rt);var kt=j[rt.source];kt&&(kt.degree++,kt.outDegree++);var At=j[rt.target];At&&(At.degree++,At.inDegree++)}),{edgeMap:Q,edgeLabelMap:Z}},k=function(G,Y,j){var Q=Y.length,Z={};return Y.forEach(function(rt,ut){for(var ht=j?0:ut+1,kt=G[ut].id,At=ht;At<Q;At++)if(ut!==At){var Ht=G[At].id,Rt=rt[At];Z["".concat(kt,"-").concat(Ht)]=Rt,j||(Z["".concat(Ht,"-").concat(kt)]=Rt)}}),Z},N=function(G,Y,j,Q,Z,rt,ut,ht,kt,At,Ht){var Rt,le="".concat(Y.id,"-").concat(j.id);if(At&&At[le])return At[le];var dt=Ht?Ht[le]:void 0;if(!dt){var ot=(Rt={},Rt[le]={start:Q[Y.id].idx,end:Q[j.id].idx,distance:Z},Rt);Ht=x(ot,rt,G,Ht),dt=Ht[le]}return p(dt,ut,ht,kt)},g=function(G,Y,j,Q){var Z,rt,ut,ht=(Z=G[Y])===null||Z===void 0?void 0:Z.degree,kt=(rt=G[Y])===null||rt===void 0?void 0:rt.inDegree,At=(ut=G[Y])===null||ut===void 0?void 0:ut.outDegree;return G[Y]===void 0&&(ht=1/0,kt=1/0,At=1/0,Q[Y].forEach(function(Ht){var Rt=j[Ht.id].degree;ht>Rt&&(ht=Rt);var le=j[Ht.id].inDegree;kt>le&&(kt=le);var dt=j[Ht.id].outDegree;At>dt&&(At=dt)}),G[Y]={degree:ht,inDegree:kt,outDegree:At}),{minPatternNodeLabelDegree:ht,minPatternNodeLabelInDegree:kt,minPatternNodeLabelOutDegree:At}},v=function(G,Y,j,Q,Z,rt,ut){var ht;if(j===void 0&&(j=!1),rt===void 0&&(rt="cluster"),ut===void 0&&(ut="cluster"),!(!G||!G.nodes)){var kt=G.nodes.length;if(kt){var At=(0,nt.default)(G,j),Ht=(0,nt.default)(Y,j),Rt=k(G.nodes,At,j),le=k(Y.nodes,Ht,j),dt=E(G.nodes,rt),ot=dt.nodeMap,yt=dt.nodeLabelMap,Lt=E(Y.nodes,rt),Ot=Lt.nodeMap,Wt=Lt.nodeLabelMap;b(G.edges,ut,ot);var Jt=b(Y.edges,ut,Ot).edgeLabelMap,De=[];Ht==null||Ht.forEach(function(bn){De=De.concat(bn)}),Z||(Z=Math.max.apply(Math,(0,ft.__spreadArray)((0,ft.__spreadArray)([],De,!1),[2],!1))),Q||(Q=Z);var te=M(G,At,rt,Q),oe=M(Y,Ht,rt,Q),me=Math.min(100,kt*(kt-1)/2),Ce=y(Q,kt,me,te,At),_e=x(Ce,te,G),zt=10,ue=1,Pe=1,Xt=4,ie={graphs:_e,nodeLabelProp:rt,edgeLabelProp:ut,minSupport:ue,minNodeNum:Pe,maxNodeNum:Xt,directed:j},Ie=(0,V.default)(ie).slice(0,zt),se=Ie.length,Te=[];Ie.forEach(function(bn,qn){Te[qn]={},Object.keys(_e).forEach(function(Gn){var zn=_e[Gn],ya=p(zn,bn,rt,ut);Te[qn][Gn]=ya})});var Be=_(Te,se,Ie),Tt=Be.structure,nr=Be.structureCountMap,Ir=Y.nodes[0],Zr=[],Ur=(ht=Y.nodes[0])===null||ht===void 0?void 0:ht[rt],wn=-1/0;Y.nodes.forEach(function(bn){var qn=bn[rt],Gn=yt[qn];(Gn==null?void 0:Gn.length)>wn&&(wn=Gn.length,Zr=Gn,Ur=qn,Ir=bn)});var Xr={},Sn={},Kn={},Fn={},pn={},er={};Object.keys(Wt).forEach(function(bn,qn){pn[bn]=[],j&&(er[bn]=[]);var Gn=-1/0,zn=Wt[bn],ya={};zn.forEach(function(ar){var Br=le["".concat(Ir.id,"-").concat(ar.id)];if(Br&&pn[bn].push(Br),Gn<Br&&(Gn=Br),ya["".concat(Ir.id,"-").concat(ar.id)]={start:0,end:Ot[ar.id].idx,distance:Br},j){var Pr=le["".concat(ar.id,"-").concat(Ir.id)];Pr&&er[bn].push(Pr)}}),pn[bn]=pn[bn].sort(function(ar,Br){return ar-Br}),j&&(er[bn]=er[bn].sort(function(ar,Br){return ar-Br})),Sn=x(ya,oe,Y,Sn);var W=[];if(Object.keys(ya).forEach(function(ar){if(Kn[ar]){W.push(Kn[ar]);return}var Br=Sn[ar];Kn[ar]=p(Br,Tt,rt,ut),W.push(Kn[ar])}),W=W.sort(function(ar,Br){return Br-ar}),Fn["".concat(Ir.id,"-").concat(bn)]=W,bn!==Ur)for(var qe=(Zr==null?void 0:Zr.length)||0,be=function(Br){var Pr=Zr[Br],cn=te[ot[Pr.id].idx],xn=cn.nodeLabelCountMap[bn],tn=Wt[bn].length;if(!xn||xn.count<tn)return Zr.splice(Br,1),"continue";for(var vt=!1,bt=0;bt<tn;bt++)if(xn.dists[bt]>pn[bn][bt]){vt=!0;break}if(vt)return Zr.splice(Br,1),"continue";var P={};cn.neighbors.forEach(function(q){var Et=Rt["".concat(Pr.id,"-").concat(q.id)];P["".concat(Pr.id,"-").concat(q.id)]={start:ot[Pr.id].idx,end:ot[q.id].idx,distance:Et}}),_e=x(P,te,G,_e);var I=[];Object.keys(P).forEach(function(q){if(nr[q]){I.push(nr[q]);return}var Et=_e[q];nr[q]=p(Et,Tt,rt,ut),I.push(nr[q])}),I=I.sort(function(q,Et){return Et-q});for(var T=!1,bt=0;bt<tn;bt++)if(I[bt]<W[bt]){T=!0;break}if(T)return Zr.splice(Br,1),"continue"},or=qe-1;or>=0;or--)be(or)});var cr=[];Zr==null||Zr.forEach(function(bn){for(var qn=ot[bn.id].idx,Gn=A(G.nodes,At[qn],qn,rt,Z),zn=Gn.neighbors,ya=zn.length,W=!1,qe=ya-1;qe>=0;qe--){if(zn.length+1<Y.nodes.length){W=!0;return}var be=zn[qe],or=be[rt];if(!Wt[or]||!Wt[or].length){zn.splice(qe,1);continue}if(!pn[or]||!pn[or].length){zn.splice(qe,1);continue}var ar="".concat(bn.id,"-").concat(be.id),Br=Rt[ar],Pr=pn[or].length-1,cn=pn[or][Pr];if(Br>cn){zn.splice(qe,1);continue}if(j){var xn="".concat(be.id,"-").concat(bn.id),tn=Rt[xn];Pr=er[or].length-1;var vt=er[or][Pr];if(tn>vt){zn.splice(qe,1);continue}}var bt=nr[ar]?nr[ar]:N(G,bn,be,ot,Br,te,Tt,rt,ut,nr,_e),P="".concat(Ir.id,"-").concat(or),I=Fn[P][Fn[P].length-1];if(bt<I){zn.splice(qe,1);continue}var T=g(Xr,or,Ot,Wt),q=T.minPatternNodeLabelDegree,Et=T.minPatternNodeLabelInDegree,Gt=T.minPatternNodeLabelOutDegree;if(ot[be.id].degree<q){zn.splice(qe,1);continue}}W||cr.push({nodes:[bn].concat(zn)})});var dr=(0,z.default)(Y,Ir.id,!1).length,Gr={};j?(Object.keys(dr).forEach(function(bn){var qn=Ot[bn].node[rt];Gr[qn]?Gr[qn].push(dr[bn]):Gr[qn]=[dr[bn]]}),Object.keys(Gr).forEach(function(bn){Gr[bn].sort(function(qn,Gn){return qn-Gn})})):Gr=pn;for(var sn=cr.length,yn=function(qn){var Gn=cr[qn],zn=Gn.nodes[0],ya={},W={};Gn.nodes.forEach(function(Yr,$t){W[Yr.id]={idx:$t,node:Yr,degree:0,inDegree:0,outDegree:0};var It=Yr[rt];ya[It]?ya[It]++:ya[It]=1});var qe=[],be={};G.edges.forEach(function(Yr){W[Yr.source]&&W[Yr.target]&&(qe.push(Yr),be[Yr[ut]]?be[Yr[ut]]++:be[Yr[ut]]=1,W[Yr.source].degree++,W[Yr.target].degree++,W[Yr.source].outDegree++,W[Yr.target].inDegree++)});for(var or=Object.keys(Jt).length,ar=!1,Br=0;Br<or;Br++){var Pr=Object.keys(Jt)[Br];if(!be[Pr]||be[Pr]<Jt[Pr].length){ar=!0;break}}if(ar)return cr.splice(qn,1),"continue";var cn=qe.length;if(cn<Y.edges.length)return cr.splice(qn,1),"break";for(var xn=!1,tn=function($t){var It=qe[$t],ne=It[ut],xe=Jt[ne];if(!xe||!xe.length)return be[ne]--,xe&&be[ne]<xe.length?(xn=!0,"break"):(qe.splice($t,1),W[It.source].degree--,W[It.target].degree--,W[It.source].outDegree--,W[It.target].inDegree--,"continue");var pe=W[It.source].node[rt],ke=W[It.target].node[rt],sr=!1;if(xe.forEach(function(lr){var en=Ot[lr.source].node,Dn=Ot[lr.target].node;en[rt]===pe&&Dn[rt]===ke&&(sr=!0),!j&&en[rt]===ke&&Dn[rt]===pe&&(sr=!0)}),!sr)return be[ne]--,xe&&be[ne]<xe.length?(xn=!0,"break"):(qe.splice($t,1),W[It.source].degree--,W[It.target].degree--,W[It.source].outDegree--,W[It.target].inDegree--,"continue")},Br=cn-1;Br>=0;Br--){var vt=tn(Br);if(vt==="break")break}if(xn)return cr.splice(qn,1),"continue";Gn.edges=qe;var bt=(0,z.default)(Gn,Gn.nodes[0].id,!1).length;if(Object.keys(bt).reverse().forEach(function(Yr){if(!(Yr===Gn.nodes[0].id||xn)){if(bt[Yr]===1/0){var $t=W[Yr].node[rt];if(ya[$t]--,ya[$t]<Wt[$t].length){xn=!0;return}var It=Gn.nodes.indexOf(W[Yr].node);Gn.nodes.splice(It,1),W[Yr]=void 0;return}var ne=ot[Yr].node[rt];if(!Gr[ne]||!Gr[ne].length||bt[Yr]>Gr[ne][Gr[ne].length-1]){var $t=W[Yr].node[rt];if(ya[$t]--,ya[$t]<Wt[$t].length){xn=!0;return}var It=Gn.nodes.indexOf(W[Yr].node);Gn.nodes.splice(It,1),W[Yr]=void 0}}}),xn)return cr.splice(qn,1),"continue";for(var P=!0,I=0;P&&!xn;){P=!1;var T=j?W[zn.id].degree<Ot[Ir.id].degree||W[zn.id].inDegree<Ot[Ir.id].inDegree||W[zn.id].outDegree<Ot[Ir.id].outDegree:W[zn.id].degree<Ot[Ir.id].degree;if(T){xn=!0;break}if(ya[zn[rt]]<Wt[zn[rt]].length){xn=!0;break}for(var q=Gn.nodes.length,Et=q-1;Et>=0;Et--){var Gt=Gn.nodes[Et],Dt=W[Gt.id].degree,ee=W[Gt.id].inDegree,Ye=W[Gt.id].outDegree,Ae=Gt[rt],fr=g(Xr,Ae,Ot,Wt),Hr=fr.minPatternNodeLabelDegree,wr=fr.minPatternNodeLabelInDegree,hn=fr.minPatternNodeLabelOutDegree,Yn=j?Dt<Hr||ee<wr||Ye<hn:Dt<Hr;if(Yn){if(ya[Gt[rt]]--,ya[Gt[rt]]<Wt[Gt[rt]].length){xn=!0;break}Gn.nodes.splice(Et,1),W[Gt.id]=void 0,P=!0}}if(xn||!P&&I!==0)break;cn=qe.length;for(var Ze=cn-1;Ze>=0;Ze--){var xr=qe[Ze];if(!W[xr.source]||!W[xr.target]){qe.splice(Ze,1);var Dr=xr[ut];if(be[Dr]--,W[xr.source]&&(W[xr.source].degree--,W[xr.source].outDegree--),W[xr.target]&&(W[xr.target].degree--,W[xr.target].inDegree--),Jt[Dr]&&be[Dr]<Jt[Dr].length){xn=!0;break}P=!0}}I++}if(xn||xn||Gn.nodes.length<Y.nodes.length||qe.length<Y.edges.length)return cr.splice(qn,1),"continue"},ln=sn-1;ln>=0;ln--){var Vn=yn(ln);if(Vn==="break")break}for(var ca=cr.length,oa=function(qn){var Gn=cr[qn],zn={};Gn.edges.forEach(function(qe){var be="".concat(qe.source,"-").concat(qe.target,"-").concat(qe.label);zn[be]?zn[be]++:zn[be]=1});for(var ya=function(be){var or=cr[be],ar={};or.edges.forEach(function(Pr){var cn="".concat(Pr.source,"-").concat(Pr.target,"-").concat(Pr.label);ar[cn]?ar[cn]++:ar[cn]=1});var Br=!0;Object.keys(ar).length!==Object.keys(zn).length?Br=!1:Object.keys(zn).forEach(function(Pr){ar[Pr]!==zn[Pr]&&(Br=!1)}),Br&&cr.splice(be,1)},W=ca-1;W>qn;W--)ya(W);ca=cr.length},ln=0;ln<=ca-1;ln++)oa(ln);return cr}}},K=v;R.default=K},5170:function(Se,R,et){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=void 0;var ft=V(et(62238)),nt=et(70643);function V(F){return F&&F.__esModule?F:{default:F}}var z=function(M,A,y,x){A===void 0&&(A=!1),y===void 0&&(y="weight"),x===void 0&&(x=1e3);var p=M.nodes,_=p===void 0?[]:p,E=M.edges,b=E===void 0?[]:E,k={},N={};_.forEach(function(rt,ut){var ht=(0,nt.uniqueId)();rt.clusterId=ht,k[ht]={id:ht,nodes:[rt]},N[rt.id]={node:rt,idx:ut}});var g=(0,ft.default)(M,A),v=[],K={};g.forEach(function(rt,ut){var ht=0,kt=_[ut].id;K[kt]={},rt.forEach(function(At,Ht){if(At){ht+=At;var Rt=_[Ht].id;K[kt][Rt]=At}}),v.push(ht)});for(var B=0,G=function(){var ut=!1;if(_.forEach(function(ht){var kt={};Object.keys(K[ht.id]).forEach(function(Lt){var Ot=K[ht.id][Lt],Wt=N[Lt].node,Jt=Wt.clusterId;kt[Jt]||(kt[Jt]=0),kt[Jt]+=Ot});var At=-1/0,Ht=[];if(Object.keys(kt).forEach(function(Lt){At<kt[Lt]?(At=kt[Lt],Ht=[Lt]):At===kt[Lt]&&Ht.push(Lt)}),!(Ht.length===1&&Ht[0]===ht.clusterId)){var Rt=Ht.indexOf(ht.clusterId);if(Rt>=0&&Ht.splice(Rt,1),Ht&&Ht.length){ut=!0;var le=k[ht.clusterId],dt=le.nodes.indexOf(ht);le.nodes.splice(dt,1);var ot=Math.floor(Math.random()*Ht.length),yt=k[Ht[ot]];yt.nodes.push(ht),ht.clusterId=yt.id}}}),!ut)return"break";B++};B<x;){var Y=G();if(Y==="break")break}Object.keys(k).forEach(function(rt){var ut=k[rt];(!ut.nodes||!ut.nodes.length)&&delete k[rt]});var j=[],Q={};b.forEach(function(rt){var ut=rt.source,ht=rt.target,kt=rt[y]||1,At=N[ut].node.clusterId,Ht=N[ht].node.clusterId,Rt="".concat(At,"---").concat(Ht);if(Q[Rt])Q[Rt].weight+=kt,Q[Rt].count++;else{var le={source:At,target:Ht,weight:kt,count:1};Q[Rt]=le,j.push(le)}});var Z=[];return Object.keys(k).forEach(function(rt){Z.push(k[rt])}),{clusters:Z,clusterEdges:j}},H=z;R.default=H},35179:function(Se,R,et){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=void 0;var ft=et(13810),nt=F(et(62238)),V=F(et(29741)),z=et(3665),H=et(26838);function F(p){return p&&p.__esModule?p:{default:p}}var M=function(_,E,b,k){for(var N=E.length,g=2*k,v=0,K=0;K<N;K++)for(var B=_[K].clusterId,G=0;G<N;G++){var Y=_[G].clusterId;if(B===Y){var j=E[K][G]||0,Q=b[K]||0,Z=b[G]||0;v+=j-Q*Z/g}}return v*=1/g,v},A=function(_,E){_===void 0&&(_=[]);for(var b=_.length,k=new V.default([]),N=0;N<b;N++)k=k.add(new V.default(E[N]));var g=k.avg(b);g.normalize();for(var v=0,N=0;N<b;N++){var K=new V.default(E[N]),B=K.squareEuclideanDistance(g);v+=B}var G=[];_.forEach(function(){G.push([])});for(var N=0;N<b;N++){var K=new V.default(E[N]);_[N].clusterInertial=0;for(var Y=0;Y<b;Y++){if(N===Y){G[N][Y]=0;continue}var j=new V.default(E[Y]);G[N][Y]=K.squareEuclideanDistance(j),_[N].clusterInertial+=G[N][Y]}}for(var Q=0,Z=2*b*v,N=0;N<b;N++)for(var rt=_[N].clusterId,Y=0;Y<b;Y++){var ut=_[Y].clusterId;if(!(N===Y||rt!==ut)){var ht=_[N].clusterInertial*_[Y].clusterInertial/Math.pow(Z,2)-G[N][Y]/Z;Q+=ht}}return Number(Q.toFixed(4))},y=function(_,E,b,k,N,g,v,K,B){E===void 0&&(E=!1),b===void 0&&(b="weight"),k===void 0&&(k=1e-4),N===void 0&&(N=!1),g===void 0&&(g=void 0),v===void 0&&(v=[]),K===void 0&&(K=["id"]),B===void 0&&(B=1);var G=_.nodes,Y=G===void 0?[]:G,j=_.edges,Q=j===void 0?[]:j,Z=[];if(N){Y.forEach(function(_e,zt){_e.properties=_e.properties||{},_e.originIndex=zt});var rt=[];Y.every(function(_e){return _e.hasOwnProperty("nodeType")})&&(rt=Array.from(new Set(Y.map(function(_e){return _e.nodeType}))),Y.forEach(function(_e){_e.properties.nodeType=rt.findIndex(function(zt){return zt===_e.nodeType})}));var ut=(0,z.getAllProperties)(Y,g);Z=(0,H.oneHot)(ut,v,K)}var ht=1,kt={},At={};Y.forEach(function(_e,zt){var ue=String(ht++);_e.clusterId=ue,kt[ue]={id:ue,nodes:[_e]},At[_e.id]={node:_e,idx:zt}});var Ht=(0,nt.default)(_,E),Rt=[],le={},dt=0;Ht.forEach(function(_e,zt){var ue=0,Pe=Y[zt].id;le[Pe]={},_e.forEach(function(Xt,ie){if(Xt){ue+=Xt;var Ie=Y[ie].id;le[Pe][Ie]=Xt,dt+=Xt}}),Rt.push(ue)}),dt/=2;for(var ot=1/0,yt=1/0,Lt=0,Ot=[],Wt={};;){N&&Y.every(function(_e){return _e.hasOwnProperty("properties")})?ot=M(Y,Ht,Rt,dt)+A(Y,Z)*B:ot=M(Y,Ht,Rt,dt),Lt===0&&(yt=ot,Ot=Y,Wt=kt);var Jt=ot>0&&ot>yt&&ot-yt<k;if(ot>yt&&(Ot=Y.map(function(_e){return{node:_e,clusterId:_e.clusterId}}),Wt=(0,ft.clone)(kt),yt=ot),Jt||Lt>100)break;Lt++,Object.keys(kt).forEach(function(_e){var zt=0;Q.forEach(function(ue){var Pe=ue.source,Xt=ue.target,ie=At[Pe].node.clusterId,Ie=At[Xt].node.clusterId;(ie===_e&&Ie!==_e||Ie===_e&&ie!==_e)&&(zt=zt+(ue[b]||1))}),kt[_e].sumTot=zt}),Y.forEach(function(_e,zt){var ue=kt[_e.clusterId],Pe=0,Xt,ie=Rt[zt]/(2*dt),Ie=0,se=ue.nodes;se.forEach(function(Sn){var Kn=At[Sn.id].idx;Ie+=Ht[zt][Kn]||0});var Te=Ie-ue.sumTot*ie,Be=se.filter(function(Sn){return Sn.id!==_e.id}),Tt=[];Be.forEach(function(Sn,Kn){Tt[Kn]=Z[Sn.originIndex]});var nr=A(Be,Z)*B,Ir=le[_e.id];if(Object.keys(Ir).forEach(function(Sn){var Kn=At[Sn].node,Fn=Kn.clusterId;if(Fn!==_e.clusterId){var pn=kt[Fn],er=pn.nodes;if(!(!er||!er.length)){var cr=0;er.forEach(function(Vn){var ca=At[Vn.id].idx;cr+=Ht[zt][ca]||0});var dr=cr-pn.sumTot*ie,Gr=er.concat([_e]),sn=[];Gr.forEach(function(Vn,ca){sn[ca]=Z[Vn.originIndex]});var yn=A(Gr,Z)*B,ln=dr-Te;N&&(ln=dr+yn-(Te+nr)),ln>Pe&&(Pe=ln,Xt=pn)}}}),Pe>0){Xt.nodes.push(_e);var Zr=_e.clusterId;_e.clusterId=Xt.id;var Ur=ue.nodes.indexOf(_e);ue.nodes.splice(Ur,1);var wn=0,Xr=0;Q.forEach(function(Sn){var Kn=Sn.source,Fn=Sn.target,pn=At[Kn].node.clusterId,er=At[Fn].node.clusterId;(pn===Xt.id&&er!==Xt.id||er===Xt.id&&pn!==Xt.id)&&(wn=wn+(Sn[b]||1)),(pn===Zr&&er!==Zr||er===Zr&&pn!==Zr)&&(Xr=Xr+(Sn[b]||1))}),Xt.sumTot=wn,ue.sumTot=Xr}})}var De={},te=0;Object.keys(Wt).forEach(function(_e){var zt=Wt[_e];if(!zt.nodes||!zt.nodes.length){delete Wt[_e];return}var ue=String(te+1);ue!==_e&&(zt.id=ue,zt.nodes=zt.nodes.map(function(Pe){return{id:Pe.id,clusterId:ue}}),Wt[ue]=zt,De[_e]=ue,delete Wt[_e],te++)}),Ot.forEach(function(_e){var zt=_e.node,ue=_e.clusterId;zt&&(zt.clusterId=ue,zt.clusterId&&De[zt.clusterId]&&(zt.clusterId=De[zt.clusterId]))});var oe=[],me={};Q.forEach(function(_e){var zt=_e.source,ue=_e.target,Pe=_e[b]||1,Xt=At[zt].node.clusterId,ie=At[ue].node.clusterId;if(!(!Xt||!ie)){var Ie="".concat(Xt,"---").concat(ie);if(me[Ie])me[Ie].weight+=Pe,me[Ie].count++;else{var se={source:Xt,target:ie,weight:Pe,count:1};me[Ie]=se,oe.push(se)}}});var Ce=[];return Object.keys(Wt).forEach(function(_e){Ce.push(Wt[_e])}),{clusters:Ce,clusterEdges:oe}},x=y;R.default=x},89454:function(Se,R,et){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=void 0;var ft=z(et(38823)),nt=z(et(57085)),V=et(70643);function z(y){return y&&y.__esModule?y:{default:y}}var H=function(x,p){var _=[],E=x.nodes,b=E===void 0?[]:E,k=x.edges,N=k===void 0?[]:k;if(b.length===0)return _;var g=b[0],v=new Set;v.add(g);var K=function(Z,rt){return p?Z.weight-rt.weight:0},B=new nt.default(K);for((0,V.getEdgesByNodeId)(g.id,N).forEach(function(Q){B.insert(Q)});!B.isEmpty();){var G=B.delMin(),Y=G.source,j=G.target;v.has(Y)&&v.has(j)||(_.push(G),v.has(Y)||(v.add(Y),(0,V.getEdgesByNodeId)(Y,N).forEach(function(Q){B.insert(Q)})),v.has(j)||(v.add(j),(0,V.getEdgesByNodeId)(j,N).forEach(function(Q){B.insert(Q)})))}return _},F=function(x,p){var _=[],E=x.nodes,b=E===void 0?[]:E,k=x.edges,N=k===void 0?[]:k;if(b.length===0)return _;var g=N.map(function(Y){return Y});p&&g.sort(function(Y,j){return Y.weight-j.weight});for(var v=new ft.default(b.map(function(Y){return Y.id}));g.length>0;){var K=g.shift(),B=K.source,G=K.target;v.connected(B,G)||(_.push(K),v.union(B,G))}return _},M=function(x,p,_){var E={prim:H,kruskal:F};return _?E[_](x,p):F(x,p)},A=M;R.default=A},74926:function(Se,R,et){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=void 0;var ft=V(et(82556)),nt=et(70643);function V(F){return F&&F.__esModule?F:{default:F}}var z=function(M,A,y){typeof A!="number"&&(A=1e-6),typeof y!="number"&&(y=.85);for(var x=1,p=0,_=1e3,E=M.nodes,b=E===void 0?[]:E,k=M.edges,N=k===void 0?[]:k,g=b.length,v,K={},B={},G=0;G<g;++G){var Y=b[G],j=Y.id;K[j]=1/g,B[j]=1/g}for(var Q=(0,ft.default)(M);_>0&&x>A;){p=0;for(var G=0;G<g;++G){var Y=b[G],j=Y.id;if(v=0,Q[Y.id].inDegree===0)K[j]=0;else{for(var Z=(0,nt.getNeighbors)(j,N,"source"),rt=0;rt<Z.length;++rt){var ut=Z[rt],ht=Q[ut].outDegree;ht>0&&(v+=B[ut]/ht)}K[j]=y*v,p+=K[j]}}p=(1-p)/g,x=0;for(var G=0;G<g;++G){var Y=b[G],j=Y.id;v=K[j]+p,x+=Math.abs(v-B[j]),B[j]=v}_-=1}return B},H=z;R.default=H},57085:function(Se,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=void 0;var et=function(z,H){return z-H},ft=function(){function V(z){z===void 0&&(z=et),this.compareFn=z,this.list=[]}return V.prototype.getLeft=function(z){return 2*z+1},V.prototype.getRight=function(z){return 2*z+2},V.prototype.getParent=function(z){return z===0?null:Math.floor((z-1)/2)},V.prototype.isEmpty=function(){return this.list.length<=0},V.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},V.prototype.delMin=function(){var z=this.top(),H=this.list.pop();return this.list.length>0&&(this.list[0]=H,this.moveDown(0)),z},V.prototype.insert=function(z){if(z!==null){this.list.push(z);var H=this.list.length-1;return this.moveUp(H),!0}return!1},V.prototype.moveUp=function(z){for(var H=this.getParent(z);z&&z>0&&this.compareFn(this.list[H],this.list[z])>0;){var F=this.list[H];this.list[H]=this.list[z],this.list[z]=F,z=H,H=this.getParent(z)}},V.prototype.moveDown=function(z){var H,F=z,M=this.getLeft(z),A=this.getRight(z),y=this.list.length;M!==null&&M<y&&this.compareFn(this.list[F],this.list[M])>0?F=M:A!==null&&A<y&&this.compareFn(this.list[F],this.list[A])>0&&(F=A),z!==F&&(H=[this.list[F],this.list[z]],this.list[z]=H[0],this.list[F]=H[1],this.moveDown(F))},V}(),nt=ft;R.default=nt},88481:function(Se,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=R.LinkedListNode=void 0;var et=function(H,F){return H===F},ft=function(){function z(H,F){F===void 0&&(F=null),this.value=H,this.next=F}return z.prototype.toString=function(H){return H?H(this.value):"".concat(this.value)},z}();R.LinkedListNode=ft;var nt=function(){function z(H){H===void 0&&(H=et),this.head=null,this.tail=null,this.compare=H}return z.prototype.prepend=function(H){var F=new ft(H,this.head);return this.head=F,this.tail||(this.tail=F),this},z.prototype.append=function(H){var F=new ft(H);return this.head?(this.tail.next=F,this.tail=F,this):(this.head=F,this.tail=F,this)},z.prototype.delete=function(H){if(!this.head)return null;for(var F=null;this.head&&this.compare(this.head.value,H);)F=this.head,this.head=this.head.next;var M=this.head;if(M!==null)for(;M.next;)this.compare(M.next.value,H)?(F=M.next,M.next=M.next.next):M=M.next;return this.compare(this.tail.value,H)&&(this.tail=M),F},z.prototype.find=function(H){var F=H.value,M=F===void 0?void 0:F,A=H.callback,y=A===void 0?void 0:A;if(!this.head)return null;for(var x=this.head;x;){if(y&&y(x.value)||M!==void 0&&this.compare(x.value,M))return x;x=x.next}return null},z.prototype.deleteTail=function(){var H=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,H;for(var F=this.head;F.next;)F.next.next?F=F.next:F.next=null;return this.tail=F,H},z.prototype.deleteHead=function(){if(!this.head)return null;var H=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),H},z.prototype.fromArray=function(H){var F=this;return H.forEach(function(M){return F.append(M)}),this},z.prototype.toArray=function(){for(var H=[],F=this.head;F;)H.push(F),F=F.next;return H},z.prototype.reverse=function(){for(var H=this.head,F=null,M=null;H;)M=H.next,H.next=F,F=H,H=M;this.tail=this.head,this.head=F},z.prototype.toString=function(H){return H===void 0&&(H=void 0),this.toArray().map(function(F){return F.toString(H)}).toString()},z}(),V=nt;R.default=V},93026:function(Se,R,et){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=void 0;var ft=nt(et(88481));function nt(H){return H&&H.__esModule?H:{default:H}}var V=function(){function H(){this.linkedList=new ft.default}return H.prototype.isEmpty=function(){return!this.linkedList.head},H.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},H.prototype.enqueue=function(F){this.linkedList.append(F)},H.prototype.dequeue=function(){var F=this.linkedList.deleteHead();return F?F.value:null},H.prototype.toString=function(F){return this.linkedList.toString(F)},H}(),z=V;R.default=z},38823:function(Se,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=void 0;var et=function(){function nt(V){this.count=V.length,this.parent={};for(var z=0,H=V;z<H.length;z++){var F=H[z];this.parent[F]=F}}return nt.prototype.find=function(V){for(;this.parent[V]!==V;)V=this.parent[V];return V},nt.prototype.union=function(V,z){var H=this.find(V),F=this.find(z);H!==F&&(H<F?(this.parent[z]!==z&&this.union(this.parent[z],V),this.parent[z]=this.parent[V]):(this.parent[V]!==V&&this.union(this.parent[V],z),this.parent[V]=this.parent[z]))},nt.prototype.connected=function(V,z){return this.find(V)===this.find(z)},nt}(),ft=et;R.default=ft},17892:function(Se,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.DistanceType=void 0;var et;R.DistanceType=et,function(ft){ft.EuclideanDistance="euclideanDistance"}(et||(R.DistanceType=et={}))},70643:function(Se,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.uniqueId=R.getOutEdgesNodeId=R.getNeighbors=R.getEdgesByNodeId=void 0;var et=function(H,F,M){F===void 0&&(F=[]);var A=F.filter(function(_){return _.source===H||_.target===H});if(M==="target"){var y=function(E){return E.source===H};return A.filter(y).map(function(_){return _.target})}if(M==="source"){var x=function(E){return E.target===H};return A.filter(x).map(function(_){return _.source})}var p=function(E){return E.source===H?E.target:E.source};return A.map(p)};R.getNeighbors=et;var ft=function(H,F){return F.filter(function(M){return M.source===H})};R.getOutEdgesNodeId=ft;var nt=function(H,F){return F.filter(function(M){return M.source===H||M.target===H})};R.getEdgesByNodeId=nt;var V=function(H){H===void 0&&(H=0);var F="".concat(Math.random()).split(".")[1].substr(0,5),M="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(H,"-").concat(F).concat(M)};R.uniqueId=V},26838:function(Se,R,et){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.oneHot=R.getDistance=R.getAllKeyValueMap=R.default=void 0;var ft=et(13810),nt=et(17892),V=z(et(29741));function z(y){return y&&y.__esModule?y:{default:y}}var H=function(x,p,_){var E=[];p!=null&&p.length?E=p:(x.forEach(function(k){E=E.concat(Object.keys(k))}),E=(0,ft.uniq)(E));var b={};return E.forEach(function(k){var N=[];x.forEach(function(g){g[k]!==void 0&&g[k]!==""&&N.push(g[k])}),N.length&&!(_!=null&&_.includes(k))&&(b[k]=(0,ft.uniq)(N))}),b};R.getAllKeyValueMap=H;var F=function(x,p,_){var E=H(x,p,_),b=[];if(!Object.keys(E).length)return b;var k=Object.values(E),N=k.every(function(g){return g.every(function(v){return typeof v=="number"})});return x.forEach(function(g,v){var K=[];Object.keys(E).forEach(function(B){var G=g[B],Y=E[B],j=Y.findIndex(function(rt){return G===rt}),Q=[];if(N)Q.push(G);else for(var Z=0;Z<Y.length;Z++)Z===j?Q.push(1):Q.push(0);K=K.concat(Q)}),b[v]=K}),b};R.oneHot=F;var M=function(x,p,_,E){_===void 0&&(_=nt.DistanceType.EuclideanDistance);var b=0;switch(_){case nt.DistanceType.EuclideanDistance:b=new V.default(x).euclideanDistance(new V.default(p));break;default:break}return b};R.getDistance=M;var A={getAllKeyValueMap:H,oneHot:F,getDistance:M};R.default=A},3665:function(Se,R,et){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.getPropertyWeight=R.getAllSortProperties=R.getAllProperties=R.default=void 0;var ft=et(92935),nt=function(A,y){A===void 0&&(A=[]),y===void 0&&(y=100);var x={};A.forEach(function(_){_.properties&&Object.keys(_.properties).forEach(function(E){if(E==="id"||!"".concat(_.properties[E]).match(ft.secondReg)&&!"".concat(_.properties[E]).match(ft.dateReg)&&isNaN(Number(_.properties[E]))){x.hasOwnProperty(E)&&delete x[E];return}x.hasOwnProperty(E)?x[E]+=1:x[E]=1})});var p=Object.keys(x).sort(function(_,E){return x[E]-x[_]});return p.length<y?p:p.slice(0,y)};R.getAllSortProperties=nt;var V=function(A,y){return y.map(function(x){return A.hasOwnProperty(x)?A[x]:0})},z=function(A){for(var y=nt(A),x=[],p=0;p<A.length;p++)x[p]=V(A[p].properties,y);return x};R.getPropertyWeight=z;var H=function(A,y){y===void 0&&(y=void 0);var x=[];return A.forEach(function(p){y===void 0&&x.push(p),p[y]!==void 0&&x.push(p[y])}),x};R.getAllProperties=H;var F={getAllSortProperties:nt,getPropertyWeight:z,getAllProperties:H};R.default=F},29741:function(Se,R,et){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=void 0;var ft=et(13810),nt=function(){function z(H){this.arr=H}return z.prototype.getArr=function(){return this.arr||[]},z.prototype.add=function(H){var F,M=H.arr;if(!(!((F=this.arr)===null||F===void 0)&&F.length))return new z(M);if(!(M!=null&&M.length))return new z(this.arr);if(this.arr.length===M.length){var A=[];for(var y in this.arr)A[y]=this.arr[y]+M[y];return new z(A)}},z.prototype.subtract=function(H){var F,M=H.arr;if(!(!((F=this.arr)===null||F===void 0)&&F.length))return new z(M);if(!(M!=null&&M.length))return new z(this.arr);if(this.arr.length===M.length){var A=[];for(var y in this.arr)A[y]=this.arr[y]-M[y];return new z(A)}},z.prototype.avg=function(H){var F=[];if(H!==0)for(var M in this.arr)F[M]=this.arr[M]/H;return new z(F)},z.prototype.negate=function(){var H=[];for(var F in this.arr)H[F]=-this.arr[F];return new z(H)},z.prototype.squareEuclideanDistance=function(H){var F,M=H.arr;if(!(!((F=this.arr)===null||F===void 0)&&F.length)||!(M!=null&&M.length))return 0;if(this.arr.length===M.length){var A=0;for(var y in this.arr)A+=Math.pow(this.arr[y]-H.arr[y],2);return A}},z.prototype.euclideanDistance=function(H){var F,M=H.arr;if(!(!((F=this.arr)===null||F===void 0)&&F.length)||!(M!=null&&M.length))return 0;if(this.arr.length===M.length){var A=0;for(var y in this.arr)A+=Math.pow(this.arr[y]-H.arr[y],2);return Math.sqrt(A)}else console.error("The two vectors are unequal in length.")},z.prototype.normalize=function(){var H=[],F=(0,ft.clone)(this.arr);F.sort(function(x,p){return x-p});var M=F[F.length-1],A=F[0];for(var y in this.arr)H[y]=(this.arr[y]-A)/(M-A);return new z(H)},z.prototype.norm2=function(){var H;if(!(!((H=this.arr)===null||H===void 0)&&H.length))return 0;var F=0;for(var M in this.arr)F+=Math.pow(this.arr[M],2);return Math.sqrt(F)},z.prototype.dot=function(H){var F,M=H.arr;if(!(!((F=this.arr)===null||F===void 0)&&F.length)||!(M!=null&&M.length))return 0;if(this.arr.length===M.length){var A=0;for(var y in this.arr)A+=this.arr[y]*H.arr[y];return A}else console.error("The two vectors are unequal in length.")},z.prototype.equal=function(H){var F,M=H.arr;if(((F=this.arr)===null||F===void 0?void 0:F.length)!==(M==null?void 0:M.length))return!1;for(var A in this.arr)if(this.arr[A]!==M[A])return!1;return!0},z}(),V=nt;R.default=V},31656:function(Se,R,et){"use strict";function ft(B){"@babel/helpers - typeof";return ft=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(G){return typeof G}:function(G){return G&&typeof Symbol=="function"&&G.constructor===Symbol&&G!==Symbol.prototype?"symbol":typeof G},ft(B)}Object.defineProperty(R,"__esModule",{value:!0}),Object.defineProperty(R,"GADDI",{enumerable:!0,get:function(){return k.default}}),Object.defineProperty(R,"breadthFirstSearch",{enumerable:!0,get:function(){return V.default}}),Object.defineProperty(R,"connectedComponent",{enumerable:!0,get:function(){return z.default}}),Object.defineProperty(R,"depthFirstSearch",{enumerable:!0,get:function(){return M.default}}),Object.defineProperty(R,"detectCycle",{enumerable:!0,get:function(){return F.default}}),Object.defineProperty(R,"dijkstra",{enumerable:!0,get:function(){return A.default}}),Object.defineProperty(R,"findAllPath",{enumerable:!0,get:function(){return y.findAllPath}}),Object.defineProperty(R,"findShortestPath",{enumerable:!0,get:function(){return y.findShortestPath}}),Object.defineProperty(R,"floydWarshall",{enumerable:!0,get:function(){return x.default}}),Object.defineProperty(R,"getAdjMatrix",{enumerable:!0,get:function(){return nt.default}}),Object.defineProperty(R,"getDegree",{enumerable:!0,get:function(){return H.default}}),Object.defineProperty(R,"getInDegree",{enumerable:!0,get:function(){return H.getInDegree}}),Object.defineProperty(R,"getNeighbors",{enumerable:!0,get:function(){return N.getNeighbors}}),Object.defineProperty(R,"getOutDegree",{enumerable:!0,get:function(){return H.getOutDegree}}),Object.defineProperty(R,"labelPropagation",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(R,"louvain",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(R,"minimumSpanningTree",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(R,"pageRank",{enumerable:!0,get:function(){return b.default}});var nt=K(et(62238)),V=K(et(83764)),z=K(et(59527)),H=v(et(82556)),F=K(et(94282)),M=K(et(45891)),A=K(et(78089)),y=et(41727),x=K(et(75033)),p=K(et(5170)),_=K(et(35179)),E=K(et(89454)),b=K(et(74926)),k=K(et(82812)),N=et(70643);function g(B){if(typeof WeakMap!="function")return null;var G=new WeakMap,Y=new WeakMap;return(g=function(Q){return Q?Y:G})(B)}function v(B,G){if(!G&&B&&B.__esModule)return B;if(B===null||ft(B)!=="object"&&typeof B!="function")return{default:B};var Y=g(G);if(Y&&Y.has(B))return Y.get(B);var j={},Q=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Z in B)if(Z!=="default"&&Object.prototype.hasOwnProperty.call(B,Z)){var rt=Q?Object.getOwnPropertyDescriptor(B,Z):null;rt&&(rt.get||rt.set)?Object.defineProperty(j,Z,rt):j[Z]=B[Z]}return j.default=B,Y&&Y.set(B,j),j}function K(B){return B&&B.__esModule?B:{default:B}}},66044:function(Se,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.MESSAGE=R.ALGORITHM=void 0;var et={pageRank:"pageRank",breadthFirstSearch:"breadthFirstSearch",connectedComponent:"connectedComponent",depthFirstSearch:"depthFirstSearch",detectCycle:"detectCycle",detectDirectedCycle:"detectDirectedCycle",detectAllCycles:"detectAllCycles",detectAllDirectedCycle:"detectAllDirectedCycle",detectAllUndirectedCycle:"detectAllUndirectedCycle",dijkstra:"dijkstra",findAllPath:"findAllPath",findShortestPath:"findShortestPath",floydWarshall:"floydWarshall",getAdjMatrix:"getAdjMatrix",getDegree:"getDegree",getInDegree:"getInDegree",getNeighbors:"getNeighbors",getOutDegree:"getOutDegree",labelPropagation:"labelPropagation",louvain:"louvain",GADDI:"GADDI",minimumSpanningTree:"minimumSpanningTree",SUCCESS:"SUCCESS",FAILURE:"FAILURE"};R.ALGORITHM=et;var ft={SUCCESS:"SUCCESS",FAILURE:"FAILURE"};R.MESSAGE=ft},70585:function(Se,R,et){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.default=void 0;var ft=et(66044),nt=V(et(12067));function V(F){return F&&F.__esModule?F:{default:F}}var z=function(M){return function(){for(var A=[],y=0;y<arguments.length;y++)A[y]=arguments[y];return new Promise(function(x,p){var _=new nt.default;_.postMessage({_algorithmType:M,data:A}),_.onmessage=function(E){var b=E.data,k=b.data,N=b._algorithmType;ft.MESSAGE.SUCCESS===N?x(k):p(),_.terminate()}})}},H=z;R.default=H},30485:function(Se,R,et){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.pageRankAsync=R.minimumSpanningTreeAsync=R.louvainAsync=R.labelPropagationAsync=R.getOutDegreeAsync=R.getNeighborsAsync=R.getInDegreeAsync=R.getDegreeAsync=R.getAdjMatrixAsync=R.floydWarshallAsync=R.findShortestPathAsync=R.findAllPathAsync=R.dijkstraAsync=R.detectCycleAsync=R.detectAllUndirectedCycleAsync=R.detectAllDirectedCycleAsync=R.detectAllCyclesAsync=R.connectedComponentAsync=R.GADDIAsync=void 0;var ft=V(et(70585)),nt=et(66044);function V(j){return j&&j.__esModule?j:{default:j}}var z=function(Q,Z){return(0,ft.default)(nt.ALGORITHM.getAdjMatrix).apply(void 0,[Q,Z])};R.getAdjMatrixAsync=z;var H=function(Q,Z){return(0,ft.default)(nt.ALGORITHM.connectedComponent).apply(void 0,[Q,Z])};R.connectedComponentAsync=H;var F=function(Q){return(0,ft.default)(nt.ALGORITHM.getDegree)(Q)};R.getDegreeAsync=F;var M=function(Q,Z){return(0,ft.default)(nt.ALGORITHM.getInDegree)(Q,Z)};R.getInDegreeAsync=M;var A=function(Q,Z){return(0,ft.default)(nt.ALGORITHM.getOutDegree)(Q,Z)};R.getOutDegreeAsync=A;var y=function(Q){return(0,ft.default)(nt.ALGORITHM.detectCycle)(Q)};R.detectCycleAsync=y;var x=function(Q){return(0,ft.default)(nt.ALGORITHM.detectAllCycles)(Q)};R.detectAllCyclesAsync=x;var p=function(Q){return(0,ft.default)(nt.ALGORITHM.detectAllDirectedCycle)(Q)};R.detectAllDirectedCycleAsync=p;var _=function(Q){return(0,ft.default)(nt.ALGORITHM.detectAllUndirectedCycle)(Q)};R.detectAllUndirectedCycleAsync=_;var E=function(Q,Z,rt,ut){return(0,ft.default)(nt.ALGORITHM.dijkstra).apply(void 0,[Q,Z,rt,ut])};R.dijkstraAsync=E;var b=function(Q,Z,rt,ut){return(0,ft.default)(nt.ALGORITHM.findAllPath).apply(void 0,[Q,Z,rt,ut])};R.findAllPathAsync=b;var k=function(Q,Z,rt,ut,ht){return(0,ft.default)(nt.ALGORITHM.findShortestPath).apply(void 0,[Q,Z,rt,ut,ht])};R.findShortestPathAsync=k;var N=function(Q,Z){return(0,ft.default)(nt.ALGORITHM.floydWarshall).apply(void 0,[Q,Z])};R.floydWarshallAsync=N;var g=function(Q,Z,rt,ut){return ut===void 0&&(ut=1e3),(0,ft.default)(nt.ALGORITHM.labelPropagation)(Q,Z,rt,ut)};R.labelPropagationAsync=g;var v=function(Q,Z,rt,ut){return(0,ft.default)(nt.ALGORITHM.louvain)(Q,Z,rt,ut)};R.louvainAsync=v;var K=function(Q,Z,rt){return(0,ft.default)(nt.ALGORITHM.minimumSpanningTree).apply(void 0,[Q,Z,rt])};R.minimumSpanningTreeAsync=K;var B=function(Q,Z,rt){return(0,ft.default)(nt.ALGORITHM.pageRank).apply(void 0,[Q,Z,rt])};R.pageRankAsync=B;var G=function(Q,Z,rt){return(0,ft.default)(nt.ALGORITHM.getNeighbors).apply(void 0,[Q,Z,rt])};R.getNeighborsAsync=G;var Y=function(Q,Z,rt,ut,ht,kt,At){return rt===void 0&&(rt=!1),kt===void 0&&(kt="cluster"),At===void 0&&(At="cluster"),(0,ft.default)(nt.ALGORITHM.GADDI).apply(void 0,[Q,Z,rt,ut,ht,kt,At])};R.GADDIAsync=Y},12067:function(Se,R,et){"use strict";function ft(A){"@babel/helpers - typeof";return ft=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(y){return typeof y}:function(y){return y&&typeof Symbol=="function"&&y.constructor===Symbol&&y!==Symbol.prototype?"symbol":typeof y},ft(A)}Object.defineProperty(R,"__esModule",{value:!0}),R.default=void 0;var nt=H(et(31656)),V=et(66044);function z(A){if(typeof WeakMap!="function")return null;var y=new WeakMap,x=new WeakMap;return(z=function(_){return _?x:y})(A)}function H(A,y){if(!y&&A&&A.__esModule)return A;if(A===null||ft(A)!=="object"&&typeof A!="function")return{default:A};var x=z(y);if(x&&x.has(A))return x.get(A);var p={},_=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var E in A)if(E!=="default"&&Object.prototype.hasOwnProperty.call(A,E)){var b=_?Object.getOwnPropertyDescriptor(A,E):null;b&&(b.get||b.set)?Object.defineProperty(p,E,b):p[E]=A[E]}return p.default=A,x&&x.set(A,p),p}var F=typeof self!="undefined"?self:{};F.onmessage=function(A){var y=A.data,x=y._algorithmType,p=y.data;if(x){if(typeof nt[x]=="function"){var _=nt[x].apply(nt,p);F.postMessage({_algorithmType:V.MESSAGE.SUCCESS,data:_});return}F.postMessage({_algorithmType:V.MESSAGE.FAILURE})}};var M=null;R.default=M},1029:function(Se,R,et){"use strict";et.r(R),et.d(R,{Kernel:function(){return kt},World:function(){return ya}});var ft=et(15861),nt=et(4942),V=et(15671),z=et(43144),H=et(36719),F=et.n(H),M=et(81763),A=et.n(M),y=et(1469),x=et.n(y),p=et(64687),_=et.n(p),E=null,b=1;function k(){return b++}var N=null,g=null,v;(function(W){W[W.DEPTH_BUFFER_BIT=256]="DEPTH_BUFFER_BIT",W[W.STENCIL_BUFFER_BIT=1024]="STENCIL_BUFFER_BIT",W[W.COLOR_BUFFER_BIT=16384]="COLOR_BUFFER_BIT",W[W.POINTS=0]="POINTS",W[W.LINES=1]="LINES",W[W.LINE_LOOP=2]="LINE_LOOP",W[W.LINE_STRIP=3]="LINE_STRIP",W[W.TRIANGLES=4]="TRIANGLES",W[W.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",W[W.TRIANGLE_FAN=6]="TRIANGLE_FAN",W[W.ZERO=0]="ZERO",W[W.ONE=1]="ONE",W[W.SRC_COLOR=768]="SRC_COLOR",W[W.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR",W[W.SRC_ALPHA=770]="SRC_ALPHA",W[W.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA",W[W.DST_ALPHA=772]="DST_ALPHA",W[W.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA",W[W.DST_COLOR=774]="DST_COLOR",W[W.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR",W[W.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE",W[W.FUNC_ADD=32774]="FUNC_ADD",W[W.BLEND_EQUATION=32777]="BLEND_EQUATION",W[W.BLEND_EQUATION_RGB=32777]="BLEND_EQUATION_RGB",W[W.BLEND_EQUATION_ALPHA=34877]="BLEND_EQUATION_ALPHA",W[W.FUNC_SUBTRACT=32778]="FUNC_SUBTRACT",W[W.FUNC_REVERSE_SUBTRACT=32779]="FUNC_REVERSE_SUBTRACT",W[W.MAX_EXT=32776]="MAX_EXT",W[W.MIN_EXT=32775]="MIN_EXT",W[W.BLEND_DST_RGB=32968]="BLEND_DST_RGB",W[W.BLEND_SRC_RGB=32969]="BLEND_SRC_RGB",W[W.BLEND_DST_ALPHA=32970]="BLEND_DST_ALPHA",W[W.BLEND_SRC_ALPHA=32971]="BLEND_SRC_ALPHA",W[W.CONSTANT_COLOR=32769]="CONSTANT_COLOR",W[W.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR",W[W.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA",W[W.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA",W[W.BLEND_COLOR=32773]="BLEND_COLOR",W[W.ARRAY_BUFFER=34962]="ARRAY_BUFFER",W[W.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",W[W.ARRAY_BUFFER_BINDING=34964]="ARRAY_BUFFER_BINDING",W[W.ELEMENT_ARRAY_BUFFER_BINDING=34965]="ELEMENT_ARRAY_BUFFER_BINDING",W[W.STREAM_DRAW=35040]="STREAM_DRAW",W[W.STATIC_DRAW=35044]="STATIC_DRAW",W[W.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW",W[W.BUFFER_SIZE=34660]="BUFFER_SIZE",W[W.BUFFER_USAGE=34661]="BUFFER_USAGE",W[W.CURRENT_VERTEX_ATTRIB=34342]="CURRENT_VERTEX_ATTRIB",W[W.FRONT=1028]="FRONT",W[W.BACK=1029]="BACK",W[W.FRONT_AND_BACK=1032]="FRONT_AND_BACK",W[W.CULL_FACE=2884]="CULL_FACE",W[W.BLEND=3042]="BLEND",W[W.DITHER=3024]="DITHER",W[W.STENCIL_TEST=2960]="STENCIL_TEST",W[W.DEPTH_TEST=2929]="DEPTH_TEST",W[W.SCISSOR_TEST=3089]="SCISSOR_TEST",W[W.POLYGON_OFFSET_FILL=32823]="POLYGON_OFFSET_FILL",W[W.SAMPLE_ALPHA_TO_COVERAGE=32926]="SAMPLE_ALPHA_TO_COVERAGE",W[W.SAMPLE_COVERAGE=32928]="SAMPLE_COVERAGE",W[W.NO_ERROR=0]="NO_ERROR",W[W.INVALID_ENUM=1280]="INVALID_ENUM",W[W.INVALID_VALUE=1281]="INVALID_VALUE",W[W.INVALID_OPERATION=1282]="INVALID_OPERATION",W[W.OUT_OF_MEMORY=1285]="OUT_OF_MEMORY",W[W.CW=2304]="CW",W[W.CCW=2305]="CCW",W[W.LINE_WIDTH=2849]="LINE_WIDTH",W[W.ALIASED_POINT_SIZE_RANGE=33901]="ALIASED_POINT_SIZE_RANGE",W[W.ALIASED_LINE_WIDTH_RANGE=33902]="ALIASED_LINE_WIDTH_RANGE",W[W.CULL_FACE_MODE=2885]="CULL_FACE_MODE",W[W.FRONT_FACE=2886]="FRONT_FACE",W[W.DEPTH_RANGE=2928]="DEPTH_RANGE",W[W.DEPTH_WRITEMASK=2930]="DEPTH_WRITEMASK",W[W.DEPTH_CLEAR_VALUE=2931]="DEPTH_CLEAR_VALUE",W[W.DEPTH_FUNC=2932]="DEPTH_FUNC",W[W.STENCIL_CLEAR_VALUE=2961]="STENCIL_CLEAR_VALUE",W[W.STENCIL_FUNC=2962]="STENCIL_FUNC",W[W.STENCIL_FAIL=2964]="STENCIL_FAIL",W[W.STENCIL_PASS_DEPTH_FAIL=2965]="STENCIL_PASS_DEPTH_FAIL",W[W.STENCIL_PASS_DEPTH_PASS=2966]="STENCIL_PASS_DEPTH_PASS",W[W.STENCIL_REF=2967]="STENCIL_REF",W[W.STENCIL_VALUE_MASK=2963]="STENCIL_VALUE_MASK",W[W.STENCIL_WRITEMASK=2968]="STENCIL_WRITEMASK",W[W.STENCIL_BACK_FUNC=34816]="STENCIL_BACK_FUNC",W[W.STENCIL_BACK_FAIL=34817]="STENCIL_BACK_FAIL",W[W.STENCIL_BACK_PASS_DEPTH_FAIL=34818]="STENCIL_BACK_PASS_DEPTH_FAIL",W[W.STENCIL_BACK_PASS_DEPTH_PASS=34819]="STENCIL_BACK_PASS_DEPTH_PASS",W[W.STENCIL_BACK_REF=36003]="STENCIL_BACK_REF",W[W.STENCIL_BACK_VALUE_MASK=36004]="STENCIL_BACK_VALUE_MASK",W[W.STENCIL_BACK_WRITEMASK=36005]="STENCIL_BACK_WRITEMASK",W[W.VIEWPORT=2978]="VIEWPORT",W[W.SCISSOR_BOX=3088]="SCISSOR_BOX",W[W.COLOR_CLEAR_VALUE=3106]="COLOR_CLEAR_VALUE",W[W.COLOR_WRITEMASK=3107]="COLOR_WRITEMASK",W[W.UNPACK_ALIGNMENT=3317]="UNPACK_ALIGNMENT",W[W.PACK_ALIGNMENT=3333]="PACK_ALIGNMENT",W[W.MAX_TEXTURE_SIZE=3379]="MAX_TEXTURE_SIZE",W[W.MAX_VIEWPORT_DIMS=3386]="MAX_VIEWPORT_DIMS",W[W.SUBPIXEL_BITS=3408]="SUBPIXEL_BITS",W[W.RED_BITS=3410]="RED_BITS",W[W.GREEN_BITS=3411]="GREEN_BITS",W[W.BLUE_BITS=3412]="BLUE_BITS",W[W.ALPHA_BITS=3413]="ALPHA_BITS",W[W.DEPTH_BITS=3414]="DEPTH_BITS",W[W.STENCIL_BITS=3415]="STENCIL_BITS",W[W.POLYGON_OFFSET_UNITS=10752]="POLYGON_OFFSET_UNITS",W[W.POLYGON_OFFSET_FACTOR=32824]="POLYGON_OFFSET_FACTOR",W[W.TEXTURE_BINDING_2D=32873]="TEXTURE_BINDING_2D",W[W.SAMPLE_BUFFERS=32936]="SAMPLE_BUFFERS",W[W.SAMPLES=32937]="SAMPLES",W[W.SAMPLE_COVERAGE_VALUE=32938]="SAMPLE_COVERAGE_VALUE",W[W.SAMPLE_COVERAGE_INVERT=32939]="SAMPLE_COVERAGE_INVERT",W[W.COMPRESSED_TEXTURE_FORMATS=34467]="COMPRESSED_TEXTURE_FORMATS",W[W.DONT_CARE=4352]="DONT_CARE",W[W.FASTEST=4353]="FASTEST",W[W.NICEST=4354]="NICEST",W[W.GENERATE_MIPMAP_HINT=33170]="GENERATE_MIPMAP_HINT",W[W.BYTE=5120]="BYTE",W[W.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",W[W.SHORT=5122]="SHORT",W[W.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",W[W.INT=5124]="INT",W[W.UNSIGNED_INT=5125]="UNSIGNED_INT",W[W.FLOAT=5126]="FLOAT",W[W.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",W[W.ALPHA=6406]="ALPHA",W[W.RGB=6407]="RGB",W[W.RGBA=6408]="RGBA",W[W.LUMINANCE=6409]="LUMINANCE",W[W.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",W[W.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",W[W.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",W[W.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",W[W.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER",W[W.VERTEX_SHADER=35633]="VERTEX_SHADER",W[W.MAX_VERTEX_ATTRIBS=34921]="MAX_VERTEX_ATTRIBS",W[W.MAX_VERTEX_UNIFORM_VECTORS=36347]="MAX_VERTEX_UNIFORM_VECTORS",W[W.MAX_VARYING_VECTORS=36348]="MAX_VARYING_VECTORS",W[W.MAX_COMBINED_TEXTURE_IMAGE_UNITS=35661]="MAX_COMBINED_TEXTURE_IMAGE_UNITS",W[W.MAX_VERTEX_TEXTURE_IMAGE_UNITS=35660]="MAX_VERTEX_TEXTURE_IMAGE_UNITS",W[W.MAX_TEXTURE_IMAGE_UNITS=34930]="MAX_TEXTURE_IMAGE_UNITS",W[W.MAX_FRAGMENT_UNIFORM_VECTORS=36349]="MAX_FRAGMENT_UNIFORM_VECTORS",W[W.SHADER_TYPE=35663]="SHADER_TYPE",W[W.DELETE_STATUS=35712]="DELETE_STATUS",W[W.LINK_STATUS=35714]="LINK_STATUS",W[W.VALIDATE_STATUS=35715]="VALIDATE_STATUS",W[W.ATTACHED_SHADERS=35717]="ATTACHED_SHADERS",W[W.ACTIVE_UNIFORMS=35718]="ACTIVE_UNIFORMS",W[W.ACTIVE_ATTRIBUTES=35721]="ACTIVE_ATTRIBUTES",W[W.SHADING_LANGUAGE_VERSION=35724]="SHADING_LANGUAGE_VERSION",W[W.CURRENT_PROGRAM=35725]="CURRENT_PROGRAM",W[W.NEVER=512]="NEVER",W[W.LESS=513]="LESS",W[W.EQUAL=514]="EQUAL",W[W.LEQUAL=515]="LEQUAL",W[W.GREATER=516]="GREATER",W[W.NOTEQUAL=517]="NOTEQUAL",W[W.GEQUAL=518]="GEQUAL",W[W.ALWAYS=519]="ALWAYS",W[W.KEEP=7680]="KEEP",W[W.REPLACE=7681]="REPLACE",W[W.INCR=7682]="INCR",W[W.DECR=7683]="DECR",W[W.INVERT=5386]="INVERT",W[W.INCR_WRAP=34055]="INCR_WRAP",W[W.DECR_WRAP=34056]="DECR_WRAP",W[W.VENDOR=7936]="VENDOR",W[W.RENDERER=7937]="RENDERER",W[W.VERSION=7938]="VERSION",W[W.NEAREST=9728]="NEAREST",W[W.LINEAR=9729]="LINEAR",W[W.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST",W[W.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST",W[W.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR",W[W.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR",W[W.TEXTURE_MAG_FILTER=10240]="TEXTURE_MAG_FILTER",W[W.TEXTURE_MIN_FILTER=10241]="TEXTURE_MIN_FILTER",W[W.TEXTURE_WRAP_S=10242]="TEXTURE_WRAP_S",W[W.TEXTURE_WRAP_T=10243]="TEXTURE_WRAP_T",W[W.TEXTURE_2D=3553]="TEXTURE_2D",W[W.TEXTURE=5890]="TEXTURE",W[W.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",W[W.TEXTURE_BINDING_CUBE_MAP=34068]="TEXTURE_BINDING_CUBE_MAP",W[W.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",W[W.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",W[W.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",W[W.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",W[W.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",W[W.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",W[W.MAX_CUBE_MAP_TEXTURE_SIZE=34076]="MAX_CUBE_MAP_TEXTURE_SIZE",W[W.TEXTURE0=33984]="TEXTURE0",W[W.TEXTURE1=33985]="TEXTURE1",W[W.TEXTURE2=33986]="TEXTURE2",W[W.TEXTURE3=33987]="TEXTURE3",W[W.TEXTURE4=33988]="TEXTURE4",W[W.TEXTURE5=33989]="TEXTURE5",W[W.TEXTURE6=33990]="TEXTURE6",W[W.TEXTURE7=33991]="TEXTURE7",W[W.TEXTURE8=33992]="TEXTURE8",W[W.TEXTURE9=33993]="TEXTURE9",W[W.TEXTURE10=33994]="TEXTURE10",W[W.TEXTURE11=33995]="TEXTURE11",W[W.TEXTURE12=33996]="TEXTURE12",W[W.TEXTURE13=33997]="TEXTURE13",W[W.TEXTURE14=33998]="TEXTURE14",W[W.TEXTURE15=33999]="TEXTURE15",W[W.TEXTURE16=34e3]="TEXTURE16",W[W.TEXTURE17=34001]="TEXTURE17",W[W.TEXTURE18=34002]="TEXTURE18",W[W.TEXTURE19=34003]="TEXTURE19",W[W.TEXTURE20=34004]="TEXTURE20",W[W.TEXTURE21=34005]="TEXTURE21",W[W.TEXTURE22=34006]="TEXTURE22",W[W.TEXTURE23=34007]="TEXTURE23",W[W.TEXTURE24=34008]="TEXTURE24",W[W.TEXTURE25=34009]="TEXTURE25",W[W.TEXTURE26=34010]="TEXTURE26",W[W.TEXTURE27=34011]="TEXTURE27",W[W.TEXTURE28=34012]="TEXTURE28",W[W.TEXTURE29=34013]="TEXTURE29",W[W.TEXTURE30=34014]="TEXTURE30",W[W.TEXTURE31=34015]="TEXTURE31",W[W.ACTIVE_TEXTURE=34016]="ACTIVE_TEXTURE",W[W.REPEAT=10497]="REPEAT",W[W.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE",W[W.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",W[W.FLOAT_VEC2=35664]="FLOAT_VEC2",W[W.FLOAT_VEC3=35665]="FLOAT_VEC3",W[W.FLOAT_VEC4=35666]="FLOAT_VEC4",W[W.INT_VEC2=35667]="INT_VEC2",W[W.INT_VEC3=35668]="INT_VEC3",W[W.INT_VEC4=35669]="INT_VEC4",W[W.BOOL=35670]="BOOL",W[W.BOOL_VEC2=35671]="BOOL_VEC2",W[W.BOOL_VEC3=35672]="BOOL_VEC3",W[W.BOOL_VEC4=35673]="BOOL_VEC4",W[W.FLOAT_MAT2=35674]="FLOAT_MAT2",W[W.FLOAT_MAT3=35675]="FLOAT_MAT3",W[W.FLOAT_MAT4=35676]="FLOAT_MAT4",W[W.SAMPLER_2D=35678]="SAMPLER_2D",W[W.SAMPLER_CUBE=35680]="SAMPLER_CUBE",W[W.VERTEX_ATTRIB_ARRAY_ENABLED=34338]="VERTEX_ATTRIB_ARRAY_ENABLED",W[W.VERTEX_ATTRIB_ARRAY_SIZE=34339]="VERTEX_ATTRIB_ARRAY_SIZE",W[W.VERTEX_ATTRIB_ARRAY_STRIDE=34340]="VERTEX_ATTRIB_ARRAY_STRIDE",W[W.VERTEX_ATTRIB_ARRAY_TYPE=34341]="VERTEX_ATTRIB_ARRAY_TYPE",W[W.VERTEX_ATTRIB_ARRAY_NORMALIZED=34922]="VERTEX_ATTRIB_ARRAY_NORMALIZED",W[W.VERTEX_ATTRIB_ARRAY_POINTER=34373]="VERTEX_ATTRIB_ARRAY_POINTER",W[W.VERTEX_ATTRIB_ARRAY_BUFFER_BINDING=34975]="VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",W[W.COMPILE_STATUS=35713]="COMPILE_STATUS",W[W.LOW_FLOAT=36336]="LOW_FLOAT",W[W.MEDIUM_FLOAT=36337]="MEDIUM_FLOAT",W[W.HIGH_FLOAT=36338]="HIGH_FLOAT",W[W.LOW_INT=36339]="LOW_INT",W[W.MEDIUM_INT=36340]="MEDIUM_INT",W[W.HIGH_INT=36341]="HIGH_INT",W[W.FRAMEBUFFER=36160]="FRAMEBUFFER",W[W.RENDERBUFFER=36161]="RENDERBUFFER",W[W.RGBA4=32854]="RGBA4",W[W.RGB5_A1=32855]="RGB5_A1",W[W.RGB565=36194]="RGB565",W[W.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16",W[W.STENCIL_INDEX=6401]="STENCIL_INDEX",W[W.STENCIL_INDEX8=36168]="STENCIL_INDEX8",W[W.DEPTH_STENCIL=34041]="DEPTH_STENCIL",W[W.RENDERBUFFER_WIDTH=36162]="RENDERBUFFER_WIDTH",W[W.RENDERBUFFER_HEIGHT=36163]="RENDERBUFFER_HEIGHT",W[W.RENDERBUFFER_INTERNAL_FORMAT=36164]="RENDERBUFFER_INTERNAL_FORMAT",W[W.RENDERBUFFER_RED_SIZE=36176]="RENDERBUFFER_RED_SIZE",W[W.RENDERBUFFER_GREEN_SIZE=36177]="RENDERBUFFER_GREEN_SIZE",W[W.RENDERBUFFER_BLUE_SIZE=36178]="RENDERBUFFER_BLUE_SIZE",W[W.RENDERBUFFER_ALPHA_SIZE=36179]="RENDERBUFFER_ALPHA_SIZE",W[W.RENDERBUFFER_DEPTH_SIZE=36180]="RENDERBUFFER_DEPTH_SIZE",W[W.RENDERBUFFER_STENCIL_SIZE=36181]="RENDERBUFFER_STENCIL_SIZE",W[W.FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE=36048]="FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",W[W.FRAMEBUFFER_ATTACHMENT_OBJECT_NAME=36049]="FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",W[W.FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL=36050]="FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",W[W.FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE=36051]="FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",W[W.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0",W[W.DEPTH_ATTACHMENT=36096]="DEPTH_ATTACHMENT",W[W.STENCIL_ATTACHMENT=36128]="STENCIL_ATTACHMENT",W[W.DEPTH_STENCIL_ATTACHMENT=33306]="DEPTH_STENCIL_ATTACHMENT",W[W.NONE=0]="NONE",W[W.FRAMEBUFFER_COMPLETE=36053]="FRAMEBUFFER_COMPLETE",W[W.FRAMEBUFFER_INCOMPLETE_ATTACHMENT=36054]="FRAMEBUFFER_INCOMPLETE_ATTACHMENT",W[W.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT=36055]="FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",W[W.FRAMEBUFFER_INCOMPLETE_DIMENSIONS=36057]="FRAMEBUFFER_INCOMPLETE_DIMENSIONS",W[W.FRAMEBUFFER_UNSUPPORTED=36061]="FRAMEBUFFER_UNSUPPORTED",W[W.FRAMEBUFFER_BINDING=36006]="FRAMEBUFFER_BINDING",W[W.RENDERBUFFER_BINDING=36007]="RENDERBUFFER_BINDING",W[W.MAX_RENDERBUFFER_SIZE=34024]="MAX_RENDERBUFFER_SIZE",W[W.INVALID_FRAMEBUFFER_OPERATION=1286]="INVALID_FRAMEBUFFER_OPERATION",W[W.UNPACK_FLIP_Y_WEBGL=37440]="UNPACK_FLIP_Y_WEBGL",W[W.UNPACK_PREMULTIPLY_ALPHA_WEBGL=37441]="UNPACK_PREMULTIPLY_ALPHA_WEBGL",W[W.CONTEXT_LOST_WEBGL=37442]="CONTEXT_LOST_WEBGL",W[W.UNPACK_COLORSPACE_CONVERSION_WEBGL=37443]="UNPACK_COLORSPACE_CONVERSION_WEBGL",W[W.BROWSER_DEFAULT_WEBGL=37444]="BROWSER_DEFAULT_WEBGL",W[W.COPY_SRC=1]="COPY_SRC",W[W.COPY_DST=2]="COPY_DST",W[W.SAMPLED=4]="SAMPLED",W[W.STORAGE=8]="STORAGE",W[W.RENDER_ATTACHMENT=16]="RENDER_ATTACHMENT"})(v||(v={}));var K=function(){function W(){(0,V.Z)(this,W),this.config=void 0}return(0,z.Z)(W,[{key:"get",value:function(){return this.config}},{key:"set",value:function(be){this.config=be}}]),W}(),B=typeof navigator!="undefined"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),G;(function(W){W.Void="Void",W.Boolean="Boolean",W.Float="Float",W.Uint32="Uint32",W.Int32="Int32",W.Vector="Vector",W.Vector2Float="vec2<f32>",W.Vector3Float="vec3<f32>",W.Vector4Float="vec4<f32>",W.Vector2Boolean="vec2<bool>",W.Vector3Boolean="vec3<bool>",W.Vector4Boolean="vec4<bool>",W.Vector2Uint="vec2<u32>",W.Vector3Uint="vec3<u32>",W.Vector4Uint="vec4<u32>",W.Vector2Int="vec2<i32>",W.Vector3Int="vec3<i32>",W.Vector4Int="vec4<i32>",W.Matrix="Matrix",W.Matrix3x3Float="mat3x3<f32>",W.Matrix4x4Float="mat4x4<i32>",W.Struct="Struct",W.FloatArray="Float[]",W.Vector4FloatArray="vec4<f32>[]"})(G||(G={}));var Y;(function(W){W.Program="Program",W.Identifier="Identifier",W.VariableDeclaration="VariableDeclaration",W.BlockStatement="BlockStatement",W.ReturnStatement="ReturnStatement",W.FunctionDeclaration="FunctionDeclaration",W.VariableDeclarator="VariableDeclarator",W.AssignmentExpression="AssignmentExpression",W.LogicalExpression="LogicalExpression",W.BinaryExpression="BinaryExpression",W.ArrayExpression="ArrayExpression",W.UnaryExpression="UnaryExpression",W.UpdateExpression="UpdateExpression",W.FunctionExpression="FunctionExpression",W.MemberExpression="MemberExpression",W.ConditionalExpression="ConditionalExpression",W.ExpressionStatement="ExpressionStatement",W.CallExpression="CallExpression",W.NumThreadStatement="NumThreadStatement",W.StorageStatement="StorageStatement",W.DoWhileStatement="DoWhileStatement",W.WhileStatement="WhileStatement",W.ForStatement="ForStatement",W.BreakStatement="BreakStatement",W.ContinueStatement="ContinueStatement",W.IfStatement="IfStatement",W.ImportedFunctionStatement="ImportedFunctionStatement"})(Y||(Y={}));var j;(function(W){W.Input="Input",W.Output="Output",W.Uniform="Uniform",W.Workgroup="Workgroup",W.UniformConstant="UniformConstant",W.Image="Image",W.StorageBuffer="StorageBuffer",W.Private="Private",W.Function="Function"})(j||(j={}));var Q;(function(W){W.GLSL100="GLSL100",W.GLSL450="GLSL450",W.WGSL="WGSL"})(Q||(Q={}));var Z="__DefineValuePlaceholder__";function rt(){if(typeof document!="undefined")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function ut(W,qe){var be=Object.keys(W);if(Object.getOwnPropertySymbols){var or=Object.getOwnPropertySymbols(W);qe&&(or=or.filter(function(ar){return Object.getOwnPropertyDescriptor(W,ar).enumerable})),be.push.apply(be,or)}return be}function ht(W){for(var qe=1;qe<arguments.length;qe++){var be=arguments[qe]!=null?arguments[qe]:{};qe%2?ut(Object(be),!0).forEach(function(or){(0,nt.Z)(W,or,be[or])}):Object.getOwnPropertyDescriptors?Object.defineProperties(W,Object.getOwnPropertyDescriptors(be)):ut(Object(be)).forEach(function(or){Object.defineProperty(W,or,Object.getOwnPropertyDescriptor(be,or))})}return W}var kt=function(){function W(qe,be){(0,V.Z)(this,W),this.engine=qe,this.configService=be,this.model=void 0,this.dirty=!0,this.compiledBundle=void 0,this.initPromise=void 0}return(0,z.Z)(W,[{key:"init",value:function(){var be=this.configService.get(),or=be.canvas,ar=be.engineOptions;this.initPromise=this.engine.init(ht({canvas:or||rt(),antialiasing:!1},ar))}},{key:"setBundle",value:function(be){this.compiledBundle=JSON.parse(JSON.stringify(be))}},{key:"setDispatch",value:function(be){return this.compiledBundle.context&&(this.compiledBundle.context.dispatch=be),this}},{key:"setMaxIteration",value:function(be){return this.compiledBundle.context&&(this.compiledBundle.context.maxIteration=be),this}},{key:"setBinding",value:function(be,or){var ar=this;if(typeof be=="string"){var Br=A()(or)||F()(or)||x()(or);if(this.compiledBundle&&this.compiledBundle.context){var Pr=this.compiledBundle.context.defines.find(function(xn){return xn.name===be});if(Pr)return Pr.value=or,this;var cn=this.compiledBundle.context.uniforms.find(function(xn){return xn.name===be});cn&&(Br?(cn.data=or,cn.isReferer=!1,cn.storageClass===j.Uniform?this.model&&this.model.updateUniform(be,or):this.model&&this.model.updateBuffer(be,or)):(cn.isReferer=!0,cn.data=or))}}else Object.keys(be).forEach(function(xn){ar.setBinding(xn,be[xn])});return this}},{key:"execute",value:function(){var qe=(0,ft.Z)(_().mark(function or(){var ar=this,Br,Pr,cn=arguments;return _().wrap(function(tn){for(;;)switch(tn.prev=tn.next){case 0:if(Br=cn.length>0&&cn[0]!==void 0?cn[0]:1,!this.dirty){tn.next=6;break}return this.compiledBundle.context&&(Br>1?this.compiledBundle.context.maxIteration=Br:this.compiledBundle.context.maxIteration++),tn.next=5,this.compile();case 5:this.dirty=!1;case 6:for(this.engine.beginFrame(),this.engine.clear({}),this.compiledBundle.context&&this.compiledBundle.context.uniforms.filter(function(vt){var bt=vt.isReferer;return bt}).forEach(function(vt){var bt=vt.data,P=vt.name;ar.model.confirmInput(bt.model,P)}),Pr=0;Pr<Br;Pr++)this.model.run();return this.engine.endFrame(),tn.abrupt("return",this);case 12:case"end":return tn.stop()}},or,this)}));function be(){return qe.apply(this,arguments)}return be}()},{key:"getOutput",value:function(){var qe=(0,ft.Z)(_().mark(function or(){return _().wrap(function(Br){for(;;)switch(Br.prev=Br.next){case 0:return Br.abrupt("return",this.model.readData());case 1:case"end":return Br.stop()}},or,this)}));function be(){return qe.apply(this,arguments)}return be}()},{key:"compile",value:function(){var qe=(0,ft.Z)(_().mark(function or(){var ar,Br,Pr;return _().wrap(function(xn){for(;;)switch(xn.prev=xn.next){case 0:return xn.next=2,this.initPromise;case 2:return ar=ht({},this.compiledBundle.context),Br=this.engine.supportWebGPU?this.engine.useWGSL?Q.WGSL:Q.GLSL450:Q.GLSL100,Pr=this.compiledBundle.shaders[Br],ar.defines.filter(function(tn){return tn.runtime}).forEach(function(tn){var vt="".concat(Z).concat(tn.name);Pr=Pr.replace(vt,"".concat(tn.value))}),ar.shader=Pr,ar.uniforms.forEach(function(tn){if(!tn.data&&tn.storageClass===j.StorageBuffer){var vt=1;tn.type===G.FloatArray?vt=1:tn.type===G.Vector4FloatArray&&(vt=4),tn.data=new Float32Array(ar.output.length*vt).fill(0)}}),this.compiledBundle.context=ar,xn.next=11,this.engine.createComputeModel(this.compiledBundle.context);case 11:this.model=xn.sent;case 12:case"end":return xn.stop()}},or,this)}));function be(){return qe.apply(this,arguments)}return be}()}]),W}(),At=et(81550),Ht=et.n(At),Rt=function(){function W(qe,be){(0,V.Z)(this,W),this.attribute=void 0,this.buffer=void 0;var or=be.buffer,ar=be.offset,Br=be.stride,Pr=be.normalized,cn=be.size,xn=be.divisor;this.buffer=or,this.attribute={buffer:or.get(),offset:ar||0,stride:Br||0,normalized:Pr||!1,divisor:xn||0},cn&&(this.attribute.size=cn)}return(0,z.Z)(W,[{key:"get",value:function(){return this.attribute}},{key:"updateBuffer",value:function(be){this.buffer.subData(be)}},{key:"destroy",value:function(){this.buffer.destroy()}}]),W}(),le,dt,ot,yt,Lt,Ot,Wt,Jt,De,te,oe,me,Ce,_e,zt=(le={},(0,nt.Z)(le,v.POINTS,"points"),(0,nt.Z)(le,v.LINES,"lines"),(0,nt.Z)(le,v.LINE_LOOP,"line loop"),(0,nt.Z)(le,v.LINE_STRIP,"line strip"),(0,nt.Z)(le,v.TRIANGLES,"triangles"),(0,nt.Z)(le,v.TRIANGLE_FAN,"triangle fan"),(0,nt.Z)(le,v.TRIANGLE_STRIP,"triangle strip"),le),ue=(dt={},(0,nt.Z)(dt,v.STATIC_DRAW,"static"),(0,nt.Z)(dt,v.DYNAMIC_DRAW,"dynamic"),(0,nt.Z)(dt,v.STREAM_DRAW,"stream"),dt),Pe=(ot={},(0,nt.Z)(ot,v.BYTE,"int8"),(0,nt.Z)(ot,v.UNSIGNED_INT,"int16"),(0,nt.Z)(ot,v.INT,"int32"),(0,nt.Z)(ot,v.UNSIGNED_BYTE,"uint8"),(0,nt.Z)(ot,v.UNSIGNED_SHORT,"uint16"),(0,nt.Z)(ot,v.UNSIGNED_INT,"uint32"),(0,nt.Z)(ot,v.FLOAT,"float"),ot),Xt=(yt={},(0,nt.Z)(yt,v.ALPHA,"alpha"),(0,nt.Z)(yt,v.LUMINANCE,"luminance"),(0,nt.Z)(yt,v.LUMINANCE_ALPHA,"luminance alpha"),(0,nt.Z)(yt,v.RGB,"rgb"),(0,nt.Z)(yt,v.RGBA,"rgba"),(0,nt.Z)(yt,v.RGBA4,"rgba4"),(0,nt.Z)(yt,v.RGB5_A1,"rgb5 a1"),(0,nt.Z)(yt,v.RGB565,"rgb565"),(0,nt.Z)(yt,v.DEPTH_COMPONENT,"depth"),(0,nt.Z)(yt,v.DEPTH_STENCIL,"depth stencil"),yt),ie=(Lt={},(0,nt.Z)(Lt,v.DONT_CARE,"dont care"),(0,nt.Z)(Lt,v.NICEST,"nice"),(0,nt.Z)(Lt,v.FASTEST,"fast"),Lt),Ie=(Ot={},(0,nt.Z)(Ot,v.NEAREST,"nearest"),(0,nt.Z)(Ot,v.LINEAR,"linear"),(0,nt.Z)(Ot,v.LINEAR_MIPMAP_LINEAR,"mipmap"),(0,nt.Z)(Ot,v.NEAREST_MIPMAP_LINEAR,"nearest mipmap linear"),(0,nt.Z)(Ot,v.LINEAR_MIPMAP_NEAREST,"linear mipmap nearest"),(0,nt.Z)(Ot,v.NEAREST_MIPMAP_NEAREST,"nearest mipmap nearest"),Ot),se=(Wt={},(0,nt.Z)(Wt,v.REPEAT,"repeat"),(0,nt.Z)(Wt,v.CLAMP_TO_EDGE,"clamp"),(0,nt.Z)(Wt,v.MIRRORED_REPEAT,"mirror"),Wt),Te=(Jt={},(0,nt.Z)(Jt,v.NONE,"none"),(0,nt.Z)(Jt,v.BROWSER_DEFAULT_WEBGL,"browser"),Jt),Be=(De={},(0,nt.Z)(De,v.NEVER,"never"),(0,nt.Z)(De,v.ALWAYS,"always"),(0,nt.Z)(De,v.LESS,"less"),(0,nt.Z)(De,v.LEQUAL,"lequal"),(0,nt.Z)(De,v.GREATER,"greater"),(0,nt.Z)(De,v.GEQUAL,"gequal"),(0,nt.Z)(De,v.EQUAL,"equal"),(0,nt.Z)(De,v.NOTEQUAL,"notequal"),De),Tt=(te={},(0,nt.Z)(te,v.FUNC_ADD,"add"),(0,nt.Z)(te,v.MIN_EXT,"min"),(0,nt.Z)(te,v.MAX_EXT,"max"),(0,nt.Z)(te,v.FUNC_SUBTRACT,"subtract"),(0,nt.Z)(te,v.FUNC_REVERSE_SUBTRACT,"reverse subtract"),te),nr=(oe={},(0,nt.Z)(oe,v.ZERO,"zero"),(0,nt.Z)(oe,v.ONE,"one"),(0,nt.Z)(oe,v.SRC_COLOR,"src color"),(0,nt.Z)(oe,v.ONE_MINUS_SRC_COLOR,"one minus src color"),(0,nt.Z)(oe,v.SRC_ALPHA,"src alpha"),(0,nt.Z)(oe,v.ONE_MINUS_SRC_ALPHA,"one minus src alpha"),(0,nt.Z)(oe,v.DST_COLOR,"dst color"),(0,nt.Z)(oe,v.ONE_MINUS_DST_COLOR,"one minus dst color"),(0,nt.Z)(oe,v.DST_ALPHA,"dst alpha"),(0,nt.Z)(oe,v.ONE_MINUS_DST_ALPHA,"one minus dst alpha"),(0,nt.Z)(oe,v.CONSTANT_COLOR,"constant color"),(0,nt.Z)(oe,v.ONE_MINUS_CONSTANT_COLOR,"one minus constant color"),(0,nt.Z)(oe,v.CONSTANT_ALPHA,"constant alpha"),(0,nt.Z)(oe,v.ONE_MINUS_CONSTANT_ALPHA,"one minus constant alpha"),(0,nt.Z)(oe,v.SRC_ALPHA_SATURATE,"src alpha saturate"),oe),Ir=(me={},(0,nt.Z)(me,v.NEVER,"never"),(0,nt.Z)(me,v.ALWAYS,"always"),(0,nt.Z)(me,v.LESS,"less"),(0,nt.Z)(me,v.LEQUAL,"lequal"),(0,nt.Z)(me,v.GREATER,"greater"),(0,nt.Z)(me,v.GEQUAL,"gequal"),(0,nt.Z)(me,v.EQUAL,"equal"),(0,nt.Z)(me,v.NOTEQUAL,"notequal"),me),Zr=(Ce={},(0,nt.Z)(Ce,v.ZERO,"zero"),(0,nt.Z)(Ce,v.KEEP,"keep"),(0,nt.Z)(Ce,v.REPLACE,"replace"),(0,nt.Z)(Ce,v.INVERT,"invert"),(0,nt.Z)(Ce,v.INCR,"increment"),(0,nt.Z)(Ce,v.DECR,"decrement"),(0,nt.Z)(Ce,v.INCR_WRAP,"increment wrap"),(0,nt.Z)(Ce,v.DECR_WRAP,"decrement wrap"),Ce),Ur=(_e={},(0,nt.Z)(_e,v.FRONT,"front"),(0,nt.Z)(_e,v.BACK,"back"),_e),wn=function(){function W(qe,be){(0,V.Z)(this,W),this.buffer=void 0;var or=be.data,ar=be.usage,Br=be.type;this.buffer=qe.buffer({data:or,usage:ue[ar||v.STATIC_DRAW],type:Pe[Br||v.UNSIGNED_BYTE]})}return(0,z.Z)(W,[{key:"get",value:function(){return this.buffer}},{key:"destroy",value:function(){}},{key:"subData",value:function(be){var or=be.data,ar=be.offset;this.buffer.subdata(or,ar)}}]),W}(),Xr=et(74902);function Sn(W,qe){var be=Object.keys(W);if(Object.getOwnPropertySymbols){var or=Object.getOwnPropertySymbols(W);qe&&(or=or.filter(function(ar){return Object.getOwnPropertyDescriptor(W,ar).enumerable})),be.push.apply(be,or)}return be}function Kn(W){for(var qe=1;qe<arguments.length;qe++){var be=arguments[qe]!=null?arguments[qe]:{};qe%2?Sn(Object(be),!0).forEach(function(or){(0,nt.Z)(W,or,be[or])}):Object.getOwnPropertyDescriptors?Object.defineProperties(W,Object.getOwnPropertyDescriptors(be)):Sn(Object(be)).forEach(function(or){Object.defineProperty(W,or,Object.getOwnPropertyDescriptor(be,or))})}return W}var Fn=`attribute vec3 a_Position;
attribute vec2 a_TexCoord;

varying vec2 v_TexCoord;

void main() {
  gl_Position = vec4(a_Position, 1.0);
  v_TexCoord = a_TexCoord;
}`,pn=0,er=!1,cr=function(){function W(qe,be){var or=this;(0,V.Z)(this,W),this.reGl=qe,this.context=be,this.entity=k(),this.texFBO=void 0,this.computeCommand=void 0,this.textureCache={},this.outputTextureName=void 0,this.swapOutputTextureName=void 0,this.compiledPingpong=void 0,this.dynamicPingpong=void 0;var ar={};this.context.uniforms.forEach(function(tn){var vt=tn.name,bt=tn.type,P=tn.data,I=tn.isReferer,T=tn.storageClass;if(T===j.StorageBuffer){if(I)or.textureCache[vt]={data:void 0},ar["".concat(vt,"Size")]=function(){return P.compiledBundle.context.output.textureSize};else{or.textureCache[vt]=or.calcDataTexture(vt,bt,P);var q=or.textureCache[vt],Et=q.textureWidth,Gt=q.isOutput;ar["".concat(vt,"Size")]=[Et,Et],Gt&&(or.outputTextureName=vt,or.context.needPingpong&&(or.outputTextureName="".concat(vt,"Output"),or.textureCache[or.outputTextureName]=or.calcDataTexture(vt,bt,P)))}ar[vt]=function(){return er&&console.log("[".concat(or.entity,"]: ").concat(vt," ").concat(or.textureCache[vt].id)),or.textureCache[vt].texture}}else if(T===j.Uniform){if(P&&(Array.isArray(P)||F()(P))&&P.length>16)throw new Error("invalid data type ".concat(bt));ar[vt]=function(){return tn.data}}});var Br=this.getOuputDataTexture(),Pr=Br.textureWidth,cn=Br.texelCount;ar.u_OutputTextureSize=[Pr,Pr],ar.u_OutputTexelCount=cn,this.context.output.textureSize=[Pr,Pr];var xn={attributes:{a_Position:[[-1,1,0],[-1,-1,0],[1,1,0],[1,-1,0]],a_TexCoord:[[0,1],[0,0],[1,1],[1,0]]},frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(this.context.shader),uniforms:ar,vert:Fn,primitive:"triangle strip",count:4};this.computeCommand=this.reGl(xn)}return(0,z.Z)(W,[{key:"run",value:function(){var be=this;this.context.maxIteration>1&&this.context.needPingpong&&(this.compiledPingpong=!0),(this.compiledPingpong||this.dynamicPingpong)&&this.swap(),this.texFBO=this.reGl.framebuffer({color:this.getOuputDataTexture().texture}),this.texFBO.use(function(){be.computeCommand()}),er&&console.log("[".concat(this.entity,"]: output ").concat(this.getOuputDataTexture().id))}},{key:"readData",value:function(){var qe=(0,ft.Z)(_().mark(function or(){var ar=this,Br,Pr,cn,xn,tn,vt,bt,P;return _().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:if(this.reGl({framebuffer:this.texFBO})(function(){Br=ar.reGl.read()}),!Br){T.next=6;break}if(Pr=this.getOuputDataTexture(),cn=Pr.originalDataLength,xn=Pr.elementsPerTexel,tn=Pr.typedArrayConstructor,vt=tn===void 0?Float32Array:tn,bt=[],xn!==4)for(P=0;P<Br.length;P+=4)xn===1?bt.push(Br[P]):xn===2?bt.push(Br[P],Br[P+1]):bt.push(Br[P],Br[P+1],Br[P+2]);else bt=Br;return T.abrupt("return",new vt(bt.slice(0,cn)));case 6:return T.abrupt("return",new Float32Array);case 7:case"end":return T.stop()}},or,this)}));function be(){return qe.apply(this,arguments)}return be}()},{key:"confirmInput",value:function(be,or){var ar;this.entity===be.entity?(this.dynamicPingpong=!0,ar=this):ar=be,this.textureCache[or].id=ar.getOuputDataTexture().id,this.textureCache[or].texture=ar.getOuputDataTexture().texture,er&&console.log("[".concat(this.entity,"]: confirm input ").concat(or," from model ").concat(ar.entity,", ").concat(ar.getOuputDataTexture().id))}},{key:"updateUniform",value:function(){}},{key:"updateBuffer",value:function(be,or){var ar=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,Br=this.context.uniforms.find(function(tn){var vt=tn.name;return vt===be});if(Br){var Pr=this.calcDataTexture(be,Br.type,or),cn=Pr.texture,xn=Pr.data;this.textureCache[be].data=xn,this.textureCache[be].texture=cn}}},{key:"destroy",value:function(){}},{key:"swap",value:function(){if(this.swapOutputTextureName||this.createSwapOutputDataTexture(),this.compiledPingpong){var be=this.context.output.name;this.textureCache[be].id=this.getOuputDataTexture().id,this.textureCache[be].texture=this.getOuputDataTexture().texture}var or=this.outputTextureName;this.outputTextureName=this.swapOutputTextureName,this.swapOutputTextureName=or,er&&console.log("[".concat(this.entity,"]: after swap, output ").concat(this.getOuputDataTexture().id))}},{key:"getOuputDataTexture",value:function(){return this.textureCache[this.outputTextureName]}},{key:"createSwapOutputDataTexture",value:function(){var be=this.cloneDataTexture(this.getOuputDataTexture());this.swapOutputTextureName="".concat(this.entity,"-swap"),this.textureCache[this.swapOutputTextureName]=be}},{key:"cloneDataTexture",value:function(be){var or=be.data,ar=be.textureWidth;return Kn(Kn({},be),{},{id:pn++,texture:this.reGl.texture({width:ar,height:ar,data:or,type:"float"})})}},{key:"calcDataTexture",value:function(be,or,ar){var Br=1;or===G.Vector4FloatArray&&(Br=4);for(var Pr=[],cn=0;cn<ar.length;cn+=Br)Br===1?Pr.push(ar[cn],0,0,0):Br===2?Pr.push(ar[cn],ar[cn+1],0,0):Br===3?Pr.push(ar[cn],ar[cn+1],ar[cn+2],0):Br===4&&Pr.push(ar[cn],ar[cn+1],ar[cn+2],ar[cn+3]);var xn=ar.length,tn=Math.ceil(xn/Br),vt=Math.ceil(Math.sqrt(tn)),bt=vt*vt;tn<bt&&Pr.push.apply(Pr,(0,Xr.Z)(new Array((bt-tn)*4).fill(0)));var P=this.reGl.texture({width:vt,height:vt,data:Pr,type:"float"});return{id:pn++,data:Pr,originalDataLength:xn,typedArrayConstructor:F()(ar)?ar.constructor:void 0,textureWidth:vt,texture:P,texelCount:tn,elementsPerTexel:Br,isOutput:be===this.context.output.name}}}]),W}(),dr=function(){function W(qe,be){(0,V.Z)(this,W),this.elements=void 0;var or=be.data,ar=be.usage,Br=be.type,Pr=be.count;this.elements=qe.elements({data:or,usage:ue[ar||v.STATIC_DRAW],type:Pe[Br||v.UNSIGNED_BYTE],count:Pr})}return(0,z.Z)(W,[{key:"get",value:function(){return this.elements}},{key:"subData",value:function(be){var or=be.data;this.elements.subdata(or)}},{key:"destroy",value:function(){this.elements.destroy()}}]),W}(),Gr=function(){function W(qe,be){(0,V.Z)(this,W),this.framebuffer=void 0;var or=be.width,ar=be.height,Br=be.color,Pr=be.colors,cn=be.depth,xn=be.stencil,tn={width:or,height:ar};Array.isArray(Pr)&&(tn.colors=Pr.map(function(vt){return vt.get()})),Br&&typeof Br!="boolean"&&(tn.color=Br.get()),this.framebuffer=qe.framebuffer(tn)}return(0,z.Z)(W,[{key:"get",value:function(){return this.framebuffer}},{key:"destroy",value:function(){this.framebuffer.destroy()}},{key:"resize",value:function(be){var or=be.width,ar=be.height;this.framebuffer.resize(or,ar)}}]),W}(),sn=et(71002),yn=et(68630),ln=et.n(yn);function Vn(W){var qe={};return Object.keys(W).forEach(function(be){ca(be,W[be],qe,"")}),qe}function ca(W,qe,be,or){if(qe===null||typeof qe=="number"||typeof qe=="boolean"||Array.isArray(qe)&&typeof qe[0]=="number"||F()(qe)||qe===""||qe.resize!==void 0){be["".concat(or&&or+".").concat(W)]=qe;return}ln()(qe)&&Object.keys(qe).forEach(function(ar){ca(ar,qe[ar],be,"".concat(or&&or+".").concat(W))}),Array.isArray(qe)&&qe.forEach(function(ar,Br){Object.keys(ar).forEach(function(Pr){ca(Pr,ar[Pr],be,"".concat(or&&or+".").concat(W,"[").concat(Br,"]"))})})}function oa(W,qe){var be=Object.keys(W);if(Object.getOwnPropertySymbols){var or=Object.getOwnPropertySymbols(W);qe&&(or=or.filter(function(ar){return Object.getOwnPropertyDescriptor(W,ar).enumerable})),be.push.apply(be,or)}return be}function bn(W){for(var qe=1;qe<arguments.length;qe++){var be=arguments[qe]!=null?arguments[qe]:{};qe%2?oa(Object(be),!0).forEach(function(or){(0,nt.Z)(W,or,be[or])}):Object.getOwnPropertyDescriptors?Object.defineProperties(W,Object.getOwnPropertyDescriptors(be)):oa(Object(be)).forEach(function(or){Object.defineProperty(W,or,Object.getOwnPropertyDescriptor(be,or))})}return W}var qn=function(){function W(qe,be){(0,V.Z)(this,W),this.reGl=void 0,this.drawCommand=void 0,this.uniforms={},this.reGl=qe;var or=be.vs,ar=be.fs,Br=be.defines,Pr=be.attributes,cn=be.uniforms,xn=be.primitive,tn=be.count,vt=be.elements,bt=be.depth,P=be.blend,I=be.stencil,T=be.cull,q=be.instances,Et=be.scissor,Gt=be.viewport,Dt={};cn&&(this.uniforms=Vn(cn),Object.keys(cn).forEach(function(fr){Dt[fr]=qe.prop(fr)}));var ee={};Object.keys(Pr).forEach(function(fr){ee[fr]=Pr[fr].get()});var Ye=Br&&this.generateDefines(Br)||"",Ae={attributes:ee,frag:`#ifdef GL_FRAGMENT_PRECISION_HIGH
  precision highp float;
#else
  precision mediump float;
#endif
`.concat(Ye,`
`).concat(ar),uniforms:Dt,vert:`
`.concat(Ye,`
`).concat(or),primitive:zt[xn===void 0?v.TRIANGLES:xn]};q&&(Ae.instances=q),tn&&(Ae.count=tn),vt&&(Ae.elements=vt.get()),Et&&(Ae.scissor=Et),Gt&&(Ae.viewport=Gt),this.initDepthDrawParams({depth:bt},Ae),this.initBlendDrawParams({blend:P},Ae),this.initStencilDrawParams({stencil:I},Ae),this.initCullDrawParams({cull:T},Ae),this.drawCommand=qe(Ae)}return(0,z.Z)(W,[{key:"addUniforms",value:function(be){this.uniforms=bn(bn({},this.uniforms),Vn(be))}},{key:"draw",value:function(be){var or=bn(bn({},this.uniforms),Vn(be.uniforms||{})),ar={};Object.keys(or).forEach(function(Br){var Pr=(0,sn.Z)(or[Br]);Pr==="boolean"||Pr==="number"||Array.isArray(or[Br])||or[Br].BYTES_PER_ELEMENT?ar[Br]=or[Br]:Pr==="string"||(ar[Br]=or[Br].get())}),this.drawCommand(ar)}},{key:"destroy",value:function(){}},{key:"initDepthDrawParams",value:function(be,or){var ar=be.depth;ar&&(or.depth={enable:ar.enable===void 0?!0:!!ar.enable,mask:ar.mask===void 0?!0:!!ar.mask,func:Be[ar.func||v.LESS],range:ar.range||[0,1]})}},{key:"initBlendDrawParams",value:function(be,or){var ar=be.blend;if(ar){var Br=ar.enable,Pr=ar.func,cn=ar.equation,xn=ar.color,tn=xn===void 0?[0,0,0,0]:xn;or.blend={enable:!!Br,func:{srcRGB:nr[Pr&&Pr.srcRGB||v.SRC_ALPHA],srcAlpha:nr[Pr&&Pr.srcAlpha||v.SRC_ALPHA],dstRGB:nr[Pr&&Pr.dstRGB||v.ONE_MINUS_SRC_ALPHA],dstAlpha:nr[Pr&&Pr.dstAlpha||v.ONE_MINUS_SRC_ALPHA]},equation:{rgb:Tt[cn&&cn.rgb||v.FUNC_ADD],alpha:Tt[cn&&cn.alpha||v.FUNC_ADD]},color:tn}}}},{key:"initStencilDrawParams",value:function(be,or){var ar=be.stencil;if(ar){var Br=ar.enable,Pr=ar.mask,cn=Pr===void 0?-1:Pr,xn=ar.func,tn=xn===void 0?{cmp:v.ALWAYS,ref:0,mask:-1}:xn,vt=ar.opFront,bt=vt===void 0?{fail:v.KEEP,zfail:v.KEEP,zpass:v.KEEP}:vt,P=ar.opBack,I=P===void 0?{fail:v.KEEP,zfail:v.KEEP,zpass:v.KEEP}:P;or.stencil={enable:!!Br,mask:cn,func:bn(bn({},tn),{},{cmp:Ir[tn.cmp]}),opFront:{fail:Zr[bt.fail],zfail:Zr[bt.zfail],zpass:Zr[bt.zpass]},opBack:{fail:Zr[I.fail],zfail:Zr[I.zfail],zpass:Zr[I.zpass]}}}}},{key:"initCullDrawParams",value:function(be,or){var ar=be.cull;if(ar){var Br=ar.enable,Pr=ar.face,cn=Pr===void 0?v.BACK:Pr;or.cull={enable:!!Br,face:Ur[cn]}}}},{key:"generateDefines",value:function(be){return Object.keys(be).map(function(or){return"#define ".concat(or," ").concat(Number(be[or]))}).join(`
`)}}]),W}(),Gn=function(){function W(qe,be){(0,V.Z)(this,W),this.texture=void 0,this.width=void 0,this.height=void 0;var or=be.data,ar=be.type,Br=ar===void 0?v.UNSIGNED_BYTE:ar,Pr=be.width,cn=be.height,xn=be.flipY,tn=xn===void 0?!1:xn,vt=be.format,bt=vt===void 0?v.RGBA:vt,P=be.mipmap,I=P===void 0?!1:P,T=be.wrapS,q=T===void 0?v.CLAMP_TO_EDGE:T,Et=be.wrapT,Gt=Et===void 0?v.CLAMP_TO_EDGE:Et,Dt=be.aniso,ee=Dt===void 0?0:Dt,Ye=be.alignment,Ae=Ye===void 0?1:Ye,fr=be.premultiplyAlpha,Hr=fr===void 0?!1:fr,wr=be.mag,hn=wr===void 0?v.NEAREST:wr,Yn=be.min,Ze=Yn===void 0?v.NEAREST:Yn,xr=be.colorSpace,Dr=xr===void 0?v.BROWSER_DEFAULT_WEBGL:xr;this.width=Pr,this.height=cn;var Yr={width:Pr,height:cn,type:Pe[Br],format:Xt[bt],wrapS:se[q],wrapT:se[Gt],mag:Ie[hn],min:Ie[Ze],alignment:Ae,flipY:tn,colorSpace:Te[Dr],premultiplyAlpha:Hr,aniso:ee};or&&(Yr.data=or),typeof I=="number"?Yr.mipmap=ie[I]:typeof I=="boolean"&&(Yr.mipmap=I),this.texture=qe.texture(Yr)}return(0,z.Z)(W,[{key:"get",value:function(){return this.texture}},{key:"update",value:function(){this.texture._texture.bind()}},{key:"resize",value:function(be){var or=be.width,ar=be.height;this.texture.resize(or,ar),this.width=or,this.height=ar}},{key:"destroy",value:function(){this.texture.destroy()}}]),W}(),zn=function(){function W(){var qe=this;(0,V.Z)(this,W),this.supportWebGPU=!1,this.useWGSL=!1,this.$canvas=void 0,this.gl=void 0,this.inited=void 0,this.createModel=function(){var be=(0,ft.Z)(_().mark(function or(ar){return _().wrap(function(Pr){for(;;)switch(Pr.prev=Pr.next){case 0:if(!ar.uniforms){Pr.next=3;break}return Pr.next=3,Promise.all(Object.keys(ar.uniforms).map(function(){var cn=(0,ft.Z)(_().mark(function xn(tn){var vt;return _().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(!(ar.uniforms[tn]&&ar.uniforms[tn].load!==void 0)){P.next=5;break}return P.next=3,ar.uniforms[tn].load();case 3:vt=P.sent,ar.uniforms[tn]=vt;case 5:case"end":return P.stop()}},xn)}));return function(xn){return cn.apply(this,arguments)}}()));case 3:return Pr.abrupt("return",new qn(qe.gl,ar));case 4:case"end":return Pr.stop()}},or)}));return function(or){return be.apply(this,arguments)}}(),this.createAttribute=function(be){return new Rt(qe.gl,be)},this.createBuffer=function(be){return new wn(qe.gl,be)},this.createElements=function(be){return new dr(qe.gl,be)},this.createTexture2D=function(be){return new Gn(qe.gl,be)},this.createFramebuffer=function(be){return new Gr(qe.gl,be)},this.useFramebuffer=function(be,or){qe.gl({framebuffer:be?be.get():null})(or)},this.createComputeModel=function(){var be=(0,ft.Z)(_().mark(function or(ar){return _().wrap(function(Pr){for(;;)switch(Pr.prev=Pr.next){case 0:return Pr.abrupt("return",new cr(qe.gl,ar));case 1:case"end":return Pr.stop()}},or)}));return function(or){return be.apply(this,arguments)}}(),this.clear=function(be){var or=be.color,ar=be.depth,Br=be.stencil,Pr=be.framebuffer,cn=Pr===void 0?null:Pr,xn={color:or,depth:ar,stencil:Br};xn.framebuffer=cn===null?cn:cn.get(),qe.gl.clear(xn)},this.setScissor=function(be){qe.gl&&qe.gl._gl&&(be.enable&&be.box?(qe.gl._gl.enable(v.SCISSOR_TEST),qe.gl._gl.scissor(be.box.x,be.box.y,be.box.width,be.box.height)):qe.gl._gl.disable(v.SCISSOR_TEST),qe.gl._refresh())},this.viewport=function(be){var or=be.x,ar=be.y,Br=be.width,Pr=be.height;qe.gl&&qe.gl._gl&&(qe.gl._gl.viewport(or,ar,Br,Pr),qe.gl._refresh())},this.readPixels=function(be){var or=be.framebuffer,ar=be.x,Br=be.y,Pr=be.width,cn=be.height,xn={x:ar,y:Br,width:Pr,height:cn};return or&&(xn.framebuffer=or.get()),qe.gl.read(xn)},this.getCanvas=function(){return qe.$canvas},this.getGLContext=function(){return qe.gl._gl},this.destroy=function(){qe.gl&&(qe.gl.destroy(),qe.inited=!1)}}return(0,z.Z)(W,[{key:"init",value:function(){var qe=(0,ft.Z)(_().mark(function or(ar){return _().wrap(function(Pr){for(;;)switch(Pr.prev=Pr.next){case 0:if(!this.inited){Pr.next=2;break}return Pr.abrupt("return");case 2:return this.$canvas=ar.canvas,Pr.next=5,new Promise(function(cn,xn){Ht()({canvas:ar.canvas,attributes:{alpha:!0,antialias:ar.antialias,premultipliedAlpha:!0},pixelRatio:1,extensions:["OES_element_index_uint","OES_texture_float","OES_standard_derivatives","angle_instanced_arrays"],optionalExtensions:["EXT_texture_filter_anisotropic","EXT_blend_minmax","WEBGL_depth_texture"],profile:!0,onDone:function(vt,bt){(vt||!bt)&&xn(vt),cn(bt)}})});case 5:this.gl=Pr.sent,this.inited=!0;case 7:case"end":return Pr.stop()}},or,this)}));function be(or){return qe.apply(this,arguments)}return be}()},{key:"isFloatSupported",value:function(){return this.gl.limits.readFloat}},{key:"beginFrame",value:function(){}},{key:"endFrame",value:function(){}}]),W}(),ya=function(){function W(){(0,V.Z)(this,W),this.engine=void 0,this.configService=new K}return(0,z.Z)(W,[{key:"setConfig",value:function(be){this.configService.set(be)}},{key:"setEngine",value:function(be){this.engine=be}},{key:"createEntity",value:function(){return k()}},{key:"createKernel",value:function(be){var or=new kt(this.engine,this.configService);return typeof be=="string"?or.setBundle(JSON.parse(be)):or.setBundle(be),or.init(),or}},{key:"destroy",value:function(){this.engine.destroy()}}],[{key:"create",value:function(){var be=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},or=new W;return or.setConfig(be),or.setEngine(new zn),or}}]),W}()},94393:function(Se,R,et){"use strict";et.d(R,{ZP:function(){return _2}});var ft={};et.r(ft),et.d(ft,{GADDI:function(){return so},Stack:function(){return Yo},breadthFirstSearch:function(){return Pe},connectedComponent:function(){return Ie},cosineSimilarity:function(){return ee},default:function(){return uo},depthFirstSearch:function(){return Zr},detectAllCycles:function(){return Sn},detectAllDirectedCycle:function(){return Xr},detectAllUndirectedCycle:function(){return wn},detectCycle:function(){return Kn},detectDirectedCycle:function(){return Mi},dijkstra:function(){return er},findAllPath:function(){return Gr},findShortestPath:function(){return dr},floydWarshall:function(){return yn},getAdjMatrix:function(){return yt},getDegree:function(){return Te},getInDegree:function(){return Be},getNeighbors:function(){return oe},getOutDegree:function(){return Tt},iLouvain:function(){return P},kCore:function(){return T},kMeans:function(){return Gt},labelPropagation:function(){return Vn},louvain:function(){return vt},minimumSpanningTree:function(){return Yr},nodesCosineSimilarity:function(){return Ae},pageRank:function(){return It}});var nt={};et.r(nt),et.d(nt,{Line:function(){return Lo},applyMatrix:function(){return Zi},compare:function(){return Po},distance:function(){return Ho},floydWarshall:function(){return ds},fractionToLine:function(){return lo},getAdjMatrix:function(){return Ms},getBBoxBoundLine:function(){return hi},getCircleCenterByPoints:function(){return Vo},getCircleIntersectByPoint:function(){return $n},getDegree:function(){return co},getEllipseIntersectByPoint:function(){return ji},getLineIntersect:function(){return Wo},getPointsCenter:function(){return jo},getRectIntersectByPoint:function(){return Ds},intersectBBox:function(){return Gi},invertMatrix:function(){return bi},isPointInPolygon:function(){return Ro},isPointsOverlap:function(){return go},isPolygonsIntersect:function(){return qi},itemIntersectByLine:function(){return Bo},lerp:function(){return zi},lerpArray:function(){return Pa},move:function(){return Ia},pointLineDistance:function(){return Ri},pointLineSquareDist:function(){return Zo},pointRectSquareDist:function(){return Da},rotate:function(){return _o},scale:function(){return Ps},scaleMatrix:function(){return fo},squareDist:function(){return Mo},translate:function(){return ns}});var V={};et.r(V),et.d(V,{cloneBesidesImg:function(){return eu},getAnimateCfgWithCallback:function(){return ys},getBBox:function(){return oi},getComboBBox:function(){return tu},getLabelPosition:function(){return ho},getLetterWidth:function(){return Js},getLoopCfgs:function(){return Ji},getTextSize:function(){return Xu},plainCombosToTrees:function(){return su},reconstructTree:function(){return uu},shouldRefreshEdge:function(){return Rs},traverseTree:function(){return Ui},traverseTreeUp:function(){return yo},truncateLabelByLength:function(){return Su}});var z={};et.r(z),et.d(z,{catmullRomToBezier:function(){return lt},fillPath:function(){return Oi},fillPathByDiff:function(){return si},formatPath:function(){return Oo},intersection:function(){return ki},parsePathArray:function(){return He},parsePathString:function(){return L},pathToAbsolute:function(){return Nt},pathToCurve:function(){return ge},rectPath:function(){return Lr}});var H={};et.r(H),et.d(H,{easeBack:function(){return Ql},easeBackIn:function(){return zc},easeBackInOut:function(){return Ql},easeBackOut:function(){return yh},easeBounce:function(){return pu},easeBounceIn:function(){return Kl},easeBounceInOut:function(){return Ku},easeBounceOut:function(){return pu},easeCircle:function(){return ec},easeCircleIn:function(){return xl},easeCircleInOut:function(){return ec},easeCircleOut:function(){return Pc},easeCubic:function(){return gl},easeCubicIn:function(){return gh},easeCubicInOut:function(){return gl},easeCubicOut:function(){return Vl},easeElastic:function(){return El},easeElasticIn:function(){return Jl},easeElasticInOut:function(){return mh},easeElasticOut:function(){return El},easeExp:function(){return tc},easeExpIn:function(){return Oc},easeExpInOut:function(){return tc},easeExpOut:function(){return Dc},easeLinear:function(){return Yl},easePoly:function(){return Zl},easePolyIn:function(){return Hl},easePolyInOut:function(){return Zl},easePolyOut:function(){return jl},easeQuad:function(){return pl},easeQuadIn:function(){return qu},easeQuadInOut:function(){return pl},easeQuadOut:function(){return Wl},easeSin:function(){return Nc},easeSinIn:function(){return ql},easeSinInOut:function(){return Nc},easeSinOut:function(){return $l}});var F={};et.r(F),et.d(F,{calculationItemsBBox:function(){return jv},cloneEvent:function(){return vy},formatPadding:function(){return Gd},isNaN:function(){return Tf},isViewportChanged:function(){return py},processParallelEdges:function(){return gy},uniqueId:function(){return Fd}});var M={};et.r(M),et.d(M,{getClosedSpline:function(){return Zd},getControlPoint:function(){return td},getSpline:function(){return fp},getStarPath:function(){return Ry},paddedHull:function(){return dp},pathToPoints:function(){return jd},pointsToPolygon:function(){return Py},roundedHull:function(){return qd}});var A={};et.r(A),et.d(A,{defaultSubjectColors:function(){return nm}});var y={};et.r(y),et.d(y,{isForce:function(){return Sp}});var x={};et.r(x),et.d(x,{Base:function(){return Qu},Circle:function(){return Tm},Ellipse:function(){return km},Image:function(){return Nm},Line:function(){return Dm},Marker:function(){return Bm},Path:function(){return uv},Polygon:function(){return Hm},Polyline:function(){return Zm},Rect:function(){return Qm},Text:function(){return t1}});var p={};et.r(p),et.d(p,{Base:function(){return Ru},Circle:function(){return u1},Dom:function(){return c1},Ellipse:function(){return h1},Image:function(){return v1},Line:function(){return g1},Marker:function(){return m1},Path:function(){return x1},Polygon:function(){return E1},Polyline:function(){return S1},Rect:function(){return I1},Text:function(){return D1}});var _={};et.r(_),et.d(_,{getColorSetsBySubjectColors:function(){return Ob},getColorsWithSubjectColor:function(){return pv},mixColor:function(){return ss}});var E={};et.r(E),et.d(E,{arrayToTextureData:function(){return Zb},attributesToTextureData:function(){return jb},buildTextureData:function(){return Wb},buildTextureDataWithOneEdgeAttr:function(){return Vb},buildTextureDataWithTwoEdgeAttr:function(){return Hb},proccessToFunc:function(){return Yb},radialLayout:function(){return qb}});var b={};et.r(b),et.d(b,{gpuDetector:function(){return Eg}});var k={};et.r(k),et.d(k,{getBrowserName:function(){return _g}});var N={};et.r(N),et.d(N,{assign:function(){return Kc},default:function(){return i0},defaultI18n:function(){return Mv},format:function(){return n0},parse:function(){return a0},setGlobalDateI18n:function(){return qg},setGlobalDateMasks:function(){return r0}});var g=et(97582),v=et(13810),K={getDefaultCfg:function(){return{}},getEvents:function(){return{}},updateCfg:function(e){return Object.assign(this,e),!0},shouldBegin:function(){return!0},shouldUpdate:function(){return!0},shouldEnd:function(){return!0},bind:function(e){var t=this,r=this.events;this.graph=e,(this.type==="drag-canvas"||this.type==="brush-select"||this.type==="lasso-select")&&e.get("canvas").set("draggable",!0),(0,v.each)(r,function(n,a){e.on(a,n)}),document.addEventListener("visibilitychange",function(){t.keydown=!1})},unbind:function(e){var t=this.events,r=e.get("canvas").get("draggable");(this.type==="drag-canvas"||this.type==="brush-select"||this.type==="lasso-select")&&e.get("canvas").set("draggable",!1),(0,v.each)(t,function(n,a){e.off(a,n)}),e.get("canvas").set("draggable",r)},get:function(e){return this[e]},set:function(e,t){return this[e]=t,this}},B=function(){function i(){}return i.registerBehavior=function(e,t){if(!t)throw new Error("please specify handler for this behavior: ".concat(e));var r=(0,v.clone)(K);Object.assign(r,t);var n=function(o){var s=this;Object.assign(this,this.getDefaultCfg(),o);var u=this.getEvents();this.events=null;var f={};u&&((0,v.each)(u,function(c,l){f[l]=(0,v.wrapBehavior)(s,c)}),this.events=f)};n.prototype=r,i.types[e]=n},i.hasBehavior=function(e){return!!i.types[e]},i.getBehavior=function(e){return i.types[e]},i.types={},i}(),G=B,Y=G,j="*",Q=function(){function i(){this._events={}}return i.prototype.on=function(e,t,r){return this._events[e]||(this._events[e]=[]),this._events[e].push({callback:t,once:!!r}),this},i.prototype.once=function(e,t){return this.on(e,t,!0)},i.prototype.emit=function(e){for(var t=this,r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var a=this._events[e]||[],o=this._events[j]||[],s=function(u){for(var f=u.length,c=0;c<f;c++)if(u[c]){var l=u[c],m=l.callback,w=l.once;w&&(u.splice(c,1),u.length===0&&delete t._events[e],f--,c--),m.apply(t,r)}};s(a),s(o)},i.prototype.off=function(e,t){if(!e)this._events={};else if(!t)delete this._events[e];else{for(var r=this._events[e]||[],n=r.length,a=0;a<n;a++)r[a].callback===t&&(r.splice(a,1),n--,a--);r.length===0&&delete this._events[e]}return this},i.prototype.getEvents=function(){return this._events},i}(),Z=Q,rt=et(35600);function ut(i,e,t){var r=[0,0,0,0,0,0,0,0,0];return rt.fromTranslation(r,t),rt.multiply(i,r,e)}function ht(i,e,t){var r=[0,0,0,0,0,0,0,0,0];return rt.fromRotation(r,t),rt.multiply(i,r,e)}function kt(i,e,t){var r=[0,0,0,0,0,0,0,0,0];return rt.fromScaling(r,t),rt.multiply(i,r,e)}function At(i,e,t){return rt.multiply(i,t,e)}function Ht(i,e){for(var t=i?[].concat(i):[1,0,0,0,1,0,0,0,1],r=0,n=e.length;r<n;r++){var a=e[r];switch(a[0]){case"t":ut(t,t,[a[1],a[2]]);break;case"s":kt(t,t,[a[1],a[2]]);break;case"r":ht(t,t,a[1]);break;case"m":At(t,t,a[1]);break;default:break}}return t}function Rt(i,e){return i[0]*e[1]-e[0]*i[1]}function le(i,e,t){var r=vec2.angle(i,e),n=Rt(i,e)>=0;return t?n?Math.PI*2-r:r:n?r:Math.PI*2-r}function dt(i,e,t){return t?(i[0]=e[1],i[1]=-1*e[0]):(i[0]=-1*e[1],i[1]=e[0]),i}var ot=function(e,t){var r=e.nodes,n=e.edges,a=[],o={};if(!r)throw new Error("invalid nodes data!");return r&&r.forEach(function(s,u){o[s.id]=u;var f=[];a.push(f)}),n&&n.forEach(function(s){var u=s.source,f=s.target,c=o[u],l=o[f];!c&&c!==0||!l&&l!==0||(a[c][l]=1,t||(a[l][c]=1))}),a},yt=ot,Lt=function(e,t){return e===t},Ot=function(){function i(e,t){t===void 0&&(t=null),this.value=e,this.next=t}return i.prototype.toString=function(e){return e?e(this.value):"".concat(this.value)},i}(),Wt=function(){function i(e){e===void 0&&(e=Lt),this.head=null,this.tail=null,this.compare=e}return i.prototype.prepend=function(e){var t=new Ot(e,this.head);return this.head=t,this.tail||(this.tail=t),this},i.prototype.append=function(e){var t=new Ot(e);return this.head?(this.tail.next=t,this.tail=t,this):(this.head=t,this.tail=t,this)},i.prototype.delete=function(e){if(!this.head)return null;for(var t=null;this.head&&this.compare(this.head.value,e);)t=this.head,this.head=this.head.next;var r=this.head;if(r!==null)for(;r.next;)this.compare(r.next.value,e)?(t=r.next,r.next=r.next.next):r=r.next;return this.compare(this.tail.value,e)&&(this.tail=r),t},i.prototype.find=function(e){var t=e.value,r=t===void 0?void 0:t,n=e.callback,a=n===void 0?void 0:n;if(!this.head)return null;for(var o=this.head;o;){if(a&&a(o.value)||r!==void 0&&this.compare(o.value,r))return o;o=o.next}return null},i.prototype.deleteTail=function(){var e=this.tail;if(this.head===this.tail)return this.head=null,this.tail=null,e;for(var t=this.head;t.next;)t.next.next?t=t.next:t.next=null;return this.tail=t,e},i.prototype.deleteHead=function(){if(!this.head)return null;var e=this.head;return this.head.next?this.head=this.head.next:(this.head=null,this.tail=null),e},i.prototype.fromArray=function(e){var t=this;return e.forEach(function(r){return t.append(r)}),this},i.prototype.toArray=function(){for(var e=[],t=this.head;t;)e.push(t),t=t.next;return e},i.prototype.reverse=function(){for(var e=this.head,t=null,r=null;e;)r=e.next,e.next=t,t=e,e=r;this.tail=this.head,this.head=t},i.prototype.toString=function(e){return e===void 0&&(e=void 0),this.toArray().map(function(t){return t.toString(e)}).toString()},i}(),Jt=Wt,De=function(){function i(){this.linkedList=new Jt}return i.prototype.isEmpty=function(){return!this.linkedList.head},i.prototype.peek=function(){return this.linkedList.head?this.linkedList.head.value:null},i.prototype.enqueue=function(e){this.linkedList.append(e)},i.prototype.dequeue=function(){var e=this.linkedList.deleteHead();return e?e.value:null},i.prototype.toString=function(e){return this.linkedList.toString(e)},i}(),te=De,oe=function(e,t,r){t===void 0&&(t=[]);var n=t.filter(function(u){return u.source===e||u.target===e});if(r==="target"){var a=function(f){return f.source===e};return n.filter(a).map(function(u){return u.target})}if(r==="source"){var o=function(f){return f.target===e};return n.filter(o).map(function(u){return u.source})}var s=function(f){return f.source===e?f.target:f.source};return n.map(s)},me=function(e,t){return t.filter(function(r){return r.source===e})},Ce=function(e,t){return t.filter(function(r){return r.source===e||r.target===e})},_e=function(e){e===void 0&&(e=0);var t="".concat(Math.random()).split(".")[1].substr(0,5),r="".concat(Math.random()).split(".")[1].substr(0,5);return"".concat(e,"-").concat(t).concat(r)};function zt(i){i===void 0&&(i={});var e=i,t=function(){},r=function(){var n={};return function(a){var o=a.next,s=o;return n[s]?!1:(n[s]=!0,!0)}}();return e.allowTraversal=i.allowTraversal||r,e.enter=i.enter||t,e.leave=i.leave||t,e}var ue=function(e,t,r,n){n===void 0&&(n=!0);var a=zt(r),o=new te,s=e.edges,u=s===void 0?[]:s;o.enqueue(t);for(var f="",c=function(){var m=o.dequeue();a.enter({current:m,previous:f}),oe(m,u,n?"target":void 0).forEach(function(w){a.allowTraversal({previous:f,current:m,next:w})&&o.enqueue(w)}),a.leave({current:m,previous:f}),f=m};!o.isEmpty();)c()},Pe=ue,Xt=function(e){for(var t=e.nodes,r=t===void 0?[]:t,n=e.edges,a=n===void 0?[]:n,o=[],s={},u=[],f=function w(C){u.push(C),s[C.id]=!0;for(var D=oe(C.id,a),U=function(it){var ct=D[it];if(!s[ct]){var _t=r.filter(function(Bt){return Bt.id===ct});_t.length>0&&w(_t[0])}},$=0;$<D.length;++$)U($)},c=0;c<r.length;c++){var l=r[c];if(!s[l.id]){f(l);for(var m=[];u.length>0;)m.push(u.pop());o.push(m)}}return o},ie=function(e){for(var t=e.nodes,r=t===void 0?[]:t,n=e.edges,a=n===void 0?[]:n,o=[],s={},u={},f={},c=[],l=0,m=function U($){u[$.id]=l,f[$.id]=l,l+=1,o.push($),s[$.id]=!0;for(var tt=oe($.id,a,"target").filter(function(Pt){return r.map(function(Qt){return Qt.id}).indexOf(Pt)>-1}),it=function(Qt){var ye=tt[Qt];if(!u[ye]&&u[ye]!==0){var ce=r.filter(function(Ne){return Ne.id===ye});ce.length>0&&U(ce[0]),f[$.id]=Math.min(f[$.id],f[ye])}else s[ye]&&(f[$.id]=Math.min(f[$.id],u[ye]))},ct=0;ct<tt.length;ct++)it(ct);if(f[$.id]===u[$.id]){for(var _t=[];o.length>0;){var Bt=o.pop();if(s[Bt.id]=!1,_t.push(Bt),Bt===$)break}_t.length>0&&c.push(_t)}},w=0,C=r;w<C.length;w++){var D=C[w];!u[D.id]&&u[D.id]!==0&&m(D)}return c};function Ie(i,e){return e?ie(i):Xt(i)}var se=function(e){var t={},r=e.nodes,n=r===void 0?[]:r,a=e.edges,o=a===void 0?[]:a;return n.forEach(function(s){t[s.id]={degree:0,inDegree:0,outDegree:0}}),o.forEach(function(s){t[s.source].degree++,t[s.source].outDegree++,t[s.target].degree++,t[s.target].inDegree++}),t},Te=se,Be=function(e,t){var r=se(e);return r[t]?se(e)[t].inDegree:0},Tt=function(e,t){var r=se(e);return r[t]?se(e)[t].outDegree:0};function nr(i){i===void 0&&(i={});var e=i,t=function(){},r=function(){var n={};return function(a){var o=a.next;return n[o]?!1:(n[o]=!0,!0)}}();return e.allowTraversal=i.allowTraversal||r,e.enter=i.enter||t,e.leave=i.leave||t,e}function Ir(i,e,t,r,n){n===void 0&&(n=!0),r.enter({current:e,previous:t});var a=i.edges,o=a===void 0?[]:a;oe(e,o,n?"target":void 0).forEach(function(s){r.allowTraversal({previous:t,current:e,next:s})&&Ir(i,s,e,r,n)}),r.leave({current:e,previous:t})}function Zr(i,e,t,r){r===void 0&&(r=!0),Ir(i,e,"",nr(t),r)}var Ur=function(e){var t=null,r=e.nodes,n=r===void 0?[]:r,a={},o={},s={},u={};n.forEach(function(l){o[l.id]=l});for(var f={enter:function(m){var w=m.current,C=m.previous;if(s[w]){t={};for(var D=w,U=C;U!==w;)t[D]=U,D=U,U=a[U];t[D]=U}else s[w]=w,delete o[w],a[w]=C},leave:function(m){var w=m.current;u[w]=w,delete s[w]},allowTraversal:function(m){var w=m.next;return t?!1:!u[w]}};Object.keys(o).length;){var c=Object.keys(o)[0];Zr(e,c,f)}return t},wn=function(e,t,r){var n,a;r===void 0&&(r=!0);for(var o=[],s=Ie(e,!1),u=0,f=s;u<f.length;u++){var c=f[u];if(c.length)for(var l=c[0],m=l.id,w=[l],C=(n={},n[m]=l,n),D=(a={},a[m]=new Set,a);w.length>0;)for(var U=w.pop(),$=U.id,tt=oe($,e.edges),it=function(Bt){var Pt,Qt=tt[Bt],ye=e.nodes.find(function(Vr){return Vr.id===Qt});if(Qt===$)o.push((Pt={},Pt[Qt]=U,Pt));else if(!(Qt in D))C[Qt]=U,w.push(ye),D[Qt]=new Set([U]);else if(!D[$].has(ye)){for(var ce=!0,Ne=[ye,U],$e=C[$];D[Qt].size&&!D[Qt].has($e)&&(Ne.push($e),$e!==C[$e.id]);)$e=C[$e.id];if(Ne.push($e),t&&r?(ce=!1,Ne.findIndex(function(Vr){return t.indexOf(Vr.id)>-1})>-1&&(ce=!0)):t&&!r&&Ne.findIndex(function(Vr){return t.indexOf(Vr.id)>-1})>-1&&(ce=!1),ce){for(var Rr={},rn=1;rn<Ne.length;rn+=1)Rr[Ne[rn-1].id]=Ne[rn];Ne.length&&(Rr[Ne[Ne.length-1].id]=Ne[0]),o.push(Rr)}D[Qt].add(U)}},ct=0;ct<tt.length;ct+=1)it(ct)}return o},Xr=function(e,t,r){r===void 0&&(r=!0);for(var n=[],a=new Set,o=[],s=[],u={},f={},c=function($e){for(var Rr=[$e];Rr.length>0;){var rn=Rr.pop();a.has(rn)&&(a.delete(rn),o[rn.id].forEach(function(Vr){Rr.push(Vr)}),o[rn.id].clear())}},l=function Ne($e,Rr,rn){var Vr=!1;if(t&&r===!1&&t.indexOf($e.id)>-1)return Vr;n.push($e),a.add($e);for(var Cr=rn[$e.id],Cn=0;Cn<Cr.length;Cn+=1){var _n=u[Cr[Cn]];if(_n===Rr){for(var Tr={},jr=1;jr<n.length;jr+=1)Tr[n[jr-1].id]=n[jr];n.length&&(Tr[n[n.length-1].id]=n[0]),s.push(Tr),Vr=!0}else a.has(_n)||Ne(_n,Rr,rn)&&(Vr=!0)}if(Vr)c($e);else for(var Cn=0;Cn<Cr.length;Cn+=1){var _n=u[Cr[Cn]];o[_n.id].has($e)||o[_n.id].add($e)}return n.pop(),Vr},m=e.nodes,w=m===void 0?[]:m,C=0;C<w.length;C+=1){var D=w[C],U=D.id;f[U]=C,u[C]=D}if(t&&r)for(var $=function($e){var Rr=t[$e];f[w[$e].id]=f[Rr],f[Rr]=0,u[0]=w.find(function(rn){return rn.id===Rr}),u[f[w[$e].id]]=w[$e]},C=0;C<t.length;C++)$(C);for(var tt=function($e){for(var Rr,rn,Vr=1/0,Cr=0;Cr<$e.length;Cr+=1)for(var Cn=$e[Cr],_n=0;_n<Cn.length;_n++){var Tr=f[Cn[_n].id];Tr<Vr&&(Vr=Tr,rn=Cr)}for(var jr=$e[rn],dn=[],Cr=0;Cr<jr.length;Cr+=1){var vn=jr[Cr];dn[vn.id]=[];for(var Pn=0,Wn=oe(vn.id,e.edges,"target").filter(function(pi){return jr.map(function(ai){return ai.id}).indexOf(pi)>-1});Pn<Wn.length;Pn++){var ma=Wn[Pn];ma===vn.id&&!(r===!1&&t.indexOf(vn.id)>-1)?s.push((Rr={},Rr[vn.id]=vn,Rr)):dn[vn.id].push(f[ma])}}return{component:jr,adjList:dn,minIdx:Vr}},it=0;it<w.length;){var ct=w.filter(function(Ne){return f[Ne.id]>=it}),_t=ie({nodes:ct,edges:e.edges}).filter(function(Ne){return Ne.length>1});if(_t.length===0)break;var Bt=tt(_t),Pt=Bt.minIdx,Qt=Bt.adjList,ye=Bt.component;if(ye.length>1){ye.forEach(function(Ne){o[Ne.id]=new Set});var ce=u[Pt];if(t&&r&&t.indexOf(ce.id)===-1)return s;l(ce,ce,Qt),it=Pt+1}else break}return s},Sn=function(e,t,r,n){return n===void 0&&(n=!0),t?Xr(e,r,n):wn(e,r,n)},Kn=Ur,Fn=function(e,t,r){for(var n=1/0,a,o=0;o<t.length;o++){var s=t[o].id;!r[s]&&e[s]<=n&&(n=e[s],a=t[o])}return a},pn=function(e,t,r,n){var a=e.nodes,o=a===void 0?[]:a,s=e.edges,u=s===void 0?[]:s,f=[],c={},l={},m={};o.forEach(function(it,ct){var _t=it.id;f.push(_t),l[_t]=1/0,_t===t&&(l[_t]=0)});for(var w=o.length,C=function(ct){var _t=Fn(l,o,c),Bt=_t.id;if(c[Bt]=!0,l[Bt]===1/0)return"continue";var Pt=[];r?Pt=me(Bt,u):Pt=Ce(Bt,u),Pt.forEach(function(Qt){var ye=Qt.target,ce=Qt.source,Ne=ye===Bt?ce:ye,$e=n&&Qt[n]?Qt[n]:1;l[Ne]>l[_t.id]+$e?(l[Ne]=l[_t.id]+$e,m[Ne]=[_t.id]):l[Ne]===l[_t.id]+$e&&m[Ne].push(_t.id)})},D=0;D<w;D++)C(D);m[t]=[t];var U={};for(var $ in l)l[$]!==1/0&&cr(t,$,m,U);var tt={};for(var $ in U)tt[$]=U[$][0];return{length:l,path:tt,allPath:U}},er=pn;function cr(i,e,t,r){if(i===e)return[i];if(r[e])return r[e];for(var n=[],a=0,o=t[e];a<o.length;a++){var s=o[a],u=cr(i,s,t,r);if(!u)return;for(var f=0,c=u;f<c.length;f++){var l=c[f];(0,v.isArray)(l)?n.push((0,g.__spreadArray)((0,g.__spreadArray)([],l,!0),[e],!1)):n.push([l,e])}}return r[e]=n,r[e]}var dr=function(e,t,r,n,a){var o=er(e,t,n,a),s=o.length,u=o.path,f=o.allPath;return{length:s[r],path:u[r],allPath:f[r]}},Gr=function(e,t,r,n){var a;if(t===r)return[[t]];var o=e.edges,s=o===void 0?[]:o,u=[t],f=(a={},a[t]=!0,a),c=[],l=[],m=n?oe(t,s,"target"):oe(t,s);for(c.push(m);u.length>0&&c.length>0;){var w=c[c.length-1];if(w.length){var C=w.shift();C&&(u.push(C),f[C]=!0,m=n?oe(C,s,"target"):oe(C,s),c.push(m.filter(function($){return!f[$]})))}else{var D=u.pop();f[D]=!1,c.pop();continue}if(u[u.length-1]===r){var U=u.map(function(tt){return tt});l.push(U);var D=u.pop();f[D]=!1,c.pop()}}return l},sn=function(e,t){for(var r=yt(e,t),n=[],a=r.length,o=0;o<a;o+=1){n[o]=[];for(var s=0;s<a;s+=1)o===s?n[o][s]=0:r[o][s]===0||!r[o][s]?n[o][s]=1/0:n[o][s]=r[o][s]}for(var u=0;u<a;u+=1)for(var o=0;o<a;o+=1)for(var s=0;s<a;s+=1)n[o][s]>n[o][u]+n[u][s]&&(n[o][s]=n[o][u]+n[u][s]);return n},yn=sn,ln=function(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r="weight"),n===void 0&&(n=1e3);var a=e.nodes,o=a===void 0?[]:a,s=e.edges,u=s===void 0?[]:s,f={},c={};o.forEach(function(ct,_t){var Bt=_e();ct.clusterId=Bt,f[Bt]={id:Bt,nodes:[ct]},c[ct.id]={node:ct,idx:_t}});var l=yt(e,t),m=[],w={};l.forEach(function(ct,_t){var Bt=0,Pt=o[_t].id;w[Pt]={},ct.forEach(function(Qt,ye){if(Qt){Bt+=Qt;var ce=o[ye].id;w[Pt][ce]=Qt}}),m.push(Bt)});for(var C=0,D=function(){var _t=!1;if(o.forEach(function(Bt){var Pt={};Object.keys(w[Bt.id]).forEach(function(Vr){var Cr=w[Bt.id][Vr],Cn=c[Vr].node,_n=Cn.clusterId;Pt[_n]||(Pt[_n]=0),Pt[_n]+=Cr});var Qt=-1/0,ye=[];if(Object.keys(Pt).forEach(function(Vr){Qt<Pt[Vr]?(Qt=Pt[Vr],ye=[Vr]):Qt===Pt[Vr]&&ye.push(Vr)}),!(ye.length===1&&ye[0]===Bt.clusterId)){var ce=ye.indexOf(Bt.clusterId);if(ce>=0&&ye.splice(ce,1),ye&&ye.length){_t=!0;var Ne=f[Bt.clusterId],$e=Ne.nodes.indexOf(Bt);Ne.nodes.splice($e,1);var Rr=Math.floor(Math.random()*ye.length),rn=f[ye[Rr]];rn.nodes.push(Bt),Bt.clusterId=rn.id}}}),!_t)return"break";C++};C<n;){var U=D();if(U==="break")break}Object.keys(f).forEach(function(ct){var _t=f[ct];(!_t.nodes||!_t.nodes.length)&&delete f[ct]});var $=[],tt={};u.forEach(function(ct){var _t=ct.source,Bt=ct.target,Pt=ct[r]||1,Qt=c[_t].node.clusterId,ye=c[Bt].node.clusterId,ce="".concat(Qt,"---").concat(ye);if(tt[ce])tt[ce].weight+=Pt,tt[ce].count++;else{var Ne={source:Qt,target:ye,weight:Pt,count:1};tt[ce]=Ne,$.push(Ne)}});var it=[];return Object.keys(f).forEach(function(ct){it.push(f[ct])}),{clusters:it,clusterEdges:$}},Vn=ln,ca=function(){function i(e){this.arr=e}return i.prototype.getArr=function(){return this.arr||[]},i.prototype.add=function(e){var t,r=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length))return new i(r);if(!(r!=null&&r.length))return new i(this.arr);if(this.arr.length===r.length){var n=[];for(var a in this.arr)n[a]=this.arr[a]+r[a];return new i(n)}},i.prototype.subtract=function(e){var t,r=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length))return new i(r);if(!(r!=null&&r.length))return new i(this.arr);if(this.arr.length===r.length){var n=[];for(var a in this.arr)n[a]=this.arr[a]-r[a];return new i(n)}},i.prototype.avg=function(e){var t=[];if(e!==0)for(var r in this.arr)t[r]=this.arr[r]/e;return new i(t)},i.prototype.negate=function(){var e=[];for(var t in this.arr)e[t]=-this.arr[t];return new i(e)},i.prototype.squareEuclideanDistance=function(e){var t,r=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length)||!(r!=null&&r.length))return 0;if(this.arr.length===r.length){var n=0;for(var a in this.arr)n+=Math.pow(this.arr[a]-e.arr[a],2);return n}},i.prototype.euclideanDistance=function(e){var t,r=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length)||!(r!=null&&r.length))return 0;if(this.arr.length===r.length){var n=0;for(var a in this.arr)n+=Math.pow(this.arr[a]-e.arr[a],2);return Math.sqrt(n)}else console.error("The two vectors are unequal in length.")},i.prototype.normalize=function(){var e=[],t=(0,v.clone)(this.arr);t.sort(function(o,s){return o-s});var r=t[t.length-1],n=t[0];for(var a in this.arr)e[a]=(this.arr[a]-n)/(r-n);return new i(e)},i.prototype.norm2=function(){var e;if(!(!((e=this.arr)===null||e===void 0)&&e.length))return 0;var t=0;for(var r in this.arr)t+=Math.pow(this.arr[r],2);return Math.sqrt(t)},i.prototype.dot=function(e){var t,r=e.arr;if(!(!((t=this.arr)===null||t===void 0)&&t.length)||!(r!=null&&r.length))return 0;if(this.arr.length===r.length){var n=0;for(var a in this.arr)n+=this.arr[a]*e.arr[a];return n}else console.error("The two vectors are unequal in length.")},i.prototype.equal=function(e){var t,r=e.arr;if(((t=this.arr)===null||t===void 0?void 0:t.length)!==(r==null?void 0:r.length))return!1;for(var n in this.arr)if(this.arr[n]!==r[n])return!1;return!0},i}(),oa=ca,bn=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2})$/,qn=/^(\d{1,4})(-|\/)(\d{1,2})\2(\d{1,2}) (\d{1,2}):(\d{1,2}):(\d{1,2})$/,Gn=function(e,t){e===void 0&&(e=[]),t===void 0&&(t=100);var r={};e.forEach(function(a){a.properties&&Object.keys(a.properties).forEach(function(o){if(o==="id"||!"".concat(a.properties[o]).match(bn)&&!"".concat(a.properties[o]).match(qn)&&isNaN(Number(a.properties[o]))){r.hasOwnProperty(o)&&delete r[o];return}r.hasOwnProperty(o)?r[o]+=1:r[o]=1})});var n=Object.keys(r).sort(function(a,o){return r[o]-r[a]});return n.length<t?n:n.slice(0,t)},zn=function(e,t){return t.map(function(r){return e.hasOwnProperty(r)?e[r]:0})},ya=function(e){for(var t=Gn(e),r=[],n=0;n<e.length;n++)r[n]=zn(e[n].properties,t);return r},W=function(e,t){t===void 0&&(t=void 0);var r=[];return e.forEach(function(n){t===void 0&&r.push(n),n[t]!==void 0&&r.push(n[t])}),r},qe={getAllSortProperties:Gn,getPropertyWeight:ya,getAllProperties:W},be;(function(i){i.EuclideanDistance="euclideanDistance"})(be||(be={}));var or=function(e,t,r){var n=[];t!=null&&t.length?n=t:(e.forEach(function(o){n=n.concat(Object.keys(o))}),n=(0,v.uniq)(n));var a={};return n.forEach(function(o){var s=[];e.forEach(function(u){u[o]!==void 0&&u[o]!==""&&s.push(u[o])}),s.length&&!(r!=null&&r.includes(o))&&(a[o]=(0,v.uniq)(s))}),a},ar=function(e,t,r){var n=or(e,t,r),a=[];if(!Object.keys(n).length)return a;var o=Object.values(n),s=o.every(function(u){return u.every(function(f){return typeof f=="number"})});return e.forEach(function(u,f){var c=[];Object.keys(n).forEach(function(l){var m=u[l],w=n[l],C=w.findIndex(function($){return m===$}),D=[];if(s)D.push(m);else for(var U=0;U<w.length;U++)U===C?D.push(1):D.push(0);c=c.concat(D)}),a[f]=c}),a},Br=function(e,t,r,n){r===void 0&&(r=be.EuclideanDistance);var a=0;switch(r){case be.EuclideanDistance:a=new oa(e).euclideanDistance(new oa(t));break;default:break}return a},Pr={getAllKeyValueMap:or,oneHot:ar,getDistance:Br},cn=function(e,t,r,n){for(var a=t.length,o=2*n,s=0,u=0;u<a;u++)for(var f=e[u].clusterId,c=0;c<a;c++){var l=e[c].clusterId;if(f===l){var m=t[u][c]||0,w=r[u]||0,C=r[c]||0;s+=m-w*C/o}}return s*=1/o,s},xn=function(e,t){e===void 0&&(e=[]);for(var r=e.length,n=new oa([]),a=0;a<r;a++)n=n.add(new oa(t[a]));var o=n.avg(r);o.normalize();for(var s=0,a=0;a<r;a++){var u=new oa(t[a]),f=u.squareEuclideanDistance(o);s+=f}var c=[];e.forEach(function(){c.push([])});for(var a=0;a<r;a++){var u=new oa(t[a]);e[a].clusterInertial=0;for(var l=0;l<r;l++){if(a===l){c[a][l]=0;continue}var m=new oa(t[l]);c[a][l]=u.squareEuclideanDistance(m),e[a].clusterInertial+=c[a][l]}}for(var w=0,C=2*r*s,a=0;a<r;a++)for(var D=e[a].clusterId,l=0;l<r;l++){var U=e[l].clusterId;if(!(a===l||D!==U)){var $=e[a].clusterInertial*e[l].clusterInertial/Math.pow(C,2)-c[a][l]/C;w+=$}}return Number(w.toFixed(4))},tn=function(e,t,r,n,a,o,s,u,f){t===void 0&&(t=!1),r===void 0&&(r="weight"),n===void 0&&(n=1e-4),a===void 0&&(a=!1),o===void 0&&(o=void 0),s===void 0&&(s=[]),u===void 0&&(u=["id"]),f===void 0&&(f=1);var c=e.nodes,l=c===void 0?[]:c,m=e.edges,w=m===void 0?[]:m,C=[];if(a){l.forEach(function(Tr,jr){Tr.properties=Tr.properties||{},Tr.originIndex=jr});var D=[];l.every(function(Tr){return Tr.hasOwnProperty("nodeType")})&&(D=Array.from(new Set(l.map(function(Tr){return Tr.nodeType}))),l.forEach(function(Tr){Tr.properties.nodeType=D.findIndex(function(jr){return jr===Tr.nodeType})}));var U=W(l,o);C=ar(U,s,u)}var $=1,tt={},it={};l.forEach(function(Tr,jr){var dn=String($++);Tr.clusterId=dn,tt[dn]={id:dn,nodes:[Tr]},it[Tr.id]={node:Tr,idx:jr}});var ct=yt(e,t),_t=[],Bt={},Pt=0;ct.forEach(function(Tr,jr){var dn=0,vn=l[jr].id;Bt[vn]={},Tr.forEach(function(Pn,Wn){if(Pn){dn+=Pn;var ma=l[Wn].id;Bt[vn][ma]=Pn,Pt+=Pn}}),_t.push(dn)}),Pt/=2;for(var Qt=1/0,ye=1/0,ce=0,Ne=[],$e={};;){a&&l.every(function(Tr){return Tr.hasOwnProperty("properties")})?Qt=cn(l,ct,_t,Pt)+xn(l,C)*f:Qt=cn(l,ct,_t,Pt),ce===0&&(ye=Qt,Ne=l,$e=tt);var Rr=Qt>0&&Qt>ye&&Qt-ye<n;if(Qt>ye&&(Ne=l.map(function(Tr){return{node:Tr,clusterId:Tr.clusterId}}),$e=(0,v.clone)(tt),ye=Qt),Rr||ce>100)break;ce++,Object.keys(tt).forEach(function(Tr){var jr=0;w.forEach(function(dn){var vn=dn.source,Pn=dn.target,Wn=it[vn].node.clusterId,ma=it[Pn].node.clusterId;(Wn===Tr&&ma!==Tr||ma===Tr&&Wn!==Tr)&&(jr=jr+(dn[r]||1))}),tt[Tr].sumTot=jr}),l.forEach(function(Tr,jr){var dn=tt[Tr.clusterId],vn=0,Pn,Wn=_t[jr]/(2*Pt),ma=0,Oa=dn.nodes;Oa.forEach(function(es){var rs=it[es.id].idx;ma+=ct[jr][rs]||0});var pi=ma-dn.sumTot*Wn,ai=Oa.filter(function(es){return es.id!==Tr.id}),gi=[];ai.forEach(function(es,rs){gi[rs]=C[es.originIndex]});var Ei=xn(ai,C)*f,Qi=Bt[Tr.id];if(Object.keys(Qi).forEach(function(es){var rs=it[es].node,xu=rs.clusterId;if(xu!==Tr.clusterId){var Os=tt[xu],$s=Os.nodes;if(!(!$s||!$s.length)){var Va=0;$s.forEach(function(Ka){var ti=it[Ka.id].idx;Va+=ct[jr][ti]||0});var ci=Va-Os.sumTot*Wn,Ya=$s.concat([Tr]),li=[];Ya.forEach(function(Ka,ti){li[ti]=C[Ka.originIndex]});var Di=xn(Ya,C)*f,fa=ci-pi;a&&(fa=ci+Di-(pi+Ei)),fa>vn&&(vn=fa,Pn=Os)}}}),vn>0){Pn.nodes.push(Tr);var Fi=Tr.clusterId;Tr.clusterId=Pn.id;var Gu=dn.nodes.indexOf(Tr);dn.nodes.splice(Gu,1);var ts=0,zu=0;w.forEach(function(es){var rs=es.source,xu=es.target,Os=it[rs].node.clusterId,$s=it[xu].node.clusterId;(Os===Pn.id&&$s!==Pn.id||$s===Pn.id&&Os!==Pn.id)&&(ts=ts+(es[r]||1)),(Os===Fi&&$s!==Fi||$s===Fi&&Os!==Fi)&&(zu=zu+(es[r]||1))}),Pn.sumTot=ts,dn.sumTot=zu}})}var rn={},Vr=0;Object.keys($e).forEach(function(Tr){var jr=$e[Tr];if(!jr.nodes||!jr.nodes.length){delete $e[Tr];return}var dn=String(Vr+1);dn!==Tr&&(jr.id=dn,jr.nodes=jr.nodes.map(function(vn){return{id:vn.id,clusterId:dn}}),$e[dn]=jr,rn[Tr]=dn,delete $e[Tr],Vr++)}),Ne.forEach(function(Tr){var jr=Tr.node,dn=Tr.clusterId;jr&&(jr.clusterId=dn,jr.clusterId&&rn[jr.clusterId]&&(jr.clusterId=rn[jr.clusterId]))});var Cr=[],Cn={};w.forEach(function(Tr){var jr=Tr.source,dn=Tr.target,vn=Tr[r]||1,Pn=it[jr].node.clusterId,Wn=it[dn].node.clusterId;if(!(!Pn||!Wn)){var ma="".concat(Pn,"---").concat(Wn);if(Cn[ma])Cn[ma].weight+=vn,Cn[ma].count++;else{var Oa={source:Pn,target:Wn,weight:vn,count:1};Cn[ma]=Oa,Cr.push(Oa)}}});var _n=[];return Object.keys($e).forEach(function(Tr){_n.push($e[Tr])}),{clusters:_n,clusterEdges:Cr}},vt=tn,bt=function(e,t,r,n,a,o,s,u){return t===void 0&&(t=!1),r===void 0&&(r="weight"),n===void 0&&(n=1e-4),a===void 0&&(a=void 0),o===void 0&&(o=[]),s===void 0&&(s=["id"]),u===void 0&&(u=1),vt(e,t,r,n,!0,a,o,s,u)},P=bt,I=function(e,t){var r;t===void 0&&(t=1);for(var n=(0,v.clone)(e),a=n.nodes,o=a===void 0?[]:a,s=n.edges,u=s===void 0?[]:s,f=function(){var m=Te({nodes:o,edges:u}),w=Object.keys(m);w.sort(function(U,$){var tt,it;return((tt=m[U])===null||tt===void 0?void 0:tt.degree)-((it=m[$])===null||it===void 0?void 0:it.degree)});var C=w[0];if(!o.length||((r=m[C])===null||r===void 0?void 0:r.degree)>=t)return"break";var D=o.findIndex(function(U){return U.id===C});o.splice(D,1),u=u.filter(function(U){return!(U.source===C||U.target===C)})};;){var c=f();if(c==="break")break}return{nodes:o,edges:u}},T=I,q=function(e,t,r){var n=[];switch(e){case be.EuclideanDistance:n=t[r];break;default:n=[];break}return n},Et=function(e,t,r,n,a,o){t===void 0&&(t=3),r===void 0&&(r=void 0),n===void 0&&(n=[]),a===void 0&&(a=["id"]),o===void 0&&(o=be.EuclideanDistance);var s=e.nodes,u=s===void 0?[]:s,f=e.edges,c=f===void 0?[]:f,l={clusters:[{id:"0",nodes:u}],clusterEdges:[]};if(o===be.EuclideanDistance&&!u.every(function(dn){return dn.hasOwnProperty(r)}))return l;var m=[],w=[];if(o===be.EuclideanDistance&&(m=W(u,r),w=ar(m,n,a)),!w.length)return l;for(var C=(0,v.uniq)(w.map(function(dn){return dn.join("")})),D=Math.min(t,u.length,C.length),U=0;U<u.length;U++)u[U].originIndex=U;for(var $=[],tt=[],it=[],U=0;U<D;U++)if(U===0){var ct=Math.floor(Math.random()*u.length);switch(o){case be.EuclideanDistance:$[U]=w[ct];break;default:$[U]=[];break}tt.push(ct),it[U]=[u[ct]],u[ct].clusterId=String(U)}else{for(var _t=-1/0,Bt=0,Pt=function(Pn){if(!tt.includes(Pn)){for(var Wn=0,ma=0;ma<$.length;ma++){var Oa=0;switch(o){case be.EuclideanDistance:Oa=Br(w[u[Pn].originIndex],$[ma],o);break;default:break}Wn+=Oa}var pi=Wn/$.length;pi>_t&&!$.find(function(ai){return(0,v.isEqual)(ai,q(o,w,u[Pn].originIndex))})&&(_t=pi,Bt=Pn)}},Qt=0;Qt<u.length;Qt++)Pt(Qt);$[U]=q(o,w,Bt),tt.push(Bt),it[U]=[u[Bt]],u[Bt].clusterId=String(U)}for(var ye=0;;){for(var U=0;U<u.length;U++){var ce=0,Ne=1/0;if(!(ye===0&&tt.includes(U))){for(var $e=0;$e<$.length;$e++){var Rr=0;switch(o){case be.EuclideanDistance:Rr=Br(w[U],$[$e],o);break;default:break}Rr<Ne&&(Ne=Rr,ce=$e)}if(u[U].clusterId!==void 0)for(var rn=it[Number(u[U].clusterId)].length-1;rn>=0;rn--)it[Number(u[U].clusterId)][rn].id===u[U].id&&it[Number(u[U].clusterId)].splice(rn,1);u[U].clusterId=String(ce),it[ce].push(u[U])}}for(var Vr=!1,U=0;U<it.length;U++){for(var Cr=it[U],Cn=new oa([]),$e=0;$e<Cr.length;$e++)Cn=Cn.add(new oa(w[Cr[$e].originIndex]));var _n=Cn.avg(Cr.length);_n.equal(new oa($[U]))||(Vr=!0,$[U]=_n.getArr())}if(ye++,u.every(function(dn){return dn.clusterId!==void 0})&&Vr||ye>=1e3)break}var Tr=[],jr={};return c.forEach(function(dn){var vn,Pn,Wn=dn.source,ma=dn.target,Oa=(vn=u.find(function(Ei){return Ei.id===Wn}))===null||vn===void 0?void 0:vn.clusterId,pi=(Pn=u.find(function(Ei){return Ei.id===ma}))===null||Pn===void 0?void 0:Pn.clusterId,ai="".concat(Oa,"---").concat(pi);if(jr[ai])jr[ai].count++;else{var gi={source:Oa,target:pi,count:1};jr[ai]=gi,Tr.push(gi)}}),{clusters:it,clusterEdges:Tr}},Gt=Et,Dt=function(e,t){var r=new oa(t),n=r.norm2(),a=new oa(e),o=a.norm2(),s=r.dot(a),u=n*o,f=u?s/u:0;return f},ee=Dt,Ye=function(e,t,r,n,a){e===void 0&&(e=[]),r===void 0&&(r=void 0),n===void 0&&(n=[]),a===void 0&&(a=[]);var o=(0,v.clone)(e.filter(function(m){return m.id!==t.id})),s=e.findIndex(function(m){return m.id===t.id}),u=W(e,r),f=ar(u,n,a),c=f[s],l=[];return o.forEach(function(m,w){if(m.id!==t.id){var C=f[w],D=ee(C,c);l.push(D),m.cosineSimilarity=D}}),o.sort(function(m,w){return w.cosineSimilarity-m.cosineSimilarity}),{allCosineSimilarity:l,similarNodes:o}},Ae=Ye,fr=function(){function i(e){this.count=e.length,this.parent={};for(var t=0,r=e;t<r.length;t++){var n=r[t];this.parent[n]=n}}return i.prototype.find=function(e){for(;this.parent[e]!==e;)e=this.parent[e];return e},i.prototype.union=function(e,t){var r=this.find(e),n=this.find(t);r!==n&&(r<n?(this.parent[t]!==t&&this.union(this.parent[t],e),this.parent[t]=this.parent[e]):(this.parent[e]!==e&&this.union(this.parent[e],t),this.parent[e]=this.parent[t]))},i.prototype.connected=function(e,t){return this.find(e)===this.find(t)},i}(),Hr=fr,wr=function(e,t){return e-t},hn=function(){function i(e){e===void 0&&(e=wr),this.compareFn=e,this.list=[]}return i.prototype.getLeft=function(e){return 2*e+1},i.prototype.getRight=function(e){return 2*e+2},i.prototype.getParent=function(e){return e===0?null:Math.floor((e-1)/2)},i.prototype.isEmpty=function(){return this.list.length<=0},i.prototype.top=function(){return this.isEmpty()?void 0:this.list[0]},i.prototype.delMin=function(){var e=this.top(),t=this.list.pop();return this.list.length>0&&(this.list[0]=t,this.moveDown(0)),e},i.prototype.insert=function(e){if(e!==null){this.list.push(e);var t=this.list.length-1;return this.moveUp(t),!0}return!1},i.prototype.moveUp=function(e){for(var t=this.getParent(e);e&&e>0&&this.compareFn(this.list[t],this.list[e])>0;){var r=this.list[t];this.list[t]=this.list[e],this.list[e]=r,e=t,t=this.getParent(e)}},i.prototype.moveDown=function(e){var t,r=e,n=this.getLeft(e),a=this.getRight(e),o=this.list.length;n!==null&&n<o&&this.compareFn(this.list[r],this.list[n])>0?r=n:a!==null&&a<o&&this.compareFn(this.list[r],this.list[a])>0&&(r=a),e!==r&&(t=[this.list[r],this.list[e]],this.list[e]=t[0],this.list[r]=t[1],this.moveDown(r))},i}(),Yn=hn,Ze=function(e,t){var r=[],n=e.nodes,a=n===void 0?[]:n,o=e.edges,s=o===void 0?[]:o;if(a.length===0)return r;var u=a[0],f=new Set;f.add(u);var c=function(U,$){return t?U.weight-$.weight:0},l=new Yn(c);for(Ce(u.id,s).forEach(function(D){l.insert(D)});!l.isEmpty();){var m=l.delMin(),w=m.source,C=m.target;f.has(w)&&f.has(C)||(r.push(m),f.has(w)||(f.add(w),Ce(w,s).forEach(function(D){l.insert(D)})),f.has(C)||(f.add(C),Ce(C,s).forEach(function(D){l.insert(D)})))}return r},xr=function(e,t){var r=[],n=e.nodes,a=n===void 0?[]:n,o=e.edges,s=o===void 0?[]:o;if(a.length===0)return r;var u=s.map(function(w){return w});t&&u.sort(function(w,C){return w.weight-C.weight});for(var f=new Hr(a.map(function(w){return w.id}));u.length>0;){var c=u.shift(),l=c.source,m=c.target;f.connected(l,m)||(r.push(c),f.union(l,m))}return r},Dr=function(e,t,r){var n={prim:Ze,kruskal:xr};return r?n[r](e,t):xr(e,t)},Yr=Dr,$t=function(e,t,r){typeof t!="number"&&(t=1e-6),typeof r!="number"&&(r=.85);for(var n=1,a=0,o=1e3,s=e.nodes,u=s===void 0?[]:s,f=e.edges,c=f===void 0?[]:f,l=u.length,m,w={},C={},D=0;D<l;++D){var U=u[D],$=U.id;w[$]=1/l,C[$]=1/l}for(var tt=Te(e);o>0&&n>t;){a=0;for(var D=0;D<l;++D){var U=u[D],$=U.id;if(m=0,tt[U.id].inDegree===0)w[$]=0;else{for(var it=oe($,c,"source"),ct=0;ct<it.length;++ct){var _t=it[ct],Bt=tt[_t].outDegree;Bt>0&&(m+=C[_t]/Bt)}w[$]=r*m,a+=w[$]}}a=(1-a)/l,n=0;for(var D=0;D<l;++D){var U=u[D],$=U.id;m=w[$]+a,n+=Math.abs(m-C[$]),C[$]=m}o-=1}return C},It=$t,ne=-1,xe=-1,pe="-1",ke="-1",sr=-1,lr="-1",en=function(){function i(e,t,r,n){e===void 0&&(e=ne),t===void 0&&(t=xe),r===void 0&&(r=xe),n===void 0&&(n=pe),this.id=e,this.from=t,this.to=r,this.label=n}return i}(),Dn=function(){function i(e,t){e===void 0&&(e=xe),t===void 0&&(t=ke),this.id=e,this.label=t,this.edges=[],this.edgeMap={}}return i.prototype.addEdge=function(e){this.edges.push(e),this.edgeMap[e.id]=e},i}(),En=function(){function i(e,t,r){e===void 0&&(e=xe),t===void 0&&(t=!0),r===void 0&&(r=!1),this.id=e,this.edgeIdAutoIncrease=t,this.edges=[],this.nodes=[],this.nodeMap={},this.edgeMap={},this.nodeLabelMap={},this.edgeLabelMap={},this.counter=0,this.directed=r}return i.prototype.getNodeNum=function(){return this.nodes.length},i.prototype.addNode=function(e,t){if(!this.nodeMap[e]){var r=new Dn(e,t);this.nodes.push(r),this.nodeMap[e]=r,this.nodeLabelMap[t]||(this.nodeLabelMap[t]=[]),this.nodeLabelMap[t].push(e)}},i.prototype.addEdge=function(e,t,r,n){if((this.edgeIdAutoIncrease||e===void 0)&&(e=this.counter++),!(this.nodeMap[t]&&this.nodeMap[r]&&this.nodeMap[r].edgeMap[e])){var a=new en(e,t,r,n);if(this.edges.push(a),this.edgeMap[e]=a,this.nodeMap[t].addEdge(a),this.edgeLabelMap[n]||(this.edgeLabelMap[n]=[]),this.edgeLabelMap[n].push(a),!this.directed){var o=new en(e,r,t,n);this.nodeMap[r].addEdge(o),this.edgeLabelMap[n].push(o)}}},i}(),ta=function(){function i(e,t,r,n,a){this.fromNode=e,this.toNode=t,this.nodeEdgeNodeLabel={nodeLabel1:r||ke,edgeLabel:n||pe,nodeLabel2:a||ke}}return i.prototype.equalTo=function(e){return this.fromNode===e.formNode&&this.toNode===e.toNode&&this.nodeEdgeNodeLabel===e.nodeEdgeNodeLabel},i.prototype.notEqualTo=function(e){return!this.equalTo(e)},i}(),Qn=function(){function i(){this.rmpath=[],this.dfsEdgeList=[]}return i.prototype.equalTo=function(e){var t=this.dfsEdgeList.length,r=e.length;if(t!==r)return!1;for(var n=0;n<t;n++)if(this.dfsEdgeList[n]!==e[n])return!1;return!0},i.prototype.notEqualTo=function(e){return!this.equalTo(e)},i.prototype.pushBack=function(e,t,r,n,a){return this.dfsEdgeList.push(new ta(e,t,r,n,a)),this.dfsEdgeList},i.prototype.toGraph=function(e,t){e===void 0&&(e=sr),t===void 0&&(t=!1);var r=new En(e,!0,t);return this.dfsEdgeList.forEach(function(n){var a=n.fromNode,o=n.toNode,s=n.nodeEdgeNodeLabel,u=s.nodeLabel1,f=s.edgeLabel,c=s.nodeLabel2;u!==ke&&r.addNode(a,u),c!==ke&&r.addNode(o,c),u!==ke&&c!==u&&r.addEdge(void 0,a,o,f)}),r},i.prototype.buildRmpath=function(){this.rmpath=[];for(var e=void 0,t=this.dfsEdgeList.length,r=t-1;r>=0;r--){var n=this.dfsEdgeList[r],a=n.fromNode,o=n.toNode;a<o&&(e===void 0||o===e)&&(this.rmpath.push(r),e=a)}return this.rmpath},i.prototype.getNodeNum=function(){var e={};return this.dfsEdgeList.forEach(function(t){e[t.fromNode]||(e[t.fromNode]=!0),e[t.toNode]||(e[t.toNode]=!0)}),Object.keys(e).length},i}(),ba=function(){function i(e){if(this.his={},this.nodesUsed={},this.edgesUsed={},this.edges=[],!!e){for(;e;){var t=e.edge;this.edges.push(t),this.nodesUsed[t.from]=1,this.nodesUsed[t.to]=1,this.edgesUsed[t.id]=1,e=e.preNode}this.edges=this.edges.reverse()}}return i.prototype.hasNode=function(e){return this.nodesUsed[e.id]===1},i.prototype.hasEdge=function(e){return this.edgesUsed[e.id]===1},i}(),Ha=function(){function i(e){var t=e.graphs,r=e.minSupport,n=r===void 0?2:r,a=e.minNodeNum,o=a===void 0?1:a,s=e.maxNodeNum,u=s===void 0?4:s,f=e.top,c=f===void 0?10:f,l=e.directed,m=l===void 0?!1:l,w=e.verbose,C=w===void 0?!1:w;this.graphs=t,this.dfsCode=new Qn,this.support=0,this.frequentSize1Subgraphs=[],this.frequentSubgraphs=[],this.minSupport=n,this.top=c,this.directed=m,this.counter=0,this.maxNodeNum=u,this.minNodeNum=o,this.verbose=C,this.maxNodeNum<this.minNodeNum&&(this.maxNodeNum=this.minNodeNum),this.reportDF=[]}return i.prototype.findForwardRootEdges=function(e,t){var r=this,n=[],a=e.nodeMap;return t.edges.forEach(function(o){(r.directed||t.label<=a[o.to].label)&&n.push(o)}),n},i.prototype.findBackwardEdge=function(e,t,r,n){if(!this.directed&&t===r)return null;for(var a=e.nodeMap,o=a[r.to],s=o.edges,u=s.length,f=0;f<u;f++){var c=s[f];if(!(n.hasEdge(c)||c.to!==t.from)){if(this.directed){if(a[t.from].label<a[r.to].label||a[t.from].label===a[r.to].label&&t.label<=c.label)return c}else if(t.label<c.label||t.label===c.label&&a[t.to].label<=a[r.to].label)return c}}return null},i.prototype.findForwardPureEdges=function(e,t,r,n){for(var a=[],o=t.to,s=e.nodeMap[o].edges,u=s.length,f=0;f<u;f++){var c=s[f],l=e.nodeMap[c.to];r<=l.label&&!n.hasNode(l)&&a.push(c)}return a},i.prototype.findForwardRmpathEdges=function(e,t,r,n){for(var a=[],o=e.nodeMap,s=o[t.to].label,u=o[t.from],f=u.edges,c=f.length,l=0;l<c;l++){var m=f[l],w=o[m.to].label;t.to===m.to||r>w||n.hasNode(o[m.to])||(t.label<m.label||t.label===m.label&&s<=w)&&a.push(m)}return a},i.prototype.getSupport=function(e){var t={};return e.forEach(function(r){t[r.graphId]||(t[r.graphId]=!0)}),Object.keys(t).length},i.prototype.findMinLabel=function(e){var t=void 0;return Object.keys(e).forEach(function(r){var n=e[r],a=n.nodeLabel1,o=n.edgeLabel,s=n.nodeLabel2;if(!t){t={nodeLabel1:a,edgeLabel:o,nodeLabel2:s};return}(a<t.nodeLabel1||a===t.nodeLabel1&&o<t.edgeLabel||a===t.nodeLabel1&&o===t.edgeLabel&&s<t.nodeLabel2)&&(t={nodeLabel1:a,edgeLabel:o,nodeLabel2:s})}),t},i.prototype.isMin=function(){var e=this,t=this.dfsCode;if(this.verbose&&console.log("isMin checking",t),t.dfsEdgeList.length===1)return!0;var r=this.directed,n=t.toGraph(sr,r),a=n.nodeMap,o=new Qn,s={};n.nodes.forEach(function(l){var m=e.findForwardRootEdges(n,l);m.forEach(function(w){var C=a[w.to],D="".concat(l.label,"-").concat(w.label,"-").concat(C.label);s[D]||(s[D]={projected:[],nodeLabel1:l.label,edgeLabel:w.label,nodeLabel2:C.label});var U={graphId:n.id,edge:w,preNode:null};s[D].projected.push(U)})});var u=this.findMinLabel(s);if(u){o.dfsEdgeList.push(new ta(0,1,u.nodeLabel1,u.edgeLabel,u.nodeLabel2));var f=function l(m){for(var w=o.buildRmpath(),C=o.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,D=o.dfsEdgeList[w[0]].toNode,U={},$=!1,tt=0,it=r?-1:0,ct=function(Cn){if($)return"break";m.forEach(function(_n){var Tr=new ba(_n),jr=e.findBackwardEdge(n,Tr.edges[w[Cn]],Tr.edges[w[0]],Tr);jr&&(U[jr.label]||(U[jr.label]={projected:[],edgeLabel:jr.label}),U[jr.label].projected.push({graphId:n.id,edge:U,preNode:_n}),tt=o.dfsEdgeList[w[Cn]].fromNode,$=!0)})},_t=w.length-1;_t>it;_t--){var Bt=ct(_t);if(Bt==="break")break}if($){var Pt=e.findMinLabel(U);o.dfsEdgeList.push(new ta(D,tt,ke,Pt.edgeLabel,ke));var Qt=o.dfsEdgeList.length-1;return e.dfsCode.dfsEdgeList[Qt]!==o.dfsEdgeList[Qt]?!1:l(U[Pt.edgeLabel].projected)}var ye={};$=!1;var ce=0;m.forEach(function(Cr){var Cn=new ba(Cr),_n=e.findForwardPureEdges(n,Cn.edges[w[0]],C,Cn);_n.length>0&&($=!0,ce=D,_n.forEach(function(Tr){var jr="".concat(Tr.label,"-").concat(a[Tr.to].label);ye[jr]||(ye[jr]={projected:[],edgeLabel:Tr.label,nodeLabel2:a[Tr.to].label}),ye[jr].projected.push({graphId:n.id,edge:Tr,preNode:Cr})}))});for(var Ne=w.length,$e=function(Cn){if($)return"break";var _n=w[Cn];m.forEach(function(Tr){var jr=new ba(Tr),dn=e.findForwardRmpathEdges(n,jr.edges[_n],C,jr);dn.length>0&&($=!0,ce=o.dfsEdgeList[_n].fromNode,dn.forEach(function(vn){var Pn="".concat(vn.label,"-").concat(a[vn.to].label);ye[Pn]||(ye[Pn]={projected:[],edgeLabel:vn.label,nodeLabel2:a[vn.to].label}),ye[Pn].projected.push({graphId:n.id,edge:vn,preNode:Tr})}))})},_t=0;_t<Ne;_t++){var Rr=$e(_t);if(Rr==="break")break}if(!$)return!0;var rn=e.findMinLabel(ye);o.dfsEdgeList.push(new ta(ce,D+1,ke,rn.edgeLabel,rn.nodeLabel2));var Vr=o.dfsEdgeList.length-1;return t.dfsEdgeList[Vr]!==o.dfsEdgeList[Vr]?!1:l(ye["".concat(rn.edgeLabel,"-").concat(rn.nodeLabel2)].projected)},c="".concat(u.nodeLabel1,"-").concat(u.edgeLabel,"-").concat(u.nodeLabel2);return f(s[c].projected)}},i.prototype.report=function(){if(!(this.dfsCode.getNodeNum()<this.minNodeNum)){this.counter++;var e=this.dfsCode.toGraph(this.counter,this.directed);this.frequentSubgraphs.push((0,v.clone)(e))}},i.prototype.subGraphMining=function(e){var t=this,r=this.getSupport(e);if(!(r<this.minSupport)&&this.isMin()){this.report();var n=this.dfsCode.getNodeNum(),a=this.dfsCode.buildRmpath(),o=this.dfsCode.dfsEdgeList[a[0]].toNode,s=this.dfsCode.dfsEdgeList[0].nodeEdgeNodeLabel.nodeLabel1,u={},f={};e.forEach(function(c){for(var l=t.graphs[c.graphId],m=l.nodeMap,w=new ba(c),C=a.length-1;C>=0;C--){var D=t.findBackwardEdge(l,w.edges[a[C]],w.edges[a[0]],w);if(D){var U="".concat(t.dfsCode.dfsEdgeList[a[C]].fromNode,"-").concat(D.label);f[U]||(f[U]={projected:[],toNodeId:t.dfsCode.dfsEdgeList[a[C]].fromNode,edgeLabel:D.label}),f[U].projected.push({graphId:c.graphId,edge:D,preNode:c})}}if(!(n>=t.maxNodeNum)){var $=t.findForwardPureEdges(l,w.edges[a[0]],s,w);$.forEach(function(it){var ct="".concat(o,"-").concat(it.label,"-").concat(m[it.to].label);u[ct]||(u[ct]={projected:[],fromNodeId:o,edgeLabel:it.label,nodeLabel2:m[it.to].label}),u[ct].projected.push({graphId:c.graphId,edge:it,preNode:c})});for(var tt=function(ct){var _t=t.findForwardRmpathEdges(l,w.edges[a[ct]],s,w);_t.forEach(function(Bt){var Pt="".concat(t.dfsCode.dfsEdgeList[a[ct]].fromNode,"-").concat(Bt.label,"-").concat(m[Bt.to].label);u[Pt]||(u[Pt]={projected:[],fromNodeId:t.dfsCode.dfsEdgeList[a[ct]].fromNode,edgeLabel:Bt.label,nodeLabel2:m[Bt.to].label}),u[Pt].projected.push({graphId:c.graphId,edge:Bt,preNode:c})})},C=0;C<a.length;C++)tt(C)}}),Object.keys(f).forEach(function(c){var l=f[c],m=l.toNodeId,w=l.edgeLabel;t.dfsCode.dfsEdgeList.push(new ta(o,m,"-1",w,"-1")),t.subGraphMining(f[c].projected),t.dfsCode.dfsEdgeList.pop()}),Object.keys(u).forEach(function(c){var l=u[c],m=l.fromNodeId,w=l.edgeLabel,C=l.nodeLabel2;t.dfsCode.dfsEdgeList.push(new ta(m,o+1,ke,w,C)),t.subGraphMining(u[c].projected),t.dfsCode.dfsEdgeList.pop()})}},i.prototype.generate1EdgeFrequentSubGraphs=function(){var e=this.graphs,t=this.directed,r=this.minSupport,n=this.frequentSize1Subgraphs,a={},o={},s={},u={};return Object.keys(e).forEach(function(f){var c=e[f],l=c.nodeMap;c.nodes.forEach(function(m,w){var C=m.label,D="".concat(f,"-").concat(C);if(!s[D]){var U=a[C]||0;U++,a[C]=U}s[D]={graphKey:f,label:C},m.edges.forEach(function($){var tt=C,it=l[$.to].label;if(!t&&tt>it){var ct=it;it=tt,tt=ct}var _t=$.label,Bt="".concat(f,"-").concat(tt,"-").concat(_t,"-").concat(it),Pt="".concat(tt,"-").concat(_t,"-").concat(it);if(!o[Pt]){var Qt=o[Pt]||0;Qt++,o[Pt]=Qt}u[Bt]={graphId:f,nodeLabel1:tt,edgeLabel:_t,nodeLabel2:it}})})}),Object.keys(a).forEach(function(f){var c=a[f];if(!(c<r)){var l={nodes:[],edges:[]};l.nodes.push({id:"0",label:f}),n.push(l)}}),n},i.prototype.run=function(){var e=this;if(this.frequentSize1Subgraphs=this.generate1EdgeFrequentSubGraphs(),!(this.maxNodeNum<2)){var t=this.graphs,r=this.directed,n={};Object.keys(t).forEach(function(a){var o=t[a],s=o.nodeMap;o.nodes.forEach(function(u){var f=e.findForwardRootEdges(o,u);f.forEach(function(c){var l=s[c.to],m="".concat(u.label,"-").concat(c.label,"-").concat(l.label);n[m]||(n[m]={projected:[],nodeLabel1:u.label,edgeLabel:c.label,nodeLabel2:l.label});var w={graphId:a,edge:c,preNode:null};n[m].projected.push(w)})})}),Object.keys(n).forEach(function(a){var o=n[a],s=o.projected,u=o.nodeLabel1,f=o.edgeLabel,c=o.nodeLabel2;e.dfsCode.dfsEdgeList.push(new ta(0,1,u,f,c)),e.subGraphMining(s),e.dfsCode.dfsEdgeList.pop()})}},i}(),Za=function(e,t,r,n){var a={};return Object.keys(e).forEach(function(o,s){var u=e[o],f=new En(s,!0,t),c={};u.nodes.forEach(function(l,m){f.addNode(m,l[r]),c[l.id]=m}),u.edges.forEach(function(l,m){var w=c[l.source],C=c[l.target];f.addEdge(-1,w,C,l[n])}),f&&f.getNodeNum()&&(a[f.id]=f)}),a},Ba=function(e,t,r){var n=[];return e.forEach(function(a){var o={nodes:[],edges:[]};a.nodes.forEach(function(s){var u;o.nodes.push((u={id:"".concat(s.id)},u[t]=s.label,u))}),a.edges.forEach(function(s){var u;o.edges.push((u={source:"".concat(s.from),target:"".concat(s.to)},u[r]=s.label,u))}),n.push(o)}),n},To="cluster",_i=function(e){var t=e.graphs,r=e.directed,n=r===void 0?!1:r,a=e.nodeLabelProp,o=a===void 0?To:a,s=e.edgeLabelProp,u=s===void 0?To:s,f=Za(t,n,o,u),c=e.minSupport,l=e.maxNodeNum,m=e.minNodeNum,w=e.verbose,C=e.top,D={graphs:f,minSupport:c,maxNodeNum:l,minNodeNum:m,top:C,verbose:w,directed:n},U=new Ha(D);U.run();var $=Ba(U.frequentSubgraphs,o,u);return $},Si=_i,io=function(e,t,r,n){r===void 0&&(r="cluster"),n===void 0&&(n=2);var a=[],o=e.nodes;return t.forEach(function(s,u){a.push(fs(o,s,u,r,n))}),a},fs=function(e,t,r,n,a){var o=[r],s=[],u={};return t.forEach(function(f,c){if(f<=a&&r!==c){o.push(c),s.push(e[c]);var l=e[c][n];u[l]?(u[l].count++,u[l].dists.push(f)):u[l]={count:1,dists:[f]}}}),Object.keys(u).forEach(function(f){u[f].dists=u[f].dists.sort(function(c,l){return c-l})}),{nodeIdx:r,nodeId:e[r].id,nodeIdxs:o,neighbors:s,neighborNum:o.length-1,nodeLabelCountMap:u}},Io=function(e,t,r,n,a){var o=Math.ceil(r/t),s={},u=0;return n.forEach(function(f,c){for(var l=0,m=0,w=f.nodeIdxs,C=f.neighborNum-1;l<o;){for(var D=w[1+Math.floor(Math.random()*C)],U=0;(s["".concat(c,"-").concat(D)]||s["".concat(D,"-").concat(c)])&&(D=Math.floor(Math.random()*t),U++,!(U>2*t)););if(U<2*t&&(s["".concat(c,"-").concat(D)]={start:c,end:D,distance:a[c][D]},l++,u++,u>=r))return s;if(m++,m>2*t)break}if(l<o){var $=o-l;o=(o+$)/(t-c-1)}}),s},oo=function(e,t,r,n){var a=r.nodes;return n||(n={}),Object.keys(e).forEach(function(o){var s,u;if(!(n&&n[o])){n[o]={nodes:[],edges:[]};var f=e[o],c=(s=t[f.start])===null||s===void 0?void 0:s.nodeIdxs,l=(u=t[f.end])===null||u===void 0?void 0:u.nodeIdxs;if(!(!c||!l)){var m=new Set(l),w=c.filter(function(tt){return m.has(tt)});if(!(!w||!w.length)){for(var C={},D=w.length,U=0;U<D;U++){var $=a[w[U]];n[o].nodes.push($),C[$.id]=!0}r.edges.forEach(function(tt){C[tt.source]&&C[tt.target]&&n[o].edges.push(tt)})}}}}),n},Ca=function(e,t,r,n){var a,o,s={};e.nodes.forEach(function(f){s[f.id]=f});var u=0;return!(!((a=t==null?void 0:t.edges)===null||a===void 0)&&a.length)||((o=t==null?void 0:t.nodes)===null||o===void 0?void 0:o.length)<2?0:(e.edges.forEach(function(f){var c=s[f.source][r],l=s[f.target][r],m=t==null?void 0:t.nodes[0][r],w=t==null?void 0:t.nodes[1][r],C=t==null?void 0:t.edges[0][n];f[n]===C&&(c===m&&l===w||c===w&&l===m)&&u++}),u)},ko=function(e,t,r){for(var n=1/0,a=0,o=function(f){var c=e[f],l=Object.keys(c).sort(function(tt,it){return c[tt]-c[it]}),m=10,w=[];l.forEach(function(tt,it){w[it%m]||(w[it%m]={graphs:[],totalCount:0,aveCount:0}),w[it%m].graphs.push(tt),w[it%m].totalCount+=c[tt]});var C=0,D=[];w.forEach(function(tt){var it=tt.totalCount/tt.graphs.length;tt.aveCount=it,D.push(it);var ct=0,_t=tt.length;tt.graphs.forEach(function(Bt,Pt){var Qt=c[Bt];tt.graphs.forEach(function(ye,ce){Pt!==ce&&(ct+=Math.abs(Qt-c[ye]))})}),ct/=_t*(_t-1)/2,C+=ct}),C/=w.length;var U=0;D.forEach(function(tt,it){D.forEach(function(ct,_t){it!==_t&&(U+=Math.abs(tt-ct))}),U/=D.length*(D.length-1)/2});var $=U-C;n<$&&(n=$,a=f)},s=0;s<t;s++)o(s);return{structure:r[a],structureCountMap:e[a]}},cs=function(e,t){var r={},n={};return e.forEach(function(a,o){r[a.id]={idx:o,node:a,degree:0,inDegree:0,outDegree:0};var s=a[t];n[s]||(n[s]=[]),n[s].push(a)}),{nodeMap:r,nodeLabelMap:n}},ri=function(e,t,r){var n={},a={};return e.forEach(function(o,s){n["".concat(_e)]={idx:s,edge:o};var u=o[t];a[u]||(a[u]=[]),a[u].push(o);var f=r[o.source];f&&(f.degree++,f.outDegree++);var c=r[o.target];c&&(c.degree++,c.inDegree++)}),{edgeMap:n,edgeLabelMap:a}},Vi=function(e,t,r){var n=t.length,a={};return t.forEach(function(o,s){for(var u=r?0:s+1,f=e[s].id,c=u;c<n;c++)if(s!==c){var l=e[c].id,m=o[c];a["".concat(f,"-").concat(l)]=m,r||(a["".concat(l,"-").concat(f)]=m)}}),a},ls=function(e,t,r,n,a,o,s,u,f,c,l){var m,w="".concat(t.id,"-").concat(r.id);if(c&&c[w])return c[w];var C=l?l[w]:void 0;if(!C){var D=(m={},m[w]={start:n[t.id].idx,end:n[r.id].idx,distance:a},m);l=oo(D,o,e,l),C=l[w]}return Ca(C,s,u,f)},Xo=function(e,t,r,n){var a,o,s,u=(a=e[t])===null||a===void 0?void 0:a.degree,f=(o=e[t])===null||o===void 0?void 0:o.inDegree,c=(s=e[t])===null||s===void 0?void 0:s.outDegree;return e[t]===void 0&&(u=1/0,f=1/0,c=1/0,n[t].forEach(function(l){var m=r[l.id].degree;u>m&&(u=m);var w=r[l.id].inDegree;f>w&&(f=w);var C=r[l.id].outDegree;c>C&&(c=C)}),e[t]={degree:u,inDegree:f,outDegree:c}),{minPatternNodeLabelDegree:u,minPatternNodeLabelInDegree:f,minPatternNodeLabelOutDegree:c}},Hi=function(e,t,r,n,a,o,s){var u;if(r===void 0&&(r=!1),o===void 0&&(o="cluster"),s===void 0&&(s="cluster"),!(!e||!e.nodes)){var f=e.nodes.length;if(f){var c=yn(e,r),l=yn(t,r),m=Vi(e.nodes,c,r),w=Vi(t.nodes,l,r),C=cs(e.nodes,o),D=C.nodeMap,U=C.nodeLabelMap,$=cs(t.nodes,o),tt=$.nodeMap,it=$.nodeLabelMap;ri(e.edges,s,D);var ct=ri(t.edges,s,tt).edgeLabelMap,_t=[];l==null||l.forEach(function(Va){_t=_t.concat(Va)}),a||(a=Math.max.apply(Math,(0,g.__spreadArray)((0,g.__spreadArray)([],_t,!1),[2],!1))),n||(n=a);var Bt=io(e,c,o,n),Pt=io(t,l,o,n),Qt=Math.min(100,f*(f-1)/2),ye=Io(n,f,Qt,Bt,c),ce=oo(ye,Bt,e),Ne=10,$e=1,Rr=1,rn=4,Vr={graphs:ce,nodeLabelProp:o,edgeLabelProp:s,minSupport:$e,minNodeNum:Rr,maxNodeNum:rn,directed:r},Cr=Si(Vr).slice(0,Ne),Cn=Cr.length,_n=[];Cr.forEach(function(Va,ci){_n[ci]={},Object.keys(ce).forEach(function(Ya){var li=ce[Ya],Di=Ca(li,Va,o,s);_n[ci][Ya]=Di})});var Tr=ko(_n,Cn,Cr),jr=Tr.structure,dn=Tr.structureCountMap,vn=t.nodes[0],Pn=[],Wn=(u=t.nodes[0])===null||u===void 0?void 0:u[o],ma=-1/0;t.nodes.forEach(function(Va){var ci=Va[o],Ya=U[ci];(Ya==null?void 0:Ya.length)>ma&&(ma=Ya.length,Pn=Ya,Wn=ci,vn=Va)});var Oa={},pi={},ai={},gi={},Ei={},Qi={};Object.keys(it).forEach(function(Va,ci){Ei[Va]=[],r&&(Qi[Va]=[]);var Ya=-1/0,li=it[Va],Di={};li.forEach(function(ei){var fi=w["".concat(vn.id,"-").concat(ei.id)];if(fi&&Ei[Va].push(fi),Ya<fi&&(Ya=fi),Di["".concat(vn.id,"-").concat(ei.id)]={start:0,end:tt[ei.id].idx,distance:fi},r){var po=w["".concat(ei.id,"-").concat(vn.id)];po&&Qi[Va].push(po)}}),Ei[Va]=Ei[Va].sort(function(ei,fi){return ei-fi}),r&&(Qi[Va]=Qi[Va].sort(function(ei,fi){return ei-fi})),pi=oo(Di,Pt,t,pi);var fa=[];if(Object.keys(Di).forEach(function(ei){if(ai[ei]){fa.push(ai[ei]);return}var fi=pi[ei];ai[ei]=Ca(fi,jr,o,s),fa.push(ai[ei])}),fa=fa.sort(function(ei,fi){return fi-ei}),gi["".concat(vn.id,"-").concat(Va)]=fa,Va!==Wn)for(var Ka=(Pn==null?void 0:Pn.length)||0,ti=function(fi){var po=Pn[fi],wu=Bt[D[po.id].idx],Uo=wu.nodeLabelCountMap[Va],Bl=it[Va].length;if(!Uo||Uo.count<Bl)return Pn.splice(fi,1),"continue";for(var ph=!1,Ks=0;Ks<Bl;Ks++)if(Uo.dists[Ks]>Ei[Va][Ks]){ph=!0;break}if(ph)return Pn.splice(fi,1),"continue";var Uu={};wu.neighbors.forEach(function(Qs){var rf=m["".concat(po.id,"-").concat(Qs.id)];Uu["".concat(po.id,"-").concat(Qs.id)]={start:D[po.id].idx,end:D[Qs.id].idx,distance:rf}}),ce=oo(Uu,Bt,e,ce);var Pf=[];Object.keys(Uu).forEach(function(Qs){if(dn[Qs]){Pf.push(dn[Qs]);return}var rf=ce[Qs];dn[Qs]=Ca(rf,jr,o,s),Pf.push(dn[Qs])}),Pf=Pf.sort(function(Qs,rf){return rf-Qs});for(var Jc=!1,Ks=0;Ks<Bl;Ks++)if(Pf[Ks]<fa[Ks]){Jc=!0;break}if(Jc)return Pn.splice(fi,1),"continue"},Pi=Ka-1;Pi>=0;Pi--)ti(Pi)});var Fi=[];Pn==null||Pn.forEach(function(Va){for(var ci=D[Va.id].idx,Ya=fs(e.nodes,c[ci],ci,o,a),li=Ya.neighbors,Di=li.length,fa=!1,Ka=Di-1;Ka>=0;Ka--){if(li.length+1<t.nodes.length){fa=!0;return}var ti=li[Ka],Pi=ti[o];if(!it[Pi]||!it[Pi].length){li.splice(Ka,1);continue}if(!Ei[Pi]||!Ei[Pi].length){li.splice(Ka,1);continue}var ei="".concat(Va.id,"-").concat(ti.id),fi=m[ei],po=Ei[Pi].length-1,wu=Ei[Pi][po];if(fi>wu){li.splice(Ka,1);continue}if(r){var Uo="".concat(ti.id,"-").concat(Va.id),Bl=m[Uo];po=Qi[Pi].length-1;var ph=Qi[Pi][po];if(Bl>ph){li.splice(Ka,1);continue}}var Ks=dn[ei]?dn[ei]:ls(e,Va,ti,D,fi,Bt,jr,o,s,dn,ce),Uu="".concat(vn.id,"-").concat(Pi),Pf=gi[Uu][gi[Uu].length-1];if(Ks<Pf){li.splice(Ka,1);continue}var Jc=Xo(Oa,Pi,tt,it),Qs=Jc.minPatternNodeLabelDegree,rf=Jc.minPatternNodeLabelInDegree,pc=Jc.minPatternNodeLabelOutDegree;if(D[ti.id].degree<Qs){li.splice(Ka,1);continue}}fa||Fi.push({nodes:[Va].concat(li)})});var Gu=er(t,vn.id,!1).length,ts={};r?(Object.keys(Gu).forEach(function(Va){var ci=tt[Va].node[o];ts[ci]?ts[ci].push(Gu[Va]):ts[ci]=[Gu[Va]]}),Object.keys(ts).forEach(function(Va){ts[Va].sort(function(ci,Ya){return ci-Ya})})):ts=Ei;for(var zu=Fi.length,es=function(ci){var Ya=Fi[ci],li=Ya.nodes[0],Di={},fa={};Ya.nodes.forEach(function(ao,Eu){fa[ao.id]={idx:Eu,node:ao,degree:0,inDegree:0,outDegree:0};var us=ao[o];Di[us]?Di[us]++:Di[us]=1});var Ka=[],ti={};e.edges.forEach(function(ao){fa[ao.source]&&fa[ao.target]&&(Ka.push(ao),ti[ao[s]]?ti[ao[s]]++:ti[ao[s]]=1,fa[ao.source].degree++,fa[ao.target].degree++,fa[ao.source].outDegree++,fa[ao.target].inDegree++)});for(var Pi=Object.keys(ct).length,ei=!1,fi=0;fi<Pi;fi++){var po=Object.keys(ct)[fi];if(!ti[po]||ti[po]<ct[po].length){ei=!0;break}}if(ei)return Fi.splice(ci,1),"continue";var wu=Ka.length;if(wu<t.edges.length)return Fi.splice(ci,1),"break";for(var Uo=!1,Bl=function(Eu){var us=Ka[Eu],Rf=us[s],Fl=ct[Rf];if(!Fl||!Fl.length)return ti[Rf]--,Fl&&ti[Rf]<Fl.length?(Uo=!0,"break"):(Ka.splice(Eu,1),fa[us.source].degree--,fa[us.target].degree--,fa[us.source].outDegree--,fa[us.target].inDegree--,"continue");var ey=fa[us.source].node[o],ry=fa[us.target].node[o],Uv=!1;if(Fl.forEach(function(ny){var ay=tt[ny.source].node,iy=tt[ny.target].node;ay[o]===ey&&iy[o]===ry&&(Uv=!0),!r&&ay[o]===ry&&iy[o]===ey&&(Uv=!0)}),!Uv)return ti[Rf]--,Fl&&ti[Rf]<Fl.length?(Uo=!0,"break"):(Ka.splice(Eu,1),fa[us.source].degree--,fa[us.target].degree--,fa[us.source].outDegree--,fa[us.target].inDegree--,"continue")},fi=wu-1;fi>=0;fi--){var ph=Bl(fi);if(ph==="break")break}if(Uo)return Fi.splice(ci,1),"continue";Ya.edges=Ka;var Ks=er(Ya,Ya.nodes[0].id,!1).length;if(Object.keys(Ks).reverse().forEach(function(ao){if(!(ao===Ya.nodes[0].id||Uo)){if(Ks[ao]===1/0){var Eu=fa[ao].node[o];if(Di[Eu]--,Di[Eu]<it[Eu].length){Uo=!0;return}var us=Ya.nodes.indexOf(fa[ao].node);Ya.nodes.splice(us,1),fa[ao]=void 0;return}var Rf=D[ao].node[o];if(!ts[Rf]||!ts[Rf].length||Ks[ao]>ts[Rf][ts[Rf].length-1]){var Eu=fa[ao].node[o];if(Di[Eu]--,Di[Eu]<it[Eu].length){Uo=!0;return}var us=Ya.nodes.indexOf(fa[ao].node);Ya.nodes.splice(us,1),fa[ao]=void 0}}}),Uo)return Fi.splice(ci,1),"continue";for(var Uu=!0,Pf=0;Uu&&!Uo;){Uu=!1;var Jc=r?fa[li.id].degree<tt[vn.id].degree||fa[li.id].inDegree<tt[vn.id].inDegree||fa[li.id].outDegree<tt[vn.id].outDegree:fa[li.id].degree<tt[vn.id].degree;if(Jc){Uo=!0;break}if(Di[li[o]]<it[li[o]].length){Uo=!0;break}for(var Qs=Ya.nodes.length,rf=Qs-1;rf>=0;rf--){var pc=Ya.nodes[rf],J0=fa[pc.id].degree,S2=fa[pc.id].inDegree,M2=fa[pc.id].outDegree,A2=pc[o],zv=Xo(Oa,A2,tt,it),ty=zv.minPatternNodeLabelDegree,C2=zv.minPatternNodeLabelInDegree,T2=zv.minPatternNodeLabelOutDegree,I2=r?J0<ty||S2<C2||M2<T2:J0<ty;if(I2){if(Di[pc[o]]--,Di[pc[o]]<it[pc[o]].length){Uo=!0;break}Ya.nodes.splice(rf,1),fa[pc.id]=void 0,Uu=!0}}if(Uo||!Uu&&Pf!==0)break;wu=Ka.length;for(var Od=wu-1;Od>=0;Od--){var gc=Ka[Od];if(!fa[gc.source]||!fa[gc.target]){Ka.splice(Od,1);var Dd=gc[s];if(ti[Dd]--,fa[gc.source]&&(fa[gc.source].degree--,fa[gc.source].outDegree--),fa[gc.target]&&(fa[gc.target].degree--,fa[gc.target].inDegree--),ct[Dd]&&ti[Dd]<ct[Dd].length){Uo=!0;break}Uu=!0}}Pf++}if(Uo||Uo||Ya.nodes.length<t.nodes.length||Ka.length<t.edges.length)return Fi.splice(ci,1),"continue"},rs=zu-1;rs>=0;rs--){var xu=es(rs);if(xu==="break")break}for(var Os=Fi.length,$s=function(ci){var Ya=Fi[ci],li={};Ya.edges.forEach(function(Ka){var ti="".concat(Ka.source,"-").concat(Ka.target,"-").concat(Ka.label);li[ti]?li[ti]++:li[ti]=1});for(var Di=function(ti){var Pi=Fi[ti],ei={};Pi.edges.forEach(function(po){var wu="".concat(po.source,"-").concat(po.target,"-").concat(po.label);ei[wu]?ei[wu]++:ei[wu]=1});var fi=!0;Object.keys(ei).length!==Object.keys(li).length?fi=!1:Object.keys(li).forEach(function(po){ei[po]!==li[po]&&(fi=!1)}),fi&&Fi.splice(ti,1)},fa=Os-1;fa>ci;fa--)Di(fa);Os=Fi.length},rs=0;rs<=Os-1;rs++)$s(rs);return Fi}}},so=Hi,Ws=function(){function i(e){e===void 0&&(e=10),this.linkedList=new Jt,this.maxStep=e}return Object.defineProperty(i.prototype,"length",{get:function(){return this.linkedList.toArray().length},enumerable:!1,configurable:!0}),i.prototype.isEmpty=function(){return!this.linkedList.head},i.prototype.isMaxStack=function(){return this.toArray().length>=this.maxStep},i.prototype.peek=function(){return this.isEmpty()?null:this.linkedList.head.value},i.prototype.push=function(e){this.linkedList.prepend(e),this.length>this.maxStep&&this.linkedList.deleteTail()},i.prototype.pop=function(){var e=this.linkedList.deleteHead();return e?e.value:null},i.prototype.toArray=function(){return this.linkedList.toArray().map(function(e){return e.value})},i.prototype.clear=function(){for(;!this.isEmpty();)this.pop()},i}(),Yo=Ws,Mi=Kn,uo={getAdjMatrix:yt,breadthFirstSearch:Pe,connectedComponent:Ie,getDegree:Te,getInDegree:Be,getOutDegree:Tt,detectCycle:Kn,detectDirectedCycle:Mi,detectAllCycles:Sn,detectAllDirectedCycle:Xr,detectAllUndirectedCycle:wn,depthFirstSearch:Zr,dijkstra:er,findAllPath:Gr,findShortestPath:dr,floydWarshall:yn,labelPropagation:Vn,louvain:vt,iLouvain:P,kCore:T,kMeans:Gt,cosineSimilarity:ee,nodesCosineSimilarity:Ae,minimumSpanningTree:Yr,pageRank:It,getNeighbors:oe,Stack:Yo,GADDI:so},hs=et(77160),Un=et(31437),Eo=Ht,Po=function(e){return function(t,r){return t[e]-r[e]}},Ss=function(e,t,r){return e>=t&&e<=r},Wo=function(e,t,r,n){var a=1e-4,o={x:r.x-e.x,y:r.y-e.y},s={x:t.x-e.x,y:t.y-e.y},u={x:n.x-r.x,y:n.y-r.y},f=s.x*u.y-s.y*u.x,c=f*f,l=1/f,m=s.x*s.x+s.y*s.y,w=u.x*u.x+u.y*u.y;if(c>a*m*w){var C=(o.x*u.y-o.y*u.x)*l,D=(o.x*s.y-o.y*s.x)*l;return!Ss(C,0,1)||!Ss(D,0,1)?null:{x:e.x+C*s.x,y:e.y+C*s.y}}return null},Ds=function(e,t){var r=e.x,n=e.y,a=e.width,o=e.height,s=r+a/2,u=n+o/2,f=[],c={x:s,y:u};f.push({x:r,y:n}),f.push({x:r+a,y:n}),f.push({x:r+a,y:n+o}),f.push({x:r,y:n+o}),f.push({x:r,y:n});for(var l=null,m=1;m<f.length&&(l=Wo(f[m-1],f[m],c,t),!l);m++);return l},$n=function(e,t){var r=e.x,n=e.y,a=e.r,o=t.x,s=t.y,u=o-r,f=s-n;if(u*u+f*f<a*a)return null;var c=Math.atan(f/u);return{x:r+Math.abs(a*Math.cos(c))*Math.sign(u),y:n+Math.abs(a*Math.sin(c))*Math.sign(f)}},ji=function(e,t){var r=e.rx,n=e.ry,a=e.x,o=e.y,s=t.x-a,u=t.y-o,f=Math.atan2(u/n,s/r);return f<0&&(f+=2*Math.PI),{x:a+r*Math.cos(f),y:o+n*Math.sin(f)}},Zi=function(e,t,r){r===void 0&&(r=1);var n=[e.x,e.y,r];return(!t||isNaN(t[0]))&&(t=[1,0,0,0,1,0,0,0,1]),hs.transformMat3(n,n,t),{x:n[0],y:n[1]}},bi=function(e,t,r){r===void 0&&(r=1),(!t||isNaN(t[0]))&&(t=[1,0,0,0,1,0,0,0,1]);var n=rt.invert([1,0,0,0,1,0,0,0,1],t);n||(n=[1,0,0,0,1,0,0,0,1]);var a=[e.x,e.y,r];return hs.transformMat3(a,a,n),{x:a[0],y:a[1]}},Vo=function(e,t,r){var n=e.x-t.x,a=e.y-t.y,o=e.x-r.x,s=e.y-r.y,u=(e.x*e.x-t.x*t.x-t.y*t.y+e.y*e.y)/2,f=(e.x*e.x-r.x*r.x-r.y*r.y+e.y*e.y)/2,c=a*o-n*s;return{x:-(s*u-a*f)/c,y:-(n*f-o*u)/c}},Ho=function(e,t){var r=e.x-t.x,n=e.y-t.y;return Math.sqrt(r*r+n*n)},fo=function(e,t){var r=[];return e.forEach(function(n){var a=[];n.forEach(function(o){a.push(o*t)}),r.push(a)}),r},ds=function(e){for(var t=[],r=e.length,n=0;n<r;n+=1){t[n]=[];for(var a=0;a<r;a+=1)n===a?t[n][a]=0:e[n][a]===0||!e[n][a]?t[n][a]=1/0:t[n][a]=e[n][a]}for(var o=0;o<r;o+=1)for(var n=0;n<r;n+=1)for(var a=0;a<r;a+=1)t[n][a]>t[n][o]+t[o][a]&&(t[n][a]=t[n][o]+t[o][a]);return t},Ms=function(e,t){var r=e.nodes,n=e.edges,a=[],o={};if(!r)throw new Error("invalid nodes data!");return r&&r.forEach(function(s,u){o[s.id]=u;var f=[];a.push(f)}),n&&n.forEach(function(s){var u=s.source,f=s.target,c=o[u],l=o[f];a[c][l]=1,t||(a[l][c]=1)}),a},ns=function(e,t){e.translate(t.x,t.y)},Ia=function(e,t,r,n){n===void 0&&(n={duration:500});var a=e.getMatrix();a||(a=[1,0,0,0,1,0,0,0,1]);var o=e.getCanvasBBox(),s=t.x-o.minX,u=t.y-o.minY;if(r){var f=s*a[0],c=u*a[4],l=0,m=0,w=0,C=0;e.animate(function(U){return w=f*U,C=c*U,a=Eo(a,[["t",w-l,C-m]]),l=w,m=C,{matrix:a}},n)}else{var D=Eo(a,[["t",s,u]]);e.setMatrix(D)}},Ps=function(e,t){var r=e.getMatrix();r||(r=[1,0,0,0,1,0,0,0,1]);var n=t;(0,v.isArray)(t)||(n=[t,t]),(0,v.isArray)(t)&&t.length===1&&(n=[t[0],t[0]]),r=Eo(r,[["s",n[0],n[1]]]),e.setMatrix(r)},_o=function(e,t){var r=e.getMatrix();r||(r=[1,0,0,0,1,0,0,0,1]),r=Eo(r,[["r",t]]),e.setMatrix(r)},co=function(e,t,r){for(var n=[],a=0;a<e;a++)n[a]=0;return r.forEach(function(o){o.source&&(n[t[o.source]]+=1),o.target&&(n[t[o.target]]+=1)}),n};function As(i,e,t){return(t[0]-i[0])*(e[1]-i[1])===(e[0]-i[0])*(t[1]-i[1])&&Math.min(i[0],e[0])<=t[0]&&t[0]<=Math.max(i[0],e[0])&&Math.min(i[1],e[1])<=t[1]&&t[1]<=Math.max(i[1],e[1])}var Ro=function(e,t,r){var n=!1,a=e.length,o=1e-6;function s(l){return Math.abs(l)<o?0:l<0?-1:1}if(a<=2)return!1;for(var u=0;u<a;u++){var f=e[u],c=e[(u+1)%a];if(As(f,c,[t,r]))return!0;s(f[1]-r)>0!=s(c[1]-r)>0&&s(t-(r-f[1])*(f[0]-c[0])/(f[1]-c[1])-f[0])<0&&(n=!n)}return n},Gi=function(e,t){return!(t.minX>e.maxX||t.maxX<e.minX||t.minY>e.maxY||t.maxY<e.minY)},So=function(e,t){var r=!1;return(0,v.each)(e,function(n){if(Wo(n.from,n.to,t.from,t.to))return r=!0,!1}),r},qi=function(e,t){var r=function(m){var w=m.map(function(D){return D[0]}),C=m.map(function(D){return D[1]});return{minX:Math.min.apply(null,w),maxX:Math.max.apply(null,w),minY:Math.min.apply(null,C),maxY:Math.max.apply(null,C)}},n=function(m){for(var w=[],C=m.length,D=0;D<C-1;D++){var U=m[D],$=m[D+1];w.push({from:{x:U[0],y:U[1]},to:{x:$[0],y:$[1]}})}if(w.length>1){var tt=m[0],it=m[C-1];w.push({from:{x:it[0],y:it[1]},to:{x:tt[0],y:tt[1]}})}return w};if(e.length<2||t.length<2)return!1;var a=r(e),o=r(t);if(!Gi(a,o))return!1;var s=!1;if((0,v.each)(t,function(l){if(Ro(e,l[0],l[1]))return s=!0,!1}),s||((0,v.each)(e,function(l){if(Ro(t,l[0],l[1]))return s=!0,!1}),s))return!0;var u=n(e),f=n(t),c=!1;return(0,v.each)(f,function(l){if(So(u,l))return c=!0,!1}),c},Lo=function(){function i(e,t,r,n){this.x1=e,this.y1=t,this.x2=r,this.y2=n}return i.prototype.getBBox=function(){var e=Math.min(this.x1,this.x2),t=Math.min(this.y1,this.y2),r=Math.max(this.x1,this.x2),n=Math.max(this.y1,this.y2),a={x:e,y:t,minX:e,minY:t,maxX:r,maxY:n,width:r-e,height:n-t};return a},i}(),hi=function(e,t){var r={top:[e.minX,e.minY,e.maxX,e.minY],left:[e.minX,e.minY,e.minX,e.maxY],bottom:[e.minX,e.maxY,e.maxX,e.maxY],right:[e.maxX,e.minY,e.maxX,e.maxY]};return r[t]},Cs=function(e,t){var r=(t.x2-t.x1)*(e.y1-t.y1)-(t.y2-t.y1)*(e.x1-t.x1),n=(e.x2-e.x1)*(e.y1-t.y1)-(e.y2-e.y1)*(e.x1-t.x1),a=(t.y2-t.y1)*(e.x2-e.x1)-(t.x2-t.x1)*(e.y2-e.y1);if(a){var o=r/a,s=n/a;if(o>=0&&o<=1&&s>=0&&s<=1)return o}return Number.POSITIVE_INFINITY},Bo=function(e,t){for(var r=["top","left","bottom","right"],n=e.getBBox(),a=0,o=[],s=0;s<4;s++){var u=hi(n,r[s]),f=u[0],c=u[1],l=u[2],m=u[3];o[s]=Wo({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},{x:f,y:c},{x:l,y:m}),o[s]&&(a+=1)}return[o,a]},lo=function(e,t){for(var r=["top","left","bottom","right"],n=e.getBBox(),a=Number.POSITIVE_INFINITY,o=0,s=0;s<4;s++){var u=hi(n,r[s]),f=u[0],c=u[1],l=u[2],m=u[3],w=Cs(t,new Lo(f,c,l,m));w=Math.abs(w-.5),w>=0&&w<=1&&(o+=1,a=w<a?w:a)}return o===0?-1:a},jo=function(e){var t=0,r=0;if(e.length>0){for(var n=0,a=e;n<a.length;n++){var o=a[n];t+=o.x,r+=o.y}t/=e.length,r/=e.length}return{x:t,y:r}},Mo=function(e,t){return Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)},Zo=function(e,t){var r=t.x1,n=t.y1,a=t.x2-r,o=t.y2-n,s=e.x-r,u=e.y-n,f=s*a+u*o,c;f<=0?c=0:(s=a-s,u=o-u,f=s*a+u*o,f<=0?c=0:c=f*f/(a*a+o*o));var l=s*s+u*u-c;return l<0&&(l=0),l},go=function(e,t,r){return r===void 0&&(r=.001),Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)<Math.pow(r,2)},Da=function(e,t){var r=e.x<t.x,n=e.x>t.x+t.width,a=e.y>t.y+t.height,o=e.y<t.y,s=r||n||a||o;if(!s)return 0;if(a&&!r&&!n)return Math.pow(t.y+t.height-e.y,2);if(o&&!r&&!n)return Math.pow(e.y-t.y,2);if(r&&!a&&!o)return Math.pow(t.x-e.x,2);if(n&&!a&&!o)return Math.pow(t.x+t.width-e.x,2);var u=Math.min(Math.abs(t.x-e.x),Math.abs(t.x+t.width-e.x)),f=Math.min(Math.abs(t.y-e.y),Math.abs(t.y+t.height-e.y));return u*u+f*f},Ri=function(e,t){var r=e[0],n=e[1],a=e[2],o=e[3],s=t.x,u=t.y,f=[a-r,o-n];if(Un.exactEquals(f,[0,0]))return NaN;var c=[-f[1],f[0]];Un.normalize(c,c);var l=[s-r,u-n];return Math.abs(Un.dot(l,c))},zi=function(e,t,r){return e+(t-e)*r},Pa=function(e,t,r){for(var n=Math.min(e.length,t.length),a=new Array(n),o=0;o<n;o++)a[o]=zi(e[o],t[o],r);return a},Ii="rgb(95, 149, 255)",qo="rgb(255, 255, 255)",Bi="rgb(0, 0, 0)",Fo="rgb(247, 250, 255)",Ao="rgb(239, 244, 255)",$i="rgb(253, 253, 253)",Ts="rgb(250, 250, 250)",vs="rgb(224, 224, 224)",$o="rgb(234, 234, 234)",ps="rgb(245, 245, 245)",ou="rgb(191, 213, 255)",Vs="#4572d9",gs="rgb(223, 234, 255)",Ct={mainStroke:Ii,mainFill:Ao,activeStroke:Ii,activeFill:Fo,inactiveStroke:ou,inactiveFill:Fo,selectedStroke:Ii,selectedFill:qo,highlightStroke:Vs,highlightFill:gs,disableStroke:vs,disableFill:Ts,edgeMainStroke:vs,edgeActiveStroke:Ii,edgeInactiveStroke:$o,edgeSelectedStroke:Ii,edgeHighlightStroke:Ii,edgeDisableStroke:ps,comboMainStroke:vs,comboMainFill:$i,comboActiveStroke:Ii,comboActiveFill:Fo,comboInactiveStroke:vs,comboInactiveFill:$i,comboSelectedStroke:Ii,comboSelectedFill:$i,comboHighlightStroke:Vs,comboHighlightFill:$i,comboDisableStroke:$o,comboDisableFill:Ts},Zt={version:"0.8.23",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:Ct.mainStroke,fill:Ao},size:20,color:Ct.mainStroke,linkPoints:{size:8,lineWidth:1,fill:Ct.activeFill,stroke:Ct.activeStroke}},nodeStateStyles:{active:{fill:Ct.activeFill,stroke:Ct.activeStroke,lineWidth:2,shadowColor:Ct.mainStroke,shadowBlur:10},selected:{fill:Ct.selectedFill,stroke:Ct.selectedStroke,lineWidth:4,shadowColor:Ct.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:Ct.highlightFill,stroke:Ct.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:Ct.inactiveFill,stroke:Ct.inactiveStroke,lineWidth:1},disable:{fill:Ct.disableFill,stroke:Ct.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:Bi,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:Ct.edgeMainStroke,lineAppendWidth:2},color:Ct.edgeMainStroke},edgeStateStyles:{active:{stroke:Ct.edgeActiveStroke,lineWidth:1},selected:{stroke:Ct.edgeSelectedStroke,lineWidth:2,shadowColor:Ct.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:Ct.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:Ct.edgeInactiveStroke,lineWidth:1},disable:{stroke:Ct.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:Bi,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:Ct.comboMainFill,lineWidth:1,stroke:Ct.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:Ct.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:Ct.comboActiveStroke,lineWidth:1,fill:Ct.comboActiveFill},selected:{stroke:Ct.comboSelectedStroke,lineWidth:2,fill:Ct.comboSelectedFill,shadowColor:Ct.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:Ct.comboHighlightStroke,lineWidth:2,fill:Ct.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:Ct.comboInactiveStroke,fill:Ct.comboInactiveFill,lineWidth:1},disable:{stroke:Ct.comboDisableStroke,fill:Ct.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},windowFontFamily:typeof window!="undefined"&&window.getComputedStyle&&document.body&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},Xe={" ":.3329986572265625,a:.5589996337890625,A:.6569992065429687,b:.58599853515625,B:.6769989013671875,c:.5469985961914062,C:.7279998779296875,d:.58599853515625,D:.705999755859375,e:.554998779296875,E:.63699951171875,f:.37299957275390627,F:.5769989013671875,g:.5909988403320312,G:.7479995727539063,h:.555999755859375,H:.7199996948242188,i:.255999755859375,I:.23699951171875,j:.26699981689453123,J:.5169998168945312,k:.5289993286132812,K:.6899993896484375,l:.23499908447265624,L:.5879989624023437,m:.854998779296875,M:.8819992065429687,n:.5589996337890625,N:.7189987182617188,o:.58599853515625,O:.7669998168945312,p:.58599853515625,P:.6419998168945312,q:.58599853515625,Q:.7669998168945312,r:.3649993896484375,R:.6759994506835938,s:.504998779296875,S:.6319992065429687,t:.354998779296875,T:.6189987182617187,u:.5599990844726562,U:.7139999389648437,v:.48199920654296874,V:.6389999389648438,w:.754998779296875,W:.929998779296875,x:.5089996337890625,X:.63699951171875,y:.4959991455078125,Y:.66199951171875,z:.48699951171875,Z:.6239990234375,0:.6,1:.40099945068359377,2:.6,3:.6,4:.6,5:.6,6:.6,7:.5469985961914062,8:.6,9:.6,"[":.3329986572265625,"]":.3329986572265625,",":.26399993896484375,".":.26399993896484375,";":.26399993896484375,":":.26399993896484375,"{":.3329986572265625,"}":.3329986572265625,"\\":.5,"|":.19499969482421875,"=":.604998779296875,"+":.604998779296875,"-":.604998779296875,_:.5,"`":.3329986572265625," ~":.8329986572265625,"!":.3329986572265625,"@":.8579986572265625,"#":.6,$:.6,"%":.9699996948242188,"^":.517999267578125,"&":.7259994506835937,"*":.505999755859375,"(":.3329986572265625,")":.3329986572265625,"<":.604998779296875,">":.604998779296875,"/":.5,"?":.53699951171875},Ke=Math.PI,kr=Math.sin,gn=Math.cos,Nn=kr(Ke/8),ra=gn(Ke/8),oi=function(e,t){var r=e.getBBox(),n={x:r.minX,y:r.minY},a={x:r.maxX,y:r.maxY};if(t){var o=t.getMatrix();o||(o=[1,0,0,0,1,0,0,0,1]),n=Zi(n,o),a=Zi(a,o)}var s=n.x,u=n.y,f=a.x,c=a.y;return{x:s,y:u,minX:s,minY:u,maxX:f,maxY:c,width:f-s,height:c-u}},Ji=function(e){var t=e.sourceNode||e.targetNode,r=t.get("group"),n=r.getMatrix();n||(n=[1,0,0,0,1,0,0,0,1]);var a=t.getKeyShape(),o=a.getBBox(),s=e.loopCfg||{},u=s.dist||Math.max(o.width,o.height)*2,f=s.position||Zt.defaultLoopPosition,c=[(o.minX+o.maxX)/2+n[6],(o.minY+o.maxY)/2+n[7]],l=[e.startPoint.x,e.startPoint.y],m=[e.endPoint.x,e.endPoint.y],w=o.height/2,C=o.width/2,D=w,U=w,$=D*Nn,tt=D*ra,it=U*Nn,ct=U*ra,_t=a.get("type"),Bt=Math.min(w/2,C/2),Pt=Math.min(w,C),Qt=s!=null&&s.pointPadding?Math.min(Pt,s==null?void 0:s.pointPadding):Bt;if(l[0]===m[0]&&l[1]===m[1]){switch(f){case"top":_t==="circle"?(l=[c[0]-$,c[1]-tt],m=[c[0]+it,c[1]-ct]):(l=[c[0]-Qt,c[1]-w],m=[c[0]+Qt,c[1]-w]);break;case"top-right":D=w,U=C,_t==="circle"?($=D*Nn,tt=D*ra,it=U*Nn,ct=U*ra,l=[c[0]+$,c[1]-tt],m=[c[0]+ct,c[1]-it]):(l=[c[0]+C-Qt,c[1]-w],m=[c[0]+C,c[1]-w+Qt]);break;case"right":D=C,U=C,_t==="circle"?($=D*Nn,tt=D*ra,it=U*Nn,ct=U*ra,l=[c[0]+tt,c[1]-$],m=[c[0]+ct,c[1]+it]):(l=[c[0]+C,c[1]-Qt],m=[c[0]+C,c[1]+Qt]);break;case"bottom-right":D=C,U=w,_t==="circle"?($=D*Nn,tt=D*ra,it=U*Nn,ct=U*ra,l=[c[0]+tt,c[1]+$],m=[c[0]+it,c[1]+ct]):(l=[c[0]+C,c[1]+w-Qt],m=[c[0]+C-Qt,c[1]+w]);break;case"bottom":D=w,U=w,_t==="circle"?($=D*Nn,tt=D*ra,it=U*Nn,ct=U*ra,l=[c[0]+$,c[1]+tt],m=[c[0]-it,c[1]+ct]):(l=[c[0]-Qt,c[1]+w],m=[c[0]+Qt,c[1]+w]);break;case"bottom-left":D=w,U=C,_t==="circle"?($=D*Nn,tt=D*ra,it=U*Nn,ct=U*ra,l=[c[0]-$,c[1]+tt],m=[c[0]-ct,c[1]+it]):(l=[c[0]-C,c[1]+w-Qt],m=[c[0]-C+Qt,c[1]+w]);break;case"left":D=C,U=C,_t==="circle"?($=D*Nn,tt=D*ra,it=U*Nn,ct=U*ra,l=[c[0]-tt,c[1]+$],m=[c[0]-ct,c[1]-it]):(l=[c[0]-C,c[1]-Qt],m=[c[0]-C,c[1]+Qt]);break;case"top-left":D=C,U=w,_t==="circle"?($=D*Nn,tt=D*ra,it=U*Nn,ct=U*ra,l=[c[0]-tt,c[1]-$],m=[c[0]-it,c[1]-ct]):(l=[c[0]-C+Qt,c[1]-w],m=[c[0]-C,c[1]-w+Qt]);break;default:D=C,U=C,$=D*Nn,tt=D*ra,it=U*Nn,ct=U*ra,l=[c[0]-$,c[1]-tt],m=[c[0]+it,c[1]-ct]}if(s.clockwise===!1){var ye=[l[0],l[1]];l=[m[0],m[1]],m=[ye[0],ye[1]]}}var ce=[l[0]-c[0],l[1]-c[1]],Ne=(D+u)/D,$e=(U+u)/U;s.clockwise===!1&&(Ne=(U+u)/U,$e=(D+u)/D);var Rr=Un.scale([0,0],ce,Ne),rn=[c[0]+Rr[0],c[1]+Rr[1]],Vr=[m[0]-c[0],m[1]-c[1]],Cr=Un.scale([0,0],Vr,$e),Cn=[c[0]+Cr[0],c[1]+Cr[1]];return e.startPoint={x:l[0],y:l[1]},e.endPoint={x:m[0],y:m[1]},e.controlPoints=[{x:rn[0],y:rn[1]},{x:Cn[0],y:Cn[1]}],e},ho=function(e,t,r,n,a){var o=1e-4,s=[],u=e==null?void 0:e.getPoint(t);if(!u)return{x:0,y:0,angle:0};if(t<o)s=e.getStartTangent().reverse();else if(t>1-o)s=e.getEndTangent();else{var f=e==null?void 0:e.getPoint(t+o);s.push([u.x,u.y]),s.push([f.x,f.y])}var c=Math.atan2(s[1][1]-s[0][1],s[1][0]-s[0][0]);if(c<0&&(c+=Ke*2),r&&(u.x+=gn(c)*r,u.y+=kr(c)*r),n){var l=c-Ke/2;c>1/2*Ke&&c<3*1/2*Ke&&(l-=Ke),u.x+=gn(l)*n,u.y+=kr(l)*n}var m={x:u.x,y:u.y,angle:c};return a?(c>.5*Ke&&c<1.5*Ke&&(c-=Ke),(0,g.__assign)({rotate:c},m)):m},Hs=function i(e,t,r,n){if(n(e,t,r)===!1)return!1;if(e&&e.children){for(var a=e.children.length-1;a>=0;a--)if(!i(e.children[a],e,a,n))return!1}return!0},_u=function i(e,t,r,n){if(e&&e.children){for(var a=e.children.length-1;a>=0;a--)if(!i(e.children[a],e,a,n))return}return n(e,t,r)!==!1},Ui=function(e,t){typeof t=="function"&&Hs(e,null,-1,t)},yo=function(e,t){typeof t=="function"&&_u(e,null,-1,t)},Js=function(e,t){return t*(Xe[e]||1)},Xu=function(e,t){var r=0,n=new RegExp("[\u4E00-\u9FA5]+");return e.split("").forEach(function(a){n.test(a)?r+=t:r+=Js(a,t)}),[r,t]},Su=function(e,t){return typeof t!="number"||t<=0||t>=e.length?e:e.substring(0,t)+"..."},su=function(e,t){var r=[],n={},a={};e.forEach(function(u){a[u.id]=u}),e.forEach(function(u,f){var c=(0,v.clone)(u);c.itemType="combo",c.children=void 0,c.parentId===c.id?(console.warn("The parentId for combo ".concat(c.id," can not be the same as the combo's id")),delete c.parentId):c.parentId&&!a[c.parentId]&&(console.warn("The parent combo for combo ".concat(c.id," does not exist!")),delete c.parentId);var l=n[c.id];if(l){if(c.children=l.children,n[c.id]=c,l=c,!l.parentId){r.push(l);return}var m=n[l.parentId];if(m)m.children?m.children.push(c):m.children=[c];else{var w={id:l.parentId,children:[l]};n[l.parentId]=w,n[c.id]=c}return}if((0,v.isString)(u.parentId)){var C=n[u.parentId];if(C)C.children?C.children.push(c):C.children=[c],n[c.id]=c;else{var D={id:u.parentId,children:[c]};n[D.id]=D,n[c.id]=c}}else r.push(c),n[c.id]=c});var o={};(t||[]).forEach(function(u){o[u.id]=u;var f=n[u.comboId];if(f){var c={id:u.id,comboId:u.comboId};f.children?f.children.push(c):f.children=[c],c.itemType="node",n[u.id]=c}});var s=0;return r.forEach(function(u){u.depth=s+10,Ui(u,function(f){var c,l=n[f.id].itemType;l==="node"?c=n[f.comboId]:c=n[f.parentId],c&&l==="node"?f.depth=s+1:f.depth=s+10,s<f.depth&&(s=f.depth);var m=o[f.id];return m&&(m.depth=f.depth),!0})}),r},uu=function(e,t,r){var n,a=e,o,s={root:{children:e}},u=!1,f="root";(e||[]).forEach(function(C){if(!u){if(C.id===t){o=C,C.itemType==="combo"?o.parentId=r:o.comboId=r,u=!0;return}Ui(C,function(D){var U;return s[D.id]={children:(D==null?void 0:D.children)||[]},a=(U=s[D.parentId||D.comboId||"root"])===null||U===void 0?void 0:U.children,D&&(D.removed||t===D.id)&&a?(f=D.parentId||D.comboId||"root",o=D,D.itemType==="combo"?o.parentId=r:o.comboId=r,u=!0,!1):!0})}}),a=(n=s[f])===null||n===void 0?void 0:n.children;var c=a?a.indexOf(o):-1;if(c>-1&&a.splice(c,1),u||(o={id:t,itemType:"node",comboId:r},s[t]={children:void 0}),t){var l=!1;if(r){var m=0;(e||[]).forEach(function(C){l||Ui(C,function(D){return r===D.id?(l=!0,D.children?D.children.push(o):D.children=[o],m=D.depth,o.itemType==="node"?o.depth=m+2:o.depth=m+1,!1):!0})})}else(!r||!l)&&o.itemType!=="node"&&e.push(o);var w=o.depth;Ui(o,function(C){return C.itemType==="node"?w+=2:w+=1,C.depth=w,!0})}return e},tu=function(e,t,r){var n={minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0,x:void 0,y:void 0,width:void 0,height:void 0,centerX:void 0,centerY:void 0};if(!e||e.length===0){var a=r==null?void 0:r.getModel(),o=a||{},s=o.x,u=o.y,f=o.fixSize,c=o.collapsed,l=o.fixCollapseSize,m=c?l:f,w=(0,v.isArray)(m)?m:[m,m],C=w[0],D=w[1],U=[C/2,D/2];return{minX:s-U[0],minY:u-U[1],maxX:s+U[0],maxY:u+U[1],x:s,y:u,width:C,height:D}}return e.forEach(function($){var tt=t.findById($.id);if(!(!tt||!tt.isVisible())){tt.set("bboxCanvasCache",void 0);var it=tt.getCanvasBBox();it.x&&n.minX>it.minX&&(n.minX=it.minX),it.y&&n.minY>it.minY&&(n.minY=it.minY),it.x&&n.maxX<it.maxX&&(n.maxX=it.maxX),it.y&&n.maxY<it.maxY&&(n.maxY=it.maxY)}}),n.x=(n.minX+n.maxX)/2,n.y=(n.minY+n.maxY)/2,n.width=n.maxX-n.minX,n.height=n.maxY-n.minY,n.centerX=(n.minX+n.maxX)/2,n.centerY=(n.minY+n.maxY)/2,(r==null?void 0:r.getKeyShape().get("type"))==="circle"&&(n.width=Math.hypot(n.height,n.width),n.height=n.width),Object.keys(n).forEach(function($){(n[$]===1/0||n[$]===-1/0)&&(n[$]=void 0)}),n},Rs=function(e){var t=(0,v.isNumber)(e.x)||(0,v.isNumber)(e.y)||e.type||e.anchorPoints||e.size;return e.style&&(t=t||(0,v.isNumber)(e.style.r)||(0,v.isNumber)(e.style.width)||(0,v.isNumber)(e.style.height)||(0,v.isNumber)(e.style.rx)||(0,v.isNumber)(e.style.ry)),t},eu=function(e){var t={};return Object.keys(e).forEach(function(r){var n=e[r];if(!(r==="img"&&!(0,v.isString)(n)))if((0,v.isObject)(n)&&!(0,v.isArray)(n)){var a={};Object.keys(n).forEach(function(o){var s=n[o];o==="img"&&!(0,v.isString)(s)||(a[o]=(0,v.clone)(s))}),t[r]=a}else t[r]=(0,v.clone)(n)}),t},ys=function(e){var t=e.animateCfg,r=e.callback,n;if(!t)n={duration:500,callback:r};else if(n=(0,v.clone)(t),t.callback){var a=t.callback;n.callback=function(){r(),a()}}else n.callback=r;return n},No=function(e){if(!e)return console.error("G6 Error Tips: the data must be defined"),!1;var t=e.nodes,r=e.edges,n=e.combos,a=n===void 0?[]:n;if(!t&&!r){var o=!0;return Ui(e,function(m){return(0,v.isString)(m.id)?!0:(o=!1,!1)}),o}var s=(t||[]).find(function(m){return!(0,v.isString)(m.id)});if(s)return console.warn("G6 Warning Tips: missing 'id' property, or %c".concat(s.id,"%c is not a string."),"font-size: 20px; color: red;",""),!1;var u=(t||[]).map(function(m){return m.id}),f=a==null?void 0:a.map(function(m){return m.id}),c=(0,g.__spreadArray)((0,g.__spreadArray)([],u,!0),f,!0),l=(r||[]).find(function(m){return!c.includes(m.source)||!c.includes(m.target)});return l?(console.warn("G6 Warning Tips: The source %c".concat(l.source,"%c or the target %c").concat(l.target,"%c of the edge do not exist in the nodes or combos."),"font-size: 20px; color: red;","","font-size: 20px; color: red;",""),!1):!0},nf=function(e,t){if(e==="node"||e==="combo"){if(t.id&&!(0,v.isString)(t.id))return console.warn("G6 Warning Tips: missing 'id' property, or the 'id' %c".concat(t.id,"%c is not a string."),"font-size: 20px; color: red;",""),!1}else if(e==="edge"&&(!t.source||!t.target))return console.warn("G6 Warning Tips: missing 'source' or 'target' for the edge."),!1;return!0},Bf=function(){function i(e){this.graph=e,this.destroyed=!1,this.modes=e.get("modes")||{default:[]},this.formatModes(),this.mode=e.get("defaultMode")||"default",this.currentBehaves=[],this.setMode(this.mode)}return i.prototype.formatModes=function(){var e=this.modes;(0,v.each)(e,function(t){(0,v.each)(t,function(r,n){(0,v.isString)(r)&&(t[n]={type:r})})})},i.prototype.setBehaviors=function(e){var t=this.graph,r=this.modes[e],n=[],a;(0,v.each)(r||[],function(o){var s=G.getBehavior(o.type||o);s&&(a=new s(o),a&&(a.bind(t),n.push(a)))}),this.currentBehaves=n},i.mergeBehaviors=function(e,t){return(0,v.each)(t,function(r){e.indexOf(r)<0&&((0,v.isString)(r)&&(r={type:r}),e.push(r))}),e},i.filterBehaviors=function(e,t){var r=[];return e.forEach(function(n){var a="";(0,v.isString)(n)?a=n:a=n.type,t.indexOf(a)<0&&r.push(n)}),r},i.prototype.setMode=function(e){var t=this,r=t.modes,n=t.graph,a=e,o=r[a];o&&(n.emit("beforemodechange",{mode:e}),(0,v.each)(this.currentBehaves,function(s){s.delegate&&s.delegate.remove(),s.unbind(n)}),this.setBehaviors(a),n.emit("aftermodechange",{mode:e}),this.mode=e)},i.prototype.getMode=function(){return this.mode},i.prototype.manipulateBehaviors=function(e,t,r){var n=this,a;if((0,v.isArray)(e)?a=e:a=[e],(0,v.isArray)(t))return(0,v.each)(t,function(s){n.modes[s]?r?n.modes[s]=i.mergeBehaviors(n.modes[s]||[],a):n.modes[s]=i.filterBehaviors(n.modes[s]||[],a):r&&(n.modes[s]=a)}),this;var o=t;return t||(o=this.mode),this.modes[o]||r&&(this.modes[o]=a),r?this.modes[o]=i.mergeBehaviors(this.modes[o]||[],a):this.modes[o]=i.filterBehaviors(this.modes[o]||[],a),this.formatModes(),this.setMode(this.mode),this},i.prototype.updateBehavior=function(e,t,r){(0,v.isString)(e)&&(e={type:e});var n=[];if(!r||r===this.mode||r==="default"){if(n=this.currentBehaves,!n||!n.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var a=n.length,o=0;o<a;o++){var s=n[o];if(s.type===e.type)return s.updateCfg(t),this;o===a-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}else{if(n=this.modes[r],!n||!n.length)return console.warn("Update behavior failed! There is no behaviors in this mode on the graph."),this;for(var u=n.length,o=0;o<u;o++){var s=n[o];if(s.type===e.type||s===e.type)return s===e.type&&(s={type:s}),Object.assign(s,t),n[o]=s,this;o===u-1&&console.warn("Update behavior failed! There is no such behavior in the mode")}}return this},i.prototype.destroy=function(){this.graph=null,this.modes=null,this.currentBehaves=null,this.destroyed=!0},i}(),Ff=Bf,Bs=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,Gf=new RegExp("([a-z])["+Bs+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+Bs+"]*,?["+Bs+"]*)+)","ig"),h=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+Bs+"]*,?["+Bs+"]*","ig"),L=function(i){if(!i)return null;if((0,v.isArray)(i))return i;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},t=[];return String(i).replace(Gf,function(r,n,a){var o=[],s=n.toLowerCase();if(a.replace(h,function(u,f){f&&o.push(+f)}),s==="m"&&o.length>2&&(t.push([n].concat(o.splice(0,2))),s="l",n=n==="m"?"l":"L"),s==="o"&&o.length===1&&t.push([n,o[0]]),s==="r")t.push([n].concat(o));else for(;o.length>=e[s]&&(t.push([n].concat(o.splice(0,e[s]))),!!e[s]););return i}),t},lt=function(i,e){for(var t=[],r=0,n=i.length;n-2*!e>r;r+=2){var a=[{x:+i[r-2],y:+i[r-1]},{x:+i[r],y:+i[r+1]},{x:+i[r+2],y:+i[r+3]},{x:+i[r+4],y:+i[r+5]}];e?r?n-4===r?a[3]={x:+i[0],y:+i[1]}:n-2===r&&(a[2]={x:+i[0],y:+i[1]},a[3]={x:+i[2],y:+i[3]}):a[0]={x:+i[n-2],y:+i[n-1]}:n-4===r?a[3]=a[2]:r||(a[0]={x:+i[r],y:+i[r+1]}),t.push(["C",(-a[0].x+6*a[1].x+a[2].x)/6,(-a[0].y+6*a[1].y+a[2].y)/6,(a[1].x+6*a[2].x-a[3].x)/6,(a[1].y+6*a[2].y-a[3].y)/6,a[2].x,a[2].y])}return t},wt=function(i,e,t,r,n){var a=[];if(n===null&&r===null&&(r=t),i=+i,e=+e,t=+t,r=+r,n!==null){var o=Math.PI/180,s=i+t*Math.cos(-r*o),u=i+t*Math.cos(-n*o),f=e+t*Math.sin(-r*o),c=e+t*Math.sin(-n*o);a=[["M",s,f],["A",t,t,0,+(n-r>180),0,u,c]]}else a=[["M",i,e],["m",0,-r],["a",t,r,0,1,1,0,2*r],["a",t,r,0,1,1,0,-2*r],["z"]];return a},Nt=function(i){if(i=L(i),!i||!i.length)return[["M",0,0]];var e=[],t=0,r=0,n=0,a=0,o=0,s,u;i[0][0]==="M"&&(t=+i[0][1],r=+i[0][2],n=t,a=r,o++,e[0]=["M",t,r]);for(var f=i.length===3&&i[0][0]==="M"&&i[1][0].toUpperCase()==="R"&&i[2][0].toUpperCase()==="Z",c=void 0,l=void 0,m=o,w=i.length;m<w;m++){if(e.push(c=[]),l=i[m],s=l[0],s!==s.toUpperCase())switch(c[0]=s.toUpperCase(),c[0]){case"A":c[1]=l[1],c[2]=l[2],c[3]=l[3],c[4]=l[4],c[5]=l[5],c[6]=+l[6]+t,c[7]=+l[7]+r;break;case"V":c[1]=+l[1]+r;break;case"H":c[1]=+l[1]+t;break;case"R":u=[t,r].concat(l.slice(1));for(var C=2,D=u.length;C<D;C++)u[C]=+u[C]+t,u[++C]=+u[C]+r;e.pop(),e=e.concat(lt(u,f));break;case"O":e.pop(),u=wt(t,r,l[1],l[2]),u.push(u[0]),e=e.concat(u);break;case"U":e.pop(),e=e.concat(wt(t,r,l[1],l[2],l[3])),c=["U"].concat(e[e.length-1].slice(-2));break;case"M":n=+l[1]+t,a=+l[2]+r;break;default:for(var C=1,D=l.length;C<D;C++)c[C]=+l[C]+(C%2?t:r)}else if(s==="R")u=[t,r].concat(l.slice(1)),e.pop(),e=e.concat(lt(u,f)),c=["R"].concat(l.slice(-2));else if(s==="O")e.pop(),u=wt(t,r,l[1],l[2]),u.push(u[0]),e=e.concat(u);else if(s==="U")e.pop(),e=e.concat(wt(t,r,l[1],l[2],l[3])),c=["U"].concat(e[e.length-1].slice(-2));else for(var U=0,$=l.length;U<$;U++)c[U]=l[U];if(s=s.toUpperCase(),s!=="O")switch(c[0]){case"Z":t=+n,r=+a;break;case"H":t=c[1];break;case"V":r=c[1];break;case"M":n=c[c.length-2],a=c[c.length-1];break;default:t=c[c.length-2],r=c[c.length-1]}}return e},Yt=function(i,e,t,r){return[i,e,t,r,t,r]},Vt=function(i,e,t,r,n,a){var o=.3333333333333333,s=2/3;return[o*i+s*t,o*e+s*r,o*n+s*t,o*a+s*r,n,a]},he=function(i,e,t,r,n,a,o,s,u,f){t===r&&(t+=1);var c=Math.PI*120/180,l=Math.PI/180*(+n||0),m=[],w,C,D,U,$,tt=function(pi,ai,gi){var Ei=pi*Math.cos(gi)-ai*Math.sin(gi),Qi=pi*Math.sin(gi)+ai*Math.cos(gi);return{x:Ei,y:Qi}};if(f)C=f[0],D=f[1],U=f[2],$=f[3];else{w=tt(i,e,-l),i=w.x,e=w.y,w=tt(s,u,-l),s=w.x,u=w.y,i===s&&e===u&&(s+=1,u+=1);var it=(i-s)/2,ct=(e-u)/2,_t=it*it/(t*t)+ct*ct/(r*r);_t>1&&(_t=Math.sqrt(_t),t=_t*t,r=_t*r);var Bt=t*t,Pt=r*r,Qt=(a===o?-1:1)*Math.sqrt(Math.abs((Bt*Pt-Bt*ct*ct-Pt*it*it)/(Bt*ct*ct+Pt*it*it)));U=Qt*t*ct/r+(i+s)/2,$=Qt*-r*it/t+(e+u)/2,C=Math.asin(((e-$)/r).toFixed(9)),D=Math.asin(((u-$)/r).toFixed(9)),C=i<U?Math.PI-C:C,D=s<U?Math.PI-D:D,C<0&&(C=Math.PI*2+C),D<0&&(D=Math.PI*2+D),o&&C>D&&(C=C-Math.PI*2),!o&&D>C&&(D=D-Math.PI*2)}var ye=D-C;if(Math.abs(ye)>c){var ce=D,Ne=s,$e=u;D=C+c*(o&&D>C?1:-1),s=U+t*Math.cos(D),u=$+r*Math.sin(D),m=he(s,u,t,r,n,0,o,Ne,$e,[D,ce,U,$])}ye=D-C;var Rr=Math.cos(C),rn=Math.sin(C),Vr=Math.cos(D),Cr=Math.sin(D),Cn=Math.tan(ye/4),_n=4/3*t*Cn,Tr=4/3*r*Cn,jr=[i,e],dn=[i+_n*rn,e-Tr*Rr],vn=[s+_n*Cr,u-Tr*Vr],Pn=[s,u];if(dn[0]=2*jr[0]-dn[0],dn[1]=2*jr[1]-dn[1],f)return[dn,vn,Pn].concat(m);m=[dn,vn,Pn].concat(m).join().split(",");for(var Wn=[],ma=0,Oa=m.length;ma<Oa;ma++)Wn[ma]=ma%2?tt(m[ma-1],m[ma],l).y:tt(m[ma],m[ma+1],l).x;return Wn},ge=function(i,e){var t=Nt(i),r=e&&Nt(e),n={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},a={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o=[],s=[],u="",f="",c,l=function(it,ct,_t){var Bt,Pt;if(!it)return["C",ct.x,ct.y,ct.x,ct.y,ct.x,ct.y];switch(!(it[0]in{T:1,Q:1})&&(ct.qx=ct.qy=null),it[0]){case"M":ct.X=it[1],ct.Y=it[2];break;case"A":it=["C"].concat(he.apply(0,[ct.x,ct.y].concat(it.slice(1))));break;case"S":_t==="C"||_t==="S"?(Bt=ct.x*2-ct.bx,Pt=ct.y*2-ct.by):(Bt=ct.x,Pt=ct.y),it=["C",Bt,Pt].concat(it.slice(1));break;case"T":_t==="Q"||_t==="T"?(ct.qx=ct.x*2-ct.qx,ct.qy=ct.y*2-ct.qy):(ct.qx=ct.x,ct.qy=ct.y),it=["C"].concat(Vt(ct.x,ct.y,ct.qx,ct.qy,it[1],it[2]));break;case"Q":ct.qx=it[1],ct.qy=it[2],it=["C"].concat(Vt(ct.x,ct.y,it[1],it[2],it[3],it[4]));break;case"L":it=["C"].concat(Yt(ct.x,ct.y,it[1],it[2]));break;case"H":it=["C"].concat(Yt(ct.x,ct.y,it[1],ct.y));break;case"V":it=["C"].concat(Yt(ct.x,ct.y,ct.x,it[1]));break;case"Z":it=["C"].concat(Yt(ct.x,ct.y,ct.X,ct.Y));break;default:break}return it},m=function(it,ct){if(it[ct].length>7){it[ct].shift();for(var _t=it[ct];_t.length;)o[ct]="A",r&&(s[ct]="A"),it.splice(ct++,0,["C"].concat(_t.splice(0,6)));it.splice(ct,1),c=Math.max(t.length,r&&r.length||0)}},w=function(it,ct,_t,Bt,Pt){it&&ct&&it[Pt][0]==="M"&&ct[Pt][0]!=="M"&&(ct.splice(Pt,0,["M",Bt.x,Bt.y]),_t.bx=0,_t.by=0,_t.x=it[Pt][1],_t.y=it[Pt][2],c=Math.max(t.length,r&&r.length||0))};c=Math.max(t.length,r&&r.length||0);for(var C=0;C<c;C++){t[C]&&(u=t[C][0]),u!=="C"&&(o[C]=u,C&&(f=o[C-1])),t[C]=l(t[C],n,f),o[C]!=="A"&&u==="C"&&(o[C]="C"),m(t,C),r&&(r[C]&&(u=r[C][0]),u!=="C"&&(s[C]=u,C&&(f=s[C-1])),r[C]=l(r[C],a,f),s[C]!=="A"&&u==="C"&&(s[C]="C"),m(r,C)),w(t,r,n,a,C),w(r,t,a,n,C);var D=t[C],U=r&&r[C],$=D.length,tt=r&&U.length;n.x=D[$-2],n.y=D[$-1],n.bx=parseFloat(D[$-4])||n.x,n.by=parseFloat(D[$-3])||n.y,a.bx=r&&(parseFloat(U[tt-4])||a.x),a.by=r&&(parseFloat(U[tt-3])||a.y),a.x=r&&U[tt-2],a.y=r&&U[tt-1]}return r?[t,r]:t},Le=/,?([a-z]),?/gi,He=function(i){return i.join(",").replace(Le,"$1")},_r=function(i,e,t,r,n){var a=-3*e+9*t-9*r+3*n,o=i*a+6*e-12*t+6*r;return i*o-3*e+3*t},Sr=function(i,e,t,r,n,a,o,s,u){u===null&&(u=1),u=u>1?1:u<0?0:u;for(var f=u/2,c=12,l=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],m=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],w=0,C=0;C<c;C++){var D=f*l[C]+f,U=_r(D,i,t,n,o),$=_r(D,e,r,a,s),tt=U*U+$*$;w+=m[C]*Math.sqrt(tt)}return f*w},Er=function(i,e,t,r,n,a,o,s){for(var u=[],f=[[],[]],c,l,m,w,C=0;C<2;++C){if(C===0?(l=6*i-12*t+6*n,c=-3*i+9*t-9*n+3*o,m=3*t-3*i):(l=6*e-12*r+6*a,c=-3*e+9*r-9*a+3*s,m=3*r-3*e),Math.abs(c)<1e-12){if(Math.abs(l)<1e-12)continue;w=-m/l,w>0&&w<1&&u.push(w);continue}var D=l*l-4*m*c,U=Math.sqrt(D);if(!(D<0)){var $=(-l+U)/(2*c);$>0&&$<1&&u.push($);var tt=(-l-U)/(2*c);tt>0&&tt<1&&u.push(tt)}}for(var it=u.length,ct=it,_t;it--;)w=u[it],_t=1-w,f[0][it]=_t*_t*_t*i+3*_t*_t*w*t+3*_t*w*w*n+w*w*w*o,f[1][it]=_t*_t*_t*e+3*_t*_t*w*r+3*_t*w*w*a+w*w*w*s;return f[0][ct]=i,f[1][ct]=e,f[0][ct+1]=o,f[1][ct+1]=s,f[0].length=f[1].length=ct+2,{min:{x:Math.min.apply(0,f[0]),y:Math.min.apply(0,f[1])},max:{x:Math.max.apply(0,f[0]),y:Math.max.apply(0,f[1])}}},Kr=function(i,e,t,r,n,a,o,s){if(!(Math.max(i,t)<Math.min(n,o)||Math.min(i,t)>Math.max(n,o)||Math.max(e,r)<Math.min(a,s)||Math.min(e,r)>Math.max(a,s))){var u=(i*r-e*t)*(n-o)-(i-t)*(n*s-a*o),f=(i*r-e*t)*(a-s)-(e-r)*(n*s-a*o),c=(i-t)*(a-s)-(e-r)*(n-o);if(c){var l=u/c,m=f/c,w=+l.toFixed(2),C=+m.toFixed(2);if(!(w<+Math.min(i,t).toFixed(2)||w>+Math.max(i,t).toFixed(2)||w<+Math.min(n,o).toFixed(2)||w>+Math.max(n,o).toFixed(2)||C<+Math.min(e,r).toFixed(2)||C>+Math.max(e,r).toFixed(2)||C<+Math.min(a,s).toFixed(2)||C>+Math.max(a,s).toFixed(2)))return{x:l,y:m}}}},an=function(i,e,t){return e>=i.x&&e<=i.x+i.width&&t>=i.y&&t<=i.y+i.height},Lr=function(i,e,t,r,n){if(n)return[["M",+i+ +n,e],["l",t-n*2,0],["a",n,n,0,0,1,n,n],["l",0,r-n*2],["a",n,n,0,0,1,-n,n],["l",n*2-t,0],["a",n,n,0,0,1,-n,-n],["l",0,n*2-r],["a",n,n,0,0,1,n,-n],["z"]];var a=[["M",i,e],["l",t,0],["l",0,r],["l",-t,0],["z"]];return a.parsePathArray=He,a},Tn=function(i,e,t,r){return i===null&&(i=e=t=r=0),e===null&&(e=i.y,t=i.width,r=i.height,i=i.x),{x:i,y:e,width:t,w:t,height:r,h:r,x2:i+t,y2:e+r,cx:i+t/2,cy:e+r/2,r1:Math.min(t,r)/2,r2:Math.max(t,r)/2,r0:Math.sqrt(t*t+r*r)/2,path:Lr(i,e,t,r),vb:[i,e,t,r].join(" ")}},_a=function(i,e){return i=Tn(i),e=Tn(e),an(e,i.x,i.y)||an(e,i.x2,i.y)||an(e,i.x,i.y2)||an(e,i.x2,i.y2)||an(i,e.x,e.y)||an(i,e.x2,e.y)||an(i,e.x,e.y2)||an(i,e.x2,e.y2)||(i.x<e.x2&&i.x>e.x||e.x<i.x2&&e.x>i.x)&&(i.y<e.y2&&i.y>e.y||e.y<i.y2&&e.y>i.y)},Sa=function(i,e,t,r,n,a,o,s){(0,v.isArray)(i)||(i=[i,e,t,r,n,a,o,s]);var u=Er.apply(null,i);return Tn(u.min.x,u.min.y,u.max.x-u.min.x,u.max.y-u.min.y)},pa=function(i,e,t,r,n,a,o,s,u){var f=1-u,c=Math.pow(f,3),l=Math.pow(f,2),m=u*u,w=m*u,C=c*i+l*3*u*t+f*3*u*u*n+w*o,D=c*e+l*3*u*r+f*3*u*u*a+w*s,U=i+2*u*(t-i)+m*(n-2*t+i),$=e+2*u*(r-e)+m*(a-2*r+e),tt=t+2*u*(n-t)+m*(o-2*n+t),it=r+2*u*(a-r)+m*(s-2*a+r),ct=f*i+u*t,_t=f*e+u*r,Bt=f*n+u*o,Pt=f*a+u*s,Qt=90-Math.atan2(U-tt,$-it)*180/Math.PI;return{x:C,y:D,m:{x:U,y:$},n:{x:tt,y:it},start:{x:ct,y:_t},end:{x:Bt,y:Pt},alpha:Qt}},na=function(i,e,t){var r=Sa(i),n=Sa(e);if(!_a(r,n))return t?0:[];for(var a=Sr.apply(0,i),o=Sr.apply(0,e),s=~~(a/8),u=~~(o/8),f=[],c=[],l={},m=t?0:[],w=0;w<s+1;w++){var C=pa.apply(0,i.concat(w/s));f.push({x:C.x,y:C.y,t:w/s})}for(var w=0;w<u+1;w++){var C=pa.apply(0,e.concat(w/u));c.push({x:C.x,y:C.y,t:w/u})}for(var w=0;w<s;w++)for(var D=0;D<u;D++){var U=f[w],$=f[w+1],tt=c[D],it=c[D+1],ct=Math.abs($.x-U.x)<.001?"y":"x",_t=Math.abs(it.x-tt.x)<.001?"y":"x",Bt=Kr(U.x,U.y,$.x,$.y,tt.x,tt.y,it.x,it.y);if(Bt){if(l[Bt.x.toFixed(4)]===Bt.y.toFixed(4))continue;l[Bt.x.toFixed(4)]=Bt.y.toFixed(4);var Pt=U.t+Math.abs((Bt[ct]-U[ct])/($[ct]-U[ct]))*($.t-U.t),Qt=tt.t+Math.abs((Bt[_t]-tt[_t])/(it[_t]-tt[_t]))*(it.t-tt.t);Pt>=0&&Pt<=1&&Qt>=0&&Qt<=1&&(t?m+=1:m.push({x:Bt.x,y:Bt.y,t1:Pt,t2:Qt}))}}return m},da=function(i,e,t){i=ge(i),e=ge(e);for(var r,n,a,o,s,u,f,c,l,m,w=t?0:[],C=0,D=i.length;C<D;C++){var U=i[C];if(U[0]==="M")r=s=U[1],n=u=U[2];else{U[0]==="C"?(l=[r,n].concat(U.slice(1)),r=l[6],n=l[7]):(l=[r,n,r,n,s,u,s,u],r=s,n=u);for(var $=0,tt=e.length;$<tt;$++){var it=e[$];if(it[0]==="M")a=f=it[1],o=c=it[2];else{it[0]==="C"?(m=[a,o].concat(it.slice(1)),a=m[6],o=m[7]):(m=[a,o,a,o,f,c,f,c],a=f,o=c);var ct=na(l,m,t);if(t)w+=ct;else{for(var _t=0,Bt=ct.length;_t<Bt;_t++)ct[_t].segment1=C,ct[_t].segment2=$,ct[_t].bez1=l,ct[_t].bez2=m;w=w.concat(ct)}}}}}return w},ki=function(i,e){return da(i,e)};function Li(i,e){var t=[],r=[];function n(a,o){if(a.length===1)t.push(a[0]),r.push(a[0]);else{for(var s=[],u=0;u<a.length-1;u++)u===0&&t.push(a[0]),u===a.length-2&&r.push(a[u+1]),s[u]=[(1-o)*a[u][0]+o*a[u+1][0],(1-o)*a[u][1]+o*a[u+1][1]];n(s,o)}}return i.length&&n(i,e),{left:t,right:r.reverse()}}function Ai(i,e,t){var r=[[i[1],i[2]]];t=t||2;var n=[];e[0]==="A"?(r.push(e[6]),r.push(e[7])):e[0]==="C"?(r.push([e[1],e[2]]),r.push([e[3],e[4]]),r.push([e[5],e[6]])):e[0]==="S"||e[0]==="Q"?(r.push([e[1],e[2]]),r.push([e[3],e[4]])):r.push([e[1],e[2]]);for(var a=r,o=1/t,s=0;s<t-1;s++){var u=o/(1-o*s),f=Li(a,u);n.push(f.left),a=f.right}n.push(a);var c=n.map(function(l){var m=[];return l.length===4&&(m.push("C"),m=m.concat(l[2])),l.length>=3&&(l.length===3&&m.push("Q"),m=m.concat(l[1])),l.length===2&&m.push("L"),m=m.concat(l[l.length-1]),m});return c}var Ni=function(i,e,t){if(t===1)return[[].concat(i)];var r=[];if(e[0]==="L"||e[0]==="C"||e[0]==="Q")r=r.concat(Ai(i,e,t));else{var n=[].concat(i);n[0]==="M"&&(n[0]="L");for(var a=0;a<=t-1;a++)r.push(n)}return r},Oi=function(i,e){if(i.length===1)return i;var t=i.length-1,r=e.length-1,n=t/r,a=[];if(i.length===1&&i[0][0]==="M"){for(var o=0;o<r-t;o++)i.push(i[0]);return i}for(var o=0;o<r;o++){var s=Math.floor(n*o);a[s]=(a[s]||0)+1}var u=a.reduce(function(f,c,l){return l===t?f.concat(i[t]):f.concat(Ni(i[l],i[l+1],c))},[]);return u.unshift(i[0]),(e[r]==="Z"||e[r]==="z")&&u.push("Z"),u},Xi=function(i,e){if(i.length!==e.length)return!1;var t=!0;return(0,v.each)(i,function(r,n){if(r!==e[n])return t=!1,!1}),t};function to(i,e,t){var r=null,n=t;return e<n&&(n=e,r="add"),i<n&&(n=i,r="del"),{type:r,min:n}}var Ua=function(i,e){var t=i.length,r=e.length,n,a,o=0;if(t===0||r===0)return null;for(var s=[],u=0;u<=t;u++)s[u]=[],s[u][0]={min:u};for(var f=0;f<=r;f++)s[0][f]={min:f};for(var u=1;u<=t;u++){n=i[u-1];for(var f=1;f<=r;f++){a=e[f-1],Xi(n,a)?o=0:o=1;var c=s[u-1][f].min+1,l=s[u][f-1].min+1,m=s[u-1][f-1].min+o;s[u][f]=to(c,l,m)}}return s},si=function(i,e){var t=Ua(i,e),r=i.length,n=e.length,a=[],o=1,s=1;if(t[r][n].min!==r){for(var u=1;u<=r;u++){var f=t[u][u].min;s=u;for(var c=o;c<=n;c++)t[u][c].min<f&&(f=t[u][c].min,s=c);o=s,t[u][o].type&&a.push({index:u-1,type:t[u][o].type})}for(var u=a.length-1;u>=0;u--)o=a[u].index,a[u].type==="add"?i.splice(o,0,[].concat(i[o])):i.splice(o,1)}r=i.length;var l=n-r;if(r<n)for(var u=0;u<l;u++)i[r-1][0]==="z"||i[r-1][0]==="Z"?i.splice(r-2,0,i[r-2]):i.push(i[r-1]),r+=1;return i};function Fs(i,e,t){for(var r=[].concat(i),n,a=1/(t+1),o=ms(e)[0],s=1;s<=t;s++)a*=s,n=Math.floor(i.length*a),n===0?r.unshift([o[0]*a+i[n][0]*(1-a),o[1]*a+i[n][1]*(1-a)]):r.splice(n,0,[o[0]*a+i[n][0]*(1-a),o[1]*a+i[n][1]*(1-a)]);return r}function ms(i){var e=[];switch(i[0]){case"M":e.push([i[1],i[2]]);break;case"L":e.push([i[1],i[2]]);break;case"A":e.push([i[6],i[7]]);break;case"Q":e.push([i[3],i[4]]),e.push([i[1],i[2]]);break;case"T":e.push([i[1],i[2]]);break;case"C":e.push([i[5],i[6]]),e.push([i[1],i[2]]),e.push([i[3],i[4]]);break;case"S":e.push([i[3],i[4]]),e.push([i[1],i[2]]);break;case"H":e.push([i[1],i[1]]);break;case"V":e.push([i[1],i[1]]);break;default:}return e}var Oo=function(i,e){if(i.length<=1)return i;for(var t,r=0;r<e.length;r++)if(i[r][0]!==e[r][0])switch(t=ms(i[r]),e[r][0]){case"M":i[r]=["M"].concat(t[0]);break;case"L":i[r]=["L"].concat(t[0]);break;case"A":i[r]=[].concat(e[r]),i[r][6]=t[0][0],i[r][7]=t[0][1];break;case"Q":if(t.length<2)if(r>0)t=Fs(t,i[r-1],1);else{i[r]=e[r];break}i[r]=["Q"].concat(t.reduce(function(n,a){return n.concat(a)},[]));break;case"T":i[r]=["T"].concat(t[0]);break;case"C":if(t.length<3)if(r>0)t=Fs(t,i[r-1],2);else{i[r]=e[r];break}i[r]=["C"].concat(t.reduce(function(n,a){return n.concat(a)},[]));break;case"S":if(t.length<2)if(r>0)t=Fs(t,i[r-1],1);else{i[r]=e[r];break}i[r]=["S"].concat(t.reduce(function(n,a){return n.concat(a)},[]));break;default:i[r]=e[r]}return i},Mu=function(){function i(e,t){this.bubbles=!0,this.target=null,this.currentTarget=null,this.delegateTarget=null,this.delegateObject=null,this.defaultPrevented=!1,this.propagationStopped=!1,this.shape=null,this.fromShape=null,this.toShape=null,this.propagationPath=[],this.type=e,this.name=e,this.originalEvent=t,this.timeStamp=t.timeStamp}return i.prototype.preventDefault=function(){this.defaultPrevented=!0,this.originalEvent.preventDefault&&this.originalEvent.preventDefault()},i.prototype.stopPropagation=function(){this.propagationStopped=!0},i.prototype.toString=function(){var e=this.type;return"[Event (type="+e+")]"},i.prototype.save=function(){},i.prototype.restore=function(){},i}(),zf=Mu;function yc(i,e){var t=i.indexOf(e);t!==-1&&i.splice(t,1)}var mc=typeof window!="undefined"&&typeof window.document!="undefined";function bc(i,e){if(i.isCanvas())return!0;for(var t=e.getParent(),r=!1;t;){if(t===i){r=!0;break}t=t.getParent()}return r}function Uf(i){return i.cfg.visible&&i.cfg.capture}var Xf=function(i){(0,g.__extends)(e,i);function e(t){var r=i.call(this)||this;r.destroyed=!1;var n=r.getDefaultCfg();return r.cfg=(0,v.mix)(n,t),r}return e.prototype.getDefaultCfg=function(){return{}},e.prototype.get=function(t){return this.cfg[t]},e.prototype.set=function(t,r){this.cfg[t]=r},e.prototype.destroy=function(){this.cfg={destroyed:!0},this.off(),this.destroyed=!0},e}(Z),xc=Xf,af=et(34155),of=function(i,e,t){if(t||arguments.length===2)for(var r=0,n=e.length,a;r<n;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return i.concat(a||Array.prototype.slice.call(e))},wc=function(){function i(e,t,r){this.name=e,this.version=t,this.os=r,this.type="browser"}return i}(),tl=function(){function i(e){this.version=e,this.type="node",this.name="node",this.os=af.platform}return i}(),Gs=function(){function i(e,t,r,n){this.name=e,this.version=t,this.os=r,this.bot=n,this.type="bot-device"}return i}(),Ec=function(){function i(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null}return i}(),In=function(){function i(){this.type="react-native",this.name="react-native",this.version=null,this.os=null}return i}(),Au=/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/,Xa=/(nuhk|curl|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,sf=3,Yf=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/EdgA?\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["pie",/^Microsoft Pocket Internet Explorer\/(\d+\.\d+)$/],["pie",/^Mozilla\/\d\.\d+\s\(compatible;\s(?:MSP?IE|MSInternet Explorer) (\d+\.\d+);.*Windows CE.*\)$/],["netfront",/^Mozilla\/\d\.\d+.*NetFront\/(\d.\d)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FB[AS]V\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["curl",/^curl\/([0-9\.]+)$/],["searchbot",Au]],fu=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Windows CE",/Windows CE|WinCE|Microsoft Pocket Internet Explorer/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function Yu(i){return i?ff(i):typeof document=="undefined"&&typeof navigator!="undefined"&&navigator.product==="ReactNative"?new In:typeof navigator!="undefined"?ff(navigator.userAgent):bs()}function Wu(i){return i!==""&&Yf.reduce(function(e,t){var r=t[0],n=t[1];if(e)return e;var a=n.exec(i);return!!a&&[r,a]},!1)}function uf(i){var e=Wu(i);return e?e[0]:null}function ff(i){var e=Wu(i);if(!e)return null;var t=e[0],r=e[1];if(t==="searchbot")return new Ec;var n=r[1]&&r[1].split(".").join("_").split("_").slice(0,3);n?n.length<sf&&(n=of(of([],n,!0),Sc(sf-n.length),!0)):n=[];var a=n.join("."),o=_c(i),s=Xa.exec(i);return s&&s[1]?new Gs(t,a,o,s[1]):new wc(t,a,o)}function _c(i){for(var e=0,t=fu.length;e<t;e++){var r=fu[e],n=r[0],a=r[1],o=a.exec(i);if(o)return n}return null}function bs(){var i=typeof af!="undefined"&&af.version;return i?new tl(af.version.slice(1)):null}function Sc(i){for(var e=[],t=0;t<i;t++)e.push("0");return e}function cf(i,e){var t=[],r=i[0],n=i[1],a=i[2],o=i[3],s=i[4],u=i[5],f=i[6],c=i[7],l=i[8],m=e[0],w=e[1],C=e[2],D=e[3],U=e[4],$=e[5],tt=e[6],it=e[7],ct=e[8];return t[0]=m*r+w*o+C*f,t[1]=m*n+w*s+C*c,t[2]=m*a+w*u+C*l,t[3]=D*r+U*o+$*f,t[4]=D*n+U*s+$*c,t[5]=D*a+U*u+$*l,t[6]=tt*r+it*o+ct*f,t[7]=tt*n+it*s+ct*c,t[8]=tt*a+it*u+ct*l,t}function xi(i,e){var t=[],r=e[0],n=e[1];return t[0]=i[0]*r+i[3]*n+i[6],t[1]=i[1]*r+i[4]*n+i[7],t}function Vu(i){var e=[],t=i[0],r=i[1],n=i[2],a=i[3],o=i[4],s=i[5],u=i[6],f=i[7],c=i[8],l=c*o-s*f,m=-c*a+s*u,w=f*a-o*u,C=t*l+r*m+n*w;return C?(C=1/C,e[0]=l*C,e[1]=(-c*r+n*f)*C,e[2]=(s*r-n*o)*C,e[3]=m*C,e[4]=(c*t-n*u)*C,e[5]=(-s*t+n*a)*C,e[6]=w*C,e[7]=(-f*t+r*u)*C,e[8]=(o*t-r*a)*C,e):null}var Is=Ht,Cu="matrix",J=["zIndex","capture","visible","type"],gt=["repeat"],St=":",Ut="*";function ae(i){for(var e=[],t=0;t<i.length;t++)(0,v.isArray)(i[t])?e.push([].concat(i[t])):e.push(i[t]);return e}function Ue(i,e){var t={},r=e.attrs;for(var n in i)t[n]=r[n];return t}function We(i,e){var t={},r=e.attr();return(0,v.each)(i,function(n,a){gt.indexOf(a)===-1&&!(0,v.isEqual)(r[a],n)&&(t[a]=n)}),t}function vr(i,e){if(e.onFrame)return i;var t=e.startTime,r=e.delay,n=e.duration,a=Object.prototype.hasOwnProperty;return(0,v.each)(i,function(o){t+r<o.startTime+o.delay+o.duration&&n>o.delay&&(0,v.each)(e.toAttrs,function(s,u){a.call(o.toAttrs,u)&&(delete o.toAttrs[u],delete o.fromAttrs[u])})}),i}var zr=function(i){(0,g.__extends)(e,i);function e(t){var r=i.call(this,t)||this;r.attrs={};var n=r.getDefaultAttrs();return(0,v.mix)(n,t.attrs),r.attrs=n,r.initAttrs(n),r.initAnimate(),r}return e.prototype.getDefaultCfg=function(){return{visible:!0,capture:!0,zIndex:0}},e.prototype.getDefaultAttrs=function(){return{matrix:this.getDefaultMatrix(),opacity:1}},e.prototype.onCanvasChange=function(t){},e.prototype.initAttrs=function(t){},e.prototype.initAnimate=function(){this.set("animable",!0),this.set("animating",!1)},e.prototype.isGroup=function(){return!1},e.prototype.getParent=function(){return this.get("parent")},e.prototype.getCanvas=function(){return this.get("canvas")},e.prototype.attr=function(){for(var t,r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];var a=r[0],o=r[1];if(!a)return this.attrs;if((0,v.isObject)(a)){for(var s in a)this.setAttr(s,a[s]);return this.afterAttrsChange(a),this}return r.length===2?(this.setAttr(a,o),this.afterAttrsChange((t={},t[a]=o,t)),this):this.attrs[a]},e.prototype.isClipped=function(t,r){var n=this.getClip();return n&&!n.isHit(t,r)},e.prototype.setAttr=function(t,r){var n=this.attrs[t];n!==r&&(this.attrs[t]=r,this.onAttrChange(t,r,n))},e.prototype.onAttrChange=function(t,r,n){t==="matrix"&&this.set("totalMatrix",null)},e.prototype.afterAttrsChange=function(t){if(this.cfg.isClipShape){var r=this.cfg.applyTo;r&&r.onCanvasChange("clip")}else this.onCanvasChange("attr")},e.prototype.show=function(){return this.set("visible",!0),this.onCanvasChange("show"),this},e.prototype.hide=function(){return this.set("visible",!1),this.onCanvasChange("hide"),this},e.prototype.setZIndex=function(t){this.set("zIndex",t);var r=this.getParent();return r&&r.sort(),this},e.prototype.toFront=function(){var t=this.getParent();if(t){var r=t.getChildren(),n=this.get("el"),a=r.indexOf(this);r.splice(a,1),r.push(this),this.onCanvasChange("zIndex")}},e.prototype.toBack=function(){var t=this.getParent();if(t){var r=t.getChildren(),n=this.get("el"),a=r.indexOf(this);r.splice(a,1),r.unshift(this),this.onCanvasChange("zIndex")}},e.prototype.remove=function(t){t===void 0&&(t=!0);var r=this.getParent();r?(yc(r.getChildren(),this),r.get("clearing")||this.onCanvasChange("remove")):this.onCanvasChange("remove"),t&&this.destroy()},e.prototype.resetMatrix=function(){this.attr(Cu,this.getDefaultMatrix()),this.onCanvasChange("matrix")},e.prototype.getMatrix=function(){return this.attr(Cu)},e.prototype.setMatrix=function(t){this.attr(Cu,t),this.onCanvasChange("matrix")},e.prototype.getTotalMatrix=function(){var t=this.cfg.totalMatrix;if(!t){var r=this.attr("matrix"),n=this.cfg.parentMatrix;n&&r?t=cf(n,r):t=r||n,this.set("totalMatrix",t)}return t},e.prototype.applyMatrix=function(t){var r=this.attr("matrix"),n=null;t&&r?n=cf(t,r):n=r||t,this.set("totalMatrix",n),this.set("parentMatrix",t)},e.prototype.getDefaultMatrix=function(){return null},e.prototype.applyToMatrix=function(t){var r=this.attr("matrix");return r?xi(r,t):t},e.prototype.invertFromMatrix=function(t){var r=this.attr("matrix");if(r){var n=Vu(r);if(n)return xi(n,t)}return t},e.prototype.setClip=function(t){var r=this.getCanvas(),n=null;if(t){var a=this.getShapeBase(),o=(0,v.upperFirst)(t.type),s=a[o];s&&(n=new s({type:t.type,isClipShape:!0,applyTo:this,attrs:t.attrs,canvas:r}))}return this.set("clipShape",n),this.onCanvasChange("clip"),n},e.prototype.getClip=function(){var t=this.cfg.clipShape;return t||null},e.prototype.clone=function(){var t=this,r=this.attrs,n={};(0,v.each)(r,function(s,u){(0,v.isArray)(r[u])?n[u]=ae(r[u]):n[u]=r[u]});var a=this.constructor,o=new a({attrs:n});return(0,v.each)(J,function(s){o.set(s,t.get(s))}),o},e.prototype.destroy=function(){var t=this.destroyed;t||(this.attrs={},i.prototype.destroy.call(this))},e.prototype.isAnimatePaused=function(){return this.get("_pause").isPaused},e.prototype.animate=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];if(!(!this.get("timeline")&&!this.get("canvas"))){this.set("animating",!0);var n=this.get("timeline");n||(n=this.get("canvas").get("timeline"),this.set("timeline",n));var a=this.get("animations")||[];n.timer||n.initTimer();var o=t[0],s=t[1],u=t[2],f=u===void 0?"easeLinear":u,c=t[3],l=c===void 0?v.noop:c,m=t[4],w=m===void 0?0:m,C,D,U,$,tt;(0,v.isFunction)(o)?(C=o,o={}):(0,v.isObject)(o)&&o.onFrame&&(C=o.onFrame,D=o.repeat),(0,v.isObject)(s)?(tt=s,s=tt.duration,f=tt.easing||"easeLinear",w=tt.delay||0,D=tt.repeat||D||!1,l=tt.callback||v.noop,U=tt.pauseCallback||v.noop,$=tt.resumeCallback||v.noop):((0,v.isNumber)(l)&&(w=l,l=null),(0,v.isFunction)(f)?(l=f,f="easeLinear"):f=f||"easeLinear");var it=We(o,this),ct={fromAttrs:Ue(it,this),toAttrs:it,duration:s,easing:f,repeat:D,callback:l,pauseCallback:U,resumeCallback:$,delay:w,startTime:n.getTime(),id:(0,v.uniqueId)(),onFrame:C,pathFormatted:!1};a.length>0?a=vr(a,ct):n.addAnimator(this),a.push(ct),this.set("animations",a),this.set("_pause",{isPaused:!1})}},e.prototype.stopAnimate=function(t){var r=this;t===void 0&&(t=!0);var n=this.get("animations");(0,v.each)(n,function(a){t&&(a.onFrame?r.attr(a.onFrame(1)):r.attr(a.toAttrs)),a.callback&&a.callback()}),this.set("animating",!1),this.set("animations",[])},e.prototype.pauseAnimate=function(){var t=this.get("timeline"),r=this.get("animations"),n=t.getTime();return(0,v.each)(r,function(a){a._paused=!0,a._pauseTime=n,a.pauseCallback&&a.pauseCallback()}),this.set("_pause",{isPaused:!0,pauseTime:n}),this},e.prototype.resumeAnimate=function(){var t=this.get("timeline"),r=t.getTime(),n=this.get("animations"),a=this.get("_pause").pauseTime;return(0,v.each)(n,function(o){o.startTime=o.startTime+(r-a),o._paused=!1,o._pauseTime=null,o.resumeCallback&&o.resumeCallback()}),this.set("_pause",{isPaused:!1}),this.set("animations",n),this},e.prototype.emitDelegation=function(t,r){var n=this,a=r.propagationPath,o=this.getEvents(),s;t==="mouseenter"?s=r.fromShape:t==="mouseleave"&&(s=r.toShape);for(var u=function(m){var w=a[m],C=w.get("name");if(C){if((w.isGroup()||w.isCanvas&&w.isCanvas())&&s&&bc(w,s))return"break";(0,v.isArray)(C)?(0,v.each)(C,function(D){n.emitDelegateEvent(w,D,r)}):f.emitDelegateEvent(w,C,r)}},f=this,c=0;c<a.length;c++){var l=u(c);if(l==="break")break}},e.prototype.emitDelegateEvent=function(t,r,n){var a=this.getEvents(),o=r+St+n.type;(a[o]||a[Ut])&&(n.name=o,n.currentTarget=t,n.delegateTarget=this,n.delegateObject=t.get("delegateObject"),this.emit(o,n))},e.prototype.translate=function(t,r){t===void 0&&(t=0),r===void 0&&(r=0);var n=this.getMatrix(),a=Is(n,[["t",t,r]]);return this.setMatrix(a),this},e.prototype.move=function(t,r){var n=this.attr("x")||0,a=this.attr("y")||0;return this.translate(t-n,r-a),this},e.prototype.moveTo=function(t,r){return this.move(t,r)},e.prototype.scale=function(t,r){var n=this.getMatrix(),a=Is(n,[["s",t,r||t]]);return this.setMatrix(a),this},e.prototype.rotate=function(t){var r=this.getMatrix(),n=Is(r,[["r",t]]);return this.setMatrix(n),this},e.prototype.rotateAtStart=function(t){var r=this.attr(),n=r.x,a=r.y,o=this.getMatrix(),s=Is(o,[["t",-n,-a],["r",t],["t",n,a]]);return this.setMatrix(s),this},e.prototype.rotateAtPoint=function(t,r,n){var a=this.getMatrix(),o=Is(a,[["t",-t,-r],["r",n],["t",t,r]]);return this.setMatrix(o),this},e}(xc),qr=zr,Ln={},Mn="_INDEX";function kn(i,e){if(i.set("canvas",e),i.isGroup()){var t=i.get("children");t.length&&t.forEach(function(r){kn(r,e)})}}function sa(i,e){if(i.set("timeline",e),i.isGroup()){var t=i.get("children");t.length&&t.forEach(function(r){sa(r,e)})}}function Ta(i,e){var t=i.getChildren();return t.indexOf(e)>=0}function xa(i,e,t){t===void 0&&(t=!0),t?e.destroy():(e.set("parent",null),e.set("canvas",null)),yc(i.getChildren(),e)}function aa(i){return function(e,t){var r=i(e,t);return r===0?e[Mn]-t[Mn]:r}}var ka=function(i){(0,g.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.isCanvas=function(){return!1},e.prototype.getBBox=function(){var t=1/0,r=-1/0,n=1/0,a=-1/0,o=this.getChildren().filter(function(u){return u.get("visible")&&(!u.isGroup()||u.isGroup()&&u.getChildren().length>0)});o.length>0?(0,v.each)(o,function(u){var f=u.getBBox(),c=f.minX,l=f.maxX,m=f.minY,w=f.maxY;c<t&&(t=c),l>r&&(r=l),m<n&&(n=m),w>a&&(a=w)}):(t=0,r=0,n=0,a=0);var s={x:t,y:n,minX:t,minY:n,maxX:r,maxY:a,width:r-t,height:a-n};return s},e.prototype.getCanvasBBox=function(){var t=1/0,r=-1/0,n=1/0,a=-1/0,o=this.getChildren().filter(function(u){return u.get("visible")&&(!u.isGroup()||u.isGroup()&&u.getChildren().length>0)});o.length>0?(0,v.each)(o,function(u){var f=u.getCanvasBBox(),c=f.minX,l=f.maxX,m=f.minY,w=f.maxY;c<t&&(t=c),l>r&&(r=l),m<n&&(n=m),w>a&&(a=w)}):(t=0,r=0,n=0,a=0);var s={x:t,y:n,minX:t,minY:n,maxX:r,maxY:a,width:r-t,height:a-n};return s},e.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return t.children=[],t},e.prototype.onAttrChange=function(t,r,n){if(i.prototype.onAttrChange.call(this,t,r,n),t==="matrix"){var a=this.getTotalMatrix();this._applyChildrenMarix(a)}},e.prototype.applyMatrix=function(t){var r=this.getTotalMatrix();i.prototype.applyMatrix.call(this,t);var n=this.getTotalMatrix();n!==r&&this._applyChildrenMarix(n)},e.prototype._applyChildrenMarix=function(t){var r=this.getChildren();(0,v.each)(r,function(n){n.applyMatrix(t)})},e.prototype.addShape=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0],a=t[1];(0,v.isObject)(n)?a=n:a.type=n;var o=Ln[a.type];o||(o=(0,v.upperFirst)(a.type),Ln[a.type]=o);var s=this.getShapeBase(),u=new s[o](a);return this.add(u),u},e.prototype.addGroup=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t[0],a=t[1],o;if((0,v.isFunction)(n))a?o=new n(a):o=new n({parent:this});else{var s=n||{},u=this.getGroupBase();o=new u(s)}return this.add(o),o},e.prototype.getCanvas=function(){var t;return this.isCanvas()?t=this:t=this.get("canvas"),t},e.prototype.getShape=function(t,r,n){if(!Uf(this))return null;var a=this.getChildren(),o;if(this.isCanvas())o=this._findShape(a,t,r,n);else{var s=[t,r,1];s=this.invertFromMatrix(s),this.isClipped(s[0],s[1])||(o=this._findShape(a,s[0],s[1],n))}return o},e.prototype._findShape=function(t,r,n,a){for(var o=null,s=t.length-1;s>=0;s--){var u=t[s];if(Uf(u)&&(u.isGroup()?o=u.getShape(r,n,a):u.isHit(r,n)&&(o=u)),o)break}return o},e.prototype.add=function(t){var r=this.getCanvas(),n=this.getChildren(),a=this.get("timeline"),o=t.getParent();o&&xa(o,t,!1),t.set("parent",this),r&&kn(t,r),a&&sa(t,a),n.push(t),t.onCanvasChange("add"),this._applyElementMatrix(t)},e.prototype._applyElementMatrix=function(t){var r=this.getTotalMatrix();r&&t.applyMatrix(r)},e.prototype.getChildren=function(){return this.get("children")||[]},e.prototype.sort=function(){var t=this.getChildren();(0,v.each)(t,function(r,n){return r[Mn]=n,r}),t.sort(aa(function(r,n){return r.get("zIndex")-n.get("zIndex")})),this.onCanvasChange("sort")},e.prototype.clear=function(){if(this.set("clearing",!0),!this.destroyed){for(var t=this.getChildren(),r=t.length-1;r>=0;r--)t[r].destroy();this.set("children",[]),this.onCanvasChange("clear"),this.set("clearing",!1)}},e.prototype.destroy=function(){this.get("destroyed")||(this.clear(),i.prototype.destroy.call(this))},e.prototype.getFirst=function(){return this.getChildByIndex(0)},e.prototype.getLast=function(){var t=this.getChildren();return this.getChildByIndex(t.length-1)},e.prototype.getChildByIndex=function(t){var r=this.getChildren();return r[t]},e.prototype.getCount=function(){var t=this.getChildren();return t.length},e.prototype.contain=function(t){var r=this.getChildren();return r.indexOf(t)>-1},e.prototype.removeChild=function(t,r){r===void 0&&(r=!0),this.contain(t)&&t.remove(r)},e.prototype.findAll=function(t){var r=[],n=this.getChildren();return(0,v.each)(n,function(a){t(a)&&r.push(a),a.isGroup()&&(r=r.concat(a.findAll(t)))}),r},e.prototype.find=function(t){var r=null,n=this.getChildren();return(0,v.each)(n,function(a){if(t(a)?r=a:a.isGroup()&&(r=a.find(t)),r)return!1}),r},e.prototype.findById=function(t){return this.find(function(r){return r.get("id")===t})},e.prototype.findByClassName=function(t){return this.find(function(r){return r.get("className")===t})},e.prototype.findAllByName=function(t){return this.findAll(function(r){return r.get("name")===t})},e}(qr),jn=ka,Ea=0,la=0,Hn=0,La=1e3,ja,Qa,qa=0,Na=0,di=0,wi=typeof performance=="object"&&performance.now?performance:Date,yi=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(i){setTimeout(i,17)};function Tu(){return Na||(yi(Wf),Na=wi.now()+di)}function Wf(){Na=0}function as(){this._call=this._time=this._next=null}as.prototype=cu.prototype={constructor:as,restart:function(i,e,t){if(typeof i!="function")throw new TypeError("callback is not a function");t=(t==null?Tu():+t)+(e==null?0:+e),!this._next&&Qa!==this&&(Qa?Qa._next=this:ja=this,Qa=this),this._call=i,this._time=t,Hu()},stop:function(){this._call&&(this._call=null,this._time=1/0,Hu())}};function cu(i,e,t){var r=new as;return r.restart(i,e,t),r}function lf(){Tu(),++Ea;for(var i=ja,e;i;)(e=Na-i._time)>=0&&i._call.call(null,e),i=i._next;--Ea}function ru(){Na=(qa=wi.now())+di,Ea=la=0;try{lf()}finally{Ea=0,el(),Na=0}}function Vf(){var i=wi.now(),e=i-qa;e>La&&(di-=e,qa=i)}function el(){for(var i,e=ja,t,r=1/0;e;)e._call?(r>e._time&&(r=e._time),i=e,e=e._next):(t=e._next,e._next=null,e=i?i._next=t:ja=t);Qa=i,Hu(r)}function Hu(i){if(!Ea){la&&(la=clearTimeout(la));var e=i-Na;e>24?(i<1/0&&(la=setTimeout(ru,i-wi.now()-di)),Hn&&(Hn=clearInterval(Hn))):(Hn||(qa=wi.now(),Hn=setInterval(Vf,La)),Ea=1,yi(ru))}}var hf=et(52677);function df(i,e,t){i.prototype=e.prototype=t,t.constructor=i}function lu(i,e){var t=Object.create(i.prototype);for(var r in e)t[r]=e[r];return t}function xs(){}var js=.7,ju=1/js,ws="\\s*([+-]?\\d+)\\s*",Co="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ks="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",vf=/^#([0-9a-f]{3,8})$/,Gl=new RegExp("^rgb\\(".concat(ws,",").concat(ws,",").concat(ws,"\\)$")),pf=new RegExp("^rgb\\(".concat(ks,",").concat(ks,",").concat(ks,"\\)$")),rl=new RegExp("^rgba\\(".concat(ws,",").concat(ws,",").concat(ws,",").concat(Co,"\\)$")),nl=new RegExp("^rgba\\(".concat(ks,",").concat(ks,",").concat(ks,",").concat(Co,"\\)$")),al=new RegExp("^hsl\\(".concat(Co,",").concat(ks,",").concat(ks,"\\)$")),il=new RegExp("^hsla\\(".concat(Co,",").concat(ks,",").concat(ks,",").concat(Co,"\\)$")),Mc={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};df(xs,gf,{copy:function(e){return Object.assign(new this.constructor,this,e)},displayable:function(){return this.rgb().displayable()},hex:Hf,formatHex:Hf,formatHex8:zl,formatHsl:Ul,formatRgb:ol,toString:ol});function Hf(){return this.rgb().formatHex()}function zl(){return this.rgb().formatHex8()}function Ul(){return cl(this).formatHsl()}function ol(){return this.rgb().formatRgb()}function gf(i){var e,t;return i=(i+"").trim().toLowerCase(),(e=vf.exec(i))?(t=e[1].length,e=parseInt(e[1],16),t===6?sl(e):t===3?new is(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?yf(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?yf(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Gl.exec(i))?new is(e[1],e[2],e[3],1):(e=pf.exec(i))?new is(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=rl.exec(i))?yf(e[1],e[2],e[3],e[4]):(e=nl.exec(i))?yf(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=al.exec(i))?qf(e[1],e[2]/100,e[3]/100,1):(e=il.exec(i))?qf(e[1],e[2]/100,e[3]/100,e[4]):Mc.hasOwnProperty(i)?sl(Mc[i]):i==="transparent"?new is(NaN,NaN,NaN,0):null}function sl(i){return new is(i>>16&255,i>>8&255,i&255,1)}function yf(i,e,t,r){return r<=0&&(i=e=t=NaN),new is(i,e,t,r)}function ul(i){return i instanceof xs||(i=gf(i)),i?(i=i.rgb(),new is(i.r,i.g,i.b,i.opacity)):new is}function jf(i,e,t,r){return arguments.length===1?ul(i):new is(i,e,t,r==null?1:r)}function is(i,e,t,r){this.r=+i,this.g=+e,this.b=+t,this.opacity=+r}df(is,jf,lu(xs,{brighter:function(e){return e=e==null?ju:Math.pow(ju,e),new is(this.r*e,this.g*e,this.b*e,this.opacity)},darker:function(e){return e=e==null?js:Math.pow(js,e),new is(this.r*e,this.g*e,this.b*e,this.opacity)},rgb:function(){return this},clamp:function(){return new is(Iu(this.r),Iu(this.g),Iu(this.b),Re(this.opacity))},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:fl,formatHex:fl,formatHex8:Zf,formatRgb:Ac,toString:Ac}));function fl(){return"#".concat(zs(this.r)).concat(zs(this.g)).concat(zs(this.b))}function Zf(){return"#".concat(zs(this.r)).concat(zs(this.g)).concat(zs(this.b)).concat(zs((isNaN(this.opacity)?1:this.opacity)*255))}function Ac(){var i=Re(this.opacity);return"".concat(i===1?"rgb(":"rgba(").concat(Iu(this.r),", ").concat(Iu(this.g),", ").concat(Iu(this.b)).concat(i===1?")":", ".concat(i,")"))}function Re(i){return isNaN(i)?1:Math.max(0,Math.min(1,i))}function Iu(i){return Math.max(0,Math.min(255,Math.round(i)||0))}function zs(i){return i=Iu(i),(i<16?"0":"")+i.toString(16)}function qf(i,e,t,r){return r<=0?i=e=t=NaN:t<=0||t>=1?i=e=NaN:e<=0&&(i=NaN),new Us(i,e,t,r)}function cl(i){if(i instanceof Us)return new Us(i.h,i.s,i.l,i.opacity);if(i instanceof xs||(i=gf(i)),!i)return new Us;if(i instanceof Us)return i;i=i.rgb();var e=i.r/255,t=i.g/255,r=i.b/255,n=Math.min(e,t,r),a=Math.max(e,t,r),o=NaN,s=a-n,u=(a+n)/2;return s?(e===a?o=(t-r)/s+(t<r)*6:t===a?o=(r-e)/s+2:o=(e-t)/s+4,s/=u<.5?a+n:2-a-n,o*=60):s=u>0&&u<1?0:o,new Us(o,s,u,i.opacity)}function ll(i,e,t,r){return arguments.length===1?cl(i):new Us(i,e,t,r==null?1:r)}function Us(i,e,t,r){this.h=+i,this.s=+e,this.l=+t,this.opacity=+r}df(Us,ll,lu(xs,{brighter:function(e){return e=e==null?ju:Math.pow(ju,e),new Us(this.h,this.s,this.l*e,this.opacity)},darker:function(e){return e=e==null?js:Math.pow(js,e),new Us(this.h,this.s,this.l*e,this.opacity)},rgb:function(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,a=2*r-n;return new is(mf(e>=240?e-240:e+120,a,n),mf(e,a,n),mf(e<120?e+240:e-120,a,n),this.opacity)},clamp:function(){return new Us(hl(this.h),ku(this.s),ku(this.l),Re(this.opacity))},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var e=Re(this.opacity);return"".concat(e===1?"hsl(":"hsla(").concat(hl(this.h),", ").concat(ku(this.s)*100,"%, ").concat(ku(this.l)*100,"%").concat(e===1?")":", ".concat(e,")"))}}));function hl(i){return i=(i||0)%360,i<0?i+360:i}function ku(i){return Math.max(0,Math.min(1,i||0))}function mf(i,e,t){return(i<60?e+(t-e)*i/60:i<180?t:i<240?e+(t-e)*(240-i)/60:e)*255}function Cc(i,e,t,r,n){var a=i*i,o=a*i;return((1-3*i+3*a-o)*e+(4-6*a+3*o)*t+(1+3*i+3*a-3*o)*r+o*n)/6}function Tc(i){var e=i.length-1;return function(t){var r=t<=0?t=0:t>=1?(t=1,e-1):Math.floor(t*e),n=i[r],a=i[r+1],o=r>0?i[r-1]:2*n-a,s=r<e-1?i[r+2]:2*a-n;return Cc((t-r/e)*e,o,n,a,s)}}function mo(i){var e=i.length;return function(t){var r=Math.floor(((t%=1)<0?++t:t)*e),n=i[(r+e-1)%e],a=i[r%e],o=i[(r+1)%e],s=i[(r+2)%e];return Cc((t-r/e)*e,n,a,o,s)}}var Lu=function(i){return function(){return i}};function Ic(i,e){return function(t){return i+t*e}}function $f(i,e,t){return i=Math.pow(i,t),e=Math.pow(e,t)-i,t=1/t,function(r){return Math.pow(i+r*e,t)}}function hu(i,e){var t=e-i;return t?Ic(i,t>180||t<-180?t-360*Math.round(t/360):t):constant(isNaN(i)?e:i)}function bf(i){return(i=+i)==1?Nu:function(e,t){return t-e?$f(e,t,i):Lu(isNaN(e)?t:e)}}function Nu(i,e){var t=e-i;return t?Ic(i,t):Lu(isNaN(i)?e:i)}var du=function i(e){var t=bf(e);function r(n,a){var o=t((n=jf(n)).r,(a=jf(a)).r),s=t(n.g,a.g),u=t(n.b,a.b),f=Nu(n.opacity,a.opacity);return function(c){return n.r=o(c),n.g=s(c),n.b=u(c),n.opacity=f(c),n+""}}return r.gamma=i,r}(1);function Zu(i){return function(e){var t=e.length,r=new Array(t),n=new Array(t),a=new Array(t),o,s;for(o=0;o<t;++o)s=jf(e[o]),r[o]=s.r||0,n[o]=s.g||0,a[o]=s.b||0;return r=i(r),n=i(n),a=i(a),s.opacity=1,function(u){return s.r=r(u),s.g=n(u),s.b=a(u),s+""}}}var xf=Zu(Tc),wf=Zu(mo);function Ou(i,e){e||(e=[]);var t=i?Math.min(e.length,i.length):0,r=e.slice(),n;return function(a){for(n=0;n<t;++n)r[n]=i[n]*(1-a)+e[n]*a;return r}}function Kf(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function kc(i,e){return(Kf(e)?Ou:Ef)(i,e)}function Ef(i,e){var t=e?e.length:0,r=i?Math.min(t,i.length):0,n=new Array(r),a=new Array(t),o;for(o=0;o<r;++o)n[o]=Sf(i[o],e[o]);for(;o<t;++o)a[o]=e[o];return function(s){for(o=0;o<r;++o)a[o]=n[o](s);return a}}function dl(i,e){var t=new Date;return i=+i,e=+e,function(r){return t.setTime(i*(1-r)+e*r),t}}function Qf(i,e){return i=+i,e=+e,function(t){return i*(1-t)+e*t}}function _f(i,e){var t={},r={},n;(i===null||hf(i)!=="object")&&(i={}),(e===null||hf(e)!=="object")&&(e={});for(n in e)n in i?t[n]=Sf(i[n],e[n]):r[n]=e[n];return function(a){for(n in t)r[n]=t[n](a);return r}}var Es=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Jf=new RegExp(Es.source,"g");function Xl(i){return function(){return i}}function Lc(i){return function(e){return i(e)+""}}function vl(i,e){var t=Es.lastIndex=Jf.lastIndex=0,r,n,a,o=-1,s=[],u=[];for(i=i+"",e=e+"";(r=Es.exec(i))&&(n=Jf.exec(e));)(a=n.index)>t&&(a=e.slice(t,a),s[o]?s[o]+=a:s[++o]=a),(r=r[0])===(n=n[0])?s[o]?s[o]+=n:s[++o]=n:(s[++o]=null,u.push({i:o,x:Qf(r,n)})),t=Jf.lastIndex;return t<e.length&&(a=e.slice(t),s[o]?s[o]+=a:s[++o]=a),s.length<2?u[0]?Lc(u[0].x):Xl(e):(e=u.length,function(f){for(var c=0,l;c<e;++c)s[(l=u[c]).i]=l.x(f);return s.join("")})}function Sf(i,e){var t=hf(e),r;return e==null||t==="boolean"?Lu(e):(t==="number"?Qf:t==="string"?(r=gf(e))?(e=r,du):vl:e instanceof gf?du:e instanceof Date?dl:Kf(e)?Ou:Array.isArray(e)?Ef:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?_f:Qf)(i,e)}function Yl(i){return+i}function qu(i){return i*i}function Wl(i){return i*(2-i)}function pl(i){return((i*=2)<=1?i*i:--i*(2-i)+1)/2}function gh(i){return i*i*i}function Vl(i){return--i*i*i+1}function gl(i){return((i*=2)<=1?i*i*i:(i-=2)*i*i+2)/2}var yl=3,Hl=function i(e){e=+e;function t(r){return Math.pow(r,e)}return t.exponent=i,t}(yl),jl=function i(e){e=+e;function t(r){return 1-Math.pow(1-r,e)}return t.exponent=i,t}(yl),Zl=function i(e){e=+e;function t(r){return((r*=2)<=1?Math.pow(r,e):2-Math.pow(2-r,e))/2}return t.exponent=i,t}(yl),ml=Math.PI,bl=ml/2;function ql(i){return+i==1?1:1-Math.cos(i*bl)}function $l(i){return Math.sin(i*bl)}function Nc(i){return(1-Math.cos(ml*i))/2}function Xs(i){return(Math.pow(2,-10*i)-.0009765625)*1.0009775171065494}function Oc(i){return Xs(1-+i)}function Dc(i){return 1-Xs(i)}function tc(i){return((i*=2)<=1?Xs(1-i):2-Xs(i-1))/2}function xl(i){return 1-Math.sqrt(1-i*i)}function Pc(i){return Math.sqrt(1- --i*i)}function ec(i){return((i*=2)<=1?1-Math.sqrt(1-i*i):Math.sqrt(1-(i-=2)*i)+1)/2}var $u=4/11,wl=6/11,Rc=8/11,Bc=3/4,Fc=9/11,rc=10/11,nc=15/16,Mf=21/22,ac=63/64,vu=1/$u/$u;function Kl(i){return 1-pu(1-i)}function pu(i){return(i=+i)<$u?vu*i*i:i<Rc?vu*(i-=wl)*i+Bc:i<rc?vu*(i-=Fc)*i+nc:vu*(i-=Mf)*i+ac}function Ku(i){return((i*=2)<=1?1-pu(1-i):pu(i-1)+1)/2}var Gc=1.70158,zc=function i(e){e=+e;function t(r){return(r=+r)*r*(e*(r-1)+r)}return t.overshoot=i,t}(Gc),yh=function i(e){e=+e;function t(r){return--r*r*((r+1)*e+r)+1}return t.overshoot=i,t}(Gc),Ql=function i(e){e=+e;function t(r){return((r*=2)<1?r*r*((e+1)*r-e):(r-=2)*r*((e+1)*r+e)+2)/2}return t.overshoot=i,t}(Gc),Af=2*Math.PI,nu=1,Uc=.3,Jl=function i(e,t){var r=Math.asin(1/(e=Math.max(1,e)))*(t/=Af);function n(a){return e*Xs(- --a)*Math.sin((r-a)/t)}return n.amplitude=function(a){return i(a,t*Af)},n.period=function(a){return i(e,a)},n}(nu,Uc),El=function i(e,t){var r=Math.asin(1/(e=Math.max(1,e)))*(t/=Af);function n(a){return 1-e*Xs(a=+a)*Math.sin((a+r)/t)}return n.amplitude=function(a){return i(a,t*Af)},n.period=function(a){return i(e,a)},n}(nu,Uc),mh=function i(e,t){var r=Math.asin(1/(e=Math.max(1,e)))*(t/=Af);function n(a){return((a=a*2-1)<0?e*Xs(-a)*Math.sin((r-a)/t):2-e*Xs(a)*Math.sin((r+a)/t))/2}return n.amplitude=function(a){return i(a,t*Af)},n.period=function(a){return i(e,a)},n}(nu,Uc),_l={};function bh(i){return _l[i.toLowerCase()]||H[i]}function Ko(i,e){_l[i.toLowerCase()]=e}var th=function(i){return["fill","stroke","fillStyle","strokeStyle"].includes(i)},Cf=function(i){return/^[r,R,L,l]{1}[\s]*\(/.test(i)},gu=[1,0,0,0,1,0,0,0,1];function eh(i,e,t){var r={},n=e.fromAttrs,a=e.toAttrs;if(!i.destroyed){var o;for(var s in a)if(!(0,v.isEqual)(n[s],a[s]))if(s==="path"){var u=a[s],f=n[s];u.length>f.length?(u=L(a[s]),f=L(n[s]),f=si(f,u),f=Oo(f,u),e.fromAttrs.path=f,e.toAttrs.path=u):e.pathFormatted||(u=L(a[s]),f=L(n[s]),f=Oo(f,u),e.fromAttrs.path=f,e.toAttrs.path=u,e.pathFormatted=!0),r[s]=[];for(var c=0;c<u.length;c++){for(var l=u[c],m=f[c],w=[],C=0;C<l.length;C++)(0,v.isNumber)(l[C])&&m&&(0,v.isNumber)(m[C])?(o=Sf(m[C],l[C]),w.push(o(t))):w.push(l[C]);r[s].push(w)}}else if(s==="matrix"){var D=kc(n[s]||gu,a[s]||gu),U=D(t);r[s]=U}else th(s)&&Cf(a[s])?r[s]=a[s]:(0,v.isFunction)(a[s])||(o=Sf(n[s],a[s]),r[s]=o(t));i.attr(r)}}function Sl(i,e,t){var r=e.startTime,n=e.delay;if(t<r+n||e._paused)return!1;var a,o=e.duration,s=e.easing,u=bh(s);if(t=t-r-e.delay,e.repeat)a=t%o/o,a=u(a);else if(a=t/o,a<1)a=u(a);else return e.onFrame?i.attr(e.onFrame(1)):i.attr(e.toAttrs),!0;if(e.onFrame){var f=e.onFrame(a);i.attr(f)}else eh(i,e,a);return!1}var Xc=function(){function i(e){this.animators=[],this.current=0,this.timer=null,this.canvas=e}return i.prototype.initTimer=function(){var e=this,t=!1,r,n,a;this.timer=cu(function(o){if(e.current=o,e.animators.length>0){for(var s=e.animators.length-1;s>=0;s--){if(r=e.animators[s],r.destroyed){e.removeAnimator(s);continue}if(!r.isAnimatePaused()){n=r.get("animations");for(var u=n.length-1;u>=0;u--)a=n[u],t=Sl(r,a,o),t&&(n.splice(u,1),t=!1,a.callback&&a.callback())}n.length===0&&e.removeAnimator(s)}var f=e.canvas.get("autoDraw");f||e.canvas.draw()}})},i.prototype.addAnimator=function(e){this.animators.push(e)},i.prototype.removeAnimator=function(e){this.animators.splice(e,1)},i.prototype.isAnimating=function(){return!!this.animators.length},i.prototype.stop=function(){this.timer&&this.timer.stop()},i.prototype.stopAllAnimations=function(e){e===void 0&&(e=!0),this.animators.forEach(function(t){t.stopAnimate(e)}),this.animators=[],this.canvas.draw()},i.prototype.getTime=function(){return this.current},i}(),rh=Xc,os=40,yu=0,eo=":",Go=["mousedown","mouseup","dblclick","mouseout","mouseover","mousemove","mouseleave","mouseenter","touchstart","touchmove","touchend","dragenter","dragover","dragleave","drop","contextmenu","mousewheel"];function Ml(i,e){for(var t in i)if(i.hasOwnProperty(t)&&t.indexOf(eo+e)>=0)return!0;return!1}function nh(i,e,t){t.name=e,t.target=i,t.currentTarget=i,t.delegateTarget=i,i.emit(e,t)}function ah(i,e,t){if(t.bubbles){var r=void 0,n=!1;if(e==="mouseenter"?(r=t.fromShape,n=!0):e==="mouseleave"&&(n=!0,r=t.toShape),i.isCanvas()&&n)return;if(r&&bc(i,r)){t.bubbles=!1;return}t.name=e,t.currentTarget=i,t.delegateTarget=i,i.emit(e,t)}}var xh=function(){function i(e){var t=this;this.draggingShape=null,this.dragging=!1,this.currentShape=null,this.mousedownShape=null,this.mousedownPoint=null,this._eventCallback=function(r){var n=r.type;t._triggerEvent(n,r)},this._onDocumentMove=function(r){var n=t.canvas,a=n.get("el");if(a!==r.target&&(t.dragging||t.currentShape)){var o=t._getPointInfo(r);t.dragging&&t._emitEvent("drag",r,o,t.draggingShape)}},this._onDocumentMouseUp=function(r){var n=t.canvas,a=n.get("el");if(a!==r.target&&t.dragging){var o=t._getPointInfo(r);t.draggingShape&&t._emitEvent("drop",r,o,null),t._emitEvent("dragend",r,o,t.draggingShape),t._afterDrag(t.draggingShape,o,r)}},this.canvas=e.canvas}return i.prototype.init=function(){this._bindEvents()},i.prototype._bindEvents=function(){var e=this,t=this.canvas.get("el");(0,v.each)(Go,function(r){t.addEventListener(r,e._eventCallback)}),document&&(document.addEventListener("mousemove",this._onDocumentMove),document.addEventListener("mouseup",this._onDocumentMouseUp))},i.prototype._clearEvents=function(){var e=this,t=this.canvas.get("el");(0,v.each)(Go,function(r){t.removeEventListener(r,e._eventCallback)}),document&&(document.removeEventListener("mousemove",this._onDocumentMove),document.removeEventListener("mouseup",this._onDocumentMouseUp))},i.prototype._getEventObj=function(e,t,r,n,a,o){var s=new zf(e,t);return s.fromShape=a,s.toShape=o,s.x=r.x,s.y=r.y,s.clientX=r.clientX,s.clientY=r.clientY,s.propagationPath.push(n),s},i.prototype._getShape=function(e,t){return this.canvas.getShape(e.x,e.y,t)},i.prototype._getPointInfo=function(e){var t=this.canvas,r=t.getClientByEvent(e),n=t.getPointByEvent(e);return{x:n.x,y:n.y,clientX:r.x,clientY:r.y}},i.prototype._triggerEvent=function(e,t){var r=this._getPointInfo(t),n=this._getShape(r,t),a=this["_on"+e],o=!1;if(a)a.call(this,r,n,t);else{var s=this.currentShape;e==="mouseenter"||e==="dragenter"||e==="mouseover"?(this._emitEvent(e,t,r,null,null,n),n&&this._emitEvent(e,t,r,n,null,n),e==="mouseenter"&&this.draggingShape&&this._emitEvent("dragenter",t,r,null)):e==="mouseleave"||e==="dragleave"||e==="mouseout"?(o=!0,s&&this._emitEvent(e,t,r,s,s,null),this._emitEvent(e,t,r,null,s,null),e==="mouseleave"&&this.draggingShape&&this._emitEvent("dragleave",t,r,null)):this._emitEvent(e,t,r,n,null,null)}if(o||(this.currentShape=n),n&&!n.get("destroyed")){var u=this.canvas,f=u.get("el");f.style.cursor=n.attr("cursor")||u.get("cursor")}},i.prototype._onmousedown=function(e,t,r){r.button===yu&&(this.mousedownShape=t,this.mousedownPoint=e,this.mousedownTimeStamp=r.timeStamp),this._emitEvent("mousedown",r,e,t,null,null)},i.prototype._emitMouseoverEvents=function(e,t,r,n){var a=this.canvas.get("el");r!==n&&(r&&(this._emitEvent("mouseout",e,t,r,r,n),this._emitEvent("mouseleave",e,t,r,r,n),(!n||n.get("destroyed"))&&(a.style.cursor=this.canvas.get("cursor"))),n&&(this._emitEvent("mouseover",e,t,n,r,n),this._emitEvent("mouseenter",e,t,n,r,n)))},i.prototype._emitDragoverEvents=function(e,t,r,n,a){n?(n!==r&&(r&&this._emitEvent("dragleave",e,t,r,r,n),this._emitEvent("dragenter",e,t,n,r,n)),a||this._emitEvent("dragover",e,t,n)):r&&this._emitEvent("dragleave",e,t,r,r,n),a&&this._emitEvent("dragover",e,t,n)},i.prototype._afterDrag=function(e,t,r){e&&(e.set("capture",!0),this.draggingShape=null),this.dragging=!1;var n=this._getShape(t,r);n!==e&&this._emitMouseoverEvents(r,t,e,n),this.currentShape=n},i.prototype._onmouseup=function(e,t,r){if(r.button===yu){var n=this.draggingShape;this.dragging?(n&&this._emitEvent("drop",r,e,t),this._emitEvent("dragend",r,e,n),this._afterDrag(n,e,r)):(this._emitEvent("mouseup",r,e,t),t===this.mousedownShape&&this._emitEvent("click",r,e,t),this.mousedownShape=null,this.mousedownPoint=null)}},i.prototype._ondragover=function(e,t,r){r.preventDefault();var n=this.currentShape;this._emitDragoverEvents(r,e,n,t,!0)},i.prototype._onmousemove=function(e,t,r){var n=this.canvas,a=this.currentShape,o=this.draggingShape;if(this.dragging)o&&this._emitDragoverEvents(r,e,a,t,!1),this._emitEvent("drag",r,e,o);else{var s=this.mousedownPoint;if(s){var u=this.mousedownShape,f=r.timeStamp,c=f-this.mousedownTimeStamp,l=s.clientX-e.clientX,m=s.clientY-e.clientY,w=l*l+m*m;c>120||w>os?u&&u.get("draggable")?(o=this.mousedownShape,o.set("capture",!1),this.draggingShape=o,this.dragging=!0,this._emitEvent("dragstart",r,e,o),this.mousedownShape=null,this.mousedownPoint=null):!u&&n.get("draggable")?(this.dragging=!0,this._emitEvent("dragstart",r,e,null),this.mousedownShape=null,this.mousedownPoint=null):(this._emitMouseoverEvents(r,e,a,t),this._emitEvent("mousemove",r,e,t)):(this._emitMouseoverEvents(r,e,a,t),this._emitEvent("mousemove",r,e,t))}else this._emitMouseoverEvents(r,e,a,t),this._emitEvent("mousemove",r,e,t)}},i.prototype._emitEvent=function(e,t,r,n,a,o){var s=this._getEventObj(e,t,r,n,a,o);if(n){s.shape=n,nh(n,e,s);for(var u=n.getParent();u;)u.emitDelegation(e,s),s.propagationStopped||ah(u,e,s),s.propagationPath.push(u),u=u.getParent()}else{var f=this.canvas;nh(f,e,s)}},i.prototype.destroy=function(){this._clearEvents(),this.canvas=null,this.currentShape=null,this.draggingShape=null,this.mousedownPoint=null,this.mousedownShape=null,this.mousedownTimeStamp=null},i}(),wh=xh,Al="px",ih=Yu(),Eh=ih&&ih.name==="firefox",_h=function(i){(0,g.__extends)(e,i);function e(t){var r=i.call(this,t)||this;return r.initContainer(),r.initDom(),r.initEvents(),r.initTimeline(),r}return e.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return t.cursor="default",t.supportCSSTransform=!1,t},e.prototype.initContainer=function(){var t=this.get("container");(0,v.isString)(t)&&(t=document.getElementById(t),this.set("container",t))},e.prototype.initDom=function(){var t=this.createDom();this.set("el",t);var r=this.get("container");r.appendChild(t),this.setDOMSize(this.get("width"),this.get("height"))},e.prototype.initEvents=function(){var t=new wh({canvas:this});t.init(),this.set("eventController",t)},e.prototype.initTimeline=function(){var t=new rh(this);this.set("timeline",t)},e.prototype.setDOMSize=function(t,r){var n=this.get("el");mc&&(n.style.width=t+Al,n.style.height=r+Al)},e.prototype.changeSize=function(t,r){this.setDOMSize(t,r),this.set("width",t),this.set("height",r),this.onCanvasChange("changeSize")},e.prototype.getRenderer=function(){return this.get("renderer")},e.prototype.getCursor=function(){return this.get("cursor")},e.prototype.setCursor=function(t){this.set("cursor",t);var r=this.get("el");mc&&r&&(r.style.cursor=t)},e.prototype.getPointByEvent=function(t){var r=this.get("supportCSSTransform");if(r){if(Eh&&!(0,v.isNil)(t.layerX)&&t.layerX!==t.offsetX)return{x:t.layerX,y:t.layerY};if(!(0,v.isNil)(t.offsetX))return{x:t.offsetX,y:t.offsetY}}var n=this.getClientByEvent(t),a=n.x,o=n.y;return this.getPointByClient(a,o)},e.prototype.getClientByEvent=function(t){var r=t;return t.touches&&(t.type==="touchend"?r=t.changedTouches[0]:r=t.touches[0]),{x:r.clientX,y:r.clientY}},e.prototype.getPointByClient=function(t,r){var n=this.get("el"),a=n.getBoundingClientRect();return{x:t-a.left,y:r-a.top}},e.prototype.getClientByPoint=function(t,r){var n=this.get("el"),a=n.getBoundingClientRect();return{x:t+a.left,y:r+a.top}},e.prototype.draw=function(){},e.prototype.removeDom=function(){var t=this.get("el");t.parentNode.removeChild(t)},e.prototype.clearEvents=function(){var t=this.get("eventController");t.destroy()},e.prototype.isCanvas=function(){return!0},e.prototype.getParent=function(){return null},e.prototype.destroy=function(){var t=this.get("timeline");this.get("destroyed")||(this.clear(),t&&t.stop(),this.clearEvents(),this.removeDom(),i.prototype.destroy.call(this))},e}(jn),oh=_h,sh=function(i){(0,g.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.isGroup=function(){return!0},e.prototype.isEntityGroup=function(){return!1},e.prototype.clone=function(){for(var t=i.prototype.clone.call(this),r=this.getChildren(),n=0;n<r.length;n++){var a=r[n];t.add(a.clone())}return t},e}(jn),Yc=sh,Wc=function(i){(0,g.__extends)(e,i);function e(t){return i.call(this,t)||this}return e.prototype._isInBBox=function(t,r){var n=this.getBBox();return n.minX<=t&&n.maxX>=t&&n.minY<=r&&n.maxY>=r},e.prototype.afterAttrsChange=function(t){i.prototype.afterAttrsChange.call(this,t),this.clearCacheBBox()},e.prototype.getBBox=function(){var t=this.cfg.bbox;return t||(t=this.calculateBBox(),this.set("bbox",t)),t},e.prototype.getCanvasBBox=function(){var t=this.cfg.canvasBBox;return t||(t=this.calculateCanvasBBox(),this.set("canvasBBox",t)),t},e.prototype.applyMatrix=function(t){i.prototype.applyMatrix.call(this,t),this.set("canvasBBox",null)},e.prototype.calculateCanvasBBox=function(){var t=this.getBBox(),r=this.getTotalMatrix(),n=t.minX,a=t.minY,o=t.maxX,s=t.maxY;if(r){var u=xi(r,[t.minX,t.minY]),f=xi(r,[t.maxX,t.minY]),c=xi(r,[t.minX,t.maxY]),l=xi(r,[t.maxX,t.maxY]);n=Math.min(u[0],f[0],c[0],l[0]),o=Math.max(u[0],f[0],c[0],l[0]),a=Math.min(u[1],f[1],c[1],l[1]),s=Math.max(u[1],f[1],c[1],l[1])}var m=this.attrs;if(m.shadowColor){var w=m.shadowBlur,C=w===void 0?0:w,D=m.shadowOffsetX,U=D===void 0?0:D,$=m.shadowOffsetY,tt=$===void 0?0:$,it=n-C+U,ct=o+C+U,_t=a-C+tt,Bt=s+C+tt;n=Math.min(n,it),o=Math.max(o,ct),a=Math.min(a,_t),s=Math.max(s,Bt)}return{x:n,y:a,minX:n,minY:a,maxX:o,maxY:s,width:o-n,height:s-a}},e.prototype.clearCacheBBox=function(){this.set("bbox",null),this.set("canvasBBox",null)},e.prototype.isClipShape=function(){return this.get("isClipShape")},e.prototype.isInShape=function(t,r){return!1},e.prototype.isOnlyHitBox=function(){return!1},e.prototype.isHit=function(t,r){var n=this.get("startArrowShape"),a=this.get("endArrowShape"),o=[t,r,1];o=this.invertFromMatrix(o);var s=o[0],u=o[1],f=this._isInBBox(s,u);return this.isOnlyHitBox()?f:!!(f&&!this.isClipped(s,u)&&(this.isInShape(s,u)||n&&n.isHit(s,u)||a&&a.isHit(s,u)))},e}(qr),Cl=Wc,uh=new Map;function Zs(i,e){uh.set(i,e)}function Tl(i){return uh.get(i)}function ic(i){var e=i.attr(),t=e.x,r=e.y,n=e.width,a=e.height;return{x:t,y:r,width:n,height:a}}function mt(i){var e=i.attr(),t=e.x,r=e.y,n=e.r;return{x:t-n,y:r-n,width:n*2,height:n*2}}function Kt(i,e,t,r){var n=i-t,a=e-r;return Math.sqrt(n*n+a*a)}function Me(i,e){return Math.abs(i-e)<.001}function gr(i,e){var t=(0,v.min)(i),r=(0,v.min)(e),n=(0,v.max)(i),a=(0,v.max)(e);return{x:t,y:r,width:n-t,height:a-r}}function Or(i,e,t,r){return{minX:(0,v.min)([i,t]),maxX:(0,v.max)([i,t]),minY:(0,v.min)([e,r]),maxY:(0,v.max)([e,r])}}function yr(i){return(i+Math.PI*2)%(Math.PI*2)}var mr={box:function(i,e,t,r){return gr([i,t],[e,r])},length:function(i,e,t,r){return Kt(i,e,t,r)},pointAt:function(i,e,t,r,n){return{x:(1-n)*i+n*t,y:(1-n)*e+n*r}},pointDistance:function(i,e,t,r,n,a){var o=(t-i)*(n-i)+(r-e)*(a-e);if(o<0)return Kt(i,e,n,a);var s=(t-i)*(t-i)+(r-e)*(r-e);return o>s?Kt(t,r,n,a):this.pointToLine(i,e,t,r,n,a)},pointToLine:function(i,e,t,r,n,a){var o=[t-i,r-e];if(Un.exactEquals(o,[0,0]))return Math.sqrt((n-i)*(n-i)+(a-e)*(a-e));var s=[-o[1],o[0]];Un.normalize(s,s);var u=[n-i,a-e];return Math.abs(Un.dot(u,s))},tangentAngle:function(i,e,t,r){return Math.atan2(r-e,t-i)}},$r=1e-4;function Qr(i,e,t,r,n,a){var o,s=1/0,u=[t,r],f=20;a&&a>200&&(f=a/10);for(var c=1/f,l=c/10,m=0;m<=f;m++){var w=m*c,C=[n.apply(null,i.concat([w])),n.apply(null,e.concat([w]))],D=Kt(u[0],u[1],C[0],C[1]);D<s&&(o=w,s=D)}if(o===0)return{x:i[0],y:e[0]};if(o===1){var U=i.length;return{x:i[U-1],y:e[U-1]}}s=1/0;for(var m=0;m<32&&!(l<$r);m++){var $=o-l,tt=o+l,C=[n.apply(null,i.concat([$])),n.apply(null,e.concat([$]))],D=Kt(u[0],u[1],C[0],C[1]);if($>=0&&D<s)o=$,s=D;else{var it=[n.apply(null,i.concat([tt])),n.apply(null,e.concat([tt]))],ct=Kt(u[0],u[1],it[0],it[1]);tt<=1&&ct<s?(o=tt,s=ct):l*=.5}}return{x:n.apply(null,i.concat([o])),y:n.apply(null,e.concat([o]))}}function nn(i,e){for(var t=0,r=i.length,n=0;n<r;n++){var a=i[n],o=e[n],s=i[(n+1)%r],u=e[(n+1)%r];t+=Kt(a,o,s,u)}return t/2}function Wr(i,e,t,r){var n=1-r;return n*n*i+2*r*n*e+r*r*t}function fn(i,e,t){var r=i+t-2*e;if(Me(r,0))return[.5];var n=(i-e)/r;return n<=1&&n>=0?[n]:[]}function d(i,e,t,r){return 2*(1-r)*(e-i)+2*r*(t-e)}function S(i,e,t,r,n,a,o){var s=Wr(i,t,n,o),u=Wr(e,r,a,o),f=mr.pointAt(i,e,t,r,o),c=mr.pointAt(t,r,n,a,o);return[[i,e,f.x,f.y,s,u],[s,u,c.x,c.y,n,a]]}function O(i,e,t,r,n,a,o){if(o===0)return(Kt(i,e,t,r)+Kt(t,r,n,a)+Kt(i,e,n,a))/2;var s=S(i,e,t,r,n,a,.5),u=s[0],f=s[1];return u.push(o-1),f.push(o-1),O.apply(null,u)+O.apply(null,f)}var X={box:function(i,e,t,r,n,a){var o=fn(i,t,n)[0],s=fn(e,r,a)[0],u=[i,n],f=[e,a];return o!==void 0&&u.push(Wr(i,t,n,o)),s!==void 0&&f.push(Wr(e,r,a,s)),gr(u,f)},length:function(i,e,t,r,n,a){return O(i,e,t,r,n,a,3)},nearestPoint:function(i,e,t,r,n,a,o,s){return Qr([i,t,n],[e,r,a],o,s,Wr)},pointDistance:function(i,e,t,r,n,a,o,s){var u=this.nearestPoint(i,e,t,r,n,a,o,s);return Kt(u.x,u.y,o,s)},interpolationAt:Wr,pointAt:function(i,e,t,r,n,a,o){return{x:Wr(i,t,n,o),y:Wr(e,r,a,o)}},divide:function(i,e,t,r,n,a,o){return S(i,e,t,r,n,a,o)},tangentAngle:function(i,e,t,r,n,a,o){var s=d(i,t,n,o),u=d(e,r,a,o),f=Math.atan2(u,s);return yr(f)}};function at(i,e,t,r,n){var a=1-n;return a*a*a*i+3*e*n*a*a+3*t*n*n*a+r*n*n*n}function st(i,e,t,r,n){var a=1-n;return 3*(a*a*(e-i)+2*a*n*(t-e)+n*n*(r-t))}function pt(i,e,t,r){var n=-3*i+9*e-9*t+3*r,a=6*i-12*e+6*t,o=3*e-3*i,s=[],u,f,c;if(Me(n,0))Me(a,0)||(u=-o/a,u>=0&&u<=1&&s.push(u));else{var l=a*a-4*n*o;Me(l,0)?s.push(-a/(2*n)):l>0&&(c=Math.sqrt(l),u=(-a+c)/(2*n),f=(-a-c)/(2*n),u>=0&&u<=1&&s.push(u),f>=0&&f<=1&&s.push(f))}return s}function xt(i,e,t,r,n,a,o,s,u){var f=at(i,t,n,o,u),c=at(e,r,a,s,u),l=mr.pointAt(i,e,t,r,u),m=mr.pointAt(t,r,n,a,u),w=mr.pointAt(n,a,o,s,u),C=mr.pointAt(l.x,l.y,m.x,m.y,u),D=mr.pointAt(m.x,m.y,w.x,w.y,u);return[[i,e,l.x,l.y,C.x,C.y,f,c],[f,c,D.x,D.y,w.x,w.y,o,s]]}function Mt(i,e,t,r,n,a,o,s,u){if(u===0)return nn([i,t,n,o],[e,r,a,s]);var f=xt(i,e,t,r,n,a,o,s,.5),c=f[0],l=f[1];return c.push(u-1),l.push(u-1),Mt.apply(null,c)+Mt.apply(null,l)}var Ft={extrema:pt,box:function(i,e,t,r,n,a,o,s){for(var u=[i,o],f=[e,s],c=pt(i,t,n,o),l=pt(e,r,a,s),m=0;m<c.length;m++)u.push(at(i,t,n,o,c[m]));for(var m=0;m<l.length;m++)f.push(at(e,r,a,s,l[m]));return gr(u,f)},length:function(i,e,t,r,n,a,o,s){return Mt(i,e,t,r,n,a,o,s,3)},nearestPoint:function(i,e,t,r,n,a,o,s,u,f,c){return Qr([i,t,n,o],[e,r,a,s],u,f,at,c)},pointDistance:function(i,e,t,r,n,a,o,s,u,f,c){var l=this.nearestPoint(i,e,t,r,n,a,o,s,u,f,c);return Kt(l.x,l.y,u,f)},interpolationAt:at,pointAt:function(i,e,t,r,n,a,o,s,u){return{x:at(i,t,n,o,u),y:at(e,r,a,s,u)}},divide:function(i,e,t,r,n,a,o,s,u){return xt(i,e,t,r,n,a,o,s,u)},tangentAngle:function(i,e,t,r,n,a,o,s,u){var f=st(i,t,n,o,u),c=st(e,r,a,s,u);return yr(Math.atan2(c,f))}};function re(i,e){var t=Math.abs(i);return e>0?t:t*-1}var qt={box:function(i,e,t,r){return{x:i-t,y:e-r,width:t*2,height:r*2}},length:function(i,e,t,r){return Math.PI*(3*(t+r)-Math.sqrt((3*t+r)*(t+3*r)))},nearestPoint:function(i,e,t,r,n,a){var o=t,s=r;if(o===0||s===0)return{x:i,y:e};for(var u=n-i,f=a-e,c=Math.abs(u),l=Math.abs(f),m=o*o,w=s*s,C=Math.PI/4,D,U,$=0;$<4;$++){D=o*Math.cos(C),U=s*Math.sin(C);var tt=(m-w)*Math.pow(Math.cos(C),3)/o,it=(w-m)*Math.pow(Math.sin(C),3)/s,ct=D-tt,_t=U-it,Bt=c-tt,Pt=l-it,Qt=Math.hypot(_t,ct),ye=Math.hypot(Pt,Bt),ce=Qt*Math.asin((ct*Pt-_t*Bt)/(Qt*ye)),Ne=ce/Math.sqrt(m+w-D*D-U*U);C+=Ne,C=Math.min(Math.PI/2,Math.max(0,C))}return{x:i+re(D,u),y:e+re(U,f)}},pointDistance:function(i,e,t,r,n,a){var o=this.nearestPoint(i,e,t,r,n,a);return Kt(o.x,o.y,n,a)},pointAt:function(i,e,t,r,n){var a=2*Math.PI*n;return{x:i+t*Math.cos(a),y:e+r*Math.sin(a)}},tangentAngle:function(i,e,t,r,n){var a=2*Math.PI*n,o=Math.atan2(r*Math.cos(a),-t*Math.sin(a));return yr(o)}};function Ee(i,e,t,r,n,a,o,s){return-1*t*Math.cos(n)*Math.sin(s)-r*Math.sin(n)*Math.cos(s)}function Ve(i,e,t,r,n,a,o,s){return-1*t*Math.sin(n)*Math.sin(s)+r*Math.cos(n)*Math.cos(s)}function Mr(i,e,t){return Math.atan(-e/i*Math.tan(t))}function Qe(i,e,t){return Math.atan(e/(i*Math.tan(t)))}function rr(i,e,t,r,n,a){return t*Math.cos(n)*Math.cos(a)-r*Math.sin(n)*Math.sin(a)+i}function tr(i,e,t,r,n,a){return t*Math.sin(n)*Math.cos(a)+r*Math.cos(n)*Math.sin(a)+e}function Jr(i,e,t,r){var n=Math.atan2(r*i,t*e);return(n+Math.PI*2)%(Math.PI*2)}function mn(i,e,t){return{x:i*Math.cos(t),y:e*Math.sin(t)}}function un(i,e,t){var r=Math.cos(t),n=Math.sin(t);return[i*r-e*n,i*n+e*r]}var Xn={box:function(i,e,t,r,n,a,o){for(var s=Mr(t,r,n),u=1/0,f=-1/0,c=[a,o],l=-Math.PI*2;l<=Math.PI*2;l+=Math.PI){var m=s+l;a<o?a<m&&m<o&&c.push(m):o<m&&m<a&&c.push(m)}for(var l=0;l<c.length;l++){var w=rr(i,e,t,r,n,c[l]);w<u&&(u=w),w>f&&(f=w)}for(var C=Qe(t,r,n),D=1/0,U=-1/0,$=[a,o],l=-Math.PI*2;l<=Math.PI*2;l+=Math.PI){var tt=C+l;a<o?a<tt&&tt<o&&$.push(tt):o<tt&&tt<a&&$.push(tt)}for(var l=0;l<$.length;l++){var it=tr(i,e,t,r,n,$[l]);it<D&&(D=it),it>U&&(U=it)}return{x:u,y:D,width:f-u,height:U-D}},length:function(i,e,t,r,n,a,o){},nearestPoint:function(i,e,t,r,n,a,o,s,u){var f=un(s-i,u-e,-n),c=f[0],l=f[1],m=qt.nearestPoint(0,0,t,r,c,l),w=Jr(t,r,m.x,m.y);w<a?m=mn(t,r,a):w>o&&(m=mn(t,r,o));var C=un(m.x,m.y,n);return{x:C[0]+i,y:C[1]+e}},pointDistance:function(i,e,t,r,n,a,o,s,u){var f=this.nearestPoint(i,e,t,r,s,u);return Kt(f.x,f.y,s,u)},pointAt:function(i,e,t,r,n,a,o,s){var u=(o-a)*s+a;return{x:rr(i,e,t,r,n,u),y:tr(i,e,t,r,n,u)}},tangentAngle:function(i,e,t,r,n,a,o,s){var u=(o-a)*s+a,f=Ee(i,e,t,r,n,a,o,u),c=Ve(i,e,t,r,n,a,o,u);return yr(Math.atan2(c,f))}};function Rn(i){for(var e=0,t=[],r=0;r<i.length-1;r++){var n=i[r],a=i[r+1],o=Kt(n[0],n[1],a[0],a[1]),s={from:n,to:a,length:o};t.push(s),e+=o}return{segments:t,totalLength:e}}function Jn(i){if(i.length<2)return 0;for(var e=0,t=0;t<i.length-1;t++){var r=i[t],n=i[t+1];e+=Kt(r[0],r[1],n[0],n[1])}return e}function va(i,e){if(e>1||e<0||i.length<2)return null;var t=Rn(i),r=t.segments,n=t.totalLength;if(n===0)return{x:i[0][0],y:i[0][1]};for(var a=0,o=null,s=0;s<r.length;s++){var u=r[s],f=u.from,c=u.to,l=u.length/n;if(e>=a&&e<=a+l){var m=(e-a)/l;o=mr.pointAt(f[0],f[1],c[0],c[1],m);break}a+=l}return o}function ua(i,e){if(e>1||e<0||i.length<2)return 0;for(var t=Rn(i),r=t.segments,n=t.totalLength,a=0,o=0,s=0;s<r.length;s++){var u=r[s],f=u.from,c=u.to,l=u.length/n;if(e>=a&&e<=a+l){o=Math.atan2(c[1]-f[1],c[0]-f[0]);break}a+=l}return o}function mi(i,e,t){for(var r=1/0,n=0;n<i.length-1;n++){var a=i[n],o=i[n+1],s=mr.pointDistance(a[0],a[1],o[0],o[1],e,t);s<r&&(r=s)}return r}var ga={box:function(i){for(var e=[],t=[],r=0;r<i.length;r++){var n=i[r];e.push(n[0]),t.push(n[1])}return gr(e,t)},length:function(i){return Jn(i)},pointAt:function(i,e){return va(i,e)},pointDistance:function(i,e,t){return mi(i,e,t)},tangentAngle:function(i,e){return ua(i,e)}};function Ci(i){var e=i.slice(0);return i.length&&e.push(i[0]),e}var vi={box:function(i){return ga.box(i)},length:function(i){return Jn(Ci(i))},pointAt:function(i,e){return va(Ci(i),e)},pointDistance:function(i,e,t){return mi(Ci(i),e,t)},tangentAngle:function(i,e){return ua(Ci(i),e)}};function Fa(i,e){return!i||!e?i||e:{minX:Math.min(i.minX,e.minX),minY:Math.min(i.minY,e.minY),maxX:Math.max(i.maxX,e.maxX),maxY:Math.max(i.maxY,e.maxY)}}function Ti(i,e){var t=i.get("startArrowShape"),r=i.get("endArrowShape"),n=null,a=null;return t&&(n=t.getCanvasBBox(),e=Fa(e,n)),r&&(a=r.getCanvasBBox(),e=Fa(e,a)),e}function Yi(i){for(var e=i.attr(),t=e.points,r=[],n=[],a=0;a<t.length;a++){var o=t[a];r.push(o[0]),n.push(o[1])}var s=gr(r,n),u=s.x,f=s.y,c=s.width,l=s.height,m={minX:u,minY:f,maxX:u+c,maxY:f+l};return m=Ti(i,m),{x:m.minX,y:m.minY,width:m.maxX-m.minX,height:m.maxY-m.minY}}function bo(i){for(var e=i.attr(),t=e.points,r=[],n=[],a=0;a<t.length;a++){var o=t[a];r.push(o[0]),n.push(o[1])}return gr(r,n)}var Do=null;function ro(){if(!Do){var i=document.createElement("canvas");i.width=1,i.height=1,Do=i.getContext("2d")}return Do}function Ma(i,e,t){var r=1;if((0,v.isString)(i)&&(r=i.split(`
`).length),r>1){var n=Qo(e,t);return e*r+n*(r-1)}return e}function Qo(i,e){return e?e-i:i*.14}function ii(i,e){var t=ro(),r=0;if((0,v.isNil)(i)||i==="")return r;if(t.save(),t.font=e,(0,v.isString)(i)&&i.includes(`
`)){var n=i.split(`
`);(0,v.each)(n,function(a){var o=t.measureText(a).width;r<o&&(r=o)})}else r=t.measureText(i).width;return t.restore(),r}function ea(i){var e=i.fontSize,t=i.fontFamily,r=i.fontWeight,n=i.fontStyle,a=i.fontVariant;return[n,a,r,e+"px",t].join(" ").trim()}function Ga(i){var e=i.attr(),t=e.x,r=e.y,n=e.text,a=e.fontSize,o=e.lineHeight,s=e.font;s||(s=ea(e));var u=ii(n,s),f;if(!u)f={x:t,y:r,width:0,height:0};else{var c=e.textAlign,l=e.textBaseline,m=Ma(n,a,o),w={x:t,y:r-m};c&&(c==="end"||c==="right"?w.x-=u:c==="center"&&(w.x-=u/2)),l&&(l==="top"?w.y+=m:l==="middle"&&(w.y+=m/2)),f={x:w.x,y:w.y,width:u,height:m}}return f}var $a=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/ig,vo=/[^\s\,]+/ig;function Du(i){var e=i||[];if((0,v.isArray)(e))return e;if((0,v.isString)(e))return e=e.match($a),(0,v.each)(e,function(t,r){if(t=t.match(vo),t[0].length>1){var n=t[0].charAt(0);t.splice(1,0,t[0].substr(1)),t[0]=n}(0,v.each)(t,function(a,o){isNaN(a)||(t[o]=+a)}),e[r]=t}),e}var oc=Du;function we(i,e,t,r){var n=[],a=!!r,o,s,u,f,c,l,m;if(a){u=r[0],f=r[1];for(var w=0,C=i.length;w<C;w+=1){var D=i[w];u=Un.min([0,0],u,D),f=Un.max([0,0],f,D)}}for(var w=0,U=i.length;w<U;w+=1){var D=i[w];if(w===0&&!t)m=D;else if(w===U-1&&!t)l=D,n.push(m),n.push(l);else{var $=[w?w-1:U-1,w-1][t?0:1];o=i[$],s=i[t?(w+1)%U:w+1];var tt=[0,0];tt=Un.sub(tt,s,o),tt=Un.scale(tt,tt,e);var it=Un.distance(D,o),ct=Un.distance(D,s),_t=it+ct;_t!==0&&(it/=_t,ct/=_t);var Bt=Un.scale([0,0],tt,-it),Pt=Un.scale([0,0],tt,ct);l=Un.add([0,0],D,Bt),c=Un.add([0,0],D,Pt),c=Un.min([0,0],c,Un.max([0,0],s,D)),c=Un.max([0,0],c,Un.min([0,0],s,D)),Bt=Un.sub([0,0],c,D),Bt=Un.scale([0,0],Bt,-it/ct),l=Un.add([0,0],D,Bt),l=Un.min([0,0],l,Un.max([0,0],o,D)),l=Un.max([0,0],l,Un.min([0,0],o,D)),Pt=Un.sub([0,0],D,l),Pt=Un.scale([0,0],Pt,ct/it),c=Un.add([0,0],D,Pt),a&&(l=Un.max([0,0],l,u),l=Un.min([0,0],l,f),c=Un.max([0,0],c,u),c=Un.min([0,0],c,f)),n.push(m),n.push(l),m=c}}return t&&n.push(n.shift()),n}function br(i,e,t){e===void 0&&(e=!1),t===void 0&&(t=[[0,0],[1,1]]);for(var r=!!e,n=[],a=0,o=i.length;a<o;a+=2)n.push([i[a],i[a+1]]);for(var s=we(n,.4,r,t),u=n.length,f=[],c,l,m,a=0;a<u-1;a+=1)c=s[a*2],l=s[a*2+1],m=n[a+1],f.push(["C",c[0],c[1],l[0],l[1],m[0],m[1]]);return r&&(c=s[u],l=s[u+1],m=n[0],f.push(["C",c[0],c[1],l[0],l[1],m[0],m[1]])),f}var pr=br;function On(i,e,t){var r=null,n=t;return e<n&&(n=e,r="add"),i<n&&(n=i,r="del"),{type:r,min:n}}var Ra=function(i,e){var t=i.length,r=e.length,n,a,o=0;if(t===0||r===0)return null;for(var s=[],u=0;u<=t;u++)s[u]=[],s[u][0]={min:u};for(var f=0;f<=r;f++)s[0][f]={min:f};for(var u=1;u<=t;u++){n=i[u-1];for(var f=1;f<=r;f++){a=e[f-1],isEqual(n,a)?o=0:o=1;var c=s[u-1][f].min+1,l=s[u][f-1].min+1,m=s[u-1][f-1].min+o;s[u][f]=On(c,l,m)}}return s};function ve(i,e){var t=Ra(i,e),r=i.length,n=e.length,a=[],o=1,s=1;if(t[r][n]!==r){for(var u=1;u<=r;u++){var f=t[u][u].min;s=u;for(var c=o;c<=n;c++)t[u][c].min<f&&(f=t[u][c].min,s=c);o=s,t[u][o].type&&a.push({index:u-1,type:t[u][o].type})}for(var u=a.length-1;u>=0;u--)o=a[u].index,a[u].type==="add"?i.splice(o,0,[].concat(i[o])):i.splice(o,1)}if(r=i.length,r<n)for(var u=0;u<n-r;u++)i[r-1][0]==="z"||i[r-1][0]==="Z"?i.splice(r-2,0,i[r-2]):i.push(i[r-1]);return i}var jt=`	
\v\f\r \xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029`,Fe=new RegExp("([a-z])["+jt+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+jt+"]*,?["+jt+"]*)+)","ig"),ir=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+jt+"]*,?["+jt+"]*","ig");function ur(i){if(!i)return null;if((0,v.isArray)(i))return i;var e={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},t=[];return String(i).replace(Fe,function(r,n,a){var o=[],s=n.toLowerCase();if(a.replace(ir,function(u,f){f&&o.push(+f)}),s==="m"&&o.length>2&&(t.push([n].concat(o.splice(0,2))),s="l",n=n==="m"?"l":"L"),s==="o"&&o.length===1&&t.push([n,o[0]]),s==="r")t.push([n].concat(o));else for(;o.length>=e[s]&&(t.push([n].concat(o.splice(0,e[s]))),!!e[s]););return""}),t}var ze=/[a-z]/;function Ge(i,e){return[e[0]+(e[0]-i[0]),e[1]+(e[1]-i[1])]}function je(i){var e=ur(i);if(!e||!e.length)return[["M",0,0]];for(var t=!1,r=0;r<e.length;r++){var n=e[r][0];if(ze.test(n)||["V","H","T","S"].indexOf(n)>=0){t=!0;break}}if(!t)return e;var a=[],o=0,s=0,u=0,f=0,c=0,l,m,w=e[0];(w[0]==="M"||w[0]==="m")&&(o=+w[1],s=+w[2],u=o,f=s,c++,a[0]=["M",o,s]);for(var r=c,C=e.length;r<C;r++){var D=e[r],U=a[r-1],$=[],n=D[0],tt=n.toUpperCase();if(n!==tt)switch($[0]=tt,tt){case"A":$[1]=D[1],$[2]=D[2],$[3]=D[3],$[4]=D[4],$[5]=D[5],$[6]=+D[6]+o,$[7]=+D[7]+s;break;case"V":$[1]=+D[1]+s;break;case"H":$[1]=+D[1]+o;break;case"M":u=+D[1]+o,f=+D[2]+s,$[1]=u,$[2]=f;break;default:for(var it=1,ct=D.length;it<ct;it++)$[it]=+D[it]+(it%2?o:s)}else $=e[r];switch(tt){case"Z":o=+u,s=+f;break;case"H":o=$[1],$=["L",o,s];break;case"V":s=$[1],$=["L",o,s];break;case"T":o=$[1],s=$[2];var _t=Ge([U[1],U[2]],[U[3],U[4]]);$=["Q",_t[0],_t[1],o,s];break;case"S":o=$[$.length-2],s=$[$.length-1];var Bt=U.length,Pt=Ge([U[Bt-4],U[Bt-3]],[U[Bt-2],U[Bt-1]]);$=["C",Pt[0],Pt[1],$[1],$[2],o,s];break;case"M":u=$[$.length-2],f=$[$.length-1];break;default:o=$[$.length-2],s=$[$.length-1]}a.push($)}return a}var de=Math.PI*2,Oe=function(i,e,t,r,n,a,o){var s=i.x,u=i.y;s*=e,u*=t;var f=r*s-n*u,c=n*s+r*u;return{x:f+a,y:c+o}},fe=function(i,e){var t=e===1.5707963267948966?.551915024494:e===-1.5707963267948966?-.551915024494:1.3333333333333333*Math.tan(e/4),r=Math.cos(i),n=Math.sin(i),a=Math.cos(i+e),o=Math.sin(i+e);return[{x:r-n*t,y:n+r*t},{x:a+o*t,y:o-a*t},{x:a,y:o}]},Je=function(i,e,t,r){var n=i*r-e*t<0?-1:1,a=i*t+e*r;return a>1&&(a=1),a<-1&&(a=-1),n*Math.acos(a)},hr=function(i,e,t,r,n,a,o,s,u,f,c,l){var m=Math.pow(n,2),w=Math.pow(a,2),C=Math.pow(c,2),D=Math.pow(l,2),U=m*w-m*D-w*C;U<0&&(U=0),U/=m*D+w*C,U=Math.sqrt(U)*(o===s?-1:1);var $=U*n/a*l,tt=U*-a/n*c,it=f*$-u*tt+(i+t)/2,ct=u*$+f*tt+(e+r)/2,_t=(c-$)/n,Bt=(l-tt)/a,Pt=(-c-$)/n,Qt=(-l-tt)/a,ye=Je(1,0,_t,Bt),ce=Je(_t,Bt,Pt,Qt);return s===0&&ce>0&&(ce-=de),s===1&&ce<0&&(ce+=de),[it,ct,ye,ce]},Nr=function(i){var e=i.px,t=i.py,r=i.cx,n=i.cy,a=i.rx,o=i.ry,s=i.xAxisRotation,u=s===void 0?0:s,f=i.largeArcFlag,c=f===void 0?0:f,l=i.sweepFlag,m=l===void 0?0:l,w=[];if(a===0||o===0)return[{x1:0,y1:0,x2:0,y2:0,x:r,y:n}];var C=Math.sin(u*de/360),D=Math.cos(u*de/360),U=D*(e-r)/2+C*(t-n)/2,$=-C*(e-r)/2+D*(t-n)/2;if(U===0&&$===0)return[{x1:0,y1:0,x2:0,y2:0,x:r,y:n}];a=Math.abs(a),o=Math.abs(o);var tt=Math.pow(U,2)/Math.pow(a,2)+Math.pow($,2)/Math.pow(o,2);tt>1&&(a*=Math.sqrt(tt),o*=Math.sqrt(tt));var it=hr(e,t,r,n,a,o,c,m,C,D,U,$),ct=it[0],_t=it[1],Bt=it[2],Pt=it[3],Qt=Math.abs(Pt)/(de/4);Math.abs(1-Qt)<1e-7&&(Qt=1);var ye=Math.max(Math.ceil(Qt),1);Pt/=ye;for(var ce=0;ce<ye;ce++)w.push(fe(Bt,Pt)),Bt+=Pt;return w.map(function(Ne){var $e=Oe(Ne[0],a,o,D,C,ct,_t),Rr=$e.x,rn=$e.y,Vr=Oe(Ne[1],a,o,D,C,ct,_t),Cr=Vr.x,Cn=Vr.y,_n=Oe(Ne[2],a,o,D,C,ct,_t),Tr=_n.x,jr=_n.y;return{x1:Rr,y1:rn,x2:Cr,y2:Cn,x:Tr,y:jr}})};function Fr(i,e,t,r,n,a,o,s,u){var f=Nr({px:i,py:e,cx:s,cy:u,rx:t,ry:r,xAxisRotation:n,largeArcFlag:a,sweepFlag:o});return f.reduce(function(c,l){var m=l.x1,w=l.y1,C=l.x2,D=l.y2,U=l.x,$=l.y;return c.push(m,w,C,D,U,$),c},[])}function Ar(i,e){"TQ".indexOf(i[0])<0&&(e.qx=null,e.qy=null);var t=i.slice(1),r=t[0],n=t[1];switch(i[0]){case"M":return e.x=r,e.y=n,i;case"A":return["C"].concat(arcToCubic.apply(0,[e.x1,e.y1].concat(i.slice(1))));case"Q":return e.qx=r,e.qy=n,["C"].concat(quadToCubic.apply(0,[e.x1,e.y1].concat(i.slice(1))));case"L":return["C"].concat(lineToCubic(e.x1,e.y1,i[1],i[2]));case"H":return["C"].concat(lineToCubic(e.x1,e.y1,i[1],e.y1));case"V":return["C"].concat(lineToCubic(e.x1,e.y1,e.x1,i[1]));case"Z":return["C"].concat(lineToCubic(e.x1,e.y1,e.x,e.y));default:}return i}function on(i,e){e===void 0&&(e=!1);for(var t=path2Absolute(i),r={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null},n=[],a="",o=t.length,s,u,f=[],c=0;c<o;c+=1)t[c]&&(a=t[c][0]),n[c]=a,t[c]=segmentToCubic(t[c],r),Zn(t,n,c),o=t.length,a==="Z"&&f.push(c),s=t[c],u=s.length,r.x1=+s[u-2],r.y1=+s[u-1],r.x2=+s[u-4]||r.x1,r.y2=+s[u-3]||r.y1;return e?[t,f]:t}function Zn(i,e,t){if(i[t].length>7){i[t].shift();for(var r=i[t],n=t;r.length;)e[t]="A",i.splice(n+=1,0,["C"].concat(r.splice(0,6)));i.splice(t,1)}}var Aa=function(i,e,t,r,n){var a=-3*e+9*t-9*r+3*n,o=i*a+6*e-12*t+6*r;return i*o-3*e+3*t},Bn=function(i,e,t,r,n,a,o,s,u){u===null&&(u=1),u=u>1?1:u<0?0:u;for(var f=u/2,c=12,l=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],m=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],w=0,C=0;C<c;C++){var D=f*l[C]+f,U=Aa(D,i,t,n,o),$=Aa(D,e,r,a,s),tt=U*U+$*$;w+=m[C]*Math.sqrt(tt)}return f*w},ia=function(i,e,t,r,n,a,o,s){for(var u=[],f=[[],[]],c,l,m,w,C=0;C<2;++C){if(C===0?(l=6*i-12*t+6*n,c=-3*i+9*t-9*n+3*o,m=3*t-3*i):(l=6*e-12*r+6*a,c=-3*e+9*r-9*a+3*s,m=3*r-3*e),Math.abs(c)<1e-12){if(Math.abs(l)<1e-12)continue;w=-m/l,w>0&&w<1&&u.push(w);continue}var D=l*l-4*m*c,U=Math.sqrt(D);if(!(D<0)){var $=(-l+U)/(2*c);$>0&&$<1&&u.push($);var tt=(-l-U)/(2*c);tt>0&&tt<1&&u.push(tt)}}for(var it=u.length,ct=it,_t;it--;)w=u[it],_t=1-w,f[0][it]=_t*_t*_t*i+3*_t*_t*w*t+3*_t*w*w*n+w*w*w*o,f[1][it]=_t*_t*_t*e+3*_t*_t*w*r+3*_t*w*w*a+w*w*w*s;return f[0][ct]=i,f[1][ct]=e,f[0][ct+1]=o,f[1][ct+1]=s,f[0].length=f[1].length=ct+2,{min:{x:Math.min.apply(0,f[0]),y:Math.min.apply(0,f[1])},max:{x:Math.max.apply(0,f[0]),y:Math.max.apply(0,f[1])}}},wa=function(i,e,t,r,n,a,o,s){if(!(Math.max(i,t)<Math.min(n,o)||Math.min(i,t)>Math.max(n,o)||Math.max(e,r)<Math.min(a,s)||Math.min(e,r)>Math.max(a,s))){var u=(i*r-e*t)*(n-o)-(i-t)*(n*s-a*o),f=(i*r-e*t)*(a-s)-(e-r)*(n*s-a*o),c=(i-t)*(a-s)-(e-r)*(n-o);if(c){var l=u/c,m=f/c,w=+l.toFixed(2),C=+m.toFixed(2);if(!(w<+Math.min(i,t).toFixed(2)||w>+Math.max(i,t).toFixed(2)||w<+Math.min(n,o).toFixed(2)||w>+Math.max(n,o).toFixed(2)||C<+Math.min(e,r).toFixed(2)||C>+Math.max(e,r).toFixed(2)||C<+Math.min(a,s).toFixed(2)||C>+Math.max(a,s).toFixed(2)))return{x:l,y:m}}}},za=function(i,e,t){return e>=i.x&&e<=i.x+i.width&&t>=i.y&&t<=i.y+i.height},Wi=function(i,e,t,r){return i===null&&(i=e=t=r=0),e===null&&(e=i.y,t=i.width,r=i.height,i=i.x),{x:i,y:e,width:t,w:t,height:r,h:r,x2:i+t,y2:e+r,cx:i+t/2,cy:e+r/2,r1:Math.min(t,r)/2,r2:Math.max(t,r)/2,r0:Math.sqrt(t*t+r*r)/2,path:rectPath(i,e,t,r),vb:[i,e,t,r].join(" ")}},Ls=function(i,e){return i=Wi(i),e=Wi(e),za(e,i.x,i.y)||za(e,i.x2,i.y)||za(e,i.x,i.y2)||za(e,i.x2,i.y2)||za(i,e.x,e.y)||za(i,e.x2,e.y)||za(i,e.x,e.y2)||za(i,e.x2,e.y2)||(i.x<e.x2&&i.x>e.x||e.x<i.x2&&e.x>i.x)&&(i.y<e.y2&&i.y>e.y||e.y<i.y2&&e.y>i.y)},fh=function(i,e,t,r,n,a,o,s){isArray(i)||(i=[i,e,t,r,n,a,o,s]);var u=ia.apply(null,i);return Wi(u.min.x,u.min.y,u.max.x-u.min.x,u.max.y-u.min.y)},qs=function(i,e,t,r,n,a,o,s,u){var f=1-u,c=Math.pow(f,3),l=Math.pow(f,2),m=u*u,w=m*u,C=c*i+l*3*u*t+f*3*u*u*n+w*o,D=c*e+l*3*u*r+f*3*u*u*a+w*s,U=i+2*u*(t-i)+m*(n-2*t+i),$=e+2*u*(r-e)+m*(a-2*r+e),tt=t+2*u*(n-t)+m*(o-2*n+t),it=r+2*u*(a-r)+m*(s-2*a+r),ct=f*i+u*t,_t=f*e+u*r,Bt=f*n+u*o,Pt=f*a+u*s,Qt=90-Math.atan2(U-tt,$-it)*180/Math.PI;return{x:C,y:D,m:{x:U,y:$},n:{x:tt,y:it},start:{x:ct,y:_t},end:{x:Bt,y:Pt},alpha:Qt}},Hh=function(i,e,t){var r=fh(i),n=fh(e);if(!Ls(r,n))return t?0:[];for(var a=Bn.apply(0,i),o=Bn.apply(0,e),s=~~(a/8),u=~~(o/8),f=[],c=[],l={},m=t?0:[],w=0;w<s+1;w++){var C=qs.apply(0,i.concat(w/s));f.push({x:C.x,y:C.y,t:w/s})}for(var w=0;w<u+1;w++){var C=qs.apply(0,e.concat(w/u));c.push({x:C.x,y:C.y,t:w/u})}for(var w=0;w<s;w++)for(var D=0;D<u;D++){var U=f[w],$=f[w+1],tt=c[D],it=c[D+1],ct=Math.abs($.x-U.x)<.001?"y":"x",_t=Math.abs(it.x-tt.x)<.001?"y":"x",Bt=wa(U.x,U.y,$.x,$.y,tt.x,tt.y,it.x,it.y);if(Bt){if(l[Bt.x.toFixed(4)]===Bt.y.toFixed(4))continue;l[Bt.x.toFixed(4)]=Bt.y.toFixed(4);var Pt=U.t+Math.abs((Bt[ct]-U[ct])/($[ct]-U[ct]))*($.t-U.t),Qt=tt.t+Math.abs((Bt[_t]-tt[_t])/(it[_t]-tt[_t]))*(it.t-tt.t);Pt>=0&&Pt<=1&&Qt>=0&&Qt<=1&&(t?m++:m.push({x:Bt.x,y:Bt.y,t1:Pt,t2:Qt}))}}return m},mu=function(i,e,t){i=path2Curve(i),e=path2Curve(e);for(var r,n,a,o,s,u,f,c,l,m,w=t?0:[],C=0,D=i.length;C<D;C++){var U=i[C];if(U[0]==="M")r=s=U[1],n=u=U[2];else{U[0]==="C"?(l=[r,n].concat(U.slice(1)),r=l[6],n=l[7]):(l=[r,n,r,n,s,u,s,u],r=s,n=u);for(var $=0,tt=e.length;$<tt;$++){var it=e[$];if(it[0]==="M")a=f=it[1],o=c=it[2];else{it[0]==="C"?(m=[a,o].concat(it.slice(1)),a=m[6],o=m[7]):(m=[a,o,a,o,f,c,f,c],a=f,o=c);var ct=Hh(l,m,t);if(t)w+=ct;else{for(var _t=0,Bt=ct.length;_t<Bt;_t++)ct[_t].segment1=C,ct[_t].segment2=$,ct[_t].bez1=l,ct[_t].bez2=m;w=w.concat(ct)}}}}}return w};function Pd(i,e){return mu(i,e)}function jh(i){return Math.sqrt(i[0]*i[0]+i[1]*i[1])}function Rd(i,e){return jh(i)*jh(e)?(i[0]*e[0]+i[1]*e[1])/(jh(i)*jh(e)):1}function Xv(i,e){return(i[0]*e[1]<i[1]*e[0]?-1:1)*Math.acos(Rd(i,e))}function Bd(i,e){return i[0]===e[0]&&i[1]===e[1]}function oy(i,e){var t=e[1],r=e[2],n=(0,v.mod)((0,v.toRadian)(e[3]),Math.PI*2),a=e[4],o=e[5],s=i[0],u=i[1],f=e[6],c=e[7],l=Math.cos(n)*(s-f)/2+Math.sin(n)*(u-c)/2,m=-1*Math.sin(n)*(s-f)/2+Math.cos(n)*(u-c)/2,w=l*l/(t*t)+m*m/(r*r);w>1&&(t*=Math.sqrt(w),r*=Math.sqrt(w));var C=t*t*(m*m)+r*r*(l*l),D=C?Math.sqrt((t*t*(r*r)-C)/C):1;a===o&&(D*=-1),isNaN(D)&&(D=0);var U=r?D*t*m/r:0,$=t?D*-r*l/t:0,tt=(s+f)/2+Math.cos(n)*U-Math.sin(n)*$,it=(u+c)/2+Math.sin(n)*U+Math.cos(n)*$,ct=[(l-U)/t,(m-$)/r],_t=[(-1*l-U)/t,(-1*m-$)/r],Bt=Xv([1,0],ct),Pt=Xv(ct,_t);return Rd(ct,_t)<=-1&&(Pt=Math.PI),Rd(ct,_t)>=1&&(Pt=0),o===0&&Pt>0&&(Pt=Pt-2*Math.PI),o===1&&Pt<0&&(Pt=Pt+2*Math.PI),{cx:tt,cy:it,rx:Bd(i,[f,c])?0:t,ry:Bd(i,[f,c])?0:r,startAngle:Bt,endAngle:Bt+Pt,xRotation:n,arcFlag:a,sweepFlag:o}}function Yv(i,e){return[e[0]+(e[0]-i[0]),e[1]+(e[1]-i[1])]}function Wv(i){i=oc(i);for(var e=[],t=null,r=null,n=null,a=0,o=i.length,s=0;s<o;s++){var u=i[s];r=i[s+1];var f=u[0],c={command:f,prePoint:t,params:u,startTangent:null,endTangent:null};switch(f){case"M":n=[u[1],u[2]],a=s;break;case"A":var l=oy(t,u);c.arcParams=l;break;default:break}if(f==="Z")t=n,r=i[a+1];else{var m=u.length;t=[u[m-2],u[m-1]]}r&&r[0]==="Z"&&(r=i[a],e[a]&&(e[a].prePoint=t)),c.currentPoint=t,e[a]&&Bd(t,e[a].currentPoint)&&(e[a].prePoint=c.prePoint);var w=r?[r[r.length-2],r[r.length-1]]:null;c.nextPoint=w;var C=c.prePoint;if(["L","H","V"].includes(f))c.startTangent=[C[0]-t[0],C[1]-t[1]],c.endTangent=[t[0]-C[0],t[1]-C[1]];else if(f==="Q"){var D=[u[1],u[2]];c.startTangent=[C[0]-D[0],C[1]-D[1]],c.endTangent=[t[0]-D[0],t[1]-D[1]]}else if(f==="T"){var U=e[s-1],D=Yv(U.currentPoint,C);U.command==="Q"?(c.command="Q",c.startTangent=[C[0]-D[0],C[1]-D[1]],c.endTangent=[t[0]-D[0],t[1]-D[1]]):(c.command="TL",c.startTangent=[C[0]-t[0],C[1]-t[1]],c.endTangent=[t[0]-C[0],t[1]-C[1]])}else if(f==="C"){var $=[u[1],u[2]],tt=[u[3],u[4]];c.startTangent=[C[0]-$[0],C[1]-$[1]],c.endTangent=[t[0]-tt[0],t[1]-tt[1]],c.startTangent[0]===0&&c.startTangent[1]===0&&(c.startTangent=[$[0]-tt[0],$[1]-tt[1]]),c.endTangent[0]===0&&c.endTangent[1]===0&&(c.endTangent=[tt[0]-$[0],tt[1]-$[1]])}else if(f==="S"){var U=e[s-1],$=Yv(U.currentPoint,C),tt=[u[1],u[2]];U.command==="C"?(c.command="C",c.startTangent=[C[0]-$[0],C[1]-$[1]],c.endTangent=[t[0]-tt[0],t[1]-tt[1]]):(c.command="SQ",c.startTangent=[C[0]-tt[0],C[1]-tt[1]],c.endTangent=[t[0]-tt[0],t[1]-tt[1]])}else if(f==="A"){var it=.001,ct=c.arcParams||{},_t=ct.cx,Bt=_t===void 0?0:_t,Pt=ct.cy,Qt=Pt===void 0?0:Pt,ye=ct.rx,ce=ye===void 0?0:ye,Ne=ct.ry,$e=Ne===void 0?0:Ne,Rr=ct.sweepFlag,rn=Rr===void 0?0:Rr,Vr=ct.startAngle,Cr=Vr===void 0?0:Vr,Cn=ct.endAngle,_n=Cn===void 0?0:Cn;rn===0&&(it*=-1);var Tr=ce*Math.cos(Cr-it)+Bt,jr=$e*Math.sin(Cr-it)+Qt;c.startTangent=[Tr-n[0],jr-n[1]];var dn=ce*Math.cos(Cr+_n+it)+Bt,vn=$e*Math.sin(Cr+_n-it)+Qt;c.endTangent=[C[0]-dn,C[1]-vn]}e.push(c)}return e}function Vv(i){for(var e=[],t=i.length,r=0;r<t-1;r++){var n=i[r],a=i[r+1];e.push({from:{x:n[0],y:n[1]},to:{x:a[0],y:a[1]}})}if(e.length>1){var o=i[0],s=i[t-1];e.push({from:{x:s[0],y:s[1]},to:{x:o[0],y:o[1]}})}return e}function sy(i,e){var t=!1;return each(i,function(r){if(getLineIntersect(r.from,r.to,e.from,e.to))return t=!0,!1}),t}function Hv(i){var e=i.map(function(r){return r[0]}),t=i.map(function(r){return r[1]});return{minX:Math.min.apply(null,e),maxX:Math.max.apply(null,e),minY:Math.min.apply(null,t),maxY:Math.max.apply(null,t)}}function uy(i,e){return!(e.minX>i.maxX||e.maxX<i.minX||e.minY>i.maxY||e.maxY<i.minY)}function k2(i,e){if(i.length<2||e.length<2)return!1;var t=Hv(i),r=Hv(e);if(!uy(t,r))return!1;var n=!1;if(each(e,function(u){if(isPointInPolygon(i,u[0],u[1]))return n=!0,!1}),n||(each(i,function(u){if(isPointInPolygon(e,u[0],u[1]))return n=!0,!1}),n))return!0;var a=Vv(i),o=Vv(e),s=!1;return each(o,function(u){if(sy(a,u))return s=!0,!1}),s}function fy(i,e){for(var t=[],r=[],n=[],a=0;a<i.length;a++){var o=i[a],s=o.currentPoint,u=o.params,f=o.prePoint,c=void 0;switch(o.command){case"Q":c=X.box(f[0],f[1],u[1],u[2],u[3],u[4]);break;case"C":c=Ft.box(f[0],f[1],u[1],u[2],u[3],u[4],u[5],u[6]);break;case"A":var l=o.arcParams;c=Xn.box(l.cx,l.cy,l.rx,l.ry,l.xRotation,l.startAngle,l.endAngle);break;default:t.push(s[0]),r.push(s[1]);break}c&&(o.box=c,t.push(c.x,c.x+c.width),r.push(c.y,c.y+c.height)),e&&(o.command==="L"||o.command==="M")&&o.prePoint&&o.nextPoint&&n.push(o)}t=t.filter(function($){return!Number.isNaN($)&&$!==1/0&&$!==-1/0}),r=r.filter(function($){return!Number.isNaN($)&&$!==1/0&&$!==-1/0});var m=(0,v.min)(t),w=(0,v.min)(r),C=(0,v.max)(t),D=(0,v.max)(r);if(n.length===0)return{x:m,y:w,width:C-m,height:D-w};for(var a=0;a<n.length;a++){var o=n[a],s=o.currentPoint,U=void 0;s[0]===m?(U=Zh(o,e),m=m-U.xExtra):s[0]===C&&(U=Zh(o,e),C=C+U.xExtra),s[1]===w?(U=Zh(o,e),w=w-U.yExtra):s[1]===D&&(U=Zh(o,e),D=D+U.yExtra)}return{x:m,y:w,width:C-m,height:D-w}}function Zh(i,e){var t=i.prePoint,r=i.currentPoint,n=i.nextPoint,a=Math.pow(r[0]-t[0],2)+Math.pow(r[1]-t[1],2),o=Math.pow(r[0]-n[0],2)+Math.pow(r[1]-n[1],2),s=Math.pow(t[0]-n[0],2)+Math.pow(t[1]-n[1],2),u=Math.acos((a+o-s)/(2*Math.sqrt(a)*Math.sqrt(o)));if(!u||Math.sin(u)===0||(0,v.isNumberEqual)(u,0))return{xExtra:0,yExtra:0};var f=Math.abs(Math.atan2(n[1]-r[1],n[0]-r[0])),c=Math.abs(Math.atan2(n[0]-r[0],n[1]-r[1]));f=f>Math.PI/2?Math.PI-f:f,c=c>Math.PI/2?Math.PI-c:c;var l={xExtra:Math.cos(u/2-f)*(e/2*(1/Math.sin(u/2)))-e/2||0,yExtra:Math.cos(c-u/2)*(e/2*(1/Math.sin(u/2)))-e/2||0};return l}function cy(i){var e=i.attr(),t=e.path,r=e.stroke,n=r?e.lineWidth:0,a=i.get("segments")||Wv(t),o=fy(a,n),s=o.x,u=o.y,f=o.width,c=o.height,l={minX:s,minY:u,maxX:s+f,maxY:u+c};return l=Ti(i,l),{x:l.minX,y:l.minY,width:l.maxX-l.minX,height:l.maxY-l.minY}}function ly(i){var e=i.attr(),t=e.x1,r=e.y1,n=e.x2,a=e.y2,o=Math.min(t,n),s=Math.max(t,n),u=Math.min(r,a),f=Math.max(r,a),c={minX:o,maxX:s,minY:u,maxY:f};return c=Ti(i,c),{x:c.minX,y:c.minY,width:c.maxX-c.minX,height:c.maxY-c.minY}}function hy(i){var e=i.attr(),t=e.x,r=e.y,n=e.rx,a=e.ry;return{x:t-n,y:r-a,width:n*2,height:a*2}}Zs("rect",ic),Zs("image",ic),Zs("circle",mt),Zs("marker",mt),Zs("polyline",Yi),Zs("polygon",bo),Zs("text",Ga),Zs("path",cy),Zs("line",ly),Zs("ellipse",hy);var L2="0.5.11",dy=function(i){(0,g.__extends)(e,i);function e(t,r){var n=i.call(this,t,r)||this;return n.item=r.item,n.canvasX=r.canvasX,n.canvasY=r.canvasY,n.wheelDelta=r.wheelDelta,n.detail=r.detail,n}return e}(zf),Fd=function(e){return"".concat(e,"-").concat(Math.random()).concat(Date.now())},Gd=function(e){if((0,v.isArray)(e))switch(e.length){case 4:return e;case 3:return e.push(e[1]),e;case 2:return e.concat(e);case 1:return[e[0],e[0],e[0],e[0]];default:return[0,0,0,0]}if((0,v.isNumber)(e))return[e,e,e,e];if((0,v.isString)(e)){var t=parseInt(e,10);return[t,t,t,t]}return[0,0,0,0]},vy=function(e){var t=new dy(e.type,e);return t.clientX=e.clientX,t.clientY=e.clientY,t.x=e.x,t.y=e.y,t.target=e.target,t.currentTarget=e.currentTarget,t.bubbles=!0,t.item=e.item,t},py=function(e){if(!e)return!1;for(var t=9,r=[1,0,0,0,1,0,0,0,1],n=0;n<t;n++)if(e[n]!==r[n])return!0;return!1},Tf=function(e){return Number.isNaN(Number(e))},jv=function(e){for(var t=1/0,r=-1/0,n=1/0,a=-1/0,o=0;o<e.length;o++){var s=e[o],u=s.getBBox(),f=u.minX,c=u.minY,l=u.maxX,m=u.maxY;f<t&&(t=f),c<n&&(n=c),l>r&&(r=l),m>a&&(a=m)}var w=Math.floor(t),C=Math.floor(n),D=Math.ceil(r)-Math.floor(t),U=Math.ceil(a)-Math.floor(n);return{x:w,y:C,width:D,height:U,minX:t,minY:n,maxX:r,maxY:a}},gy=function(e,t,r,n,a){t===void 0&&(t=15),r===void 0&&(r="quadratic"),n===void 0&&(n=void 0),a===void 0&&(a=void 0);for(var o=e.length,s=t*2,u=["top","top-right","right","bottom-right","bottom","bottom-left","left","top-left"],f={},c=[],l={},m=0;m<o;m++){var w=e[m],C=w.source,D=w.target,U="".concat(C,"-").concat(D);if(!c[m]){f[U]||(f[U]=[]),c[m]=!0,f[U].push(w);for(var $=0;$<o;$++)if(m!==$){var tt=e[$],it=tt.source,ct=tt.target;c[$]||(C===ct&&D===it?(f[U].push(tt),c[$]=!0,l["".concat(it,"|").concat(ct,"|").concat(f[U].length-1)]=!0):C===it&&D===ct&&(f[U].push(tt),c[$]=!0))}}}for(var _t in f)for(var Bt=f[_t],Pt=Bt.length,Qt=0;Qt<Pt;Qt++){var ye=Bt[Qt];if(ye.source===ye.target){a&&(ye.type=a),ye.loopCfg={position:u[Qt%8],dist:Math.floor(Qt/8)*20+50};continue}if(Pt===1&&n&&ye.source!==ye.target){ye.type=n;continue}ye.type=r;var ce=(Qt%2===0?1:-1)*(l["".concat(ye.source,"|").concat(ye.target,"|").concat(Qt)]?-1:1);Pt%2===1?ye.curveOffset=ce*Math.ceil(Qt/2)*s:ye.curveOffset=ce*(Math.floor(Qt/2)*s+t)}return e},Zv=et(31278),yy=function(){function i(e){this.destroyed=!1,this.graph=e,this.destroyed=!1}return i.prototype.getViewCenter=function(){var e=this.getFormatPadding(),t=this.graph,r=this.graph.get("width"),n=t.get("height");return{x:(r-e[1]-e[3])/2+e[3],y:(n-e[0]-e[2])/2+e[0]}},i.prototype.fitCenter=function(e,t){var r=this.graph,n=r.get("group"),a,o=r.getNodes();if(o.length>r.get("optimizeThreshold")){var s=1/0,u=1/0,f=-1/0,c=-1/0;o.forEach(function(ct){var _t=ct.getModel(),Bt=_t.x,Pt=_t.y;s>Bt&&(s=Bt),u>Pt&&(u=Pt),f<Bt&&(f=Bt),c<Pt&&(c=Pt)});var l=n.getMatrix()||[1,0,0,0,1,0,0,0,1],m=Zi({x:s,y:u},l),w=m.x,C=m.y,D=Zi({x:f,y:c},l),U=D.x,$=D.y;a={minX:w,maxX:U,minY:C,maxY:$,width:U-w,height:$-C,x:w,y:C}}else a=n.getCanvasBBox();if(!(a.width===0||a.height===0)){var tt=this.getViewCenter(),it={x:a.x+a.width/2,y:a.y+a.height/2};r.translate(tt.x-it.x,tt.y-it.y,e,t)}},i.prototype.animatedFitView=function(e,t,r,n,a,o,s,u){var f=this.graph;r=r||{duration:500,easing:"easeCubic"};var c=[1,0,0,0,1,0,0,0,1],l=n.x+a.x-o.x-n.minX,m=n.y+a.y-o.y-n.minY;if(!(Tf(l)||Tf(m))){var w=(0,Zv.vs)(c,[["t",l,m]]);if(!u){var C=ys({animateCfg:r,callback:function(){f.emit("viewportchange",{action:"translate",matrix:w})}});e.animate(function(ct){return{matrix:Pa(t,w,ct)}},C);return}var D=f.get("minZoom"),U=f.get("maxZoom"),$=s;D&&s<D?($=D,console.warn("fitview failed, ratio out of range, ratio: %f",s,"graph minzoom has been used instead")):U&&s>U&&($=U,console.warn("fitview failed, ratio out of range, ratio: %f",s,"graph maxzoom has been used instead"));var tt=(0,Zv.vs)(w,[["t",-a.x,-a.y],["s",$,$],["t",a.x,a.y]]),it=ys({animateCfg:r,callback:function(){e.setMatrix(tt),f.emit("viewportchange",{action:"translate",matrix:w}),f.emit("viewportchange",{action:"zoom",matrix:tt})}});e.stopAnimate(),e.setMatrix(t),e.animate(function(ct){return{matrix:Pa(t,tt,ct)}},it)}},i.prototype.fitView=function(e,t){var r=this.graph,n=this.getFormatPadding(),a=r.get("width"),o=r.get("height"),s=r.get("group"),u=s.getMatrix()||[1,0,0,0,1,0,0,0,1];s.resetMatrix();var f,c=r.getNodes();if(c.length>r.get("optimizeThreshold")){var l=1/0,m=1/0,w=-1/0,C=-1/0;c.forEach(function(Bt){var Pt=Bt.getModel(),Qt=Pt.x,ye=Pt.y;l>Qt&&(l=Qt),m>ye&&(m=ye),w<Qt&&(w=Qt),C<ye&&(C=ye)}),f={minX:l,maxX:w,minY:m,maxY:C,width:w-l,height:C-m,x:l,y:m}}else f=s.getCanvasBBox();if(!(f.width===0||f.height===0)){var D=this.getViewCenter(),U={x:f.x+f.width/2,y:f.y+f.height/2},$=(a-n[1]-n[3])/f.width,tt=(o-n[0]-n[2])/f.height,it=$;if($>tt&&(it=tt),e)this.animatedFitView(s,u,t,f,D,U,it,!0);else{var ct=D.x-U.x,_t=D.y-U.y;if(Tf(ct)||Tf(_t))return;r.translate(ct,_t),r.zoom(it,D)||console.warn("zoom failed, ratio out of range, ratio: %f",it)}}},i.prototype.fitViewByRules=function(e,t,r){var n=e.onlyOutOfViewPort,a=n===void 0?!1:n,o=e.direction,s=o===void 0?"both":o,u=e.ratioRule,f=u===void 0?"min":u,c=this.graph,l=this.getFormatPadding(),m=c.get("width"),w=c.get("height"),C=c.get("group"),D=C.getMatrix()||[1,0,0,0,1,0,0,0,1];C.resetMatrix();var U,$=c.getNodes();if($.length>c.get("optimizeThreshold")){var tt=1/0,it=1/0,ct=-1/0,_t=-1/0;$.forEach(function(rn){var Vr=rn.getModel(),Cr=Vr.x,Cn=Vr.y;tt>Cr&&(tt=Cr),it>Cn&&(it=Cn),ct<Cr&&(ct=Cr),_t<Cn&&(_t=Cn)}),U={minX:tt,maxX:ct,minY:it,maxY:_t,width:ct-tt,height:_t-it,x:tt,y:it}}else U=C.getCanvasBBox();if(!(U.width===0||U.height===0)){var Bt=this.getViewCenter(),Pt={x:U.x+U.width/2,y:U.y+U.height/2},Qt=(m-l[1]-l[3])/U.width,ye=(w-l[0]-l[2])/U.height,ce;if(s==="x"?ce=Qt:s==="y"?ce=ye:ce=f==="max"?Math.max(Qt,ye):Math.min(Qt,ye),a&&(ce=ce<1?ce:1),t)this.animatedFitView(C,D,r,U,Bt,Pt,ce,!0);else{var Ne=c.getZoom(),$e=Ne*ce,Rr=c.get("minZoom");$e<Rr&&($e=Rr,console.warn("fitview failed, ratio out of range, ratio: %f",ce,"graph minzoom has been used instead")),c.translate(Bt.x-Pt.x,Bt.y-Pt.y),c.zoomTo($e,Bt)}}},i.prototype.getFormatPadding=function(){var e=this.graph.get("fitViewPadding");return Gd(e)},i.prototype.focusPoint=function(e,t,r){var n=this,a=this.getViewCenter(),o=this.getPointByCanvas(a.x,a.y),s=this.graph.get("group").getMatrix();if(s||(s=[1,0,0,0,1,0,0,0,1]),t){var u=(o.x-e.x)*s[0],f=(o.y-e.y)*s[4],c=0,l=0,m=0,w=0;this.graph.get("canvas").animate(function(C){m=u*C,w=f*C,n.graph.translate(m-c,w-l),c=m,l=w},(0,g.__assign)({},r))}else this.graph.translate((o.x-e.x)*s[0],(o.y-e.y)*s[4])},i.prototype.getPointByCanvas=function(e,t){var r=this.graph.get("group").getMatrix();r||(r=[1,0,0,0,1,0,0,0,1]);var n=bi({x:e,y:t},r);return n},i.prototype.getPointByClient=function(e,t){var r=this.graph.get("canvas"),n=r.getPointByClient(e,t);return this.getPointByCanvas(n.x,n.y)},i.prototype.getClientByPoint=function(e,t){var r=this.graph.get("canvas"),n=this.getCanvasByPoint(e,t),a=r.getClientByPoint(n.x,n.y);return{x:a.x,y:a.y}},i.prototype.getCanvasByPoint=function(e,t){var r=this.graph.get("group").getMatrix();return r||(r=[1,0,0,0,1,0,0,0,1]),Zi({x:e,y:t},r)},i.prototype.focus=function(e,t,r){if((0,v.isString)(e)&&(e=this.graph.findById(e)),e){var n=0,a=0;if(e.getType&&e.getType()==="edge"){var o=e.getSource().get("group").getMatrix(),s=e.getTarget().get("group").getMatrix();o&&s?(n=(o[6]+s[6])/2,a=(o[7]+s[7])/2):(o||s)&&(n=o?o[6]:s[6],a=o?o[7]:s[7])}else{var u=e.get("group"),f=u.getMatrix();f||(f=[1,0,0,0,1,0,0,0,1]),n=f[6],a=f[7]}this.focusPoint({x:n,y:a},t,r)}},i.prototype.focusItems=function(e,t,r,n){if(e.length){var a=this.graph,o=this.getFormatPadding(),s=a.get("width"),u=a.get("height"),f=a.get("group"),c=f.getMatrix()||[1,0,0,0,1,0,0,0,1];f.resetMatrix();for(var l={x:0,y:0,minX:Number.MAX_SAFE_INTEGER,minY:Number.MAX_SAFE_INTEGER,maxX:Number.MIN_SAFE_INTEGER,maxY:Number.MIN_SAFE_INTEGER,width:0,height:0},m=0,w=e;m<w.length;m++){var C=w[m],D=C.getBBox();D.minX<l.minX&&(l.minX=D.minX),D.minY<l.minY&&(l.minY=D.minY),D.maxX>l.maxX&&(l.maxX=D.maxX),D.maxY>l.maxY&&(l.maxY=D.maxY)}if(l.x=l.minX,l.y=l.minY,l.width=l.maxX-l.minX,l.height=l.maxY-l.minY,!(l.width===0||l.height===0)){var U=this.getViewCenter(),$={x:l.x+l.width/2,y:l.y+l.height/2},tt=(s-o[1]-o[3])/l.width,it=(u-o[0]-o[2])/l.height,ct=tt;tt>it&&(ct=it),r?this.animatedFitView(f,c,n,l,U,$,ct,t):(a.translate(U.x-$.x,U.y-$.y),t&&!a.zoom(ct,U)&&console.warn("zoom failed, ratio out of range, ratio: %f",ct))}}},i.prototype.changeSize=function(e,t){var r=this.graph;if(!(0,v.isNumber)(e)||!(0,v.isNumber)(t))throw Error("invalid canvas width & height, please make sure width & height type is number");r.set({width:e,height:t});var n=r.get("canvas");n.changeSize(e,t);var a=r.get("plugins");a.forEach(function(o){o.get("gridContainer")&&o.positionInit()})},i.prototype.destroy=function(){this.graph=null,this.destroyed=!1},i}(),my=yy;function zd(i){"@babel/helpers - typeof";return zd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zd(i)}function qv(i){if(typeof i!="string")return i;var e=function(Pt){if(typeof Pt!="string")return Pt;try{return JSON.parse(Pt.trim())}catch(Qt){return Pt.trim()}},t=e(i);if(typeof t!="string")return t;for(var r=function(Pt){return Pt[Pt.length-1]},n=i.trim(),a=[],o=[],s=function(){for(var Pt=[],Qt=0;Qt<arguments.length;Qt++)Pt[Qt]=arguments[Qt];return Pt.some(function(ye){return r(o)===ye})},u=function(){return r(a)},f=null,c=0,l="";c<n.length;){var m=n[c],w=s('"',"'");if(!w&&!m.trim()){c+=1;continue}var C=n[c-1]==="\\",D=s("}"),U=s("]"),$=s(","),tt=u();if(w)if(r(o)===m&&!C){o.pop();var it=e(l);tt.push(it),f=it,l=""}else l+=m;else if(U&&m===",")l&&(tt.push(e(l)),l="");else if(D&&m===":")o.push(","),l&&(tt.push(l),l="");else if($&&m===",")l&&(tt.push(e(l)),l=""),o.pop();else if(m==="}"&&(D||$)){l&&(tt.push(e(l)),l=""),$&&o.pop();for(var ct={},_t=1;_t<tt.length;_t+=2)ct[tt[_t-1]]=tt[_t];a.pop(),a.length&&r(a).push(ct),o.pop(),f=ct}else m==="]"&&U?(l&&(tt.push(e(l)),l=""),a.pop(),a.length&&r(a).push(tt),o.pop(),f=tt):m==="{"?(a.push([]),o.push("}")):m==="["?(a.push([]),o.push("]")):m==='"'?o.push('"'):m==="'"?o.push("'"):l+=m;c+=1}return f||l}var by=function(e){return e.split("-").reduce(function(t,r){return t+r.charAt(0).toUpperCase()+r.slice(1)})},xy=function(e){return function(t){for(var r=e.length,n=[],a=0,o="";a<r;)if(e[a]==="{"&&e[a+1]==="{")n.push(o),o="",a+=2;else if(e[a]==="}"&&e[a+1]==="}"){if(n.length){var s=n.pop();o=(0,v.get)(t,o,s.endsWith("=")?'"{'.concat(o,'}"'):o),n.push(s+o)}a+=2,o=""}else o+=e[a],a+=1;return n.push(o),n.map(function(u,f){return n[f-1]&&n[f-1].endsWith("=")?'"{'.concat(u,'}"'):u}).join("")}};function $v(i,e){var t={},r=i.getAttributeNames&&i.getAttributeNames()||[],n=i.children&&Array.from(i.children).map(function(s){return $v(s,e)}),a={},o=i.tagName?i.tagName.toLowerCase():"group";return o==="text"&&(t.text=i.innerText),a.type=o,o==="img"&&(a.type="image"),Array.from(r).forEach(function(s){var u=by(s),f=i.getAttribute(s);try{if(u==="style"||u==="attrs"){var c=qv(f);t=(0,g.__assign)((0,g.__assign)({},t),c)}else a[u]=qv(f)}catch(l){if(u==="style")throw l;a[u]=f}}),a.attrs=t,e&&e.style&&a.name&&zd(e.style[a.name])==="object"&&(a.attrs=(0,g.__assign)((0,g.__assign)({},a.attrs),e.style[a.name])),e&&e.style&&a.keyshape&&(a.attrs=(0,g.__assign)((0,g.__assign)({},a.attrs),e.style)),n.length&&(a.children=n),a}function wy(i,e,t){var r=i.attrs,n=r===void 0?{}:r,a={x:e.x||0,y:e.y||0,width:t.width||0,height:t.height||0},o,s;switch(i.type){case"maker":case"circle":n.r&&(s=2*n.r,o=2*n.r);break;case"text":n.text&&(s=Xu(n.text,n.fontSize||12)[0],o=16,a.y+=o,a.height=o,a.width=s,i.attrs=(0,g.__assign)({fontSize:12,fill:"#000"},n));break;default:n.width&&(s=n.width),n.height&&(o=n.height)}return o>=0&&(a.height=o),s>=0&&(a.width=s),n.marginTop&&(a.y+=n.marginTop),n.marginLeft&&(a.x+=n.marginLeft),a}function Kv(i,e){var t;e===void 0&&(e={x:0,y:0});var r=(0,g.__assign)({x:0,y:0,width:0,height:0},e);if(!((t=i.children)===null||t===void 0)&&t.length){var n=i.attrs,a=n===void 0?{}:n,o=a.marginTop,s=(0,g.__assign)({},e);o&&(s.y+=o);for(var u=0;u<i.children.length;u++){i.children[u].attrs.key="".concat(a.key||"root"," -").concat(u," ");var f=Kv(i.children[u],s);if(f.bbox){var c=f.bbox;f.attrs.next==="inline"?s.x+=f.bbox.width:s.y+=f.bbox.height,c.width+c.x>r.width&&(r.width=c.width+c.x),c.height+c.y>r.height&&(r.height=c.height+c.y)}}}return i.bbox=wy(i,e,r),i.attrs=(0,g.__assign)((0,g.__assign)({},i.attrs),i.bbox),i}function Qv(i,e){var t,r,n,a,o=(i||{}).type,s=((e==null?void 0:e.attrs)||{}).key;if(s&&i&&(i.attrs.key=s),!i&&e)return{action:"delete",val:e,type:o,key:s};if(i&&!e)return{action:"add",val:i,type:o};if(!i&&!e)return{action:"same",type:o};var u=[];if(((t=i.children)===null||t===void 0?void 0:t.length)>0||((r=e.children)===null||r===void 0?void 0:r.length)>0)for(var f=Math.max((n=i.children)===null||n===void 0?void 0:n.length,(a=e.children)===null||a===void 0?void 0:a.length),c=e.children||[],l=i.children||[],m=0;m<f;m+=1)u.push(Qv(l[m],c[m]));var w=Object.keys(e.attrs),C=Object.keys(i.attrs);return e.type!==i.type?{action:"restructure",nowTarget:i,formerTarget:e,key:s,children:u}:w.filter(function(D){return D!=="children"}).some(function(D){return i.attrs[D]!==e.attrs[D]||!C.includes(D)})?{action:"change",val:i,children:u,type:o,key:s}:{action:"same",children:u,type:o,key:s}}function Jv(i){var e={},t=function(n){var a=typeof i=="function"?i(n):i,o=xy(a)(n),s=document.createElement("div");s.innerHTML=o;var u=s.children[0],f=Kv($v(u,n));return s.remove(),f};return{draw:function(n,a){var o=t(n),s=a,u=function f(c){var l=c.attrs,m=l===void 0?{}:l,w=c.bbox,C=c.type,D=c.children,U=(0,g.__rest)(c,["attrs","bbox","type","children"]);if(c.type!=="group"){var $=a.addShape(c.type,(0,g.__assign)({attrs:m,origin:{bbox:w,type:C,children:D}},U));c.keyshape&&(s=$)}c.children&&c.children.forEach(function(tt){return f(tt)})};return u(o),e[n.id]=[o],s},update:function(n,a){e[n.id]||(e[n.id]=[]);var o=a.getContainer(),s=o.get("children"),u=t(n),f=e[n.id].pop(),c=Qv(u,f),l=function C(D){var U;D.type!=="group"&&o.addShape(D.type,{attrs:D.attrs}),!((U=D.children)===null||U===void 0)&&U.length&&D.children.map(function($){return C($)})},m=function C(D){var U,$=s.find(function(tt){return tt.attrs.key===D.attrs.key});$&&o.removeChild($),!((U=D.children)===null||U===void 0)&&U.length&&D.children.map(function(tt){return C(tt)})},w=function C(D){var U=D.key;if(D.type!=="group"){var $=s.find(function(it){return it.attrs.key===U});switch(D.action){case"change":if($){var tt=D.val.keyshape?a.getOriginStyle():{};$.attr((0,g.__assign)((0,g.__assign)({},tt),D.val.attrs))}break;case"add":l(D.val);break;case"delete":m(D.val);break;case"restructure":m(D.formerTarget),l(D.nowTarget);break;default:break}}D.children&&D.children.forEach(function(it){return C(it)})};w(c),e[n.id].push(u)},getAnchorPoints:function(){return[[0,.5],[1,.5],[.5,1],[.5,0]]}}}var Ud={};function tp(i){return Ud[i]||(Ud[i]=(0,v.upperFirst)(i)),Ud[i]}var Ey={defaultShapeType:"defaultType",className:null,getShape:function(e){var t=this,r=t[e]||t[t.defaultShapeType]||t["simple-circle"];return r},draw:function(e,t,r){var n=this.getShape(e);r.shapeMap={};var a=n.draw(t,r);return n.afterDraw&&n.afterDraw(t,r,a),a},baseUpdate:function(e,t,r,n){var a,o,s=this.getShape(e);s.update&&(s.mergeStyle=(a=s.getOptions)===null||a===void 0?void 0:a.call(s,t,n),(o=s.update)===null||o===void 0||o.call(s,t,r,n)),s.afterUpdate&&s.afterUpdate(t,r)},setState:function(e,t,r,n){var a=this.getShape(e);a.setState(t,r,n)},shouldUpdate:function(e){var t=this.getShape(e);return!!t.update},getControlPoints:function(e,t){var r=this.getShape(e);return r.getControlPoints(t)},getAnchorPoints:function(e,t){var r=this.getShape(e);return r.getAnchorPoints(t)}},Xd={options:{},draw:function(e,t){return this.drawShape(e,t)},drawShape:function(){},afterDraw:function(){},afterUpdate:function(){},setState:function(){},getControlPoints:function(e){return e.controlPoints},getAnchorPoints:function(e){var t=this.options.anchorPoints,r=e.anchorPoints||t;return r}},qh=function(){function i(){}return i.registerFactory=function(e,t){var r=tp(e),n=Ey,a=(0,g.__assign)((0,g.__assign)({},n),t);return i[r]=a,a.className=r,a},i.getFactory=function(e){var t=tp(e);return i[t]},i.registerNode=function(e,t,r){var n=i.Node,a;if(typeof t=="string"||typeof t=="function"){var o=Jv(t);a=(0,g.__assign)((0,g.__assign)({},n.getShape("single-node")),o)}else if(t.jsx){var s=t.jsx,o=Jv(s);a=(0,g.__assign)((0,g.__assign)((0,g.__assign)({},n.getShape("single-node")),o),t)}else{n.getShape(r);var u=r?n.getShape(r):Xd;a=(0,g.__assign)((0,g.__assign)({},u),t)}return a.type=e,a.itemType="node",n[e]=a,a},i.registerEdge=function(e,t,r){var n=i.Edge,a=r?n.getShape(r):Xd,o=(0,g.__assign)((0,g.__assign)({},a),t);return o.type=e,o.itemType="edge",n[e]=o,o},i.registerCombo=function(e,t,r){var n=i.Combo,a=r?n.getShape(r):Xd,o=(0,g.__assign)((0,g.__assign)({},a),t);return o.type=e,o.itemType="combo",n[e]=o,o},i}(),_s=qh;qh.registerFactory("node",{defaultShapeType:"circle"}),qh.registerFactory("edge",{defaultShapeType:"line"}),qh.registerFactory("combo",{defaultShapeType:"circle"});var Yd="bboxCache",Wd="bboxCanvasCache",N2=null,_y=function(){function i(e){this._cfg={},this.destroyed=!1,this.optimize=!1;var t={id:void 0,type:"item",model:{},group:void 0,animate:!1,visible:!0,locked:!1,event:!0,keyShape:void 0,states:[]};this._cfg=Object.assign(t,this.getDefaultCfg(),e);var r=this.get("model"),n=r.id,a=this.get("type");typeof n=="undefined"?n=Fd(a):typeof n!="string"&&(n=String(n)),this.get("model").id=n,this.set("id",n);var o=e.group;o&&(o.set("item",this),o.set("id",n)),this.init(),this.draw();var s=r.shape||r.type||(a==="edge"?"line":"circle"),u=this.get("shapeFactory");if(u&&u[s]){var f=u[s].options;if(f&&f.stateStyles){var c=this.get("styles")||r.stateStyles;c=(0,v.deepMix)({},f.stateStyles,c),this.set("styles",c)}}}return i.prototype.calculateBBox=function(){var e=this.get("keyShape"),t=this.get("group"),r=oi(e,t);return r.x=r.minX,r.y=r.minY,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.centerX=(r.minX+r.maxX)/2,r.centerY=(r.minY+r.maxY)/2,r},i.prototype.calculateCanvasBBox=function(){var e=this.get("keyShape"),t=this.get("group"),r=oi(e,t);return r.x=r.minX,r.y=r.minY,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.centerX=(r.minX+r.maxX)/2,r.centerY=(r.minY+r.maxY)/2,r},i.prototype.drawInner=function(){var e=this,t=e.get("shapeFactory"),r=e.get("group"),n=e.get("model");r.clear();var a=n.visible;if(a!==void 0&&!a&&e.changeVisibility(a),!!t){e.updatePosition(n);var o=e.getShapeCfg(n),s=o.type,u=t.draw(s,o,r);u&&(e.set("keyShape",u),u.set("isKeyShape",!0),u.set("draggable",!0)),this.setOriginStyle(),this.set("currentShape",s),this.restoreStates(t,s)}},i.prototype.setOriginStyle=function(){var e=this.get("group"),t=e.get("children"),r=this.getKeyShape(),n=this,a=r.get("name");if(this.get("originStyle")){var w=this.get("originStyle");a&&!w[a]&&(w[a]={});for(var C=this.getCurrentStatesStyle(),D=function($){var tt=t[$],it=tt.get("name"),ct=tt.attr();if(it&&it!==a){var _t=C[it];w[it]||(w[it]={}),_t?Object.keys(ct).forEach(function(Qt){var ye=ct[Qt];ye!==_t[Qt]&&(w[it][Qt]=ye)}):w[it]=tt.get("type")!=="image"?(0,v.clone)(ct):n.getShapeStyleByName(it)}else{var Bt=tt.attr(),Pt={};Object.keys(C).forEach(function(Qt){var ye=C[Qt];(Qt===a||!(0,v.isPlainObject)(ye))&&(Pt[Qt]=ye)}),Object.keys(Bt).forEach(function(Qt){var ye=Bt[Qt];Pt[Qt]!==ye&&(a?w[a][Qt]=ye:w[Qt]=ye)})}},s=0;s<t.length;s++)D(s);delete w.path,delete w.matrix,delete w.x,delete w.y,w[a]&&(delete w[a].x,delete w[a].y,delete w[a].matrix,delete w[a].path),n.set("originStyle",w)}else{for(var o={},s=0;s<t.length;s++){var u=t[s],f=u.get("type"),c=u.get("name");if(c&&c!==a)o[c]=f!=="image"?(0,v.clone)(u.attr()):n.getShapeStyleByName(c),f==="text"&&o[c]&&(delete o[c].x,delete o[c].y,delete o[c].matrix);else{var l=n.getShapeStyleByName();if(delete l.path,delete l.matrix,!a)Object.assign(o,l);else if(c)o[a]=l;else{var m=Fd("shape");u.set("name",m),e.shapeMap[m]=u,o[m]=f!=="image"?(0,v.clone)(u.attr()):n.getShapeStyleByName(c)}}}n.set("originStyle",o)}},i.prototype.restoreStates=function(e,t){var r=this,n=r.get("states");(0,v.each)(n,function(a){e.setState(t,a,!0,r)})},i.prototype.init=function(){var e=_s.getFactory(this.get("type"));this.set("shapeFactory",e)},i.prototype.get=function(e){return this._cfg[e]},i.prototype.set=function(e,t){(0,v.isPlainObject)(e)?this._cfg=(0,g.__assign)((0,g.__assign)({},this._cfg),e):this._cfg[e]=t},i.prototype.getDefaultCfg=function(){return{}},i.prototype.clearCache=function(){this.set(Yd,null),this.set(Wd,null)},i.prototype.beforeDraw=function(){},i.prototype.afterDraw=function(){},i.prototype.afterUpdate=function(){},i.prototype.draw=function(){this.beforeDraw(),this.drawInner(),this.afterDraw()},i.prototype.getShapeStyleByName=function(e){var t=this.get("group"),r;if(e?r=t.shapeMap[e]||t.find(function(a){return a.get("name")===e}):r=this.getKeyShape(),r){var n={};return(0,v.each)(r.attr(),function(a,o){(o!=="img"||(0,v.isString)(a))&&(n[o]=a)}),n}return{}},i.prototype.getShapeCfg=function(e,t){var r=this.get("styles");if(r){var n=e;return n.style=(0,g.__assign)((0,g.__assign)({},r),e.style),n}return e},i.prototype.getStateStyle=function(e){var t=this.get("styles"),r=t&&t[e];return r},i.prototype.getOriginStyle=function(){return this.get("originStyle")},i.prototype.getCurrentStatesStyle=function(){var e=this,t={},r=e.getStates();return!r||!r.length?this.get("originStyle"):((0,v.each)(e.getStates(),function(n){t=Object.assign(t,e.getStateStyle(n))}),t)},i.prototype.setState=function(e,t){var r=this.get("states"),n=this.get("shapeFactory"),a=e,o=e;(0,v.isString)(t)&&(a="".concat(e,":").concat(t),o="".concat(e,":"));var s=r;if((0,v.isBoolean)(t)){var u=r.indexOf(o);if(t){if(u>-1)return;r.push(a)}else u>-1&&r.splice(u,1)}else if((0,v.isString)(t)){var f=r.filter(function(m){return m.includes(o)});f.length>0&&this.clearStates(f),s=s.filter(function(m){return!m.includes(o)}),s.push(a),this.set("states",s)}if(n){var c=this.get("model"),l=c.type;n.setState(l,e,t,this)}},i.prototype.clearStates=function(e){var t=this,r=t.getStates(),n=t.get("shapeFactory"),a=t.get("model"),o=a.type;e||(e=r),(0,v.isString)(e)&&(e=[e]);var s=r.filter(function(u){return e.indexOf(u)===-1});t.set("states",s),e.forEach(function(u){n.setState(o,u,!1,t)})},i.prototype.setOptimize=function(e){this.optimize=e},i.prototype.getContainer=function(){return this.get("group")},i.prototype.getKeyShape=function(){return this.get("keyShape")},i.prototype.getModel=function(){return this.get("model")},i.prototype.getType=function(){return this.get("type")},i.prototype.getID=function(){return this.get("id")},i.prototype.isItem=function(){return!0},i.prototype.getStates=function(){return this.get("states")},i.prototype.hasState=function(e){var t=this.getStates();return t.indexOf(e)>=0},i.prototype.refresh=function(e){var t=this.get("model");this.updatePosition(t),this.updateShape(e),this.afterUpdate(),this.clearCache()},i.prototype.getUpdateType=function(e){},i.prototype.update=function(e,t){t===void 0&&(t=void 0);var r=this.get("model");if(t==="move")this.updatePosition(e);else{var n=r.visible,a=e.visible;n!==a&&a!==void 0&&this.changeVisibility(a);var o={x:r.x,y:r.y};e.x=isNaN(+e.x)?r.x:+e.x,e.y=isNaN(+e.y)?r.y:+e.y;var s=this.get("styles");if(e.stateStyles){var u=e.stateStyles;(0,v.mix)(s,u),delete e.stateStyles}Object.assign(r,e),(o.x!==e.x||o.y!==e.y)&&this.updatePosition(e),this.updateShape(t)}this.afterUpdate(),this.clearCache()},i.prototype.updateShape=function(e){var t=this.get("shapeFactory"),r=this.get("model"),n=r.type;if(t.shouldUpdate(n)&&n===this.get("currentShape")){var a=this.getShapeCfg(r,e);t.baseUpdate(n,a,this,e),e!=="move"&&this.setOriginStyle()}else this.draw();this.restoreStates(t,n)},i.prototype.updatePosition=function(e){var t=this.get("model"),r=isNaN(+e.x)?+t.x:+e.x,n=isNaN(+e.y)?+t.y:+e.y,a=this.get("group");if(isNaN(r)||isNaN(n))return!1;t.x=r,t.y=n;var o=a.getMatrix();return o&&o[6]===r&&o[7]===n?!1:(a.resetMatrix(),ns(a,{x:r,y:n}),this.clearCache(),!0)},i.prototype.getBBox=function(){var e=this.get(Yd);return e||(e=this.calculateBBox(),this.set(Yd,e)),e},i.prototype.getCanvasBBox=function(){var e=this.get(Wd);return e||(e=this.calculateCanvasBBox(),this.set(Wd,e)),e},i.prototype.toFront=function(){var e=this.get("group");e.toFront()},i.prototype.toBack=function(){var e=this.get("group");e.toBack()},i.prototype.show=function(){this.changeVisibility(!0)},i.prototype.hide=function(){this.changeVisibility(!1)},i.prototype.changeVisibility=function(e){var t=this.get("group");e?t.show():t.hide(),this.set("visible",e)},i.prototype.isVisible=function(){return this.get("visible")},i.prototype.enableCapture=function(e){var t=this.get("group");t&&t.set("capture",e)},i.prototype.destroy=function(){if(!this.destroyed){var e=this.get("animate"),t=this.get("group");e&&t.stopAnimate(),t.shapeMap={},this.clearCache(),t.remove(),this._cfg=null,this.destroyed=!0}},i}(),ep=_y,$h={source:"start",target:"end"},If="Node",ch="Point",Sy="Anchor",My=function(i){(0,g.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){return{type:"edge",sourceNode:null,targetNode:null,startPoint:null,endPoint:null,linkCenter:!1}},e.prototype.setEnd=function(t,r){var n=$h[t]+ch,a=t+If,o=this.get(a);o&&!o.destroyed&&o.removeEdge(this),(0,v.isPlainObject)(r)?(this.set(n,r),this.set(a,null)):r&&(r.addEdge(this),this.set(a,r),this.set(n,null))},e.prototype.getLinkPoint=function(t,r,n){var a=$h[t]+ch,o=t+If,s=this.get(a);if(!s){var u=this.get(o),f=t+Sy,c=this.getPrePoint(t,n),l=r[f];(0,v.isNil)(l)||(s=u.getLinkPointByAnchor(l)),s=s||u.getLinkPoint(c),(0,v.isNil)(s.index)||this.set("".concat(t,"AnchorIndex"),s.index)}return s},e.prototype.getPrePoint=function(t,r){if(r&&r.length){var n=t==="source"?0:r.length-1;return r[n]}var a=t==="source"?"target":"source";return this.getEndPoint(a)},e.prototype.getEndPoint=function(t){var r=t+If,n=$h[t]+ch,a=this.get(r);return a&&!a.destroyed?a.get("model"):this.get(n)},e.prototype.getControlPointsByCenter=function(t){var r=this.getEndPoint("source"),n=this.getEndPoint("target"),a=this.get("shapeFactory"),o=t.type;return a.getControlPoints(o,{startPoint:r,endPoint:n})},e.prototype.getEndCenter=function(t){var r=t+If,n=$h[t]+ch,a=this.get(r);if(a){var o=a.getBBox();return{x:o.centerX,y:o.centerY}}return this.get(n)},e.prototype.init=function(){i.prototype.init.call(this),this.setSource(this.get("source")),this.setTarget(this.get("target"))},e.prototype.getShapeCfg=function(t,r){var n=this,a=n.get("linkCenter"),o=r!=null&&r.includes("move")?t:i.prototype.getShapeCfg.call(this,t);if(a)o.startPoint=n.getEndCenter("source"),o.endPoint=n.getEndCenter("target");else{var s=o.controlPoints||n.getControlPointsByCenter(o);o.startPoint=n.getLinkPoint("source",t,s),o.endPoint=n.getLinkPoint("target",t,s)}return o.sourceNode=n.get("sourceNode"),o.targetNode=n.get("targetNode"),o},e.prototype.getModel=function(){var t=this.get("model"),r=this.get("source".concat(If)),n=this.get("target".concat(If));return r?delete t["source".concat(If)]:t.source=this.get("start".concat(ch)),n?delete t["target".concat(If)]:t.target=this.get("end".concat(ch)),!(0,v.isString)(t.source)&&!(0,v.isPlainObject)(t.source)&&(t.source=t.source.getID()),!(0,v.isString)(t.target)&&!(0,v.isPlainObject)(t.target)&&(t.target=t.target.getID()),t},e.prototype.setSource=function(t){this.setEnd("source",t),this.set("source",t)},e.prototype.setTarget=function(t){this.setEnd("target",t),this.set("target",t)},e.prototype.getSource=function(){return this.get("source")},e.prototype.getTarget=function(){return this.get("target")},e.prototype.updatePosition=function(){return!1},e.prototype.update=function(t,r){r===void 0&&(r=void 0);var n=this.get("model"),a=n.visible,o=t.visible;a!==o&&o!==void 0&&this.changeVisibility(o);var s=this.get("source"),u=this.get("target");if(!(!s||s.destroyed||!u||u.destroyed)){var f=this.get("styles");if(t.stateStyles){var c=t.stateStyles;(0,v.mix)(f,c),delete t.stateStyles}Object.assign(n,t),this.updateShape(r),this.afterUpdate(),this.clearCache()}},e.prototype.destroy=function(){var t=this.get("source".concat(If)),r=this.get("target".concat(If));t&&!t.destroyed&&t.removeEdge(this),r&&!r.destroyed&&r.removeEdge(this),i.prototype.destroy.call(this)},e}(ep),rp=My,Vd="anchorPointsCache",Ay="bboxCache",Cy=function(i){(0,g.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getNearestPoint=function(t,r){for(var n=0,a=t[0],o=Ho(t[0],r),s=0;s<t.length;s++){var u=t[s],f=Ho(u,r);f<o&&(a=u,o=f,n=s)}return a.anchorIndex=n,a},e.prototype.getDefaultCfg=function(){return{type:"node",edges:[]}},e.prototype.getEdges=function(){return this.get("edges")},e.prototype.getInEdges=function(){var t=this;return this.get("edges").filter(function(r){return r.get("target")===t})},e.prototype.getOutEdges=function(){var t=this;return this.get("edges").filter(function(r){return r.get("source")===t})},e.prototype.getNeighbors=function(t){var r=this,n=this.get("edges");if(t==="target"){var a=function(f){return f.getSource()===r};return n.filter(a).map(function(u){return u.getTarget()})}if(t==="source"){var o=function(f){return f.getTarget()===r};return n.filter(o).map(function(u){return u.getSource()})}var s=function(f){return f.getSource()===r?f.getTarget():f.getSource()};return n.map(s)},e.prototype.getLinkPointByAnchor=function(t){var r=this.getAnchorPoints();return r[t]},e.prototype.getLinkPoint=function(t){var r=this.get("keyShape"),n=r.get("type"),a=this.get("type"),o,s,u=this.getBBox();a==="combo"?(o=u.centerX||(u.maxX+u.minX)/2,s=u.centerY||(u.maxY+u.minY)/2):(o=u.centerX,s=u.centerY);var f=this.getAnchorPoints(),c;switch(n){case"circle":c=$n({x:o,y:s,r:u.width/2},t);break;case"ellipse":c=ji({x:o,y:s,rx:u.width/2,ry:u.height/2},t);break;default:c=Ds(u,t)}var l=c;return f.length&&(l||(l=t),l=this.getNearestPoint(f,l)),l||(l={x:o,y:s}),l},e.prototype.getAnchorPoints=function(){var t=this.get(Vd);if(!t){t=[];var r=this.get("shapeFactory"),n=this.getBBox(),a=this.get("model"),o=this.getShapeCfg(a),s=a.type,u=r.getAnchorPoints(s,o)||[];(0,v.each)(u,function(f,c){var l={x:n.minX+f[0]*n.width,y:n.minY+f[1]*n.height,anchorIndex:c};t.push(l)}),this.set(Vd,t)}return t},e.prototype.addEdge=function(t){this.get("edges").push(t)},e.prototype.lock=function(){this.set("locked",!0)},e.prototype.unlock=function(){this.set("locked",!1)},e.prototype.hasLocked=function(){return this.get("locked")},e.prototype.removeEdge=function(t){var r=this.getEdges(),n=r.indexOf(t);n>-1&&r.splice(n,1)},e.prototype.clearCache=function(){this.set(Ay,null),this.set(Vd,null)},e.prototype.getUpdateType=function(t){var r,n,a,o,s;if(t){var u=!(0,v.isNil)(t.x),f=!(0,v.isNil)(t.y),c=Object.keys(t);if(c.length===1&&(u||f)||c.length===2&&u&&f)return"move";if((0,v.isNumber)(t.x)||(0,v.isNumber)(t.y)||t.type||t.anchorPoints||t.size||t!=null&&t.style&&(!((r=t==null?void 0:t.style)===null||r===void 0)&&r.r||!((n=t==null?void 0:t.style)===null||n===void 0)&&n.width||!((a=t==null?void 0:t.style)===null||a===void 0)&&a.height||!((o=t==null?void 0:t.style)===null||o===void 0)&&o.rx||!((s=t==null?void 0:t.style)===null||s===void 0)&&s.ry))return"bbox|label";var l=c.includes("label")||c.includes("labelCfg");return l?"style|label":"style"}},e.prototype.setState=function(t,r){var n=this;if(this.optimize){i.prototype.setState.call(this,t,r);return}this.runWithBBoxAffected(function(){return i.prototype.setState.call(n,t,r)})},e.prototype.clearStates=function(t){var r=this;if(this.optimize){i.prototype.clearStates.call(this,t);return}this.runWithBBoxAffected(function(){return i.prototype.clearStates.call(r,t)})},e.prototype.runWithBBoxAffected=function(t){var r=["r","width","height","rx","ry","lineWidth"],n=this.getKeyShape().attr(),a={};Object.keys(this.getKeyShape().attr()).forEach(function(f){r.includes(f)&&(a[f]=n[f])}),t();for(var o=this.getKeyShape().attr(),s=0;s<r.length;s++){var u=r[s];if(o[u]!==a[u]){this.clearCache(),this.getEdges().forEach(function(f){return f.refresh()});break}}},e}(ep),Hd=Cy,np="bboxCache",ap="bboxCanvasCache",Kh="sizeCache",ip="anchorPointsCache",Ty=function(i){(0,g.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){return{type:"combo",nodes:[],edges:[],combos:[]}},e.prototype.getShapeCfg=function(t){var r=this.get("styles"),n=this.get("bbox");if(r&&n){var a=t,o=(0,v.isNumber)(t.size)?[t.size,t.size]:t.size,s=(0,v.isNumber)(t.fixSize)?[t.fixSize,t.fixSize]:t.fixSize,u=o||s||Zt.defaultCombo.size,f={r:(Math.max(n.width,n.height)||Math.max(u[0],u[1]))/2,width:n.width||u[0],height:n.height||u[1]};a.style=(0,g.__assign)((0,g.__assign)((0,g.__assign)({},r),t.style),f);var c=t.padding||Zt.defaultCombo.padding;return(0,v.isNumber)(c)?(f.r+=c,f.width+=c*2,f.height+=c*2):(f.r=f.r+Math.max.apply(Math,c),f.width+=c[1]+c[3]||c[1]*2,f.height+=c[0]+c[2]||c[0]*2),this.set(Kh,f),a}return t},e.prototype.calculateCanvasBBox=function(){if(!this.destroyed){var t=this.get("keyShape"),r=this.get("group"),n=this.get(np)||{},a=n.x,o=n.x,s=this.get(Kh),u=oi(t,r);if(u.centerX=(u.minX+u.maxX)/2,u.centerY=(u.minY+u.maxY)/2,s){s.width=Math.max(s.width,u.width),s.height=Math.max(s.height,u.height),this.set(Kh,s);var f=t.get("type");f==="circle"?(u.width=s.r*2,u.height=s.r*2):(u.width=s.width,u.height=s.height),u.minX=u.centerX-u.width/2,u.minY=u.centerY-u.height/2,u.maxX=u.centerX+u.width/2,u.maxY=u.centerY+u.height/2}else u.width=u.maxX-u.minX,u.height=u.maxY-u.minY,u.centerX=(u.minX+u.maxX)/2,u.centerY=(u.minY+u.maxY)/2;return u.x=u.minX,u.y=u.minY,(u.x!==a||u.y!==o)&&this.set(ip,null),u}},e.prototype.getChildren=function(){var t=this;return{nodes:t.getNodes(),combos:t.getCombos()}},e.prototype.getNodes=function(){var t=this;return t.get("nodes")},e.prototype.getCombos=function(){var t=this;return t.get("combos")},e.prototype.addChild=function(t){var r=this,n=t.getType();switch(n){case"node":r.addNode(t);break;case"combo":r.addCombo(t);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},e.prototype.addCombo=function(t){var r=this;return r.get("combos").push(t),!0},e.prototype.addNode=function(t){var r=this;return r.get("nodes").push(t),!0},e.prototype.removeChild=function(t){var r=this,n=t.getType();switch(n){case"node":r.removeNode(t);break;case"combo":r.removeCombo(t);break;default:return console.warn("Only node or combo items are allowed to be added into a combo"),!1}return!0},e.prototype.removeCombo=function(t){if(t){var r=this.getCombos(),n=r.indexOf(t);return n>-1?(r.splice(n,1),!0):!1}},e.prototype.removeNode=function(t){if(t){var r=this.getNodes(),n=r.indexOf(t);return n>-1?(r.splice(n,1),!0):!1}},e.prototype.getUpdateType=function(t){},e.prototype.getBBox=function(){this.set(ap,null);var t=this.calculateCanvasBBox();return t},e.prototype.clearCache=function(){this.set(np,null),this.set(ap,null),this.set(ip,null)},e.prototype.destroy=function(){if(!this.destroyed){var t=this.get("animate"),r=this.get("group");t&&r.stopAnimate(),r.shapeMap={},this.clearCache(),this.set(Kh,null),this.set("bbox",null),r.remove(),this._cfg=null,this.destroyed=!0}},e}(Hd),op=Ty,Qh="node",Jh="edge",sp="vedge",Sh="combo",Iy="default",up="Mapper",sc="stateStyles",ky=function(){function i(e){var t=this;this.edgeToBeUpdateMap={},this.throttleRefresh=(0,v.throttle)(function(r){var n=t.graph;if(!(!n||n.get("destroyed"))){var a=t.edgeToBeUpdateMap;if(a){var o=Object.values(a);o.length&&(o.forEach(function(s){var u=s.edge;if(!(!u||u.destroyed)){var f=u.getSource(),c=u.getTarget();!f||f.destroyed||!c||c.destroyed||u.refresh(s.updateType)}}),t.edgeToBeUpdateMap={})}}},16,{trailing:!0,leading:!0}),this.graph=e,this.destroyed=!1}return i.prototype.addItem=function(e,t){var r=this.graph,n=e===sp?Jh:e,a=r.get("".concat(n,"Group"))||r.get("group"),o=(0,v.upperFirst)(n),s=null,u=r.get(n+(0,v.upperFirst)(sc))||{},f=r.get(Iy+o);t[sc]&&(u=t[sc]),f&&(0,v.each)(f,function(Bt,Pt){(0,v.isObject)(Bt)&&!(0,v.isArray)(Bt)?t[Pt]=(0,v.deepMix)({},Bt,t[Pt]):(0,v.isArray)(Bt)?t[Pt]=t[Pt]||(0,v.clone)(f[Pt]):t[Pt]=t[Pt]||f[Pt]});var c=r.get(n+up);if(c){var l=c(t);l[sc]&&(u=l[sc],delete l[sc]),(0,v.each)(l,function(Bt,Pt){(0,v.isObject)(Bt)&&!(0,v.isArray)(Bt)?t[Pt]=(0,v.deepMix)({},t[Pt],Bt):t[Pt]=l[Pt]||t[Pt]})}if(r.emit("beforeadditem",{type:e,model:t}),e===Jh||e===sp){var m=void 0,w=void 0;if(m=t.source,w=t.target,m&&(0,v.isString)(m)&&(m=r.findById(m)),w&&(0,v.isString)(w)&&(w=r.findById(w)),!m||!w){console.warn("The source or target node of edge ".concat(t.id," does not exist!"));return}m.getType&&m.getType()==="combo"&&(t.isComboEdge=!0),w.getType&&w.getType()==="combo"&&(t.isComboEdge=!0),s=new rp({model:t,source:m,target:w,styles:u,linkCenter:r.get("linkCenter"),group:a.addGroup()})}else if(e===Qh)s=new Hd({model:t,styles:u,group:a.addGroup()});else if(e===Sh){var C=t.children,D=tu(C,r),U=void 0,$=void 0;if(isNaN(D.x)?isNaN(t.x)&&(U=Math.random()*100):U=D.x,isNaN(D.y)?isNaN(t.y)&&($=Math.random()*100):$=D.y,isNaN(t.x)||isNaN(t.y))t.x=U,t.y=$;else{var tt=t.x-U,it=t.y-$;this.updateComboSucceeds(t.id,tt,it,C)}var ct=a.addGroup();ct.setZIndex(t.depth),s=new op({model:t,styles:u,animate:r.get("animate"),bbox:t.collapsed?tu([],r):D,group:ct}),!t.collapsed&&s.getKeyShape().get("type")==="circle"&&(D.width=Math.hypot(D.height,D.width),D.height=D.width,s.set("bbox",D),s.refresh());var _t=s.getModel();(C||[]).forEach(function(Bt){var Pt=r.findById(Bt.id);s.addChild(Pt),Bt.depth=_t.depth+2})}if(s)return s.setOptimize(r.getNodes().length>r.get("optimizeThreshold")),r.get("".concat(e,"s")).push(s),r.get("itemMap")[s.get("id")]=s,r.emit("afteradditem",{item:s,model:t}),s},i.prototype.updateItem=function(e,t){var r=this,n,a,o=this.graph;if((0,v.isString)(e)&&(e=o.findById(e)),!(!e||e.destroyed)){var s="";e.getType&&(s=e.getType());var u=o.get(s+up),f=e.getModel(),c=f.x,l=f.y,m=e.getUpdateType(t);if(u){var w=(0,v.deepMix)({},f,t),C=u(w),D=(0,v.deepMix)({},f,C,t);C[sc]&&(e.set("styles",D[sc]),delete D[sc]),(0,v.each)(D,function(ce,Ne){t[Ne]=ce})}else(0,v.each)(t,function(ce,Ne){f[Ne]&&(0,v.isObject)(ce)&&!(0,v.isArray)(ce)&&(t[Ne]=(0,g.__assign)((0,g.__assign)({},f[Ne]),t[Ne]))});if(o.emit("beforeupdateitem",{item:e,cfg:t}),s===Jh){if(t.source){var U=t.source;(0,v.isString)(U)&&(U=o.findById(U)),e.setSource(U)}if(t.target){var $=t.target;(0,v.isString)($)&&($=o.findById($)),e.setTarget($)}e.update(t)}else if(s===Qh){e.update(t,m);var tt=e.getEdges();m==="move"?(0,v.each)(tt,function(ce){r.edgeToBeUpdateMap[ce.getID()]={edge:ce,updateType:m},r.throttleRefresh()}):m!=null&&m.includes("bbox")&&(0,v.each)(tt,function(ce){ce.refresh(m)})}else if(s===Sh){if(e.update(t,m),!isNaN(t.x)||!isNaN(t.y)){var it=t.x-c||0,ct=t.y-l||0;this.updateComboSucceeds(f.id,it,ct)}var _t=e.getEdges(),Bt=(m==null?void 0:m.includes("bbox"))||m==="move";if(Bt&&s===Sh){var Pt=e.get("shapeFactory"),Qt=f.type||"circle",ye=f.animate===void 0||t.animate===void 0?(a=(n=Pt[Qt])===null||n===void 0?void 0:n.options)===null||a===void 0?void 0:a.animate:f.animate||t.animate;ye?setTimeout(function(){if(!(!e||e.destroyed)){var ce=e.getKeyShape();!ce||ce.destroyed||(0,v.each)(_t,function(Ne){Ne&&!Ne.destroyed&&Ne.refresh()})}},201):(0,v.each)(_t,function(ce){ce.refresh()})}}e.setOptimize(o.getNodes().length>o.get("optimizeThreshold")),o.emit("afterupdateitem",{item:e,cfg:t})}},i.prototype.updateCombo=function(e,t,r){var n=this,a,o,s=this.graph;if((0,v.isString)(e)&&(e=s.findById(e)),!(!e||e.destroyed)){var u=e.getModel(),f=tu(t,s,e),c=f.x,l=f.y;e.set("bbox",f);var m=c,w=l;r?(m=isNaN(u.x)?c:u.x,w=isNaN(u.y)?l:u.y):(m=isNaN(c)?u.x:c,w=isNaN(l)?u.y:l),e.update({x:m,y:w});var C=e.get("shapeFactory"),D=u.type||"circle",U=u.animate===void 0?(o=(a=C[D])===null||a===void 0?void 0:a.options)===null||o===void 0?void 0:o.animate:u.animate;U?setTimeout(function(){if(!(!e||e.destroyed)){var $=e.getKeyShape();!$||$.destroyed||(e.getShapeCfg(u),n.updateComboEdges(e))}},201):this.updateComboEdges(e)}},i.prototype.updateComboEdges=function(e){for(var t,r,n=e.getEdges()||[],a=0;a<n.length;a++){var o=n[a];!(o!=null&&o.destroyed)&&!(!((t=o==null?void 0:o.getSource())===null||t===void 0)&&t.destroyed)&&!(!((r=o==null?void 0:o.getTarget())===null||r===void 0)&&r.destroyed)&&o.refresh()}},i.prototype.collapseCombo=function(e,t){t===void 0&&(t=!0);var r=this.graph;(0,v.isString)(e)&&(e=r.findById(e));var n=e.getChildren();n.nodes.forEach(function(a){r.hideItem(a,t)}),n.combos.forEach(function(a){r.hideItem(a,t)})},i.prototype.updateComboSucceeds=function(e,t,r,n){var a=this;n===void 0&&(n=[]);var o=this.graph;if(!(!t&&!r)){var s=n;if(!(s!=null&&s.length)){var u=o.get("comboTrees");u==null||u.forEach(function(f){Ui(f,function(c){return c.id===e?(s=c.children,!1):!0})})}s==null||s.forEach(function(f){var c=o.findById(f.id);if(c){var l=c.getModel();a.updateItem(f.id,{x:(l.x||0)+t,y:(l.y||0)+r})}})}},i.prototype.expandCombo=function(e,t){t===void 0&&(t=!0);var r=this.graph;(0,v.isString)(e)&&(e=r.findById(e));var n=e.getChildren(),a=new Set;n.nodes.forEach(function(o){r.showItem(o,t),o.getEdges().forEach(function(s){return a.add(s)})}),n.combos.forEach(function(o){o.getModel().collapsed?o.show():r.showItem(o,t),o.getEdges().forEach(function(s){return a.add(s)})}),a.forEach(function(o){return o.refresh()})},i.prototype.removeItem=function(e){var t=this,r=this.graph;if((0,v.isString)(e)&&(e=r.findById(e)),!(!e||e.destroyed)){var n=(0,v.clone)(e.getModel()),a="";e.getType&&(a=e.getType()),r.emit("beforeremoveitem",{item:n,type:a});var o=r.get("".concat(a,"s")),s=o.indexOf(e);if(s>-1&&o.splice(s,1),a===Jh){var u=r.get("v".concat(a,"s")),f=u.indexOf(e);f>-1&&u.splice(f,1)}var c=e.get("id"),l=r.get("itemMap");delete l[c];var m=r.get("comboTrees"),w=e.get("id");if(a===Qh){var C=e.getModel().comboId;if(m&&C){var D=m,U=!1;m.forEach(function(Bt){U||Ui(Bt,function(Pt){if(Pt.id===w&&D){var Qt=D.indexOf(Pt);return D.splice(Qt,1),U=!0,!1}return D=Pt.children,!0})})}for(var $=e.getEdges(),tt=$.length-1;tt>=0;tt--)r.removeItem($[tt],!1);C&&r.updateCombo(C)}else if(a===Sh){var it=e.getModel().parentId,ct,_t=!1;(m||[]).forEach(function(Pt){_t||Ui(Pt,function(Qt){return Qt.id===w?(ct=Qt,_t=!0,!1):!0})}),ct.removed=!0,ct&&ct.children&&ct.children.forEach(function(Pt){t.removeItem(Pt.id)});for(var $=e.getEdges(),tt=$.length;tt>=0;tt--)r.removeItem($[tt],!1);it&&r.updateCombo(it)}e.destroy(),r.emit("afterremoveitem",{item:n,type:a})}},i.prototype.setItemState=function(e,t,r){var n=this.graph,a=t;(0,v.isString)(r)&&(a="".concat(t,":").concat(r)),!(e.hasState(a)===r&&r||(0,v.isString)(r)&&e.hasState(a))&&(n.emit("beforeitemstatechange",{item:e,state:a,enabled:r}),e.setState(t,r),n.autoPaint(),n.emit("afteritemstatechange",{item:e,state:a,enabled:r}))},i.prototype.priorityState=function(e,t){var r=this.graph,n=e;(0,v.isString)(e)&&(n=r.findById(e)),this.setItemState(n,t,!1),this.setItemState(n,t,!0)},i.prototype.clearItemStates=function(e,t){var r=this.graph;(0,v.isString)(e)&&(e=r.findById(e)),r.emit("beforeitemstatesclear",{item:e,states:t}),e.clearStates(t),r.emit("afteritemstatesclear",{item:e,states:t})},i.prototype.refreshItem=function(e){var t=this.graph;(0,v.isString)(e)&&(e=t.findById(e)),t.emit("beforeitemrefresh",{item:e}),e.refresh(),t.emit("afteritemrefresh",{item:e})},i.prototype.addCombos=function(e,t){var r=this,n=this.graph;(e||[]).forEach(function(o){yo(o,function(s){var u;return t.forEach(function(f){f.id===s.id&&(f.children=s.children,f.depth=s.depth,u=f)}),u&&r.addItem("combo",u),!0})});var a=n.get("comboGroup");a&&a.sort()},i.prototype.changeItemVisibility=function(e,t){var r=this,n=this.graph;if((0,v.isString)(e)&&(e=n.findById(e)),!e){console.warn("The item to be shown or hidden does not exist!");return}if(n.emit("beforeitemvisibilitychange",{item:e,visible:t}),e.changeVisibility(t),e.getType&&e.getType()===Qh){var a=e.getEdges();(0,v.each)(a,function(c){t&&!(c.get("source").isVisible()&&c.get("target").isVisible())||r.changeItemVisibility(c,t)})}else if(e.getType&&e.getType()===Sh){var o=n.get("comboTrees"),s=e.get("id"),u=[],f=!1;(o||[]).forEach(function(l){f||!l.children||l.children.length===0||Ui(l,function(m){return m.id===s?(u=m.children,f=!0,!1):!0})}),u&&(!t||t&&!e.getModel().collapsed)&&u.forEach(function(l){var m=n.findById(l.id);r.changeItemVisibility(m,t)});var a=e.getEdges();(0,v.each)(a,function(l){t&&!(l.get("source").isVisible()&&l.get("target").isVisible())||r.changeItemVisibility(l,t)})}return n.emit("afteritemvisibilitychange",{item:e,visible:t}),e},i.prototype.destroy=function(){this.graph=null,this.destroyed=!0},i}(),Ly=ky,Ny=function(){function i(e){this.graph=e,this.destroyed=!1}return i.prototype.updateState=function(e,t,r){var n=this.graph.get("states"),a=t;(0,v.isString)(r)&&(a="".concat(t,":").concat(r)),n[a]||(n[a]=[]),r?n[a].push(e):n[a]=n[a].filter(function(o){return o!==e}),this.graph.set("states",n),this.graph.emit("graphstatechange",{states:n})},i.prototype.updateStates=function(e,t,r){var n=this.graph.get("states"),a=(0,v.isString)(t)?[t]:t;a.forEach(function(o){var s=o;n[s]||(n[s]=[]),(0,v.isString)(r)&&(s="".concat(o,":").concat(r)),r?n[s].push(e):n[s]=n[s].filter(function(u){return u!==e})}),this.graph.set("states",n),this.graph.emit("graphstatechange",{states:t})},i.prototype.destroy=function(){this.graph=null,this.destroyed=!0},i}(),Oy=Ny,Dy=function(e,t){return!e||!t?e:e.replace(/\\?\{([^{}]+)\}/g,function(r,n){if(r.charAt(0)==="\\")return r.slice(1);var a=t[n];return a===0&&(a="0"),a||""})},fp=function(e){var t=[];if(e.length<2)throw new Error("point length must largn than 2, now it's ".concat(e.length));for(var r=0,n=e;r<n.length;r++){var a=n[r],o=a.x,s=a.y;t.push(o),t.push(s)}var u=pr(t);return u.unshift(["M",e[0].x,e[0].y]),u},td=function(e,t,r,n){r===void 0&&(r=0),n===void 0&&(n=0);var a={x:(1-r)*e.x+r*t.x,y:(1-r)*e.y+r*t.y},o=[0,0];Un.normalize(o,[t.x-e.x,t.y-e.y]),(!o||!o[0]&&!o[1])&&(o=[0,0]);var s=[-o[1]*n,o[0]*n];return a.x+=s[0],a.y+=s[1],a},Py=function(e,t){var r=e.length;if(!r)return"";for(var n="",a="",o=0;o<r;o++){var s=e[o];o===0?a="M{x} {y}":a="L{x} {y}",n+=Dy(a,s)}return t&&(n+="Z"),n},jd=function(e){var t=[];return e.forEach(function(r){var n=r[0];if(n!=="A")for(var a=1;a<r.length;a=a+2)t.push([r[a],r[a+1]]);else{var o=r.length;t.push([r[o-2],r[o-1]])}}),t},Zd=function(e){if(e.length<2)throw new Error("point length must larger than 2, now it's ".concat(e.length));var t=e[0],r=e[1],n=e[e.length-1],a=e[e.length-2];e.unshift(n),e.unshift(a),e.push(t),e.push(r);for(var o=[],s=1;s<e.length-2;s+=1){var u=e[s-1].x,f=e[s-1].y,c=e[s].x,l=e[s].y,m=e[s+1].x,w=e[s+1].y,C=s!==e.length-2?e[s+2].x:m,D=s!==e.length-2?e[s+2].y:w,U=c+(m-u)/6,$=l+(w-f)/6,tt=m-(C-c)/6,it=w-(D-l)/6;o.push(["C",U,$,tt,it,m,w])}return o.unshift(["M",n.x,n.y]),o},cp=function(e,t){return Un.scale([0,0],Un.normalize([0,0],e),t)},lp=function(e,t){var r=[e[1]-t[1],t[0]-e[0]],n=Math.sqrt(r[0]*r[0]+r[1]*r[1]);if(n===0)throw new Error("p0 should not be equal to p1");return[r[0]/n,r[1]/n]},hp=function(e,t){return[t[0]-e[0],t[1]-e[1]]};function qd(i,e){var t=function(l){var m=[l[0][0],l[0][1]-e],w=[l[0][0],l[0][1]+e];return"M ".concat(m," A ").concat(e,",").concat(e,",0,0,0,").concat(w," A ").concat(e,",").concat(e,",0,0,0,").concat(m)},r=function(l){var m=Un.scale([0,0],lp(l[0],l[1]),e),w=Un.scale([0,0],m,-1),C=Un.add([0,0],l[0],m),D=Un.add([0,0],l[1],m),U=Un.add([0,0],l[1],w),$=Un.add([0,0],l[0],w);return"M ".concat(C," L ").concat(D," A ").concat([e,e,"0,0,0",U].join(",")," L ").concat($," A ").concat([e,e,"0,0,0",C].join(","))};if(!i||i.length<1)return"";if(i.length===1)return t(i);if(i.length===2)return r(i);for(var n=new Array(i.length),a=0;a<n.length;++a){var o=a===0?i[i.length-1]:i[a-1],s=i[a],u=Un.scale([0,0],lp(o,s),e);n[a]=[Un.add([0,0],o,u),Un.add([0,0],s,u)]}var f="A ".concat([e,e,"0,0,0,"].join(","));return n=n.map(function(c,l){var m="";return l===0&&(m="M ".concat(n[n.length-1][1]," ")),m+="".concat(f+c[0]," L ").concat(c[1]),m}),n.join(" ")}function dp(i,e){var t=i.length,r=function(c){var l=[c[0][0],c[0][1]-e],m=[c[0][0],c[0][1]+e];return"M ".concat(l," A ").concat([e,e,"0,0,0",m].join(",")," A ").concat([e,e,"0,0,0",l].join(","))},n=function(c){var l=hp(c[0],c[1]),m=cp(l,e),w=Un.add([0,0],c[0],Un.scale([0,0],m,-1)),C=Un.add([0,0],c[1],m),D=1.2*e,U=cp(Un.normalize([0,0],l),D),$=Un.scale([0,0],U,-1),tt=Un.add([0,0],w,$),it=Un.add([0,0],C,$),ct=Un.add([0,0],w,U);return"M ".concat(w," C ").concat([tt,it,C].join(",")," S ").concat([ct,w].join(",")," Z")};if(!i||t<1)return"";if(t===1)return r(i);if(t===2)return n(i);for(var a=i.map(function(f,c){var l=i[(c+1)%t];return{p:f,v:Un.normalize([0,0],hp(f,l))}}),o=0;o<a.length;++o){var s=o>0?o-1:t-1,u=Un.normalize([0,0],Un.add([0,0],a[s].v,Un.scale([0,0],a[o].v,-1)));a[o].p=Un.add([0,0],a[o].p,Un.scale([0,0],u,e))}return a.map(function(f){var c=f.p;return{x:c[0],y:c[1]}})}var Ry=function(e,t){for(var r=[],n=0;n<5;n++){var a=Math.cos((18+72*n)/180*Math.PI)*e,o=Math.sin((18+72*n)/180*Math.PI)*e,s=Math.cos((54+72*n)/180*Math.PI)*t,u=Math.sin((54+72*n)/180*Math.PI)*t;n===0?r.push(["M",a,-o]):r.push(["L",a,-o]),r.push(["L",s,-u])}return r.push(["Z"]),r},vp=function(e,t,r){return(e.y-r.y)*(t.x-r.x)-(e.x-r.x)*(t.y-r.y)},pp=function(e){var t=e.map(function(l){return{x:l.getModel().x,y:l.getModel().y}});t.sort(function(l,m){return l.x===m.x?l.y-m.y:l.x-m.x});for(var r={},n=t.length-1;n>=0;n--){var a=t[n],o=a.x,s=a.y;r["".concat(o,"-").concat(s)]&&t.splice(n,1),r["".concat(o,"-").concat(s)]=!0}if(t.length===1)return t;for(var u=[],n=0;n<t.length;n++){for(;u.length>=2&&vp(u[u.length-2],u[u.length-1],t[n])<=0;)u.pop();u.push(t[n])}for(var f=[],n=t.length-1;n>=0;n--){for(;f.length>=2&&vp(f[f.length-2],f[f.length-1],t[n])<=0;)f.pop();f.push(t[n])}f.pop(),u.pop();var c=u.concat(f);return c},By={maxRoutingIterations:100,maxMarchingIterations:100,pixelGroupSize:2,edgeR0:10,edgeR1:10,nodeR0:5,nodeR1:10,morphBuffer:5,threshold:.001,skip:16,nodeInfluenceFactor:1,edgeInfluenceFactor:1,negativeNodeInfluenceFactor:-.5};function Fy(i,e,t){var r=!1,n=function(u,f){return e.cells[u+f*e.width]},a=function(u,f){var c=0;return n(u-1,f-1)>=t&&(c+=1),n(u,f-1)>t&&(c+=2),n(u-1,f)>t&&(c+=4),n(u,f)>t&&(c+=8),c},o=function(u,f){for(var c=u,l=f,m,w,C=0;C<e.width*e.height;C++){if(m=c,w=l,i.findIndex(function(U){return U.x===c&&U.y===l})>-1){if(!(i[0].x!==c||i[0].y!==l))return!0}else i.push({x:c,y:l});var D=a(c,l);switch(D){case-1:return console.warn("Marched out of bounds"),!0;case 0:case 3:case 2:case 7:c++;break;case 12:case 14:case 4:c--;break;case 6:m===0&&(w===-1?c-=1:c+=1);break;case 1:case 13:case 5:l--;break;case 9:m===1&&(w===0?l-=1:l+=1);break;case 10:case 8:case 11:l++;break;default:return console.warn("Marching squares invalid state: ".concat(D)),!0}}};this.march=function(){for(var s=0;s<e.width&&!r;s+=1)for(var u=0;u<e.height&&!r;u+=1)n(s,u)>t&&a(s,u)!==15&&(r=o(s,u));return r}}var Gy=function(e,t,r){var n=Math.ceil(e/r),a=Math.ceil(t/r),o=new Float32Array(Math.max(0,n*a)).fill(0);return{cells:o,width:n,height:a}},zy=function(e,t,r){var n=null,a=Number.POSITIVE_INFINITY;return t.forEach(function(o){var s={x:e.getModel().x,y:e.getModel().y},u={x:o.getModel().x,y:o.getModel().y},f=Mo(s,u),c=new Lo(s.x,s.y,u.x,u.y),l=r.reduce(function(m,w){return lo(w,c)>0?m+1:m},0);f*Math.pow(l+1,2)<a&&(n=o,a=f*Math.pow(l+1,2))}),n},gp=function(e,t){var r=Number.POSITIVE_INFINITY,n=null;return e.forEach(function(a){var o=lo(a,t);o>=0&&o<r&&(n=a,r=o)}),n},Uy=function(e,t,r,n){var a=[],o=[];o.push(e);for(var s=!0,u=0,f=function(w,C){var D=!1;return C.forEach(function(U){D||(go(w,{x:U.x1,y:U.y1})||go(w,{x:U.x2,y:U.y2}))&&(D=!0)}),D},c=function(w,C){for(var D=0,U=C;D<U.length;D++){var $=U[D],tt=$.getBBox(),it=[[tt.x,tt.y],[tt.x+tt.width,tt.y],[tt.x,tt.y+tt.height],[tt.x+tt.width,tt.y+tt.height]];if(Ro(it,w.x,w.y))return!0}return!1};s&&u<r;){s=!1;for(var l=function(){var w=o.pop(),C=gp(t,w);if(C){var D=Bo(C,w),U=D[0],$=D[1];if($===2){var tt=function(ct){for(var _t=n,Bt=yp(C,_t,U,ct),Pt=f(Bt,o)||f(Bt,a),Qt=c(Bt,t);!Pt&&Qt&&_t>=1;)_t/=1.5,Bt=yp(C,_t,U,ct),Pt=f(Bt,o)||f(Bt,a),Qt=c(Bt,t);Bt&&!Pt&&(!ct||!Qt)&&(o.push(new Lo(w.x1,w.y1,Bt.x,Bt.y)),o.push(new Lo(Bt.x,Bt.y,w.x2,w.y2)),s=!0)};tt(!0),s||tt(!1)}}s||a.push(w),u+=1};!s&&o.length;)l()}for(;o.length;)a.push(o.pop());return a};function Xy(i,e,t,r,n){var a=zy(i,t,e);if(a===null)return[];var o=function(l){for(var m=[];l.length>0;){var w=l.pop();if(l.length===0){m.push(w);break}var C=l.pop(),D=new Lo(w.x1,w.y1,C.x2,C.y2),U=gp(e,D);U?(m.push(w),l.push(C)):l.push(D)}return m},s=new Lo(i.getModel().x,i.getModel().y,a.getModel().x,a.getModel().y),u=Uy(s,e,r,n),f=o(u);return f}var Yy=function(e,t,r){var n=Object.assign(By,r),a=jo(e.map(function(tt){return{x:tt.getModel().x,y:tt.getModel().y}}));e=e.sort(function(tt,it){return Mo({x:tt.getModel().x,y:tt.getModel().y},a)-Mo({x:it.getModel().x,y:it.getModel().y},a)});var o=[],s=[];e.forEach(function(tt){var it=Xy(tt,t,o,n.maxRoutingIterations,n.morphBuffer);it.forEach(function(ct){s.push(ct)}),o.push(tt)});for(var u=Wy(e,s,n.nodeR0),f=Gy(u.width,u.height,n.pixelGroupSize),c=[],l=[],m=0;m<n.maxMarchingIterations;m++)if(Vy(e,t,s,u,f,n),c=[],l=[],!!new Fy(c,f,n.threshold).march()){var w=c.map(function(tt){return{x:Math.round(tt.x*n.pixelGroupSize+u.minX),y:Math.round(tt.y*n.pixelGroupSize+u.minY)}});if(w){var C=w.length;if(n.skip>1)for(C=Math.floor(w.length/n.skip);C<3&&n.skip>1;)n.skip-=1,C=Math.floor(w.length/n.skip);for(var D=0,U=0;U<C;U+=1,D+=n.skip)l.push({x:w[D].x,y:w[D].y})}var $=function(){for(var it=0,ct=e;it<ct.length;it++){var _t=ct[it],Bt=l.map(function(Pt){return[Pt.x,Pt.y]});if(!Ro(Bt,_t.getBBox().centerX,_t.getBBox().centerY))return!1}return!0};if(l&&$())return l;if(n.threshold*=.9,m<=n.maxMarchingIterations*.5)n.memberInfluenceFactor*=1.2,n.edgeInfluenceFactor*=1.2;else if(n.nonMemberInfluenceFactor!==0&&t.length>0)n.nonMemberInfluenceFactor*=.8;else break}return l};function Wy(i,e,t){var r={minX:Number.POSITIVE_INFINITY,minY:Number.POSITIVE_INFINITY,maxX:Number.NEGATIVE_INFINITY,maxY:Number.NEGATIVE_INFINITY,width:0,height:0,x:0,y:0},n=[];i.forEach(function(u){n.push(u.getBBox())}),e.forEach(function(u){n.push(u.getBBox())});for(var a=0,o=n;a<o.length;a++){var s=o[a];r.minX=(s.minX<r.minX?s.minX:r.minX)-t,r.minY=(s.minY<r.minY?s.minY:r.minY)-t,r.maxX=(s.maxX>r.maxX?s.maxX:r.maxX)+t,r.maxY=(s.maxY>r.maxY?s.maxY:r.maxY)+t}return r.width=r.maxX-r.minX,r.height=r.maxY-r.minY,r.x=r.minX,r.y=r.minY,r}function Vy(i,e,t,r,n,a){function o(w,C){var D=Math.floor((w-C)/a.pixelGroupSize);return D<0?0:D}function s(w,C){return w*a.pixelGroupSize+C}var u=(a.nodeR0-a.nodeR1)*(a.nodeR0-a.nodeR1),f=(a.edgeR0-a.edgeR1)*(a.edgeR0-a.edgeR1),c=function(C,D){var U=Math.min(o(C.minX,D+r.minX),n.width),$=Math.min(o(C.minY,D+r.minY),n.height),tt=Math.min(o(C.maxX,-D+r.minX),n.width),it=Math.min(o(C.maxY,-D+r.minY),n.height);return[U,$,tt,it]},l=function(C,D){for(var U=C.getBBox(),$=c(U,a.nodeR1),tt=$[0],it=$[1],ct=$[2],_t=$[3],Bt=it;Bt<_t;Bt+=1)for(var Pt=tt;Pt<ct;Pt+=1)if(!(D<0&&n[Pt+Bt*n.width]<=0)){var Qt=s(Pt,r.minX),ye=s(Bt,r.minY),ce=Da({x:Qt,y:ye},{x:U.minX,y:U.minY,width:U.width,height:U.height});if(ce<Math.pow(a.nodeR1,2)){var Ne=Math.sqrt(ce)-a.nodeR1;n.cells[Pt+Bt*n.width]+=D*Ne*Ne}}},m=function(C,D){for(var U=C.getBBox(),$=c(U,a.edgeR1),tt=$[0],it=$[1],ct=$[2],_t=$[3],Bt=it;Bt<_t;Bt+=1)for(var Pt=tt;Pt<ct;Pt+=1)if(!(D<0&&n.cells[Pt+Bt*n.width]<=0)){var Qt=s(Pt,r.minX),ye=s(Bt,r.minY),ce=Zo({x:Qt,y:ye},C);if(ce<Math.pow(a.edgeR1,2)){var Ne=Math.sqrt(ce)-a.edgeR1;n.cells[Pt+Bt*n.width]+=D*Ne*Ne}}};a.nodeInfluenceFactor&&i.forEach(function(w){l(w,a.nodeInfluenceFactor/u)}),a.edgeInfluenceFactor&&t.forEach(function(w){m(w,a.edgeInfluenceFactor/f)}),a.negativeNodeInfluenceFactor&&e.forEach(function(w){l(w,a.negativeNodeInfluenceFactor/u)})}function yp(i,e,t,r){var n=i.getBBox(),a=t[0],o=t[1],s=t[2],u=t[3],f={topLeft:{x:n.minX-e,y:n.minY-e},topRight:{x:n.maxX+e,y:n.minY-e},bottomLeft:{x:n.minX-e,y:n.maxY+e},bottomRight:{x:n.maxX+e,y:n.maxY+e}},c=n.height*n.width;function l(C,D){return n.width*((C.y-n.minY+(D.y-n.minY))*.5)}if(o){if(a)return r?f.topLeft:f.bottomRight;if(s)return r?f.bottomLeft:f.topRight;var m=l(o,u);return m<c*.5?o.y>u.y?r?f.topLeft:f.bottomRight:r?f.topRight:f.bottomLeft:o.y<u.y?r?f.bottomLeft:f.topRight:r?f.bottomRight:f.topLeft}if(u){if(a)return r?f.topRight:f.bottomLeft;if(s)return r?f.bottomRight:f.topLeft}var w=l(a,s);return w<c*.5?a.x>s.x?r?f.topLeft:f.bottomRight:r?f.bottomLeft:f.topRight:a.x<s.x?r?f.topRight:f.bottomLeft:r?f.bottomRight:f.topLeft}var Hy=function(){function i(e,t){this.cfg=(0,v.deepMix)(this.getDefaultCfg(),t),this.graph=e,this.id=this.cfg.id,this.group=this.cfg.group,this.members=this.cfg.members.map(function(r){return(0,v.isString)(r)?e.findById(r):r}),this.nonMembers=this.cfg.nonMembers.map(function(r){return(0,v.isString)(r)?e.findById(r):r}),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()}return i.prototype.getDefaultCfg=function(){return{id:"g6-hull",type:"round-convex",members:[],nonMembers:[],style:{fill:"lightblue",stroke:"blue",opacity:.2},padding:10}},i.prototype.setPadding=function(){var e=this.members.length&&this.members[0].getKeyShape().getCanvasBBox().width/2;this.padding=this.cfg.padding>0?this.cfg.padding+e:10+e,this.cfg.bubbleCfg={nodeR0:this.padding-e,nodeR1:this.padding-e,morphBuffer:this.padding-e}},i.prototype.setType=function(){this.type=this.cfg.type,this.members.length<3&&(this.type="round-convex"),this.type!=="round-convex"&&this.type!=="smooth-convex"&&this.type!=="bubble"&&(console.warn("The hull type should be either round-convex, smooth-convex or bubble, round-convex is used by default."),this.type="round-convex")},i.prototype.calcPath=function(e,t){var r,n,a;switch(this.type){case"round-convex":r=pp(e),a=qd(r.map(function(o){return[o.x,o.y]}),this.padding),n=ur(a);break;case"smooth-convex":r=pp(e),r.length===2?(a=qd(r.map(function(o){return[o.x,o.y]}),this.padding),n=ur(a)):r.length>2&&(a=dp(r.map(function(o){return[o.x,o.y]}),this.padding),n=Zd(a));break;case"bubble":r=Yy(e,t,this.cfg.bubbleCfg),n=r.length>=2&&Zd(r);break;default:}return n},i.prototype.render=function(){this.group.addShape("path",{attrs:(0,g.__assign)({path:this.path},this.cfg.style),id:this.id,name:this.cfg.id,capture:!1}),this.group.toBack()},i.prototype.addMember=function(e){if(e){(0,v.isString)(e)&&(e=this.graph.findById(e)),this.members.push(e);var t=this.nonMembers.indexOf(e);return t>-1&&this.nonMembers.splice(t,1),this.updateData(this.members,this.nonMembers),!0}},i.prototype.addNonMember=function(e){if(e){(0,v.isString)(e)&&(e=this.graph.findById(e)),this.nonMembers.push(e);var t=this.members.indexOf(e);return t>-1&&this.members.splice(t,1),this.updateData(this.members,this.nonMembers),!0}},i.prototype.removeMember=function(e){if(e){(0,v.isString)(e)&&(e=this.graph.findById(e));var t=this.members.indexOf(e);return t>-1?(this.members.splice(t,1),this.updateData(this.members,this.nonMembers),!0):!1}},i.prototype.removeNonMember=function(e){if(e){(0,v.isString)(e)&&(e=this.graph.findById(e));var t=this.nonMembers.indexOf(e);return t>-1?(this.nonMembers.splice(t,1),this.updateData(this.members,this.nonMembers),!0):!1}},i.prototype.updateData=function(e,t){var r=this;this.group.findById(this.id).remove(),e&&(this.members=e.map(function(n){return(0,v.isString)(n)?r.graph.findById(n):n})),t&&(this.nonMembers=t.map(function(n){return(0,v.isString)(n)?r.graph.findById(n):n})),this.path=this.calcPath(this.members,this.nonMembers),this.render()},i.prototype.updateStyle=function(e){var t=this.group.findById(this.id);t.attr((0,g.__assign)({},e))},i.prototype.updateCfg=function(e){var t=this;this.cfg=(0,v.deepMix)(this.cfg,e),this.id=this.cfg.id,this.group=this.cfg.group,e.members&&(this.members=this.cfg.members.map(function(r){return(0,v.isString)(r)?t.graph.findById(r):r})),e.nonMembers&&(this.nonMembers=this.cfg.nonMembers.map(function(r){return(0,v.isString)(r)?t.graph.findById(r):r})),this.setPadding(),this.setType(),this.path=this.calcPath(this.members,this.nonMembers),this.render()},i.prototype.contain=function(e){var t=this,r;(0,v.isString)(e)?r=this.graph.findById(e):r=e;var n,a=r.getKeyShape();if(r.get("type")==="path")n=jd(a.attr("path"));else{var o=a.getCanvasBBox();n=[[o.minX,o.minY],[o.maxX,o.minY],[o.maxX,o.maxY],[o.minX,o.maxY]]}return n=n.map(function(s){var u=t.graph.getPointByCanvas(s[0],s[1]);return[u.x,u.y]}),qi(n,jd(this.path))},i.prototype.destroy=function(){this.group.remove(),this.cfg=null},i}(),mp=Hy,Mh=Ht,jy="node",Zy=function(i){(0,g.__extends)(e,i);function e(t){var r=i.call(this)||this;return r.sortCombos=(0,v.debounce)(function(){var n=r.get("comboSorted");if(!(!r||r.destroyed||n)){r.set("comboSorted",!0);var a=[],o={},s=r.get("comboTrees");(s||[]).forEach(function(f){Ui(f,function(c){return a[c.depth]?a[c.depth].push(c.id):a[c.depth]=[c.id],o[c.id]=c.depth,!0})});var u=r.getEdges().concat(r.get("vedges"));(u||[]).forEach(function(f){var c=f.getModel(),l=o[c.source]||0,m=o[c.target]||0,w=Math.max(l,m);a[w]?a[w].push(c.id):a[w]=[c.id]}),a.forEach(function(f){if(!(!f||!f.length))for(var c=f.length-1;c>=0;c--){var l=r.findById(f[c]);l&&l.toFront()}})}},500,!1),r.cfg=(0,v.deepMix)(r.getDefaultCfg(),t),r.init(),r.animating=!1,r.destroyed=!1,r.cfg.enabledStack&&(r.undoStack=new Yo(r.cfg.maxStep),r.redoStack=new Yo(r.cfg.maxStep)),r}return e.prototype.init=function(){this.initCanvas();var t=new my(this),r=new Ff(this),n=new Ly(this),a=new Oy(this);this.set({viewController:t,modeController:r,itemController:n,stateController:a}),this.initLayoutController(),this.initEventController(),this.initGroups(),this.initPlugins()},e.prototype.initGroups=function(){var t=this.get("canvas");if(t){var r=t.get("el"),n=(r||{}).id,a=n===void 0?"g6":n,o=t.addGroup({id:"".concat(a,"-root"),className:Zt.rootContainerClassName});if(this.get("groupByTypes")){var s=o.addGroup({id:"".concat(a,"-edge"),className:Zt.edgeContainerClassName}),u=o.addGroup({id:"".concat(a,"-node"),className:Zt.nodeContainerClassName}),f=o.addGroup({id:"".concat(a,"-combo"),className:Zt.comboContainerClassName});f.toBack(),this.set({nodeGroup:u,edgeGroup:s,comboGroup:f})}var c=o.addGroup({id:"".concat(a,"-delegate"),className:Zt.delegateContainerClassName});this.set({delegateGroup:c}),this.set("group",o)}},e.prototype.getDefaultCfg=function(){return{container:void 0,width:void 0,height:void 0,renderer:"canvas",modes:{},plugins:[],data:{},fitViewPadding:10,minZoom:.02,maxZoom:10,event:!0,groupByTypes:!0,directed:!1,autoPaint:!0,nodes:[],edges:[],combos:[],vedges:[],itemMap:{},linkCenter:!1,defaultNode:{},defaultEdge:{},nodeStateStyles:{},edgeStateStyles:{},states:{},animate:!1,animateCfg:{onFrame:void 0,duration:500,easing:"easeLinear"},callback:void 0,enabledStack:!1,maxStep:10,tooltips:[],optimizeThreshold:1e3}},e.prototype.set=function(t,r){return(0,v.isPlainObject)(t)?this.cfg=(0,g.__assign)((0,g.__assign)({},this.cfg),t):this.cfg[t]=r,t==="enabledStack"&&r&&!this.undoStack&&!this.redoStack&&(this.undoStack=new Yo(this.cfg.maxStep),this.redoStack=new Yo(this.cfg.maxStep)),this},e.prototype.get=function(t){var r;return(r=this.cfg)===null||r===void 0?void 0:r[t]},e.prototype.getGroup=function(){return this.get("group")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.getMinZoom=function(){return this.get("minZoom")},e.prototype.setMinZoom=function(t){return this.set("minZoom",t)},e.prototype.getMaxZoom=function(){return this.get("maxZoom")},e.prototype.setMaxZoom=function(t){return this.set("maxZoom",t)},e.prototype.getWidth=function(){return this.get("width")},e.prototype.getHeight=function(){return this.get("height")},e.prototype.clearItemStates=function(t,r){(0,v.isString)(t)&&(t=this.findById(t));var n=this.get("itemController");r||(r=t.get("states")),n.clearItemStates(t,r);var a=this.get("stateController");a.updateStates(t,r,!1)},e.prototype.node=function(t){typeof t=="function"&&this.set("nodeMapper",t)},e.prototype.edge=function(t){typeof t=="function"&&this.set("edgeMapper",t)},e.prototype.combo=function(t){typeof t=="function"&&this.set("comboMapper",t)},e.prototype.findById=function(t){return this.get("itemMap")[t]},e.prototype.find=function(t,r){var n,a=this.get("".concat(t,"s"));return(0,v.each)(a,function(o,s){if(r(o,s))return n=o,n}),n},e.prototype.findAll=function(t,r){var n=[];return(0,v.each)(this.get("".concat(t,"s")),function(a,o){r(a,o)&&n.push(a)}),n},e.prototype.findAllByState=function(t,r,n){return n?this.findAll(t,function(a){return a.hasState(r)&&n(a)}):this.findAll(t,function(a){return a.hasState(r)})},e.prototype.translate=function(t,r,n,a){var o=this,s=this.get("group"),u=(0,v.clone)(s.getMatrix());if(u||(u=[1,0,0,0,1,0,0,0,1]),n){var f=ys({animateCfg:a,callback:function(){return o.emit("viewportchange",{action:"translate",matrix:s.getMatrix()})}});Ia(s,{x:s.getCanvasBBox().x+t,y:s.getCanvasBBox().y+r},n,f||{duration:500,easing:"easeCubic"})}else u=Mh(u,[["t",t,r]]),s.setMatrix(u),this.emit("viewportchange",{action:"translate",matrix:u}),this.autoPaint()},e.prototype.moveTo=function(t,r,n,a){var o=this.get("group");Ia(o,{x:t,y:r},n,a||{duration:500,easing:"easeCubic"}),this.emit("viewportchange",{action:"move",matrix:o.getMatrix()})},e.prototype.fitView=function(t,r,n,a){t&&this.set("fitViewPadding",t);var o=this.get("viewController");r?o.fitViewByRules(r,n,a):o.fitView(n,a),this.autoPaint()},e.prototype.fitCenter=function(t,r){var n=this.get("viewController");n.fitCenter(t,r),this.autoPaint()},e.prototype.addBehaviors=function(t,r){var n=this.get("modeController");return n.manipulateBehaviors(t,r,!0),this},e.prototype.removeBehaviors=function(t,r){var n=this.get("modeController");return n.manipulateBehaviors(t,r,!1),this},e.prototype.updateBehavior=function(t,r,n){var a=this.get("modeController");return a.updateBehavior(t,r,n),this},e.prototype.zoom=function(t,r,n,a){var o=this,s=this.get("group"),u=(0,v.clone)(s.getMatrix())||[1,0,0,0,1,0,0,0,1],f=this.get("minZoom"),c=this.get("maxZoom"),l=this.getZoom()||1,m=l*t,w=t,C=!1;if(f&&m<f?(w=f/l,C=!0):c&&m>c&&(w=c/l,C=!0),r?u=Mh(u,[["t",-r.x,-r.y],["s",w,w],["t",r.x,r.y]]):u=Mh(u,[["s",w,w]]),n){var D=(0,v.clone)(s.getMatrix());D||(D=[1,0,0,0,1,0,0,0,1]);var U=D[0],$=U*w,tt=ys({animateCfg:a,callback:function(){return o.emit("viewportchange",{action:"zoom",matrix:s.getMatrix()})}});s.animate(function(it){if(it===1)D=u;else{var ct=zi(U,$,it)/D[0];r?D=Mh(D,[["t",-r.x,-r.y],["s",ct,ct],["t",r.x,r.y]]):D=Mh(D,[["s",ct,ct]])}return{matrix:D}},tt)}else s.setMatrix(u),this.emit("viewportchange",{action:"zoom",matrix:u}),this.autoPaint();return!C},e.prototype.zoomTo=function(t,r,n,a){var o=t/this.getZoom();return this.zoom(o,r,n,a)},e.prototype.focusItem=function(t,r,n){var a=this.get("viewController"),o=!1;r?o=!0:r===void 0&&(o=this.get("animate"));var s={};n?s=n:n===void 0&&(s=this.get("animateCfg")),a.focus(t,o,s),this.autoPaint()},e.prototype.focusItems=function(t,r,n,a){var o=this.get("viewController");o.focusItems(t,r,n,a)},e.prototype.autoPaint=function(){this.get("autoPaint")&&this.paint()},e.prototype.paint=function(){this.emit("beforepaint"),this.get("canvas").draw(),this.emit("afterpaint")},e.prototype.getPointByClient=function(t,r){var n=this.get("viewController");return n.getPointByClient(t,r)},e.prototype.getClientByPoint=function(t,r){var n=this.get("viewController");return n.getClientByPoint(t,r)},e.prototype.getPointByCanvas=function(t,r){var n=this.get("viewController");return n.getPointByCanvas(t,r)},e.prototype.getCanvasByPoint=function(t,r){var n=this.get("viewController");return n.getCanvasByPoint(t,r)},e.prototype.getGraphCenterPoint=function(){var t=this.get("group").getCanvasBBox();return{x:(t.minX+t.maxX)/2,y:(t.minY+t.maxY)/2}},e.prototype.getViewPortCenterPoint=function(){return this.getPointByCanvas(this.get("width")/2,this.get("height")/2)},e.prototype.showItem=function(t,r){r===void 0&&(r=!0);var n=this.get("itemController"),a=n.changeItemVisibility(t,!0);if(r&&this.get("enabledStack")){var o=a.getID(),s=a.getType(),u={},f={};switch(s){case"node":u.nodes=[{id:o,visible:!1}],f.nodes=[{id:o,visible:!0}];break;case"edge":u.nodes=[{id:o,visible:!1}],f.edges=[{id:o,visible:!0}];break;case"combo":u.nodes=[{id:o,visible:!1}],f.combos=[{id:o,visible:!0}];break;default:break}this.pushStack("visible",{before:u,after:f})}},e.prototype.hideItem=function(t,r){r===void 0&&(r=!0);var n=this.get("itemController"),a=n.changeItemVisibility(t,!1);if(r&&this.get("enabledStack")){var o=a.getID(),s=a.getType(),u={},f={};switch(s){case"node":u.nodes=[{id:o,visible:!0}],f.nodes=[{id:o,visible:!1}];break;case"edge":u.nodes=[{id:o,visible:!0}],f.edges=[{id:o,visible:!1}];break;case"combo":u.nodes=[{id:o,visible:!0}],f.combos=[{id:o,visible:!1}];break;default:break}this.pushStack("visible",{before:u,after:f})}},e.prototype.refreshItem=function(t){var r=this.get("itemController");r.refreshItem(t)},e.prototype.setAutoPaint=function(t){var r=this;r.set("autoPaint",t);var n=r.get("canvas");n.set("autoDraw",t)},e.prototype.remove=function(t,r){r===void 0&&(r=!0),this.removeItem(t,r)},e.prototype.removeItem=function(t,r){r===void 0&&(r=!0);var n=t;if((0,v.isString)(t)&&(n=this.findById(t)),!n&&(0,v.isString)(t))console.warn("The item ".concat(t," to be removed does not exist!"));else if(n){var a="";if(n.getType&&(a=n.getType()),r&&this.get("enabledStack")){var o=(0,g.__assign)((0,g.__assign)({},n.getModel()),{itemType:a}),s={};switch(a){case"node":{s.nodes=[o],s.edges=[];for(var u=n.getEdges(),f=u.length-1;f>=0;f--)s.edges.push((0,g.__assign)((0,g.__assign)({},u[f].getModel()),{itemType:"edge"}));break}case"edge":s.edges=[o];break;case"combo":s.combos=[o];break;default:break}this.pushStack("delete",{before:s,after:{}})}if(a==="node"){var c=n.getModel();c.comboId&&this.updateComboTree(n,void 0,!1)}var l=this.get("itemController");if(l.removeItem(n),a==="combo"){var m=uu(this.get("comboTrees"));this.set("comboTrees",m)}}},e.prototype.innerAddItem=function(t,r,n){if(!nf(t,r))return!1;if(r.id&&this.findById(r.id)){console.warn("This item exists already. Be sure the id %c".concat(r.id,"%c is unique."),"font-size: 20px; color: red;","");return}var a,o=this.get("comboTrees")||[];if(t==="combo"){var s=this.get("itemMap"),u=!1;if(o.forEach(function(C){u||yo(C,function(D){if(r.parentId===D.id){u=!0;var U=(0,g.__assign)({id:r.id,depth:D.depth+2},r);D.children?D.children.push(U):D.children=[U],r.depth=U.depth,a=n.addItem(t,r)}var $=s[D.id];return u&&$&&$.getType&&$.getType()==="combo"&&n.updateCombo($,D.children),!0})}),!u){var f=(0,g.__assign)({id:r.id,depth:0},r);r.depth=f.depth,o.push(f),a=n.addItem(t,r)}this.set("comboTrees",o),r.collapsed&&(this.collapseCombo(a,!1),this.updateCombo(a))}else if(t==="node"&&(0,v.isString)(r.comboId)&&o){var c=this.findById(r.comboId);c&&c.getType&&c.getType()!=="combo"&&console.warn("'".concat(r.comboId,"' is not a id of a combo in the graph, the node will be added without combo.")),a=n.addItem(t,r);var l=this.get("itemMap"),m=!1,w=!1;o.forEach(function(C){w||m||yo(C,function(D){if(D.id===r.id)return w=!0,!1;if(r.comboId===D.id&&!w){m=!0;var U=(0,v.clone)(r);U.itemType="node",D.children?D.children.push(U):D.children=[U],U.depth=D.depth+1}return m&&l[D.id].getType&&l[D.id].getType()==="combo"&&n.updateCombo(l[D.id],D.children),!0})})}else a=n.addItem(t,r);if(t==="node"&&r.comboId||t==="combo"&&r.parentId){var c=this.findById(r.comboId||r.parentId);c&&c.getType&&c.getType()==="combo"&&c.addChild(a)}return a},e.prototype.addItem=function(t,r,n,a){n===void 0&&(n=!0),a===void 0&&(a=!0);var o=this.get("comboSorted");this.set("comboSorted",o&&!a);var s=this.get("itemController"),u=this.innerAddItem(t,r,s);if(u===!1||u===!0)return u;var f=this.get("combos");if(f&&f.length>0&&this.sortCombos(),this.autoPaint(),n&&this.get("enabledStack")){var c=(0,g.__assign)((0,g.__assign)({},u.getModel()),{itemType:t}),l={};switch(t){case"node":l.nodes=[c];break;case"edge":l.edges=[c];break;case"combo":l.combos=[c];break;default:break}this.pushStack("add",{before:{},after:l})}return u},e.prototype.addItems=function(t,r,n){t===void 0&&(t=[]),r===void 0&&(r=!0),n===void 0&&(n=!0);var a=this.get("comboSorted");this.set("comboSorted",a&&!n);for(var o=this.get("itemController"),s=[],u=0;u<t.length;u++){var f=t[u];f.type!=="edge"&&f.type!=="vedge"?s.push(this.innerAddItem(f.type,f.model,o)):s.push(void 0)}for(var u=0;u<t.length;u++){var f=t[u];(f.type==="edge"||f.type==="vedge")&&(s[u]=this.innerAddItem(f.type,f.model,o))}if(n){var c=this.get("combos");c&&c.length>0&&this.sortCombos()}if(this.autoPaint(),r&&this.get("enabledStack")){for(var l={nodes:[],edges:[],combos:[]},u=0;u<t.length;u++){var m=t[u].type,w=s[u];if(w&&w!==!0){var C=(0,g.__assign)((0,g.__assign)({},w.getModel()),{itemType:m});switch(m){case"node":l.nodes.push(C);break;case"edge":l.edges.push(C);break;case"combo":l.combos.push(C);break;default:break}}}this.pushStack("addItems",{before:{},after:l})}return s},e.prototype.add=function(t,r,n,a){return n===void 0&&(n=!0),a===void 0&&(a=!0),this.addItem(t,r,n,a)},e.prototype.updateItem=function(t,r,n){var a=this;n===void 0&&(n=!0);var o=this.get("itemController"),s;(0,v.isString)(t)?s=this.findById(t):s=t;var u=n&&this.get("enabledStack"),f;u&&(f=(0,v.clone)(s.getModel()));var c="";s.getType&&(c=s.getType());var l=(0,g.__spreadArray)([],s.getStates(),!0);if(c==="combo"&&(0,v.each)(l,function(D){return a.setItemState(s,D,!1)}),o.updateItem(s,r),c==="combo"&&(0,v.each)(l,function(D){return a.setItemState(s,D,!0)}),u){var m={nodes:[],edges:[],combos:[]},w={nodes:[],edges:[],combos:[]},C=(0,g.__assign)({id:f.id},r);switch(c){case"node":m.nodes.push(f),w.nodes.push(C);break;case"edge":m.edges.push(f),w.edges.push(C);break;case"combo":m.combos.push(f),w.combos.push(C);break;default:break}this.pushStack("update",{before:m,after:w})}},e.prototype.update=function(t,r,n){n===void 0&&(n=!0),this.updateItem(t,r,n)},e.prototype.setItemState=function(t,r,n){(0,v.isString)(t)&&(t=this.findById(t));var a=this.get("itemController");a.setItemState(t,r,n);var o=this.get("stateController");o.updateState(t,r,n)},e.prototype.priorityState=function(t,r){var n=this.get("itemController");n.priorityState(t,r)},e.prototype.data=function(t){No(t),this.set("data",t)},e.prototype.render=function(){var t=this;this.set("comboSorted",!1);var r=this.get("data");if(this.get("enabledStack")&&this.clearStack(),!r)throw new Error("data must be defined first");var n=r.nodes,a=n===void 0?[]:n,o=r.edges,s=o===void 0?[]:o,u=r.combos,f=u===void 0?[]:u;if(this.clear(!0),this.emit("beforerender"),t.addItems(a.map(function(U){return{type:"node",model:U}}),!1,!1),(f==null?void 0:f.length)!==0){var c=su(f,a);this.set("comboTrees",c),t.addCombos(f)}t.addItems(s.map(function(U){return{type:"edge",model:U}}),!1,!1);var l=t.get("animate");(t.get("fitView")||t.get("fitCenter"))&&t.set("animate",!1);var m=t.get("layoutController");if(m){if(m.layout(w),this.destroyed)return}else w();function w(){(t.get("comboTrees")||[]).forEach(function(U){yo(U,function($){var tt=t.findById($.id);return tt.getType()==="combo"&&$.collapsed&&(t.collapseCombo($.id,!1),t.updateCombo(tt)),!0})}),t.get("fitView")?t.fitView():t.get("fitCenter")&&t.fitCenter(),t.autoPaint(),t.emit("afterrender"),(t.get("fitView")||t.get("fitCenter"))&&t.set("animate",l),setTimeout(function(){var U;(U=t.getCombos())===null||U===void 0||U.forEach(function($){$.set("animate",!0)})},0)}if(!this.get("groupByTypes"))if(f&&f.length!==0)this.sortCombos();else if(r.nodes&&r.edges&&r.nodes.length<r.edges.length){var C=this.getNodes();C.forEach(function(U){U.toFront()})}else{var D=this.getEdges();D.forEach(function(U){U.toBack()})}},e.prototype.read=function(t){this.data(t),this.render()},e.prototype.diffItems=function(t,r,n){var a=this,o,s=this.get("itemMap");(0,v.each)(n,function(u){if(o=s[u.id],o){if(a.get("animate")&&t===jy){var f=o.getContainer().getMatrix();f||(f=[1,0,0,0,1,0,0,0,1]),o.set("originAttrs",{x:f[6],y:f[7]})}a.updateItem(o,u,!1)}else o=a.addItem(t,u,!1);o&&r["".concat(t,"s")].push(o)})},e.prototype.changeData=function(t,r){var n=this,a;r===void 0&&(r=!0);var o=this,s=t||o.get("data");if(!No(s))return this;this.emit("beforechangedata"),r&&this.get("enabledStack")&&this.pushStack("changedata",{before:o.save(),after:s}),this.set("comboSorted",!1),this.removeHulls(),this.getNodes().map(function(ct){return o.clearItemStates(ct)}),this.getEdges().map(function(ct){return o.clearItemStates(ct)});var u=this.get("canvas"),f=u.get("localRefresh");u.set("localRefresh",!1),o.get("data")||(o.data(s),o.render());var c=this.get("itemMap"),l={nodes:[],edges:[]},m=s.combos;if(m){var w=su(m,s.nodes);this.set("comboTrees",w)}else this.set("comboTrees",[]);this.diffItems("node",l,s.nodes),(0,v.each)(c,function(ct,_t){c[_t].getModel().depth=0,!(ct.getType&&ct.getType()==="edge")&&(ct.getType&&ct.getType()==="combo"?(delete c[_t],ct.destroy()):l.nodes.indexOf(ct)<0&&(delete c[_t],o.remove(ct,!1)))});for(var C=this.getCombos(),D=C.length,U=D-1;U>=0;U--)C[U].destroyed&&C.splice(U,1);m&&(o.addCombos(m),this.get("groupByTypes")||this.sortCombos()),this.diffItems("edge",l,s.edges),(0,v.each)(c,function(ct,_t){ct.getType&&(ct.getType()==="node"||ct.getType()==="combo")||l.edges.indexOf(ct)<0&&(delete c[_t],o.remove(ct,!1))}),(this.get("comboTrees")||[]).forEach(function(ct){yo(ct,function(_t){var Bt=n.findById(_t.id);return Bt.getType()==="combo"&&_t.collapsed&&n.collapseCombo(_t.id,!1),!0})}),this.set({nodes:l.nodes,edges:l.edges});var $=(this.get("layout")||{}).relayoutAtChangeData,tt=$===void 0?!0:$,it=this.get("layoutController");return tt&&it&&(it.changeData(function(){setTimeout(function(){var ct;(ct=o.getCombos())===null||ct===void 0||ct.forEach(function(_t){_t.set("animate",!0)})},0)}),o.get("animate")&&!it.getLayoutType()?(o.positionsAnimate(),(a=o.getCombos())===null||a===void 0||a.forEach(function(ct){return ct.set("animate",!0)})):o.autoPaint()),setTimeout(function(){u.set("localRefresh",f)},16),this.set("data",s),this.emit("afterchangedata"),this},e.prototype.addCombos=function(t){var r=this,n=r.get("comboTrees"),a=this.get("itemController");a.addCombos(n,t)},e.prototype.createCombo=function(t,r,n){var a=this;n===void 0&&(n=!0);var o=this.get("itemController");this.set("comboSorted",!1);var s="",u;if(t){if((0,v.isString)(t))s=t,u={id:t};else{if(s=t.id,!s){console.warn("Create combo failed. Please assign a unique string id for the adding combo.");return}u=t}var f=n&&this.get("enabledStack"),c={nodes:[],combos:[]};f&&r.forEach(function($){var tt=a.findById($),it=tt.getType();if(!(it!=="node"&&it!=="combo")){var ct=tt.getModel();c["".concat(it,"s")].push({id:$,parentId:it==="node"?ct.comboId:ct.parentId})}});var l=this.get("comboTrees"),m=new Set(r),w=new Map;l&&(l.forEach(function($){yo($,function(tt,it,ct){if(m.has(tt.id)){if(it){var _t=a.findById(it.id),Bt=a.findById(tt.id);it.children.splice(ct,1),_t.removeChild(Bt),o.updateCombo(_t,it.children)}tt.itemType==="combo"&&w.set(tt.id,tt)}return!0})}),l=l.filter(function($){return!m.has($.id)}),this.set("comboTrees",l));var C={nodes:[],combos:[]},D=r.map(function($){var tt=a.findById($),it=tt.getModel(),ct="";tt.getType&&(ct=tt.getType());var _t=w.get($)||{id:tt.getID(),itemType:ct};return ct==="combo"?(_t.parentId=s,it.parentId=s):ct==="node"&&(_t.comboId=s,it.comboId=s),f&&C["".concat(ct,"s")].push({id:it.id,parentId:s}),_t});u.children=D,this.addItem("combo",u,!1),this.set("comboSorted",!1),l&&(l.forEach(function($){Ui($,function(tt){return tt.id===s?(tt.itemType="combo",tt.children=D,!1):!0})}),this.sortCombos()),f&&(C.combos.push(u),this.pushStack("createCombo",{before:c,after:C}));var U=this.findById(s);!U.getModel().parentId&&U.getChildren().combos.length&&this.updateComboTree(U,void 0,!1),setTimeout(function(){U.set("animate",!0)},0)}},e.prototype.uncombo=function(t,r){var n=this,a,o;r===void 0&&(r=!0);var s=this,u=t;if((0,v.isString)(t)&&(u=this.findById(t)),!u||u.getType&&u.getType()!=="combo"){console.warn("The item is not a combo!");return}var f=u.getModel(),c=u.getModel().parentId,l=s.get("comboTrees");l||(l=[]);var m=this.get("itemMap"),w=u.get("id"),C,D=[],U=this.get("combos"),$=this.findById(c),tt=r&&this.get("enabledStack"),it={};if(tt&&(it=(0,v.clone)(f),it.children=[]),l.forEach(function(Pt){C||yo(Pt,function(Qt){var ye;if(Qt.id===w){C=Qt;var ce=u.getEdges().map(function(Rr){return Rr.getID()});ce.forEach(function(Rr){n.removeItem(Rr,!1)});var Ne=U.indexOf(u);U.splice(Ne,1),delete m[w];var $e=(0,v.clone)(u.getModel());u.destroy(),n.emit("afterremoveitem",{item:$e,type:"combo"})}if(c&&C&&Qt.id===c){$.removeCombo(u),D=Qt.children;var Ne=D.indexOf(C);return Ne!==-1&&D.splice(Ne,1),(ye=C.children)===null||ye===void 0||ye.forEach(function(rn){var Vr=n.findById(rn.id),Cr=Vr.getModel();Vr.getType&&Vr.getType()==="combo"?(rn.parentId=c,delete rn.comboId,Cr.parentId=c,delete Cr.comboId):Vr.getType&&Vr.getType()==="node"&&(rn.comboId=c,Cr.comboId=c),$.addChild(Vr),D.push(rn)}),n.updateCombo($),!1}return!0})}),!c&&C){var ct=l.indexOf(C);l.splice(ct,1),(a=C.children)===null||a===void 0||a.forEach(function(Pt){Pt.parentId=void 0;var Qt=n.findById(Pt.id).getModel();delete Qt.parentId,delete Qt.comboId,Pt.itemType!=="node"&&l.push(Pt)})}if(tt){var _t={nodes:[],combos:[]},Bt={nodes:[],combos:[]};(o=C.children)===null||o===void 0||o.forEach(function(Pt){var Qt=n.findById(Pt.id),ye=Qt.getType();ye!=="node"&&ye!=="combo"||(_t["".concat(ye,"s")].push({id:Pt.id,parentId:w}),Bt["".concat(ye,"s")].push({id:Pt.id,parentId:c}))}),_t.combos.push(it),this.pushStack("uncombo",{before:_t,after:Bt})}},e.prototype.updateCombos=function(t){var r=this;t===void 0&&(t=!1);var n=this,a=this.get("comboTrees"),o=n.get("itemController"),s=n.get("itemMap");(a||[]).forEach(function(u){yo(u,function(f){var c;if(!f)return!0;var l=s[f.id];if(((c=l==null?void 0:l.getType)===null||c===void 0?void 0:c.call(l))==="combo"){var m=(0,g.__spreadArray)([],l.getStates(),!0);(0,v.each)(m,function(w){return r.setItemState(l,w,!1)}),o.updateCombo(l,f.children,t),(0,v.each)(m,function(w){return r.setItemState(l,w,!0)})}return!0})}),n.sortCombos()},e.prototype.updateCombo=function(t){var r=this,n=this,a=t,o;if((0,v.isString)(t)&&(a=this.findById(t)),!a||a.getType&&a.getType()!=="combo"){console.warn("The item to be updated is not a combo!");return}o=a.get("id");var s=this.get("comboTrees"),u=n.get("itemController"),f=n.get("itemMap");(s||[]).forEach(function(c){yo(c,function(l){if(!l)return!0;var m=f[l.id];if(o===l.id&&m&&m.getType&&m.getType()==="combo"){var w=(0,g.__spreadArray)([],m.getStates(),!0);(0,v.each)(w,function(C){m.getStateStyle(C)&&r.setItemState(m,C,!1)}),u.updateCombo(m,l.children),(0,v.each)(w,function(C){m.getStateStyle(C)&&r.setItemState(m,C,!0)}),o&&(o=l.parentId)}return!0})})},e.prototype.updateComboTree=function(t,r,n){n===void 0&&(n=!0);var a=this;this.set("comboSorted",!1);var o;(0,v.isString)(t)?o=a.findById(t):o=t;var s=o.getModel(),u=s.comboId||s.parentId,f="";if(o.getType&&(f=o.getType()),r&&f==="combo"){var c=this.get("comboTrees"),l=!0,m;if((c||[]).forEach(function(tt){m||Ui(tt,function(it){if(!m)return it.id===o.getID()&&(m=it),!0})}),Ui(m,function(tt){return tt.id===r?(l=!1,!1):!0}),!l){console.warn("Failed to update the combo tree! The parentId points to a descendant of the combo!");return}}if(n&&this.get("enabledStack")){var w={},C={};f==="combo"?(w.combos=[{id:s.id,parentId:s.parentId}],C.combos=[{id:s.id,parentId:r}]):f==="node"&&(w.nodes=[{id:s.id,parentId:s.comboId}],C.nodes=[{id:s.id,parentId:r}]),this.pushStack("updateComboTree",{before:w,after:C})}if(s.parentId||s.comboId){var D=this.findById(s.parentId||s.comboId);D&&D.removeChild(o)}if(f==="combo"?s.parentId=r:f==="node"&&(s.comboId=r),r){var U=this.findById(r);U&&U.addChild(o)}if(u){var U=this.findById(u);U&&U.removeChild(o)}var $=uu(this.get("comboTrees"),s.id,r);this.set("comboTrees",$),this.updateCombos()},e.prototype.save=function(){var t=[],r=[],n=[];return(0,v.each)(this.get("nodes"),function(a){t.push(a.getModel())}),(0,v.each)(this.get("edges"),function(a){r.push(a.getModel())}),(0,v.each)(this.get("combos"),function(a){n.push(a.getModel())}),{nodes:t,edges:r,combos:n}},e.prototype.changeSize=function(t,r){var n=this.get("viewController");return n.changeSize(t,r),this},e.prototype.refresh=function(){var t=this;if(t.emit("beforegraphrefresh"),t.get("animate"))t.positionsAnimate();else{var r=t.get("nodes"),n=t.get("edges"),a=t.get("edges");(0,v.each)(r,function(o){o.refresh()}),(0,v.each)(n,function(o){o.refresh()}),(0,v.each)(a,function(o){o.refresh()})}t.emit("aftergraphrefresh"),t.autoPaint()},e.prototype.getNodes=function(){return this.get("nodes")},e.prototype.getEdges=function(){return this.get("edges")},e.prototype.getCombos=function(){return this.get("combos")},e.prototype.getComboChildren=function(t){if((0,v.isString)(t)&&(t=this.findById(t)),!t||t.getType&&t.getType()!=="combo"){console.warn("The combo does not exist!");return}return t.getChildren()},e.prototype.positionsAnimate=function(t){var r=this;r.emit("beforeanimate");var n=r.get("animateCfg"),a=n.onFrame,o=t?r.getNodes().concat(r.getCombos()):r.getNodes(),s=o.map(function(f){var c=f.getModel();return{id:c.id,x:c.x,y:c.y}});r.stopAnimate();var u=r.get("canvas");r.animating=!0,setTimeout(function(){u.animate(function(f){(0,v.each)(s,function(c){var l=r.findById(c.id);if(!(!l||l.destroyed)){var m=l.get("originAttrs"),w=l.get("model"),C=l.getContainer().getMatrix();if(m==null&&(C&&(m={x:C[6],y:C[7]}),l.set("originAttrs",m||0)),a){var D=a(l,f,c,m||{x:0,y:0});l.set("model",Object.assign(w,D))}else m?(w.x=m.x+(c.x-m.x)*f,w.y=m.y+(c.y-m.y)*f):(w.x=c.x,w.y=c.y)}}),r.refreshPositions(t)},{duration:n.duration,easing:n.easing,callback:function(){(0,v.each)(o,function(c){c.set("originAttrs",null)}),n.callback&&n.callback(),r.emit("afteranimate"),r.animating=!1}})},0)},e.prototype.refreshPositions=function(t){var r=this;r.emit("beforegraphrefreshposition");var n=r.get("nodes"),a=r.get("edges"),o=r.get("vedges"),s=r.get("combos"),u,f={},c=function(m){(0,v.each)(m,function(w){u=w.getModel();var C=w.get("originAttrs");if(!(C&&u.x===C.x&&u.y===C.y)){var D=w.updatePosition({x:u.x,y:u.y});f[u.id]=D,u.comboId&&(f[u.comboId]=f[u.comboId]||D),u.parentId&&(f[u.parentId]=f[u.parentId]||D)}})};c(s),c(n),s&&s.length!==0&&(t&&c(s),r.updateCombos()),(0,v.each)(a,function(l){var m=l.getSource().getModel(),w=l.getTarget();if(!(0,v.isPlainObject)(w)){var C=w.getModel();(f[m.id]||f[C.id]||l.getModel().isComboEdge)&&l.refresh()}}),(0,v.each)(o,function(l){l.refresh()}),r.emit("aftergraphrefreshposition"),r.autoPaint()},e.prototype.stopAnimate=function(){var t=this.get("canvas"),r=t.cfg.timeline;r&&r.stopAllAnimations()},e.prototype.isAnimating=function(){return this.animating},e.prototype.getZoom=function(){var t=this.get("group").getMatrix();return t?t[0]:1},e.prototype.getCurrentMode=function(){var t=this.get("modeController");return t.getMode()},e.prototype.setMode=function(t){var r=this.get("modeController");return r.setMode(t),this},e.prototype.clear=function(t){var r;return t===void 0&&(t=!1),(r=this.get("canvas"))===null||r===void 0||r.clear(),this.initGroups(),this.set({itemMap:{},nodes:[],edges:[],vedges:[],groups:[],combos:[],comboTrees:[]}),t||this.emit("afterrender"),this},e.prototype.updateLayout=function(t,r,n,a){var o=this;t===void 0&&(t={}),a===void 0&&(a=!0);var s=this.get("layoutController");if((0,v.isString)(t)&&(t={type:t}),r){var u=n;u||(r==="begin"?u={x:0,y:0}:u={x:this.getWidth()/2,y:this.getHeight()/2}),u=this.getPointByCanvas(u.x,u.y);var f=["force","gForce","fruchterman","force2"];f.includes(t.type)||!t.type&&f.includes(s==null?void 0:s.layoutType)?t.center=[u.x,u.y]:this.once("afterlayout",function(m){var w=o.getGroup().getMatrix()||[1,0,0,0,1,0,0,0,1];u.x=u.x*w[0]+w[6],u.y=u.y*w[0]+w[7];var C=o.getGroup().getCanvasBBox(),D=C.minX,U=C.maxX,$=C.minY,tt=C.maxY,it={x:(D+U)/2,y:($+tt)/2};r==="begin"&&(it.x=D,it.y=$),o.translate(u.x-it.x,u.y-it.y)})}var c=(0,g.__assign)({},this.get("layout")),l={};Object.assign(l,c,t),t.pipes&&!t.type?delete l.type:!t.pipes&&l.type&&delete l.pipes,this.set("layout",l),s&&(s.isLayoutTypeSame(l)&&l.gpuEnabled===c.gpuEnabled?s.updateLayoutCfg(l):s.changeLayout(l),a&&this.get("enabledStack")&&this.pushStack("layout",{before:c,after:l}))},e.prototype.destroyLayout=function(){var t=this.get("layoutController");t==null||t.destroyLayout()},e.prototype.layout=function(){var t,r=this.get("layoutController"),n=this.get("layout");if(!(!n||!r)){if(n.workerEnabled){r.layout();return}!((t=r.layoutMethods)===null||t===void 0)&&t.length?r.relayout(!0):r.layout()}},e.prototype.collapseCombo=function(t,r){var n=this;if(r===void 0&&(r=!0),!this.destroyed){if((0,v.isString)(t)&&(t=this.findById(t)),!t){console.warn("The combo to be collapsed does not exist!");return}this.emit("beforecollapseexpandcombo",{action:"collapse",item:t});var a=t.getModel(),o=this.get("itemController");o.collapseCombo(t,r),a.collapsed=!0;var s=this.getEdges().concat(this.get("vedges")),u=[],f=this.get("comboTrees"),c=!1;(f||[]).forEach(function(m){c||Ui(m,function(w){if(c&&w.depth<=a.depth)return!1;if(a.id===w.id&&(c=!0),c){var C=n.findById(w.id);C&&C.getType&&C.getType()==="combo"&&(u=u.concat(C.getNodes()),u=u.concat(C.getCombos()))}return!0})});var l={};s.forEach(function(m){var w=m.getModel(),C=w.isVEdge,D=w.size,U=D===void 0?1:D;if(!(m.isVisible()&&!C)){var $=m.getSource(),tt=m.getTarget(),it=null,ct;if($.getModel().id===a.id||u.includes($)&&!u.includes(tt)?(it=tt,ct=!1):(tt.getModel().id===a.id||!u.includes($)&&u.includes(tt))&&(it=$,ct=!0),it){if(C){n.removeItem(m,!1);return}for(var _t=it.getModel();!it.isVisible();){var Bt=_t.parentId,Pt=_t.comboId,Qt=Bt||Pt;if(it=n.findById(Qt),!it||!Qt)return;_t=it.getModel()}var ye=_t.id,ce=ct?{source:ye,target:a.id,size:U,isVEdge:!0}:{source:a.id,target:ye,size:U,isVEdge:!0},Ne="".concat(ce.source,"-").concat(ce.target);if(l[Ne]){l[Ne].size+=U;return}l[Ne]=ce}}}),this.addItems(Object.values(l).map(function(m){return{type:"vedge",model:m}}),!1),this.emit("aftercollapseexpandcombo",{action:"collapse",item:t})}},e.prototype.expandCombo=function(t,r){var n=this;if(r===void 0&&(r=!0),(0,v.isString)(t)&&(t=this.findById(t)),!t||t.getType&&t.getType()!=="combo"){console.warn("The combo to be collapsed does not exist!");return}this.emit("beforecollapseexpandcombo",{action:"expand",item:t});var a=t.getModel(),o=this.get("itemController");o.expandCombo(t,r),a.collapsed=!1;var s=this.getEdges().concat(this.get("vedges")),u=[],f=this.get("comboTrees"),c=!1;(f||[]).forEach(function(m){c||Ui(m,function(w){if(c&&w.depth<=a.depth)return!1;if(a.id===w.id&&(c=!0),c){var C=n.findById(w.id);C&&C.getType&&C.getType()==="combo"&&(u=u.concat(C.getNodes()),u=u.concat(C.getCombos()))}return!0})});var l={};s.forEach(function(m){if(!(m.isVisible()&&!m.getModel().isVEdge)){var w=m.getSource(),C=m.getTarget(),D=w.get("id"),U=C.get("id"),$=null,tt;if(D===a.id||u.includes(w)&&!u.includes(C)?($=C,tt=!1):U===a.id||!u.includes(w)&&u.includes(C)?($=w,tt=!0):u.includes(w)&&u.includes(C)&&w.isVisible()&&C.isVisible()&&m.show(),$){var it=m.getModel(),ct=it.isVEdge,_t=it.size,Bt=_t===void 0?1:_t;if(ct){n.removeItem(m,!1);return}for(var Pt=$.getModel();!$.isVisible();){var Qt=Pt.parentId,ye=Pt.comboId,ce=Qt||ye;if($=n.findById(ce),!$||!ce)return;Pt=$.getModel()}for(var Ne=Pt.id,$e=tt?C:w,Rr=$e.getModel();!$e.isVisible();){var rn=Rr.parentId,Vr=Rr.comboId,Cr=rn||Vr;if($e=n.findById(Cr),!$e||!Cr)return;if(Rr.comboId===a.id||Rr.parentId===a.id)break;Rr=$e.getModel()}var Cn=Rr.id;if(Ne){var _n=tt?{source:Ne,target:Cn,isVEdge:!0,size:Bt}:{source:Cn,target:Ne,isVEdge:!0,size:Bt},Tr="".concat(_n.source,"-").concat(_n.target);if(l[Tr]){l[Tr].size+=Bt;return}l[Tr]=_n}}}}),this.addItems(Object.values(l).map(function(m){return{type:"vedge",model:m}}),!1),this.emit("aftercollapseexpandcombo",{action:"expand",item:t})},e.prototype.collapseExpandCombo=function(t,r){if(r===void 0&&(r=!0),(0,v.isString)(t)&&(t=this.findById(t)),!(!t||t.getType&&t.getType()!=="combo")){for(var n=t.getModel(),a=this.findById(n.parentId);a;){var o=a.getModel();if(o.collapsed){console.warn("Fail to expand the combo since it's ancestor combo is collapsed."),a=void 0;return}a=this.findById(o.parentId)}var s=n.collapsed;s?this.expandCombo(t,r):this.collapseCombo(t,r),this.updateCombo(t)}},e.prototype.getNeighbors=function(t,r){var n=t;return(0,v.isString)(t)&&(n=this.findById(t)),n.getNeighbors(r)},e.prototype.getNodeDegree=function(t,r,n){r===void 0&&(r=void 0),n===void 0&&(n=!1);var a=t;(0,v.isString)(t)&&(a=this.findById(t));var o=this.get("degrees");(!o||n)&&(o=Te(this.save()),this.set("degrees",o));var s=o[a.getID()],u=0;if(!s)return 0;switch(r){case"in":u=s.inDegree;break;case"out":u=s.outDegree;break;case"all":u=s;break;default:u=s.degree;break}return u},e.prototype.getUndoStack=function(){return this.undoStack},e.prototype.getRedoStack=function(){return this.redoStack},e.prototype.getStackData=function(){return this.get("enabledStack")?{undoStack:this.undoStack.toArray(),redoStack:this.redoStack.toArray()}:null},e.prototype.clearStack=function(){this.get("enabledStack")&&(this.undoStack.clear(),this.redoStack.clear(),this.emit("stackchange",{undoStack:this.undoStack,redoStack:this.redoStack}))},e.prototype.pushStack=function(t,r,n){if(t===void 0&&(t="update"),n===void 0&&(n="undo"),!this.get("enabledStack")){console.warn("\u8BF7\u5148\u542F\u7528 undo & redo \u529F\u80FD\uFF0C\u5728\u5B9E\u4F8B\u5316 Graph \u65F6\u5019\u914D\u7F6E enabledStack: true !");return}var a=r?(0,v.clone)(r):{before:{},after:(0,v.clone)(this.save())};n==="redo"?this.redoStack.push({action:t,data:a}):this.undoStack.push({action:t,data:a}),this.emit("stackchange",{action:t,stackType:n,undoStack:this.undoStack,redoStack:this.redoStack})},e.prototype.getAdjMatrix=function(t,r){t===void 0&&(t=!0),r===void 0&&(r=this.get("directed"));var n=this.get("adjMatrix");return(!n||!t)&&(n=yt(this.save(),r),this.set("adjMatrix",n)),n},e.prototype.getShortestPathMatrix=function(t,r){t===void 0&&(t=!0),r===void 0&&(r=this.get("directed"));var n=this.get("adjMatrix"),a=this.get("shortestPathMatrix");return(!n||!t)&&(n=yt(this.save(),r),this.set("adjMatrix",n)),(!a||!t)&&(a=yn(this.save(),r),this.set("shortestPathMatrix",a)),a},e.prototype.on=function(t,r,n){return i.prototype.on.call(this,t,r,n)},e.prototype.destroy=function(){var t,r,n,a,o;this.emit("beforedestroy"),this.clear(),this.clearStack(),(t=this.get("itemController"))===null||t===void 0||t.destroy(),(r=this.get("modeController"))===null||r===void 0||r.destroy(),(n=this.get("viewController"))===null||n===void 0||n.destroy(),(a=this.get("stateController"))===null||a===void 0||a.destroy(),(o=this.get("canvas"))===null||o===void 0||o.destroy(),this.cfg=null,this.destroyed=!0,this.redoStack=null,this.undoStack=null,this.emit("afterdestroy")},e.prototype.createHull=function(t){if(!t.members||t.members.length<1){console.warn("Create hull failed! The members is empty.");return}var r=this.get("hullGroup"),n=this.get("hullMap");if(n||(n={},this.set("hullMap",n)),(!r||r.get("destroyed"))&&(r=this.get("group").addGroup({id:"hullGroup"}),r.toBack(),this.set("hullGroup",r)),n[t.id])return console.warn("Existed hull id."),n[t.id];var a=r.addGroup({id:"".concat(t.id,"-container")}),o=new mp(this,(0,g.__assign)((0,g.__assign)({},t),{group:a})),s=o.id;return n[s]=o,o},e.prototype.getHulls=function(){return this.get("hullMap")},e.prototype.getHullById=function(t){return this.get("hullMap")[t]},e.prototype.removeHull=function(t){var r,n;(0,v.isString)(t)?n=this.getHullById(t):n=t,(r=this.get("hullMap"))===null||r===void 0||delete r[n.id],n.destroy()},e.prototype.removeHulls=function(){var t=this.getHulls();!t||!Object.keys(t).length||(Object.keys(t).forEach(function(r){var n=t[r];n.destroy()}),this.set("hullMap",{}))},e}(Z),bp=Zy;function $d(i){"@babel/helpers - typeof";return $d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$d(i)}var lh=Ht,xp="-shape",Kd="-label",ed=["startArrow","endArrow"],wp={lineWidth:1,stroke:void 0,fill:void 0,lineAppendWidth:1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,x:0,y:0,r:10,width:20,height:20,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},qy={lineWidth:1,stroke:"#000",lineDash:void 0,startArrow:!1,endArrow:!1,opacity:void 0,strokeOpacity:void 0,fillOpacity:void 0,shadowColor:void 0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0},rd={edge:qy,node:wp,combo:wp},Qd="-label-bg",Jd={options:{labelCfg:{style:{fontFamily:Zt.windowFontFamily}},descriptionCfg:{style:{fontFamily:Zt.windowFontFamily}}},itemType:"",type:"",getCustomConfig:function(e){return{}},getOptions:function(e,t){return t==="move"||t!=null&&t.includes("bbox")?e:(0,v.deepMix)({},this.options,this.getCustomConfig(e)||{},e)},draw:function(e,t){t.shapeMap={},this.mergeStyle=this.getOptions(e);var r=this.drawShape(e,t);if(r.set("className",this.itemType+xp),t.shapeMap[this.itemType+xp]=r,e.label){var n=this.drawLabel(e,t);n.set("className",this.itemType+Kd),t.shapeMap[this.itemType+Kd]=n}return r},afterDraw:function(e,t,r){},drawShape:function(e,t){return null},drawLabel:function(e,t){var r=(this.mergeStyle||this.getOptions(e)||{}).labelCfg,n=r||{},a=this.getLabelStyle(e,n,t),o=a.rotate;delete a.rotate;var s=t.addShape("text",{attrs:a,draggable:!0,className:"text-shape",name:"text-shape",labelRelated:!0});if(t.shapeMap["text-shape"]=s,!isNaN(o)&&o!==""){var u=s.getBBox(),f=[1,0,0,0,1,0,0,0,1];if(a.rotateCenter)switch(a.rotateCenter){case"center":f=lh(f,[["t",-u.width/2,-u.height/2],["r",o],["t",u.width/2,u.height/2]]);break;case"lefttop":f=lh(f,[["t",-a.x,-a.y],["r",o],["t",a.x,a.y]]);break;case"leftcenter":f=lh(f,[["t",-a.x,-a.y-u.height/2],["r",o],["t",a.x,a.y+u.height/2]]);break;default:f=lh(f,[["t",-u.width/2,-u.height/2],["r",o],["t",u.width/2,u.height/2]]);break}else f=lh(f,[["t",-a.x,-a.y-u.height/2],["r",o],["t",a.x,a.y+u.height/2]]);s.setMatrix(f)}if(a.background){var c=this.drawLabelBg(e,t,s),l=this.itemType+Qd;c.set("classname",l),t.shapeMap[l]=c,s.toFront()}return s},drawLabelBg:function(e,t,r){var n=this.options.labelCfg,a=(0,v.mix)({},n,e.labelCfg),o=this.getLabelBgStyleByPosition(r,a),s=t.addShape("rect",{name:"text-bg-shape",attrs:o,labelRelated:!0});return t.shapeMap["text-bg-shape"]=s,s},getLabelStyleByPosition:function(e,t,r){return{text:e.label}},getLabelBgStyleByPosition:function(e,t){return{}},getLabelStyle:function(e,t,r){var n=this.getLabelStyleByPosition(e,t,r),a="".concat(this.itemType,"Label"),o=Zt[a]?Zt[a].style:null;return(0,g.__assign)((0,g.__assign)((0,g.__assign)({},o),n),t.style)},getShapeStyle:function(e){return e.style},update:function(e,t,r){this.updateShapeStyle(e,t,r),this.updateLabel(e,t,r)},updateShapeStyle:function(e,t,r){var n,a=t.getContainer(),o=t.getKeyShape(),s=(0,v.mix)({},o.attr(),e.style),u=function(l){var m,w=s[l];if((0,v.isPlainObject)(w)){var C=((n=a.shapeMap)===null||n===void 0?void 0:n[l])||a.find(function(D){return D.get("name")===l});C==null||C.attr(w)}else o.attr((m={},m[l]=w,m))};for(var f in s)u(f)},updateLabel:function(e,t,r){var n,a,o=t.getContainer(),s=(this.mergeStyle||this.getOptions({},r)||{}).labelCfg,u=s===void 0?{}:s,f=this.itemType+Kd,c=o.shapeMap[f]||o.find(function(ct){return ct.get("className")===f}),l=this.itemType+Qd,m=o.shapeMap[l]||o.find(function(ct){return ct.get("className")===l});if(c&&e.label===void 0&&(o.removeChild(c),delete o.shapeMap[f],m&&(o.removeChild(m),delete o.shapeMap[l])),e.label||e.label==="")if(c){(!r||r==="bbox|label"||this.itemType==="edge"&&r!=="style")&&(u=(0,v.deepMix)(u,e.labelCfg));var C=this.getLabelStyleByPosition(e,u,o),D=(n=e.labelCfg)===null||n===void 0?void 0:n.style,U=(0,g.__assign)((0,g.__assign)({},C),D),$=U.rotate;if(delete U.rotate,!isNaN($)&&$!==""){var tt=[1,0,0,0,1,0,0,0,1];tt=lh(tt,[["t",-U.x,-U.y],["r",$],["t",U.x,U.y]]),U.matrix=tt,c.attr(U)}else((a=c.getMatrix())===null||a===void 0?void 0:a[4])!==1&&c.resetMatrix(),c.attr(U);if(!m)U.background&&(m=this.drawLabelBg(e,o,c),m.set("classname",l),o.shapeMap[l]=m,c.toFront());else if(U.background){var it=this.getLabelBgStyleByPosition(c,u);m.attr(it)}else o.removeChild(m)}else{var w=this.drawLabel(e,o);w.set("className",f),o.shapeMap[f]=w}},afterUpdate:function(e,t){},setState:function(e,t,r){var n,a,o,s=r.get("keyShape");if(!(!s||s.destroyed)){var u=r.getType(),f=(0,v.isBoolean)(t)?e:"".concat(e,":").concat(t),c=this.getStateStyle(f,r),l=r.getStateStyle(f);if(!(!l&&!c)){var m=(0,v.mix)({},l||c),w=r.getContainer(),C={x:1,y:1,cx:1,cy:1,matrix:1};if(u==="combo"&&(C.r=1,C.width=1,C.height=1),t){var D=function(Cr){var Cn,_n=m[Cr];if((0,v.isPlainObject)(_n)&&!ed.includes(Cr)){var Tr=((o=w.shapeMap)===null||o===void 0?void 0:o[Cr])||w.find(function(jr){return jr.get("name")===Cr});Tr==null||Tr.attr(_n)}else s.attr((Cn={},Cn[Cr]=_n,Cn))};for(var U in m)D(U)}else{var $=eu(r.getCurrentStatesStyle()),tt=r.getModel(),it=(0,v.mix)({},tt.style,eu(r.getOriginStyle())),ct=s.get("name"),_t=s.attr(),Bt={};Object.keys(_t).forEach(function(Vr){if(Vr!=="img"){var Cr=_t[Vr];Cr&&$d(Cr)==="object"?Bt[Vr]=(0,v.clone)(Cr):Bt[Vr]=Cr}});var Pt={},Qt=function(Cr){var Cn=m[Cr];if((0,v.isPlainObject)(Cn)&&!ed.includes(Cr)){var _n=w.shapeMap[Cr]||w.find(function(dn){return dn.get("name")===Cr});if(_n){var Tr=eu(_n.attr());(0,v.each)(Cn,function(dn,vn){if(Cr===ct&&Bt[vn]&&!C[vn]){delete Bt[vn];var Pn=it[Cr][vn]||rd[u][vn];s.attr(vn,Pn)}else if(Tr[vn]||Tr[vn]===0){delete Tr[vn];var Wn=it[Cr][vn]||rd[u][vn];_n.attr(vn,Wn)}}),Pt[Cr]=Tr}}else if(Bt[Cr]&&!C[Cr]){delete Bt[Cr];var jr=it[Cr]||(it[ct]?it[ct][Cr]:void 0)||rd[u][Cr];s.attr(Cr,jr)}};for(var ye in m)Qt(ye);ct?Pt[ct]=Bt:(0,v.mix)(Pt,Bt);for(var U in $)if(!C[U]){var ce=$[U];(!(0,v.isPlainObject)(ce)||ed.includes(U))&&(ct?((0,v.mix)(it[ct],(a={},a[U]=ce,a)),delete it[U]):(0,v.mix)(it,(n={},n[U]=ce,n)),delete $[U])}var Ne={};(0,v.deepMix)(Ne,it,Pt,$);var $e=!1,Rr=function(Cr){var Cn,_n,Tr=Ne[Cr];if((0,v.isPlainObject)(Tr)&&!ed.includes(Cr)){var jr=w.shapeMap[Cr]||w.find(function(vn){return vn.get("name")===Cr});jr&&((jr.get("type")==="text"||jr.get("labelRelated"))&&(delete Tr.x,delete Tr.y,delete Tr.matrix),Cr===ct&&(u==="combo"&&(delete Tr.r,delete Tr.width,delete Tr.height),$e=!0),jr.attr(Tr))}else if(!$e){var dn=Tr||rd[u][Cr];u==="combo"?ct||s.attr((Cn={},Cn[Cr]=dn,Cn)):s.attr((_n={},_n[Cr]=dn,_n))}};for(var rn in Ne)Rr(rn)}}}},getStateStyle:function(e,t){var r=t.getModel(),n=t.getType(),a=this.getOptions(r),o=a.stateStyles,s=a.style,u=s===void 0?{}:s,f=r.stateStyles?r.stateStyles[e]:o&&o[e];return n==="combo"?(0,v.clone)(f):(0,v.mix)({},u,f)},getControlPoints:function(e){return e.controlPoints},getAnchorPoints:function(e){var t,r,n=(e==null?void 0:e.anchorPoints)||((t=this.getCustomConfig(e))===null||t===void 0?void 0:t.anchorPoints)||((r=this.options)===null||r===void 0?void 0:r.anchorPoints);return n}},$y={itemType:"node",shapeType:"single-node",labelPosition:"center",offset:Zt.nodeLabel.offset,getSize:function(e){var t,r=((t=this.mergeStyle)===null||t===void 0?void 0:t.size)||e.size||this.getOptions({}).size||Zt.defaultNode.size;return(0,v.isArray)(r)&&r.length===1&&(r=[r[0],r[0]]),(0,v.isArray)(r)||(r=[r,r]),r},getLabelStyleByPosition:function(e,t){var r=t.maxLength,n=e.label;r&&(n=Su(n,r));var a=t.position||this.labelPosition;if(a==="center")return{x:0,y:0,text:n,textBaseline:"middle",textAlign:"center"};var o=t.offset;(0,v.isNil)(o)&&(o=this.offset);var s=this.getSize(e),u;switch(a){case"top":u={x:0,y:-s[1]/2-o,textBaseline:"bottom",textAlign:"center"};break;case"bottom":u={x:0,y:s[1]/2+o,textBaseline:"top",textAlign:"center"};break;case"left":u={x:-s[0]/2-o,y:0,textBaseline:"middle",textAlign:"right"};break;default:u={x:s[0]/2+o,y:0,textBaseline:"middle",textAlign:"left"};break}return u.text=n,u},getLabelBgStyleByPosition:function(e,t){var r;if(!e)return{};var n=(r=t.style)===null||r===void 0?void 0:r.background;if(!n)return{};var a=e.getBBox(),o=Gd(n.padding),s=a.width+o[1]+o[3],u=a.height+o[0]+o[2];return(0,g.__assign)((0,g.__assign)({x:a.minX-o[3],y:a.minY-o[0]},n),{width:s,height:u})},drawShape:function(e,t){var r=this.shapeType,n=this.getShapeStyle(e),a=t.addShape(r,{attrs:n,draggable:!0,name:"node-shape"});return t.shapeMap["node-shape"]=a,a},updateLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=t.shapeMap["link-point-left"]||t.find(function(Ne){return Ne.get("className")==="link-point-left"}),a=t.shapeMap["link-point-right"]||t.find(function(Ne){return Ne.get("className")==="link-point-right"}),o=t.shapeMap["link-point-top"]||t.find(function(Ne){return Ne.get("className")==="link-point-top"}),s=t.shapeMap["link-point-bottom"]||t.find(function(Ne){return Ne.get("className")==="link-point-bottom"}),u;n&&(u=n.attr()),a&&!u&&(u=a.attr()),o&&!u&&(u=o.attr()),s&&!u&&(u=s.attr()),u||(u=r);var f=(0,v.mix)({},u,e.linkPoints),c=f.fill,l=f.stroke,m=f.lineWidth,w=f.size/2;w||(w=f.r);var C=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},D=C.left,U=C.right,$=C.top,tt=C.bottom,it=this.getSize(e),ct=it[0],_t=it[1],Bt={r:w,fill:c,stroke:l,lineWidth:m};if(n)!D&&D!==void 0?(n.remove(),delete t.shapeMap["link-point-left"]):n.attr((0,g.__assign)((0,g.__assign)({},Bt),{x:-ct/2,y:0}));else if(D){var Pt="link-point-left";t.shapeMap[Pt]=t.addShape("circle",{attrs:(0,g.__assign)((0,g.__assign)({},Bt),{x:-ct/2,y:0}),className:Pt,name:Pt,isAnchorPoint:!0})}if(a)!U&&U!==void 0&&(a.remove(),delete t.shapeMap["link-point-right"]),a.attr((0,g.__assign)((0,g.__assign)({},Bt),{x:ct/2,y:0}));else if(U){var Qt="link-point-right";t.shapeMap[Qt]=t.addShape("circle",{attrs:(0,g.__assign)((0,g.__assign)({},Bt),{x:ct/2,y:0}),className:Qt,name:Qt,isAnchorPoint:!0})}if(o)!$&&$!==void 0&&(o.remove(),delete t.shapeMap["link-point-top"]),o.attr((0,g.__assign)((0,g.__assign)({},Bt),{x:0,y:-_t/2}));else if($){var ye="link-point-top";t.shapeMap[ye]=t.addShape("circle",{attrs:(0,g.__assign)((0,g.__assign)({},Bt),{x:0,y:-_t/2}),className:ye,name:ye,isAnchorPoint:!0})}if(s)!tt&&tt!==void 0?(s.remove(),delete t.shapeMap["link-point-bottom"]):s.attr((0,g.__assign)((0,g.__assign)({},Bt),{x:0,y:_t/2}));else if(tt){var ce="link-point-bottom";t.shapeMap[ce]=t.addShape("circle",{attrs:(0,g.__assign)((0,g.__assign)({},Bt),{x:0,y:_t/2}),className:ce,name:ce,isAnchorPoint:!0})}},updateShape:function(e,t,r,n,a){var o=t.get("keyShape");o.attr((0,g.__assign)({},r)),this.updateLabel(e,t,a),n&&this.updateIcon(e,t)},updateIcon:function(e,t){var r=this,n=t.getContainer(),a=(this.mergeStyle||this.getOptions(e)).icon,o=e.icon?e.icon:{show:void 0,text:void 0},s=o.show,u=o.text,f=n.shapeMap["".concat(this.type,"-icon")]||n.find(function($){return $.get("name")==="".concat(r.type,"-icon")});if(f)if(s||s===void 0){var c=(0,v.mix)({},f.attr(),a),l=c.width,m=l===void 0?20:l,w=c.height,C=w===void 0?20:w;(c.fontFamily==="iconfont"||c.hasOwnProperty("text"))&&(m=0,C=0),f.attr((0,g.__assign)((0,g.__assign)({},c),{x:-m/2,y:-C/2}))}else f.remove(),delete n.shapeMap["".concat(this.type,"-icon")];else if(s){var D="".concat(this.type,"-icon");if(u)n.shapeMap[D]=n.addShape("text",{attrs:(0,g.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},a),className:D,name:D});else{var m=a.width,C=a.height;n.shapeMap[D]=n.addShape("image",{attrs:(0,g.__assign)((0,g.__assign)({},a),{x:-m/2,y:-C/2}),className:D,name:D})}var U=n.shapeMap["node-label"]||n.find(function($){return $.get("name")==="node-label"});U&&U.toFront()}}},Ky=(0,g.__assign)((0,g.__assign)({},Jd),$y);_s.registerNode("single-node",Ky);var nd="edge-shape";function Qy(i){var e=i;return i==="start"?e="end":i==="end"&&(e="start"),e}var Jy={itemType:"edge",labelPosition:"center",refX:0,refY:0,labelAutoRotate:!1,options:{size:Zt.defaultEdge.size,style:{x:0,y:0,stroke:Zt.defaultEdge.style.stroke,lineAppendWidth:Zt.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:Zt.edgeLabel.style.fill,fontSize:Zt.edgeLabel.style.fontSize,fontFamily:Zt.windowFontFamily}},stateStyles:(0,g.__assign)({},Zt.edgeStateStyles)},getPath:function(e){var t=[];return(0,v.each)(e,function(r,n){n===0?t.push(["M",r.x,r.y]):t.push(["L",r.x,r.y])}),t},getShapeStyle:function(e){var t=this.options.style,r={stroke:e.color},n=(0,v.mix)({},t,r,e.style),a=e.size||Zt.defaultEdge.size;e=this.getPathPoints(e);var o=e.startPoint,s=e.endPoint,u=this.getControlPoints(e),f=[o];u&&(f=f.concat(u)),f.push(s);var c=this.getPath(f),l=(0,v.mix)({},Zt.defaultEdge.style,{stroke:Zt.defaultEdge.color,lineWidth:a,path:c},n);return l},updateShapeStyle:function(e,t,r){var n,a=t.getContainer(),o=((n=t.getKeyShape)===null||n===void 0?void 0:n.call(t))||a.shapeMap["edge-shape"],s=e.size;e=this.getPathPoints(e);var u=e.startPoint,f=e.endPoint,c=this.getControlPoints(e),l=[u];c&&(l=l.concat(c)),l.push(f);var m=o.attr(),w=e.style||{};w.stroke===void 0&&(w.stroke=e.color);var C=e.sourceNode,D=e.targetNode,U={radius:w.radius};c||(U={source:C,target:D,offset:w.offset,radius:w.radius});var $=this.getPath(l,U),tt={};r==="move"?tt={path:$}:(m.endArrow&&w.endArrow===!1&&(e.style.endArrow={path:""}),m.startArrow&&w.startArrow===!1&&(e.style.startArrow={path:""}),tt=(0,g.__assign)({},e.style),tt.lineWidth===void 0&&(tt.lineWidth=((0,v.isNumber)(s)?s:s==null?void 0:s[0])||m.lineWidth),tt.path===void 0&&(tt.path=$),tt.stroke===void 0&&(tt.stroke=m.stroke||e.color)),o&&o.attr(tt)},getLabelStyleByPosition:function(e,t,r){var n=t.position||this.labelPosition,a={},o=r==null?void 0:r.shapeMap[nd],s;n==="start"?s=0:n==="end"?s=1:s=.5;var u=t.refX||this.refX,f=t.refY||this.refY;if(e.startPoint.x===e.endPoint.x&&e.startPoint.y===e.endPoint.y)return a.x=e.startPoint.x+u,a.y=e.startPoint.y+f,a.text=e.label,a;var c;(0,v.isNil)(t.autoRotate)?c=this.labelAutoRotate:c=t.autoRotate;var l=ho(o,s,u,f,c);return a.x=l.x,a.y=l.y,a.rotate=l.rotate,a.textAlign=this._getTextAlign(n,l.angle),a.text=e.label,a},getLabelBgStyleByPosition:function(e,t){if(!e)return{};var r=e.getBBox(),n=t.style&&t.style.background;if(!n)return{};var a=n.padding,o=r.width+a[1]+a[3],s=r.height+a[0]+a[2],u=(0,g.__assign)((0,g.__assign)({},n),{width:o,height:s,x:r.minX-a[3],y:r.minY-a[0],matrix:[1,0,0,0,1,0,0,0,1]}),f;return(0,v.isNil)(t.autoRotate)?f=this.labelAutoRotate:f=t.autoRotate,f&&(u.matrix=e.attr("matrix")||[1,0,0,0,1,0,0,0,1]),u},_getTextAlign:function(e,t){var r="center";return t?(t=t%(Math.PI*2),e!=="center"&&(t>=0&&t<=Math.PI/2||t>=3/2*Math.PI&&t<2*Math.PI?r=e:r=Qy(e)),r):e},getControlPoints:function(e){return e.controlPoints},getPathPoints:function(e){return e},drawShape:function(e,t){var r=this.getShapeStyle(e),n=t.addShape("path",{className:nd,name:nd,attrs:r});return t.shapeMap[nd]=n,n},drawLabel:function(e,t){var r=this.options.labelCfg,n=(0,v.deepMix)({},r,e.labelCfg),a=this.getLabelStyle(e,n,t),o=a.rotate;delete a.rotate;var s=t.addShape("text",{attrs:a,name:"text-shape",labelRelated:!0,draggable:!0});if(t.shapeMap["text-shape"]=s,!isNaN(o)&&o!==""&&s.rotateAtStart(o),a.background){var u=this.drawLabelBg(e,t,s,a,o),f=this.itemType+Qd;u.set("classname",f),t.shapeMap[f]=u,s.toFront()}return s},drawLabelBg:function(e,t,r,n,a){var o=this.options.labelCfg,s=(0,v.deepMix)({},o,e.labelCfg),u=this.getLabelBgStyleByPosition(r,s),f=t.addShape("rect",{name:"text-bg-shape",attrs:u,labelRelated:!0});return t.shapeMap["text-bg-shape"]=f,f}},tm=(0,g.__assign)((0,g.__assign)({},Jd),Jy);_s.registerEdge("single-edge",tm),_s.registerEdge("line",{getControlPoints:function(){}},"single-edge"),_s.registerEdge("spline",{getPath:function(e){var t=fp(e);return t}},"single-edge"),_s.registerEdge("arc",{curveOffset:20,clockwise:1,getControlPoints:function(e){var t=e.startPoint,r=e.endPoint,n={x:(t.x+r.x)/2,y:(t.y+r.y)/2},a,o;if(e.controlPoints!==void 0){if(o=e.controlPoints[0],a=Vo(t,o,r),t.x<=r.x&&t.y>r.y?this.clockwise=a.x>o.x?0:1:t.x<=r.x&&t.y<r.y?this.clockwise=a.x>o.x?1:0:t.x>r.x&&t.y<=r.y?this.clockwise=a.y<o.y?0:1:this.clockwise=a.y<o.y?1:0,(o.x-t.x)/(o.y-t.y)===(r.x-t.x)/(r.y-t.y))return[]}else{e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),(0,v.isArray)(e.curveOffset)&&(e.curveOffset=e.curveOffset[0]),e.curveOffset<0?this.clockwise=0:this.clockwise=1;var s={x:r.x-t.x,y:r.y-t.y},u=Math.atan2(s.y,s.x);o={x:e.curveOffset*Math.cos(-Math.PI/2+u)+n.x,y:e.curveOffset*Math.sin(-Math.PI/2+u)+n.y},a=Vo(t,o,r)}var f=Ho(t,a),c=[{x:f,y:f}];return c},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),e.length===2?t.push(["L",e[1].x,e[1].y]):t.push(["A",e[1].x,e[1].y,0,0,this.clockwise,e[2].x,e[2].y]),t}},"single-edge"),_s.registerEdge("quadratic",{curvePosition:.5,curveOffset:-20,getControlPoints:function(e){var t=e.controlPoints;if(!t||!t.length){var r=e.startPoint,n=e.endPoint;e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),(0,v.isArray)(e.curveOffset)&&(e.curveOffset=e.curveOffset[0]),(0,v.isArray)(e.curvePosition)&&(e.curvePosition=e.curveOffset[0]);var a=td(r,n,e.curvePosition,e.curveOffset);t=[a]}return t},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),t.push(["Q",e[1].x,e[1].y,e[2].x,e[2].y]),t}},"single-edge"),_s.registerEdge("cubic",{curvePosition:[1/2,1/2],curveOffset:[-20,20],getControlPoints:function(e){var t=e.controlPoints;if(e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),(0,v.isNumber)(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),(0,v.isNumber)(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]),!t||!t.length||t.length<2){var r=e.startPoint,n=e.endPoint,a=td(r,n,e.curvePosition[0],e.curveOffset[0]),o=td(r,n,e.curvePosition[1],e.curveOffset[1]);t=[a,o]}return t},getPath:function(e){var t=[];return t.push(["M",e[0].x,e[0].y]),t.push(["C",e[1].x,e[1].y,e[2].x,e[2].y,e[3].x,e[3].y]),t}},"single-edge"),_s.registerEdge("cubic-vertical",{curvePosition:[1/2,1/2],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(e){var t=e.startPoint,r=e.endPoint;e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.minCurveOffset===void 0&&(e.minCurveOffset=this.minCurveOffset),(0,v.isNumber)(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),(0,v.isNumber)(e.minCurveOffset)&&(e.minCurveOffset=[e.minCurveOffset,-e.minCurveOffset]),(0,v.isNumber)(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]);var n=r.y-t.y,a=[0,0];e.curveOffset?a=e.curveOffset:Math.abs(n)<Math.abs(e.minCurveOffset[0])&&(a=e.minCurveOffset);var o={x:t.x,y:t.y+n*this.curvePosition[0]+a[0]},s={x:r.x,y:r.y-n*this.curvePosition[1]+a[1]};return[o,s]}},"cubic"),_s.registerEdge("cubic-horizontal",{curvePosition:[1/2,1/2],minCurveOffset:[0,0],curveOffset:void 0,getControlPoints:function(e){var t=e.startPoint,r=e.endPoint;e.curvePosition===void 0&&(e.curvePosition=this.curvePosition),e.curveOffset===void 0&&(e.curveOffset=this.curveOffset),e.minCurveOffset===void 0&&(e.minCurveOffset=this.minCurveOffset),(0,v.isNumber)(e.curveOffset)&&(e.curveOffset=[e.curveOffset,-e.curveOffset]),(0,v.isNumber)(e.minCurveOffset)&&(e.minCurveOffset=[e.minCurveOffset,-e.minCurveOffset]),(0,v.isNumber)(e.curvePosition)&&(e.curvePosition=[e.curvePosition,1-e.curvePosition]);var n=r.x-t.x,a=[0,0];e.curveOffset?a=e.curveOffset:Math.abs(n)<Math.abs(e.minCurveOffset[0])&&(a=e.minCurveOffset);var o={x:t.x+n*this.curvePosition[0]+a[0],y:t.y},s={x:r.x-n*this.curvePosition[1]+a[1],y:r.y},u=[o,s];return u}},"cubic"),_s.registerEdge("loop",{getPathPoints:function(e){return Ji(e)},getControlPoints:function(e){return e.controlPoints},afterDraw:function(e){e.controlPoints=void 0},afterUpdate:function(e){e.controlPoints=void 0}},"cubic");var em={itemType:"combo",shapeType:"single-combo",labelPosition:"top",refX:Zt.comboLabel.refX,refY:Zt.comboLabel.refY,options:{style:{stroke:Zt.defaultCombo.style.stroke,fill:Zt.defaultCombo.style.fill,lineWidth:Zt.defaultCombo.style.lineWidth},labelCfg:{style:{fill:Zt.comboLabel.style.fill,fontSize:Zt.comboLabel.style.fontSize,fontFamily:Zt.windowFontFamily}},stateStyles:(0,g.__assign)({},Zt.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},getSize:function(e){var t=(0,v.clone)(e.size||this.options.size||Zt.defaultCombo.size);return(0,v.isArray)(t)&&t.length===1&&(t=[t[0],t[0]]),(0,v.isArray)(t)||(t=[t,t]),t},getLabelStyleByPosition:function(e,t){var r=t.position||this.labelPosition,n=e.style,a=e.padding||this.options.padding;(0,v.isArray)(a)&&(a=Math.max.apply(Math,a));var o=t.refX,s=t.refY;(0,v.isNil)(o)&&(o=this.refX),(0,v.isNil)(s)&&(s=this.refY);var u=this.getSize(e),f=Math.max(n.r,u[0]/2)||u[0]/2,c=f+a,l;switch(r){case"top":l={x:0,y:-c-s,textBaseline:"bottom",textAlign:"center"};break;case"bottom":l={x:0,y:c+s,textBaseline:"bottom",textAlign:"center"};break;case"left":l={x:-c+o,y:0,textAlign:"left"};break;case"center":l={x:0,y:0,text:e.label,textAlign:"center"};break;default:l={x:c+o,y:0,textAlign:"right"};break}return l.text=e.label,l},drawShape:function(e,t){var r=this.shapeType,n=this.getShapeStyle(e),a=t.addShape(r,{attrs:n,draggable:!0,name:"combo-shape"});return a},updateCollapsedIcon:function(e,t,r){var n=e.collapsed,a=e.collapsedSubstituteIcon,o=a===void 0?{}:a,s=Object.assign({},this.options.collapsedSubstituteIcon,o),u=s.show,f=s.img,c=s.width,l=s.height,m=t.getContainer(),w=m.find(function($){return $.get("name")==="combo-collapsed-substitute-icon"}),C=w&&!w.destroyed,D=t.get("keyShape");if(n&&u){if(C)w.show();else{var U={width:c||r.r*2||r.width,height:l||r.r*2||r.height};w=m.addShape("image",{attrs:(0,g.__assign)({img:f,x:-U.width/2,y:-U.height/2},U),name:"combo-collapsed-substitute-icon",draggable:!0})}D.hide()}else C&&(w.hide(),D.show())},updateShape:function(e,t,r){var n=this,a=t.get("keyShape"),o=t.get("animate"),s=o&&(e.animate===void 0?this.options.animate:e.animate);s&&a.animate?(e.collapsed||this.updateCollapsedIcon(e,t,r),a.animate(r,{duration:200,easing:"easeLinear",callback:function(){e.collapsed&&n.updateCollapsedIcon(e,t,r)}})):(a.attr((0,g.__assign)({},r)),this.updateCollapsedIcon(e,t,r)),this.updateLabel(e,t)}},rm=(0,g.__assign)((0,g.__assign)({},Jd),em);_s.registerCombo("single-combo",rm),_s.registerCombo("circle",{options:{size:[Zt.defaultCombo.size[0],Zt.defaultCombo.size[0]],padding:Math.max.apply(Math,Zt.defaultCombo.padding),animate:!0,style:{stroke:Zt.defaultCombo.style.stroke,fill:Zt.defaultCombo.style.fill,lineWidth:Zt.defaultCombo.style.lineWidth},labelCfg:{style:{fill:Zt.comboLabel.style.fill,fontSize:Zt.comboLabel.style.fontSize},refX:0,refY:0},stateStyles:(0,g.__assign)({},Zt.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},shapeType:"circle",labelPosition:"top",drawShape:function(e,t){var r=this.getShapeStyle(e);delete r.height,delete r.width;var n=t.addShape("circle",{attrs:r,className:"circle-combo",name:"circle-combo",draggable:!0});return n},getShapeStyle:function(e){var t=this.options.style,r=e.padding||this.options.padding;(0,v.isArray)(r)&&(r=Math.max.apply(Math,r));var n={stroke:e.color},a=(0,v.mix)({},t,n,e.style),o=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize,s;if(o)s=(0,v.isNumber)(o)?o/2:o[0]/2;else{var u=this.getSize(e);!(0,v.isNumber)(a.r)||isNaN(a.r)?s=u[0]/2||Zt.defaultCombo.style.r:s=Math.max(a.r,u[0]/2)||u[0]/2}a.r=s+r;var f=(0,g.__assign)({x:0,y:0},a);return e.style?e.style.r=s:e.style={r:s},f},update:function(e,t){var r=this.getSize(e),n=e.padding||this.options.padding;(0,v.isArray)(n)&&(n=Math.max.apply(Math,n));var a=(0,v.clone)(e.style),o=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize,s;o?s=(0,v.isNumber)(o)?o/2:o[0]/2:s=Math.max(a.r,r[0]/2)||r[0]/2,a.r=s+n;var u=t.get("sizeCache");u&&(u.r=a.r);var f={stroke:e.color},c=t.get("keyShape"),l=(0,v.mix)({},c.attr(),f,a);e.style?e.style.r=s:e.style={r:s},this.updateShape(e,t,l,!0)}},"single-combo"),_s.registerCombo("rect",{options:{size:[40,5],padding:[25,20,15,20],animate:!0,style:{radius:0,stroke:Zt.defaultCombo.style.stroke,fill:Zt.defaultCombo.style.fill,lineWidth:Zt.defaultCombo.style.lineWidth},labelCfg:{style:{fill:Zt.comboLabel.style.fill,fontSize:Zt.comboLabel.style.fontSize,fontFamily:Zt.windowFontFamily}},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,g.__assign)({},Zt.comboStateStyles),collapsedSubstituteIcon:{show:!1,img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*RsnHRqLfJn4AAAAAAAAAAAAAARQnAQ"}},shapeType:"rect",labelPosition:"top",drawShape:function(e,t){var r=this.getShapeStyle(e),n=t.addShape("rect",{attrs:r,className:"rect-combo",name:"rect-combo",draggable:!0});return n},getLabelStyleByPosition:function(e,t){var r=t.position||this.labelPosition,n=e.style,a=e.padding||this.options.padding;(0,v.isNumber)(a)&&(a=[a,a,a,a]);var o=t.refX,s=t.refY;(0,v.isNil)(o)&&(o=this.refX),(0,v.isNil)(s)&&(s=this.refY);var u=-n.width/2-a[3],f=n.width/2+a[1],c=-n.height/2-a[0],l=n.height/2+a[2],m;switch(r){case"top":m={x:u+o,y:c+s,textBaseline:"top",textAlign:"left"};break;case"bottom":m={x:0,y:l+s,textBaseline:"top",textAlign:"center"};break;case"left":m={x:u+s,y:0,textAlign:"left"};break;case"center":m={x:0,y:0,text:e.label,textAlign:"center"};break;case"top-center":m={x:0,y:c+s,textBaseline:"top",textAlign:"center"};break;default:m={x:f+o,y:0,textAlign:"right"};break}return m.text=e.label,m},getShapeStyle:function(e){var t=this.options.style,r=e.padding||this.options.padding;(0,v.isNumber)(r)&&(r=[r,r,r,r]);var n={stroke:e.color},a=(0,v.mix)({},t,n,e.style),o=this.getSize(e),s,u,f=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize;f?(0,v.isNumber)(f)?(s=f,u=f):(s=f[0],u=f[1]):(!(0,v.isNumber)(a.width)||isNaN(a.width)?s=o[0]||Zt.defaultCombo.style.width:s=Math.max(a.width,o[0])||o[0],!(0,v.isNumber)(a.height)||isNaN(a.height)?u=o[1]||Zt.defaultCombo.style.height:u=Math.max(a.height,o[1])||o[1]);var c=-s/2-r[3],l=-u/2-r[0];a.width=s+r[1]+r[3],a.height=u+r[0]+r[2];var m=(0,g.__assign)({x:c,y:l},a);return e.style?(e.style.width=s,e.style.height=u):e.style={width:s,height:u},m},update:function(e,t){var r=this.getSize(e),n=e.padding||this.options.padding;(0,v.isNumber)(n)&&(n=[n,n,n,n]);var a=(0,v.clone)(e.style),o,s,u=e.collapsed&&e.fixCollapseSize?e.fixCollapseSize:e.fixSize;u?(0,v.isNumber)(u)?(o=u,s=u):(o=u[0],s=u[1]):(o=Math.max(a.width,r[0])||r[0],s=Math.max(a.height,r[1])||r[1]),a.width=o+n[1]+n[3],a.height=s+n[0]+n[2];var f=t.get("sizeCache");f&&(f.width=a.width,f.height=a.height),a.x=-o/2-n[3],a.y=-s/2-n[0];var c={stroke:e.color},l=t.get("keyShape"),m=(0,v.mix)({},l.attr(),c,a);e.style?(e.style.width=o,e.style.height=s):e.style={width:o,height:s},this.updateShape(e,t,m,!1)}},"single-combo"),_s.registerNode("simple-circle",{options:{size:Zt.defaultNode.size,style:{x:0,y:0,stroke:Zt.defaultNode.style.stroke,fill:Zt.defaultNode.style.fill,lineWidth:Zt.defaultNode.style.lineWidth},labelCfg:{style:{fill:Zt.nodeLabel.style.fill,fontSize:Zt.nodeLabel.style.fontSize,fontFamily:Zt.windowFontFamily}},stateStyles:(0,g.__assign)({},Zt.nodeStateStyles)},shapeType:"simple-circle",labelPosition:"center",shapeMap:{},drawShape:function(e,t){var r=this.getShapeStyle(e),n="".concat(this.type,"-keyShape"),a=t.addShape("circle",{attrs:r,className:"".concat(this.type,"-keyShape"),name:n,draggable:!0});return t.shapeMap[n]=a,a},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,v.deepMix)({},t,r),a=this.getSize(e),o=a[0]/2,s=(0,g.__assign)({x:0,y:0,r:o},n);return s},update:function(e,t,r){var n=this.getSize(e),a={stroke:e.color,r:n[0]/2},o=t.get("keyShape"),s=(0,v.deepMix)({},o.attr(),a,e.style);this.updateShape(e,t,s,!0,r)}},"single-node"),_s.registerNode("simple-rect",{options:{size:[100,30],style:{radius:0,stroke:Zt.defaultNode.style.stroke,fill:Zt.defaultNode.style.fill,lineWidth:Zt.defaultNode.style.lineWidth},labelCfg:{style:{fill:Zt.nodeLabel.style.fill,fontSize:Zt.nodeLabel.style.fontSize,fontFamily:Zt.windowFontFamily}},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,g.__assign)({},Zt.nodeStateStyles)},shapeType:"simple-rect",labelPosition:"center",drawShape:function(e,t){var r=this.getShapeStyle(e),n=t.addShape("rect",{attrs:r,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return n},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,v.mix)({},t,r),a=this.getSize(e),o=n.width||a[0],s=n.height||a[1],u=(0,g.__assign)({x:-o/2,y:-s/2,width:o,height:s},n);return u},update:function(e,t,r){var n=t.getContainer(),a=(this.mergeStyle||this.getOptions(e)).style,o=this.getSize(e),s=t.get("keyShape");e.size||(o[0]=s.attr("width")||a.width,o[1]=s.attr("height")||a.height);var u={stroke:e.color,x:-o[0]/2,y:-o[1]/2,width:o[0],height:o[1]},f=(0,v.mix)({},a,s.attr(),u);f=(0,v.mix)(f,e.style),this.updateShape(e,t,f,!1,r)}},"single-node"),_s.registerNode("image",{options:{img:"https://gw.alipayobjects.com/mdn/rms_f8c6a0/afts/img/A*eD7nT6tmYgAAAAAAAAAAAABkARQnAQ",size:200,labelCfg:{style:{fontFamily:Zt.windowFontFamily}},clipCfg:{show:!1,type:"circle",r:50,rx:50,ry:35,width:50,height:35,points:[[30,12],[12,30],[30,48],[48,30]],path:[["M",25,25],["L",50,25],["A",12.5,12.5,0,1,1,50,50],["A",12.5,12.5,0,1,0,50,50],["L",25,75],["Z"]],x:0,y:0}},shapeType:"image",labelPosition:"bottom",drawShape:function(e,t){var r=this.shapeType,n=this.getShapeStyle(e);delete n.fill;var a=t.addShape(r,{attrs:n,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return this.drawClip(e,a),a},drawClip:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).clipCfg;if(r.show){var n=r.type,a=r.x,o=r.y,s=r.style;if(n==="circle"){var u=r.r;t.setClip({type:"circle",attrs:(0,g.__assign)({r:u,x:a,y:o},s)})}else if(n==="rect"){var f=r.width,c=r.height,l=a-f/2,m=o-c/2;t.setClip({type:"rect",attrs:(0,g.__assign)({x:l,y:m,width:f,height:c},s)})}else if(n==="ellipse"){var w=r.rx,C=r.ry;t.setClip({type:"ellipse",attrs:(0,g.__assign)({x:a,y:o,rx:w,ry:C},s)})}else if(n==="polygon"){var D=r.points;t.setClip({type:"polygon",attrs:(0,g.__assign)({points:D},s)})}else if(n==="path"){var U=r.path;t.setClip({type:"path",attrs:(0,g.__assign)({path:U},s)})}}},getShapeStyle:function(e){var t=this.mergeStyle||this.getOptions(e),r=t.style,n=t.img,a=this.getSize(e),o=a[0],s=a[1];r&&(o=r.width||a[0],s=r.height||a[1]);var u=(0,g.__assign)({x:-o/2,y:-s/2,width:o,height:s,img:n},r);return u},updateShapeStyle:function(e,t){var r=t.getContainer(),n="".concat(this.itemType,"-shape"),a=r.shapeMap[n]||r.find(function(s){return s.get("className")===n})||t.getKeyShape(),o=this.getShapeStyle(e);a&&!a.destroyed&&a.attr(o)}},"single-node");var Ep={triangle:function(e,t,r){e===void 0&&(e=10),t===void 0&&(t=15),r===void 0&&(r=0);var n=r*2,a="M ".concat(n,",0 L ").concat(n+t,",-").concat(e/2," L ").concat(n+t,",").concat(e/2," Z");return a},vee:function(e,t,r){e===void 0&&(e=15),t===void 0&&(t=20),r===void 0&&(r=0);var n=r*2,a="M ".concat(n,",0 L ").concat(n+t,",-").concat(e/2,`
        L `).concat(n+2*t/3,",0 L ").concat(n+t,",").concat(e/2," Z");return a},circle:function(e,t){e===void 0&&(e=5),t===void 0&&(t=0);var r=t*2,n="M ".concat(r,`, 0
            a `).concat(e,",").concat(e," 0 1,0 ").concat(e*2,`,0
            a `).concat(e,",").concat(e," 0 1,0 ").concat(-e*2,",0");return n},rect:function(e,t,r){e===void 0&&(e=10),t===void 0&&(t=10),r===void 0&&(r=0);var n=r*2,a="M ".concat(n,",").concat(-e/2,` 
        L `).concat(n+t,",").concat(-e/2,` 
        L `).concat(n+t,",").concat(e/2,` 
        L `).concat(n,",").concat(e/2," Z");return a},diamond:function(e,t,r){e===void 0&&(e=15),t===void 0&&(t=15),r===void 0&&(r=0);var n=r*2,a="M ".concat(n,`,0 
        L `).concat(n+t/2,",").concat(-e/2,` 
        L `).concat(n+t,`,0 
        L `).concat(n+t/2,",").concat(e/2," Z");return a},triangleRect:function(e,t,r,n,a,o){e===void 0&&(e=15),t===void 0&&(t=15),r===void 0&&(r=15),n===void 0&&(n=3),a===void 0&&(a=5),o===void 0&&(o=0);var s=o*2,u=s+t+a,f="M ".concat(s,",0 L ").concat(s+t,",-").concat(e/2," L ").concat(s+t,",").concat(e/2,` Z
            M `).concat(u,", -").concat(r/2,`
            L `).concat(u+n," -").concat(r/2,`
            L `).concat(u+n," ").concat(r/2,`
            L `).concat(u," ").concat(r/2,`
            Z`);return f}},_p={collapse:function(e,t,r){return[["M",e-r,t],["a",r,r,0,1,0,r*2,0],["a",r,r,0,1,0,-r*2,0],["M",e-r+4,t],["L",e+r-4,t]]},expand:function(e,t,r){return[["M",e-r,t],["a",r,r,0,1,0,r*2,0],["a",r,r,0,1,0,-r*2,0],["M",e-r+4,t],["L",e-r+2*r-4,t],["M",e-r+r,t-r+4],["L",e,t+r-4]]},upTriangle:function(e,t,r){var n=r*Math.cos(Math.PI/6),a=r*Math.sin(Math.PI/6);return[["M",e-n,t+a],["L",e+n,t+a],["L",e,t-r],["Z"]]},downTriangle:function(e,t,r){var n=r*Math.cos(Math.PI/6),a=r*Math.sin(Math.PI/6);return[["M",e-n,t-a],["L",e+n,t-a],["L",e,t+r],["Z"]]}},Vc=_s,nm=["#5F95FF","#61DDAA","#65789B","#F6BD16","#7262FD","#78D3F8","#9661BC","#F6903D","#008685","#F08BB4"],Sp=function(e){return e==="force"||e==="g6force"||e==="gForce"||e==="force2"},am=Ht,im=(0,g.__assign)((0,g.__assign)((0,g.__assign)((0,g.__assign)((0,g.__assign)((0,g.__assign)((0,g.__assign)({},F),V),M),nt),A),y),{transform:am,mat3:rt}),Ns=im,om=function(){function i(e){this.graph=e,this.layoutCfg=e.get("layout")||{},this.layoutType=this.getLayoutType(),this.layoutMethods=[],this.initLayout()}return i.prototype.initLayout=function(){},i.prototype.getLayoutType=function(){return this.getLayoutCfgType(this.layoutCfg)},i.prototype.getLayoutCfgType=function(e){var t=e.type;if(t)return t;var r=e.pipes;return Array.isArray(r)?r.map(function(n){return(n==null?void 0:n.type)||""}):null},i.prototype.isLayoutTypeSame=function(e){var t=this.getLayoutCfgType(e),r=Array.isArray(this.layoutType),n=Array.isArray(t);return r&&n?this.layoutType.every(function(a,o){return a===t[o]}):Array.isArray(t)||Array.isArray(this.layoutType)?!1:(e==null?void 0:e.type)===this.layoutType},i.prototype.refreshLayout=function(){var e=this,t=e.graph,r=e.layoutType,n=e.layoutCfg,a=n===void 0?{}:n;if(t){var o=a.animate,s=o===void 0&&(r==="force"||r==="force2"),u=Sp(r)&&(o||s);t.get("animate")&&!u?t.positionsAnimate(r==="comboCombined"):t.refreshPositions(r==="comboCombined")}},i.prototype.changeLayout=function(e){var t=e.disableTriggerLayout,r=(0,g.__rest)(e,["disableTriggerLayout"]);this.layoutCfg=r,this.layoutType=r.type||this.layoutType,!t&&this.layout()},i.prototype.changeData=function(e){this.layout(e)},i.prototype.destoryLayoutMethods=function(){var e=this.layoutMethods,t=[];return e==null||e.forEach(function(r){var n,a=(n=r.getType)===null||n===void 0?void 0:n.call(r);a&&t.push(a),r.destroy()}),this.layoutMethods=[],t},i.prototype.destroyLayout=function(){this.destoryLayoutMethods();var e=this.graph;e&&!e.get("destroyed")&&e.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0},i.prototype.setDataFromGraph=function(){for(var e,t=[],r=[],n=[],a=[],o=[],s=[],u=[],f=this.graph.getNodes(),c=this.graph.getEdges(),l=this.graph.getCombos(),m=f.length,w=0;w<m;w++){var C=f[w];if(!(!C||C.destroyed)){var D=C.getModel();if(!C.isVisible()){r.push(D);continue}t.push(D)}}for(var U=c.length,w=0;w<U;w++){var $=c[w];if(!(!$||$.destroyed)){var D=$.getModel();if(!$.isVisible()){a.push(D);continue}D.isComboEdge?o.push(D):n.push(D)}}for(var tt=l.length,w=0;w<tt;w++){var it=l[w];if(!it.destroyed){var D=it.getModel();if(!it.isVisible()){u.push(D);continue}s.push(D)}}return{nodes:t,hiddenNodes:r,edges:n,hiddenEdges:a,combos:s,hiddenCombos:u,comboEdges:o,vedges:(e=this.graph.get("vedges"))===null||e===void 0?void 0:e.map(function(ct){return ct.getModel()})}},i.prototype.relayout=function(e){var t=this,r=this,n=r.graph,a=r.layoutMethods,o=r.layoutCfg;if(!(!n||n.get("destroyed"))){var s=Promise.resolve();if(e){this.data=this.setDataFromGraph();var u=this.data.nodes;if(!u)return!1;s=this.initPositions(o.center,u)}n.emit("beforelayout"),a==null||a.forEach(function(f,c){var l=o[c]||o;s=s.then(function(){var m,w=t.execLayoutMethod(l,c);return c===a.length-1&&((m=o.onAllLayoutEnd)===null||m===void 0||m.call(o)),w})})}},i.prototype.filterLayoutData=function(e,t){var r=e.nodes,n=e.edges,a=(0,g.__rest)(e,["nodes","edges"]);if(!r)return e;var o,s;(0,v.isFunction)(t==null?void 0:t.nodesFilter)?o=t.nodesFilter:o=function(){return!0};var u=r.filter(o);if((0,v.isFunction)(t==null?void 0:t.edgesFilter))s=t.edgesFilter;else{var f=u.reduce(function(c,l){return c[l.id]=!0,c},{});s=function(l){return f[l.source]&&f[l.target]}}return(0,g.__assign)({nodes:u,edges:n.filter(s)},a)},i.prototype.getLayoutBBox=function(e){var t=this.graph,r=(0,v.groupBy)(t.getNodes(),function(o){return o.getModel().layoutOrder}),n=Object.values(r).map(function(o){var s=jv(o);return s.size=[s.width,s.height],s}),a=Object.values((0,v.groupBy)(e,"layoutOrder"));return{groupNodes:a,layoutNodes:n}},i.prototype.layoutAnimate=function(){},i.prototype.moveToZero=function(){var e=this.graph,t=e.get("data"),r=t.nodes;if(!(r[0].x===void 0||r[0].x===null||Tf(r[0].x))){for(var n=[0,0],a=r.length,o=0;o<a;o++){var s=r[o];n[0]+=s.x,n[1]+=s.y}n[0]/=r.length,n[1]/=r.length;for(var o=0;o<a;o++){var s=r[o];s.x-=n[0],s.y-=n[1]}}},i.prototype.initPositions=function(e,t){var r;return(0,g.__awaiter)(this,void 0,void 0,function(){var n,a,o;return(0,g.__generator)(this,function(s){return n=this.graph,t!=null&&t.length?(a=t.filter(function(u){return Tf(u.x)||Tf(u.y)}),o=a?a.length:0,o?[2,(r=this.initWithPreset)===null||r===void 0?void 0:r.call(this,function(){},function(){var u=n.get("width")*.85,f=n.get("height")*.85,c=Math.ceil(Math.sqrt(o)*(u/f)),l=Math.ceil(o/c),m=u/(c-1),w=f/(l-1);(!isFinite(m)||!m)&&(m=0),(!isFinite(w)||!m)&&(w=0);for(var C=e[0]-u/2,D=e[1]-f/2,U=!0,$=0;$<o;$++){var tt=a[$];Tf(+tt.x)&&(U=!1,tt.x=$%c*m+C),Tf(+tt.y)&&(U=!1,tt.y=Math.floor($/c)*w+D)}})]:[2]):[2,Promise.resolve()]})})},i.prototype.destroy=function(){this.graph=null,this.destoryLayoutMethods(),this.destroyed=!0},i}(),Mp=om,sm=function(){function i(e){this.graph=e,this.destroyed=!1,this.initEvents()}return i}(),Ap=sm,uc=Vc.registerNode,Cp=Vc.registerEdge,um=Vc.registerCombo,Tp=Y.registerBehavior,An=Zt,O2={version:Zt.version,AbstractGraph:bp,BaseGlobal:An,Util:Ns,Shape:Vc,Node:Hd,Edge:rp,Combo:op,Hull:mp,registerNode:Vc.registerNode,registerEdge:Vc.registerEdge,registerCombo:Vc.registerCombo,registerBehavior:Y.registerBehavior,Arrow:Ep,Marker:_p,AbstractLayout:Mp,AbstractEvent:Ap},fm=et(10369);function cm(){return window?window.devicePixelRatio:1}function Ip(i,e,t,r){var n=i-t,a=e-r;return Math.sqrt(n*n+a*a)}function Il(i,e,t,r,n,a){return n>=i&&n<=i+t&&a>=e&&a<=e+r}function Ah(i,e){return!(e.minX>i.maxX||e.maxX<i.minX||e.minY>i.maxY||e.maxY<i.minY)}function lm(i,e){return!i||!e?i||e:{minX:Math.min(i.minX,e.minX),minY:Math.min(i.minY,e.minY),maxX:Math.max(i.maxX,e.maxX),maxY:Math.max(i.maxY,e.maxY)}}function kp(i,e){return i[0]===e[0]&&i[1]===e[1]}var hm=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,dm=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,vm=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,Lp=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function Np(i,e){var t=i.match(Lp);(0,v.each)(t,function(r){var n=r.split(":");e.addColorStop(n[0],n[1])})}function pm(i,e,t){var r=hm.exec(t),n=parseFloat(r[1])%360*(Math.PI/180),a=r[2],o=e.getBBox(),s,u;n>=0&&n<1/2*Math.PI?(s={x:o.minX,y:o.minY},u={x:o.maxX,y:o.maxY}):1/2*Math.PI<=n&&n<Math.PI?(s={x:o.maxX,y:o.minY},u={x:o.minX,y:o.maxY}):Math.PI<=n&&n<3/2*Math.PI?(s={x:o.maxX,y:o.maxY},u={x:o.minX,y:o.minY}):(s={x:o.minX,y:o.maxY},u={x:o.maxX,y:o.minY});var f=Math.tan(n),c=f*f,l=(u.x-s.x+f*(u.y-s.y))/(c+1)+s.x,m=f*(u.x-s.x+f*(u.y-s.y))/(c+1)+s.y,w=i.createLinearGradient(s.x,s.y,l,m);return Np(a,w),w}function gm(i,e,t){var r=dm.exec(t),n=parseFloat(r[1]),a=parseFloat(r[2]),o=parseFloat(r[3]),s=r[4];if(o===0){var u=s.match(Lp);return u[u.length-1].split(":")[1]}var f=e.getBBox(),c=f.maxX-f.minX,l=f.maxY-f.minY,m=Math.sqrt(c*c+l*l)/2,w=i.createRadialGradient(f.minX+c*n,f.minY+l*a,0,f.minX+c/2,f.minY+l/2,o*m);return Np(s,w),w}function ym(i,e,t){if(e.get("patternSource")&&e.get("patternSource")===t)return e.get("pattern");var r,n,a=vm.exec(t),o=a[1],s=a[2];function u(){r=i.createPattern(n,o),e.set("pattern",r),e.set("patternSource",t)}switch(o){case"a":o="repeat";break;case"x":o="repeat-x";break;case"y":o="repeat-y";break;case"n":o="no-repeat";break;default:o="no-repeat"}return n=new Image,s.match(/^data:/i)||(n.crossOrigin="Anonymous"),n.src=s,n.complete?u():(n.onload=u,n.src=n.src),r}function mm(i,e,t){var r=e.getBBox();if(isNaN(r.x)||isNaN(r.y)||isNaN(r.width)||isNaN(r.height))return t;if((0,v.isString)(t)){if(t[1]==="("||t[2]==="("){if(t[0]==="l")return pm(i,e,t);if(t[0]==="r")return gm(i,e,t);if(t[0]==="p")return ym(i,e,t)}return t}if(t instanceof CanvasPattern)return t}function bm(i){var e=0,t=0,r=0,n=0;return(0,v.isArray)(i)?i.length===1?e=t=r=n=i[0]:i.length===2?(e=r=i[0],t=n=i[1]):i.length===3?(e=i[0],t=n=i[1],r=i[2]):(e=i[0],t=i[1],r=i[2],n=i[3]):e=t=r=n=i,[e,t,r,n]}function ad(i){return Math.sqrt(i[0]*i[0]+i[1]*i[1])}function tv(i,e){return ad(i)*ad(e)?(i[0]*e[0]+i[1]*e[1])/(ad(i)*ad(e)):1}function Op(i,e){return(i[0]*e[1]<i[1]*e[0]?-1:1)*Math.acos(tv(i,e))}function Dp(i,e){var t=e[1],r=e[2],n=(0,v.mod)((0,v.toRadian)(e[3]),Math.PI*2),a=e[4],o=e[5],s=i[0],u=i[1],f=e[6],c=e[7],l=Math.cos(n)*(s-f)/2+Math.sin(n)*(u-c)/2,m=-1*Math.sin(n)*(s-f)/2+Math.cos(n)*(u-c)/2,w=l*l/(t*t)+m*m/(r*r);w>1&&(t*=Math.sqrt(w),r*=Math.sqrt(w));var C=t*t*(m*m)+r*r*(l*l),D=C?Math.sqrt((t*t*(r*r)-C)/C):1;a===o&&(D*=-1),isNaN(D)&&(D=0);var U=r?D*t*m/r:0,$=t?D*-r*l/t:0,tt=(s+f)/2+Math.cos(n)*U-Math.sin(n)*$,it=(u+c)/2+Math.sin(n)*U+Math.cos(n)*$,ct=[(l-U)/t,(m-$)/r],_t=[(-1*l-U)/t,(-1*m-$)/r],Bt=Op([1,0],ct),Pt=Op(ct,_t);return tv(ct,_t)<=-1&&(Pt=Math.PI),tv(ct,_t)>=1&&(Pt=0),o===0&&Pt>0&&(Pt=Pt-2*Math.PI),o===1&&Pt<0&&(Pt=Pt+2*Math.PI),{cx:tt,cy:it,rx:kp(i,[f,c])?0:t,ry:kp(i,[f,c])?0:r,startAngle:Bt,endAngle:Bt+Pt,xRotation:n,arcFlag:a,sweepFlag:o}}var id=Math.sin,od=Math.cos,ev=Math.atan2,sd=Math.PI;function Pp(i,e,t,r,n,a,o){var s=e.stroke,u=e.lineWidth,f=t-n,c=r-a,l=ev(c,f),m=new uv({type:"path",canvas:i.get("canvas"),isArrowShape:!0,attrs:{path:"M"+10*od(sd/6)+","+10*id(sd/6)+" L0,0 L"+10*od(sd/6)+",-"+10*id(sd/6),stroke:s,lineWidth:u}});m.translate(n,a),m.rotateAtPoint(n,a,l),i.set(o?"startArrowShape":"endArrowShape",m)}function Rp(i,e,t,r,n,a,o){var s=e.startArrow,u=e.endArrow,f=e.stroke,c=e.lineWidth,l=o?s:u,m=l.d,w=l.fill,C=l.stroke,D=l.lineWidth,U=(0,g.__rest)(l,["d","fill","stroke","lineWidth"]),$=t-n,tt=r-a,it=ev(tt,$);m&&(n=n-od(it)*m,a=a-id(it)*m);var ct=new uv({type:"path",canvas:i.get("canvas"),isArrowShape:!0,attrs:(0,g.__assign)((0,g.__assign)({},U),{stroke:C||f,lineWidth:D||c,fill:w})});ct.translate(n,a),ct.rotateAtPoint(n,a,it),i.set(o?"startArrowShape":"endArrowShape",ct)}function kl(i,e,t,r,n){var a=ev(r-e,t-i);return{dx:od(a)*n,dy:id(a)*n}}function rv(i,e,t,r,n,a){typeof e.startArrow=="object"?Rp(i,e,t,r,n,a,!0):e.startArrow?Pp(i,e,t,r,n,a,!0):i.set("startArrowShape",null)}function nv(i,e,t,r,n,a){typeof e.endArrow=="object"?Rp(i,e,t,r,n,a,!1):e.endArrow?Pp(i,e,t,r,n,a,!1):i.set("startArrowShape",null)}var Bp={fill:"fillStyle",stroke:"strokeStyle",opacity:"globalAlpha"};function hh(i,e){var t=e.attr();for(var r in t){var n=t[r],a=Bp[r]?Bp[r]:r;a==="matrix"&&n?i.transform(n[0],n[1],n[3],n[4],n[6],n[7]):a==="lineDash"&&i.setLineDash?(0,v.isArray)(n)&&i.setLineDash(n):(a==="strokeStyle"||a==="fillStyle"?n=mm(i,e,n):a==="globalAlpha"&&(n=n*i.globalAlpha),i[a]=n)}}function av(i,e,t){for(var r=0;r<e.length;r++){var n=e[r];n.cfg.visible?n.draw(i,t):n.skipDraw()}}function xm(i,e,t){var r=i.get("refreshElements");(0,v.each)(r,function(n){if(n!==i)for(var a=n.cfg.parent;a&&a!==i&&!a.cfg.refresh;)a.cfg.refresh=!0,a=a.cfg.parent}),r[0]===i?ov(e,t):iv(e,t)}function iv(i,e){for(var t=0;t<i.length;t++){var r=i[t];if(r.cfg.visible)if(r.cfg.hasChanged)r.cfg.refresh=!0,r.isGroup()&&ov(r.cfg.children,e);else if(r.cfg.refresh)r.isGroup()&&iv(r.cfg.children,e);else{var n=wm(r,e);r.cfg.refresh=n,n&&r.isGroup()&&iv(r.cfg.children,e)}}}function Fp(i){for(var e=0;e<i.length;e++){var t=i[e];t.cfg.hasChanged=!1,t.isGroup()&&!t.destroyed&&Fp(t.cfg.children)}}function ov(i,e){for(var t=0;t<i.length;t++){var r=i[t];r.cfg.visible&&(r.cfg.refresh=!0,r.isGroup()&&ov(r.get("children"),e))}}function wm(i,e){var t=i.cfg.cacheCanvasBBox,r=i.cfg.isInView&&t&&Ah(t,e);return r}function Gp(i,e,t,r){var n=t.path,a=t.startArrow,o=t.endArrow;if(n){var s=[0,0],u=[0,0],f={dx:0,dy:0};e.beginPath();for(var c=0;c<n.length;c++){var l=n[c],m=l[0];if(c===0&&a&&a.d){var w=i.getStartTangent();f=kl(w[0][0],w[0][1],w[1][0],w[1][1],a.d)}else if(c===n.length-2&&n[c+1][0]==="Z"&&o&&o.d){var C=n[c+1];if(C[0]==="Z"){var w=i.getEndTangent();f=kl(w[0][0],w[0][1],w[1][0],w[1][1],o.d)}}else if(c===n.length-1&&o&&o.d&&n[0]!=="Z"){var w=i.getEndTangent();f=kl(w[0][0],w[0][1],w[1][0],w[1][1],o.d)}var D=f.dx,U=f.dy;switch(m){case"M":e.moveTo(l[1]-D,l[2]-U),u=[l[1],l[2]];break;case"L":e.lineTo(l[1]-D,l[2]-U);break;case"Q":e.quadraticCurveTo(l[1],l[2],l[3]-D,l[4]-U);break;case"C":e.bezierCurveTo(l[1],l[2],l[3],l[4],l[5]-D,l[6]-U);break;case"A":{var $=void 0;r?($=r[c],$||($=Dp(s,l),r[c]=$)):$=Dp(s,l);var tt=$.cx,it=$.cy,ct=$.rx,_t=$.ry,Bt=$.startAngle,Pt=$.endAngle,Qt=$.xRotation,ye=$.sweepFlag;if(e.ellipse)e.ellipse(tt,it,ct,_t,Qt,Bt,Pt,1-ye);else{var ce=ct>_t?ct:_t,Ne=ct>_t?1:ct/_t,$e=ct>_t?_t/ct:1;e.translate(tt,it),e.rotate(Qt),e.scale(Ne,$e),e.arc(0,0,ce,Bt,Pt,1-ye),e.scale(1/Ne,1/$e),e.rotate(-Qt),e.translate(-tt,-it)}break}case"Z":e.closePath();break;default:break}if(m==="Z")s=u;else{var Rr=l.length;s=[l[Rr-2],l[Rr-1]]}}}}function zp(i,e){var t=i.get("canvas");t&&(e==="remove"&&(i._cacheCanvasBBox=i.get("cacheCanvasBBox")),i.get("hasChanged")||(i.set("hasChanged",!0),i.cfg.parent&&i.cfg.parent.get("hasChanged")||(t.refreshElement(i,e,t),t.get("autoDraw")&&t.draw())))}function Em(i){var e;if(i.destroyed)e=i._cacheCanvasBBox;else{var t=i.get("cacheCanvasBBox"),r=t&&!!(t.width&&t.height),n=i.getCanvasBBox(),a=n&&!!(n.width&&n.height);r&&a?e=lm(t,n):r?e=t:a&&(e=n)}return e}function _m(i){if(!i.length)return null;var e=[],t=[],r=[],n=[];return(0,v.each)(i,function(a){var o=Em(a);o&&(e.push(o.minX),t.push(o.minY),r.push(o.maxX),n.push(o.maxY))}),{minX:(0,v.min)(e),minY:(0,v.min)(t),maxX:(0,v.max)(r),maxY:(0,v.max)(n)}}function Sm(i,e){return!i||!e||!Ah(i,e)?null:{minX:Math.max(i.minX,e.minX),minY:Math.max(i.minY,e.minY),maxX:Math.min(i.maxX,e.maxX),maxY:Math.min(i.maxY,e.maxY)}}var Mm=function(i){(0,g.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.onCanvasChange=function(t){zp(this,t)},e.prototype.getShapeBase=function(){return x},e.prototype.getGroupBase=function(){return e},e.prototype._applyClip=function(t,r){r&&(t.save(),hh(t,r),r.createPath(t),t.restore(),t.clip(),r._afterDraw())},e.prototype.cacheCanvasBBox=function(){var t=this.cfg.children,r=[],n=[];(0,v.each)(t,function(m){var w=m.cfg.cacheCanvasBBox;w&&m.cfg.isInView&&(r.push(w.minX,w.maxX),n.push(w.minY,w.maxY))});var a=null;if(r.length){var o=(0,v.min)(r),s=(0,v.max)(r),u=(0,v.min)(n),f=(0,v.max)(n);a={minX:o,minY:u,x:o,y:u,maxX:s,maxY:f,width:s-o,height:f-u};var c=this.cfg.canvas;if(c){var l=c.getViewRange();this.set("isInView",Ah(a,l))}}else this.set("isInView",!1);this.set("cacheCanvasBBox",a)},e.prototype.draw=function(t,r){var n=this.cfg.children,a=r?this.cfg.refresh:!0;n.length&&a&&(t.save(),hh(t,this),this._applyClip(t,this.getClip()),av(t,n,r),t.restore(),this.cacheCanvasBBox()),this.cfg.refresh=null,this.set("hasChanged",!1)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("hasChanged",!1)},e}(Yc),Up=Mm,Am=function(i){(0,g.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,g.__assign)((0,g.__assign)({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},e.prototype.getShapeBase=function(){return x},e.prototype.getGroupBase=function(){return Up},e.prototype.onCanvasChange=function(t){zp(this,t)},e.prototype.calculateBBox=function(){var t=this.get("type"),r=this.getHitLineWidth(),n=Tl(t),a=n(this),o=r/2,s=a.x-o,u=a.y-o,f=a.x+a.width+o,c=a.y+a.height+o;return{x:s,minX:s,y:u,minY:u,width:a.width+r,height:a.height+r,maxX:f,maxY:c}},e.prototype.isFill=function(){return!!this.attrs.fill||this.isClipShape()},e.prototype.isStroke=function(){return!!this.attrs.stroke},e.prototype._applyClip=function(t,r){r&&(t.save(),hh(t,r),r.createPath(t),t.restore(),t.clip(),r._afterDraw())},e.prototype.draw=function(t,r){var n=this.cfg.clipShape;if(r){if(this.cfg.refresh===!1){this.set("hasChanged",!1);return}var a=this.getCanvasBBox();if(!Ah(r,a)){this.set("hasChanged",!1),this.cfg.isInView&&this._afterDraw();return}}t.save(),hh(t,this),this._applyClip(t,n),this.drawPath(t),t.restore(),this._afterDraw()},e.prototype.getCanvasViewBox=function(){var t=this.cfg.canvas;return t?t.getViewRange():null},e.prototype.cacheCanvasBBox=function(){var t=this.getCanvasViewBox();if(t){var r=this.getCanvasBBox(),n=Ah(r,t);this.set("isInView",n),n?this.set("cacheCanvasBBox",r):this.set("cacheCanvasBBox",null)}},e.prototype._afterDraw=function(){this.cacheCanvasBBox(),this.set("hasChanged",!1),this.set("refresh",null)},e.prototype.skipDraw=function(){this.set("cacheCanvasBBox",null),this.set("isInView",null),this.set("hasChanged",!1)},e.prototype.drawPath=function(t){this.createPath(t),this.strokeAndFill(t),this.afterDrawPath(t)},e.prototype.fill=function(t){t.fill()},e.prototype.stroke=function(t){t.stroke()},e.prototype.strokeAndFill=function(t){var r=this.attrs,n=r.lineWidth,a=r.opacity,o=r.strokeOpacity,s=r.fillOpacity;this.isFill()&&(!(0,v.isNil)(s)&&s!==1?(t.globalAlpha=s,this.fill(t),t.globalAlpha=a):this.fill(t)),this.isStroke()&&n>0&&(!(0,v.isNil)(o)&&o!==1&&(t.globalAlpha=o),this.stroke(t)),this.afterDrawPath(t)},e.prototype.createPath=function(t){},e.prototype.afterDrawPath=function(t){},e.prototype.isInShape=function(t,r){var n=this.isStroke(),a=this.isFill(),o=this.getHitLineWidth();return this.isInStrokeOrPath(t,r,n,a,o)},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){return!1},e.prototype.getHitLineWidth=function(){if(!this.isStroke())return 0;var t=this.attrs;return t.lineWidth+t.lineAppendWidth},e}(Cl),Qu=Am,Cm=function(i){(0,g.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,g.__assign)((0,g.__assign)({},t),{x:0,y:0,r:0})},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){var s=this.attr(),u=s.x,f=s.y,c=s.r,l=o/2,m=Ip(u,f,t,r);return a&&n?m<=c+l:a?m<=c:n?m>=c-l&&m<=c+l:!1},e.prototype.createPath=function(t){var r=this.attr(),n=r.x,a=r.y,o=r.r;t.beginPath(),t.arc(n,a,o,0,Math.PI*2,!1),t.closePath()},e}(Qu),Tm=Cm;function ud(i,e,t,r){return i/(t*t)+e/(r*r)}var Im=function(i){(0,g.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,g.__assign)((0,g.__assign)({},t),{x:0,y:0,rx:0,ry:0})},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){var s=this.attr(),u=o/2,f=s.x,c=s.y,l=s.rx,m=s.ry,w=(t-f)*(t-f),C=(r-c)*(r-c);return a&&n?ud(w,C,l+u,m+u)<=1:a?ud(w,C,l,m)<=1:n?ud(w,C,l-u,m-u)>=1&&ud(w,C,l+u,m+u)<=1:!1},e.prototype.createPath=function(t){var r=this.attr(),n=r.x,a=r.y,o=r.rx,s=r.ry;if(t.beginPath(),t.ellipse)t.ellipse(n,a,o,s,0,0,Math.PI*2,!1);else{var u=o>s?o:s,f=o>s?1:o/s,c=o>s?s/o:1;t.save(),t.translate(n,a),t.scale(f,c),t.arc(0,0,u,0,Math.PI*2),t.restore(),t.closePath()}},e}(Qu),km=Im;function Xp(i){return i instanceof HTMLElement&&(0,v.isString)(i.nodeName)&&i.nodeName.toUpperCase()==="CANVAS"}var Lm=function(i){(0,g.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,g.__assign)((0,g.__assign)({},t),{x:0,y:0,width:0,height:0})},e.prototype.initAttrs=function(t){this._setImage(t.img)},e.prototype.isStroke=function(){return!1},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._afterLoading=function(){if(this.get("toDraw")===!0){var t=this.get("canvas");t?t.draw():this.createPath(this.get("context"))}},e.prototype._setImage=function(t){var r=this,n=this.attrs;if((0,v.isString)(t)){var a=new Image;a.onload=function(){if(r.destroyed)return!1;r.attr("img",a),r.set("loading",!1),r._afterLoading();var o=r.get("callback");o&&o.call(r)},a.crossOrigin="Anonymous",a.src=t,this.set("loading",!0)}else t instanceof Image?(n.width||(n.width=t.width),n.height||(n.height=t.height)):Xp(t)&&(n.width||(n.width=Number(t.getAttribute("width"))),n.height||(n.height,Number(t.getAttribute("height"))))},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),t==="img"&&this._setImage(r)},e.prototype.createPath=function(t){if(this.get("loading")){this.set("toDraw",!0),this.set("context",t);return}var r=this.attr(),n=r.x,a=r.y,o=r.width,s=r.height,u=r.sx,f=r.sy,c=r.swidth,l=r.sheight,m=r.img;(m instanceof Image||Xp(m))&&(!(0,v.isNil)(u)&&!(0,v.isNil)(f)&&!(0,v.isNil)(c)&&!(0,v.isNil)(l)?t.drawImage(m,u,f,c,l,n,a,o,s):t.drawImage(m,n,a,o,s))},e}(Qu),Nm=Lm;function Hc(i,e,t,r,n,a,o){var s=Math.min(i,t),u=Math.max(i,t),f=Math.min(e,r),c=Math.max(e,r),l=n/2;return a>=s-l&&a<=u+l&&o>=f-l&&o<=c+l?mr.pointToLine(i,e,t,r,a,o)<=n/2:!1}var Om=function(i){(0,g.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,g.__assign)((0,g.__assign)({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this.setArrow()},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),this.setArrow()},e.prototype.setArrow=function(){var t=this.attr(),r=t.x1,n=t.y1,a=t.x2,o=t.y2,s=t.startArrow,u=t.endArrow;s&&rv(this,t,a,o,r,n),u&&nv(this,t,r,n,a,o)},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){if(!n||!o)return!1;var s=this.attr(),u=s.x1,f=s.y1,c=s.x2,l=s.y2;return Hc(u,f,c,l,o,t,r)},e.prototype.createPath=function(t){var r=this.attr(),n=r.x1,a=r.y1,o=r.x2,s=r.y2,u=r.startArrow,f=r.endArrow,c={dx:0,dy:0},l={dx:0,dy:0};u&&u.d&&(c=kl(n,a,o,s,r.startArrow.d)),f&&f.d&&(l=kl(n,a,o,s,r.endArrow.d)),t.beginPath(),t.moveTo(n+c.dx,a+c.dy),t.lineTo(o-l.dx,s-l.dy)},e.prototype.afterDrawPath=function(t){var r=this.get("startArrowShape"),n=this.get("endArrowShape");r&&r.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.attr(),r=t.x1,n=t.y1,a=t.x2,o=t.y2;return mr.length(r,n,a,o)},e.prototype.getPoint=function(t){var r=this.attr(),n=r.x1,a=r.y1,o=r.x2,s=r.y2;return mr.pointAt(n,a,o,s,t)},e}(Qu),Dm=Om,Pm={circle:function(i,e,t){return[["M",i-t,e],["A",t,t,0,1,0,i+t,e],["A",t,t,0,1,0,i-t,e]]},square:function(i,e,t){return[["M",i-t,e-t],["L",i+t,e-t],["L",i+t,e+t],["L",i-t,e+t],["Z"]]},diamond:function(i,e,t){return[["M",i-t,e],["L",i,e-t],["L",i+t,e],["L",i,e+t],["Z"]]},triangle:function(i,e,t){var r=t*Math.sin(.3333333333333333*Math.PI);return[["M",i-t,e+r],["L",i,e-r],["L",i+t,e+r],["Z"]]},"triangle-down":function(i,e,t){var r=t*Math.sin(.3333333333333333*Math.PI);return[["M",i-t,e-r],["L",i+t,e-r],["L",i,e+r],["Z"]]}},Rm=function(i){(0,g.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.initAttrs=function(t){this._resetParamsCache()},e.prototype._resetParamsCache=function(){this.set("paramsCache",{})},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),["symbol","x","y","r","radius"].indexOf(t)!==-1&&this._resetParamsCache()},e.prototype.isOnlyHitBox=function(){return!0},e.prototype._getR=function(t){return(0,v.isNil)(t.r)?t.radius:t.r},e.prototype._getPath=function(){var t=this.attr(),r=t.x,n=t.y,a=t.symbol||"circle",o=this._getR(t),s,u;if((0,v.isFunction)(a))s=a,u=s(r,n,o),u=je(u);else{if(s=e.Symbols[a],!s)return console.warn(a+" marker is not supported."),null;u=s(r,n,o)}return u},e.prototype.createPath=function(t){var r=this._getPath(),n=this.get("paramsCache");Gp(this,t,{path:r},n)},e.Symbols=Pm,e}(Qu),Bm=Rm;function Yp(i,e,t){var r=ro();return i.createPath(r),r.isPointInPath(e,t)}var Fm=1e-6;function sv(i){return Math.abs(i)<Fm?0:i<0?-1:1}function Gm(i,e,t){return(t[0]-i[0])*(e[1]-i[1])===(e[0]-i[0])*(t[1]-i[1])&&Math.min(i[0],e[0])<=t[0]&&t[0]<=Math.max(i[0],e[0])&&Math.min(i[1],e[1])<=t[1]&&t[1]<=Math.max(i[1],e[1])}function Wp(i,e,t){var r=!1,n=i.length;if(n<=2)return!1;for(var a=0;a<n;a++){var o=i[a],s=i[(a+1)%n];if(Gm(o,s,[e,t]))return!0;sv(o[1]-t)>0!=sv(s[1]-t)>0&&sv(e-(t-o[1])*(o[0]-s[0])/(o[1]-s[1])-o[0])<0&&(r=!r)}return r}function Ch(i,e,t,r,n,a,o,s){var u=(Math.atan2(s-e,o-i)+Math.PI*2)%(Math.PI*2);if(u<r||u>n)return!1;var f={x:i+t*Math.cos(u),y:e+t*Math.sin(u)};return Ip(f.x,f.y,o,s)<=a/2}var zm=Ht;function Um(i){for(var e=!1,t=i.length,r=0;r<t;r++){var n=i[r],a=n[0];if(a==="C"||a==="A"||a==="Q"){e=!0;break}}return e}function Xm(i,e,t,r,n){for(var a=!1,o=e/2,s=0;s<i.length;s++){var u=i[s],f=u.currentPoint,c=u.params,l=u.prePoint,m=u.box;if(!(m&&!Il(m.x-o,m.y-o,m.width+e,m.height+e,t,r))){switch(u.command){case"L":case"Z":a=Hc(l[0],l[1],f[0],f[1],e,t,r);break;case"Q":var w=X.pointDistance(l[0],l[1],c[1],c[2],c[3],c[4],t,r);a=w<=e/2;break;case"C":var C=Ft.pointDistance(l[0],l[1],c[1],c[2],c[3],c[4],c[5],c[6],t,r,n);a=C<=e/2;break;case"A":var D=u.arcParams,U=D.cx,$=D.cy,tt=D.rx,it=D.ry,ct=D.startAngle,_t=D.endAngle,Bt=D.xRotation,Pt=[t,r,1],Qt=tt>it?tt:it,ye=tt>it?1:tt/it,ce=tt>it?it/tt:1,Ne=zm(null,[["t",-U,-$],["r",-Bt],["s",1/ye,1/ce]]);hs.transformMat3(Pt,Pt,Ne),a=Ch(0,0,Qt,ct,_t,e,Pt[0],Pt[1]);break;default:break}if(a)break}}return a}function Ym(i){for(var e=i.length,t=[],r=[],n=[],a=0;a<e;a++){var o=i[a],s=o[0];s==="M"?(n.length&&(r.push(n),n=[]),n.push([o[1],o[2]])):s==="Z"?n.length&&(t.push(n),n=[]):n.push([o[1],o[2]])}return n.length>0&&r.push(n),{polygons:t,polylines:r}}var fd=(0,g.__assign)({hasArc:Um,extractPolygons:Ym,isPointInStroke:Xm},z);function Vp(i,e,t){for(var r=!1,n=0;n<i.length;n++){var a=i[n];if(r=Wp(a,e,t),r)break}return r}var Wm=function(i){(0,g.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,g.__assign)((0,g.__assign)({},t),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this._setPathArr(t.path),this.setArrow()},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),t==="path"&&this._setPathArr(r),this.setArrow()},e.prototype._setPathArr=function(t){this.attrs.path=je(t);var r=fd.hasArc(t);this.set("hasArc",r),this.set("paramsCache",{}),this.set("segments",null),this.set("curve",null),this.set("tCache",null),this.set("totalLength",null)},e.prototype.getSegments=function(){var t=this.get("segements");return t||(t=Wv(this.attr("path")),this.set("segments",t)),t},e.prototype.setArrow=function(){var t=this.attr(),r=t.startArrow,n=t.endArrow;if(r){var a=this.getStartTangent();rv(this,t,a[0][0],a[0][1],a[1][0],a[1][1])}if(n){var a=this.getEndTangent();nv(this,t,a[0][0],a[0][1],a[1][0],a[1][1])}},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){var s=this.getSegments(),u=this.get("hasArc"),f=!1;if(n){var c=this.getTotalLength();f=fd.isPointInStroke(s,o,t,r,c)}if(!f&&a)if(u)f=Yp(this,t,r);else{var l=this.attr("path"),m=fd.extractPolygons(l);f=Vp(m.polygons,t,r)||Vp(m.polylines,t,r)}return f},e.prototype.createPath=function(t){var r=this.attr(),n=this.get("paramsCache");Gp(this,t,r,n)},e.prototype.afterDrawPath=function(t){var r=this.get("startArrowShape"),n=this.get("endArrowShape");r&&r.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.get("totalLength");return(0,v.isNil)(t)?(this._calculateCurve(),this._setTcache(),this.get("totalLength")):t},e.prototype.getPoint=function(t){var r=this.get("tCache");r||(this._calculateCurve(),this._setTcache(),r=this.get("tCache"));var n,a,o=this.get("curve");if(!r||r.length===0)return o?{x:o[0][1],y:o[0][2]}:null;(0,v.each)(r,function(c,l){t>=c[0]&&t<=c[1]&&(n=(t-c[0])/(c[1]-c[0]),a=l)});var s=o[a];if((0,v.isNil)(s)||(0,v.isNil)(a))return null;var u=s.length,f=o[a+1];return Ft.pointAt(s[u-2],s[u-1],f[1],f[2],f[3],f[4],f[5],f[6],n)},e.prototype._calculateCurve=function(){var t=this.attr().path;this.set("curve",fd.pathToCurve(t))},e.prototype._setTcache=function(){var t=0,r=0,n=[],a,o,s,u,f=this.get("curve");if(f){if((0,v.each)(f,function(c,l){s=f[l+1],u=c.length,s&&(t+=Ft.length(c[u-2],c[u-1],s[1],s[2],s[3],s[4],s[5],s[6])||0)}),this.set("totalLength",t),t===0){this.set("tCache",[]);return}(0,v.each)(f,function(c,l){s=f[l+1],u=c.length,s&&(a=[],a[0]=r/t,o=Ft.length(c[u-2],c[u-1],s[1],s[2],s[3],s[4],s[5],s[6]),r+=o||0,a[1]=r/t,n.push(a))}),this.set("tCache",n)}},e.prototype.getStartTangent=function(){var t=this.getSegments(),r;if(t.length>1){var n=t[0].currentPoint,a=t[1].currentPoint,o=t[1].startTangent;r=[],o?(r.push([n[0]-o[0],n[1]-o[1]]),r.push([n[0],n[1]])):(r.push([a[0],a[1]]),r.push([n[0],n[1]]))}return r},e.prototype.getEndTangent=function(){var t=this.getSegments(),r=t.length,n;if(r>1){var a=t[r-2].currentPoint,o=t[r-1].currentPoint,s=t[r-1].endTangent;n=[],s?(n.push([o[0]-s[0],o[1]-s[1]]),n.push([o[0],o[1]])):(n.push([a[0],a[1]]),n.push([o[0],o[1]]))}return n},e}(Qu),uv=Wm;function Hp(i,e,t,r,n){var a=i.length;if(a<2)return!1;for(var o=0;o<a-1;o++){var s=i[o][0],u=i[o][1],f=i[o+1][0],c=i[o+1][1];if(Hc(s,u,f,c,e,t,r))return!0}if(n){var l=i[0],m=i[a-1];if(Hc(l[0],l[1],m[0],m[1],e,t,r))return!0}return!1}var Vm=function(i){(0,g.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.isInStrokeOrPath=function(t,r,n,a,o){var s=this.attr().points,u=!1;return n&&(u=Hp(s,o,t,r,!0)),!u&&a&&(u=Wp(s,t,r)),u},e.prototype.createPath=function(t){var r=this.attr(),n=r.points;if(!(n.length<2)){t.beginPath();for(var a=0;a<n.length;a++){var o=n[a];a===0?t.moveTo(o[0],o[1]):t.lineTo(o[0],o[1])}t.closePath()}},e}(Qu),Hm=Vm,jm=function(i){(0,g.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,g.__assign)((0,g.__assign)({},t),{startArrow:!1,endArrow:!1})},e.prototype.initAttrs=function(t){this.setArrow()},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),this.setArrow(),["points"].indexOf(t)!==-1&&this._resetCache()},e.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},e.prototype.setArrow=function(){var t=this.attr(),r=this.attrs,n=r.points,a=r.startArrow,o=r.endArrow,s=n.length,u=n[0][0],f=n[0][1],c=n[s-1][0],l=n[s-1][1];a&&rv(this,t,n[1][0],n[1][1],u,f),o&&nv(this,t,n[s-2][0],n[s-2][1],c,l)},e.prototype.isFill=function(){return!1},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){if(!n||!o)return!1;var s=this.attr().points;return Hp(s,o,t,r,!1)},e.prototype.isStroke=function(){return!0},e.prototype.createPath=function(t){var r=this.attr(),n=r.points,a=r.startArrow,o=r.endArrow,s=n.length;if(!(n.length<2)){var u=n[0][0],f=n[0][1],c=n[s-1][0],l=n[s-1][1];if(a&&a.d){var m=kl(u,f,n[1][0],n[1][1],a.d);u+=m.dx,f+=m.dy}if(o&&o.d){var m=kl(n[s-2][0],n[s-2][1],c,l,o.d);c-=m.dx,l-=m.dy}t.beginPath(),t.moveTo(u,f);for(var w=0;w<s-1;w++){var C=n[w];t.lineTo(C[0],C[1])}t.lineTo(c,l)}},e.prototype.afterDrawPath=function(t){var r=this.get("startArrowShape"),n=this.get("endArrowShape");r&&r.draw(t),n&&n.draw(t)},e.prototype.getTotalLength=function(){var t=this.attr().points,r=this.get("totalLength");return(0,v.isNil)(r)?(this.set("totalLength",ga.length(t)),this.get("totalLength")):r},e.prototype.getPoint=function(t){var r=this.attr().points,n=this.get("tCache");n||(this._setTcache(),n=this.get("tCache"));var a,o;return(0,v.each)(n,function(s,u){t>=s[0]&&t<=s[1]&&(a=(t-s[0])/(s[1]-s[0]),o=u)}),mr.pointAt(r[o][0],r[o][1],r[o+1][0],r[o+1][1],a)},e.prototype._setTcache=function(){var t=this.attr().points;if(!(!t||t.length===0)){var r=this.getTotalLength();if(!(r<=0)){var n=0,a=[],o,s;(0,v.each)(t,function(u,f){t[f+1]&&(o=[],o[0]=n/r,s=mr.length(u[0],u[1],t[f+1][0],t[f+1][1]),n+=s,o[1]=n/r,a.push(o))}),this.set("tCache",a)}}},e.prototype.getStartTangent=function(){var t=this.attr().points,r=[];return r.push([t[1][0],t[1][1]]),r.push([t[0][0],t[0][1]]),r},e.prototype.getEndTangent=function(){var t=this.attr().points,r=t.length-1,n=[];return n.push([t[r-1][0],t[r-1][1]]),n.push([t[r][0],t[r][1]]),n},e}(Qu),Zm=jm;function qm(i,e,t,r,n,a,o){var s=n/2;return Il(i-s,e-s,t,n,a,o)||Il(i+t-s,e-s,n,r,a,o)||Il(i+s,e+r-s,t,n,a,o)||Il(i-s,e+s,n,r,a,o)}function $m(i,e,t,r,n,a,o,s){var u=a/2;return Hc(i+n,e,i+t-n,e,a,o,s)||Hc(i+t,e+n,i+t,e+r-n,a,o,s)||Hc(i+t-n,e+r,i+n,e+r,a,o,s)||Hc(i,e+r-n,i,e+n,a,o,s)||Ch(i+t-n,e+n,n,1.5*Math.PI,2*Math.PI,a,o,s)||Ch(i+t-n,e+r-n,n,0,.5*Math.PI,a,o,s)||Ch(i+n,e+r-n,n,.5*Math.PI,Math.PI,a,o,s)||Ch(i+n,e+n,n,Math.PI,1.5*Math.PI,a,o,s)}var Km=function(i){(0,g.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,g.__assign)((0,g.__assign)({},t),{x:0,y:0,width:0,height:0,radius:0})},e.prototype.isInStrokeOrPath=function(t,r,n,a,o){var s=this.attr(),u=s.x,f=s.y,c=s.width,l=s.height,m=s.radius;if(m){var C=!1;return n&&(C=$m(u,f,c,l,m,o,t,r)),!C&&a&&(C=Yp(this,t,r)),C}else{var w=o/2;if(a&&n)return Il(u-w,f-w,c+w,l+w,t,r);if(a)return Il(u,f,c,l,t,r);if(n)return qm(u,f,c,l,o,t,r)}},e.prototype.createPath=function(t){var r=this.attr(),n=r.x,a=r.y,o=r.width,s=r.height,u=r.radius;if(t.beginPath(),u===0)t.rect(n,a,o,s);else{var f=bm(u),c=f[0],l=f[1],m=f[2],w=f[3];t.moveTo(n+c,a),t.lineTo(n+o-l,a),l!==0&&t.arc(n+o-l,a+l,l,-Math.PI/2,0),t.lineTo(n+o,a+s-m),m!==0&&t.arc(n+o-m,a+s-m,m,0,Math.PI/2),t.lineTo(n+w,a+s),w!==0&&t.arc(n+w,a+s-w,w,Math.PI/2,Math.PI),t.lineTo(n,a+c),c!==0&&t.arc(n+c,a+c,c,Math.PI,Math.PI*1.5),t.closePath()}},e}(Qu),Qm=Km,Jm=function(i){(0,g.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,g.__assign)((0,g.__assign)({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},e.prototype.isOnlyHitBox=function(){return!0},e.prototype.initAttrs=function(t){this._assembleFont(),t.text&&this._setText(t.text)},e.prototype._assembleFont=function(){var t=this.attrs;t.font=ea(t)},e.prototype._setText=function(t){var r=null;(0,v.isString)(t)&&t.indexOf(`
`)!==-1&&(r=t.split(`
`)),this.set("textArr",r)},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),t.startsWith("font")&&this._assembleFont(),t==="text"&&this._setText(r)},e.prototype._getSpaceingY=function(){var t=this.attrs,r=t.lineHeight,n=t.fontSize*1;return r?r-n:n*.14},e.prototype._drawTextArr=function(t,r,n){var a=this.attrs,o=a.textBaseline,s=a.x,u=a.y,f=a.fontSize*1,c=this._getSpaceingY(),l=Ma(a.text,a.fontSize,a.lineHeight),m;(0,v.each)(r,function(w,C){m=u+C*(c+f)-l+f,o==="middle"&&(m+=l-f-(l-f)/2),o==="top"&&(m+=l-f),(0,v.isNil)(w)||(n?t.fillText(w,s,m):t.strokeText(w,s,m))})},e.prototype._drawText=function(t,r){var n=this.attr(),a=n.x,o=n.y,s=this.get("textArr");if(s)this._drawTextArr(t,s,r);else{var u=n.text;(0,v.isNil)(u)||(r?t.fillText(u,a,o):t.strokeText(u,a,o))}},e.prototype.strokeAndFill=function(t){var r=this.attrs,n=r.lineWidth,a=r.opacity,o=r.strokeOpacity,s=r.fillOpacity;this.isStroke()&&n>0&&(!(0,v.isNil)(o)&&o!==1&&(t.globalAlpha=a),this.stroke(t)),this.isFill()&&(!(0,v.isNil)(s)&&s!==1?(t.globalAlpha=s,this.fill(t),t.globalAlpha=a):this.fill(t)),this.afterDrawPath(t)},e.prototype.fill=function(t){this._drawText(t,!0)},e.prototype.stroke=function(t){this._drawText(t,!1)},e}(Qu),t1=Jm;function e1(i,e){if(e){var t=Vu(e);return xi(t,i)}return i}function jp(i,e,t){var r=i.getTotalMatrix();if(r){var n=e1([e,t,1],r),a=n[0],o=n[1];return[a,o]}return[e,t]}function Zp(i,e,t){if(i.isCanvas&&i.isCanvas())return!0;if(!Uf(i)||i.cfg.isInView===!1)return!1;if(i.cfg.clipShape){var r=jp(i,e,t),n=r[0],a=r[1];if(i.isClipped(n,a))return!1}var o=i.cfg.cacheCanvasBBox||i.getCanvasBBox();return e>=o.minX&&e<=o.maxX&&t>=o.minY&&t<=o.maxY}function qp(i,e,t){if(!Zp(i,e,t))return null;for(var r=null,n=i.getChildren(),a=n.length,o=a-1;o>=0;o--){var s=n[o];if(s.isGroup())r=qp(s,e,t);else if(Zp(s,e,t)){var u=s,f=jp(s,e,t),c=f[0],l=f[1];u.isInShape(c,l)&&(r=s)}if(r)break}return r}var r1=function(i){(0,g.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return t.renderer="canvas",t.autoDraw=!0,t.localRefresh=!0,t.refreshElements=[],t.clipView=!0,t.quickHit=!1,t},e.prototype.onCanvasChange=function(t){(t==="attr"||t==="sort"||t==="changeSize")&&(this.set("refreshElements",[this]),this.draw())},e.prototype.getShapeBase=function(){return x},e.prototype.getGroupBase=function(){return Up},e.prototype.getPixelRatio=function(){var t=this.get("pixelRatio")||cm();return t>=1?Math.ceil(t):1},e.prototype.getViewRange=function(){return{minX:0,minY:0,maxX:this.cfg.width,maxY:this.cfg.height}},e.prototype.createDom=function(){var t=document.createElement("canvas"),r=t.getContext("2d");return this.set("context",r),t},e.prototype.setDOMSize=function(t,r){i.prototype.setDOMSize.call(this,t,r);var n=this.get("context"),a=this.get("el"),o=this.getPixelRatio();a.width=o*t,a.height=o*r,o>1&&n.scale(o,o)},e.prototype.clear=function(){i.prototype.clear.call(this),this._clearFrame();var t=this.get("context"),r=this.get("el");t.clearRect(0,0,r.width,r.height)},e.prototype.getShape=function(t,r){var n;return this.get("quickHit")?n=qp(this,t,r):n=i.prototype.getShape.call(this,t,r,null),n},e.prototype._getRefreshRegion=function(){var t=this.get("refreshElements"),r=this.getViewRange(),n;if(t.length&&t[0]===this)n=r;else if(n=_m(t),n){n.minX=Math.floor(n.minX),n.minY=Math.floor(n.minY),n.maxX=Math.ceil(n.maxX),n.maxY=Math.ceil(n.maxY),n.maxY+=1;var a=this.get("clipView");a&&(n=Sm(n,r))}return n},e.prototype.refreshElement=function(t){var r=this.get("refreshElements");r.push(t)},e.prototype._clearFrame=function(){var t=this.get("drawFrame");t&&((0,v.clearAnimationFrame)(t),this.set("drawFrame",null),this.set("refreshElements",[]))},e.prototype.draw=function(){var t=this.get("drawFrame");this.get("autoDraw")&&t||this._startDraw()},e.prototype._drawAll=function(){var t=this.get("context"),r=this.get("el"),n=this.getChildren();t.clearRect(0,0,r.width,r.height),hh(t,this),av(t,n),this.set("refreshElements",[])},e.prototype._drawRegion=function(){var t=this.get("context"),r=this.get("refreshElements"),n=this.getChildren(),a=this._getRefreshRegion();a?(t.clearRect(a.minX,a.minY,a.maxX-a.minX,a.maxY-a.minY),t.save(),t.beginPath(),t.rect(a.minX,a.minY,a.maxX-a.minX,a.maxY-a.minY),t.clip(),hh(t,this),xm(this,n,a),av(t,n,a),t.restore()):r.length&&Fp(r),(0,v.each)(r,function(o){o.get("hasChanged")&&o.set("hasChanged",!1)}),this.set("refreshElements",[])},e.prototype._startDraw=function(){var t=this,r=this.get("drawFrame"),n=this.get("drawFrameCallback");r||(r=(0,v.requestAnimationFrame)(function(){t.get("localRefresh")?t._drawRegion():t._drawAll(),t.set("drawFrame",null),n&&n()}),this.set("drawFrame",r))},e.prototype.skipDraw=function(){},e.prototype.removeDom=function(){var t=this.get("el");t.width=0,t.height=0,t.parentNode.removeChild(t)},e}(oh),fc=r1,D2="0.5.12",fv={rect:"path",circle:"circle",line:"line",path:"path",marker:"path",text:"text",polyline:"polyline",polygon:"polygon",image:"image",ellipse:"ellipse",dom:"foreignObject"},ui={opacity:"opacity",fillStyle:"fill",fill:"fill",fillOpacity:"fill-opacity",strokeStyle:"stroke",strokeOpacity:"stroke-opacity",stroke:"stroke",x:"x",y:"y",r:"r",rx:"rx",ry:"ry",width:"width",height:"height",x1:"x1",x2:"x2",y1:"y1",y2:"y2",lineCap:"stroke-linecap",lineJoin:"stroke-linejoin",lineWidth:"stroke-width",lineDash:"stroke-dasharray",lineDashOffset:"stroke-dashoffset",miterLimit:"stroke-miterlimit",font:"font",fontSize:"font-size",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",fontFamily:"font-family",startArrow:"marker-start",endArrow:"marker-end",path:"d",class:"class",id:"id",style:"style",preserveAspectRatio:"preserveAspectRatio"},P2=null;function Pu(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}function $p(i){var e=fv[i.type],t=i.getParent();if(!e)throw new Error("the type "+i.type+" is not supported by svg");var r=Pu(e);if(i.get("id")&&(r.id=i.get("id")),i.set("el",r),i.set("attrs",{}),t){var n=t.get("el");n||(n=t.createDom(),t.set("el",n)),n.appendChild(r)}return r}function Kp(i,e){var t=i.get("el"),r=(0,v.toArray)(t.children).sort(e),n=document.createDocumentFragment();r.forEach(function(a){n.appendChild(a)}),t.appendChild(n)}function n1(i,e){var t=i.parentNode,r=Array.from(t.childNodes).filter(function(s){return s.nodeType===1&&s.nodeName.toLowerCase()!=="defs"}),n=r[e],a=r.indexOf(i);if(n){if(a>e)t.insertBefore(i,n);else if(a<e){var o=r[e+1];o?t.insertBefore(i,o):t.appendChild(i)}}else t.appendChild(i)}function a1(i,e){var t=i.cfg.el,r=i.attr(),n={dx:r.shadowOffsetX,dy:r.shadowOffsetY,blur:r.shadowBlur,color:r.shadowColor};if(!n.dx&&!n.dy&&!n.blur&&!n.color)t.removeAttribute("filter");else{var a=e.find("filter",n);a||(a=e.addShadow(n)),t.setAttribute("filter","url(#"+a+")")}}function Th(i){var e=i.attr().matrix;if(e){for(var t=i.cfg.el,r=[],n=0;n<9;n+=3)r.push(e[n]+","+e[n+1]);r=r.join(","),r.indexOf("NaN")===-1?t.setAttribute("transform","matrix("+r+")"):console.warn("invalid matrix:",e)}}function Ih(i,e){var t=i.getClip(),r=i.get("el");if(!t)r.removeAttribute("clip-path");else if(t&&!r.hasAttribute("clip-path")){$p(t),t.createPath(e);var n=e.addClip(t);r.setAttribute("clip-path","url(#"+n+")")}}function Qp(i,e){e.forEach(function(t){t.draw(i)})}function Jp(i,e){var t=i.get("canvas");if(t&&t.get("autoDraw")){var r=t.get("context"),n=i.getParent(),a=n?n.getChildren():[t],o=i.get("el");if(e==="remove"){var s=i.get("isClipShape");if(s){var u=o&&o.parentNode,f=u&&u.parentNode;u&&f&&f.removeChild(u)}else o&&o.parentNode&&o.parentNode.removeChild(o)}else if(e==="show")o.setAttribute("visibility","visible");else if(e==="hide")o.setAttribute("visibility","hidden");else if(e==="zIndex")n1(o,a.indexOf(i));else if(e==="sort"){var c=i.get("children");c&&c.length&&Kp(i,function(l,m){return c.indexOf(l)-c.indexOf(m)?1:0})}else e==="clear"?o&&(o.innerHTML=""):e==="matrix"?Th(i):e==="clip"?Ih(i,r):e==="attr"||e==="add"&&i.draw(r)}}var i1=function(i){(0,g.__extends)(e,i);function e(){return i!==null&&i.apply(this,arguments)||this}return e.prototype.isEntityGroup=function(){return!0},e.prototype.createDom=function(){var t=Pu("g");this.set("el",t);var r=this.getParent();if(r){var n=r.get("el");n||(n=r.createDom(),r.set("el",n)),n.appendChild(t)}return t},e.prototype.afterAttrsChange=function(t){i.prototype.afterAttrsChange.call(this,t);var r=this.get("canvas");if(r&&r.get("autoDraw")){var n=r.get("context");this.createPath(n,t)}},e.prototype.onCanvasChange=function(t){Jp(this,t)},e.prototype.getShapeBase=function(){return p},e.prototype.getGroupBase=function(){return e},e.prototype.draw=function(t){var r=this.getChildren(),n=this.get("el");this.get("destroyed")?n&&n.parentNode.removeChild(n):(n||this.createDom(),Ih(this,t),this.createPath(t),r.length&&Qp(t,r))},e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,v.each)(r||n,function(o,s){ui[s]&&a.setAttribute(ui[s],o)}),Th(this)},e}(Yc),tg=i1,o1=function(i){(0,g.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="svg",t.canFill=!1,t.canStroke=!1,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,g.__assign)((0,g.__assign)({},t),{lineWidth:1,lineAppendWidth:0,strokeOpacity:1,fillOpacity:1})},e.prototype.afterAttrsChange=function(t){i.prototype.afterAttrsChange.call(this,t);var r=this.get("canvas");if(r&&r.get("autoDraw")){var n=r.get("context");this.draw(n,t)}},e.prototype.getShapeBase=function(){return p},e.prototype.getGroupBase=function(){return tg},e.prototype.onCanvasChange=function(t){Jp(this,t)},e.prototype.calculateBBox=function(){var t=this.get("el"),r=null;if(t)r=t.getBBox();else{var n=Tl(this.get("type"));n&&(r=n(this))}if(r){var a=r.x,o=r.y,s=r.width,u=r.height,f=this.getHitLineWidth(),c=f/2,l=a-c,m=o-c,w=a+s+c,C=o+u+c;return{x:l,y:m,minX:l,minY:m,maxX:w,maxY:C,width:s+f,height:u+f}}return{x:0,y:0,minX:0,minY:0,maxX:0,maxY:0,width:0,height:0}},e.prototype.isFill=function(){var t=this.attr(),r=t.fill,n=t.fillStyle;return(r||n||this.isClipShape())&&this.canFill},e.prototype.isStroke=function(){var t=this.attr(),r=t.stroke,n=t.strokeStyle;return(r||n)&&this.canStroke},e.prototype.draw=function(t,r){var n=this.get("el");this.get("destroyed")?n&&n.parentNode.removeChild(n):(n||$p(this),Ih(this,t),this.createPath(t,r),this.shadow(t,r),this.strokeAndFill(t,r),this.transform(r))},e.prototype.createPath=function(t,r){},e.prototype.strokeAndFill=function(t,r){var n=r||this.attr(),a=n.fill,o=n.fillStyle,s=n.stroke,u=n.strokeStyle,f=n.fillOpacity,c=n.strokeOpacity,l=n.lineWidth,m=this.get("el");this.canFill&&(r?"fill"in n?this._setColor(t,"fill",a):"fillStyle"in n&&this._setColor(t,"fill",o):this._setColor(t,"fill",a||o),f&&m.setAttribute(ui.fillOpacity,f)),this.canStroke&&l>0&&(r?"stroke"in n?this._setColor(t,"stroke",s):"strokeStyle"in n&&this._setColor(t,"stroke",u):this._setColor(t,"stroke",s||u),c&&m.setAttribute(ui.strokeOpacity,c),l&&m.setAttribute(ui.lineWidth,l))},e.prototype._setColor=function(t,r,n){var a=this.get("el");if(!n){a.setAttribute(ui[r],"none");return}if(n=n.trim(),/^[r,R,L,l]{1}[\s]*\(/.test(n)){var o=t.find("gradient",n);o||(o=t.addGradient(n)),a.setAttribute(ui[r],"url(#"+o+")")}else if(/^[p,P]{1}[\s]*\(/.test(n)){var o=t.find("pattern",n);o||(o=t.addPattern(n)),a.setAttribute(ui[r],"url(#"+o+")")}else a.setAttribute(ui[r],n)},e.prototype.shadow=function(t,r){var n=this.attr(),a=r||n,o=a.shadowOffsetX,s=a.shadowOffsetY,u=a.shadowBlur,f=a.shadowColor;(o||s||u||f)&&a1(this,t)},e.prototype.transform=function(t){var r=this.attr(),n=(t||r).matrix;n&&Th(this)},e.prototype.isInShape=function(t,r){return this.isPointInPath(t,r)},e.prototype.isPointInPath=function(t,r){var n=this.get("el"),a=this.get("canvas"),o=a.get("el").getBoundingClientRect(),s=t+o.left,u=r+o.top,f=document.elementFromPoint(s,u);return!!(f&&f.isEqualNode(n))},e.prototype.getHitLineWidth=function(){var t=this.attrs,r=t.lineWidth,n=t.lineAppendWidth;return this.isStroke()?r+n:0},e}(Cl),Ru=o1,s1=function(i){(0,g.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="circle",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,g.__assign)((0,g.__assign)({},t),{x:0,y:0,r:0})},e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,v.each)(r||n,function(o,s){s==="x"||s==="y"?a.setAttribute("c"+s,o):ui[s]&&a.setAttribute(ui[s],o)})},e}(Ru),u1=s1,f1=function(i){(0,g.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="dom",t.canFill=!1,t.canStroke=!1,t}return e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");if((0,v.each)(r||n,function(f,c){ui[c]&&a.setAttribute(ui[c],f)}),typeof n.html=="function"){var o=n.html.call(this,n);if(o instanceof Element||o instanceof HTMLDocument){for(var s=a.childNodes,u=s.length-1;u>=0;u--)a.removeChild(s[u]);a.appendChild(o)}else a.innerHTML=o}else a.innerHTML=n.html},e}(Ru),c1=f1,l1=function(i){(0,g.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="ellipse",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,g.__assign)((0,g.__assign)({},t),{x:0,y:0,rx:0,ry:0})},e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,v.each)(r||n,function(o,s){s==="x"||s==="y"?a.setAttribute("c"+s,o):ui[s]&&a.setAttribute(ui[s],o)})},e}(Ru),h1=l1,d1=function(i){(0,g.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="image",t.canFill=!1,t.canStroke=!1,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,g.__assign)((0,g.__assign)({},t),{x:0,y:0,width:0,height:0})},e.prototype.createPath=function(t,r){var n=this,a=this.attr(),o=this.get("el");(0,v.each)(r||a,function(s,u){u==="img"?n._setImage(a.img):ui[u]&&o.setAttribute(ui[u],s)})},e.prototype.setAttr=function(t,r){this.attrs[t]=r,t==="img"&&this._setImage(r)},e.prototype._setImage=function(t){var r=this.attr(),n=this.get("el");if((0,v.isString)(t))n.setAttribute("href",t);else if(t instanceof window.Image)r.width||(n.setAttribute("width",t.width),this.attr("width",t.width)),r.height||(n.setAttribute("height",t.height),this.attr("height",t.height)),n.setAttribute("href",t.src);else if(t instanceof HTMLElement&&(0,v.isString)(t.nodeName)&&t.nodeName.toUpperCase()==="CANVAS")n.setAttribute("href",t.toDataURL());else if(t instanceof ImageData){var a=document.createElement("canvas");a.setAttribute("width",""+t.width),a.setAttribute("height",""+t.height),a.getContext("2d").putImageData(t,0,0),r.width||(n.setAttribute("width",""+t.width),this.attr("width",t.width)),r.height||(n.setAttribute("height",""+t.height),this.attr("height",t.height)),n.setAttribute("href",a.toDataURL())}},e}(Ru),v1=d1,p1=function(i){(0,g.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="line",t.canFill=!1,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,g.__assign)((0,g.__assign)({},t),{x1:0,y1:0,x2:0,y2:0,startArrow:!1,endArrow:!1})},e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,v.each)(r||n,function(o,s){if(s==="startArrow"||s==="endArrow")if(o){var u=(0,v.isObject)(o)?t.addArrow(n,ui[s]):t.getDefaultArrow(n,ui[s]);a.setAttribute(ui[s],"url(#"+u+")")}else a.removeAttribute(ui[s]);else ui[s]&&a.setAttribute(ui[s],o)})},e.prototype.getTotalLength=function(){var t=this.attr(),r=t.x1,n=t.y1,a=t.x2,o=t.y2;return mr.length(r,n,a,o)},e.prototype.getPoint=function(t){var r=this.attr(),n=r.x1,a=r.y1,o=r.x2,s=r.y2;return mr.pointAt(n,a,o,s,t)},e}(Ru),g1=p1,cd={circle:function(i,e,t){return[["M",i,e],["m",-t,0],["a",t,t,0,1,0,t*2,0],["a",t,t,0,1,0,-t*2,0]]},square:function(i,e,t){return[["M",i-t,e-t],["L",i+t,e-t],["L",i+t,e+t],["L",i-t,e+t],["Z"]]},diamond:function(i,e,t){return[["M",i-t,e],["L",i,e-t],["L",i+t,e],["L",i,e+t],["Z"]]},triangle:function(i,e,t){var r=t*Math.sin(.3333333333333333*Math.PI);return[["M",i-t,e+r],["L",i,e-r],["L",i+t,e+r],["z"]]},triangleDown:function(i,e,t){var r=t*Math.sin(.3333333333333333*Math.PI);return[["M",i-t,e-r],["L",i+t,e-r],["L",i,e+r],["Z"]]}},eg={get:function(i){return cd[i]},register:function(i,e){cd[i]=e},remove:function(i){delete cd[i]},getAll:function(){return cd}},y1=function(i){(0,g.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="marker",t.canFill=!0,t.canStroke=!0,t}return e.prototype.createPath=function(t){var r=this.get("el");r.setAttribute("d",this._assembleMarker())},e.prototype._assembleMarker=function(){var t=this._getPath();return(0,v.isArray)(t)?t.map(function(r){return r.join(" ")}).join(""):t},e.prototype._getPath=function(){var t=this.attr(),r=t.x,n=t.y,a=t.r||t.radius,o=t.symbol||"circle",s;return(0,v.isFunction)(o)?s=o:s=eg.get(o),s?s(r,n,a):(console.warn(s+" symbol is not exist."),null)},e.symbolsFactory=eg,e}(Ru),m1=y1,b1=function(i){(0,g.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="path",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,g.__assign)((0,g.__assign)({},t),{startArrow:!1,endArrow:!1})},e.prototype.createPath=function(t,r){var n=this,a=this.attr(),o=this.get("el");(0,v.each)(r||a,function(s,u){if(u==="path"&&(0,v.isArray)(s))o.setAttribute("d",n._formatPath(s));else if(u==="startArrow"||u==="endArrow")if(s){var f=(0,v.isObject)(s)?t.addArrow(a,ui[u]):t.getDefaultArrow(a,ui[u]);o.setAttribute(ui[u],"url(#"+f+")")}else o.removeAttribute(ui[u]);else ui[u]&&o.setAttribute(ui[u],s)})},e.prototype._formatPath=function(t){var r=t.map(function(n){return n.join(" ")}).join("");return~r.indexOf("NaN")?"":r},e.prototype.getTotalLength=function(){var t=this.get("el");return t?t.getTotalLength():null},e.prototype.getPoint=function(t){var r=this.get("el"),n=this.getTotalLength();if(n===0)return null;var a=r?r.getPointAtLength(t*n):null;return a?{x:a.x,y:a.y}:null},e}(Ru),x1=b1,w1=function(i){(0,g.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="polygon",t.canFill=!0,t.canStroke=!0,t}return e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,v.each)(r||n,function(o,s){s==="points"&&(0,v.isArray)(o)&&o.length>=2?a.setAttribute("points",o.map(function(u){return u[0]+","+u[1]}).join(" ")):ui[s]&&a.setAttribute(ui[s],o)})},e}(Ru),E1=w1,_1=function(i){(0,g.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="polyline",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,g.__assign)((0,g.__assign)({},t),{startArrow:!1,endArrow:!1})},e.prototype.onAttrChange=function(t,r,n){i.prototype.onAttrChange.call(this,t,r,n),["points"].indexOf(t)!==-1&&this._resetCache()},e.prototype._resetCache=function(){this.set("totalLength",null),this.set("tCache",null)},e.prototype.createPath=function(t,r){var n=this.attr(),a=this.get("el");(0,v.each)(r||n,function(o,s){s==="points"&&(0,v.isArray)(o)&&o.length>=2?a.setAttribute("points",o.map(function(u){return u[0]+","+u[1]}).join(" ")):ui[s]&&a.setAttribute(ui[s],o)})},e.prototype.getTotalLength=function(){var t=this.attr().points,r=this.get("totalLength");return(0,v.isNil)(r)?(this.set("totalLength",ga.length(t)),this.get("totalLength")):r},e.prototype.getPoint=function(t){var r=this.attr().points,n=this.get("tCache");n||(this._setTcache(),n=this.get("tCache"));var a,o;return(0,v.each)(n,function(s,u){t>=s[0]&&t<=s[1]&&(a=(t-s[0])/(s[1]-s[0]),o=u)}),mr.pointAt(r[o][0],r[o][1],r[o+1][0],r[o+1][1],a)},e.prototype._setTcache=function(){var t=this.attr().points;if(!(!t||t.length===0)){var r=this.getTotalLength();if(!(r<=0)){var n=0,a=[],o,s;(0,v.each)(t,function(u,f){t[f+1]&&(o=[],o[0]=n/r,s=mr.length(u[0],u[1],t[f+1][0],t[f+1][1]),n+=s,o[1]=n/r,a.push(o))}),this.set("tCache",a)}}},e.prototype.getStartTangent=function(){var t=this.attr().points,r=[];return r.push([t[1][0],t[1][1]]),r.push([t[0][0],t[0][1]]),r},e.prototype.getEndTangent=function(){var t=this.attr().points,r=t.length-1,n=[];return n.push([t[r-1][0],t[r-1][1]]),n.push([t[r][0],t[r][1]]),n},e}(Ru),S1=_1,M1=/[MLHVQTCSAZ]([^MLHVQTCSAZ]*)/gi,A1=/[^\s,]+/gi;function C1(i){var e=0,t=0,r=0,n=0;return(0,v.isArray)(i)?i.length===1?e=t=r=n=i[0]:i.length===2?(e=r=i[0],t=n=i[1]):i.length===3?(e=i[0],t=n=i[1],r=i[2]):(e=i[0],t=i[1],r=i[2],n=i[3]):e=t=r=n=i,{r1:e,r2:t,r3:r,r4:n}}function R2(i){if(i=i||[],isArray(i))return i;if(isString(i))return i=i.match(M1),each(i,function(e,t){if(e=e.match(A1),e[0].length>1){var r=e[0].charAt(0);e.splice(1,0,e[0].substr(1)),e[0]=r}each(e,function(n,a){isNaN(n)||(e[a]=+n)}),i[t]=e}),i}var T1=function(i){(0,g.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="rect",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,g.__assign)((0,g.__assign)({},t),{x:0,y:0,width:0,height:0,radius:0})},e.prototype.createPath=function(t,r){var n=this,a=this.attr(),o=this.get("el"),s=!1,u=["x","y","width","height","radius"];(0,v.each)(r||a,function(f,c){u.indexOf(c)!==-1&&!s?(o.setAttribute("d",n._assembleRect(a)),s=!0):u.indexOf(c)===-1&&ui[c]&&o.setAttribute(ui[c],f)})},e.prototype._assembleRect=function(t){var r=t.x,n=t.y,a=t.width,o=t.height,s=t.radius;if(!s)return"M "+r+","+n+" l "+a+",0 l 0,"+o+" l"+-a+" 0 z";var u=C1(s);(0,v.isArray)(s)?s.length===1?u.r1=u.r2=u.r3=u.r4=s[0]:s.length===2?(u.r1=u.r3=s[0],u.r2=u.r4=s[1]):s.length===3?(u.r1=s[0],u.r2=u.r4=s[1],u.r3=s[2]):(u.r1=s[0],u.r2=s[1],u.r3=s[2],u.r4=s[3]):u.r1=u.r2=u.r3=u.r4=s;var f=[["M "+(r+u.r1)+","+n],["l "+(a-u.r1-u.r2)+",0"],["a "+u.r2+","+u.r2+",0,0,1,"+u.r2+","+u.r2],["l 0,"+(o-u.r2-u.r3)],["a "+u.r3+","+u.r3+",0,0,1,"+-u.r3+","+u.r3],["l "+(u.r3+u.r4-a)+",0"],["a "+u.r4+","+u.r4+",0,0,1,"+-u.r4+","+-u.r4],["l 0,"+(u.r4+u.r1-o)],["a "+u.r1+","+u.r1+",0,0,1,"+u.r1+","+-u.r1],["z"]];return f.join(" ")},e}(Ru),I1=T1,rg=.3,k1={top:"before-edge",middle:"central",bottom:"after-edge",alphabetic:"baseline",hanging:"hanging"},L1={top:"text-before-edge",middle:"central",bottom:"text-after-edge",alphabetic:"alphabetic",hanging:"hanging"},N1={left:"left",start:"left",center:"middle",right:"end",end:"end"},O1=function(i){(0,g.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="text",t.canFill=!0,t.canStroke=!0,t}return e.prototype.getDefaultAttrs=function(){var t=i.prototype.getDefaultAttrs.call(this);return(0,g.__assign)((0,g.__assign)({},t),{x:0,y:0,text:null,fontSize:12,fontFamily:"sans-serif",fontStyle:"normal",fontWeight:"normal",fontVariant:"normal",textAlign:"start",textBaseline:"bottom"})},e.prototype.createPath=function(t,r){var n=this,a=this.attr(),o=this.get("el");this._setFont(),(0,v.each)(r||a,function(s,u){u==="text"?n._setText(""+s):u==="matrix"&&s?Th(n):ui[u]&&o.setAttribute(ui[u],s)}),o.setAttribute("paint-order","stroke"),o.setAttribute("style","stroke-linecap:butt; stroke-linejoin:miter;")},e.prototype._setFont=function(){var t=this.get("el"),r=this.attr(),n=r.textBaseline,a=r.textAlign,o=Yu();o&&o.name==="firefox"?t.setAttribute("dominant-baseline",L1[n]||"alphabetic"):t.setAttribute("alignment-baseline",k1[n]||"baseline"),t.setAttribute("text-anchor",N1[a]||"left")},e.prototype._setText=function(t){var r=this.get("el"),n=this.attr(),a=n.x,o=n.textBaseline,s=o===void 0?"bottom":o;if(!t)r.innerHTML="";else if(~t.indexOf(`
`)){var u=t.split(`
`),f=u.length-1,c="";(0,v.each)(u,function(l,m){m===0?s==="alphabetic"?c+='<tspan x="'+a+'" dy="'+-f+'em">'+l+"</tspan>":s==="top"?c+='<tspan x="'+a+'" dy="0.9em">'+l+"</tspan>":s==="middle"?c+='<tspan x="'+a+'" dy="'+-(f-1)/2+'em">'+l+"</tspan>":s==="bottom"?c+='<tspan x="'+a+'" dy="-'+(f+rg)+'em">'+l+"</tspan>":s==="hanging"&&(c+='<tspan x="'+a+'" dy="'+(-(f-1)-rg)+'em">'+l+"</tspan>"):c+='<tspan x="'+a+'" dy="1em">'+l+"</tspan>"}),r.innerHTML=c}else r.innerHTML=t},e}(Ru),D1=O1,P1=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,R1=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,B1=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function ng(i){var e=i.match(B1);if(!e)return"";var t="";return e.sort(function(r,n){return r=r.split(":"),n=n.split(":"),Number(r[0])-Number(n[0])}),(0,v.each)(e,function(r){r=r.split(":"),t+='<stop offset="'+r[0]+'" stop-color="'+r[1]+'"></stop>'}),t}function F1(i,e){var t=P1.exec(i),r=(0,v.mod)((0,v.toRadian)(parseFloat(t[1])),Math.PI*2),n=t[2],a,o;r>=0&&r<.5*Math.PI?(a={x:0,y:0},o={x:1,y:1}):.5*Math.PI<=r&&r<Math.PI?(a={x:1,y:0},o={x:0,y:1}):Math.PI<=r&&r<1.5*Math.PI?(a={x:1,y:1},o={x:0,y:0}):(a={x:0,y:1},o={x:1,y:0});var s=Math.tan(r),u=s*s,f=(o.x-a.x+s*(o.y-a.y))/(u+1)+a.x,c=s*(o.x-a.x+s*(o.y-a.y))/(u+1)+a.y;e.setAttribute("x1",a.x),e.setAttribute("y1",a.y),e.setAttribute("x2",f),e.setAttribute("y2",c),e.innerHTML=ng(n)}function G1(i,e){var t=R1.exec(i),r=parseFloat(t[1]),n=parseFloat(t[2]),a=parseFloat(t[3]),o=t[4];e.setAttribute("cx",r),e.setAttribute("cy",n),e.setAttribute("r",a),e.innerHTML=ng(o)}var z1=function(){function i(e){this.cfg={};var t=null,r=(0,v.uniqueId)("gradient_");return e.toLowerCase()[0]==="l"?(t=Pu("linearGradient"),F1(e,t)):(t=Pu("radialGradient"),G1(e,t)),t.setAttribute("id",r),this.el=t,this.id=r,this.cfg=e,this}return i.prototype.match=function(e,t){return this.cfg===t},i}(),U1=z1,X1={shadowColor:"color",shadowOpacity:"opacity",shadowBlur:"blur",shadowOffsetX:"dx",shadowOffsetY:"dy"},Y1={x:"-40%",y:"-40%",width:"200%",height:"200%"},W1=function(){function i(e){this.type="filter",this.cfg={},this.type="filter";var t=Pu("filter");return(0,v.each)(Y1,function(r,n){t.setAttribute(n,r)}),this.el=t,this.id=(0,v.uniqueId)("filter_"),this.el.id=this.id,this.cfg=e,this._parseShadow(e,t),this}return i.prototype.match=function(e,t){if(this.type!==e)return!1;var r=!0,n=this.cfg;return(0,v.each)(Object.keys(n),function(a){if(n[a]!==t[a])return r=!1,!1}),r},i.prototype.update=function(e,t){var r=this.cfg;return r[X1[e]]=t,this._parseShadow(r,this.el),this},i.prototype._parseShadow=function(e,t){var r=`<feDropShadow
      dx="`+(e.dx||0)+`"
      dy="`+(e.dy||0)+`"
      stdDeviation="`+(e.blur?e.blur/10:0)+`"
      flood-color="`+(e.color?e.color:"#000")+`"
      flood-opacity="`+(e.opacity?e.opacity:1)+`"
      />`;t.innerHTML=r},i}(),V1=W1,H1=function(){function i(e,t){this.cfg={};var r=Pu("marker"),n=(0,v.uniqueId)("marker_");r.setAttribute("id",n);var a=Pu("path");a.setAttribute("stroke",e.stroke||"none"),a.setAttribute("fill",e.fill||"none"),r.appendChild(a),r.setAttribute("overflow","visible"),r.setAttribute("orient","auto-start-reverse"),this.el=r,this.child=a,this.id=n;var o=e[t==="marker-start"?"startArrow":"endArrow"];return this.stroke=e.stroke||"#000",o===!0?this._setDefaultPath(t,a):(this.cfg=o,this._setMarker(e.lineWidth,a)),this}return i.prototype.match=function(){return!1},i.prototype._setDefaultPath=function(e,t){var r=this.el;t.setAttribute("d","M0,0 L"+10*Math.cos(Math.PI/6)+",5 L0,10"),r.setAttribute("refX",""+10*Math.cos(Math.PI/6)),r.setAttribute("refY","5")},i.prototype._setMarker=function(e,t){var r=this.el,n=this.cfg.path,a=this.cfg.d;(0,v.isArray)(n)&&(n=n.map(function(o){return o.join(" ")}).join("")),t.setAttribute("d",n),r.appendChild(t),a&&r.setAttribute("refX",""+a/e)},i.prototype.update=function(e){var t=this.child;t.attr?t.attr("fill",e):t.setAttribute("fill",e)},i}(),ag=H1,j1=function(){function i(e){this.type="clip",this.cfg={};var t=Pu("clipPath");this.el=t,this.id=(0,v.uniqueId)("clip_"),t.id=this.id;var r=e.cfg.el;return t.appendChild(r),this.cfg=e,this}return i.prototype.match=function(){return!1},i.prototype.remove=function(){var e=this.el;e.parentNode.removeChild(e)},i}(),Z1=j1,q1=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,$1=function(){function i(e){this.cfg={};var t=Pu("pattern");t.setAttribute("patternUnits","userSpaceOnUse");var r=Pu("image");t.appendChild(r);var n=(0,v.uniqueId)("pattern_");t.id=n,this.el=t,this.id=n,this.cfg=e;var a=q1.exec(e),o=a[2];r.setAttribute("href",o);var s=new Image;o.match(/^data:/i)||(s.crossOrigin="Anonymous"),s.src=o;function u(){t.setAttribute("width",""+s.width),t.setAttribute("height",""+s.height)}return s.complete?u():(s.onload=u,s.src=s.src),this}return i.prototype.match=function(e,t){return this.cfg===t},i}(),K1=$1,Q1=function(){function i(e){var t=Pu("defs"),r=(0,v.uniqueId)("defs_");t.id=r,e.appendChild(t),this.children=[],this.defaultArrow={},this.el=t,this.canvas=e}return i.prototype.find=function(e,t){for(var r=this.children,n=null,a=0;a<r.length;a++)if(r[a].match(e,t)){n=r[a].id;break}return n},i.prototype.findById=function(e){for(var t=this.children,r=null,n=0;n<t.length;n++)if(t[n].id===e){r=t[n];break}return r},i.prototype.add=function(e){this.children.push(e),e.canvas=this.canvas,e.parent=this},i.prototype.getDefaultArrow=function(e,t){var r=e.stroke||e.strokeStyle;if(this.defaultArrow[r])return this.defaultArrow[r].id;var n=new ag(e,t);return this.defaultArrow[r]=n,this.el.appendChild(n.el),this.add(n),n.id},i.prototype.addGradient=function(e){var t=new U1(e);return this.el.appendChild(t.el),this.add(t),t.id},i.prototype.addArrow=function(e,t){var r=new ag(e,t);return this.el.appendChild(r.el),this.add(r),r.id},i.prototype.addShadow=function(e){var t=new V1(e);return this.el.appendChild(t.el),this.add(t),t.id},i.prototype.addPattern=function(e){var t=new K1(e);return this.el.appendChild(t.el),this.add(t),t.id},i.prototype.addClip=function(e){var t=new Z1(e);return this.el.appendChild(t.el),this.add(t),t.id},i}(),J1=Q1,tb=function(i){(0,g.__extends)(e,i);function e(t){return i.call(this,(0,g.__assign)((0,g.__assign)({},t),{autoDraw:!0,renderer:"svg"}))||this}return e.prototype.getShapeBase=function(){return p},e.prototype.getGroupBase=function(){return tg},e.prototype.getShape=function(t,r,n){var a=n.target||n.srcElement;if(!fv[a.tagName]){for(var o=a.parentNode;o&&!fv[o.tagName];)o=o.parentNode;a=o}return this.find(function(s){return s.get("el")===a})},e.prototype.createDom=function(){var t=Pu("svg"),r=new J1(t);return t.setAttribute("width",""+this.get("width")),t.setAttribute("height",""+this.get("height")),this.set("context",r),t},e.prototype.onCanvasChange=function(t){var r=this.get("context"),n=this.get("el");if(t==="sort"){var a=this.get("children");a&&a.length&&Kp(this,function(s,u){return a.indexOf(s)-a.indexOf(u)?1:0})}else if(t==="clear"){if(n){n.innerHTML="";var o=r.el;o.innerHTML="",n.appendChild(o)}}else t==="matrix"?Th(this):t==="clip"?Ih(this,r):t==="changeSize"&&(n.setAttribute("width",""+this.get("width")),n.setAttribute("height",""+this.get("height")))},e.prototype.draw=function(){var t=this.get("context"),r=this.getChildren();Ih(this,t),r.length&&Qp(t,r)},e}(oh),kh=tb,B2="0.5.6",Lh,cv,ig,lv;function eb(){Lh=document.createElement("table"),cv=document.createElement("tr"),ig=/^\s*<(\w+|!)[^>]*>/,lv={tr:document.createElement("tbody"),tbody:Lh,thead:Lh,tfoot:Lh,td:cv,th:cv,"*":document.createElement("div")}}function no(i){Lh||eb();var e=ig.test(i)&&RegExp.$1;(!e||!(e in lv))&&(e="*");var t=lv[e];i=typeof i=="string"?i.replace(/(^\s*)|(\s*$)/g,""):i,t.innerHTML=""+i;var r=t.childNodes[0];return r&&t.contains(r)&&t.removeChild(r),r}var rb=et(6767),Nh=et.n(rb);function ld(i){"@babel/helpers - typeof";return ld=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ld(i)}var nb=/^\s+/,ab=/\s+$/;function ha(i,e){if(i=i||"",e=e||{},i instanceof ha)return i;if(!(this instanceof ha))return new ha(i,e);var t=ib(i);this._originalInput=i,this._r=t.r,this._g=t.g,this._b=t.b,this._a=t.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||t.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=t.ok}ha.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb(),t,r,n,a,o,s;return t=e.r/255,r=e.g/255,n=e.b/255,t<=.03928?a=t/12.92:a=Math.pow((t+.055)/1.055,2.4),r<=.03928?o=r/12.92:o=Math.pow((r+.055)/1.055,2.4),n<=.03928?s=n/12.92:s=Math.pow((n+.055)/1.055,2.4),.2126*a+.7152*o+.0722*s},setAlpha:function(e){return this._a=lg(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=sg(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=sg(this._r,this._g,this._b),t=Math.round(e.h*360),r=Math.round(e.s*100),n=Math.round(e.v*100);return this._a==1?"hsv("+t+", "+r+"%, "+n+"%)":"hsva("+t+", "+r+"%, "+n+"%, "+this._roundA+")"},toHsl:function(){var e=og(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=og(this._r,this._g,this._b),t=Math.round(e.h*360),r=Math.round(e.s*100),n=Math.round(e.l*100);return this._a==1?"hsl("+t+", "+r+"%, "+n+"%)":"hsla("+t+", "+r+"%, "+n+"%, "+this._roundA+")"},toHex:function(e){return ug(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return fb(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(xo(this._r,255)*100)+"%",g:Math.round(xo(this._g,255)*100)+"%",b:Math.round(xo(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(xo(this._r,255)*100)+"%, "+Math.round(xo(this._g,255)*100)+"%, "+Math.round(xo(this._b,255)*100)+"%)":"rgba("+Math.round(xo(this._r,255)*100)+"%, "+Math.round(xo(this._g,255)*100)+"%, "+Math.round(xo(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:wb[ug(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var t="#"+fg(this._r,this._g,this._b,this._a),r=t,n=this._gradientType?"GradientType = 1, ":"";if(e){var a=ha(e);r="#"+fg(a._r,a._g,a._b,a._a)}return"progid:DXImageTransform.Microsoft.gradient("+n+"startColorstr="+t+",endColorstr="+r+")"},toString:function(e){var t=!!e;e=e||this._format;var r=!1,n=this._a<1&&this._a>=0,a=!t&&n&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");return a?e==="name"&&this._a===0?this.toName():this.toRgbString():(e==="rgb"&&(r=this.toRgbString()),e==="prgb"&&(r=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(r=this.toHexString()),e==="hex3"&&(r=this.toHexString(!0)),e==="hex4"&&(r=this.toHex8String(!0)),e==="hex8"&&(r=this.toHex8String()),e==="name"&&(r=this.toName()),e==="hsl"&&(r=this.toHslString()),e==="hsv"&&(r=this.toHsvString()),r||this.toHexString())},clone:function(){return ha(this.toString())},_applyModification:function(e,t){var r=e.apply(null,[this].concat([].slice.call(t)));return this._r=r._r,this._g=r._g,this._b=r._b,this.setAlpha(r._a),this},lighten:function(){return this._applyModification(db,arguments)},brighten:function(){return this._applyModification(vb,arguments)},darken:function(){return this._applyModification(pb,arguments)},desaturate:function(){return this._applyModification(cb,arguments)},saturate:function(){return this._applyModification(lb,arguments)},greyscale:function(){return this._applyModification(hb,arguments)},spin:function(){return this._applyModification(gb,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(bb,arguments)},complement:function(){return this._applyCombination(yb,arguments)},monochromatic:function(){return this._applyCombination(xb,arguments)},splitcomplement:function(){return this._applyCombination(mb,arguments)},triad:function(){return this._applyCombination(cg,[3])},tetrad:function(){return this._applyCombination(cg,[4])}},ha.fromRatio=function(i,e){if(ld(i)=="object"){var t={};for(var r in i)i.hasOwnProperty(r)&&(r==="a"?t[r]=i[r]:t[r]=Oh(i[r]));i=t}return ha(i,e)};function ib(i){var e={r:0,g:0,b:0},t=1,r=null,n=null,a=null,o=!1,s=!1;return typeof i=="string"&&(i=Mb(i)),ld(i)=="object"&&(cc(i.r)&&cc(i.g)&&cc(i.b)?(e=ob(i.r,i.g,i.b),o=!0,s=String(i.r).substr(-1)==="%"?"prgb":"rgb"):cc(i.h)&&cc(i.s)&&cc(i.v)?(r=Oh(i.s),n=Oh(i.v),e=ub(i.h,r,n),o=!0,s="hsv"):cc(i.h)&&cc(i.s)&&cc(i.l)&&(r=Oh(i.s),a=Oh(i.l),e=sb(i.h,r,a),o=!0,s="hsl"),i.hasOwnProperty("a")&&(t=i.a)),t=lg(t),{ok:o,format:i.format||s,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:t}}function ob(i,e,t){return{r:xo(i,255)*255,g:xo(e,255)*255,b:xo(t,255)*255}}function og(i,e,t){i=xo(i,255),e=xo(e,255),t=xo(t,255);var r=Math.max(i,e,t),n=Math.min(i,e,t),a,o,s=(r+n)/2;if(r==n)a=o=0;else{var u=r-n;switch(o=s>.5?u/(2-r-n):u/(r+n),r){case i:a=(e-t)/u+(e<t?6:0);break;case e:a=(t-i)/u+2;break;case t:a=(i-e)/u+4;break}a/=6}return{h:a,s:o,l:s}}function sb(i,e,t){var r,n,a;i=xo(i,360),e=xo(e,100),t=xo(t,100);function o(f,c,l){return l<0&&(l+=1),l>1&&(l-=1),l<1/6?f+(c-f)*6*l:l<1/2?c:l<2/3?f+(c-f)*(2/3-l)*6:f}if(e===0)r=n=a=t;else{var s=t<.5?t*(1+e):t+e-t*e,u=2*t-s;r=o(u,s,i+1/3),n=o(u,s,i),a=o(u,s,i-1/3)}return{r:r*255,g:n*255,b:a*255}}function sg(i,e,t){i=xo(i,255),e=xo(e,255),t=xo(t,255);var r=Math.max(i,e,t),n=Math.min(i,e,t),a,o,s=r,u=r-n;if(o=r===0?0:u/r,r==n)a=0;else{switch(r){case i:a=(e-t)/u+(e<t?6:0);break;case e:a=(t-i)/u+2;break;case t:a=(i-e)/u+4;break}a/=6}return{h:a,s:o,v:s}}function ub(i,e,t){i=xo(i,360)*6,e=xo(e,100),t=xo(t,100);var r=Math.floor(i),n=i-r,a=t*(1-e),o=t*(1-n*e),s=t*(1-(1-n)*e),u=r%6,f=[t,o,a,a,s,t][u],c=[s,t,t,o,a,a][u],l=[a,a,s,t,t,o][u];return{r:f*255,g:c*255,b:l*255}}function ug(i,e,t,r){var n=[Ju(Math.round(i).toString(16)),Ju(Math.round(e).toString(16)),Ju(Math.round(t).toString(16))];return r&&n[0].charAt(0)==n[0].charAt(1)&&n[1].charAt(0)==n[1].charAt(1)&&n[2].charAt(0)==n[2].charAt(1)?n[0].charAt(0)+n[1].charAt(0)+n[2].charAt(0):n.join("")}function fb(i,e,t,r,n){var a=[Ju(Math.round(i).toString(16)),Ju(Math.round(e).toString(16)),Ju(Math.round(t).toString(16)),Ju(hg(r))];return n&&a[0].charAt(0)==a[0].charAt(1)&&a[1].charAt(0)==a[1].charAt(1)&&a[2].charAt(0)==a[2].charAt(1)&&a[3].charAt(0)==a[3].charAt(1)?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")}function fg(i,e,t,r){var n=[Ju(hg(r)),Ju(Math.round(i).toString(16)),Ju(Math.round(e).toString(16)),Ju(Math.round(t).toString(16))];return n.join("")}ha.equals=function(i,e){return!i||!e?!1:ha(i).toRgbString()==ha(e).toRgbString()},ha.random=function(){return ha.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function cb(i,e){e=e===0?0:e||10;var t=ha(i).toHsl();return t.s-=e/100,t.s=hd(t.s),ha(t)}function lb(i,e){e=e===0?0:e||10;var t=ha(i).toHsl();return t.s+=e/100,t.s=hd(t.s),ha(t)}function hb(i){return ha(i).desaturate(100)}function db(i,e){e=e===0?0:e||10;var t=ha(i).toHsl();return t.l+=e/100,t.l=hd(t.l),ha(t)}function vb(i,e){e=e===0?0:e||10;var t=ha(i).toRgb();return t.r=Math.max(0,Math.min(255,t.r-Math.round(255*-(e/100)))),t.g=Math.max(0,Math.min(255,t.g-Math.round(255*-(e/100)))),t.b=Math.max(0,Math.min(255,t.b-Math.round(255*-(e/100)))),ha(t)}function pb(i,e){e=e===0?0:e||10;var t=ha(i).toHsl();return t.l-=e/100,t.l=hd(t.l),ha(t)}function gb(i,e){var t=ha(i).toHsl(),r=(t.h+e)%360;return t.h=r<0?360+r:r,ha(t)}function yb(i){var e=ha(i).toHsl();return e.h=(e.h+180)%360,ha(e)}function cg(i,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var t=ha(i).toHsl(),r=[ha(i)],n=360/e,a=1;a<e;a++)r.push(ha({h:(t.h+a*n)%360,s:t.s,l:t.l}));return r}function mb(i){var e=ha(i).toHsl(),t=e.h;return[ha(i),ha({h:(t+72)%360,s:e.s,l:e.l}),ha({h:(t+216)%360,s:e.s,l:e.l})]}function bb(i,e,t){e=e||6,t=t||30;var r=ha(i).toHsl(),n=360/t,a=[ha(i)];for(r.h=(r.h-(n*e>>1)+720)%360;--e;)r.h=(r.h+n)%360,a.push(ha(r));return a}function xb(i,e){e=e||6;for(var t=ha(i).toHsv(),r=t.h,n=t.s,a=t.v,o=[],s=1/e;e--;)o.push(ha({h:r,s:n,v:a})),a=(a+s)%1;return o}ha.mix=function(i,e,t){t=t===0?0:t||50;var r=ha(i).toRgb(),n=ha(e).toRgb(),a=t/100,o={r:(n.r-r.r)*a+r.r,g:(n.g-r.g)*a+r.g,b:(n.b-r.b)*a+r.b,a:(n.a-r.a)*a+r.a};return ha(o)},ha.readability=function(i,e){var t=ha(i),r=ha(e);return(Math.max(t.getLuminance(),r.getLuminance())+.05)/(Math.min(t.getLuminance(),r.getLuminance())+.05)},ha.isReadable=function(i,e,t){var r=ha.readability(i,e),n,a;switch(a=!1,n=Ab(t),n.level+n.size){case"AAsmall":case"AAAlarge":a=r>=4.5;break;case"AAlarge":a=r>=3;break;case"AAAsmall":a=r>=7;break}return a},ha.mostReadable=function(i,e,t){var r=null,n=0,a,o,s,u;t=t||{},o=t.includeFallbackColors,s=t.level,u=t.size;for(var f=0;f<e.length;f++)a=ha.readability(i,e[f]),a>n&&(n=a,r=ha(e[f]));return ha.isReadable(i,r,{level:s,size:u})||!o?r:(t.includeFallbackColors=!1,ha.mostReadable(i,["#fff","#000"],t))};var hv=ha.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},wb=ha.hexNames=Eb(hv);function Eb(i){var e={};for(var t in i)i.hasOwnProperty(t)&&(e[i[t]]=t);return e}function lg(i){return i=parseFloat(i),(isNaN(i)||i<0||i>1)&&(i=1),i}function xo(i,e){_b(i)&&(i="100%");var t=Sb(i);return i=Math.min(e,Math.max(0,parseFloat(i))),t&&(i=parseInt(i*e,10)/100),Math.abs(i-e)<1e-6?1:i%e/parseFloat(e)}function hd(i){return Math.min(1,Math.max(0,i))}function bu(i){return parseInt(i,16)}function _b(i){return typeof i=="string"&&i.indexOf(".")!=-1&&parseFloat(i)===1}function Sb(i){return typeof i=="string"&&i.indexOf("%")!=-1}function Ju(i){return i.length==1?"0"+i:""+i}function Oh(i){return i<=1&&(i=i*100+"%"),i}function hg(i){return Math.round(parseFloat(i)*255).toString(16)}function dg(i){return bu(i)/255}var tf=function(){var i="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",t="(?:"+e+")|(?:"+i+")",r="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?",n="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?";return{CSS_UNIT:new RegExp(t),rgb:new RegExp("rgb"+r),rgba:new RegExp("rgba"+n),hsl:new RegExp("hsl"+r),hsla:new RegExp("hsla"+n),hsv:new RegExp("hsv"+r),hsva:new RegExp("hsva"+n),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function cc(i){return!!tf.CSS_UNIT.exec(i)}function Mb(i){i=i.replace(nb,"").replace(ab,"").toLowerCase();var e=!1;if(hv[i])i=hv[i],e=!0;else if(i=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var t;return(t=tf.rgb.exec(i))?{r:t[1],g:t[2],b:t[3]}:(t=tf.rgba.exec(i))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=tf.hsl.exec(i))?{h:t[1],s:t[2],l:t[3]}:(t=tf.hsla.exec(i))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=tf.hsv.exec(i))?{h:t[1],s:t[2],v:t[3]}:(t=tf.hsva.exec(i))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=tf.hex8.exec(i))?{r:bu(t[1]),g:bu(t[2]),b:bu(t[3]),a:dg(t[4]),format:e?"name":"hex8"}:(t=tf.hex6.exec(i))?{r:bu(t[1]),g:bu(t[2]),b:bu(t[3]),format:e?"name":"hex"}:(t=tf.hex4.exec(i))?{r:bu(t[1]+""+t[1]),g:bu(t[2]+""+t[2]),b:bu(t[3]+""+t[3]),a:dg(t[4]+""+t[4]),format:e?"name":"hex8"}:(t=tf.hex3.exec(i))?{r:bu(t[1]+""+t[1]),g:bu(t[2]+""+t[2]),b:bu(t[3]+""+t[3]),format:e?"name":"hex"}:!1}function Ab(i){var e,t;return i=i||{level:"AA",size:"small"},e=(i.level||"AA").toUpperCase(),t=(i.size||"small").toLowerCase(),e!=="AA"&&e!=="AAA"&&(e="AA"),t!=="small"&&t!=="large"&&(t="small"),{level:e,size:t}}var dd=2,vg=.16,Cb=.05,Tb=.05,Ib=.15,pg=5,gg=4,kb=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function yg(i,e,t){var r;return Math.round(i.h)>=60&&Math.round(i.h)<=240?r=t?Math.round(i.h)-dd*e:Math.round(i.h)+dd*e:r=t?Math.round(i.h)+dd*e:Math.round(i.h)-dd*e,r<0?r+=360:r>=360&&(r-=360),r}function mg(i,e,t){if(i.h===0&&i.s===0)return i.s;var r;return t?r=i.s-vg*e:e===gg?r=i.s+vg:r=i.s+Cb*e,r>1&&(r=1),t&&e===pg&&r>.1&&(r=.1),r<.06&&(r=.06),Number(r.toFixed(2))}function bg(i,e,t){var r;return t?r=i.v+Tb*e:r=i.v-Ib*e,r>1&&(r=1),Number(r.toFixed(2))}function vd(i){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=[],r=ha(i),n=pg;n>0;n-=1){var a=r.toHsv(),o=ha({h:yg(a,n,!0),s:mg(a,n,!0),v:bg(a,n,!0)}).toHexString();t.push(o)}t.push(r.toHexString());for(var s=1;s<=gg;s+=1){var u=r.toHsv(),f=ha({h:yg(u,s),s:mg(u,s),v:bg(u,s)}).toHexString();t.push(f)}return e.theme==="dark"?kb.map(function(c){var l=c.index,m=c.opacity,w=ha.mix(e.backgroundColor||"#141414",t[l],m*100).toHexString();return w}):t}var dv={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},Ys={},vv={};Object.keys(dv).forEach(function(i){Ys[i]=vd(dv[i]),Ys[i].primary=Ys[i][5],vv[i]=vd(dv[i],{theme:"dark",backgroundColor:"#141414"}),vv[i].primary=vv[i][5]});var F2=Ys.red,G2=Ys.volcano,z2=Ys.gold,U2=Ys.orange,X2=Ys.yellow,Y2=Ys.lime,W2=Ys.green,V2=Ys.cyan,H2=Ys.blue,j2=Ys.geekblue,Z2=Ys.purple,q2=Ys.magenta,$2=Ys.grey,ss=function(e,t,r){var n=Nh()(e),a=Nh()(t);return Nh()([(1-r)*n.red()+r*a.red(),(1-r)*n.green()+r*a.green(),(1-r)*n.blue()+r*a.blue()]).rgb()},Lb=function(e,t,r){t===void 0&&(t="#fff"),r===void 0&&(r="rgb(150, 150, 150)");var n=ss(t,e,.05).rgb().toString(),a=ss(t,e,.1).rgb().toString(),o=ss(t,e,.2).rgb().toString(),s=ss(t,e,.4).rgb().toString(),u=ss(t,r,.02).rgb().toString(),f=ss(t,r,.05).rgb().toString(),c=ss(t,r,.1).rgb().toString(),l=ss(t,r,.2).rgb().toString(),m=ss(t,r,.3).rgb().toString(),w=vd(e,{theme:"default",backgroundColor:t}),C=Nh()(e).hex().toLowerCase(),D=w.indexOf(C),U=e;return D!==-1&&(U=w[D+1]),{mainStroke:e,mainFill:a,activeStroke:e,activeFill:n,inactiveStroke:s,inactiveFill:n,selectedStroke:e,selectedFill:t,highlightStroke:U,highlightFill:o,disableStroke:m,disableFill:f,edgeMainStroke:m,edgeActiveStroke:e,edgeInactiveStroke:l,edgeSelectedStroke:e,edgeHighlightStroke:e,edgeDisableStroke:c,comboMainStroke:m,comboMainFill:u,comboActiveStroke:e,comboActiveFill:n,comboInactiveStroke:m,comboInactiveFill:u,comboSelectedStroke:e,comboSelectedFill:u,comboHighlightStroke:U,comboHighlightFill:u,comboDisableStroke:l,comboDisableFill:f}},Nb=function(e,t,r){t===void 0&&(t="#fff"),r===void 0&&(r="#777");var n=ss(t,e,.2).rgb().toString(),a=ss(t,e,.3).rgb().toString(),o=ss(t,e,.6).rgb().toString(),s=ss(t,e,.8).rgb().toString(),u=ss(t,r,.2).rgb().toString(),f=ss(t,r,.25).rgb().toString(),c=ss(t,r,.3).rgb().toString(),l=ss(t,r,.4).rgb().toString(),m=ss(t,r,.5).rgb().toString(),w=vd(e,{theme:"dark",backgroundColor:t}),C=Nh()(e).hex().toLowerCase(),D=w.indexOf(C),U=e;return D!==-1&&(U=w[D+1]),{mainStroke:s,mainFill:n,activeStroke:e,activeFill:a,inactiveStroke:s,inactiveFill:n,selectedStroke:e,selectedFill:n,highlightStroke:e,highlightFill:o,disableStroke:m,disableFill:f,edgeMainStroke:r,edgeActiveStroke:e,edgeInactiveStroke:r,edgeSelectedStroke:e,edgeHighlightStroke:e,edgeDisableStroke:c,comboMainStroke:l,comboMainFill:f,comboActiveStroke:e,comboActiveFill:u,comboInactiveStroke:l,comboInactiveFill:f,comboSelectedStroke:e,comboSelectedFill:u,comboHighlightStroke:U,comboHighlightFill:f,comboDisableStroke:l,comboDisableFill:u}},pv=function(e,t,r,n){return t===void 0&&(t="#fff"),r===void 0&&(r="default"),n===void 0&&(n="rgb(150, 150, 150)"),r==="default"?Lb(e,t,"rgb(150, 150, 150)"):Nb(e,t,"#777")},Ob=function(e,t,r,n){t===void 0&&(t="#fff"),r===void 0&&(r="default"),n===void 0&&(n="rgb(150, 150, 150)");var a=[];return e.forEach(function(o){a.push(pv(o,t,r,n))}),a},Db="rgb(95, 149, 255)",Pb="rgb(255, 255, 255)",xg="rgb(0, 0, 0)",ni=pv(Db,Pb),Ll={version:"0.8.23",rootContainerClassName:"root-container",nodeContainerClassName:"node-container",edgeContainerClassName:"edge-container",comboContainerClassName:"combo-container",delegateContainerClassName:"delegate-container",defaultLoopPosition:"top",nodeLabel:{style:{fill:"#000",fontSize:12,textAlign:"center",textBaseline:"middle"},offset:4},defaultNode:{type:"circle",style:{lineWidth:1,stroke:ni.mainStroke,fill:ni.mainFill},size:20,color:ni.mainStroke,linkPoints:{size:8,lineWidth:1,fill:ni.activeFill,stroke:ni.activeStroke}},nodeStateStyles:{active:{fill:ni.activeFill,stroke:ni.activeStroke,lineWidth:2,shadowColor:ni.mainStroke,shadowBlur:10},selected:{fill:ni.selectedFill,stroke:ni.selectedStroke,lineWidth:4,shadowColor:ni.selectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{fill:ni.highlightFill,stroke:ni.highlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{fill:ni.inactiveFill,stroke:ni.inactiveStroke,lineWidth:1},disable:{fill:ni.disableFill,stroke:ni.disableStroke,lineWidth:1}},edgeLabel:{style:{fill:xg,textAlign:"center",textBaseline:"middle",fontSize:12}},defaultEdge:{type:"line",size:1,style:{stroke:ni.edgeMainStroke,lineAppendWidth:2},color:ni.edgeMainStroke},edgeStateStyles:{active:{stroke:ni.edgeActiveStroke,lineWidth:1},selected:{stroke:ni.edgeSelectedStroke,lineWidth:2,shadowColor:ni.edgeSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:ni.edgeHighlightStroke,lineWidth:2,"text-shape":{fontWeight:500}},inactive:{stroke:ni.edgeInactiveStroke,lineWidth:1},disable:{stroke:ni.edgeDisableStroke,lineWidth:1}},comboLabel:{style:{fill:xg,textBaseline:"middle",fontSize:12},refY:10,refX:10},defaultCombo:{type:"circle",style:{fill:ni.comboMainFill,lineWidth:1,stroke:ni.comboMainStroke,r:5,width:20,height:10},size:[20,5],color:ni.comboMainStroke,padding:[25,20,15,20]},comboStateStyles:{active:{stroke:ni.comboActiveStroke,lineWidth:1,fill:ni.comboActiveFill},selected:{stroke:ni.comboSelectedStroke,lineWidth:2,fill:ni.comboSelectedFill,shadowColor:ni.comboSelectedStroke,shadowBlur:10,"text-shape":{fontWeight:500}},highlight:{stroke:ni.comboHighlightStroke,lineWidth:2,fill:ni.comboHighlightFill,"text-shape":{fontWeight:500}},inactive:{stroke:ni.comboInactiveStroke,fill:ni.comboInactiveFill,lineWidth:1},disable:{stroke:ni.comboDisableStroke,fill:ni.comboDisableFill,lineWidth:1}},delegateStyle:{fill:"#F3F9FF",fillOpacity:.5,stroke:"#1890FF",strokeOpacity:.9,lineDash:[5,5]},textWaterMarkerConfig:{width:150,height:100,compatible:!1,text:{x:0,y:60,lineHeight:20,rotate:20,fontSize:14,fontFamily:"Microsoft YaHei",fill:"rgba(0, 0, 0, 0.1)",baseline:"Middle"}},imageWaterMarkerConfig:{width:150,height:130,compatible:!1,image:{x:0,y:0,width:30,height:20,rotate:0}},waterMarkerImage:"https://gw.alipayobjects.com/os/s/prod/antv/assets/image/logo-with-text-73b8a.svg"},Rb=function(e){var t=e.clone();return Bb(e,t),t},Bb=function i(e,t){var r;e.isGroup()&&t.isGroup()&&((r=e.get("children"))===null||r===void 0||r.forEach(function(s,u){var f=t.get("children")[u];i(s,f)}));var n=e.get("type"),a=t.get("type");if(!(n!=="image"||a!=="image")){var o=e.get("clipShape");o&&t.setClip({type:o.get("type"),attrs:o.attr()})}};function pd(i,e,t){if(i){if(typeof i.addEventListener=="function")return i.addEventListener(e,t,!1),{remove:function(){i.removeEventListener(e,t,!1)}};if(typeof i.attachEvent=="function")return i.attachEvent("on"+e,t),{remove:function(){i.detachEvent("on"+e,t)}}}}var Fb=Ns.cloneEvent,Gb=Ns.isViewportChanged,zb=function(i){(0,g.__extends)(e,i);function e(t){var r=i.call(this,t)||this;return r.extendEvents=[],r.dragging=!1,r.mousedown=!1,r.preItem=null,r.destroy(),r.graph=t,r.destroyed=!1,r.initEvents(),r}return e.prototype.initEvents=function(){var t=this,r=t.graph,n=t.extendEvents,a=n===void 0?[]:n,o=r.get("canvas"),s=o.get("el"),u=(0,v.wrapBehavior)(this,"onCanvasEvents"),f=(0,v.wrapBehavior)(this,"onExtendEvents"),c=(0,v.wrapBehavior)(this,"onWheelEvent");o.off("*").on("*",u),this.canvasHandler=u,a.push(pd(s,"wheel",c)),typeof window!="undefined"&&(a.push(pd(window,"keydown",f)),a.push(pd(window,"keyup",f)),a.push(pd(window,"focus",f))),this.resetHandler&&r.off("afterchangedata",this.resetHandler),this.resetHandler=(0,v.wrapBehavior)(this,"resetStatus"),r.on("afterchangedata",this.resetHandler)},e.getItemRoot=function(t){for(;t&&!t.get("item");)t=t.get("parent");return t},e.prototype.onCanvasEvents=function(t){var r=this,n=this.graph,a=n.get("canvas"),o=t.target,s=t.type;switch(s){case"drag":this.onCanvasEvents(Object.assign({},t,{type:"mousemove"}));break;case"dragend":this.onCanvasEvents(Object.assign({},t,{type:"mouseup"}));break;case"mousedown":this.mousedown=!0;break;case"mouseup":setTimeout(function(){return r.mousedown=!1});break;case"click":if(!this.mousedown)return;break;default:break}t.canvasX=t.x,t.canvasY=t.y;var u={x:t.canvasX,y:t.canvasY},f=n.get("group"),c=f.getMatrix();if(c||(c=[1,0,0,0,1,0,0,0,1]),Gb(c)&&(u=n.getPointByClient(t.clientX,t.clientY)),t.x=u.x,t.y=u.y,t.currentTarget=n,o===a){(s==="mousemove"||s==="mouseleave")&&this.handleMouseMove(t,"canvas"),t.target=a,t.item=null,n.emit(s,t),n.emit("canvas:".concat(s),t);return}var l=e.getItemRoot(o);if(!l){n.emit(s,t);return}var m=l.get("item");if(!m.destroyed){var w=m.getType();if(t.target=o,t.item=m,t.canvasX===t.x&&t.canvasY===t.y){var C=n.getCanvasByPoint(t.x,t.y);t.canvasX=C.x,t.canvasY=C.y}t.name&&!t.name.includes(":")?(n.emit("".concat(w,":").concat(s),t),n.emit(s,t)):t.name&&n.emit(t.name,t),s==="dragstart"&&(this.dragging=!0),s==="dragend"&&(this.dragging=!1),s==="mousemove"&&this.handleMouseMove(t,w)}},e.prototype.onExtendEvents=function(t){this.graph.emit(t.type,t)},e.prototype.onWheelEvent=function(t){(0,v.isNil)(t.wheelDelta)&&(t.wheelDelta=-t.detail),this.graph.emit("wheel",t)},e.prototype.handleMouseMove=function(t,r){var n=this,a=n.graph,o=n.preItem,s=a.get("canvas"),u=t.target===s?null:t.item;t=Fb(t),o&&o!==u&&!o.destroyed&&(t.item=o,this.emitCustomEvent(o.getType(),"mouseleave",t),this.dragging&&this.emitCustomEvent(o.getType(),"dragleave",t)),u&&o!==u&&(t.item=u,this.emitCustomEvent(r,"mouseenter",t),this.dragging&&this.emitCustomEvent(r,"dragenter",t)),this.preItem=u},e.prototype.emitCustomEvent=function(t,r,n){n.type=r,this.graph.emit("".concat(t,":").concat(r),n)},e.prototype.resetStatus=function(){this.mousedown=!1,this.dragging=!1,this.preItem=null},e.prototype.destroy=function(){var t=this,r=t.graph,n=t.canvasHandler,a=t.extendEvents,o=r.get("canvas");o.off("*",n),(0,v.each)(a,function(s){s.remove()}),this.resetStatus(),this.extendEvents.length=0,this.canvasHandler=null,this.resetHandler=null,this.destroyed=!0},e}(Ap),Ub=zb,Ja=et(83360),Xb=et(81746),gd=et.n(Xb),wg=Ns.traverseTree,Yb=function(e,t){var r;return e?(0,v.isNumber)(e)?r=function(a){return e}:r=e:r=function(a){return t||1},r},Wb=function(e,t){var r=[],n=[],a={},o=0;for(o=0;o<e.length;o++){var s=e[o];a[s.id]=o,r.push(s.x),r.push(s.y),r.push(0),r.push(0),n.push([])}for(o=0;o<t.length;o++){var u=t[o];n[a[u.source]].push(a[u.target]),n[a[u.target]].push(a[u.source])}var f=0;for(o=0;o<e.length;o++){var c=r.length,l=n[o],m=l.length;r[o*4+2]=c,r[o*4+3]=l.length,f=Math.max(f,l.length);for(var w=0;w<m;++w){var C=l[w];r.push(+C)}}for(;r.length%4!==0;)r.push(0);return{array:new Float32Array(r),maxEdgePerVetex:f}},Vb=function(e,t,r){var n=[],a=[],o={},s=0;for(s=0;s<e.length;s++){var u=e[s];o[u.id]=s,n.push(u.x),n.push(u.y),n.push(0),n.push(0),a.push([])}for(s=0;s<t.length;s++){var f=t[s];a[o[f.source]].push(o[f.target]),a[o[f.source]].push(r(f)),a[o[f.target]].push(o[f.source]),a[o[f.target]].push(r(f))}var c=0;for(s=0;s<e.length;s++){var l=n.length,m=a[s],w=m.length;n[s*4+2]=l,n[s*4+3]=w/2,c=Math.max(c,w/2);for(var C=0;C<w;++C){var D=m[C];n.push(+D)}}for(;n.length%4!==0;)n.push(0);return{array:new Float32Array(n),maxEdgePerVetex:c}},Hb=function(e,t,r,n){var a=[],o=[],s={},u=0;for(u=0;u<e.length;u++){var f=e[u];s[f.id]=u,a.push(f.x),a.push(f.y),a.push(0),a.push(0),o.push([])}for(u=0;u<t.length;u++){var c=t[u];o[s[c.source]].push(s[c.target]),o[s[c.source]].push(r(c)),o[s[c.source]].push(n(c)),o[s[c.source]].push(0),o[s[c.target]].push(s[c.source]),o[s[c.target]].push(r(c)),o[s[c.target]].push(n(c)),o[s[c.target]].push(0)}var l=0;for(u=0;u<e.length;u++){var m=a.length,w=o[u],C=w.length;a[u*4+2]=m+1048576*C/4,a[u*4+3]=0,l=Math.max(l,C/4);for(var D=0;D<C;++D){var U=w[D];a.push(+U)}}for(;a.length%4!==0;)a.push(0);return{array:new Float32Array(a),maxEdgePerVetex:l}},jb=function(e,t){var r=[],n=e.length,a={};return t.forEach(function(o){e.forEach(function(s,u){if(a[o[s]]===void 0&&(a[o[s]]=Object.keys(a).length),r.push(a[o[s]]),u===n-1)for(;r.length%4!==0;)r.push(0)})}),{array:new Float32Array(r),count:Object.keys(a).length}},Zb=function(e){for(var t=[],r=e.length,n=e[0].length,a=function(u){e.forEach(function(f,c){if(t.push(f[u]),c===r-1)for(;t.length%4!==0;)t.push(0)})},o=0;o<n;o++)a(o);return new Float32Array(t)},qb=function(e,t){var r=["V","TB","BT"],n={x:1/0,y:1/0},a={x:-1/0,y:-1/0},o="x",s="y";t&&r.indexOf(t)>=0&&(s="x",o="y");var u=0;wg(e,function(l){return u++,l.x>a.x&&(a.x=l.x),l.x<n.x&&(n.x=l.x),l.y>a.y&&(a.y=l.y),l.y<n.y&&(n.y=l.y),!0});var f=Math.PI*2/u,c=a[s]-n[s];return c===0||wg(e,function(l){var m=(l[s]-n[s])/c*(Math.PI*2-f)+f,w=Math.abs(o==="x"?l.x-e.x:l.y-e.y);return l.x=w*Math.cos(m),l.y=w*Math.sin(m),!0}),e},Eg=function i(){return typeof window=="undefined"||typeof document=="undefined"?{}:{canvas:!!window.CanvasRenderingContext2D,webgl:function(){try{var e=document.createElement("canvas");return!!(window.WebGLRenderingContext&&(e.getContext("webgl")||e.getContext("experimental-webgl")))}catch(t){return!1}}(),workers:!!window.Worker,fileapi:window.File&&window.FileReader&&window.FileList&&window.Blob,getWebGLErrorMessage:function(){var t=document.createElement("div");return t.id="webgl-error-message",t.style.fontFamily="monospace",t.style.fontSize="13px",t.style.fontWeight="normal",t.style.textAlign="center",t.style.background="#fff",t.style.color="#000",t.style.padding="1.5em",t.style.width="400px",t.style.margin="5em auto 0",this.webgl||(t.innerHTML=window.WebGLRenderingContext?['Your graphics card does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br />','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join(`
`):['Your browser does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" rel="external nofollow" rel="external nofollow" style="color:#000">WebGL</a>.<br/>','Find out how to get it <a href="http://get.webgl.org/" rel="external nofollow" rel="external nofollow" style="color:#000">here</a>.'].join(`
`)),t},addGetWebGLMessage:function(t){t=t||{};var r=t.parent!==void 0?t.parent:document.body,n=t.id!==void 0?t.id:"oldie",a=i().getWebGLErrorMessage();a.id=n,r.appendChild(a)}}},_g=function(){var e=navigator.userAgent.toLowerCase();return e.indexOf("firefox")>-1?"firefox":e.indexOf("safari")>-1?"safari":e.indexOf("opr")>-1?"opera":e.indexOf("chrome")>-1?"chrome":e.indexOf("trident")>-1?"ie 11":e.indexOf("ie")>-1?"ie":"unknown"},$b=(0,g.__assign)((0,g.__assign)((0,g.__assign)((0,g.__assign)((0,g.__assign)({},Ns),_),E),b),k),lc=$b,Kb=lc.radialLayout,Qb=function(){function i(e){this.type=e.type,this.radial=e.radial,this.config=e}return i.prototype.init=function(e){var t=this;if(this.data=e,this.radial){this.layoutMethod=function(r){var n=gd()[t.type](r,t.config);return Kb(n),n};return}this.layoutMethod=function(r){return gd()[t.type](r,t.config)}},i.prototype.execute=function(){return this.layoutMethod(this.data,this.config)},i.prototype.layout=function(e){return this.init(e),this.execute()},i}(),Jb=Qb;(0,Ja.registerLayout)("grid",Ja.GridLayout),(0,Ja.registerLayout)("random",Ja.RandomLayout),(0,Ja.registerLayout)("force",Ja.ForceLayout),(0,Ja.registerLayout)("circular",Ja.CircularLayout),(0,Ja.registerLayout)("dagre",Ja.DagreLayout),(0,Ja.registerLayout)("dagreCompound",Ja.DagreCompoundLayout),(0,Ja.registerLayout)("radial",Ja.RadialLayout),(0,Ja.registerLayout)("concentric",Ja.ConcentricLayout),(0,Ja.registerLayout)("mds",Ja.MDSLayout),(0,Ja.registerLayout)("fruchterman",Ja.FruchtermanLayout),(0,Ja.registerLayout)("fruchterman-gpu",Ja.FruchtermanGPULayout),(0,Ja.registerLayout)("gForce",Ja.GForceLayout),(0,Ja.registerLayout)("force2",Ja.Force2Layout),(0,Ja.registerLayout)("gForce-gpu",Ja.GForceGPULayout),(0,Ja.registerLayout)("comboForce",Ja.ComboForceLayout),(0,Ja.registerLayout)("comboCombined",Ja.ComboCombinedLayout),(0,Ja.registerLayout)("forceAtlas2",Ja.ForceAtlas2Layout);var tx=function(e,t){t.isCustomLayout=!0,Ja.Layouts[e]=(0,Ja.registerLayout)(e,t)},ex=function(){function i(e,t){var r=e.toString(),n=new Blob(["importScripts('".concat(t,"');(").concat(r,")()")],{type:"text/javascript"});return new Worker(URL.createObjectURL(n))}return i}(),rx=ex,nx=function(e){e===void 0&&(e="https://unpkg.com/@antv/layout@0.3.23/dist/layout.min.js");function t(){var n={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"};layout.registerLayout("grid",layout.GridLayout),layout.registerLayout("random",layout.RandomLayout),layout.registerLayout("force",layout.ForceLayout),layout.registerLayout("force2",layout.Force2Layout),layout.registerLayout("circular",layout.CircularLayout),layout.registerLayout("dagre",layout.DagreLayout),layout.registerLayout("dagreCompound",layout.DagreCompoundLayout),layout.registerLayout("radial",layout.RadialLayout),layout.registerLayout("concentric",layout.ConcentricLayout),layout.registerLayout("mds",layout.MDSLayout),layout.registerLayout("fruchterman",layout.FruchtermanLayout),layout.registerLayout("fruchterman-gpu",layout.FruchtermanGPULayout),layout.registerLayout("gForce",layout.GForceLayout),layout.registerLayout("gForce-gpu",layout.GForceGPULayout),layout.registerLayout("comboForce",layout.ComboForceLayout),layout.registerLayout("comboCombined",layout.ComboCombinedLayout),layout.registerLayout("forceAtlas2",layout.ForceAtlas2Layout);function a(s){var u=s.data.type;return u===n.RUN||u===n.GPURUN}function o(s){var u=this,f=s.data.type;switch(f){case n.RUN:{var c=s.data,l=c.nodes,m=c.edges,w=c.layoutCfg,C=w===void 0?{}:w,D=C.type,U=layout.getLayoutByName(D);if(!U){this.postMessage({type:n.ERROR,message:"layout ".concat(D," not found")});break}var $;C.onLayoutEnd=function(){u.postMessage({type:n.END,nodes:l}),$==null||$.destroy()},$=new U(C),$.init({nodes:l,edges:m}),$.execute();break}case n.GPURUN:{var tt=s.data,it=tt.nodes,m=tt.edges,ct=tt.layoutCfg,C=ct===void 0?{}:ct,_t=tt.canvas,D=C.type,U=layout.getLayoutByName(D);if(!U){this.postMessage({type:n.ERROR,message:"layout ".concat(D," not found")});break}if(D.split("-")[1]!=="gpu"){this.postMessage({type:n.ERROR,message:"layout ".concat(D," does not support GPU")});break}var Bt=new U(C);Bt.init({nodes:it,edges:m}),Bt.executeWithWorker(_t,this);break}default:break}}onmessage=function(u){a(u)&&o(u)}}var r=new rx(t,e);return r},dh={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"};function gv(i){"@babel/helpers - typeof";return gv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gv(i)}var Sg=function(e){return setTimeout(e,16)},Mg=function(e){return clearTimeout(e)},yd={requestAnimationFrame:function(e){var t=typeof window!="undefined"&&(window.requestAnimationFrame||window.webkitRequestAnimationFrame)||Sg;return t(e)},cancelAnimationFrame:function(e){var t=typeof window!="undefined"&&(window.cancelAnimationFrame||window.webkitCancelAnimationFrame)||Mg;return t(e)}},ax=["fruchterman","gForce"],ix=["force","grid","circular"],ox=function(i){(0,g.__extends)(e,i);function e(t){var r=i.call(this,t)||this;return r.graph=t,r.layoutCfg=t.get("layout")||{},r.layoutType=r.getLayoutType(),r.worker=null,r.workerData={},r.initLayout(),r}return e.prototype.initLayout=function(){},e.prototype.getWorker=function(){return this.worker?this.worker:(typeof Worker=="undefined"?(console.warn("Web worker is not supported in current browser."),this.worker=null):this.worker=nx(this.layoutCfg.workerScriptURL),this.worker)},e.prototype.stopWorker=function(){var t=this.workerData;this.worker&&(this.worker.terminate(),this.worker=null,t.requestId&&(yd.cancelAnimationFrame(t.requestId),t.requestId=null),t.requestId2&&(yd.cancelAnimationFrame(t.requestId2),t.requestId2=null))},e.prototype.execLayoutMethod=function(t,r){var n=this;return new Promise(function(a,o){return(0,g.__awaiter)(n,void 0,void 0,function(){var s,u,f,c,l,D,m,w,C,D,U;return(0,g.__generator)(this,function($){switch($.label){case 0:if(s=this.graph,!s||s.get("destroyed"))return[2];u=t.type,t.onLayoutEnd=function(){s.emit("aftersublayout",{type:u}),a()},u&&this.isGPU&&(Ag(u)?u="".concat(u,"-gpu"):console.warn("The '".concat(u,"' layout does not support GPU calculation for now, it will run in CPU."))),Ns.isForce(u)?(f=t.onTick,c=t.animate,l=c===void 0&&(u==="force"||u==="force2"),D=function(){f&&f(),(c||l)&&s.refreshPositions()},t.tick=D):(u==="comboForce"||u==="comboCombined")&&(t.comboTrees=s.get("comboTrees")),m=!1;try{w=new Ja.Layouts[u](t),this.layoutMethods[r]&&this.layoutMethods[r].destroy(),this.layoutMethods[r]=w}catch(tt){console.warn("The layout method: '".concat(u,"' does not exist! Please specify it first.")),o()}return m=w.enableTick,m&&(C=t.onTick,D=function(){C&&C(),s.refreshPositions()},w.tick=D),U=this.filterLayoutData(this.data,t),cx(U,r),w.init(U),s.emit("beforesublayout",{type:u}),[4,w.execute()];case 1:return $.sent(),w.isCustomLayout&&t.onLayoutEnd&&t.onLayoutEnd(),[2]}})})})},e.prototype.updateLayoutMethod=function(t,r){var n=this;return new Promise(function(a,o){return(0,g.__awaiter)(n,void 0,void 0,function(){var s,u,f,c,l,m,w;return(0,g.__generator)(this,function(C){switch(C.label){case 0:return s=this.graph,u=r==null?void 0:r.type,r.onLayoutEnd=function(){s.emit("aftersublayout",{type:u}),a()},Ns.isForce(u)&&(f=r.onTick,c=r.animate,l=c===void 0&&(u==="force"||u==="force2"),m=function(){f==null||f(),(c||l)&&s.refreshPositions()},r.tick=m),w=this.filterLayoutData(this.data,r),t.init(w),t.updateCfg(r),s.emit("beforesublayout",{type:u}),[4,t.execute()];case 1:return C.sent(),t.isCustomLayout&&r.onLayoutEnd&&r.onLayoutEnd(),[2]}})})})},e.prototype.layout=function(t){var r=this,n,a=this.graph;if(!(!a||a.get("destroyed"))){this.data=this.setDataFromGraph();var o=this.data,s=o.nodes,u=o.hiddenNodes;if(!s)return!1;var f=a.get("width"),c=a.get("height"),l={};Object.assign(l,{width:f,height:c,center:[f/2,c/2]},this.layoutCfg),this.layoutCfg=l;var m=l.type,w=!1;(n=this.layoutMethods)===null||n===void 0||n.forEach(function(_t){var Bt;return w=!!(!((Bt=_t.nodes)===null||Bt===void 0)&&Bt.length)||w});var C=this.destoryLayoutMethods();a.emit("beforelayout");var D=Promise.resolve();w&&m&&(C==null?void 0:C.length)===1&&C[0]===m?this.tweakInit():D=this.initPositions(l.center,s);var U=this.initPositions(l.center,u);U.then(),this.isGPU=Cg(l,m);var $=l.onLayoutEnd,tt=l.layoutEndFormatted,it=l.adjust;if(tt||(l.layoutEndFormatted=!0,l.onAllLayoutEnd=function(){return(0,g.__awaiter)(r,void 0,void 0,function(){return(0,g.__generator)(this,function(_t){switch(_t.label){case 0:return $&&$(s),this.refreshLayout(),it&&l.pipes?[4,this.adjustPipesBox(this.data,it)]:[3,2];case 1:_t.sent(),this.refreshLayout(),_t.label=2;case 2:return a.emit("afterlayout"),[2]}})})}),this.stopWorker(),l.workerEnabled&&this.layoutWithWorker(this.data,t))return!0;var ct=!1;return l.type?(ct=!0,D=D.then(function(){return(0,g.__awaiter)(r,void 0,void 0,function(){return(0,g.__generator)(this,function(_t){switch(_t.label){case 0:return[4,this.execLayoutMethod(l,0)];case 1:return[2,_t.sent()]}})})})):l.pipes&&(ct=!0,l.pipes.forEach(function(_t,Bt){D=D.then(function(){return(0,g.__awaiter)(r,void 0,void 0,function(){return(0,g.__generator)(this,function(Pt){switch(Pt.label){case 0:return[4,this.execLayoutMethod(_t,Bt)];case 1:return[2,Pt.sent()]}})})})})),ct?D.then(function(){l.onAllLayoutEnd&&l.onAllLayoutEnd(),t&&t()}).catch(function(_t){console.warn("graph layout failed,",_t)}):(a.refreshPositions(),t==null||t()),!1}},e.prototype.tweakInit=function(){var t=this,r=t.data,n=t.graph,a=r.nodes,o=r.edges;if(a!=null&&a.length){var s={};a.forEach(function(c){var l=c.x,m=c.y;!isNaN(l)&&!isNaN(m)&&(s[c.id]={x:l,y:m},c.mass=c.mass||2)}),o.forEach(function(c){var l=c.source,m=c.target,w=s[l],C=s[m];!w&&C?s[l]={x:C.x+(Math.random()-.5)*80,y:C.y+(Math.random()-.5)*80}:!C&&w&&(s[m]={x:w.x+(Math.random()-.5)*80,y:w.y+(Math.random()-.5)*80})});var u=n.get("width"),f=n.get("height");a.forEach(function(c){var l=s[c.id]||{x:u/2+(Math.random()-.5)*20,y:f/2+(Math.random()-.5)*20};c.x=l.x,c.y=l.y})}},e.prototype.initWithPreset=function(t,r){var n=this;return new Promise(function(a,o){return(0,g.__awaiter)(n,void 0,void 0,function(){var s,u,f,c,l,m,w;return(0,g.__generator)(this,function(C){switch(C.label){case 0:return s=this,u=s.layoutCfg,f=s.data,c=u.preset,!(c!=null&&c.type)||!Ja.Layouts[c==null?void 0:c.type]?(r==null||r(),a(),[2,!1]):(l=Cg(c,c.type),m=l?"".concat(c.type,"-gpu"):c.type,w=new Ja.Layouts[m](c),delete u.preset,w.init(f),[4,w.execute()]);case 1:return C.sent(),t==null||t(),a(),[2,!0]}})})})},e.prototype.layoutWithWorker=function(t,r){var n=this,a=this,o=a.layoutCfg,s=a.graph,u=this.getWorker(),f=this.workerData;if(!u)return!1;f.requestId=null,f.requestId2=null,f.currentTick=null,f.currentTickData=null,s.emit("beforelayout");var c=Promise.resolve(),l=!1;if(o.type)l=!0,c=c.then(function(){return n.runWebworker(u,t,o)});else if(o.pipes){l=!0;for(var m=function($){c=c.then(function(){return n.runWebworker(u,t,$)})},w=0,C=o.pipes;w<C.length;w++){var D=C[w];m(D)}}return l&&c.then(function(){o.onAllLayoutEnd&&o.onAllLayoutEnd(),r==null||r()}).catch(function(U){console.error("layout failed",U)}),!0},e.prototype.runWebworker=function(t,r,n){var a=this,o=this.isGPU,s=this.filterLayoutData(r,n),u=s.nodes,f=s.edges,c=document.createElement("canvas"),l=o&&typeof window!="undefined"&&window.navigator&&!navigator.gpu&&"OffscreenCanvas"in window&&"transferControlToOffscreen"in c,m=ux(n,function(C){return typeof C!="function"});if(!l)t.postMessage({type:dh.RUN,nodes:u,edges:f,layoutCfg:m});else{var w=c.transferControlToOffscreen();m.type="".concat(m.type,"-gpu"),t.postMessage({type:dh.GPURUN,nodes:u,edges:f,layoutCfg:m,canvas:w},[w])}return new Promise(function(C,D){t.onmessage=function(U){a.handleWorkerMessage(C,D,U,s,n)}})},e.prototype.handleWorkerMessage=function(t,r,n,a,o){var s=this,u=s.graph,f=s.workerData,c=n.data,l=c.type,m=function(){o.onTick&&o.onTick()};switch(l){case dh.TICK:f.currentTick=c.currentTick,f.currentTickData=c,f.requestId||(f.requestId=yd.requestAnimationFrame(function(){yv(a,c),u.refreshPositions(),m(),c.currentTick===c.totalTicks?t():f.currentTick===c.totalTicks&&(f.requestId2=yd.requestAnimationFrame(function(){yv(a,f.currentTickData),u.refreshPositions(),f.requestId2=null,m(),t()})),f.requestId=null}));break;case dh.END:f.currentTick==null&&(yv(a,c),t());break;case dh.GPUEND:f.currentTick==null&&(fx(a,c),t());break;case dh.ERROR:console.warn("Web-Worker layout error!",c.message),r();break;default:r();break}},e.prototype.updateLayoutCfg=function(t){var r=this,n=this,a=n.graph,o=n.layoutMethods;if(!(!a||a.get("destroyed"))){var s=t.disableTriggerLayout,u=(0,g.__rest)(t,["disableTriggerLayout"]),f=(0,v.mix)({},this.layoutCfg,u);if(this.layoutCfg=f,!s){if(!(o!=null&&o.length)){this.layout();return}if(this.data=this.setDataFromGraph(),this.stopWorker(),!(u.workerEnabled&&this.layoutWithWorker(this.data,null))){a.emit("beforelayout");var c=Promise.resolve(),l=!1;(o==null?void 0:o.length)===1?(l=!0,c=c.then(function(){return(0,g.__awaiter)(r,void 0,void 0,function(){return(0,g.__generator)(this,function(m){switch(m.label){case 0:return[4,this.updateLayoutMethod(o[0],f)];case 1:return[2,m.sent()]}})})})):o!=null&&o.length&&(l=!0,o.forEach(function(m,w){var C=f.pipes[w];c=c.then(function(){return(0,g.__awaiter)(r,void 0,void 0,function(){return(0,g.__generator)(this,function(D){switch(D.label){case 0:return[4,this.updateLayoutMethod(m,C)];case 1:return[2,D.sent()]}})})})})),l&&c.then(function(){f.onAllLayoutEnd&&f.onAllLayoutEnd()}).catch(function(m){console.warn("layout failed",m)})}}}},e.prototype.adjustPipesBox=function(t,r){var n=this;return new Promise(function(a){var o=t.nodes;o!=null&&o.length||a(),ix.includes(r)||(console.warn("The adjust type ".concat(r," is not supported yet, please assign it with 'force', 'grid', or 'circular'.")),a());var s={center:n.layoutCfg.center,nodeSize:function(C){return Math.max(C.height,C.width)},preventOverlap:!0,onLayoutEnd:function(){}},u=n.getLayoutBBox(o),f=u.groupNodes,c=u.layoutNodes,l=(0,v.clone)(c);s.onLayoutEnd=function(){c==null||c.forEach(function(w,C){var D,U,$,tt=w.x-((D=l[C])===null||D===void 0?void 0:D.x),it=w.y-((U=l[C])===null||U===void 0?void 0:U.y);($=f[C])===null||$===void 0||$.forEach(function(ct){ct.x+=tt,ct.y+=it})}),a()};var m=new Ja.Layouts[r](s);m.layout({nodes:c})})},e.prototype.destroy=function(){this.destoryLayoutMethods();var t=this.worker;t&&(t.terminate(),this.worker=null),this.destroyed=!0,this.graph.set("layout",void 0),this.layoutCfg=void 0,this.layoutType=void 0,this.layoutMethods=void 0,this.graph=null},e}(Mp),sx=ox;function yv(i,e){for(var t=i.nodes,r=e.nodes,n=t.length,a=0;a<n;a++){var o=t[a];o.x=r[a].x,o.y=r[a].y}}function ux(i,e){var t={};return i&&gv(i)==="object"?(Object.keys(i).forEach(function(r){i.hasOwnProperty(r)&&e(i[r])&&(t[r]=i[r])}),t):i}function fx(i,e){for(var t=i.nodes,r=e.vertexEdgeData,n=t.length,a=0;a<n;a++){var o=t[a],s=r[4*a],u=r[4*a+1];o.x=s,o.y=u}}function cx(i,e){var t;if(!((t=i==null?void 0:i.nodes)===null||t===void 0)&&t.length){var r=i.nodes;r.forEach(function(n){n.layoutOrder=e})}}function Ag(i){return ax.includes(i)}function Cg(i,e){var t=e;e&&e.split("-")[1]==="gpu"&&(t=e.split("-")[0],i.gpuEnabled=!0);var r=!1;return i.gpuEnabled&&(r=!0,Eg().webgl||(console.warn("Your browser does not support webGL or GPGPU. The layout will run in CPU."),r=!1)),r&&!Ag(t)&&(console.warn("The '".concat(t,"' layout does not support GPU calculation for now, it will run in CPU.")),r=!1),r}var Tg=Ht,lx="svg",hx=function(i){(0,g.__extends)(e,i);function e(t){var r=i.call(this,t)||this,n=r.get("defaultNode");return n||r.set("defaultNode",{type:"circle"}),n.type||(n.type="circle",r.set("defaultNode",n)),r.destroyed=!1,r}return e.prototype.initLayoutController=function(){var t=new sx(this);this.set({layoutController:t})},e.prototype.initEventController=function(){var t=new Ub(this);this.set({eventController:t})},e.prototype.initCanvas=function(){var t=this.get("container");if(typeof t=="string"&&(t=document.getElementById(t),this.set("container",t)),!t)throw new Error("invalid container");var r=t.clientWidth,n=t.clientHeight,a=this.get("width")||r,o=this.get("height")||n;!this.get("width")&&!this.get("height")&&(this.set("width",r),this.set("height",n));var s=this.get("renderer"),u;if(s===lx)u=new kh({container:t,width:a,height:o});else{var f={container:t,width:a,height:o},c=this.get("pixelRatio");c&&(f.pixelRatio=c,window.devicePixelRatio=c),u=new fc(f)}this.set("canvas",u)},e.prototype.initPlugins=function(){var t=this;(0,v.each)(t.get("plugins"),function(r){!r.destroyed&&r.initPlugin&&r.initPlugin(t)})},e.prototype.downloadImageWatermark=function(t,r,n,a){return(0,g.__awaiter)(this,void 0,void 0,function(){var o,s,u;return(0,g.__generator)(this,function(f){switch(f.label){case 0:return o=t.style.backgroundImage,s=o.slice(5,o.length-2),u=new Image,u.src=s,[4,new Promise(function(c){u.onload=function(){var l=r.createPattern(u,"repeat");r.rect(0,0,n,a),r.fillStyle=l,r.fill(),c("")}})];case 1:return f.sent(),[2]}})})},e.prototype.asyncToDataUrl=function(t,r,n,a,o,s){var u=this,f=document.querySelector(".g6-graph-watermarker"),c=this.get("canvas"),l=c.getRenderer(),m=s||c.get("el"),w="";t||(t="image/png"),setTimeout(function(){return(0,g.__awaiter)(u,void 0,void 0,function(){var C,D,U,$,tt,it,ct,_t,Bt,Pt;return(0,g.__generator)(this,function(Qt){switch(Qt.label){case 0:return l!=="svg"?[3,1]:(C=m.cloneNode(!0),D=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),U=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",D),U.replaceChild(C,U.documentElement),$=new XMLSerializer().serializeToString(U),w="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent($)),[3,4]);case 1:return tt=void 0,it=m.getContext("2d"),ct=a||this.get("width"),_t=o||this.get("height"),Bt=void 0,f?[4,this.downloadImageWatermark(f,it,ct,_t)]:[3,3];case 2:Qt.sent(),Qt.label=3;case 3:if(r){Pt=typeof window!="undefined"?window.devicePixelRatio:1;try{tt=it.getImageData(0,0,ct*Pt,_t*Pt),Bt=it.globalCompositeOperation,it.globalCompositeOperation="destination-over",it.fillStyle=r,it.fillRect(0,0,ct,_t)}catch(ye){console.error("Download image failed. Out of memory at ImageData creation")}}w=m.toDataURL(t),r&&(it.clearRect(0,0,ct,_t),it.putImageData(tt,0,0),it.globalCompositeOperation=Bt),Qt.label=4;case 4:return n&&n(w),[2]}})})},16)},e.prototype.toDataURL=function(t,r){var n=this.get("canvas"),a=n.getRenderer(),o=n.get("el");t||(t="image/png");var s="";if(a==="svg"){var u=o.cloneNode(!0),f=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),c=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",f);c.replaceChild(u,c.documentElement);var l=new XMLSerializer().serializeToString(c);s="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(l))}else{var m=void 0,w=o.getContext("2d"),C=Math.max(this.get("width"),500),D=Math.max(this.get("height"),500),U=void 0;if(r){var $=typeof window!="undefined"&&window.devicePixelRatio||1;try{m=w.getImageData(0,0,C*$,D*$),U=w.globalCompositeOperation,w.globalCompositeOperation="destination-over",w.fillStyle=r,w.fillRect(0,0,C,D)}catch(tt){console.error("Download image failed. Out of memory at ImageData creation")}}s=o.toDataURL(t),r&&(w.clearRect(0,0,C,D),w.putImageData(m,0,0),w.globalCompositeOperation=U)}return s},e.prototype.toFullDataURL=function(t,r,n){var a=this.get("group").getCanvasBBox(),o=a.height,s=a.width,u=this.get("renderer"),f=no('<div id="virtual-image"></div>'),c=n?n.backgroundColor:void 0,l=n?n.padding:void 0;l?(0,v.isNumber)(l)&&(l=[l,l,l,l]):l=[0,0,0,0];var m=o+l[0]+l[2],w=s+l[1]+l[3],C={container:f,height:m,width:w,quickHit:!0},D=u==="svg"?new kh(C):new fc(C),U=this.get("group"),$=U.clone(),tt=(0,v.clone)($.getMatrix());tt||(tt=[1,0,0,0,1,0,0,0,1]);var it=(a.maxX+a.minX)/2,ct=(a.maxY+a.minY)/2;tt=Tg(tt,[["t",-it,-ct],["t",s/2+l[3],o/2+l[0]]]),$.resetMatrix(),$.setMatrix(tt),D.add($);var _t=D.get("el"),Bt="";r||(r="image/png"),setTimeout(function(){if(u==="svg"){var Pt=_t.cloneNode(!0),Qt=document.implementation.createDocumentType("svg","-//W3C//DTD SVG 1.1//EN","http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd"),ye=document.implementation.createDocument("http://www.w3.org/2000/svg","svg",Qt);ye.replaceChild(Pt,ye.documentElement);var ce=new XMLSerializer().serializeToString(ye);Bt="data:image/svg+xml;charset=utf8,".concat(encodeURIComponent(ce))}else{var Ne=void 0,$e=_t.getContext("2d"),Rr=void 0;if(c){var rn=typeof window!="undefined"?window.devicePixelRatio:1;try{Ne=$e.getImageData(0,0,w*rn,m*rn),Rr=$e.globalCompositeOperation,$e.globalCompositeOperation="destination-over",$e.fillStyle=c,$e.fillRect(0,0,w,m)}catch(Vr){console.error("Download image failed. Out of memory at ImageData creation")}}Bt=_t.toDataURL(r),c&&($e.clearRect(0,0,w,m),$e.putImageData(Ne,0,0),$e.globalCompositeOperation=Rr)}t&&t(Bt)},16)},e.prototype.downloadFullImage=function(t,r,n){var a=this,o=this.get("group").getCanvasBBox(),s=o.height,u=o.width,f=this.get("renderer"),c=no('<div id="virtual-image"></div>'),l=document.querySelector(".g6-graph-watermarker"),m=n?n.backgroundColor:void 0,w=n?n.padding:void 0;w?(0,v.isNumber)(w)&&(w=[w,w,w,w]):w=[0,0,0,0];var C=s+w[0]+w[2],D=u+w[1]+w[3];if(l){var U=this.get("graphWaterMarker").cfg||{},$=U.width,tt=U.height;C=Math.ceil(C/tt)*tt,D=Math.ceil(D/$)*$}var it={container:c,height:C,width:D},ct=f==="svg"?new kh(it):new fc(it),_t=this.get("group"),Bt=Rb(_t),Pt=(0,v.clone)(Bt.getMatrix());Pt||(Pt=[1,0,0,0,1,0,0,0,1]);var Qt=(o.maxX+o.minX)/2,ye=(o.maxY+o.minY)/2;Pt=Tg(Pt,[["t",-Qt,-ye],["t",u/2+w[3],s/2+w[0]]]),Bt.resetMatrix(),Bt.setMatrix(Pt),ct.add(Bt);var ce=ct.get("el");r||(r="image/png"),this.asyncToDataUrl(r,m,function(Ne){var $e=document.createElement("a"),Rr=(t||"graph")+(f==="svg"?".svg":".".concat(r.split("/")[1]));a.dataURLToImage(Ne,f,$e,Rr);var rn=document.createEvent("MouseEvents");rn.initEvent("click",!1,!1),$e.dispatchEvent(rn)},D,C,ce)},e.prototype.downloadImage=function(t,r,n){var a=this,o=this;o.stopAnimate();var s=o.get("canvas"),u=s.getRenderer();r||(r="image/png");var f=(t||"graph")+(u==="svg"?".svg":".".concat(r.split("/")[1])),c=document.createElement("a");o.asyncToDataUrl(r,n,function(l){a.dataURLToImage(l,u,c,f);var m=document.createEvent("MouseEvents");m.initEvent("click",!1,!1),c.dispatchEvent(m)})},e.prototype.dataURLToImage=function(t,r,n,a){if(!t||t==="data:"){console.error("Download image failed. The graph is too large or there is invalid attribute values in graph items");return}if(typeof window!="undefined")if(window.Blob&&window.URL&&r!=="svg"){var o=t.split(","),s="";if(o&&o.length>0){var u=o[0].match(/:(.*?);/);u&&u.length>=2&&(s=u[1])}for(var f=atob(o[1]),c=f.length,l=new Uint8Array(c);c--;)l[c]=f.charCodeAt(c);var m=new Blob([l],{type:s});window.navigator.msSaveBlob?window.navigator.msSaveBlob(m,a):n.addEventListener("click",function(){n.download=a,n.href=window.URL.createObjectURL(m)})}else n.addEventListener("click",function(){n.download=a,n.href=t})},e.prototype.addPlugin=function(t){var r=this;t.destroyed||(r.get("plugins").push(t),t.initPlugin(r))},e.prototype.removePlugin=function(t){var r=this.get("plugins"),n=r.indexOf(t);n>=0&&(t.destroyPlugin(),r.splice(n,1))},e.prototype.setImageWaterMarker=function(t,r){t===void 0&&(t=Ll.waterMarkerImage);var n=this.get("container");(0,v.isString)(n)&&(n=document.getElementById(n)),n.style.position||(n.style.position="relative");var a=this.get("graphWaterMarker"),o=(0,v.deepMix)({},Ll.imageWaterMarkerConfig,r),s=o.width,u=o.height,f=o.compatible,c=o.image;if(!t){var l=f?n:document.querySelector(".g6-graph-watermarker");l&&(l.style.cssText=void 0),a&&a.clear();return}if(a)a.clear();else{var m={container:n,width:s,height:u,capture:!1},w=this.get("pixelRatio");w&&(m.pixelRatio=w,window.devicePixelRatio=w),a=new fc(m),this.set("graphWaterMarker",a)}a.get("el").style.display="none";var C=a.get("context"),D=c.rotate,U=c.x,$=c.y;C.rotate(-D*Math.PI/180);var tt=new Image;tt.crossOrigin="anonymous",tt.src=t,tt.onload=function(){if(C.drawImage(tt,U,$,c.width,c.height),C.rotate(D*Math.PI/180),f)n.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;");else{var it=document.querySelector(".g6-graph-watermarker");it||(it=document.createElement("div"),it.className="g6-graph-watermarker"),it.className="g6-graph-watermarker",a.destroyed||(it.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:-1;"),n.appendChild(it))}}},e.prototype.setTextWaterMarker=function(t,r){var n=this.get("container");(0,v.isString)(n)&&(n=document.getElementById(n)),n.style.position||(n.style.position="relative");var a=this.get("graphWaterMarker"),o=(0,v.deepMix)({},Ll.textWaterMarkerConfig,r),s=o.width,u=o.height,f=o.compatible,c=o.text;if(!(t!=null&&t.length)){var l=f?n:document.querySelector(".g6-graph-watermarker");l&&(l.style.cssText=void 0),a&&a.clear();return}if(a)a.clear();else{var m={container:n,width:s,height:u,capture:!1},w=this.get("pixelRatio");w&&(m.pixelRatio=w,window.devicePixelRatio=w),a=new fc(m),this.set("graphWaterMarker",a)}a.get("el").style.display="none";var C=a.get("context"),D=c.rotate,U=c.fill,$=c.fontFamily,tt=c.fontSize,it=c.baseline,ct=c.x,_t=c.y,Bt=c.lineHeight;C.rotate(-D*Math.PI/180),C.font="".concat(tt,"px ").concat($),C.fillStyle=U,C.textBaseline=it;for(var Pt=(0,v.isString)(t)?[t]:t,Qt=Pt.length-1;Qt>=0;Qt--)C.fillText(Pt[Qt],ct,_t+Qt*Bt);if(C.rotate(D*Math.PI/180),f)n.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;");else{var ye=document.querySelector(".g6-graph-watermarker");ye||(ye=document.createElement("div"),ye.className="g6-graph-watermarker"),ye.style.cssText="background-image: url(".concat(a.get("el").toDataURL("image/png"),");background-repeat:repeat;position:absolute;top:0;bottom:0;left:0;right:0;pointer-events:none;z-index:99;"),n.appendChild(ye)}},e.prototype.destroy=function(){var t,r,n,a;(0,v.each)(this.get("plugins"),function(c){c.destroyPlugin()});var o=this.get("tooltips");if(o)for(var s=0;s<o.length;s++){var u=o[s];if(u){var f=u.parentElement;f&&f.removeChild(u)}}(t=this.get("eventController"))===null||t===void 0||t.destroy(),(r=this.get("layoutController"))===null||r===void 0||r.destroy(),(n=this.get("graphWaterMarker"))===null||n===void 0||n.destroy(),(a=document.querySelector(".g6-graph-watermarker"))===null||a===void 0||a.remove(),i.prototype.destroy.call(this)},e}(bp),Ig=hx;function mv(i){"@babel/helpers - typeof";return mv=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mv(i)}function kg(i,e){if(e===void 0&&(e=new WeakMap),i===null)return i;if(i instanceof Date)return new Date(i);if(i instanceof RegExp)return new RegExp(i);if(mv(i)!=="object")return i;if(e.get(i))return e.get(i);var t=Array.isArray(i)?[]:{};e.set(i,t);for(var r in i)i.hasOwnProperty(r)&&i[r]!==void 0&&(t[r]=kg(i[r],e));return t}function dx(i){try{return structuredClone(i)}catch(e){return kg(i)}}var vx=lc.radialLayout,bv=lc.traverseTree,px=function(i){(0,g.__extends)(e,i);function e(t){var r=i.call(this,t)||this;return r.layoutAnimating=!1,r.set("removeList",[]),r.set("layoutMethod",r.getLayout()),r}return e.prototype.getLayout=function(){var t=this.get("layout");return t?typeof t=="function"?t:(t.type||(t.type="dendrogram"),t.direction||(t.direction=t.type==="indented"?"LR":"TB"),t.radial?function(r){var n=gd()[t.type](r,t);return vx(n),n}:function(r){return gd()[t.type](r,t)}):null},e.indexOfChild=function(t,r){var n=-1;return(0,v.each)(t,function(a,o){if(r===a.id)return n=o,!1}),n},e.prototype.getDefaultCfg=function(){var t=i.prototype.getDefaultCfg.call(this);return t.animate=!0,t},e.prototype.innerAddChild=function(t,r,n){var a=this,o=t.data;o&&(o.x=t.x,o.y=t.y,o.depth=t.depth);var s=a.addItem("node",o,!1);if(r){if(s.set("parent",r),n){var u=r.get("originAttrs");if(u)s.set("originAttrs",u);else{var f=r.getModel();s.set("originAttrs",{x:f.x,y:f.y})}}var c=r.get("children");c?c.push(s):r.set("children",[s]),a.addItem("edge",{source:r.get("id"),target:s.get("id"),id:"".concat(r.get("id"),":").concat(s.get("id"))},!1)}return(0,v.each)(t.children||[],function(l){a.innerAddChild(l,s,n)}),a.emit("afteraddchild",{item:s,parent:r}),s},e.prototype.innerUpdateChild=function(t,r,n){var a=this,o=a.findById(t.id);if(!o){a.innerAddChild(t,r,n);return}(0,v.each)(t.children||[],function(C){a.innerUpdateChild(C,o,n)});var s=o.get("children");if(s){var u=s.length;if(u>0)for(var f=s.length-1;f>=0;f--){var c=s[f].getModel();e.indexOfChild(t.children||[],c.id)===-1&&(a.innerRemoveChild(c.id,{x:t.x,y:t.y},n),s.splice(f,1))}}var l,m;o.get("originAttrs")&&(l=o.get("originAttrs").x,m=o.get("originAttrs").y);var w=o.getModel();n&&o.set("originAttrs",{x:w.x,y:w.y}),o.set("model",Object.assign(w,t.data)),(l!==t.x||m!==t.y)&&o.updatePosition({x:t.x,y:t.y})},e.prototype.innerRemoveChild=function(t,r,n){var a=this,o=a.findById(t);if(o)if((0,v.each)(o.get("children"),function(u){a.innerRemoveChild(u.getModel().id,r,n)}),n){var s=o.getModel();o.set("to",r),o.set("originAttrs",{x:s.x,y:s.y}),a.get("removeList").push(o)}else a.removeItem(o,!1)},e.prototype.changeData=function(t,r){r===void 0&&(r=!0);var n=this;this.getNodes().map(function(a){return n.clearItemStates(a)}),this.getEdges().map(function(a){return n.clearItemStates(a)}),r&&this.get("enabledStack")&&this.pushStack("changedata",{before:n.get("originData"),after:t||n.get("data")}),t?(n.data(t),n.render(!1)):n.layout(this.get("fitView"))},e.prototype.changeLayout=function(t){console.warn("Please call updateLayout instead of changeLayout. changeLayout will be discarded soon");var r=this;r.updateLayout(t)},e.prototype.updateLayout=function(t,r,n,a){a===void 0&&(a=!0);var o=this;if(!t){console.warn("layout cannot be null");return}if(a&&this.get("enabledStack")&&this.pushStack("layout",{before:o.get("layout"),after:t}),o.set("layout",t),o.set("layoutMethod",o.getLayout()),o.layout(),r){var s=n;s||(r==="begin"?s={x:0,y:0}:s={x:this.getWidth()/2,y:this.getHeight()/2}),s=this.getPointByCanvas(s.x,s.y);var u=this.getGroup().getMatrix()||[1,0,0,0,1,0,0,0,1];s.x=s.x*u[0]+u[6],s.y=s.y*u[0]+u[7];var f=this.getGroup().getCanvasBBox(),c=f.minX,l=f.maxX,m=f.minY,w=f.maxY,C={x:(c+l)/2,y:(m+w)/2};r==="begin"&&(C.x=c,C.y=m),this.translate(s.x-C.x,s.y-C.y)}},e.prototype.refreshLayout=function(t){console.warn("Please call layout instead of refreshLayout. refreshLayout will be discarded soon");var r=this;r.layout(t)},e.prototype.layout=function(t){var r=this,n=this,a=n.get("data"),o=n.get("layoutMethod"),s=n.get("layout"),u=a;if(s!=null&&s.excludeInvisibles){a=(0,v.clone)(n.get("data"));var f={};bv(a,function(m){var w=m.children;if(!(w!=null&&w.length))return!0;for(var C=w.length-1;C>=0;C--){var D=r.findById(w[C].id),U=D?!D.isVisible():w[C].visible===!1;U&&(f[m.id]=f[m.id]||[],f[m.id].push({idx:C,child:w.splice(C,1)[0]}))}}),u=o?o(a,n.get("layout")):a,bv(u,function(m){var w=f[m.id];if(w!=null&&w.length)for(var C=w.length-1;C>=0;C--){var D=w[C],U=D.idx,$=D.child;m.children.splice(U,0,$)}})}else u=o?o(a,n.get("layout")):a;var c=n.get("animate");if(n.emit("beforerefreshlayout",{data:a,layoutData:u}),n.emit("beforelayout"),n.innerUpdateChild(u,void 0,c),t){var l=n.get("viewController");l.fitView()}c?n.layoutAnimate(u):(n.refresh(),n.paint()),n.emit("afterrefreshlayout",{data:a,layoutData:u}),n.emit("afterlayout")},e.prototype.addChild=function(t,r,n){n===void 0&&(n=!0);var a=this;a.emit("beforeaddchild",{model:t,parent:r}),(0,v.isString)(r)||(r=r.get("id"));var o=a.findDataById(r);if(o){o.children||(o.children=[]),o.children.push(t);var s=a.findById(r);s.refresh(),a.changeData(void 0,n)}},e.prototype.updateChildren=function(t,r,n){n===void 0&&(n=!0);var a=this,o=a.findById(r);if(!r||!o){console.warn("Update children failed! There is no node with id '".concat(r,"'"));return}var s=a.findDataById(r);s.children=t,o.refresh(),a.changeData(void 0,n)},e.prototype.updateChild=function(t,r,n){n===void 0&&(n=!0);var a=this;if(!r||!a.findById(r)){a.changeData(t,n);return}var o=a.findDataById(r),s=a.findById(t.id);if(o.children||(o.children=[]),!s)o.children.push(t);else{var u=e.indexOfChild(o.children,t.id);u>-1&&(o.children[u]=t)}var f=a.findById(r);f==null||f.refresh(),a.changeData(void 0,n)},e.prototype.removeChild=function(t,r){r===void 0&&(r=!0);var n=this,a=n.findById(t),o;if(a?o=a==null?void 0:a.get("parent"):o=n.getNodes().find(function(l){var m=l.getModel().children||[];return!!m.find(function(w){return w.id===t})}),o&&!o.destroyed){var s=o.get("id"),u=n.findDataById(s),f=u&&u.children||[],c=e.indexOfChild(f,t);f.splice(c,1),o.refresh()}n.changeData(void 0,r)},e.prototype.findDataById=function(t,r){var n=this;if(r||(r=n.get("data")),t===r.id)return r;var a=null;return(0,v.each)(r.children||[],function(o){if(o.id===t)return a=o,!1;if(a=n.findDataById(t,o),a)return!1}),a},e.prototype.layoutAnimate=function(t,r){var n=this,a=this.get("animateCfg");n.emit("beforeanimate",{data:t}),n.getEdges().forEach(function(o){var s=o.get("model");s.sourceAnchor||(s.sourceAnchor=o.get("sourceAnchorIndex"))}),this.get("canvas").animate(function(o){bv(t,function(s){var u=n.findById(s.id);if(u){var f=u.get("originAttrs"),c=u.get("model");if(f||(f={x:c.x,y:c.y},u.set("originAttrs",f)),r){var l=r(u,o,f,t);u.set("model",Object.assign(c,l))}else c.x=f.x+(s.x-f.x)*o,c.y=f.y+(s.y-f.y)*o}return!0}),(0,v.each)(n.get("removeList"),function(s){var u=s.getModel(),f=s.get("originAttrs"),c=s.get("to");u.x=f.x+(c.x-f.x)*o,u.y=f.y+(c.y-f.y)*o}),n.refreshPositions()},{duration:a.duration,easing:a.ease,callback:function(){(0,v.each)(n.getNodes(),function(s){s.set("originAttrs",null)}),(0,v.each)(n.get("removeList"),function(s){n.removeItem(s,!1)}),n.set("removeList",[]),a.callback&&a.callback(),n.emit("afteranimate",{data:t})},delay:a.delay})},e.prototype.stopLayoutAnimate=function(){this.get("canvas").stopAnimate(),this.emit("layoutanimateend",{data:this.get("data")}),this.layoutAnimating=!1},e.prototype.isLayoutAnimating=function(){return this.layoutAnimating},e.prototype.render=function(t){t===void 0&&(t=!0);var r=this,n=r.get("data");if(!n||!(0,v.isObject)(n)||!Object.keys(n).length)throw new Error("data must be defined first");r.clear(),t&&this.get("enabledStack")&&this.clearStack(),r.emit("beforerender"),r.layout(this.get("fitView")),r.emit("afterrender")},e.prototype.save=function(){return this.get("data")},e.prototype.data=function(t){i.prototype.data.call(this,t),this.set("originData",dx(t))},e}(Ig),gx=px;function Wa(i,e){if(i)for(var t in e)e.hasOwnProperty(t)&&(i.style[t]=e[t]);return i}var yx=function(){function i(e){this._cfgs=(0,v.deepMix)(this.getDefaultCfgs(),e),this._events={},this.destroyed=!1}return i.prototype.getDefaultCfgs=function(){return{}},i.prototype.initPlugin=function(e){var t=this;t.set("graph",e);var r=t.getEvents(),n={};(0,v.each)(r,function(a,o){var s=(0,v.wrapBehavior)(t,a);n[o]=s,e.on(o,s)}),this._events=n,this.init()},i.prototype.getEvents=function(){return{}},i.prototype.get=function(e){var t;return(t=this._cfgs)===null||t===void 0?void 0:t[e]},i.prototype.set=function(e,t){this._cfgs[e]=t},i.prototype.destroy=function(){},i.prototype.destroyPlugin=function(){this.destroy();var e=this.get("graph"),t=this._events;(0,v.each)(t,function(r,n){e.off(n,r)}),this._events=null,this._cfgs=null,this.destroyed=!0},i}(),au=yx,mx=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Lg="url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI0MCIgaGVpZ2h0PSI0MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAwIDEwIEwgNDAgMTAgTSAxMCAwIEwgMTAgNDAgTSAwIDIwIEwgNDAgMjAgTSAyMCAwIEwgMjAgNDAgTSAwIDMwIEwgNDAgMzAgTSAzMCAwIEwgMzAgNDAiIGZpbGw9Im5vbmUiIHN0cm9rZT0iI2UwZTBlMCIgb3BhY2l0eT0iMC4yIiBzdHJva2Utd2lkdGg9IjEiLz48cGF0aCBkPSJNIDQwIDAgTCAwIDAgMCA0MCIgZmlsbD0ibm9uZSIgc3Ryb2tlPSIjZTBlMGUwIiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=)",bx=function(i){mx(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{img:Lg,follow:!0}},e.prototype.init=function(){var t=this.get("graph"),r=t.get("container"),n=t.get("canvas").get("el"),a=this.get("img")||Lg;a.includes("url(")||(a='url("'.concat(a,'")'));var o=no(`<div class='g6-grid-container' style="position:absolute;overflow:hidden;z-index: -1;"></div>`),s=no(`<div
        class='g6-grid'
        style='position:absolute;
        background-image: `.concat(a,`;
        user-select: none
        '></div>`));this.set("container",o),this.set("gridContainer",s),this.positionInit(),o.appendChild(s),r.insertBefore(o,n)},e.prototype.positionInit=function(){var t=this.get("graph"),r=t.get("minZoom"),n=t.get("width"),a=t.get("height");Wa(this.get("container"),{width:"".concat(n,"px"),height:"".concat(a,"px")});var o=n*80/r,s=a*80/r;Wa(this.get("gridContainer"),{width:"".concat(o,"px"),height:"".concat(s,"px"),left:"-".concat(o/2,"px"),top:"-".concat(s/2,"px")})},e.prototype.getEvents=function(){return{viewportchange:"updateGrid"}},e.prototype.updateGrid=function(t){var r=this.get("gridContainer"),n=t.matrix;n||(n=[1,0,0,0,1,0,0,0,1]);var a=this.get("follow"),o="matrix(".concat(n[0],", ").concat(n[1],", ").concat(n[3],", ").concat(n[4],", ").concat(a?n[6]:"0",", ").concat(a?n[7]:"0",")");Wa(r,{transform:o})},e.prototype.getContainer=function(){return this.get("container")},e.prototype.destroy=function(){var t=this.get("graph"),r=t.get("container"),n=this.get("container");r.removeChild(n)},e}(au),xx=bx,wx=et(38186),md=et.n(wx),Ex=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();typeof document!="undefined"&&md()(`
  .g6-component-contextmenu {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .g6-contextmenu-ul {
    padding: 0;
    margin: 0;
    list-style: none;
  }

`);var _x=function(i){Ex(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,handleMenuClick:void 0,getContent:function(r){return`
          <ul class='g6-contextmenu-ul'>
            <li>\u83DC\u5355\u98791</li>
            <li>\u83DC\u5355\u98792</li>
          </ul>
        `},shouldBegin:function(r){return!0},onHide:function(){return!0},itemTypes:["node","edge","combo"],trigger:"contextmenu"}},e.prototype.getEvents=function(){return this.get("trigger")==="click"?{click:"onMenuShow",touchend:"onMenuShow"}:{contextmenu:"onMenuShow"}},e.prototype.init=function(){var t=this.get("className"),r=no("<div class=".concat(t||"g6-component-contextmenu","></div>"));Wa(r,{top:"0px",position:"absolute",visibility:"hidden"});var n=this.get("container");n||(n=this.get("graph").get("container")),(0,v.isString)(n)&&(n=document.getElementById(n)),n.appendChild(r),this.set("menu",r)},e.prototype.onMenuShow=function(t){var r=this;t.preventDefault();var n=this.get("itemTypes");if(t.item){if(t.item&&t.item.getType&&n.indexOf(t.item.getType())===-1){r.onMenuHide();return}}else if(n.indexOf("canvas")===-1){r.onMenuHide();return}var a=this.get("shouldBegin");if(a(t)){var o=this.get("menu"),s=this.get("getContent"),u=this.get("graph"),f=s(t,u);(0,v.isString)(f)?o.innerHTML=f:o.innerHTML=f.outerHTML,this.removeMenuEventListener();var c=this.get("handleMenuClick");if(c){var l=function(Qt){c(Qt.target,t.item,u)};this.set("handleMenuClickWrapper",l),o.addEventListener("click",l)}var m=u.get("width"),w=u.get("height"),C=o.getBoundingClientRect(),D=this.get("offsetX")||0,U=this.get("offsetY")||0,$=u.getContainer().offsetTop,tt=u.getContainer().offsetLeft,it=t.canvasX+tt+D,ct=t.canvasY+$+U;it+C.width>m&&(it=t.canvasX-C.width-D+tt),ct+C.height>w&&(ct=t.canvasY-C.height-U+$),ct<0&&(ct=0),Wa(o,{top:"".concat(ct,"px"),left:"".concat(it,"px"),visibility:"visible"});var _t=this.get("trigger")==="click",Bt=function(Qt){if(_t){_t=!1;return}r.onMenuHide()};document.body.addEventListener("click",Bt),this.set("handler",Bt)}},e.prototype.removeMenuEventListener=function(){var t=this.get("handleMenuClickWrapper"),r=this.get("handler");if(t){var n=this.get("menu");n.removeEventListener("click",t),this.set("handleMenuClickWrapper",null)}r&&document.body.removeEventListener("click",r)},e.prototype.onMenuHide=function(){var t=this.get("menu");t&&Wa(t,{visibility:"hidden"}),this.removeMenuEventListener()},e.prototype.destroy=function(){var t=this.get("menu");if(this.removeMenuEventListener(),t){var r=this.get("container");r||(r=this.get("graph").get("container")),(0,v.isString)(r)&&(r=document.getElementById(r)),r.removeChild(t)}},e}(au),Sx=_x,Mx=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),xv=function(){return xv=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},xv.apply(this,arguments)},Ng=Math.max,Ax=Ht,Cx="default",Tx="keyShape",Ix="delegate",Og="svg",kx=function(i){Mx(e,i);function e(t){var r=i.call(this,t)||this;return r.handleUpdateCanvas=(0,v.debounce)(function(n){var a=r;a.destroyed||a.updateCanvas()},100,!1),r}return e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",type:"default",padding:50,size:[200,120],delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0,hideEdge:!1}},e.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},e.prototype.disableRefresh=function(){this.set("refresh",!1)},e.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},e.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},e.prototype.initViewport=function(){var t=this,r=this._cfgs,n=r.size,a=r.graph;if(!this.destroyed){var o=this.get("canvas"),s=o.get("container"),u=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,f=navigator.userAgent.toLowerCase().indexOf("safari")>-1,c=no(`
      <div
        class=`.concat(r.viewportClassName,`
        style='position:absolute;
          left:0;
          top:0;
          box-sizing:border-box;
          outline: 2px solid #1980ff;
          cursor:move'
        draggable=`).concat(!(f||u),`
      </div>`)),l=0,m=0,w=!1,C=0,D=0,U=0,$=0,tt=0,it=0,ct=f||u?"mousedown":"dragstart";c.addEventListener(ct,function(Qt){var ye,ce;if(Qt.dataTransfer){var Ne=new Image;Ne.src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' %3E%3Cpath /%3E%3C/svg%3E",(ce=(ye=Qt.dataTransfer).setDragImage)===null||ce===void 0||ce.call(ye,Ne,0,0);try{Qt.dataTransfer.setData("text/html","view-port-minimap")}catch(Rr){Qt.dataTransfer.setData("text","view-port-minimap")}}if(r.refresh=!1,Qt.target===c){var $e=c.style;C=parseInt($e.left,10),D=parseInt($e.top,10),U=parseInt($e.width,10),$=parseInt($e.height,10),!(U>n[0]||$>n[1])&&(it=a.getZoom(),tt=t.get("ratio"),w=!0,l=Qt.clientX,m=Qt.clientY)}},!1);var _t=function(ye){if(!(!w||(0,v.isNil)(ye.clientX)||(0,v.isNil)(ye.clientY))){var ce=l-ye.clientX,Ne=m-ye.clientY;(C-ce<0||C-ce+U>=n[0])&&(ce=0),(D-Ne<0||D-Ne+$>=n[1])&&(Ne=0),C-=ce,D-=Ne,Wa(c,{left:"".concat(C,"px"),top:"".concat(D,"px")}),a.translate(ce*it/tt,Ne*it/tt),l=ye.clientX,m=ye.clientY}};!f&&!u&&c.addEventListener("drag",_t,!1);var Bt=function(){w=!1,r.refresh=!0},Pt=f||u?"mouseup":"dragend";c.addEventListener(Pt,Bt,!1),s.addEventListener("mouseleave",Bt),s.addEventListener("mouseup",Bt),(f||u)&&s.addEventListener("mousemove",_t,!1),this.set("viewport",c),s.appendChild(c)}},e.prototype.updateViewport=function(){if(!this.destroyed){var t=this.get("ratio"),r=this.get("totaldx"),n=this.get("totaldy"),a=this.get("graph"),o=this.get("size"),s=a.get("canvas").get("el"),u=a.get("width")||s.scrollWidth||500,f=a.get("height")||s.scrollHeight||500,c=a.getPointByCanvas(0,0),l=a.getPointByCanvas(u,f),m=this.get("viewport");m||this.initViewport();var w=(l.x-c.x)*t,C=(l.y-c.y)*t,D=c.x*t+r,U=c.y*t+n,$=D+w,tt=U+C;D<0&&(w+=D,D=0),$>o[0]&&(w=w-($-o[0])),U<0&&(C+=U,U=0),tt>o[1]&&(C=C-(tt-o[1])),this.set("ratio",t);var it="".concat(D,"px"),ct="".concat(U,"px");Wa(m,{left:it,top:ct,width:"".concat(w,"px"),height:"".concat(C,"px")})}},e.prototype.updateGraphShapes=function(){var t=this._cfgs.graph,r=this.get("canvas"),n=t.get("group");if(!n.destroyed){r.clear();var a;this.get("hideEdge")?(a=r.addGroup(),n.get("children").forEach(function(s){s.get("id").includes("-edge")||a.add(s.clone())})):(a=n.clone(),a.resetMatrix(),r.add(a));var o=t.get("renderer");o===Og&&this.updateVisible(a)}},e.prototype.updateVisible=function(t){var r=this;if(!t.isGroup()&&!t.get("visible"))t.hide();else{var n=t.get("children");if(!n||!n.length)return;n.forEach(function(a){a.get("visible")||a.hide(),r.updateVisible(a)})}},e.prototype.updateKeyShapes=function(){var t=this,r=this._cfgs.graph,n=this.get("canvas"),a=n.get("children")[0]||n.addGroup();this.get("hideEdge")||(0,v.each)(r.getEdges(),function(u){t.updateOneEdgeKeyShape(u,a)}),(0,v.each)(r.getNodes(),function(u){t.updateOneNodeKeyShape(u,a)});var o=r.getCombos();if(o&&o.length){var s=a.find(function(u){return u.get("name")==="comboGroup"})||a.addGroup({name:"comboGroup"});setTimeout(function(){t.destroyed||((0,v.each)(o,function(u){t.updateOneComboKeyShape(u,s)}),s==null||s.sort(),s==null||s.toBack(),t.updateCanvas())},250)}this.clearDestroyedShapes()},e.prototype.updateOneComboKeyShape=function(t,r){if(!this.destroyed){var n=this.get("itemMap")||{},a=n[t.get("id")],o=t.getBBox(),s=t.get("keyShape").clone(),u=s.attr(),f={x:o.centerX,y:o.centerY};a?f=Object.assign(u,f):(a=s,r.add(a));var c=a.get("type");(c==="rect"||c==="image")&&(f.x=o.minX,f.y=o.minY),a.attr(f),t.isVisible()?a.show():a.hide(),a.exist=!0;var l=t.getModel().depth;isNaN(l)||a.set("zIndex",l),n[t.get("id")]=a,this.set("itemMap",n)}},e.prototype.updateOneNodeKeyShape=function(t,r){var n=this.get("itemMap")||{},a=n[t.get("id")],o=t.getBBox(),s=t.get("keyShape").clone(),u=s.attr(),f={x:o.centerX,y:o.centerY};a?(f=Object.assign(u,f),a.toFront()):(a=s,r.add(a));var c=a.get("type");(c==="rect"||c==="image")&&(f.x=o.minX,f.y=o.minY),a.attr(f),t.isVisible()?a.show():a.hide(),a.exist=!0;var l=t.getModel().depth;isNaN(l)||a.set("zIndex",l),n[t.get("id")]=a,this.set("itemMap",n)},e.prototype.updateDelegateShapes=function(){var t=this,r=this._cfgs.graph,n=this.get("canvas"),a=n.get("children")[0]||n.addGroup();this.get("hideEdge")||(0,v.each)(r.getEdges(),function(u){t.updateOneEdgeKeyShape(u,a)}),(0,v.each)(r.getNodes(),function(u){t.updateOneNodeDelegateShape(u,a)});var o=r.getCombos();if(o&&o.length){var s=a.find(function(u){return u.get("name")==="comboGroup"})||a.addGroup({name:"comboGroup"});setTimeout(function(){t.destroyed||((0,v.each)(o,function(u){t.updateOneComboKeyShape(u,s)}),s==null||s.sort(),s==null||s.toBack(),t.updateCanvas())},250)}this.clearDestroyedShapes()},e.prototype.clearDestroyedShapes=function(){var t=this.get("itemMap")||{},r=Object.keys(t);if(!(!r||r.length===0))for(var n=r.length-1;n>=0;n--){var a=t[r[n]],o=a.exist;a.exist=!1,o||(a.remove(),delete t[r[n]])}},e.prototype.updateOneEdgeKeyShape=function(t,r){var n=this.get("itemMap")||{},a=n[t.get("id")];if(a){var o=t.get("keyShape").attr("path");a.attr("path",o)}else a=t.get("keyShape").clone(),r.add(a);t.isVisible()?a.show():a.hide(),a.exist=!0,n[t.get("id")]=a,this.set("itemMap",n)},e.prototype.updateOneNodeDelegateShape=function(t,r){var n=this.get("delegateStyle"),a=this.get("itemMap")||{},o=a[t.get("id")],s=t.getBBox();if(o){var u={x:s.minX,y:s.minY,width:s.width,height:s.height};o.attr(u),o.toFront()}else o=r.addShape("rect",{attrs:xv({x:s.minX,y:s.minY,width:s.width,height:s.height},n),name:"minimap-node-shape"});t.isVisible()?o.show():o.hide(),o.exist=!0,a[t.get("id")]=o,this.set("itemMap",a)},e.prototype.init=function(){this.initContainer(),this.get("graph").on("afterupdateitem",this.handleUpdateCanvas),this.get("graph").on("afteritemstatechange",this.handleUpdateCanvas),this.get("graph").on("afteradditem",this.handleUpdateCanvas),this.get("graph").on("afterremoveitem",this.handleUpdateCanvas),this.get("graph").on("afterrender",this.handleUpdateCanvas),this.get("graph").on("afterlayout",this.handleUpdateCanvas)},e.prototype.initContainer=function(){var t=this,r=t.get("graph"),n=t.get("size"),a=t.get("className"),o=t.get("container"),s=no("<div class='".concat(a,"' style='width: ").concat(n[0],"px; height: ").concat(n[1],"px; overflow: hidden'></div>"));(0,v.isString)(o)&&(o=document.getElementById(o)),o?o.appendChild(s):r.get("container").appendChild(s),t.set("container",s);var u=no('<div class="g6-minimap-container" style="position: relative;"></div>');s.appendChild(u),u.addEventListener("dragenter",function(l){l.preventDefault()}),u.addEventListener("dragover",function(l){l.preventDefault()});var f,c=r.get("renderer");c===Og?f=new kh({container:u,width:n[0],height:n[1]}):f=new fc({container:u,width:n[0],height:n[1]}),t.set("canvas",f),t.updateCanvas()},e.prototype.updateCanvas=function(){if(!this.destroyed){var t=this.get("refresh");if(t){var r=this.get("graph");if(!r.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var n=this.get("size"),a=this.get("canvas"),o=this.get("type"),s=this.get("padding");if(!a.destroyed){switch(o){case Cx:this.updateGraphShapes();break;case Tx:this.updateKeyShapes();break;case Ix:this.updateDelegateShapes();break;default:break}var u=a.get("children")[0];if(u){u.resetMatrix();var f=u.getCanvasBBox(),c=r.get("canvas").getCanvasBBox(),l=r.getZoom()||1,m=c.width/l,w=c.height/l;Number.isFinite(f.width)&&(m=Ng(f.width,m),w=Ng(f.height,w)),m+=2*s,w+=2*s;var C=Math.min(n[0]/m,n[1]/w),D=[1,0,0,0,1,0,0,0,1],U=0,$=0;Number.isFinite(f.minX)&&(U=-f.minX),Number.isFinite(f.minY)&&($=-f.minY);var tt=(n[0]-(m-2*s)*C)/2,it=(n[1]-(w-2*s)*C)/2;D=Ax(D,[["t",U,$],["s",C,C],["t",tt,it]]),u.setMatrix(D),this.set("ratio",C),this.set("totaldx",tt+U*C),this.set("totaldy",it+$*C),this.set("dx",tt),this.set("dy",it),this.updateViewport()}}}}}},e.prototype.getCanvas=function(){return this.get("canvas")},e.prototype.getViewport=function(){return this.get("viewport")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.destroy=function(){var t;(t=this.get("canvas"))===null||t===void 0||t.destroy();var r=this.get("container");r!=null&&r.parentNode&&r.parentNode.removeChild(r)},e}(au),Lx=kx,Nx=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();function kf(i,e,t){var r=i.x-e.x,n=i.y-e.y;return!t||Math.abs(r)>t||Math.abs(n)>t?Math.sqrt(r*r+n*n):t}function Ox(i,e){return i.x*e.x+i.y*e.y}function Dg(i,e){var t=(e.source.y-e.target.y)/(e.source.x-e.target.x),r=(t*t*e.source.x+t*(i.y-e.source.y)+i.x)/(t*t+1),n=t*(r-e.source.x)+e.source.y;return{x:r,y:n}}var Dx=function(i){Nx(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{edgeBundles:[],edgePoints:[],K:.1,lambda:.1,divisions:1,divRate:2,cycles:6,iterations:90,iterRate:.6666667,bundleThreshold:.6,eps:1e-6,onLayoutEnd:function(){},onTick:function(){}}},e.prototype.init=function(){var t=this.get("graph"),r=this.get("onTick"),n=function(){r&&r(),t.refreshPositions()};this.set("tick",n)},e.prototype.bundling=function(t){var r=this;if(r.set("data",t),!r.isTicking()){var n=t.edges||[],a=t.nodes||[],o={},s=!1;if(a.forEach(function(ct){(ct.x===null||!ct.y===null||ct.x===void 0||!ct.y===void 0)&&(s=!0),o[ct.id]=ct}),s)throw new Error("please layout the graph or assign x and y for nodes first");r.set("nodeIdMap",o);var u=r.get("divisions"),f=r.get("divRate"),c=r.divideEdges(u);r.set("edgePoints",c);var l=r.getEdgeBundles();r.set("edgeBundles",l);for(var m=r.get("cycles"),w=r.get("iterations"),C=r.get("iterRate"),D=r.get("lambda"),U=0;U<m;U++){for(var $=function(_t){var Bt=[];n.forEach(function(Pt,Qt){if(Pt.source!==Pt.target){var ye=o[Pt.source],ce=o[Pt.target];Bt[Qt]=r.getEdgeForces({source:ye,target:ce},Qt,u,D);for(var Ne=0;Ne<u+1;Ne++)c[Qt][Ne].x+=Bt[Qt][Ne].x,c[Qt][Ne].y+=Bt[Qt][Ne].y}})},tt=0;tt<w;tt++)$(tt);D=D/2,u*=f,w*=C,c=r.divideEdges(u),r.set("edgePoints",c)}n.forEach(function(ct,_t){ct.source!==ct.target&&(ct.type="polyline",ct.controlPoints=c[_t].slice(1,c[_t].length-1))});var it=r.get("graph");it.refresh()}},e.prototype.updateBundling=function(t){var r=this,n=t.data;if(n&&r.set("data",n),r.get("ticking")&&r.set("ticking",!1),Object.keys(t).forEach(function(o){r.set(o,t[o])}),t.onTick){var a=this.get("graph");r.set("tick",function(){t.onTick(),a.refresh()})}r.bundling(n)},e.prototype.divideEdges=function(t){var r=this,n=r.get("data").edges,a=r.get("nodeIdMap"),o=r.get("edgePoints");return(!o||o===void 0)&&(o=[]),n.forEach(function(s,u){var f;(!o[u]||o[u]===void 0)&&(o[u]=[]);var c=a[s.source],l=a[s.target];if(t===1)o[u].push({x:c.x,y:c.y}),o[u].push({x:.5*(c.x+l.x),y:.5*(c.y+l.y)}),o[u].push({x:l.x,y:l.y});else{var m=0;!((f=o[u])===null||f===void 0)&&f.length?m=r.getEdgeLength(o[u]):m=kf({x:c.x,y:c.y},{x:l.x,y:l.y});var w=m/(t+1),C=w,D=[{x:c.x,y:c.y}];o[u].forEach(function(U,$){if($!==0){for(var tt=kf(U,o[u][$-1]);tt>C;){var it=C/tt,ct={x:o[u][$-1].x,y:o[u][$-1].y};ct.x+=it*(U.x-o[u][$-1].x),ct.y+=it*(U.y-o[u][$-1].y),D.push(ct),tt-=C,C=w}C-=tt}}),D.push({x:l.x,y:l.y}),o[u]=D}}),o},e.prototype.getEdgeLength=function(t){var r=0;return t.forEach(function(n,a){a!==0&&(r+=kf(n,t[a-1]))}),r},e.prototype.getEdgeBundles=function(){var t=this,r=t.get("data"),n=r.edges||[],a=t.get("bundleThreshold"),o=t.get("nodeIdMap"),s=t.get("edgeBundles");return s||(s=[]),n.forEach(function(u,f){(!s[f]||s[f]===void 0)&&(s[f]=[])}),n.forEach(function(u,f){var c=o[u.source],l=o[u.target];n.forEach(function(m,w){if(!(w<=f)){var C=o[m.source],D=o[m.target],U=t.getBundleScore({source:c,target:l},{source:C,target:D});U>=a&&(s[f].push(w),s[w].push(f))}})}),s},e.prototype.getBundleScore=function(t,r){var n=this;t.vx=t.target.x-t.source.x,t.vy=t.target.y-t.source.y,r.vx=r.target.x-r.source.x,r.vy=r.target.y-r.source.y,t.length=kf({x:t.source.x,y:t.source.y},{x:t.target.x,y:t.target.y}),r.length=kf({x:r.source.x,y:r.source.y},{x:r.target.x,y:r.target.y});var a=n.getAngleScore(t,r),o=n.getScaleScore(t,r),s=n.getPositionScore(t,r),u=n.getVisibilityScore(t,r);return a*o*s*u},e.prototype.getAngleScore=function(t,r){var n=Ox({x:t.vx,y:t.vy},{x:r.vx,y:r.vy});return n/(t.length*r.length)},e.prototype.getScaleScore=function(t,r){var n=(t.length+r.length)/2,a=2/(n/Math.min(t.length,r.length)+Math.max(t.length,r.length)/n);return a},e.prototype.getPositionScore=function(t,r){var n=(t.length+r.length)/2,a={x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2},o={x:(r.source.x+r.target.x)/2,y:(r.source.y+r.target.y)/2},s=kf(a,o);return n/(n+s)},e.prototype.getVisibilityScore=function(t,r){var n=this.getEdgeVisibility(t,r),a=this.getEdgeVisibility(r,t);return n<a?n:a},e.prototype.getEdgeVisibility=function(t,r){var n=Dg(r.source,t),a=Dg(r.target,t),o={x:(n.x+a.x)/2,y:(n.y+a.y)/2},s={x:(t.source.x+t.target.x)/2,y:(t.source.y+t.target.y)/2};return Math.max(0,1-2*kf(o,s)/kf(n,a))},e.prototype.getEdgeForces=function(t,r,n,a){for(var o=this,s=o.get("edgePoints"),u=o.get("K"),f=u/(kf(t.source,t.target)*(n+1)),c=[{x:0,y:0}],l=1;l<n;l++){var m={x:0,y:0},w=o.getSpringForce({pre:s[r][l-1],cur:s[r][l],next:s[r][l+1]},f),C=o.getElectrostaticForce(l,r);m.x=a*(w.x+C.x),m.y=a*(w.y+C.y),c.push(m)}return c.push({x:0,y:0}),c},e.prototype.getSpringForce=function(t,r){var n=t.pre.x+t.next.x-2*t.cur.x,a=t.pre.y+t.next.y-2*t.cur.y;return n*=r,a*=r,{x:n,y:a}},e.prototype.getElectrostaticForce=function(t,r){var n=this,a=n.get("eps"),o=n.get("edgeBundles"),s=n.get("edgePoints"),u=o[r],f={x:0,y:0};return u.forEach(function(c){var l={x:s[c][t].x-s[r][t].x,y:s[c][t].y-s[r][t].y};if(Math.abs(l.x)>a||Math.abs(l.y)>a){var m=kf(s[c][t],s[r][t]),w=1/m;f.x+=l.x*w,f.y+=l.y*w}}),f},e.prototype.isTicking=function(){return this.get("ticking")},e.prototype.getSimulation=function(){return this.get("forceSimulation")},e.prototype.destroy=function(){this.get("ticking")&&this.getSimulation().stop(),i.prototype.destroy.call(this)},e}(au),Px=Dx,Rx=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),wv=function(){return wv=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},wv.apply(this,arguments)},bd=.05,Pg={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:.1,fill:"#ccc"},Bx=function(i){Rx(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{trigger:"mousemove",d:1.5,r:300,delegateStyle:(0,v.clone)(Pg),showLabel:!1,maxD:5,minD:0,scaleRBy:"unset",scaleDBy:"unset",showDPercent:!0}},e.prototype.getEvents=function(){var t;switch(this.get("trigger")){case"click":t={click:"magnify"};break;case"drag":t={click:"createDelegate"};break;default:t={mousemove:"magnify"};break}return t},e.prototype.init=function(){var t=this,r=t.get("r");t.set("cachedMagnifiedModels",[]),t.set("cachedOriginPositions",{}),t.set("r2",r*r);var n=t.get("d");t.set("molecularParam",(n+1)*r)},e.prototype.createDelegate=function(t){var r=this,n=this,a=n.get("delegate");(!a||a.destroyed)&&(n.magnify(t),a=n.get("delegate"),a.on("dragstart",function(o){n.set("delegateCenterDiff",{x:a.attr("x")-o.x,y:a.attr("y")-o.y})}),a.on("drag",function(o){n.magnify(o)}),this.get("scaleDBy")==="wheel"&&a.on("mousewheel",function(o){r.scaleDByWheel(o)}),this.get("scaleRBy")==="wheel"&&a.on("mousewheel",function(o){n.scaleRByWheel(o)}))},e.prototype.scaleRByWheel=function(t){var r=this;if(!(!t||!t.originalEvent)){t.preventDefault&&t.preventDefault();var n=r.get("graph"),a,o=r.get("delegate"),s=o?{x:o.attr("x"),y:o.attr("y")}:void 0,u=s||n.getPointByClient(t.clientX,t.clientY);t.originalEvent.wheelDelta<0?a=1-bd:a=1/(1-bd);var f=r.get("maxR"),c=r.get("minR"),l=r.get("r");(l>(f||n.get("height"))&&a>1||l<(c||n.get("height")*.05)&&a<1)&&(a=1),l*=a,r.set("r",l),r.set("r2",l*l);var m=r.get("d");r.set("molecularParam",(m+1)*l),r.set("delegateCenterDiff",void 0),r.magnify(t,u)}},e.prototype.scaleRByDrag=function(t){var r=this;if(t){var n=r.get("dragPrePos"),a=r.get("graph"),o,s=a.getPointByClient(t.clientX,t.clientY);t.x-n.x<0?o=1-bd:o=1/(1-bd);var u=r.get("maxR"),f=r.get("minR"),c=r.get("r");(c>(u||a.get("height"))&&o>1||c<(f||a.get("height")*.05)&&o<1)&&(o=1),c*=o,r.set("r",c),r.set("r2",c*c);var l=r.get("d");r.set("molecularParam",(l+1)*c),r.magnify(t,s),r.set("dragPrePos",{x:t.x,y:t.y})}},e.prototype.scaleDByWheel=function(t){var r=this;if(!(!t&&!t.originalEvent)){t.preventDefault&&t.preventDefault();var n=0;t.originalEvent.wheelDelta<0?n=-.1:n=.1;var a=r.get("d"),o=a+n,s=r.get("maxD"),u=r.get("minD");if(o<s&&o>u){r.set("d",o);var f=r.get("r");r.set("molecularParam",(o+1)*f);var c=r.get("delegate"),l=c?{x:c.attr("x"),y:c.attr("y")}:void 0;r.set("delegateCenterDiff",void 0),r.magnify(t,l)}}},e.prototype.scaleDByDrag=function(t){var r=this,n=r.get("dragPrePos"),a=t.x-n.x>0?.1:-.1,o=r.get("d"),s=o+a,u=r.get("maxD"),f=r.get("minD");if(s<u&&s>f){r.set("d",s);var c=r.get("r");r.set("molecularParam",(s+1)*c),r.magnify(t)}r.set("dragPrePos",{x:t.x,y:t.y})},e.prototype.magnify=function(t,r){var n=this;n.restoreCache();var a=n.get("graph"),o=n.get("cachedMagnifiedModels"),s=n.get("cachedOriginPositions"),u=n.get("showLabel"),f=n.get("r"),c=n.get("r2"),l=n.get("d"),m=n.get("molecularParam"),w=a.getNodes(),C=w.length,D=r?{x:r.x,y:r.y}:{x:t.x,y:t.y};n.get("dragging")&&(n.get("trigger")==="mousemove"||n.get("trigger")==="click")&&(D=n.get("cacheCenter"));var U=n.get("delegateCenterDiff");U&&(D.x+=U.x,D.y+=U.y),n.updateDelegate(D,f);for(var $=0;$<C;$++){var tt=w[$].getModel(),it=tt.x,ct=tt.y;if(!(isNaN(it)||isNaN(ct))){var _t=(it-D.x)*(it-D.x)+(ct-D.y)*(ct-D.y);if(!isNaN(_t)&&_t<c&&_t!==0){var Bt=Math.sqrt(_t),Pt=m*Bt/(l*Bt+f),Qt=(it-D.x)/Bt,ye=(ct-D.y)/Bt;if(tt.x=Qt*Pt+D.x,tt.y=ye*Pt+D.y,s[tt.id]||(s[tt.id]={x:it,y:ct,texts:[]}),o.push(tt),u&&2*Bt<f)for(var ce=w[$],Ne=ce.getContainer(),$e=Ne.getChildren(),Rr=$e.length,rn=0;rn<Rr;rn++){var Vr=$e[rn];Vr.get("type")==="text"&&(s[tt.id].texts.push({visible:Vr.get("visible"),shape:Vr}),Vr.set("visible",!0))}}}}a.refreshPositions()},e.prototype.restoreCache=function(){for(var t=this,r=t.get("cachedMagnifiedModels"),n=t.get("cachedOriginPositions"),a=r.length,o=0;o<a;o++){var s=r[o],u=s.id,f=n[u];s.x=f.x,s.y=f.y;for(var c=f.texts.length,l=0;l<c;l++){var m=f.texts[l];m.shape.set("visible",m.visible)}}t.set("cachedMagnifiedModels",[]),t.set("cachedOriginPositions",{})},e.prototype.updateParams=function(t){var r=this,n=t.r,a=t.d,o=t.trigger,s=t.minD,u=t.maxD,f=t.minR,c=t.maxR,l=t.scaleDBy,m=t.scaleRBy;isNaN(t.r)||(r.set("r",n),r.set("r2",n*n)),isNaN(a)||r.set("d",a),isNaN(u)||r.set("maxD",u),isNaN(s)||r.set("minD",s),isNaN(c)||r.set("maxR",c),isNaN(f)||r.set("minR",f);var w=r.get("d"),C=r.get("r");if(r.set("molecularParam",(w+1)*C),(o==="mousemove"||o==="click"||o==="drag")&&r.set("trigger",o),l==="drag"||l==="wheel"||l==="unset"){r.set("scaleDBy",l),r.get("delegate").remove(),r.get("delegate").destroy();var D=r.get("dPercentText");D&&(D.remove(),D.destroy())}if(m==="drag"||m==="wheel"||m==="unset"){r.set("scaleRBy",m),r.get("delegate").remove(),r.get("delegate").destroy();var D=r.get("dPercentText");D&&(D.remove(),D.destroy())}},e.prototype.updateDelegate=function(t,r){var n=this,a=this,o=a.get("graph"),s=a.get("delegate");if(!s||s.destroyed){var u=o.get("group"),f=a.get("delegateStyle")||Pg;s=u.addShape("circle",{attrs:wv({r:r/1.5,x:t.x,y:t.y},f),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&(this.get("scaleRBy")==="wheel"?s.on("mousewheel",function(C){a.scaleRByWheel(C)}):this.get("scaleRBy")==="drag"&&(s.on("dragstart",function(C){a.set("dragging",!0),a.set("cacheCenter",{x:C.x,y:C.y}),a.set("dragPrePos",{x:C.x,y:C.y})}),s.on("drag",function(C){a.scaleRByDrag(C)}),s.on("dragend",function(C){a.set("dragging",!1)})),this.get("scaleDBy")==="wheel"?s.on("mousewheel",function(C){n.scaleDByWheel(C)}):this.get("scaleDBy")==="drag"&&(s.on("dragstart",function(C){a.set("dragging",!0),a.set("cacheCenter",{x:C.x,y:C.y}),a.set("dragPrePos",{x:C.x,y:C.y})}),s.on("drag",function(C){n.scaleDByDrag(C)}),s.on("dragend",function(C){a.set("dragging",!1)})))}else s.attr({x:t.x,y:t.y,r:r/1.5});if(a.get("showDPercent")){var c=Math.round((a.get("d")-a.get("minD"))/(a.get("maxD")-a.get("minD"))*100),l=a.get("dPercentText"),m=t.y+r/1.5+16;if(!l||l.destroyed){var w=o.get("group");l=w.addShape("text",{attrs:{text:"".concat(c,"%"),x:t.x,y:m,fill:"#aaa",stroke:"#fff",lineWidth:1,fontSize:12}}),a.set("dPercentText",l)}else l.attr({text:"".concat(c,"%"),x:t.x,y:m})}a.set("delegate",s)},e.prototype.clear=function(){var t=this.get("graph");this.restoreCache(),t.refreshPositions();var r=this.get("delegate");r&&!r.destroyed&&(r.remove(),r.destroy());var n=this.get("dPercentText");n&&!n.destroyed&&(n.remove(),n.destroy())},e.prototype.destroy=function(){this.clear()},e}(au),Fx=Bx,Gx=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Rg=.05;typeof document!="undefined"&&md()(`
  .g6-component-toolbar {
    position: absolute;
    list-style-type: none;
    padding: 6px;
    left: 0px;
    top: 0px;
    background-color: rgba(255, 255, 255, 0.9);
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    margin: 0;
  }
  .g6-component-toolbar li {
    float: left;
    text-align: center;
    width: 35px;
    height: 24px;
    cursor: pointer;
		list-style-type:none;
    list-style: none;
    margin-left: 0px;
  }
  .g6-component-toolbar li .icon {
    opacity: 0.7;
  }
  .g6-component-toolbar li .icon:hover {
    opacity: 1;
  }
`);var zx=function(e){if(!e)return[];if(e.composedPath)return e.composedPath();for(var t=[],r=e.target;r;){if(t.push(r),r.tagName==="HTML")return t.push(document,window),t;r=r.parentElement}return t},Ux=function(i){Gx(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{handleClick:void 0,getContent:function(r){return`
          <ul class='g6-component-toolbar'>
            <li code='redo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M256 682.666667c0-102.741333 66.730667-213.333333 213.333333-213.333334 107.008 0 190.762667 56.576 230.570667 125.354667L611.968 682.666667H853.333333v-241.365334l-91.562666 91.562667C704.768 448.469333 601.130667 384 469.333333 384c-196.096 0-298.666667 150.229333-298.666666 298.666667h85.333333z" fill="" p-id="2041"></path>
              </svg>
            </li>
            <li code='undo'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M170.666667 682.666667h241.365333l-87.936-87.978667C363.904 525.909333 447.658667 469.333333 554.666667 469.333333c146.602667 0 213.333333 110.592 213.333333 213.333334h85.333333c0-148.437333-102.570667-298.666667-298.666666-298.666667-131.797333 0-235.392 64.469333-292.48 148.821333L170.666667 441.301333V682.666667z" fill="" p-id="2764"></path>
              </svg>
            </li>
            <li  code='zoomOut'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M658.432 428.736a33.216 33.216 0 0 1-33.152 33.152H525.824v99.456a33.216 33.216 0 0 1-66.304 0V461.888H360.064a33.152 33.152 0 0 1 0-66.304H459.52V296.128a33.152 33.152 0 0 1 66.304 0V395.52H625.28c18.24 0 33.152 14.848 33.152 33.152z m299.776 521.792a43.328 43.328 0 0 1-60.864-6.912l-189.248-220.992a362.368 362.368 0 0 1-215.36 70.848 364.8 364.8 0 1 1 364.8-364.736 363.072 363.072 0 0 1-86.912 235.968l192.384 224.64a43.392 43.392 0 0 1-4.8 61.184z m-465.536-223.36a298.816 298.816 0 0 0 298.432-298.432 298.816 298.816 0 0 0-298.432-298.432A298.816 298.816 0 0 0 194.24 428.8a298.816 298.816 0 0 0 298.432 298.432z"></path>
              </svg>
            </li>
            <li code='zoomIn'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                <path d="M639.936 416a32 32 0 0 1-32 32h-256a32 32 0 0 1 0-64h256a32 32 0 0 1 32 32z m289.28 503.552a41.792 41.792 0 0 1-58.752-6.656l-182.656-213.248A349.76 349.76 0 0 1 480 768 352 352 0 1 1 832 416a350.4 350.4 0 0 1-83.84 227.712l185.664 216.768a41.856 41.856 0 0 1-4.608 59.072zM479.936 704c158.784 0 288-129.216 288-288S638.72 128 479.936 128a288.32 288.32 0 0 0-288 288c0 158.784 129.216 288 288 288z" p-id="3853"></path>
              </svg>
            </li>
            <li code='realZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M384 320v384H320V320h64z m256 0v384H576V320h64zM512 576v64H448V576h64z m0-192v64H448V384h64z m355.968 576H92.032A28.16 28.16 0 0 1 64 931.968V28.032C64 12.608 76.608 0 95.168 0h610.368L896 192v739.968a28.16 28.16 0 0 1-28.032 28.032zM704 64v128h128l-128-128z m128 192h-190.464V64H128v832h704V256z"></path>
              </svg>
            </li>
            <li code='autoZoom'>
              <svg class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="24">
                <path d="M684.288 305.28l0.128-0.64-0.128-0.64V99.712c0-19.84 15.552-35.904 34.496-35.712a35.072 35.072 0 0 1 34.56 35.776v171.008h170.944c19.648 0 35.84 15.488 35.712 34.432a35.072 35.072 0 0 1-35.84 34.496h-204.16l-0.64-0.128a32.768 32.768 0 0 1-20.864-7.552c-1.344-1.024-2.816-1.664-3.968-2.816-0.384-0.32-0.512-0.768-0.832-1.088a33.472 33.472 0 0 1-9.408-22.848zM305.28 64a35.072 35.072 0 0 0-34.56 35.776v171.008H99.776A35.072 35.072 0 0 0 64 305.216c0 18.944 15.872 34.496 35.84 34.496h204.16l0.64-0.128a32.896 32.896 0 0 0 20.864-7.552c1.344-1.024 2.816-1.664 3.904-2.816 0.384-0.32 0.512-0.768 0.768-1.088a33.024 33.024 0 0 0 9.536-22.848l-0.128-0.64 0.128-0.704V99.712A35.008 35.008 0 0 0 305.216 64z m618.944 620.288h-204.16l-0.64 0.128-0.512-0.128c-7.808 0-14.72 3.2-20.48 7.68-1.28 1.024-2.752 1.664-3.84 2.752-0.384 0.32-0.512 0.768-0.832 1.088a33.664 33.664 0 0 0-9.408 22.912l0.128 0.64-0.128 0.704v204.288c0 19.712 15.552 35.904 34.496 35.712a35.072 35.072 0 0 0 34.56-35.776V753.28h170.944c19.648 0 35.84-15.488 35.712-34.432a35.072 35.072 0 0 0-35.84-34.496z m-593.92 11.52c-0.256-0.32-0.384-0.768-0.768-1.088-1.088-1.088-2.56-1.728-3.84-2.688a33.088 33.088 0 0 0-20.48-7.68l-0.512 0.064-0.64-0.128H99.84a35.072 35.072 0 0 0-35.84 34.496 35.072 35.072 0 0 0 35.712 34.432H270.72v171.008c0 19.84 15.552 35.84 34.56 35.776a35.008 35.008 0 0 0 34.432-35.712V720l-0.128-0.64 0.128-0.704a33.344 33.344 0 0 0-9.472-22.848zM512 374.144a137.92 137.92 0 1 0 0.128 275.84A137.92 137.92 0 0 0 512 374.08z"></path>
              </svg>
            </li>
          </ul>
        `},zoomSensitivity:2}},e.prototype.init=function(){var t=this,r=this.get("graph"),n=this.get("getContent"),a=n(r),o=a;(0,v.isString)(a)&&(o=no(a));var s=this.get("className");o.setAttribute("class",s||"g6-component-toolbar");var u=this.get("container");u||(u=this.get("graph").get("container")),(0,v.isString)(u)&&(u=document.getElementById(u)),u.appendChild(o),this.set("toolBar",o);var f=this.get("handleClick");o.addEventListener("click",function(l){var m=zx(l).filter(function(C){return C.nodeName==="LI"});if(m.length!==0){var w=m[0].getAttribute("code");w&&(f?f(w,r):t.handleDefaultOperator(w))}});var c=this.get("position");c&&Wa(o,{top:"".concat(c.y,"px"),left:"".concat(c.x,"px")}),this.bindUndoRedo()},e.prototype.bindUndoRedo=function(){var t=this.get("graph"),r=document.querySelector('.g6-component-toolbar li[code="undo"]'),n=document.querySelector('.g6-component-toolbar li[code="undo"] svg'),a=document.querySelector('.g6-component-toolbar li[code="redo"]'),o=document.querySelector('.g6-component-toolbar li[code="redo"] svg');!r||!n||!a||!o||(r.setAttribute("style","cursor: not-allowed"),n.setAttribute("style","opacity: 0.4"),a.setAttribute("style","cursor: not-allowed"),o.setAttribute("style","opacity: 0.4"),t.on("stackchange",function(s){var u=s.undoStack,f=s.redoStack,c=u.length,l=f.length;c===0?(r.setAttribute("style","cursor: not-allowed"),n.setAttribute("style","opacity: 0.4")):(r.removeAttribute("style"),n.removeAttribute("style")),l===0?(a.setAttribute("style","cursor: not-allowed"),o.setAttribute("style","opacity: 0.4")):(a.removeAttribute("style"),o.removeAttribute("style"))}))},e.prototype.undo=function(){var t=this.get("graph"),r=t.getUndoStack();if(!(!r||r.length===0)){var n=r.pop();if(n){var a=n.action;t.pushStack(a,(0,v.clone)(n.data),"redo");var o=n.data.before;if(a==="add"&&(o=n.data.after),!o)return;switch(a){case"visible":{Object.keys(o).forEach(function(l){var m=o[l];m&&m.forEach(function(w){var C=t.findById(w.id);w.visible?t.showItem(C,!1):t.hideItem(C,!1)})});break}case"render":case"update":Object.keys(o).forEach(function(l){var m=o[l];m&&m.forEach(function(w){var C=t.findById(w.id);delete w.id,t.updateItem(C,w,!1),C.getType()==="combo"&&t.updateCombo(C)})});break;case"changedata":t.changeData(o,!1);break;case"delete":{Object.keys(o).forEach(function(l){var m=o[l];m&&m.forEach(function(w){var C=w.itemType;delete w.itemType,t.addItem(C,w,!1)})});break}case"add":Object.keys(o).forEach(function(l){var m=o[l];m&&m.forEach(function(w){t.removeItem(w.id,!1)})});break;case"updateComboTree":Object.keys(o).forEach(function(l){var m=o[l];m&&m.forEach(function(w){t.updateComboTree(w.id,w.parentId,!1)})});break;case"createCombo":var s=n.data.after.combos,u=s[s.length-1];Object.keys(o).forEach(function(l){var m=o[l];m&&m.forEach(function(w){t.updateComboTree(w.id,w.parentId,!1)})}),t.removeItem(u.id,!1);break;case"uncombo":var f=o.combos[o.combos.length-1],c=o.nodes.concat(o.combos).map(function(l){return l.id}).filter(function(l){return l!==f.id});t.createCombo(f,c,!1);break;case"layout":t.updateLayout(o,void 0,void 0,!1);break;default:}}}},e.prototype.redo=function(){var t=this.get("graph"),r=t.getRedoStack();if(!(!r||r.length===0)){var n=r.pop();if(n){var a=n.action,o=n.data.after;if(t.pushStack(a,(0,v.clone)(n.data)),a==="delete"&&(o=n.data.before),!o)return;switch(a){case"visible":{Object.keys(o).forEach(function(c){var l=o[c];l&&l.forEach(function(m){var w=t.findById(m.id);m.visible?t.showItem(w,!1):t.hideItem(w,!1)})});break}case"render":case"update":Object.keys(o).forEach(function(c){var l=o[c];l&&l.forEach(function(m){var w=t.findById(m.id);delete m.id,t.updateItem(w,m,!1),w.getType()==="combo"&&t.updateCombo(w)})});break;case"changedata":t.changeData(o,!1);break;case"delete":o.edges&&o.edges.forEach(function(c){t.removeItem(c.id,!1)}),o.nodes&&o.nodes.forEach(function(c){t.removeItem(c.id,!1)}),o.combos&&o.combos.forEach(function(c){t.removeItem(c.id,!1)});break;case"add":{Object.keys(o).forEach(function(c){var l=o[c];l&&l.forEach(function(m){var w=m.itemType;delete m.itemType,t.addItem(w,m,!1)})});break}case"updateComboTree":Object.keys(o).forEach(function(c){var l=o[c];l&&l.forEach(function(m){t.updateComboTree(m.id,m.parentId,!1)})});break;case"createCombo":var s=o.combos[o.combos.length-1];t.createCombo(s,s.children.map(function(c){return c.id}),!1);break;case"uncombo":var u=n.data.before.combos,f=u[u.length-1];t.uncombo(f.id,!1);break;case"layout":t.updateLayout(o,void 0,void 0,!1);break;default:}}}},e.prototype.zoomOut=function(){var t=this.get("graph"),r=t.getZoom(),n=1/(1-Rg*this.get("zoomSensitivity")),a=this.get("maxZoom")||t.get("maxZoom");n*r>a||t.zoomTo(r*n)},e.prototype.zoomIn=function(){var t=this.get("graph"),r=t.getZoom(),n=1-Rg*this.get("zoomSensitivity"),a=this.get("minZoom")||t.get("minZoom");n*r<a||t.zoomTo(r*n)},e.prototype.realZoom=function(){var t=this.get("graph");t.zoomTo(1)},e.prototype.autoZoom=function(){var t=this.get("graph");t.fitView([20,20])},e.prototype.handleDefaultOperator=function(t){switch(t){case"redo":this.redo();break;case"undo":this.undo();break;case"zoomOut":this.zoomOut();break;case"zoomIn":this.zoomIn();break;case"realZoom":this.realZoom();break;case"autoZoom":this.autoZoom();break;default:}},e.prototype.destroy=function(){var t=this.get("toolBar");if(t){var r=this.get("container");r||(r=this.get("graph").get("container")),(0,v.isString)(r)&&(r=document.getElementById(r)),r.removeChild(t)}var n=this.get("handleClick");n&&t.removeEventListener("click",n)},e}(au),Xx=Ux,Yx=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}();typeof document!="undefined"&&md()(`
  .g6-component-tooltip {
    border: 1px solid #e2e2e2;
    border-radius: 4px;
    font-size: 12px;
    color: #545454;
    background-color: rgba(255, 255, 255, 0.9);
    padding: 10px 8px;
    box-shadow: rgb(174, 174, 174) 0px 0px 10px;
  }
  .tooltip-type {
    padding: 0;
    margin: 0;
  }
  .tooltip-id {
    color: #531dab;
  }
`);var Wx=function(i){Yx(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{offsetX:6,offsetY:6,getContent:function(r){return`
          <h4 class='tooltip-type'>\u7C7B\u578B\uFF1A`.concat(r.item.getType(),`</h4>
          <span class='tooltip-id'>ID\uFF1A`).concat(r.item.getID(),`</span>
        `)},shouldBegin:function(r){return!0},itemTypes:["node","edge","combo"],trigger:"mouseenter",fixToNode:void 0}},e.prototype.getEvents=function(){return this.get("trigger")==="click"?{"node:click":"onClick","edge:click":"onClick","combo:click":"onClick","canvas:click":"onMouseLeave",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave",drag:"onMouseLeave"}:{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove","edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove","combo:mouseenter":"onMouseEnter","combo:mouseleave":"onMouseLeave","combo:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave",contextmenu:"onMouseLeave","node:drag":"onMouseLeave"}},e.prototype.init=function(){var t=this,r=t.get("className")||"g6-component-tooltip",n=no("<div class='".concat(r,"'></div>")),a=t.get("container");a||(a=t.get("graph").get("container")),(0,v.isString)(a)&&(a=document.getElementById(a)),Wa(n,{position:"absolute",visibility:"hidden",display:"none"}),a.appendChild(n),t.get("trigger")!=="click"&&(n.addEventListener("mouseenter",function(o){Wa(n,{visibility:"visible",display:"unset"})}),n.addEventListener("mouseleave",function(o){t.hideTooltip()})),t.set("tooltip",n)},e.prototype.onClick=function(t){var r=this.get("itemTypes");if(!(t.item&&t.item.getType&&r.indexOf(t.item.getType())===-1)){var n=t.item,a=this.get("graph");this.currentTarget===n?(this.currentTarget=null,this.hideTooltip(),a.emit("tooltipchange",{item:t.item,action:"hide"})):(this.currentTarget=n,this.showTooltip(t),a.emit("tooltipchange",{item:t.item,action:"show"}))}},e.prototype.onMouseEnter=function(t){var r=this.get("itemTypes");if(!(t.item&&t.item.getType&&r.indexOf(t.item.getType())===-1)){var n=t.item,a=this.get("graph");this.currentTarget=n,this.showTooltip(t),a.emit("tooltipchange",{item:t.item,action:"show"})}},e.prototype.onMouseMove=function(t){var r=this.get("itemTypes");t.item&&t.item.getType&&r.indexOf(t.item.getType())===-1||!this.currentTarget||t.item!==this.currentTarget||this.showTooltip(t)},e.prototype.onMouseLeave=function(){this.hideTooltip();var t=this.get("graph");t.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null},e.prototype.clearContainer=function(){var t=this.get("tooltip");t&&(t.innerHTML="")},e.prototype.showTooltip=function(t){if(t.item){var r=this.get("itemTypes");if(!(t.item.getType&&r.indexOf(t.item.getType())===-1)){var n=this.get("tooltip"),a=this.get("getContent"),o=a(t);(0,v.isString)(o)?n.innerHTML=o:(this.clearContainer(),n.appendChild(o)),this.updatePosition(t)}}},e.prototype.hideTooltip=function(){var t=this.get("tooltip");t&&Wa(t,{visibility:"hidden",display:"none"})},e.prototype.updatePosition=function(t){var r=this.get("shouldBegin"),n=this.get("tooltip");if(!r(t)){Wa(n,{visibility:"hidden",display:"none"});return}var a=this.get("graph"),o=a.get("width"),s=a.get("height"),u=this.get("offsetX")||0,f=this.get("offsetY")||0,c=a.getPointByClient(t.clientX,t.clientY),l=this.get("fixToNode"),m=t.item;if(m.getType&&m.getType()==="node"&&l&&(0,v.isArray)(l)&&l.length>=2){var w=m.getBBox();c={x:w.minX+w.width*l[0],y:w.minY+w.height*l[1]}}var C=a.getCanvasByPoint(c.x,c.y),D=C.x,U=C.y,$=a.getContainer(),tt={x:D+$.offsetLeft+u,y:U+$.offsetTop+f};Wa(n,{visibility:"visible",display:"unset"});var it=n.getBoundingClientRect();D+it.width+u>o&&(tt.x-=it.width+u),U+it.height+f>s&&(tt.y-=it.height+f,tt.y<0&&(tt.y=0)),Wa(n,{left:"".concat(tt.x,"px"),top:"".concat(tt.y,"px")})},e.prototype.hide=function(){this.onMouseLeave()},e.prototype.destroy=function(){var t=this.get("tooltip");if(t){var r=this.get("container");r||(r=this.get("graph").get("container")),(0,v.isString)(r)&&(r=document.getElementById(r)),r.removeChild(t)}},e}(au),Vx=Wx,Bg="timebarstartplay",Fg="timebarendplay",Lf="valuechange",Nl="timebarConfigChanged",jc="playPauseBtn",Dh="nextStepBtn",Ph="preStepBtn",K2={opacity:.5,fill:"#000"},Q2={opacity:.5,fill:"#000",r:5},J2={fill:"#fff",fontSize:12},Hx=function(){function i(e){var t=e.x,r=t===void 0?0:t,n=e.y,a=n===void 0?0:n,o=e.container,s=e.text,u=e.padding,f=u===void 0?[4,4,4,4]:u,c=e.className,l=c===void 0?"g6-component-timebar-tooltip":c,m=e.backgroundColor,w=m===void 0?"#000":m,C=e.textColor,D=C===void 0?"#fff":C,U=e.opacity,$=U===void 0?.8:U,tt=e.fontSize,it=tt===void 0?12:tt;this.container=o,this.className=l,this.backgroundColor=w,this.textColor=D,this.x=r,this.y=a,this.text=s,this.padding=f,this.opacity=$,this.fontSize=it,this.render()}return i.prototype.render=function(){var e=this,t=e.className,r=e.x,n=e.y,a=e.backgroundColor,o=e.textColor,s=e.text,u=e.padding,f=e.opacity,c=e.fontSize,l=e.container,m=no("<div class='".concat(t,`' style="position: absolute; width: fit-content; height: fit-content; opacity: `).concat(f,'"></div>'));(0,v.isString)(l)&&(l=document.getElementById(l)),l.appendChild(m),e.parentHeight=l.offsetHeight,e.parentWidth=l.offsetWidth,Wa(m,{visibility:"hidden",top:0,left:0});var w=no(`
      <div style='position: absolute; white-space:nowrap; background-color: `.concat(a,"; font-size: ").concat(c,"px; border-radius: 4px; width: fit-content; height: fit-content; color: ").concat(o,"; padding: ").concat(u[0],"px ").concat(u[1],"px ").concat(u[2],"px ").concat(u[3],"px'></div>"));w.innerHTML=s,m.appendChild(w),e.backgroundDOM=w;var C=no("<div style='position: absolute; width: 0px; height: 0px; border-left: 5px solid transparent; border-right: 5px solid transparent; border-top: 10px solid ".concat(a,"'></div>"));m.appendChild(C),e.arrowDOM=C,e.container=m},i.prototype.show=function(e){var t=this,r=e.text,n=e.x,a=e.y,o=e.clientX,s=e.clientY;t.backgroundDOM.innerHTML=r;var u=t.backgroundDOM.offsetWidth,f=t.backgroundDOM.offsetHeight,c=t.arrowDOM.offsetWidth,l=t.arrowDOM.offsetHeight;Wa(t.container,{top:"".concat(-f-l,"px"),left:"".concat(n,"px"),visibility:"visible"}),Wa(t.backgroundDOM,{marginLeft:"".concat(-u/2,"px")}),Wa(t.arrowDOM,{marginLeft:"".concat(-c/2,"px"),top:"".concat(f,"px")});var m=n-u/2,w=n+u/2;m<0?Wa(t.backgroundDOM,{marginLeft:"".concat(-u/2-m,"px")}):w>t.parentWidth&&Wa(t.backgroundDOM,{marginLeft:"".concat(-u/2-w+t.parentWidth+12,"px")})},i.prototype.hide=function(){Wa(this.container,{top:0,left:0,visibility:"hidden"})},i}(),jx=Hx,Ev=function(){return Ev=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Ev.apply(this,arguments)},Zx=function(){function i(e){this.config=(0,v.deepMix)({},e),this.init()}return i.prototype.update=function(e){this.config=(0,v.deepMix)({},this.config,e),this.updateElement(),this.renderMarker()},i.prototype.init=function(){this.initElement(),this.renderMarker()},i.prototype.initElement=function(){var e=this.config,t=e.group,r=e.style,n=r.scale,a=n===void 0?1:n,o=r.offsetX,s=o===void 0?0:o,u=r.offsetY,f=u===void 0?0:u,c=this.config.x+s,l=this.config.y+f,m=t.addGroup({name:jc});this.startMarkerGroup=m.addGroup({name:jc}),this.circle=t.addShape("circle",{attrs:Ev({x:c,y:l,r:this.config.r*a},r),name:jc}),this.startMarker=this.startMarkerGroup.addShape("path",{attrs:{path:this.getStartMarkerPath(c,l,a),fill:r.stroke||"#aaa"},name:"start-marker"}),this.pauseMarkerGroup=m.addGroup({name:jc});var w=.25*this.config.r*a,C=.5*this.config.r*Math.sqrt(3)*a;this.pauseLeftMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:c-.375*this.config.r*a,y:l-C/2,width:w,height:C,fill:r.stroke||"#aaa",lineWidth:0}}),this.pauseRightMarker=this.pauseMarkerGroup.addShape("rect",{attrs:{x:c+1/8*this.config.r*a,y:l-C/2,width:w,height:C,fill:r.stroke||"#aaa",lineWidth:0}})},i.prototype.updateElement=function(){var e=this.config.style,t=e.scale,r=t===void 0?1:t,n=e.offsetX,a=n===void 0?0:n,o=e.offsetY,s=o===void 0?0:o,u=this.config.x+a,f=this.config.y+s;this.circle.attr("x",u),this.circle.attr("y",f),this.circle.attr("r",this.config.r*r),this.startMarker.attr("path",this.getStartMarkerPath(u,f,r));var c=.25*this.config.r*r,l=.5*this.config.r*Math.sqrt(3)*r;this.pauseLeftMarker.attr("x",u-(1/4+1/8)*this.config.r*r),this.pauseLeftMarker.attr("y",f-l/2),this.pauseLeftMarker.attr("width",c),this.pauseLeftMarker.attr("height",l),this.pauseRightMarker.attr("x",u+1/8*this.config.r*r),this.pauseRightMarker.attr("y",f-l/2),this.pauseRightMarker.attr("width",c),this.pauseRightMarker.attr("height",l)},i.prototype.renderMarker=function(){this.config.isPlay?(this.startMarkerGroup.hide(),this.pauseMarkerGroup.show()):(this.startMarkerGroup.show(),this.pauseMarkerGroup.hide())},i.prototype.getStartMarkerPath=function(e,t,r){var n=.5*this.config.r*Math.sqrt(3)*r;return[["M",e-n/Math.sqrt(3)/2,t-n/2],["L",e+n/Math.sqrt(3),t],["L",e-n/Math.sqrt(3)/2,t+n/2]]},i}(),qx=Zx,zo=function(){return zo=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},zo.apply(this,arguments)},Rh=Ht,$x="#aaa",Kx="green",Qx={fill:"#aaa",fillOpacity:.35,stroke:"#aaa"},Jx={fill:"#fff"},tw={fill:"green"},Gg={pointer:{fill:"#aaa",lineWidth:0},scroller:{stroke:"#aaa",fill:"#aaa",lineWidth:1,lineAppendWidth:5,cursor:"pointer"},text:{fill:"#aaa",textBaseline:"top"}},zg={check:{stroke:"green",lineWidth:3},box:{fill:"#fff",stroke:"#aaa",lineWidth:2,radius:3,width:12,height:12},text:{fill:"#aaa",fontSize:12,textBaseline:"top"}},ew={speed:1,loop:!1,fill:"#fff",stroke:"#fff",hideTimeTypeController:!1,preBtnStyle:{fill:"#aaa",stroke:"#aaa"},nextBtnStyle:{fill:"#aaa",stroke:"#aaa"},playBtnStyle:{fill:"#aaa",stroke:"#aaa",fillOpacity:.05},speedControllerStyle:Gg,timeTypeControllerStyle:zg},_v=110,Zc=50,Nf={SINGLE:"single",RANGE:"range"},rw=function(){function i(e){this.controllerCfg=(0,v.deepMix)({},ew,e),this.group=e.group,this.controllerGroup=this.group.addGroup({name:"controller-group"}),this.speedAxisY=[],this.currentSpeed=this.controllerCfg.speed,this.currentType=this.controllerCfg.defaultTimeType||Nf.RANGE,this.fontFamily=e.fontFamily||"Arial, sans-serif",this.init()}return i.prototype.init=function(){this.renderPlayButton()},i.prototype.getNextMarkerPath=function(e,t,r){return[["M",e,t-r],["L",e+r,t],["L",e,t+r],["Z",e,t-r],["M",e,t],["L",e-r,t-r],["L",e-r,t+r],["Z"]]},i.prototype.getPreMarkerPath=function(e,t,r){return[["M",e,t-r],["L",e-r,t],["L",e,t+r],["L",e,t-r],["M",e,t],["L",e+r,t-r],["L",e+r,t+r],["Z"]]},i.prototype.renderPlayButton=function(){var e=this.controllerCfg,t=e.width,r=e.height,n=e.x,a=e.y,o=e.hideTimeTypeController,s=e.fill,u=s===void 0?$x:s,f=e.stroke,c=f===void 0?Kx:f,l=e.containerStyle,m=l===void 0?{}:l,w=zo(zo({},Qx),e.playBtnStyle||{}),C=zo(zo({},Jx),e.preBtnStyle||{}),D=zo(zo({},tw),e.nextBtnStyle||{}),U=r/2-5,$=a+10,tt=this.controllerGroup.addShape("rect",{attrs:zo({x:n,y:$,width:t,height:r,stroke:c,fill:u},m),name:"container-rect"});this.playButton?this.playButton.update({x:t/2,y:$,r:U}):this.playButton=new qx({group:this.controllerGroup,x:t/2,y:$+U+5,r:U,isPlay:this.isPlay,style:w});var it=C.offsetX||0,ct=C.offsetY||0,_t=(C.scale||1)*U;this.controllerGroup.addShape("path",{attrs:zo({path:this.getPreMarkerPath(t/2-5*U+it,$+U+5+ct,_t*.5)},C),name:Ph});var Bt=D.offsetX||0,Pt=D.offsetY||0,Qt=(D.scale||1)*U;this.controllerGroup.addShape("path",{attrs:zo({path:this.getNextMarkerPath(t/2+5*U+Bt,$+U+5+Pt,Qt*.5)},D),name:Dh}),tt.toBack(),this.renderSpeedBtn(),o||this.renderToggleTime(),this.bindEvent();var ye=this.controllerCfg.scale,ce=ye===void 0?1:ye,Ne=this.controllerGroup.getCanvasBBox(),$e=(Ne.maxX+Ne.minX)/2,Rr=(Ne.maxY+Ne.minY)/2,rn=Rh([1,0,0,0,1,0,0,0,1],[["t",-$e,-Rr],["s",ce,ce],["t",$e,Rr]]);this.controllerGroup.setMatrix(rn)},i.prototype.renderSpeedBtn=function(){var e=this.controllerCfg,t=e.y,r=e.width,n=e.hideTimeTypeController,a=zo(zo({},Gg),this.controllerCfg.speedControllerStyle||{}),o=a.scroller,s=o===void 0?{}:o,u=a.text,f=u===void 0?{}:u,c=a.pointer,l=c===void 0?{}:c,m=a.scale,w=m===void 0?1:m,C=a.offsetX,D=C===void 0?0:C,U=a.offsetY,$=U===void 0?0:U,tt=this.controllerGroup.addGroup({name:"speed-group"});this.speedGroup=tt;var it=[],ct=5;this.speedAxisY=[19,22,26,32,39];for(var _t=0;_t<5;_t++){var Bt=t+this.speedAxisY[_t],Pt=r-(n?Zc:_v);tt.addShape("line",{attrs:zo({x1:Pt,x2:Pt+15,y1:Bt,y2:Bt},s),speed:ct,name:"speed-rect"}),this.speedAxisY[_t]=Bt,it.push(ct),ct=ct-1}this.speedText=tt.addShape("text",{attrs:zo({x:r-(n?Zc:_v)+20,y:this.speedAxisY[0]+4,text:"1.0X",fontFamily:this.fontFamily||"Arial, sans-serif"},f),name:"speed-text"}),this.speedPoint=tt.addShape("path",{attrs:zo({path:this.getPointerPath(r-(n?Zc:_v),0),matrix:[1,0,0,0,1,0,0,this.speedAxisY[4],1]},l),name:"speed-pointer"});var Qt=this.speedGroup.getCanvasBBox(),ye=(Qt.maxX+Qt.minX)/2,ce=(Qt.maxY+Qt.minY)/2,Ne=this.speedGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];Ne=Rh(Ne,[["t",-ye,-ce],["s",w,w],["t",ye+D*w,ce+$*w]]),this.speedGroup.setMatrix(Ne)},i.prototype.getPointerPath=function(e,t){return[["M",e,t],["L",e-10,t-4],["L",e-10,t+4],["Z"]]},i.prototype.renderToggleTime=function(){var e,t,r=this.controllerCfg,n=r.width,a=r.defaultTimeType,o=zo(zo({},zg),this.controllerCfg.timeTypeControllerStyle||{}),s=o.scale,u=s===void 0?1:s,f=o.offsetX,c=f===void 0?0:f,l=o.offsetY,m=l===void 0?0:l,w=o.box,C=w===void 0?{}:w,D=o.check,U=D===void 0?{}:D,$=o.text,tt=$===void 0?{}:$;this.toggleGroup=this.controllerGroup.addGroup({name:"toggle-group"});var it=a===Nf.SINGLE;this.toggleGroup.addShape("rect",{attrs:zo({x:n-Zc,y:this.speedAxisY[0]+3.5},C),isChecked:it,name:"toggle-model"}),this.checkedIcon=this.toggleGroup.addShape("path",{attrs:zo({path:[["M",n-Zc+3,this.speedAxisY[1]+6],["L",n-Zc+7,this.speedAxisY[1]+10],["L",n-Zc+12,this.speedAxisY[1]+4]]},U),capture:!1,name:"check-icon"}),it||this.checkedIcon.hide(),this.checkedText=this.toggleGroup.addShape("text",{attrs:zo({text:it?((e=this.controllerCfg)===null||e===void 0?void 0:e.timeRangeControllerText)||"\u65F6\u95F4\u8303\u56F4":((t=this.controllerCfg)===null||t===void 0?void 0:t.timePointControllerText)||"\u5355\u4E00\u65F6\u95F4",x:n-Zc+15,y:this.speedAxisY[0]+4,fontFamily:typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif"},tt),name:"checked-text"});var ct=this.toggleGroup.getCanvasBBox(),_t=(ct.maxX+ct.minX)/2,Bt=(ct.maxY+ct.minY)/2,Pt=this.toggleGroup.getMatrix()||[1,0,0,0,1,0,0,0,1];Pt=Rh(Pt,[["t",-_t,-Bt],["s",u,u],["t",_t+c*u,Bt+m*u]]),this.toggleGroup.setMatrix(Pt)},i.prototype.bindEvent=function(){var e=this;this.speedGroup.on("speed-rect:click",function(t){var r=t.target.attr("y1"),n=e.speedPoint.attr("matrix"),a=e.speedAxisY.indexOf(n[7]||0),o=e.speedAxisY.indexOf(r),s=e.speedAxisY[o]-e.speedAxisY[a];n=Rh(n,[["t",0,s]]),e.speedPoint.setMatrix(n),e.currentSpeed=e.speedAxisY.length-o,e.speedText.attr("text","".concat(e.currentSpeed,".0X")),e.group.emit(Nl,{speed:e.currentSpeed,type:e.currentType})}),this.speedGroup.on("mousewheel",function(t){t.preventDefault();var r=e.speedPoint.attr("matrix")||[1,0,0,0,1,0,0,0,1],n=r[7],a=e.speedAxisY.indexOf(n);if(a===-1){var o=1/0;e.speedAxisY.forEach(function(u,f){var c=Math.abs(u-n);o>c&&(o=c,a=f)})}t.originalEvent.deltaY>0?a=Math.max(0,a-1):a=Math.min(e.speedAxisY.length-1,a+1);var s=e.speedAxisY[a]-n;r=Rh(r,[["t",0,s]]),e.speedPoint.setMatrix(r),e.currentSpeed=e.speedAxisY.length-a,e.speedText.attr("text","".concat(e.currentSpeed,".0X")),e.group.emit(Nl,{speed:e.currentSpeed,type:e.currentType})}),this.toggleGroup&&this.toggleGroup.on("toggle-model:click",function(t){var r,n,a=t.target.get("isChecked");a?(e.checkedIcon.hide(),e.checkedText.attr("text",((n=e.controllerCfg)===null||n===void 0?void 0:n.timePointControllerText)||"\u5355\u4E00\u65F6\u95F4"),e.currentType=Nf.RANGE):(e.checkedIcon.show(),e.checkedText.attr("text",((r=e.controllerCfg)===null||r===void 0?void 0:r.timeRangeControllerText)||"\u65F6\u95F4\u8303\u56F4"),e.currentType=Nf.SINGLE),t.target.set("isChecked",!a),e.group.emit(Nl,{type:e.currentType,speed:e.currentSpeed})})},i.prototype.destroy=function(){this.speedGroup.off("speed-rect:click"),this.toggleGroup&&(this.toggleGroup.off("toggle-model:click"),this.toggleGroup.destroy()),this.speedGroup.destroy()},i}(),Ug=rw,Bh=function(){return Bh=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Bh.apply(this,arguments)},nw=Ht,aw={fill:"#5B8FF9"},iw={fill:"#e6e8e9"},ow=function(){function i(e){this.frameCount=0,this.fontFamily="Arial, sans-serif";var t=e.graph,r=e.canvas,n=e.group,a=e.width,o=e.height,s=e.padding,u=e.data,f=e.start,c=e.end,l=e.x,m=l===void 0?0:l,w=e.y,C=w===void 0?0:w,D=e.tickLabelFormatter,U=e.selectedTickStyle,$=U===void 0?aw:U,tt=e.unselectedTickStyle,it=tt===void 0?iw:tt,ct=e.tooltipBackgroundColor,_t=e.tooltipFomatter,Bt=e.tickLabelStyle,Pt=e.controllerCfg,Qt=Pt===void 0?{speed:1}:Pt;this.graph=t,this.group=n,this.sliceGroup=n.addGroup({name:"slice-group"}),this.canvas=r,this.width=a,this.height=o,this.padding=s,this.data=u,this.start=f,this.end=c,this.tickLabelFormatter=D,this.tickLabelStyle=Bt||{},this.selectedTickStyle=$,this.unselectedTickStyle=it,this.controllerCfg=Qt,this.currentSpeed=Qt.speed||1,this.x=m,this.y=C,this.tooltipBackgroundColor=ct,this.tooltipFomatter=_t,this.fontFamily=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlices(),this.initEvent()}return i.prototype.renderSlices=function(){var e=this,t=this,r=t.width,n=t.height,a=t.padding,o=t.data,s=t.start,u=t.end,f=t.tickLabelFormatter,c=t.selectedTickStyle,l=t.unselectedTickStyle,m=t.tickLabelStyle,w=r-2*a,C=10,D=4,U=3*a+D+C,$=n-U-2*a,tt=2,it=o.length,ct=(w-tt*(it-1))/it;this.tickWidth=ct;var _t=this.sliceGroup,Bt=[],Pt=[],Qt=Math.round(it*s),ye=Math.round(it*u);this.startTickRectId=Qt,this.endTickRectId=ye;var ce=m.rotate;delete m.rotate,o.forEach(function($e,Rr){var rn=Rr>=Qt&&Rr<=ye,Vr=rn?c:l,Cr=_t.addShape("rect",{attrs:Bh({x:a+Rr*(ct+tt),y:a,width:ct,height:$},Vr),draggable:!0,name:"tick-rect-".concat(Rr)}),Cn=_t.addShape("rect",{attrs:{x:a+Rr*ct+tt*(2*Rr-1)/2,y:a,width:Rr===0||Rr===it-1?ct+tt/2:ct+tt,height:$,fill:"#fff",opacity:0},draggable:!0,name:"pick-rect-".concat(Rr)});Cn.toFront();var _n=Cr.getBBox(),Tr=(_n.minX+_n.maxX)/2;Bt.push({rect:Cr,pickRect:Cn,value:$e.date,x:Tr,y:_n.minY});var jr;if(f?(jr=f($e),!(0,v.isString)(jr)&&jr&&(jr=$e.date)):Rr%Math.round(it/10)===0&&(jr=$e.date),jr){Pt.push(jr);var dn=_n.maxY+a*2;_t.addShape("line",{attrs:{stroke:"#BFBFBF",x1:Tr,y1:dn,x2:Tr,y2:dn+D},name:"tick-line"});var vn=dn+D+a,Pn=_t.addShape("text",{attrs:Bh({fill:"#8c8c8c",stroke:"#fff",lineWidth:1,x:Tr,y:vn,textAlign:"center",text:jr,textBaseline:"top",fontSize:10,fontFamily:e.fontFamily||"Arial, sans-serif"},m),capture:!1,name:"tick-label"}),Wn=Pn.getBBox();if(Wn.maxX>r?Pn.attr("textAlign","right"):Wn.minX<0&&Pn.attr("textAlign","left"),(0,v.isNumber)(ce)&&Pt.length!==10){var ma=nw([1,0,0,0,1,0,0,0,1],[["t",-Tr,-vn],["r",ce],["t",Tr-5,vn+2]]);Pn.attr({textAlign:"left",matrix:ma})}Pt.length===1?Pn.attr({textAlign:"left"}):Pt.length===10&&Pn.attr({textAlign:"right"})}}),this.tickRects=Bt;var Ne=this.group;this.currentSpeed=1,this.controllerBtnGroup=new Ug(Bh({group:Ne,x:this.x,y:this.y+n+5,width:r,height:40,hideTimeTypeController:!0,speed:this.currentSpeed,fontFamily:this.fontFamily||"Arial, sans-serif"},this.controllerCfg))},i.prototype.initEvent=function(){var e=this,t=this.sliceGroup;t.on("click",function(c){var l=c.target;if(!(l.get("type")!=="rect"||!l.get("name"))){var m=parseInt(l.get("name").split("-")[2],10);if(!isNaN(m)){var w=e.tickRects,C=e.unselectedTickStyle;w.forEach(function(tt){tt.rect.attr(C)});var D=e.selectedTickStyle;w[m].rect.attr(D),e.startTickRectId=m,e.endTickRectId=m;var U=w.length,$=m/U;e.graph.emit(Lf,{value:[$,$]})}}}),t.on("dragstart",function(c){var l=e.tickRects,m=e.unselectedTickStyle;l.forEach(function(tt){tt.rect.attr(m)});var w=c.target,C=parseInt(w.get("name").split("-")[2],10),D=e.selectedTickStyle;l[C].rect.attr(D),e.startTickRectId=C;var U=l.length,$=C/U;e.graph.emit(Lf,{value:[$,$]}),e.dragging=!0}),t.on("dragover",function(c){if(e.dragging&&c.target.get("type")==="rect"){for(var l=parseInt(c.target.get("name").split("-")[2],10),m=e.startTickRectId,w=e.tickRects,C=e.selectedTickStyle,D=e.unselectedTickStyle,U=0;U<w.length;U++){var $=U>=m&&U<=l?C:D;w[U].rect.attr($)}var tt=w.length;e.endTickRectId=l;var it=m/tt,ct=l/tt;e.graph.emit(Lf,{value:[it,ct]})}}),t.on("drop",function(c){if(e.dragging&&(e.dragging=!1,c.target.get("type")==="rect")){var l=e.startTickRectId,m=parseInt(c.target.get("name").split("-")[2],10);if(!(m<l)){var w=e.selectedTickStyle,C=e.tickRects;C[m].rect.attr(w),e.endTickRectId=m;var D=C.length,U=l/D,$=m/D;e.graph.emit(Lf,{value:[U,$]})}}});var r=this,n=r.tooltipBackgroundColor,a=r.tooltipFomatter,o=r.canvas,s=new jx({container:o.get("container"),backgroundColor:n}),u=this.tickRects;u.forEach(function(c){var l=c.pickRect;l.on("mouseenter",function(m){var w=m.target;if(w.get("type")==="rect"){var C=parseInt(w.get("name").split("-")[2],10),D=o.getClientByPoint(u[C].x,u[C].y);s.show({x:u[C].x,y:u[C].y,clientX:D.x,clientY:D.y,text:a?a(u[C].value):u[C].value})}}),l.on("mouseleave",function(m){s.hide()})});var f=this.group;f.on("".concat(jc,":click"),function(){e.isPlay=!e.isPlay,e.changePlayStatus()}),f.on("".concat(Dh,":click"),function(){e.updateStartEnd(1)}),f.on("".concat(Ph,":click"),function(){e.updateStartEnd(-1)}),f.on(Nl,function(c){var l=c.type,m=c.speed;e.currentSpeed=m})},i.prototype.changePlayStatus=function(e){e===void 0&&(e=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(Bg,null)):this.playHandler&&(typeof window!="undefined"&&window.cancelAnimationFrame(this.playHandler),e&&this.graph.emit(Fg,null))},i.prototype.startPlay=function(){var e=this;return typeof window!="undefined"?window.requestAnimationFrame(function(){var t=e.currentSpeed;e.frameCount%(60/t)===0&&(e.frameCount=0,e.updateStartEnd(1)),e.frameCount++,e.isPlay&&(e.playHandler=e.startPlay())}):void 0},i.prototype.updateStartEnd=function(e){var t=this,r=this.tickRects,n=r.length,a=this.unselectedTickStyle,o=this.selectedTickStyle,s=t.endTickRectId;if(e>0?t.endTickRectId++:(r[t.endTickRectId].rect.attr(a),t.endTickRectId--),s!==t.startTickRectId)t.endTickRectId<t.startTickRectId&&(t.startTickRectId=t.endTickRectId);else{for(var u=t.startTickRectId;u<=t.endTickRectId-1;u++)r[u].rect.attr(a);t.startTickRectId=t.endTickRectId}if(r[t.endTickRectId]){r[t.endTickRectId].rect.attr(o);var f=t.startTickRectId/n,c=t.endTickRectId/n;this.graph.emit(Lf,{value:[f,c]})}},i.prototype.destory=function(){var e=this.sliceGroup;e.off("click"),e.off("dragstart"),e.off("dragover"),e.off("drop"),this.tickRects.forEach(function(t){var r=t.pickRect;r.off("mouseenter"),r.off("mouseleave")}),this.tickRects.length=0,e.off("".concat(jc,":click")),e.off("".concat(Dh,":click")),e.off("".concat(Ph,":click")),e.off(Nl),this.sliceGroup.destroy()},i}(),sw=ow,Xg={};function uw(i){return Xg[i]}function Of(i,e){Xg[i]=e}var fw=function(){function i(e){this.type="base",this.isCategory=!1,this.isLinear=!1,this.isContinuous=!1,this.isIdentity=!1,this.values=[],this.range=[0,1],this.ticks=[],this.__cfg__=e,this.initCfg(),this.init()}return i.prototype.translate=function(e){return e},i.prototype.change=function(e){(0,v.assign)(this.__cfg__,e),this.init()},i.prototype.clone=function(){return this.constructor(this.__cfg__)},i.prototype.getTicks=function(){var e=this;return(0,v.map)(this.ticks,function(t,r){return(0,v.isObject)(t)?t:{text:e.getText(t,r),tickValue:t,value:e.scale(t)}})},i.prototype.getText=function(e,t){var r=this.formatter,n=r?r(e,t):e;return(0,v.isNil)(n)||!(0,v.isFunction)(n.toString)?"":n.toString()},i.prototype.getConfig=function(e){return this.__cfg__[e]},i.prototype.init=function(){(0,v.assign)(this,this.__cfg__),this.setDomain(),(0,v.isEmpty)(this.getConfig("ticks"))&&(this.ticks=this.calculateTicks())},i.prototype.initCfg=function(){},i.prototype.setDomain=function(){},i.prototype.calculateTicks=function(){var e=this.tickMethod,t=[];if((0,v.isString)(e)){var r=uw(e);if(!r)throw new Error("There is no method to to calculate ticks!");t=r(this)}else(0,v.isFunction)(e)&&(t=e(this));return t},i.prototype.rangeMin=function(){return this.range[0]},i.prototype.rangeMax=function(){return this.range[1]},i.prototype.calcPercent=function(e,t,r){return(0,v.isNumber)(e)?(e-t)/(r-t):NaN},i.prototype.calcValue=function(e,t,r){return t+e*(r-t)},i}(),Sv=fw,cw=function(i){(0,g.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="cat",t.isCategory=!0,t}return e.prototype.buildIndexMap=function(){if(!this.translateIndexMap){this.translateIndexMap=new Map;for(var t=0;t<this.values.length;t++)this.translateIndexMap.set(this.values[t],t)}},e.prototype.translate=function(t){this.buildIndexMap();var r=this.translateIndexMap.get(t);return r===void 0&&(r=(0,v.isNumber)(t)?t:NaN),r},e.prototype.scale=function(t){var r=this.translate(t),n=this.calcPercent(r,this.min,this.max);return this.calcValue(n,this.rangeMin(),this.rangeMax())},e.prototype.invert=function(t){var r=this.max-this.min,n=this.calcPercent(t,this.rangeMin(),this.rangeMax()),a=Math.round(r*n)+this.min;return a<this.min||a>this.max?NaN:this.values[a]},e.prototype.getText=function(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var a=t;return(0,v.isNumber)(t)&&!this.values.includes(t)&&(a=this.values[a]),i.prototype.getText.apply(this,(0,g.__spreadArrays)([a],r))},e.prototype.initCfg=function(){this.tickMethod="cat"},e.prototype.setDomain=function(){if((0,v.isNil)(this.getConfig("min"))&&(this.min=0),(0,v.isNil)(this.getConfig("max"))){var t=this.values.length;this.max=t>1?t-1:t}this.translateIndexMap&&(this.translateIndexMap=void 0)},e}(Sv),Fh=cw,Yg=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,qc="\\d\\d?",$c="\\d\\d",lw="\\d{3}",hw="\\d{4}",Gh="[^\\s]+",Wg=/\[([^]*?)\]/gm;function Vg(i,e){for(var t=[],r=0,n=i.length;r<n;r++)t.push(i[r].substr(0,e));return t}var Hg=function(i){return function(e,t){var r=t[i].map(function(a){return a.toLowerCase()}),n=r.indexOf(e.toLowerCase());return n>-1?n:null}};function Kc(i){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];for(var r=0,n=e;r<n.length;r++){var a=n[r];for(var o in a)i[o]=a[o]}return i}var jg=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Zg=["January","February","March","April","May","June","July","August","September","October","November","December"],dw=Vg(Zg,3),vw=Vg(jg,3),Mv={dayNamesShort:vw,dayNames:jg,monthNamesShort:dw,monthNames:Zg,amPm:["am","pm"],DoFn:function(i){return i+["th","st","nd","rd"][i%10>3?0:(i-i%10!==10?1:0)*i%10]}},xd=Kc({},Mv),qg=function(i){return xd=Kc(xd,i)},$g=function(i){return i.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},iu=function(i,e){for(e===void 0&&(e=2),i=String(i);i.length<e;)i="0"+i;return i},pw={D:function(i){return String(i.getDate())},DD:function(i){return iu(i.getDate())},Do:function(i,e){return e.DoFn(i.getDate())},d:function(i){return String(i.getDay())},dd:function(i){return iu(i.getDay())},ddd:function(i,e){return e.dayNamesShort[i.getDay()]},dddd:function(i,e){return e.dayNames[i.getDay()]},M:function(i){return String(i.getMonth()+1)},MM:function(i){return iu(i.getMonth()+1)},MMM:function(i,e){return e.monthNamesShort[i.getMonth()]},MMMM:function(i,e){return e.monthNames[i.getMonth()]},YY:function(i){return iu(String(i.getFullYear()),4).substr(2)},YYYY:function(i){return iu(i.getFullYear(),4)},h:function(i){return String(i.getHours()%12||12)},hh:function(i){return iu(i.getHours()%12||12)},H:function(i){return String(i.getHours())},HH:function(i){return iu(i.getHours())},m:function(i){return String(i.getMinutes())},mm:function(i){return iu(i.getMinutes())},s:function(i){return String(i.getSeconds())},ss:function(i){return iu(i.getSeconds())},S:function(i){return String(Math.round(i.getMilliseconds()/100))},SS:function(i){return iu(Math.round(i.getMilliseconds()/10),2)},SSS:function(i){return iu(i.getMilliseconds(),3)},a:function(i,e){return i.getHours()<12?e.amPm[0]:e.amPm[1]},A:function(i,e){return i.getHours()<12?e.amPm[0].toUpperCase():e.amPm[1].toUpperCase()},ZZ:function(i){var e=i.getTimezoneOffset();return(e>0?"-":"+")+iu(Math.floor(Math.abs(e)/60)*100+Math.abs(e)%60,4)},Z:function(i){var e=i.getTimezoneOffset();return(e>0?"-":"+")+iu(Math.floor(Math.abs(e)/60),2)+":"+iu(Math.abs(e)%60,2)}},Kg=function(i){return+i-1},Qg=[null,qc],Jg=[null,Gh],t0=["isPm",Gh,function(i,e){var t=i.toLowerCase();return t===e.amPm[0]?0:t===e.amPm[1]?1:null}],e0=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(i){var e=(i+"").match(/([+-]|\d\d)/gi);if(e){var t=+e[1]*60+parseInt(e[2],10);return e[0]==="+"?t:-t}return 0}],gw={D:["day",qc],DD:["day",$c],Do:["day",qc+Gh,function(i){return parseInt(i,10)}],M:["month",qc,Kg],MM:["month",$c,Kg],YY:["year",$c,function(i){var e=new Date,t=+(""+e.getFullYear()).substr(0,2);return+(""+(+i>68?t-1:t)+i)}],h:["hour",qc,void 0,"isPm"],hh:["hour",$c,void 0,"isPm"],H:["hour",qc],HH:["hour",$c],m:["minute",qc],mm:["minute",$c],s:["second",qc],ss:["second",$c],YYYY:["year",hw],S:["millisecond","\\d",function(i){return+i*100}],SS:["millisecond",$c,function(i){return+i*10}],SSS:["millisecond",lw],d:Qg,dd:Qg,ddd:Jg,dddd:Jg,MMM:["month",Gh,Hg("monthNamesShort")],MMMM:["month",Gh,Hg("monthNames")],a:t0,A:t0,ZZ:e0,Z:e0},wd={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},r0=function(i){return Kc(wd,i)},n0=function(i,e,t){if(e===void 0&&(e=wd.default),t===void 0&&(t={}),typeof i=="number"&&(i=new Date(i)),Object.prototype.toString.call(i)!=="[object Date]"||isNaN(i.getTime()))throw new Error("Invalid Date pass to format");e=wd[e]||e;var r=[];e=e.replace(Wg,function(a,o){return r.push(o),"@@@"});var n=Kc(Kc({},xd),t);return e=e.replace(Yg,function(a){return pw[a](i,n)}),e.replace(/@@@/g,function(){return r.shift()})};function a0(i,e,t){if(t===void 0&&(t={}),typeof e!="string")throw new Error("Invalid format in fecha parse");if(e=wd[e]||e,i.length>1e3)return null;var r=new Date,n={year:r.getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},a=[],o=[],s=e.replace(Wg,function(ct,_t){return o.push($g(_t)),"@@@"}),u={},f={};s=$g(s).replace(Yg,function(ct){var _t=gw[ct],Bt=_t[0],Pt=_t[1],Qt=_t[3];if(u[Bt])throw new Error("Invalid format. "+Bt+" specified twice in format");return u[Bt]=!0,Qt&&(f[Qt]=!0),a.push(_t),"("+Pt+")"}),Object.keys(f).forEach(function(ct){if(!u[ct])throw new Error("Invalid format. "+ct+" is required in specified format")}),s=s.replace(/@@@/g,function(){return o.shift()});var c=i.match(new RegExp(s,"i"));if(!c)return null;for(var l=Kc(Kc({},xd),t),m=1;m<c.length;m++){var w=a[m-1],C=w[0],D=w[2],U=D?D(c[m],l):+c[m];if(U==null)return null;n[C]=U}n.isPm===1&&n.hour!=null&&+n.hour!=12?n.hour=+n.hour+12:n.isPm===0&&+n.hour==12&&(n.hour=0);var $;if(n.timezoneOffset==null){$=new Date(n.year,n.month,n.day,n.hour,n.minute,n.second,n.millisecond);for(var tt=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],m=0,it=tt.length;m<it;m++)if(u[tt[m][0]]&&n[tt[m][0]]!==$[tt[m][1]]())return null}else if($=new Date(Date.UTC(n.year,n.month,n.day,n.hour,n.minute-n.timezoneOffset,n.second,n.millisecond)),n.month>11||n.month<0||n.day>31||n.day<1||n.hour>23||n.hour<0||n.minute>59||n.minute<0||n.second>59||n.second<0)return null;return $}var yw={format:n0,parse:a0,defaultI18n:Mv,setGlobalDateI18n:qg,setGlobalDateMasks:r0},i0=yw;function mw(i){return function(e,t,r,n){for(var a=(0,v.isNil)(r)?0:r,o=(0,v.isNil)(n)?e.length:n;a<o;){var s=a+o>>>1;i(e[s])>t?o=s:a=s+1}return a}}var o0="format";function s0(i,e){var t=N[o0]||i0[o0];return t(i,e)}function Ed(i){return(0,v.isString)(i)&&(i.indexOf("T")>0?i=new Date(i).getTime():i=new Date(i.replace(/-/gi,"/")).getTime()),(0,v.isDate)(i)&&(i=i.getTime()),i}var ef=1e3,Ol=60*ef,Dl=60*Ol,hc=24*Dl,zh=hc*31,u0=hc*365,Uh=[["HH:mm:ss",ef],["HH:mm:ss",ef*10],["HH:mm:ss",ef*30],["HH:mm",Ol],["HH:mm",Ol*10],["HH:mm",Ol*30],["HH",Dl],["HH",Dl*6],["HH",Dl*12],["YYYY-MM-DD",hc],["YYYY-MM-DD",hc*4],["YYYY-WW",hc*7],["YYYY-MM",zh],["YYYY-MM",zh*4],["YYYY-MM",zh*6],["YYYY",hc*380]];function bw(i,e,t){var r=(e-i)/t,n=mw(function(o){return o[1]})(Uh,r)-1,a=Uh[n];return n<0?a=Uh[0]:n>=Uh.length&&(a=(0,v.last)(Uh)),a}var xw=function(i){(0,g.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="timeCat",t}return e.prototype.translate=function(t){t=Ed(t);var r=this.values.indexOf(t);return r===-1&&((0,v.isNumber)(t)&&t<this.values.length?r=t:r=NaN),r},e.prototype.getText=function(t,r){var n=this.translate(t);if(n>-1){var a=this.values[n],o=this.formatter;return a=o?o(a,r):s0(a,this.mask),a}return t},e.prototype.initCfg=function(){this.tickMethod="time-cat",this.mask="YYYY-MM-DD",this.tickCount=7},e.prototype.setDomain=function(){var t=this.values;(0,v.each)(t,function(r,n){t[n]=Ed(r)}),t.sort(function(r,n){return r-n}),i.prototype.setDomain.call(this)},e}(Fh),ww=xw,Ew=function(i){(0,g.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.isContinuous=!0,t}return e.prototype.scale=function(t){if((0,v.isNil)(t))return NaN;var r=this.rangeMin(),n=this.rangeMax(),a=this.max,o=this.min;if(a===o)return r;var s=this.getScalePercent(t);return r+s*(n-r)},e.prototype.init=function(){i.prototype.init.call(this);var t=this.ticks,r=(0,v.head)(t),n=(0,v.last)(t);r<this.min&&(this.min=r),n>this.max&&(this.max=n),(0,v.isNil)(this.minLimit)||(this.min=r),(0,v.isNil)(this.maxLimit)||(this.max=n)},e.prototype.setDomain=function(){var t=(0,v.getRange)(this.values),r=t.min,n=t.max;(0,v.isNil)(this.min)&&(this.min=r),(0,v.isNil)(this.max)&&(this.max=n),this.min>this.max&&(this.min=r,this.max=n)},e.prototype.calculateTicks=function(){var t=this,r=i.prototype.calculateTicks.call(this);return this.nice||(r=(0,v.filter)(r,function(n){return n>=t.min&&n<=t.max})),r},e.prototype.getScalePercent=function(t){var r=this.max,n=this.min;return(t-n)/(r-n)},e.prototype.getInvertPercent=function(t){return(t-this.rangeMin())/(this.rangeMax()-this.rangeMin())},e}(Sv),_d=Ew,_w=function(i){(0,g.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="linear",t.isLinear=!0,t}return e.prototype.invert=function(t){var r=this.getInvertPercent(t);return this.min+r*(this.max-this.min)},e.prototype.initCfg=function(){this.tickMethod="wilkinson-extended",this.nice=!1},e}(_d),Xh=_w;function Qc(i,e){var t=Math.E,r;return e>=0?r=Math.pow(t,Math.log(e)/i):r=Math.pow(t,Math.log(-e)/i)*-1,r}function Bu(i,e){return i===1?1:Math.log(e)/Math.log(i)}function f0(i,e,t){(0,v.isNil)(t)&&(t=Math.max.apply(null,i));var r=t;return(0,v.each)(i,function(n){n>0&&n<r&&(r=n)}),r===t&&(r=t/e),r>1&&(r=1),r}function c0(i){var e=i.toString().split(/[eE]/),t=(e[0].split(".")[1]||"").length-+(e[1]||0);return t>0?t:0}function tS(i,e){var t=c0(i),r=c0(e),n=Math.pow(10,Math.max(t,r));return(i*n+e*n)/n}var Sw=function(i){(0,g.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="log",t}return e.prototype.invert=function(t){var r=this.base,n=Bu(r,this.max),a=this.rangeMin(),o=this.rangeMax()-a,s,u=this.positiveMin;if(u){if(t===0)return 0;s=Bu(r,u/r);var f=1/(n-s)*o;if(t<f)return t/f*u}else s=Bu(r,this.min);var c=(t-a)/o,l=c*(n-s)+s;return Math.pow(r,l)},e.prototype.initCfg=function(){this.tickMethod="log",this.base=10,this.tickCount=6,this.nice=!0},e.prototype.setDomain=function(){i.prototype.setDomain.call(this);var t=this.min;if(t<0)throw new Error("When you use log scale, the minimum value must be greater than zero!");t===0&&(this.positiveMin=f0(this.values,this.base,this.max))},e.prototype.getScalePercent=function(t){var r=this.max,n=this.min;if(r===n||t<=0)return 0;var a=this.base,o=this.positiveMin;o&&(n=o*1/a);var s;return t<o?s=t/o/(Bu(a,r)-Bu(a,n)):s=(Bu(a,t)-Bu(a,n))/(Bu(a,r)-Bu(a,n)),s},e}(_d),Mw=Sw,Aw=function(i){(0,g.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="pow",t}return e.prototype.invert=function(t){var r=this.getInvertPercent(t),n=this.exponent,a=Qc(n,this.max),o=Qc(n,this.min),s=r*(a-o)+o,u=s>=0?1:-1;return Math.pow(s,n)*u},e.prototype.initCfg=function(){this.tickMethod="pow",this.exponent=2,this.tickCount=5,this.nice=!0},e.prototype.getScalePercent=function(t){var r=this.max,n=this.min;if(r===n)return 0;var a=this.exponent,o=(Qc(a,t)-Qc(a,n))/(Qc(a,r)-Qc(a,n));return o},e}(_d),Cw=Aw,Tw=function(i){(0,g.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="time",t}return e.prototype.getText=function(t,r){var n=this.translate(t),a=this.formatter;return a?a(n,r):s0(n,this.mask)},e.prototype.scale=function(t){var r=t;return((0,v.isString)(r)||(0,v.isDate)(r))&&(r=this.translate(r)),i.prototype.scale.call(this,r)},e.prototype.translate=function(t){return Ed(t)},e.prototype.initCfg=function(){this.tickMethod="time-pretty",this.mask="YYYY-MM-DD",this.tickCount=7,this.nice=!1},e.prototype.setDomain=function(){var t=this.values,r=this.getConfig("min"),n=this.getConfig("max");if((!(0,v.isNil)(r)||!(0,v.isNumber)(r))&&(this.min=this.translate(this.min)),(!(0,v.isNil)(n)||!(0,v.isNumber)(n))&&(this.max=this.translate(this.max)),t&&t.length){var a=[],o=1/0,s=o,u=0;(0,v.each)(t,function(f){var c=Ed(f);if(isNaN(c))throw new TypeError("Invalid Time: "+f+" in time scale!");o>c?(s=o,o=c):s>c&&(s=c),u<c&&(u=c),a.push(c)}),t.length>1&&(this.minTickInterval=s-o),(0,v.isNil)(r)&&(this.min=o),(0,v.isNil)(n)&&(this.max=u)}},e}(Xh),Iw=Tw,kw=function(i){(0,g.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="quantize",t}return e.prototype.invert=function(t){var r=this.ticks,n=r.length,a=this.getInvertPercent(t),o=Math.floor(a*(n-1));if(o>=n-1)return(0,v.last)(r);if(o<0)return(0,v.head)(r);var s=r[o],u=r[o+1],f=o/(n-1),c=(o+1)/(n-1);return s+(a-f)/(c-f)*(u-s)},e.prototype.initCfg=function(){this.tickMethod="r-pretty",this.tickCount=5,this.nice=!0},e.prototype.calculateTicks=function(){var t=i.prototype.calculateTicks.call(this);return this.nice||((0,v.last)(t)!==this.max&&t.push(this.max),(0,v.head)(t)!==this.min&&t.unshift(this.min)),t},e.prototype.getScalePercent=function(t){var r=this.ticks;if(t<(0,v.head)(r))return 0;if(t>(0,v.last)(r))return 1;var n=0;return(0,v.each)(r,function(a,o){if(t>=a)n=o;else return!1}),n/(r.length-1)},e}(_d),l0=kw,Lw=function(i){(0,g.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="quantile",t}return e.prototype.initCfg=function(){this.tickMethod="quantile",this.tickCount=5,this.nice=!0},e}(l0),Nw=Lw,h0={};function Ow(i){return h0[i]}function Df(i,e){if(Ow(i))throw new Error("type '"+i+"' existed.");h0[i]=e}var Dw=function(i){(0,g.__extends)(e,i);function e(){var t=i!==null&&i.apply(this,arguments)||this;return t.type="identity",t.isIdentity=!0,t}return e.prototype.calculateTicks=function(){return this.values},e.prototype.scale=function(t){return this.values[0]!==t&&(0,v.isNumber)(t)?t:this.range[0]},e.prototype.invert=function(t){var r=this.range;return t<r[0]||t>r[1]?NaN:this.values[0]},e}(Sv),Pw=Dw;function d0(i){var e=i.values,t=i.tickInterval,r=i.tickCount,n=i.showLast;if((0,v.isNumber)(t)){var a=(0,v.filter)(e,function(C,D){return D%t===0}),o=(0,v.last)(e);return n&&(0,v.last)(a)!==o&&a.push(o),a}var s=e.length,u=i.min,f=i.max;if((0,v.isNil)(u)&&(u=0),(0,v.isNil)(f)&&(f=e.length-1),!(0,v.isNumber)(r)||r>=s)return e.slice(u,f+1);if(r<=0||f<=0)return[];for(var c=r===1?s:Math.floor(s/(r-1)),l=[],m=u,w=0;w<r&&!(m>=f);w++)m=Math.min(u+w*c,f),w===r-1&&n?l.push(e[f]):l.push(e[m]);return l}function Rw(i){var e=i.min,t=i.max,r=i.nice,n=i.tickCount,a=new Bw;return a.domain([e,t]),r&&a.nice(n),a.ticks(n)}var Av=5,v0=Math.sqrt(50),p0=Math.sqrt(10),g0=Math.sqrt(2),Bw=function(){function i(){this._domain=[0,1]}return i.prototype.domain=function(e){return e?(this._domain=Array.from(e,Number),this):this._domain.slice()},i.prototype.nice=function(e){var t,r;e===void 0&&(e=Av);var n=this._domain.slice(),a=0,o=this._domain.length-1,s=this._domain[a],u=this._domain[o],f;return u<s&&(t=[u,s],s=t[0],u=t[1],r=[o,a],a=r[0],o=r[1]),f=Sd(s,u,e),f>0?(s=Math.floor(s/f)*f,u=Math.ceil(u/f)*f,f=Sd(s,u,e)):f<0&&(s=Math.ceil(s*f)/f,u=Math.floor(u*f)/f,f=Sd(s,u,e)),f>0?(n[a]=Math.floor(s/f)*f,n[o]=Math.ceil(u/f)*f,this.domain(n)):f<0&&(n[a]=Math.ceil(s*f)/f,n[o]=Math.floor(u*f)/f,this.domain(n)),this},i.prototype.ticks=function(e){return e===void 0&&(e=Av),Fw(this._domain[0],this._domain[this._domain.length-1],e||Av)},i}();function Fw(i,e,t){var r,n=-1,a,o,s;if(e=+e,i=+i,t=+t,i===e&&t>0)return[i];if((r=e<i)&&(a=i,i=e,e=a),(s=Sd(i,e,t))===0||!isFinite(s))return[];if(s>0)for(i=Math.ceil(i/s),e=Math.floor(e/s),o=new Array(a=Math.ceil(e-i+1));++n<a;)o[n]=(i+n)*s;else for(i=Math.floor(i*s),e=Math.ceil(e*s),o=new Array(a=Math.ceil(i-e+1));++n<a;)o[n]=(i-n)/s;return r&&o.reverse(),o}function Sd(i,e,t){var r=(e-i)/Math.max(0,t),n=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,n);return n>=0?(a>=v0?10:a>=p0?5:a>=g0?2:1)*Math.pow(10,n):-Math.pow(10,-n)/(a>=v0?10:a>=p0?5:a>=g0?2:1)}function y0(i,e,t){var r;return t==="ceil"?r=Math.ceil(i/e):t==="floor"?r=Math.floor(i/e):r=Math.round(i/e),r*e}function Cv(i,e,t){var r=y0(i,t,"floor"),n=y0(e,t,"ceil");r=(0,v.fixedBase)(r,t),n=(0,v.fixedBase)(n,t);for(var a=[],o=Math.max((n-r)/(Math.pow(2,12)-1),t),s=r;s<=n;s=s+o){var u=(0,v.fixedBase)(s,o);a.push(u)}return{min:r,max:n,ticks:a}}function Tv(i,e,t){var r,n=i.minLimit,a=i.maxLimit,o=i.min,s=i.max,u=i.tickCount,f=u===void 0?5:u,c=(0,v.isNil)(n)?(0,v.isNil)(e)?o:e:n,l=(0,v.isNil)(a)?(0,v.isNil)(t)?s:t:a;if(c>l&&(r=[c,l],l=r[0],c=r[1]),f<=2)return[c,l];for(var m=(l-c)/(f-1),w=[],C=0;C<f;C++)w.push(c+m*C);return w}function Gw(i){var e=i.min,t=i.max,r=i.tickInterval,n=i.minLimit,a=i.maxLimit,o=Rw(i);return!(0,v.isNil)(n)||!(0,v.isNil)(a)?Tv(i,(0,v.head)(o),(0,v.last)(o)):r?Cv(e,t,r).ticks:o}function Pl(i){return Math.abs(i)<1e-15?i:parseFloat(i.toFixed(15))}var zw=[1,5,2,2.5,4,3],eS=null,m0=Number.EPSILON*100;function Uw(i,e){return(i%e+e)%e}function Xw(i){return Math.round(i*1e12)/1e12}function Yw(i,e,t,r,n,a){var o=(0,v.size)(e),s=(0,v.indexOf)(e,i),u=0,f=Uw(r,a);return(f<m0||a-f<m0)&&r<=0&&n>=0&&(u=1),1-s/(o-1)-t+u}function Ww(i,e,t){var r=(0,v.size)(e),n=(0,v.indexOf)(e,i),a=1;return 1-n/(r-1)-t+a}function Vw(i,e,t,r,n,a){var o=(i-1)/(a-n),s=(e-1)/(Math.max(a,r)-Math.min(t,n));return 2-Math.max(o/s,s/o)}function Hw(i,e){return i>=e?2-(i-1)/(e-1):1}function jw(i,e,t,r){var n=e-i;return 1-.5*(Math.pow(e-r,2)+Math.pow(i-t,2))/Math.pow(.1*n,2)}function Zw(i,e,t){var r=e-i;if(t>r){var n=(t-r)/2;return 1-Math.pow(n,2)/Math.pow(.1*r,2)}return 1}function qw(){return 1}function $w(i,e,t,r,n,a){t===void 0&&(t=5),r===void 0&&(r=!0),n===void 0&&(n=zw),a===void 0&&(a=[.25,.2,.5,.05]);var o=t<0?0:Math.round(t);if(Number.isNaN(i)||Number.isNaN(e)||typeof i!="number"||typeof e!="number"||!o)return{min:0,max:0,ticks:[]};if(e-i<1e-15||o===1)return{min:i,max:e,ticks:[i]};if(e-i>1e148){var s=t||5,u=(e-i)/s;return{min:i,max:e,ticks:Array(s).fill(null).map(function(dn,vn){return Pl(i+u*vn)})}}for(var f={score:-2,lmin:0,lmax:0,lstep:0},c=1;c<1/0;){for(var l=0;l<n.length;l+=1){var m=n[l],w=Ww(m,n,c);if(a[0]*w+a[1]+a[2]+a[3]<f.score){c=1/0;break}for(var C=2;C<1/0;){var D=Hw(C,o);if(a[0]*w+a[1]+a[2]*D+a[3]<f.score)break;for(var U=(e-i)/(C+1)/c/m,$=Math.ceil(Math.log10(U));$<1/0;){var tt=c*m*Math.pow(10,$),it=Zw(i,e,tt*(C-1));if(a[0]*w+a[1]*it+a[2]*D+a[3]<f.score)break;var ct=Math.floor(e/tt)*c-(C-1)*c,_t=Math.ceil(i/tt)*c;if(ct<=_t)for(var s=_t-ct,Bt=0;Bt<=s;Bt+=1){var Pt=ct+Bt,Qt=Pt*(tt/c),ye=Qt+tt*(C-1),ce=tt,Ne=Yw(m,n,c,Qt,ye,ce),$e=jw(i,e,Qt,ye),Rr=Vw(C,o,i,e,Qt,ye),rn=qw(),Vr=a[0]*Ne+a[1]*$e+a[2]*Rr+a[3]*rn;Vr>f.score&&(!r||Qt<=i&&ye>=e)&&(f.lmin=Qt,f.lmax=ye,f.lstep=ce,f.score=Vr)}$+=1}C+=1}}c+=1}var Cr=Pl(f.lmax),Cn=Pl(f.lmin),_n=Pl(f.lstep),Tr=Math.floor(Xw((Cr-Cn)/_n))+1,jr=new Array(Tr);jr[0]=Pl(Cn);for(var l=1;l<Tr;l++)jr[l]=Pl(jr[l-1]+_n);return{min:Math.min(i,(0,v.head)(jr)),max:Math.max(e,(0,v.last)(jr)),ticks:jr}}function Kw(i){var e=i.min,t=i.max,r=i.tickCount,n=i.nice,a=i.tickInterval,o=i.minLimit,s=i.maxLimit,u=$w(e,t,r,n).ticks;return!(0,v.isNil)(o)||!(0,v.isNil)(s)?Tv(i,(0,v.head)(u),(0,v.last)(u)):a?Cv(e,t,a).ticks:u}function Qw(i){var e=i.base,t=i.tickCount,r=i.min,n=i.max,a=i.values,o,s=Bu(e,n);if(r>0)o=Math.floor(Bu(e,r));else{var u=f0(a,e,n);o=Math.floor(Bu(e,u))}for(var f=s-o,c=Math.ceil(f/t),l=[],m=o;m<s+c;m=m+c)l.push(Math.pow(e,m));return r<=0&&l.unshift(0),l}function b0(i,e,t){if(t===void 0&&(t=5),i===e)return{max:e,min:i,ticks:[i]};var r=t<0?0:Math.round(t);if(r===0)return{max:e,min:i,ticks:[]};var n=1.5,a=.5+1.5*n,o=e-i,s=o/r,u=Math.pow(10,Math.floor(Math.log10(s))),f=u;2*u-s<n*(s-f)&&(f=2*u,5*u-s<a*(s-f)&&(f=5*u,10*u-s<n*(s-f)&&(f=10*u)));for(var c=Math.ceil(e/f),l=Math.floor(i/f),m=Math.max(c*f,e),w=Math.min(l*f,i),C=Math.floor((m-w)/f)+1,D=new Array(C),U=0;U<C;U++)D[U]=Pl(w+U*f);return{min:w,max:m,ticks:D}}function Jw(i){var e=i.exponent,t=i.tickCount,r=Math.ceil(Qc(e,i.max)),n=Math.floor(Qc(e,i.min)),a=b0(n,r,t).ticks;return a.map(function(o){var s=o>=0?1:-1;return Math.pow(o,e)*s})}function tE(i,e){var t=i.length*e;return e===1?i[i.length-1]:e===0?i[0]:t%1!==0?i[Math.ceil(t)-1]:i.length%2===0?(i[t-1]+i[t])/2:i[t]}function eE(i){var e=i.tickCount,t=i.values;if(!t||!t.length)return[];for(var r=t.slice().sort(function(s,u){return s-u}),n=[],a=0;a<e;a++){var o=a/(e-1);n.push(tE(r,o))}return n}function rE(i){var e=i.min,t=i.max,r=i.tickCount,n=i.tickInterval,a=i.minLimit,o=i.maxLimit,s=b0(e,t,r).ticks;return!(0,v.isNil)(a)||!(0,v.isNil)(o)?Tv(i,(0,v.head)(s),(0,v.last)(s)):n?Cv(e,t,n).ticks:s}function nE(i){var e=i.min,t=i.max,r=i.minTickInterval,n=i.tickInterval,a=i.tickCount;if(n)a=Math.ceil((t-e)/n);else{n=bw(e,t,a)[1];var o=(t-e)/n,s=o/a;s>1&&(n=n*Math.ceil(s)),r&&n<r&&(n=r)}n=Math.max(Math.floor((t-e)/(Math.pow(2,12)-1)),n);for(var u=[],f=e;f<t+n;f+=n)u.push(f);return u}function aE(i){var e=d0((0,g.__assign)({showLast:!0},i));return e}function Md(i){return new Date(i).getFullYear()}function iE(i){return new Date(i,0,1).getTime()}function Iv(i){return new Date(i).getMonth()}function oE(i,e){var t=Md(i),r=Md(e),n=Iv(i),a=Iv(e);return(r-t)*12+(a-n)%12}function sE(i,e){return new Date(i,e,1).getTime()}function uE(i,e){return Math.ceil((e-i)/hc)}function fE(i,e){return Math.ceil((e-i)/Dl)}function cE(i,e){return Math.ceil((e-i)/(60*1e3))}function lE(i){var e=i.min,t=i.max,r=i.minTickInterval,n=i.tickCount,a=i.tickInterval,o=[];a||(a=(t-e)/n,r&&a<r&&(a=r)),a=Math.max(Math.floor((t-e)/(Math.pow(2,12)-1)),a);var s=Md(e);if(a>u0)for(var u=Md(t),f=Math.ceil(a/u0),c=s;c<=u+f;c=c+f)o.push(iE(c));else if(a>zh)for(var l=Math.ceil(a/zh),m=Iv(e),w=oE(e,t),c=0;c<=w+l;c=c+l)o.push(sE(s,c+m));else if(a>hc)for(var C=new Date(e),D=C.getFullYear(),U=C.getMonth(),$=C.getDate(),tt=Math.ceil(a/hc),it=uE(e,t),c=0;c<it+tt;c=c+tt)o.push(new Date(D,U,$+c).getTime());else if(a>Dl)for(var C=new Date(e),D=C.getFullYear(),U=C.getMonth(),tt=C.getDate(),ct=C.getHours(),_t=Math.ceil(a/Dl),Bt=fE(e,t),c=0;c<=Bt+_t;c=c+_t)o.push(new Date(D,U,tt,ct+c).getTime());else if(a>Ol)for(var Pt=cE(e,t),Qt=Math.ceil(a/Ol),c=0;c<=Pt+Qt;c=c+Qt)o.push(e+c*Ol);else{var ye=a;ye<ef&&(ye=ef);for(var ce=Math.floor(e/ef)*ef,Ne=Math.ceil((t-e)/ef),$e=Math.ceil(ye/ef),c=0;c<Ne+$e;c=c+$e)o.push(ce+c*ef)}return o.length>=512&&console.warn("Notice: current ticks length("+o.length+') >= 512, may cause performance issues, even out of memory. Because of the configure "tickInterval"(in milliseconds, current is '+a+") is too small, increase the value to solve the problem!"),o}Of("cat",d0),Of("time-cat",aE),Of("wilkinson-extended",Kw),Of("r-pretty",rE),Of("time",nE),Of("time-pretty",lE),Of("log",Qw),Of("pow",Jw),Of("quantile",eE),Of("d3-linear",Gw),Df("cat",Fh),Df("category",Fh),Df("identity",Pw),Df("linear",Xh),Df("log",Mw),Df("pow",Cw),Df("time",Iw),Df("timeCat",ww),Df("quantize",l0),Df("quantile",Nw);var hE=function(i,e,t){if(t||arguments.length===2)for(var r=0,n=e.length,a;r<n;r++)(a||!(r in e))&&(a||(a=Array.prototype.slice.call(e,0,r)),a[r]=e[r]);return i.concat(a||Array.prototype.slice.call(e))};function dE(i){return(0,v.map)(i,function(e,t){var r=t===0?"M":"L",n=e[0],a=e[1];return[r,n,a]})}function x0(i){return dE(i)}function vE(i){if(i.length<=2)return x0(i);var e=[];(0,v.each)(i,function(o){(0,v.isEqual)(o,e.slice(e.length-2))||e.push(o[0],o[1])});var t=pr(e,!1),r=(0,v.head)(i),n=r[0],a=r[1];return t.unshift(["M",n,a]),t}function pE(i,e,t,r){r===void 0&&(r=!0);var n=new Xh({values:i}),a=new Fh({values:(0,v.map)(i,function(s,u){return u})}),o=(0,v.map)(i,function(s,u){return[a.scale(u)*e,t-n.scale(s)*t]});return r?vE(o):x0(o)}function gE(i,e,t,r){r===void 0&&(r=5);for(var n=new Xh({values:i}),a=new Fh({values:(0,v.map)(i,function(m,w){return w})}),o=(0,v.map)(i,function(m,w){return[a.scale(w)*e,t-n.scale(m)*t]}),s=[],u=0;u<o.length;u++){var f=o[u],c={x:f[0],y:f[1],y0:t,size:r},l=bE(c);s.push.apply(s,l)}return xE(s)}function yE(i,e){var t=new Xh({values:i}),r=Math.max(0,t.min);return e-t.scale(r)*e}function mE(i,e,t,r){var n=hE([],i,!0),a=yE(r,t);return n.push(["L",e,a]),n.push(["L",0,a]),n.push(["Z"]),n}function bE(i){var e=i.x,t=i.y,r=i.y0,n=i.size,a,o;(0,v.isArray)(t)?(a=t[0],o=t[1]):(a=r,o=t);var s,u;(0,v.isArray)(e)?(s=e[0],u=e[1]):(s=e-n/2,u=e+n/2);var f=[{x:s,y:a},{x:s,y:o}];return f.push({x:u,y:o},{x:u,y:a}),f}function xE(i,e){e===void 0&&(e=!0);var t=[],r=i[0];t.push(["M",r.x,r.y]);for(var n=1,a=i.length;n<a;n++)t.push(["L",i[n].x,i[n].y]);return e&&(t.push(["L",r.x,r.y]),t.push(["z"])),t}var Yh=function(){return Yh=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Yh.apply(this,arguments)},wE={stroke:"#C5C5C5",strokeOpacity:.85},EE={fill:"#CACED4",opacity:.85},_E=function(){function i(e){var t=e.x,r=t===void 0?0:t,n=e.y,a=n===void 0?0:n,o=e.width,s=o===void 0?200:o,u=e.height,f=u===void 0?26:u,c=e.smooth,l=c===void 0?!0:c,m=e.isArea,w=m===void 0?!1:m,C=e.data,D=C===void 0?[]:C,U=e.lineStyle,$=e.areaStyle,tt=e.group,it=e.interval,ct=it===void 0?null:it;this.group=tt,this.x=r,this.y=a,this.width=s,this.height=f,this.data=D,this.smooth=l,this.isArea=w,this.lineStyle=Object.assign({},wE,U),this.areaStyle=Object.assign({},EE,$),this.intervalConfig=ct,this.renderLine()}return i.prototype.renderLine=function(){var e=this,t=e.x,r=e.y,n=e.width,a=e.height,o=e.barWidth,s=e.data,u=e.smooth,f=e.isArea,c=e.lineStyle,l=e.areaStyle,m=this.group.addGroup({name:"trend-group"});if(s){var w=pE(s,n,a,u);if(m.addShape("path",{attrs:Yh({path:w},c),name:"trend-line"}),f){var C=mE(w,n,a,s);m.addShape("path",{attrs:Yh({path:C},l),name:"trend-area"})}}this.intervalConfig&&m.addShape("path",{attrs:Yh({path:gE(this.intervalConfig.data,n,a,this.intervalConfig.style.barWidth)},this.intervalConfig.style),name:"trend-interval"}),m.move(t,r)},i.prototype.destory=function(){this.group.destroy()},i}(),SE=_E,vh=function(){return vh=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},vh.apply(this,arguments)},ME={fill:"#1890ff",stroke:"#1890ff",type:"trend",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#0050b3"},AE={fill:"#fff",stroke:"#1890ff",radius:2,opacity:1,cursor:"ew-resize",highLightFill:"#0050b3"},CE=function(){function i(e){var t=e.group,r=e.name,n=e.type,a=e.x,o=a===void 0?0:a,s=e.y,u=s===void 0?0:s,f=e.width,c=f===void 0?2:f,l=e.height,m=l===void 0?24:l,w=e.style,C=w===void 0?{}:w;this.group=t,this.name=r,this.handleType=n,this.x=o,this.y=u,this.width=c,this.height=m,n==="trend"?this.style=vh(vh({},ME),C):n==="simple"&&(this.style=vh(vh({},AE),C)),this.renderHandle()}return i.prototype.setX=function(e){this.setXY(e,void 0)},i.prototype.setY=function(e){this.setXY(void 0,e)},i.prototype.setXY=function(e,t){(0,v.isNumber)(e)&&(this.x=e),(0,v.isNumber)(t)&&(this.y=t),this.updateXY()},i.prototype.renderHandle=function(){var e=this,t=e.width,r=e.height,n=e.style,a=e.name,o=n.fill,s=n.stroke,u=n.radius,f=n.opacity,c=n.cursor;this.handleGroup=this.group.addGroup(),this.handleType==="trend"?(this.verticalLine=this.handleGroup.addShape("rect",{attrs:{x:0,y:0,width:t,height:r,fill:o,stroke:s,radius:u,opacity:f,cursor:c},name:"".concat(a,"-handler")}),this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:0,r:2*t,fill:o,stroke:s,radius:u,opacity:f,cursor:c,lineAppendWidth:12},name:"".concat(a,"-handler")}),this.bottomCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:r,r:2*t,fill:o,stroke:s,radius:u,opacity:f,cursor:c},name:"".concat(a,"-handler")})):this.handleType==="simple"&&(this.topCircle=this.handleGroup.addShape("circle",{attrs:{x:t/2,y:r/2,r:2*t,fill:o,stroke:s,radius:u,opacity:f,cursor:c,lineWidth:2},name:"".concat(a,"-handler")})),this.updateXY(),this.handleType==="trend"?this.bindTrendEvents():this.handleType==="simple"&&this.bindSimpleEvents()},i.prototype.bindSimpleEvents=function(){var e=this,t=this.name;this.handleGroup.on("".concat(t,"-handler:mouseenter"),function(){var r=e.style.highLightFill;e.topCircle.attr("fill",r)}),this.handleGroup.on("".concat(t,"-handler:mouseleave"),function(){var r=e.style.fill;e.topCircle.attr("fill",r)})},i.prototype.bindTrendEvents=function(){var e=this,t=this.name;this.handleGroup.on("".concat(t,"-handler:mouseenter"),function(){var r=e.style.highLightFill;e.verticalLine.attr("fill",r),e.topCircle.attr("fill",r),e.bottomCircle.attr("fill",r)}),this.handleGroup.on("".concat(t,"-handler:mouseleave"),function(){var r=e.style.fill;e.verticalLine.attr("fill",r),e.topCircle.attr("fill",r),e.bottomCircle.attr("fill",r)})},i.prototype.show=function(){this.handleGroup.show()},i.prototype.hide=function(){this.handleGroup.hide()},i.prototype.updateXY=function(){this.handleGroup.setMatrix([1,0,0,0,1,0,this.x,this.y,1])},i}(),w0=CE,Ki=function(){return Ki=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Ki.apply(this,arguments)},TE=Ht,IE={fill:"#416180",opacity:.05},kE={fill:"#416180",opacity:.15,radius:5},LE={fill:"#5B8FF9",opacity:.3,cursor:"grab"},kv=2,NE={width:kv,height:24},OE={textBaseline:"middle",fill:"#000",opacity:.45},DE={textAlign:"center",textBaseline:"top",fill:"#607889",opacity:.35},PE={lineWidth:1,stroke:"#ccc"},RE=function(){function i(e){var t=this;this.prevX=0,this.onMouseDown=function(dn){return function(vn){t.currentHandler=dn;var Pn=vn.originalEvent;Pn.stopPropagation(),Pn.preventDefault(),t.prevX=(0,v.get)(Pn,"touches.0.pageX",Pn.pageX);var Wn=t.canvas.get("container");Wn.addEventListener("mousemove",t.onMouseMove),Wn.addEventListener("mouseup",t.onMouseUp),Wn.addEventListener("mouseleave",t.onMouseUp),Wn.addEventListener("touchmove",t.onMouseMove),Wn.addEventListener("touchend",t.onMouseUp),Wn.addEventListener("touchcancel",t.onMouseUp)}},this.onMouseMove=function(dn){dn.stopPropagation(),dn.preventDefault();var vn=(0,v.get)(dn,"touches.0.pageX",dn.pageX),Pn=vn-t.prevX,Wn=t.adjustOffsetRange(Pn/t.width);t.updateStartEnd(Wn),t.updateUI(),t.prevX=vn},this.onMouseUp=function(){t.currentHandler&&(t.currentHandler=void 0);var dn=t.canvas.get("container");dn&&(dn.removeEventListener("mousemove",t.onMouseMove),dn.removeEventListener("mouseup",t.onMouseUp),dn.removeEventListener("mouseleave",t.onMouseUp),dn.removeEventListener("touchmove",t.onMouseMove),dn.removeEventListener("touchend",t.onMouseUp),dn.removeEventListener("touchcancel",t.onMouseUp))};var r=e.x,n=r===void 0?0:r,a=e.y,o=a===void 0?0:a,s=e.width,u=s===void 0?100:s,f=e.height,c=e.padding,l=c===void 0?10:c,m=e.trendCfg,w=e.controllerCfg,C=w===void 0?{speed:1}:w,D=e.backgroundStyle,U=D===void 0?{}:D,$=e.foregroundStyle,tt=$===void 0?{}:$,it=e.handlerStyle,ct=it===void 0?{}:it,_t=e.textStyle,Bt=_t===void 0?{}:_t,Pt=e.start,Qt=Pt===void 0?0:Pt,ye=e.end,ce=ye===void 0?1:ye,Ne=e.minText,$e=Ne===void 0?"":Ne,Rr=e.maxText,rn=Rr===void 0?"":Rr,Vr=e.group,Cr=e.graph,Cn=e.canvas,_n=e.tick,Tr=_n===void 0?{tickLabelStyle:{},tickLineStyle:{},tickLabelFormatter:function(vn){return vn},ticks:[]}:_n,jr=e.type;this.graph=Cr,this.canvas=Cn,this.group=Vr,this.timeBarType=jr,this.x=n,this.y=o,this.width=u,this.height=f,this.padding=l,this.ticks=Tr.ticks,this.trendCfg=m,this.controllerCfg=C,this.currentSpeed=C.speed||1,this.tickLabelFormatter=Tr.tickLabelFormatter,jr==="trend"?this.backgroundStyle=Ki(Ki({},IE),U):jr==="simple"&&(this.backgroundStyle=Ki(Ki({},kE),U)),this.foregroundStyle=Ki(Ki({},LE),tt),this.handlerStyle=Ki(Ki({},NE),ct),this.textStyle=Ki(Ki({},OE),Bt),this.tickLabelStyle=Ki(Ki({},DE),Tr.tickLabelStyle),this.tickLineStyle=Ki(Ki({},PE),Tr.tickLineStyle),this.currentMode=C.defaultTimeType||Nf.RANGE,this.start=Qt,this.end=ce,this.minText=$e,this.maxText=rn,this.fontFamily=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif",this.renderSlider()}return i.prototype.update=function(e){var t=e.x,r=e.y,n=e.width,a=e.height,o=e.minText,s=e.maxText,u=e.start,f=e.end;this.start=Math.min(1,Math.max(u,0)),this.end=Math.min(1,Math.max(f,0)),(0,v.assign)(this,{x:t,y:r,width:n,height:a,minText:o,maxText:s}),this.updateUI()},i.prototype.setText=function(e,t){this.minTextShape.attr("text",e),this.maxTextShape.attr("text",t)},i.prototype.renderSlider=function(){var e=this,t=this,r=t.width,n=t.height,a=t.timeBarType;if(a==="trend"&&(0,v.size)((0,v.get)(this.trendCfg,"data"))){var o=new SE(Ki(Ki({x:this.x,y:this.y,width:r,height:n},this.trendCfg),{group:this.group}));this.trendComponent=o}var s=this.group.addGroup({name:"slider-group"});s.addShape("rect",{attrs:Ki({x:0,y:0,width:r,height:n},this.backgroundStyle),name:"background"});var u=this.group.addGroup();a==="trend"?(this.minTextShape=u.addShape("text",{attrs:Ki({x:0,y:n/2+this.y,textAlign:"right",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"min-text-shape"}),this.maxTextShape=u.addShape("text",{attrs:Ki({y:n/2+this.y,textAlign:"left",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"max-text-shape"})):(this.minTextShape=u.addShape("text",{attrs:Ki({x:0,y:this.y-10,textAlign:"center",text:this.minText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"min-text-shape"}),this.maxTextShape=u.addShape("text",{attrs:Ki({y:this.y-10,textAlign:"center",text:this.maxText,silent:!1,fontFamily:this.fontFamily||"Arial, sans-serif",stroke:"#fff",lineWidth:5},this.textStyle),capture:!1,name:"max-text-shape"})),this.foregroundShape=this.group.addGroup().addShape("rect",{attrs:Ki({x:0,y:this.y,height:n},this.foregroundStyle),name:"foreground-shape"}),this.foregroundShape.on("mousedown",function($){$.target.attr("cursor","grabbing")}),this.foregroundShape.on("mouseup",function($){$.target.attr("cursor",e.foregroundStyle.cursor||"grab")});var f=(0,v.get)(this.handlerStyle,"width",2),c=(0,v.get)(this.handlerStyle,"height",24),l=this.group.addGroup({name:"minHandlerShape"});this.minHandlerShape=new w0({name:"minHandlerShape",group:l,type:a,x:this.x,y:this.y,width:f,height:c,style:this.handlerStyle});var m=this.group.addGroup({name:"maxHandlerShape"});this.maxHandlerShape=new w0({name:"maxHandlerShape",group:m,type:a,x:this.x,y:this.y,width:f,height:c,style:this.handlerStyle});var w=this.ticks,C=r/(w.length-1);this.tickPosList=[],this.textList&&this.textList.length&&this.textList.forEach(function($){$.destroy()});var D=-1/0,U=this.tickLabelStyle.rotate;delete this.tickLabelStyle.rotate,this.textList=w.map(function($,tt){e.tickPosList.push(e.x+tt*C);var it;e.tickLabelFormatter?(it=e.tickLabelFormatter($),!(0,v.isString)(it)&&it&&(it=$.date)):it=$.date;var ct=e.x+tt*C,_t=e.y+n+5,Bt=e.group.addShape("text",{attrs:Ki({x:ct,y:_t,text:it,fontFamily:e.fontFamily||"Arial, sans-serif"},e.tickLabelStyle),name:"tick-label"});if((0,v.isNumber)(U)&&tt!==w.length-1){var Pt=TE([1,0,0,0,1,0,0,0,1],[["t",-ct,-_t],["r",U],["t",ct-5,_t+2]]);Bt.attr({textAlign:"left",matrix:Pt})}tt===0?Bt.attr({textAlign:"left"}):tt!==w.length-1&&Bt.attr({textAlign:"right"});var Qt=e.group.addShape("line",{attrs:Ki({x1:e.x+tt*C,y1:e.y+n+2,x2:e.x+tt*C,y2:e.y+n+6},e.tickLineStyle),name:"tick-line"});Qt.toBack();var ye=Bt.getBBox();return ye.minX>D?(Bt.show(),Qt.show(),D=ye.minX+ye.width+10):(Bt.hide(),Qt.hide()),Bt}),this.controllerBtnGroup=new Ug(Ki({group:this.group,x:this.x,y:this.y+n+25,width:r,height:35},this.controllerCfg)),this.updateStartEnd(0),this.updateUI(),s.move(this.x,this.y),this.bindEvents(),this.currentMode===Nf.SINGLE&&(this.minHandlerShape.hide(),this.foregroundShape.hide(),this.minTextShape.hide())},i.prototype.bindEvents=function(){var e=this,t=this.group.find(function(n){return n.get("name")==="minHandlerShape"});t&&(t.on("minHandlerShape-handler:mousedown",this.onMouseDown(this.minHandlerShape)),t.on("minHandlerShape-handler:touchstart",this.onMouseDown(this.minHandlerShape)));var r=this.group.find(function(n){return n.get("name")==="maxHandlerShape"});r&&(r.on("maxHandlerShape-handler:mousedown",this.onMouseDown(this.maxHandlerShape)),r.on("maxHandlerShape-handler:touchstart",this.onMouseDown(this.maxHandlerShape))),this.foregroundShape.on("mousedown",this.onMouseDown(this.foregroundShape)),this.foregroundShape.on("touchstart",this.onMouseDown(this.foregroundShape)),this.group.on("".concat(jc,":click"),function(){e.isPlay=!e.isPlay,e.currentHandler=e.maxHandlerShape,e.changePlayStatus()}),this.group.on("".concat(Dh,":click"),function(){e.currentHandler=e.maxHandlerShape,e.updateStartEnd(.01),e.updateUI()}),this.group.on("".concat(Ph,":click"),function(){e.currentHandler=e.maxHandlerShape,e.updateStartEnd(-.01),e.updateUI()}),this.group.on(Nl,function(n){var a=n.type,o=n.speed;e.currentSpeed=o,e.currentMode=a,a===Nf.SINGLE?(e.minHandlerShape.hide(),e.foregroundShape.hide(),e.minTextShape.hide()):a===Nf.RANGE&&(e.minHandlerShape.show(),e.foregroundShape.show(),e.minTextShape.show())})},i.prototype.adjustTickIndex=function(e){for(var t=0;t<this.tickPosList.length-1;t++)if(this.tickPosList[t]<=e&&e<=this.tickPosList[t+1])return Math.abs(this.tickPosList[t]-e)<Math.abs(e-this.tickPosList[t+1])?t:t+1;return 0},i.prototype.adjustOffsetRange=function(e){switch(this.currentHandler){case this.minHandlerShape:{var t=0-this.start,r=1-this.start;return Math.min(r,Math.max(t,e))}case this.maxHandlerShape:{var t=0-this.end,r=1-this.end;return Math.min(r,Math.max(t,e))}case this.foregroundShape:{var t=0-this.start,r=1-this.end;return Math.min(r,Math.max(t,e))}default:return 0}},i.prototype.updateStartEnd=function(e){var t=this.ticks[this.adjustTickIndex(this.start*this.width)],r=this.ticks[this.adjustTickIndex(this.end*this.width)];if(!this.currentHandler){this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):t==null?void 0:t.date,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(r):r==null?void 0:r.date;return}switch(this.currentHandler){case this.minHandlerShape:this.maxText=this.maxTextShape.attr("text"),this.start+=e,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):t.date;break;case this.maxHandlerShape:this.minText=this.minTextShape.attr("text"),this.end+=e,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(r):r.date;break;case this.foregroundShape:this.start+=e,this.end+=e,this.minText=this.tickLabelFormatter?this.tickLabelFormatter(t):t.date,this.maxText=this.tickLabelFormatter?this.tickLabelFormatter(r):r.date;break;default:break}},i.prototype.updateUI=function(){var e=this;this.start<0&&(this.start=0),this.start>1&&(this.start=1),this.end>1&&(this.end=1),this.end<0&&(this.end=0);var t=this.x+this.start*this.width,r=this.x+this.end*this.width;this.foregroundShape.attr("x",t),this.foregroundShape.attr("width",r-t);var n=(0,v.get)(this.handlerStyle,"width",kv);this.setText(this.minText,this.maxText);var a=this.dodgeText([t,r]),o=a[0],s=a[1];this.minHandlerShape.setX(t-n/2),(0,v.each)(o,function(u,f){return e.minTextShape.attr(f,u)}),this.maxHandlerShape.setX(r-n/2),(0,v.each)(s,function(u,f){return e.maxTextShape.attr(f,u)}),this.currentMode===Nf.RANGE?this.graph.emit(Lf,{value:[this.start,this.end].sort()}):this.currentMode===Nf.SINGLE&&this.graph.emit(Lf,{value:[this.end,this.end]})},i.prototype.dodgeText=function(e){var t,r,n=2,a=(0,v.get)(this.handlerStyle,"width",kv),o=this.minTextShape,s=this.maxTextShape,u=e[0],f=e[1],c=!1;u>f&&(t=[f,u],u=t[0],f=t[1],r=[s,o],o=r[0],s=r[1],c=!0);var l=o.getBBox(),m=s.getBBox(),w=null,C=null;return this.timeBarType==="trend"?(w=u-l.width<this.x+n?{x:u+a/2+n,textAlign:"left"}:{x:u-a/2-n,textAlign:"right"},C=f+m.width>this.x+this.width?{x:f-a/2-n,textAlign:"right"}:{x:f+a/2+n,textAlign:"left"}):this.timeBarType==="simple"&&(w=o.attr("x")>l.width?{x:u,textAlign:"center"}:{x:u,textAlign:"left"},C=s.attr("x")>this.width-m.width?{x:f,textAlign:"right"}:{x:f,textAlign:"center"}),c?[C,w]:[w,C]},i.prototype.startPlay=function(){var e=this;return typeof window!="undefined"?window.requestAnimationFrame(function(){var t=e,r=t.ticks,n=t.width,a=e.currentSpeed,o=n/r.length,s=o/((10-a)*1e3/60),u=e.adjustOffsetRange(s/e.width);e.updateStartEnd(u),e.updateUI(),e.isPlay&&(e.playHandler=e.startPlay())}):void 0},i.prototype.changePlayStatus=function(e){e===void 0&&(e=!0),this.controllerBtnGroup.playButton.update({isPlay:this.isPlay}),this.isPlay?(this.playHandler=this.startPlay(),this.graph.emit(Bg,null)):this.playHandler&&(typeof window!="undefined"&&window.cancelAnimationFrame(this.playHandler),e&&this.graph.emit(Fg,null))},i.prototype.destory=function(){this.graph.off(Lf,function(){});var e=this.group,t=e.find(function(n){return n.get("name")==="minHandlerShape"});t&&(t.off("minHandlerShape-handler:mousedown"),t.off("minHandlerShape-handler:touchstart"),t.destroy());var r=e.find(function(n){return n.get("name")==="maxHandlerShape"});r&&(r.off("maxHandlerShape-handler:mousedown"),r.off("maxHandlerShape-handler:touchstart"),r.destroy()),this.foregroundShape.off("mousedown"),this.foregroundShape.off("touchstart"),this.foregroundShape.destroy(),e.off("".concat(jc,":click")),e.off("".concat(Dh,":click")),e.off("".concat(Ph,":click")),e.off(Nl),e.destroy(),this.trendComponent&&this.trendComponent.destory()},i}(),BE=RE,FE=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),dc=function(){return dc=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},dc.apply(this,arguments)},GE=function(i,e){var t={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&e.indexOf(r)<0&&(t[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(i);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(i,r[n])&&(t[r[n]]=i[r[n]]);return t},zE=4,UE=26,XE=function(i){FE(e,i);function e(t){var r=i.call(this,t)||this;return r.afterrenderListener=function(n){return r.filterData({})},r.valueChangeListener=(0,v.throttle)(function(n){return r.filterData(n)},200,{trailing:!0,leading:!0}),r.changeData=function(n){var a=r.get("graph");r.cacheGraphData=a.get("data"),r.filterData({})},r}return e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-component-timebar",padding:10,type:"trend",trend:{data:[],isArea:!1,smooth:!0},controllerCfg:{speed:1,loop:!1},slider:{start:.1,end:.9,minText:"min",maxText:"max"},tick:{start:.1,end:.9,data:[]},textStyle:{},filterEdge:!1,filterItemTypes:["node"],containerCSS:{},putInGraphContainer:!0}},e.prototype.initContainer=function(){var t=this.get("graph"),r=this._cfgs,n=r.width,a=r.height,o=r.putInGraphContainer,s=this.get("className")||"g6-component-timebar",u=this.get("container"),f;if(u?((0,v.isString)(u)&&(u=document.getElementById(u)),f=u):(f=no("<div class='".concat(s,"'></div>")),Wa(f,{position:"relative"})),o){var c=this.get("graph").get("container");c.appendChild(f)}this.set("timeBarContainer",f);var l,m=t.get("renderer");m==="SVG"?l=new kh({container:f,width:n,height:a}):l=new fc({container:f,width:n,height:a}),this.get("containerCSS")&&Wa(f,this.get("containerCSS")),this.set("canvas",l)},e.prototype.init=function(){this.initContainer();var t=this.get("canvas"),r=t.addGroup({name:"timebar-group"});this.set("timeBarGroup",r),this.renderTrend(),this.initEvent();var n=typeof window!="undefined"&&window.getComputedStyle(document.body,null).getPropertyValue("font-family")||"Arial, sans-serif";this.set("fontFamily",n)},e.prototype.play=function(){this.togglePlay(!0)},e.prototype.pause=function(){this.togglePlay(!1)},e.prototype.togglePlay=function(t){var r=this.get("timebar");r&&(r.isPlay=!!t,r.changePlayStatus())},e.prototype.renderTrend=function(){var t=this,r=this._cfgs,n=r.width,a=r.x,o=r.y,s=r.padding,u=r.type,f=r.trend,c=r.slider,l=r.controllerCfg,m=r.textStyle,w=r.tick,C=r.backgroundStyle,D=r.foregroundStyle,U=f.data,$=GE(f,["data"]),tt=n-2*s,it=u==="trend"?UE:zE,ct=this.get("graph"),_t=this.get("timeBarGroup"),Bt=this.get("canvas"),Pt=null;if(u==="trend"||u==="simple"){var Qt=this.get("getValue");Pt=new BE(dc(dc({graph:ct,canvas:Bt,group:_t,type:u,x:a+s,y:u==="trend"?o+s:o+s+15,width:tt,height:it,padding:s,backgroundStyle:C,foregroundStyle:D,trendCfg:dc(dc({},$),{data:U.map(function(ce){return(Qt==null?void 0:Qt(ce))||ce.value})})},c),{tick:{ticks:U,tickLabelFormatter:w.tickLabelFormatter,tickLabelStyle:w.tickLabelStyle,tickLineStyle:w.tickLineStyle},handlerStyle:dc(dc({},c.handlerStyle),{height:c.height||it}),controllerCfg:l,textStyle:m}))}else u==="tick"&&(Pt=new sw(dc({graph:ct,canvas:Bt,group:_t,x:a+s,y:o+s,width:n,height:42,padding:2,controllerCfg:l},w)));var ye=function ce(){var Ne=t.get("timebar");Ne.draggingHandler=!1,Ne.isPlay&&(Ne.isPlay=!1,Ne.currentHandler=Ne.maxHandlerShape,Ne.changePlayStatus()),document.removeEventListener("mouseup",ce)};Bt.on("mousedown",function(ce){(ce.target.get("name")==="maxHandlerShape-handler"||ce.target.get("name")==="minHandlerShape-handler"||ce.target===Pt.foregroundShape)&&document.addEventListener("mouseup",ye)}),this.set("timebar",Pt)},e.prototype.filterData=function(t){var r,n=t.value;if(!n){n=[];var a=this._cfgs.type;!a||a==="trend"||a==="simple"?(n[0]=this._cfgs.slider.start,n[1]=this._cfgs.slider.end):a==="tick"&&(n[0]=this._cfgs.tick.start,n[1]=this._cfgs.tick.end)}var o=null,s=this._cfgs.type;if(s==="trend"||s==="simple"?o=this._cfgs.trend.data:s==="tick"&&(o=this._cfgs.tick.data),!o||o.length===0){console.warn("\u8BF7\u914D\u7F6E TimeBar \u7EC4\u4EF6\u7684\u6570\u636E");return}var u=this.get("rangeChange"),f=this.get("graph"),c=Math.round(o.length*n[0]),l=Math.round(o.length*n[1]);l=l>=o.length?o.length-1:l,c=c>=o.length?o.length-1:c;var m=(r=this._cfgs.tick)===null||r===void 0?void 0:r.tickLabelFormatter,w=m?m(o[c]):o[c].date,C=m?m(o[l]):o[l].date;if(s!=="tick"){var D=this.get("timebar");D.setText(w,C)}if(u)u(f,w,C);else{(!this.cacheGraphData||this.cacheGraphData.nodes&&this.cacheGraphData.nodes.length===0)&&(this.cacheGraphData=f.get("data"));var U=this.get("filterItemTypes"),$=this.get("changeData"),tt=this.get("getDate"),it=this.get("shouldIgnore"),ct=o[c].date,_t=o[l].date;if($||$===void 0){var Bt=this.cacheGraphData.nodes,Pt=this.cacheGraphData.edges,Qt={},ye={};f.getNodes().forEach(function(ce){return Qt[ce.getID()]=!0}),f.getEdges().forEach(function(ce){return ye[ce.getID()]=!0}),U.includes("node")&&(Bt==null||Bt.forEach(function(ce){var Ne=+((tt==null?void 0:tt(ce))||ce.date),$e=Ne>=ct&&Ne<=_t||(it==null?void 0:it("node",ce,{min:ct,max:_t})),Rr=Qt[ce.id];Rr&&!$e?(f.removeItem(ce.id),Qt[ce.id]=!1):!Rr&&$e&&(f.addItem("node",ce),Qt[ce.id]=!0)}),Pt==null||Pt.forEach(function(ce){var Ne=Qt[ce.source]&&Qt[ce.target]||(it==null?void 0:it("edge",ce,{min:ct,max:_t})),$e=!!f.findById(ce.id);$e&&!Ne?(f.removeItem(ce.id),ye[ce.id]=!1):!$e&&Ne?(f.addItem("edge",ce),ye[ce.id]=!0):$e||(ye[ce.id]=!1)})),(this.get("filterEdge")||U.includes("edge"))&&(Pt==null||Pt.filter(function(ce){var Ne=+((tt==null?void 0:tt(ce))||ce.date),$e=Ne>=ct&&Ne<=_t||(it==null?void 0:it("edge",ce,{min:ct,max:_t})),Rr=Qt[ce.source]&&Qt[ce.target],rn=$e&&Rr,Vr=ye[ce.id];Vr&&!rn?(ye[ce.id]=!1,f.removeItem(ce.id)):!Vr&&rn&&(ye[ce.id]=!0,f.addItem("edge",ce))}))}else U.includes("node")&&f.getNodes().forEach(function(ce){var Ne=ce.getModel();if(!(it!=null&&it("node",Ne,{min:ct,max:_t}))){var $e=+((tt==null?void 0:tt(Ne))||Ne.date);$e<ct||$e>_t?f.hideItem(ce):f.showItem(ce)}}),(this.get("filterEdge")||U.includes("edge"))&&f.getEdges().forEach(function(ce){var Ne=ce.getModel();if(!(it!=null&&it("edge",Ne,{min:o[c].date,max:o[l].date}))){var $e=+((tt==null?void 0:tt(Ne))||Ne.date);if($e<o[c].date||$e>o[l].date)f.hideItem(ce);else{var Rr=ce.getSource().isVisible(),rn=ce.getTarget().isVisible();Rr&&rn&&f.showItem(ce)}}})}},e.prototype.initEvent=function(){var t=this.get("graph");t.on("afterchangedata",this.changeData),t.on("afterrender",this.afterrenderListener),t.on(Lf,this.valueChangeListener)},e.prototype.destroy=function(){var t=this.get("graph");t.off("afterchangedata",this.changeData),t.off("afterrender",this.afterrenderListener),t.off(Lf,this.valueChangeListener);var r=this.get("timebar");r&&r.destory&&r.destory(),i.prototype.destroy.call(this);var n=this.get("timeBarContainer");if(n){var a=this.get("container");a||(a=this.get("graph").get("container")),(0,v.isString)(a)&&(a=document.getElementById(a)),a===n&&(a=a.parentElement),a.removeChild(n)}},e}(au),YE=XE,WE=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),VE=Ns.applyMatrix;function HE(i,e){var t,r;if(i.naturalWidth)t=i.naturalWidth,r=i.naturalHeight;else{var n=new Image;n.src=i.src,n.onload=function(){e&&e(n.width,n.height)}}return[t,r]}var jE=function(i){WE(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{container:null,className:"g6-minimap",viewportClassName:"g6-minimap-viewport",width:200,delegateStyle:{fill:"#40a9ff",stroke:"#096dd9"},refresh:!0}},e.prototype.getEvents=function(){return{beforepaint:"updateViewport",beforeanimate:"disableRefresh",afteranimate:"enableRefresh",viewportchange:"disableOneRefresh"}},e.prototype.disableRefresh=function(){this.set("refresh",!1)},e.prototype.enableRefresh=function(){this.set("refresh",!0),this.updateCanvas()},e.prototype.disableOneRefresh=function(){this.set("viewportChange",!0)},e.prototype.initViewport=function(){var t=this,r=this._cfgs,n=r.graph;if(!this.destroyed){var a=this.get("container");(0,v.isString)(a)&&(a=document.getElementById(a));var o=no("<div class=".concat(r.viewportClassName,`
      style='position:absolute;
        left:0;
        top:0;
        box-sizing:border-box;
        border: 2px solid #1980ff;
        cursor:move'
      </div>`)),s=0,u=0,f=!1,c=0,l=0,m=0,w=0,C=0,D=0;a.addEventListener("mousedown",function(U){if(r.refresh=!1,U.target===o){var $=o.style;m=parseInt($.width,10),w=parseInt($.height,10);var tt=t.get("width"),it=t.get("height");m>tt||w>it||(D=n.getZoom(),C=t.get("ratio"),f=!0,s=U.clientX,u=U.clientY)}},!1),a.addEventListener("mousemove",function(U){if(!(!f||(0,v.isNil)(U.clientX)||(0,v.isNil)(U.clientY))){var $=t.get("width"),tt=t.get("height"),it=o.style;c=parseInt(it.left,10),l=parseInt(it.top,10),m=parseInt(it.width,10),w=parseInt(it.height,10);var ct=s-U.clientX,_t=u-U.clientY;c-ct<0?ct=c:c-ct+m>=$&&(ct=0),l-_t<0?_t=l:l-_t+w>=tt&&(_t=0),c-=ct,l-=_t,Wa(o,{left:"".concat(c,"px"),top:"".concat(l,"px")}),n.translate(ct*D/C,_t*D/C),s=U.clientX,u=U.clientY}},!1),a.addEventListener("mouseleave",function(){f=!1,r.refresh=!0},!1),a.addEventListener("mouseup",function(){f=!1,r.refresh=!0},!1),this.set("viewport",o),a.appendChild(o)}},e.prototype.updateViewport=function(){if(!this.destroyed){var t=this.get("ratio"),r=this.get("width"),n=this.get("height"),a=this.get("graph"),o=a.get("width"),s=a.get("height"),u=o/s,f=a.getGroup(),c=f.getCanvasBBox(),l=[(c.minX+c.maxX)/2,(c.minY+c.maxY)/2],m=[c.maxX-c.minX,c.maxY-c.minY],w={centerX:l[0],centerY:l[1],width:0,height:0,minX:0,minY:0};c[0]/c[1]>u?(w.width=m[0],w.height=w.width/u):(w.height=m[1],w.width=w.height*u),w.minX=l[0]-w.width/2,w.minY=l[1]-w.height/2;var C=f.getMatrix();C||(C=[1,0,0,0,1,0,0,0,1]);var D=rt.invert([1,0,0,0,1,0,0,0,1],C),U=VE({x:w.minX,y:w.minY},D),$=a.getCanvasByPoint(U.x,U.y),tt=this.get("viewport");tt||this.initViewport();var it=o/w.width,ct=it*r,_t=it*n,Bt=r*-$.x/w.width,Pt=n*-$.y/w.height,Qt=Bt+ct,ye=Pt+_t;Bt<0&&(ct+=Bt,Bt=0),Qt>r&&(ct=ct-(Qt-r)),Pt<0&&(_t+=Pt,Pt=0),ye>n&&(_t=_t-(ye-n)),this.set("ratio",t);var ce="".concat(Bt,"px"),Ne="".concat(Pt,"px");Wa(tt,{left:ce,top:Ne,width:"".concat(ct,"px"),height:"".concat(_t,"px")})}},e.prototype.init=function(){this.initContainer()},e.prototype.initContainer=function(){var t=this,r=t.get("graph"),n=r.get("width"),a=r.get("height"),o=a/n,s=t.get("className"),u=t.get("container"),f=t.get("width"),c=t.get("height");!f&&!c&&(f=200),f?(c=o*f,t.set("height",c)):(f=1/o*c,t.set("width",f));var l=no("<div class='".concat(s,"' style='width: ").concat(f,"px; height: ").concat(c,"px; overflow: hidden; position: relative;'></div>"));(0,v.isString)(u)&&(u=document.getElementById(u)),u?u.appendChild(l):r.get("container").appendChild(l),t.set("container",l);var m=no('<div class="g6-minimap-container" style="position: relative; width: 100%; height: 100%; text-align: center; display: table;"></div>');l.appendChild(m);var w=no('<span style="display: table-cell; vertical-align: middle; "></span>');m.appendChild(w),t.set("containerDOM",m),t.set("containerSpan",w);var C=no('<img alt="" src="'.concat(this.get("graphImg"),'" style="display: inline-block; user-select: none;" draggable="false" />'));t.set("imgDOM",C),t.updateImgSize(),w.appendChild(C),t.updateCanvas()},e.prototype.updateImgSize=function(){var t=this,r=t.get("imgDOM"),n=t.get("width"),a=t.get("height");r.onload=function(){var o=HE(r);o[0]>o[1]?r.width=n:r.height=a}},e.prototype.updateCanvas=function(){var t=this.get("refresh");if(t){var r=this.get("graph");if(!r.get("destroyed")){this.get("viewportChange")&&(this.set("viewportChange",!1),this.updateViewport());var n=this.get("width"),a=r.get("canvas").getCanvasBBox(),o=a.width,s=n/o;this.set("ratio",s),this.updateViewport()}}},e.prototype.getViewport=function(){return this.get("viewport")},e.prototype.getContainer=function(){return this.get("container")},e.prototype.updateGraphImg=function(t){var r=this,n=r.get("imgDOM");n.remove(),r.set("graphImg",t);var a=no('<img alt="" src="'.concat(t,'" style="display: inline-block;" ondragstart="return false;" onselectstart="return false;"/>'));r.set("imgDOM",a),a.src=t,r.updateImgSize();var o=r.get("containerSpan");o.appendChild(a),r.updateCanvas()},e.prototype.destroy=function(){var t=this.get("container");t.parentNode.removeChild(t)},e}(au),ZE=jE,qE=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Lv=function(){return Lv=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Lv.apply(this,arguments)},$E=Ns.distance,E0=.05,_0={stroke:"#000",strokeOpacity:.8,lineWidth:2,fillOpacity:1,fill:"#fff"},KE=function(i){qE(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{type:"both",trigger:"mousemove",r:60,delegateStyle:(0,v.clone)(_0),showLabel:"edge",scaleRBy:"wheel"}},e.prototype.getEvents=function(){var t;switch(this.get("trigger")){case"click":t={click:"filter"};break;case"drag":t={click:"createDelegate"};break;default:t={mousemove:"filter"};break}return t},e.prototype.init=function(){var t=this,r=t.get("showLabel"),n=r==="node"||r==="both",a=r==="edge"||r==="both";t.set("showNodeLabel",n),t.set("showEdgeLabel",a);var o=t.get("shouldShow");o||t.set("shouldShow",function(){return!0})},e.prototype.createDelegate=function(t){var r=this,n=r.get("delegate");(!n||n.destroyed)&&(r.filter(t),n=r.get("delegate"),n.on("dragstart",function(a){}),n.on("drag",function(a){r.filter(a)}),this.get("scaleRBy")==="wheel"&&n.on("mousewheel",function(a){r.scaleRByWheel(a)}))},e.prototype.scaleRByWheel=function(t){var r=this;if(!(!t||!t.originalEvent)){t.preventDefault&&t.preventDefault();var n=r.get("graph"),a,o=r.get("delegate"),s=o?{x:o.attr("x"),y:o.attr("y")}:void 0,u=s||n.getPointByClient(t.clientX,t.clientY);t.originalEvent.wheelDelta<0?a=1-E0:a=1/(1-E0);var f=r.get("maxR"),c=r.get("minR"),l=r.get("r");(l>(f||n.get("height"))&&a>1||l<(c||n.get("height")*.05)&&a<1)&&(a=1),l*=a,r.set("r",l),r.filter(t)}},e.prototype.filter=function(t){var r=this,n=r.get("graph"),a=n.getNodes(),o={},s=r.get("r"),u=r.get("type"),f={x:t.x,y:t.y};r.updateDelegate(f,s);var c=r.get("shouldShow"),l=r.get("vShapes");l&&l.forEach(function($){$.remove(),$.destroy()}),l=[],a.forEach(function($){var tt=$.getModel(),it=tt.x,ct=tt.y;$E({x:it,y:ct},f)<s&&(o[tt.id]=$)});var m=n.getEdges(),w=[];m.forEach(function($){var tt=$.getModel(),it=tt.source,ct=tt.target;c(tt)&&(u==="only-source"||u==="one"?o[it]&&!o[ct]&&w.push($):u==="only-target"||u==="one"?o[ct]&&!o[it]&&w.push($):u==="both"&&o[it]&&o[ct]&&w.push($))});var C=r.get("showNodeLabel"),D=r.get("showEdgelabel"),U=n.get("group");w.forEach(function($){var tt=$.get("group").get("children");tt.forEach(function(it){var ct=it.get("type"),_t=U.addShape(ct,{attrs:it.attr()});l.push(_t),C&&ct==="text"&&_t.set("visible",!0)})}),Object.keys(o).forEach(function($){var tt=o[$],it=tt.get("group").clone();if(U.add(it),l.push(it),D)for(var ct=it.get("children"),_t=0;_t<ct.length;_t++){var Bt=ct[_t];Bt.get("type")==="text"&&Bt.set("visible",!0)}}),r.set("vShapes",l)},e.prototype.updateParams=function(t){var r=this,n=t.r,a=t.trigger,o=t.minR,s=t.maxR,u=t.scaleRBy,f=t.showLabel,c=t.shouldShow;if(isNaN(t.r)||r.set("r",n),isNaN(s)||r.set("maxR",s),isNaN(o)||r.set("minR",o),(a==="mousemove"||a==="click")&&r.set("trigger",a),u==="wheel"||u==="unset"){r.set("scaleRBy",u),r.get("delegate").remove(),r.get("delegate").destroy();var l=r.get("dPercentText");l&&(l.remove(),l.destroy())}(f==="node"||f==="both")&&r.set("showNodeLabel",!0),(f==="edge"||f==="both")&&r.set("showEdgeLabel",!0),c&&r.set("shouldShow",c)},e.prototype.updateDelegate=function(t,r){var n=this,a=n.get("graph"),o=n.get("delegate");if(!o||o.destroyed){var s=a.get("group"),u=n.get("delegateStyle")||_0;o=s.addShape("circle",{attrs:Lv({r,x:t.x,y:t.y},u),name:"lens-shape",draggable:!0}),this.get("trigger")!=="drag"&&this.get("scaleRBy")==="wheel"&&o.on("mousewheel",function(f){n.scaleRByWheel(f)})}else o.attr({x:t.x,y:t.y,r});n.set("delegate",o)},e.prototype.clear=function(){var t=this,r=t.get("vShapes");r&&r.forEach(function(a){a.remove(),a.destroy()}),r=[],t.set("vShapes",r);var n=t.get("delegate");n&&!n.destroyed&&(n.remove(),n.destroy())},e.prototype.destroy=function(){this.clear()},e}(au),QE=KE,JE=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),t_=Ns.pointLineDistance,e_={stroke:"#FA8C16",lineWidth:1},r_=function(i){JE(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{line:e_,itemAlignType:"center",tolerance:5,horizontalLines:{},verticalLines:{},alignLines:[]}},e.prototype.init=function(){},e.prototype.getEvents=function(){return{"node:dragstart":"onDragStart","node:drag":"onDrag","node:dragend":"onDragEnd"}},e.prototype.onDragStart=function(){this.initBoxLine()},e.prototype.onDrag=function(t){var r=t.item,n=r.get("delegateShape")||r,a=n.getBBox(),o=r.getModel(),s=o.x-a.x,u=o.y-a.y;this.show({x:a.minX+s,y:a.minY+u},{width:a.width,height:a.height})},e.prototype.onDragEnd=function(){this.destory()},e.prototype.initBoxLine=function(){var t=this._cfgs,r=t.horizontalLines,n=t.verticalLines,a=t.itemAlignType,o=this.get("graph"),s=o.getNodes();s.forEach(function(u){var f=u.getBBox(),c=u.get("id");a===!0||a==="horizontal"?(r["".concat(c,"tltr")]=[f.minX,f.minY,f.maxX,f.minY,u],r["".concat(c,"lcrc")]=[f.minX,f.centerY,f.maxX,f.centerY,u],r["".concat(c,"blbr")]=[f.minX,f.maxY,f.maxX,f.maxY,u]):a==="center"&&(r["".concat(c,"lcrc")]=[f.minX,f.centerY,f.maxX,f.centerY,u]),a===!0||a==="vertical"?(n["".concat(c,"tlbl")]=[f.minX,f.minY,f.minX,f.maxY,u],n["".concat(c,"tcbc")]=[f.centerX,f.minY,f.centerX,f.maxY,u],n["".concat(c,"trbr")]=[f.maxX,f.minY,f.maxX,f.maxY,u]):a==="center"&&(n["".concat(c,"tcbc")]=[f.centerX,f.minY,f.centerX,f.maxY,u])})},e.prototype.show=function(t,r){var n=(0,v.mix)({},t);return this.itemAlign(t,r,n),t},e.prototype.itemAlign=function(t,r,n){var a=this,o=this._cfgs,s=o.horizontalLines,u=o.verticalLines,f=o.tolerance,c={x:n.x+r.width/2,y:n.y},l={x:n.x+r.width/2,y:n.y+r.height/2},m={x:n.x+r.width/2,y:n.y+r.height},w={x:n.x,y:n.y+r.height/2},C={x:n.x+r.width,y:n.y+r.height/2},D=[],U=[],$=null;if(this.clearAlignLine(),(0,v.each)(s,function(it){it[4].isVisible&&(D.push(a.getLineDisObject(it,c)),D.push(a.getLineDisObject(it,l)),D.push(a.getLineDisObject(it,m)))}),(0,v.each)(u,function(it){it[4].isVisible&&(U.push(a.getLineDisObject(it,w)),U.push(a.getLineDisObject(it,l)),U.push(a.getLineDisObject(it,C)))}),D.sort(function(it,ct){return it.dis-ct.dis}),U.sort(function(it,ct){return it.dis-ct.dis}),D.length!==0&&D[0].dis<f){t.y=D[0].line[1]-D[0].point.y+n.y,$={type:"item",horizontals:[D[0]]};for(var tt=1;tt<3;tt++)D[0].dis===D[tt].dis&&$.horizontals.push(D[tt])}if(U.length!==0&&U[0].dis<f){t.x=U[0].line[0]-U[0].point.x+n.x,$?$.verticals=[U[0]]:$={type:"item",verticals:[U[0]]};for(var tt=1;tt<3;tt++)U[0].dis===U[tt].dis&&$.verticals.push(U[tt])}$&&($.bbox=r,this.addAlignLine($))},e.prototype.addAlignLine=function(t){var r=t.bbox,n=t.type,a=t.horizontals,o=t.verticals,s=this._cfgs,u=s.line,f=s.alignLines,c=this.get("graph"),l=c.get("group");n==="item"&&(a&&(0,v.each)(a,function(m){var w=m.line,C=m.point,D=(w[0]+w[2])/2,U,$;C.x<D?(U=C.x-r.width/2,$=Math.max(w[0],w[2])):(U=C.x+r.width/2,$=Math.min(w[0],w[2]));var tt=(0,v.mix)({x1:U,y1:w[1],x2:$,y2:w[1]},u),it=l.addShape("line",{attrs:tt,capture:!1});f.push(it)}),o&&(0,v.each)(o,function(m){var w=m.line,C=m.point,D=(w[1]+w[3])/2,U,$;C.y<D?(U=C.y-r.height/2,$=Math.max(w[1],w[3])):(U=C.y+r.height/2,$=Math.min(w[1],w[3]));var tt=(0,v.mix)({x1:w[0],y1:U,x2:w[0],y2:$},u),it=l.addShape("line",{attrs:tt,capture:!1});f.push(it)}))},e.prototype.getLineDisObject=function(t,r){return{line:t,point:r,dis:t_(t,r)}},e.prototype.getContainer=function(){return this.get("container")},e.prototype.clearAlignLine=function(){var t=this._cfgs.alignLines;(0,v.each)(t,function(r){r.remove()}),t.length=0},e.prototype.destory=function(){var t=this._cfgs,r=t.horizontalLines,n=t.verticalLines,a=this.get("graph"),o=a.getNodes();o.forEach(function(s){var u=s.get("id");delete r["".concat(u,"tltr")],delete r["".concat(u,"lcrc")],delete r["".concat(u,"blbr")],delete n["".concat(u,"tlbl")],delete n["".concat(u,"tcbc")],delete n["".concat(u,"trbr")]}),this.clearAlignLine()},e}(au),n_=r_,a_=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),wo=function(){return wo=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},wo.apply(this,arguments)},i_=["click","mouseenter"],o_=function(i){a_(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{data:{},position:"top",padding:8,margin:8,offsetX:0,offsetY:0,layout:"horizontal",flipPage:!1,containerStyle:{},align:void 0,horiSep:8,vertiSep:8,filter:{enable:!1,trigger:"click"}}},e.prototype.init=function(){this.formatArray("padding"),this.formatArray("margin");var t=this.get("filter")||{},r=t.multiple;r&&t.trigger==="mouseenter"&&this.set("multiple",!1);var n=this.get("align");if(!n){var a=this.get("position").split("-");a.includes("left")&&(n="left"),a.includes("right")?n="right":n="center",this.set("align",n)}var o=this.get("graph"),s=o.get("container"),u=no(`<div class='g6-legend-container' style="position: absolute;"></div>`);s.appendChild(u),this.set("container",u);var f=this.render();Wa(u,this.getContainerPos(f)),this.bindEvents()},e.prototype.getContainerPos=function(t){t===void 0&&(t=[0,0]);var r=this,n=r.get("graph"),a=this.get("offsetX"),o=this.get("offsetY"),s=this.get("margin"),u=this.get("position").split("-"),f={top:0,right:1,bottom:2,left:3},c=0,l=0,m={left:(n.getWidth()-t[0])/2+c,top:(n.getHeight()-t[1])/2+l};return u.forEach(function(w){var C=s[f[w]],D=w;switch(w){case"top":C+=l;break;case"left":C+=c;break;case"bottom":C=n.getHeight()-t[1]-C+l,D="top";break;default:C=n.getWidth()-t[0]-C+c,D="left";break}m[D]=C}),m.top+=o+n.getContainer().offsetTop,m.left+=a+n.getContainer().offsetLeft,Object.keys(m).forEach(function(w){m[w]="".concat(m[w],"px")}),m},e.prototype.bindEvents=function(){var t=this,r=t.get("filter");if(!(!r||!r.enable)){var n=r.trigger||"click";i_.includes(n)||(console.warn("Trigger for legend filterling must be 'click' or 'mouseenter', 'click' will take effect by default."),n="click");var a=t.get("legendCanvas");n==="mouseenter"?(a.on("node-container:mouseenter",function(o){return t.filterData(o)}),a.on("node-container:mouseleave",function(o){t.clearFilter(),t.clearActiveLegend()})):(a.on("node-container:click",function(o){return t.filterData(o)}),a.on("click",function(o){o.target&&o.target.isCanvas&&o.target.isCanvas()&&(t.clearFilter(),t.clearActiveLegend())}))}},e.prototype.changeData=function(t){this.set("data",t);var r=this.render();Wa(this.get("container"),this.getContainerPos(r))},e.prototype.activateLegend=function(t){var r=this.get("filter"),n=r==null?void 0:r.multiple;n||this.clearActiveLegend();var a=t.get("parent");a.get("active")?(a.set("active",!1),this.findLegendItemsByState("active").length&&a.set("inactive",!0)):(a.set("inactive",!1),a.set("active",!0)),this.findLegendItemsByState("active").length?this.findLegendItemsByState("active","all",!1).forEach(function(l){l.set("inactive",!0)}):this.clearActiveLegend();var o=(r==null?void 0:r.legendStateStyles)||{},s=(o==null?void 0:o.inactive)||{opacity:.5,"text-shape":{opacity:.5}},u=s["text-shape"]||{};this.findLegendItemsByState("inactive").forEach(function(l){var m=l.get("children"),w=m[0],C=m[1];w.attr(wo(wo({},w.get("oriAttrs")),s)),C.attr(wo(wo({},C.get("oriAttrs")),u))});var f=(o==null?void 0:o.active)||{stroke:"#000",lineWidth:2,"text-shape":{fontWeight:"bold"}},c=f["text-shape"]||{};this.findLegendItemsByState("active").forEach(function(l){var m=l.get("children"),w=m[0],C=m[1];w.attr(wo(wo({},w.get("oriAttrs")),f)),C.attr(wo(wo({},C.get("oriAttrs")),c))})},e.prototype.findLegendItemsByState=function(t,r,n){r===void 0&&(r="all"),n===void 0&&(n=!0);var a=this.get("legendCanvas").find(function(u){return u.get("name")==="root"}),o=a.find(function(u){return u.get("name")==="node-group"}),s=a.find(function(u){return u.get("name")==="edge-group"});return r==="node"?o.get("children").filter(function(u){return!!u.get(t)===n}):r==="edge"?s.get("children").filter(function(u){return!!u.get(t)===n}):o.get("children").filter(function(u){return!!u.get(t)===n}).concat(s.get("children").filter(function(u){return!!u.get(t)===n}))},e.prototype.clearActiveLegend=function(){var t=this.get("legendCanvas"),r=t.find(function(a){return a.get("name")==="root"}),n=[r.find(function(a){return a.get("name")==="node-group"}),r.find(function(a){return a.get("name")==="edge-group"})];n.forEach(function(a){a.get("children").forEach(function(o){o.set("active",!1),o.set("inactive",!1);var s=o.get("children"),u=s[0],f=s[1];u.attr(u.get("oriAttrs")),f.attr(f.get("oriAttrs"))})})},e.prototype.filterData=function(t){var r=this.get("filter"),n=r==null?void 0:r.filterFunctions;if(!(!r||!n)){var a=this.get("legendCanvas"),o=this.get("graph"),s=r.graphActiveState||"active",u=r.graphInactiveState||"inactive",f=r.multiple;this.clearFilter(),f||this.clearActiveLegend(),this.activateLegend(t.target);var c=a.find(function($){return $.get("name")==="root"}),l=c.find(function($){return $.get("name")==="node-group"}),m=c.find(function($){return $.get("name")==="edge-group"}),w=l.get("children").filter(function($){return $.get("active")}),C=m.get("children").filter(function($){return $.get("active")}),D=0,U=["getNodes","getEdges"];U.forEach(function($){o[$]().forEach(function(tt){var it=!1,ct=$==="getNodes"?w:C;ct.forEach(function(_t){var Bt=n[_t.get("id")];it=it||Bt(tt.getModel())}),it?(o.setItemState(tt,u,!1),o.setItemState(tt,s,!0),D++):(o.setItemState(tt,s,!1),o.setItemState(tt,u,!0))})}),D||U.forEach(function($){o[$]().forEach(function(tt){o.clearItemStates(tt,[u])})})}},e.prototype.clearFilter=function(){var t=this.get("graph"),r=this.get("filter");if(r){var n=r.graphActiveState||"active",a=r.graphInactiveState||"inactive";t.getNodes().forEach(function(o){t.clearItemStates(o,[n,a])}),t.getEdges().forEach(function(o){t.clearItemStates(o,[n,a])})}},e.prototype.render=function(){var t=this;this.processData();var r=this.get("legendCanvas");r?r.clear():r=new fc({container:this.get("container"),width:200,height:200});var n=r.addGroup({name:"root"}),a=n.addGroup({name:"node-group"}),o=n.addGroup({name:"edge-group"});this.set("legendCanvas",r);var s=this.get("itemsData"),u=["nodes","edges"],f=[a,o];u.forEach(function(Cr,Cn){s[Cr].forEach(function(_n){var Tr,jr=f[Cn].addGroup({id:_n.id,name:"node-container"}),dn,vn=_n.type,Pn=t.getShapeSize(_n),Wn=Pn.width,ma=Pn.height,Oa=Pn.r,pi=t.getStyle(Cr.substr(0,4),_n);switch(_n.type){case"circle":dn={r:Oa,x:0,y:0};break;case"rect":dn={width:Wn,height:ma,x:-Wn/2,y:-ma/2};break;case"ellipse":dn={rx:Wn,ry:ma,x:0,y:0},vn="ellipse";break;case"line":dn={x1:-Wn/2,y1:0,x2:Wn/2,y2:0},vn="line";break;case"quadratic":dn={path:[["M",-Wn/2,0],["Q",0,Wn/2,Wn/2,0]]},vn="path";break;case"cubic":dn={path:[["M",-Wn/2,0],["C",-Wn/6,Wn/2,Wn/6,-Wn/2,Wn/2,0]]},vn="path";break;case"diamond":dn={path:[["M",0,-ma],["L",Wn,0],["L",0,ma],["L",-Wn,0],["Z"]]},vn="path";break;case"triangle":dn={path:[["M",-Wn,ma],["L",0,-ma],["L",Wn,ma],["Z"]]},vn="path";break;case"star":dn={path:Ns.getStarPath(Oa*3,Oa*1.2)},vn="path";break;default:dn={r:Oa,x:0,y:0};break}var ai=jr.addShape(vn,{attrs:wo(wo({},dn),pi),name:"".concat(_n.type,"-node-keyShape"),oriAttrs:wo({opacity:1},pi)});if(_n.label){var gi=ai.getBBox(),Ei=((Tr=_n.labelCfg)===null||Tr===void 0?void 0:Tr.style)||{},Qi=wo({textAlign:"begin",fontSize:12,textBaseline:"middle",fill:"#000",opacity:1,fontWeight:"normal"},Ei);jr.addShape("text",{attrs:wo({x:gi.maxX+4,y:0,text:_n.label},Qi),className:"legend-label",name:"".concat(_n.type,"-node-text"),oriAttrs:Qi})}})});var c=this.get("padding"),l,m=n.find(function(Cr){return Cr.get("name")==="title-container"}),w={height:0,maxY:0,width:0};if(this.get("title")){m||(m=n.addGroup({name:"title-container"}));var C={fontSize:20,fontFamily:"Arial",fontWeight:300,textBaseline:"top",textAlign:"center",fill:"#000",x:0,y:c[0]},D=this.get("titleConfig")||{},U=Object.assign(C,D.style||{});l=m.addShape("text",{attrs:wo({text:this.get("title")},U)}),w=m.getCanvasBBox(),m.setMatrix([1,0,0,0,1,0,D.offsetX,D.offsetY,1])}this.layoutItems();var $=n.getCanvasBBox(),tt=a.getCanvasBBox(),it=tt.minX<0?Math.abs(tt.minX)+c[3]:c[3],ct=w.maxY<tt.minY?Math.abs(w.maxY-tt.minY)+c[0]:w.maxY+c[0],_t=[1,0,0,0,1,0,it,ct,1];a.setMatrix(_t),$=n.getCanvasBBox();var Bt=[$.minX+$.width+c[1],$.minY+$.height+c[2]];if(l){var D=wo({position:"center",offsetX:0,offsetY:0},this.get("titleConfig"));w=m.getCanvasBBox();var Pt=m.getMatrix()||[1,0,0,0,1,0,0,0,1];D.position==="center"?Pt[6]=Bt[0]/2+D.offsetX:D.position==="right"?(Pt[6]=Bt[0]-c[3]+D.offsetX,l.attr({textAlign:"right"})):(Pt[6]=c[3]+D.offsetX,l.attr({textAlign:"left"})),m.setMatrix(Pt),w=m.getCanvasBBox(),it=tt.minX<0?Math.abs(tt.minX)+c[3]:c[3],ct=tt.minY<w.maxY?Math.abs(w.maxY-tt.minY)+c[0]:w.maxY+c[0],_t=[1,0,0,0,1,0,it,ct,1],a.setMatrix(_t);var Qt=[1,0,0,0,1,0,it,ct,1];this.get("layout")==="vertical"?Qt[6]+=tt.maxX+this.get("horiSep"):Qt[7]+=tt.maxY+this.get("vertiSep"),o.setMatrix(Qt)}else{tt=a.getCanvasBBox();var ye=[1,0,0,0,1,0,0,0,1];this.get("layout")==="vertical"?ye[6]+=_t[6]+tt.maxX+this.get("horiSep"):ye[7]+=_t[7]+tt.maxY+this.get("vertiSep"),o.setMatrix(ye)}$=n.getCanvasBBox(),tt=a.getCanvasBBox(),_t=a.getMatrix()||[1,0,0,0,1,0,0,0,1];var ce=o.getMatrix()||[1,0,0,0,1,0,0,0,1],Ne=o.getCanvasBBox();Bt=[Math.max(tt.width+_t[6],Ne.width+ce[6])+c[1],Math.max(tt.height+_t[7],Ne.height+ce[7])+c[2]],r.changeSize(Bt[0],Bt[1]);var $e=this.get("containerStyle"),Rr=n.getMatrix()||[1,0,0,0,1,0,0,0,1],rn=Ns.invertMatrix({x:0,y:0},Rr),Vr=n.addShape("rect",{attrs:wo({x:rn.x+($e.lineWidth||1),y:rn.y+($e.lineWidth||1),width:Bt[0]-2*($e.lineWidth||1),height:Bt[1]-2*($e.lineWidth||1),fill:"#f00",stroke:"#000",lineWidth:1,opacity:.5},$e),name:"legend-back-rect",capture:!1});return Vr.toBack(),Bt},e.prototype.layoutItems=function(){var t=this.get("legendCanvas"),r=this.get("horiSep"),n=this.get("vertiSep"),a=this.get("layout"),o=this.get("align"),s=[0,0],u=t.find(function(ct){return ct.get("name")==="root"}),f=u.find(function(ct){return ct.get("name")==="node-group"}),c=u.find(function(ct){return ct.get("name")==="edge-group"}),l={min:0,max:-1/0},m=-1/0;f.get("children").forEach(function(ct,_t){_t===0&&(l.min=s[0]);var Bt=ct.get("children")[0],Pt=ct.getCanvasBBox(),Qt=Bt.getBBox(),ye=Qt.width,ce=Qt.height,Ne=0,$e=0,Rr=0;a==="vertical"?($e=s[1],Rr=s[0]+ye/2,s[0]=Rr+Pt.height+n,Ne=Pt.maxX+$e+ye/2):($e=s[0]+ye/2,Rr=s[1],s[0]=$e+Pt.width+r,Ne=Pt.maxY+Rr+ce/2),s[0]>l.max&&(l.max=s[0]),Ne>m&&(m=Ne),ct.setMatrix([1,0,0,0,1,0,$e,Rr,1])});var w=l.max-l.min,C={min:0,max:-1/0},D=f.getCanvasBBox();s[0]=0,s[1]=a==="vertical"?D.maxX+r:D.maxY+n,c.get("children").forEach(function(ct,_t){_t===0&&(C.min=s[0]);var Bt=ct.get("children")[0],Pt=ct.getCanvasBBox(),Qt=Bt.getBBox(),ye=Qt.width,ce=Qt.height,Ne=0,$e=0;a==="vertical"?(Ne=s[1],$e=s[0],s[0]=$e+Pt.height+n,ct.setMatrix([1,0,0,0,1,0,0,$e+ce/2,1])):(Ne=s[0],$e=s[1],s[0]=Ne+Pt.width+r,ct.setMatrix([1,0,0,0,1,0,Ne+ye/2,0,1])),s[0]>C.max&&(C.max=s[0])});var U=C.max-C.min;if(o&&o!==""&&o!=="left"){var $=w-U,tt=o==="center"?Math.abs($)/2:Math.abs($),it=$<0?f:c;it.get("children").forEach(function(ct){var _t=ct.getMatrix()||[1,0,0,0,1,0,0,0,1];a==="vertical"?_t[7]+=tt:_t[6]+=tt,ct.setMatrix(_t)})}},e.prototype.processData=function(){var t=this.get("data"),r={nodes:[],edges:[]};t.nodes&&(t.nodes.sort(function(n,a){return n.order-a.order}),t.nodes.forEach(function(n){var a,o,s,u,f,c=n.size||[((a=n.style)===null||a===void 0?void 0:a.width)||((o=n.style)===null||o===void 0?void 0:o.r)||8,((s=n.style)===null||s===void 0?void 0:s.height)||((u=n.style)===null||u===void 0?void 0:u.r)||8],l=((f=n.labelCfg)===null||f===void 0?void 0:f.style)||{};r.nodes.push({id:n.id||(0,v.uniqueId)(),type:n.type||"circle",style:wo({},n.style),order:n.order,label:n.label,itemType:"node",size:c,labelCfg:{position:"right",style:wo({fontFamily:"Arial"},l)}})})),t.edges&&(t.edges.sort(function(n,a){return n.order-a.order}),t.edges.forEach(function(n){var a,o,s=n.type||"line";n.type==="cubic-horizontal"&&(s="cubic");var u=((a=n.labelCfg)===null||a===void 0?void 0:a.style)||{},f=n.size||[((o=n.style)===null||o===void 0?void 0:o.width)||8,1];r.edges.push({id:n.id||(0,v.uniqueId)(),type:s,size:f,style:wo({lineWidth:(0,v.isArray)(f)?f[1]:1},n.style),order:n.order,label:n.label,itemType:"edge",labelCfg:{position:"right",style:wo({fontFamily:"Arial"},u)}})})),this.set("itemsData",r)},e.prototype.getContainer=function(){return this.get("container")},e.prototype.formatArray=function(t){var r=this.get(t);if((0,v.isNumber)(r))this.set(t,[r,r,r,r]);else if((0,v.isArray)(r))switch(r.length){case 0:this.set(t,[0,0,0,0]);break;case 1:this.set(t,[r[0],r[0],r[0],r[0]]);break;case 2:this.set(t,[r[0],r[1],r[0],r[1]]);break;case 3:this.set(t,[r[0],r[1],r[2],r[1]]);break;default:break}return this.get(t)},e.prototype.getShapeSize=function(t){var r,n,a;return t.size&&((0,v.isArray)(t.size)?(r=t.size[0],n=t.size[1]||t.size[0],a=t.size[0]/2):(0,v.isNumber)(t.size)&&(r=t.size,n=t.size,a=t.size/2)),t.style&&(t.style.width&&(r=t.style.width),t.style.height&&(n=t.style.height),t.style.r&&(a=t.style.r)),a||(a=5),r||(r=a),n||(n=a),{width:r,height:n,r:a}},e.prototype.getStyle=function(t,r){var n=t==="node"?{fill:"#ccc",lineWidth:0}:{stroke:"#000",lineWidth:1};return wo(wo({},n),r.style||{})},e.prototype.destroy=function(){var t=this.get("legendCanvas");t==null||t.destroy();var r=this.get("graph"),n=r.get("container"),a=this.get("container");n.removeChild(a)},e}(au),s_=o_,u_=function(){var i=function(t,r){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,a){n.__proto__=a}||function(n,a){for(var o in a)Object.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])},i(t,r)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");i(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}}(),Fu=function(){return Fu=Object.assign||function(i){for(var e,t=1,r=arguments.length;t<r;t++){e=arguments[t];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(i[n]=e[n])}return i},Fu.apply(this,arguments)},S0=function(i,e){var t={};for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&e.indexOf(r)<0&&(t[r]=i[r]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,r=Object.getOwnPropertySymbols(i);n<r.length;n++)e.indexOf(r[n])<0&&Object.prototype.propertyIsEnumerable.call(i,r[n])&&(t[r[n]]=i[r[n]]);return t};typeof document!="undefined"&&md()(`
  .g6-annotation-container {
    background-color: rgba(255, 255, 255, 0.3);
    padding: 8px;
  }
  .g6-annotation-wrapper {
    background-color: #fff;
    box-shadow: 0 0 8px rgba(0, 0, 0, 0.85);
  }
  .g6-annotation-header-wapper {
    height: fit-content;
    width: 100%;
    background-color: #5B8FF9;
    display: inline-flex;
    cursor: move;
  }
  .g6-annotation-title {
    margin: 4px 40px 4px 8px;
    cursor: text;
    min-width: 32px;
  }
  .g6-annotation-collapse {
    margin: 4px;
    cursor: pointer;
  }
  .g6-annotation-expand {
    margin: 4px;
    cursor: pointer;
  }
  .g6-annotation-close {
    margin: 4px 8px 4px 0;
    cursor: pointer;
  }
  .g6-annotation-content {
    padding: 8px;
    width: fit-content;
    cursor: text;
    word-break: break-all;
    min-width: 32px;
  }
  .g6-annotation-title-input-wrapper {
    margin: 4px 40px 4px 8px;
  }
  .g6-annotation-content-input {
    height: 100%;
    word-break: break-all;
  }
  .g6-annotation-content-input-wrapper {
    margin: 8px;
    height: 100%;
  }
`);var M0="canvas-annotation",f_=function(i){u_(e,i);function e(t){return i.call(this,t)||this}return e.prototype.getDefaultCfgs=function(){return{trigger:"click",editable:!0,itemHighlightState:"highlight",linkHighlightStyle:{shadowColor:"#5B8FF9",shadowBlur:10},cardCfg:{minHeight:60,width:"fit-content",height:"fit-content",collapseType:"minimize",closeType:"hide",borderRadius:5,maxTitleLength:20}}},e.prototype.getEvents=function(){var t={viewportchange:"updateLinks",afterlayout:"updateLinks",aftergraphrefreshposition:"updateLinks",afterupdateitem:"updateLink",afterchangedata:"onGraphDataChange",afteritemvisibilitychange:"onGraphItemVisibilityChange"};switch(this.get("trigger")){case"click":t=Fu(Fu({},t),{"node:click":"showAnnotation","edge:click":"showAnnotation"})}return t},e.prototype.getDOMContent=function(t){if(!this.destroyed){var r=t.collapsed,n=t.maxWidth,a=t.title,o=a===void 0?"":a,s=t.content,u=s===void 0?"":s,f=t.borderRadius,c=f===void 0?5:f,l=r?"<p class='g6-annotation-expand'>+</p>":"<p class='g6-annotation-collapse'>-</p>",m=r?"":" <p class='g6-annotation-content'>".concat(u,"</p>"),w="<p class='g6-annotation-close'>x</p>",C=r?"".concat(c,"px"):"".concat(c,"px ").concat(c,"px 0 0");return'<div class="g6-annotation-wrapper" style="border-radius: '.concat(c,"px; max-width: ").concat(n,`px">
        <div
          class="g6-annotation-header-wapper"
          style="border-radius: `).concat(C,`;"
        >
          <h4 class='g6-annotation-title'>`).concat(o,`</h4>
          `).concat(l,`
          `).concat(w,`
        </div>
        `).concat(m,`
      </div>`)}},e.prototype.init=function(){var t=this;if(!t.destroyed){var r=t.get("graph"),n=r.getContainer(),a=t.get("container"),o=this.get("containerCfg");o?(a=this.createContainer(),n.appendChild(a)):a=n,this.set("container",a);var s=n.getBoundingClientRect(),u=new fc({container:n,width:s.right-s.left,height:s.bottom-s.top});Wa(u.get("el"),{position:"absolute",top:0,left:0,pointerEvents:"none"}),window.addEventListener("resize",(0,v.debounce)(function(){return t.resizeCanvas(t)},100));var f=u.addGroup({id:"annotation-link-group"});t.set("linkGroup",f),t.set("canvas",u),t.get("getTitle")||t.set("getTitle",function(l){var m,w=((m=l==null?void 0:l.getModel)===null||m===void 0?void 0:m.call(l))||{},C=w.label,D=w.id;return C||D||"-"}),t.get("getContent")||t.set("getContent",function(l){var m,w;if(!l)return"-";var C=((m=l.getModel)===null||m===void 0?void 0:m.call(l))||{},D=C.label,U=C.id,$=(w=l.getType)===null||w===void 0?void 0:w.call(l),tt=$?"".concat($,": "):"";return"".concat(tt).concat(D||U||"")});var c=t.get("defaultData");c&&this.readData(c)}},e.prototype.createContainer=function(){var t=this;if(!this.destroyed){var r=this.get("containerCfg"),n=this.get("graph"),a=n.getContainer(),o=a.getBoundingClientRect(),s=o.left,u=o.right,f=o.top,c=o.bottom,l=c-f,m=u-s,w=r.position,C=w===void 0?"top":w,D=r.offsetX,U=D===void 0?0:D,$=r.offsetY,tt=$===void 0?0:$,it=S0(r,["position","offsetX","offsetY"]),ct=r.height,_t=ct===void 0?"fit-content":ct,Bt=r.width,Pt=Bt===void 0?n.getWidth():Bt;_t==="100%"&&(_t=l),Pt==="100%"&&(Pt=m);var Qt="unset",ye="unset",ce={};switch(C){case"right":Qt="".concat(l,"px"),ce={top:0,right:0},ce.right+=s+U,ce.top+=f+tt;break;case"bottom":ye="".concat(m,"px"),ce={bottom:0,left:0},ce.left+=s+U,ce.bottom+=f+tt;break;case"top":ye="".concat(m,"px");case"left":Qt="".concat(l,"px");default:ce={top:0,left:0},ce.left+=s+U,ce.top+=f+tt;break}Object.keys(ce).forEach(function($e){ce[$e]="".concat(ce[$e],"px")});var Ne=no("<div class='".concat(r.className," g6-annotation-container'></div>"));return Wa(Ne,Fu(Fu({position:"absolute",display:C==="top"||C==="bottom"?"inline-flex":"unset",width:(0,v.isNumber)(Pt)?"".concat(Pt,"px"):Pt,height:(0,v.isNumber)(_t)?"".concat(_t,"px"):_t,maxHeight:Qt,maxWidth:ye,overflow:"scroll"},ce),it)),a.appendChild(Ne),Ne.addEventListener("scroll",function($e){t.updateLinks()}),Ne}},e.prototype.resizeCanvas=function(t){clearTimeout(t.resizeTimer),t.resizeTimer=setTimeout(function(){if(!(!t||t.destroyed)){var r=t.get("container").getBoundingClientRect(),n=r.right-r.left,a=r.bottom-r.top;t.get("canvas").changeSize(n,a),t.updateOutsideCards(t)}},250)},e.prototype.updateOutsideCards=function(t){var r=t||this,n=r.get("cardInfoMap")||{},a=r.get("graph"),o=a.getPointByCanvas(0,0),s=a.getPointByCanvas(a.getWidth(),a.getHeight()),u=a.getClientByPoint(o.x,o.y),f=u.x,c=u.y,l=a.getClientByPoint(s.x,s.y),m=l.x,w=l.y;Object.values(n).forEach(function(C){var D=C.card;if(D){var U=D.style,$=Rl(U.left),tt=Rl(U.top),it=D.getBoundingClientRect(),ct=it.width,_t=it.height,Bt=$,Pt=tt;$+ct>m-f&&(Bt=m-f-ct),$<0&&(Bt=0),tt+_t>w-c&&(Pt=w-c-_t),tt<0&&(Pt=0),Wa(D,{left:"".concat(Bt,"px"),top:"".concat(Pt,"px")})}}),r.updateLinks()},e.prototype.showAnnotation=function(t){if(!this.destroyed){var r=t.item;this.toggleAnnotation(r)}},e.prototype.hideCards=function(){var t=this;if(!t.destroyed){var r=t.get("cardInfoMap")||{};Object.keys(r).forEach(function(n){t.hideCard(n)})}},e.prototype.toggleAnnotation=function(t,r){var n,a;r===void 0&&(r={});var o=this;if(!o.destroyed){var s=o.get("cardInfoMap")||{},u=o.get("graph"),f=o.get("container"),c=o.get("containerCfg"),l=Object.assign({},o.get("cardCfg")||{},r),m=l.minHeight,w=l.minWidth,C=l.width,D=l.height,U=l.collapsed,$=U===void 0?!1:U,tt=l.x,it=l.y,ct=l.title,_t=l.content,Bt=l.maxTitleLength,Pt=l.defaultBegin,Qt=S0(l,["minHeight","minWidth","width","height","collapsed","x","y","title","content","maxTitleLength","defaultBegin"]),ye=o.get("linkGroup"),ce=this.get("rows")||[[]],Ne=(n=t.isCanvas)===null||n===void 0?void 0:n.call(t),$e=Ne?M0:t.getID(),Rr=s[$e]||{},rn=Rr.card,Vr=Rr.link,Cr=Rr.x,Cn=Rr.y,_n=Rr.title,Tr=Rr.content,jr=this.get("getTitle"),dn=this.get("getContent"),vn=this.get("getContentPlaceholder")||function(){return""},Pn=this.get("getTitlePlaceHolder")||function(){return""},Wn=vn(t),ma=Pn(t),Oa=no(this.getDOMContent(Fu({itemId:$e,collapsed:$,title:((a=_n||ct||(jr==null?void 0:jr(t)))===null||a===void 0?void 0:a.substr(0,Bt))||ma,content:Tr||_t||(dn==null?void 0:dn(t))||Wn},Qt))),pi=(0,v.isNumber)(m)?"".concat(m,"px"):m;Wa(Oa,{minHeight:$?"unset":pi,minWidth:(0,v.isNumber)(w)?"".concat(w,"px"):w,height:D,width:C});var ai=!!rn;ai?(Vr==null||Vr.remove(!0),f.replaceChild(Oa,rn)):f.appendChild(Oa);var gi;if(!c){if(gi=f.getBoundingClientRect()||{},tt!==void 0&&it!==void 0)Cr=tt,Cn=it;else if(!ai&&!Ne){var Ei=gi.top,Qi=Pt||{},Fi=Qi.left,Gu=Qi.right,ts=Gu===void 0?16:Gu,zu=Qi.top,es=zu===void 0?8:zu,rs=Qi.bottom,xu=ts,Os=es;isNaN(Fi)||(xu=f.scrollWidth-Fi),isNaN(rs)||(Os=f.scrollHeight-rs);var $s=(0,v.isNumber)(w)?w:100;Cr=f.scrollWidth-Oa.scrollWidth-(ce.length-1)*$s-xu;var Va=ce[ce.length-1],ci=(Va[Va.length-1]||{}).bbox;Cn=(ci==null?void 0:ci.bottom)-Ei||Os}Wa(Oa,{position:"absolute",left:"".concat(Cr,"px"),top:"".concat(Cn,"px"),cusor:c?"unset":"move"})}this.bindListener(Oa,$e);var Ya=Oa.getBoundingClientRect();if(!Ne){var li=Nv(t,Ya,u,this.get("canvas")),Di=this.get("linkStyle");Vr=ye.addShape("path",{attrs:Fu({lineWidth:1,lineDash:[5,5],stroke:"#ccc",path:li},Di)})}if(s[$e]=Fu(Fu({},s[$e]||{}),{id:$e,collapsed:$,card:Oa,link:Vr,x:Cr,y:Cn,cardBBox:Ya,content:Tr||_t,title:_n||ct,contentPlaceholder:Wn,titlePlaceholder:ma,isCanvas:Ne}),o.set("cardInfoMap",s),c)this.updateCardPositionsInConatainer(),this.updateLinks();else{var fa=!isNaN(tt)&&!isNaN(it);if(!ai&&!Ne&&!fa){var Ka=gi.bottom,ti=Ka===void 0?0:Ka,Ei=gi.top;ce[ce.length-1].push({id:$e,bbox:Ya}),Ya.top>ti-Ei-Ya.height-16&&ce.push([]),this.set("rows",ce)}}this.updateCardSize($e);var Pi=this.get("onAnnotationChange");Pi==null||Pi(s[$e],ai?"update":"create")}},e.prototype.updateCardPositionsInConatainer=function(){if(!this.destroyed){var t=this.get("cardInfoMap");if(t){var r=this.get("container"),n=this.get("containerCfg").position,a=r.getBoundingClientRect().width,o=getComputedStyle(r),s=Rl(o.paddingLeft)+Rl(o.paddingRight);a-=s,Object.values(t).forEach(function(u){var f=u.card,c=f.getBoundingClientRect().width;switch(n){case"right":Wa(f,{marginLeft:a?"".concat(a-c,"px"):"0px"});break;case"top":case"bottom":Wa(f,{marginLeft:"8px"});default:break}})}}},e.prototype.handleExpandCollapseCard=function(t){if(!this.destroyed){var r=this.get("graph"),n=this.get("cardInfoMap");if(n){var a=n[t].collapsed,o=r.findById(t);if(o){var s=this.get("cardCfg").collapseType;s==="hide"&&!a?this.hideCard(t):this.toggleAnnotation(o,{collapsed:!a}),n[t]=Fu(Fu({},n[t]),{collapsed:!a})}}}},e.prototype.hideCard=function(t){if(!this.destroyed){var r=this.get("cardInfoMap");if(!(!r||!r[t])){var n=r[t],a=n.card,o=n.link;Wa(a,{display:"none"}),o==null||o.hide();var s=this.get("onAnnotationChange");s(r[t],"hide")}}},e.prototype.removeCard=function(t){if(!this.destroyed){var r=this.get("cardInfoMap");if(r){var n=r[t],a=n.card,o=n.link,s=this.get("container");s.removeChild(a),o==null||o.remove(!0),delete r[t];var u=this.get("onAnnotationChange");u(n,"remove")}}},e.prototype.bindListener=function(t,r){var n=this;if(!this.destroyed){t.addEventListener("mousemove",function(u){var f;if(u.target.className==="g6-annotation-collapse"?f="collapse":u.target.className==="g6-annotation-expand"?f="expand":u.target.className==="g6-annotation-close"&&(f="close"),f){var c=n.get("cardCfg").onMouseEnterIcon,l=c===void 0?function(){}:c;l(u,r,f)}}),t.addEventListener("mouseout",function(u){var f;if(u.target.className==="g6-annotation-collapse"?f="collapse":u.target.className==="g6-annotation-expand"?f="expand":u.target.className==="g6-annotation-close"&&(f="close"),f){var c=n.get("cardCfg").onMouseLeaveIcon,l=c===void 0?function(){}:c;l(u,r,f)}}),t.addEventListener("mouseenter",function(u){var f=n.get("cardInfoMap");if(f){var c=n.get("graph"),l=c.findById(r);if(l){var m=n.get("itemHighlightState");c.setItemState(l,m,!0)}var w=f[r].link;if(w){var C=n.get("linkHighlightStyle")||{};w.attr(C)}}}),t.addEventListener("mouseleave",function(u){var f=n.get("cardInfoMap");if(f){var c=n.get("graph"),l=c.findById(r);if(l){var m=n.get("itemHighlightState");c.setItemState(l,m,!1)}var w=f[r].link;if(w){var C=n.get("linkHighlightStyle")||{};Object.keys(C).forEach(function(U){w.attr(U,void 0),w.attr(U,void 0)});var D=n.get("linkStyle");w.attr(D)}}}),t.addEventListener("click",function(u){var f=(n.get("cardCfg")||{}).onClickIcon;if(u.target.className==="g6-annotation-collapse"||u.target.className==="g6-annotation-expand"){var c=n.get("cardCfg").collapseType;c==="hide"?n.hideCard(r):n.handleExpandCollapseCard(r),f==null||f(u,r,u.target.className==="g6-annotation-collapse"?"collapse":"expand")}else if(u.target.className==="g6-annotation-close"){var l=n.get("cardCfg").closeType;l==="remove"?n.removeCard(r):n.hideCard(r),f==null||f(u,r,"close")}});var a=this.get("editable");a&&t.addEventListener("dblclick",function(u){var f=n.get("cardInfoMap"),c=(n.get("cardCfg")||{}).maxTitleLength,l=c===void 0?20:c;if(f){var m=u.target,w=m.className;if(!(w!=="g6-annotation-title"&&w!=="g6-annotation-content")){var C=w==="g6-annotation-title"?m.getBoundingClientRect():m.parentNode.getBoundingClientRect(),D=C.width,U=C.height,$=getComputedStyle(m),tt=w==="g6-annotation-title"?"input":"textarea",it=no("<".concat(tt,' class="').concat(w,'-input" type="textarea" style="width:').concat(D,"px; height: ").concat(U,'px; min-width: 16px;"/>')),ct=no('<div class="'.concat(w,'-input-wrapper" style="width: ').concat(D,"px; height: ").concat(U,"px; min-width: 16px; margin-right: ").concat($.marginRight,'" />'));ct.appendChild(it),m.parentNode.replaceChild(ct,m);var _t=f[r],Bt=_t.contentPlaceholder,Pt=_t.titlePlaceholder,Qt=_t.content,ye=_t.title,ce=Qt;w==="g6-annotation-title"?(it.name="title",it.maxLength=l,ce=ye):it.name="content",ce?(it.innerHTML=m.innerHTML,it.value=m.innerHTML):it.placeholder=w==="g6-annotation-title"?Pt:Bt,it.focus(),it.addEventListener("blur",function(Ne){it.value&&(m.innerHTML=it.value,_t[it.name||"title"]=it.value),ct.parentNode.replaceChild(m,ct),n.updateCardSize(r);var $e=n.get("onAnnotationChange");$e==null||$e(_t,"update")})}}});var o=["g6-annotation-title","g6-annotation-content","g6-annotation-title-input","g6-annotation-content-input"];t.draggable=!0,t.addEventListener("dragstart",function(u){var f=u.target.className;if(!o.includes(f)){var c=t.style;n.set("dragging",{card:t,x:u.clientX,y:u.clientY,left:Rl(c.left),top:Rl(c.top)})}}),t.addEventListener("drag",function(u){u.preventDefault();var f=n.get("cardInfoMap");if(f){var c=u.clientX,l=u.clientY,m=n.get("dragging");if(!(isNaN(c)||isNaN(l)||!m)){var w=m.x,C=m.y,D=m.left,U=m.top,$=m.card,tt=c-w,it=l-C;D+=tt,U+=it;var ct=n.get("graph"),_t=ct.getPointByCanvas(0,0),Bt=ct.getPointByCanvas(ct.getWidth(),ct.getHeight()),Pt=ct.getClientByPoint(_t.x,_t.y),Qt=Pt.x,ye=Pt.y,ce=ct.getClientByPoint(Bt.x,Bt.y),Ne=ce.x,$e=ce.y,Rr=$.getBoundingClientRect(),rn=Rr.right-Rr.left,Vr=Rr.bottom-Rr.top;(D>Ne-Qt-rn&&tt>0||D<0&&tt<0)&&(D-=tt),(U>$e-ye-Vr&&it>0||U<0&&it<0)&&(U-=it),Wa($,{left:"".concat(D,"px"),top:"".concat(U,"px"),visibility:"hidden"}),w=c,C=l;var Cr=(f[r]||{}).link;if(Cr){var Cn=ct.findById(r);Cr.attr("path",Nv(Cn,Rr,ct,n.get("canvas")))}n.set("dragging",{x:w,y:C,left:D,top:U,card:$})}}});var s=function(f){var c=n.get("cardInfoMap");if(c){var l=n.get("dragging");if(l){var m=l.left,w=l.top,C=l.card;c[r].x=m,c[r].y=w,Wa(C,{visibility:"visible"}),n.set("dragging",!1);var D=n.get("rows");D==null||D.forEach(function($){for(var tt=$.length-1;tt>=0;tt--)$[tt].id===r&&$.splice(tt,1)});var U=n.get("onAnnotationChange");U==null||U(c[r],"update")}}};t.addEventListener("dragend",s)}},e.prototype.updateCardSize=function(t){var r=this.get("cardInfoMap");if(r){var n=r[t].card,a=n.getBoundingClientRect().width,o=n.getElementsByClassName("g6-annotation-title")[0];if(o){var s=getComputedStyle(o),u=Rl(s.marginLeft),f=o.getBoundingClientRect().width;Wa(o,{marginRight:"".concat(a-u-24-16-f,"px")})}}},e.prototype.updateLink=function(t){var r=t.item;if(r){var n=this.get("cardInfoMap");if(n){var a=this.get("canvas"),o=this.get("graph"),s=r.getID(),u=n[s]||{},f=u.link,c=u.card;if(f){var l=Nv(r,c.getBoundingClientRect(),o,a);f.attr("path",l)}}}},e.prototype.updateLinks=function(){var t=this;if(!this.destroyed){var r=this.get("cardInfoMap");if(r){var n=this.get("graph");Object.values(r).forEach(function(a){var o=a.id,s=n.findById(o);t.updateLink({item:s})})}}},e.prototype.onGraphDataChange=function(){var t=this,r=this.get("cardInfoMap");if(r){var n=this.get("graph");Object.values(r).forEach(function(a){var o=a.id,s=a.card,u=a.isCanvas;if(!(!s||u||s.style.display==="none")){var f=n.findById(o);f&&f.isVisible()?t.toggleAnnotation(f):t.hideCard(o)}})}},e.prototype.onGraphItemVisibilityChange=function(t){var r=t.item,n=t.visible;if(!(!r||r.destroyed)){var a=this.get("cardInfoMap");if(a){var o=r.getID();a[o]&&(n||this.hideCard(o))}}},e.prototype.saveData=function(t){t===void 0&&(t=!1);var r=this.get("cardInfoMap");if(r){var n=this.get("graph"),a=this.get("getTitle"),o=this.get("getContent"),s=[];return Object.values(r).forEach(function(u){var f=u.title,c=u.content,l=u.x,m=u.y,w=u.id,C=u.collapsed,D=u.card;if(!(D&&D.style.display==="none"&&!t)){var U=n.findById(w)||n.get("canvas");s.push({id:w,x:l,y:m,collapsed:C,title:f||(a==null?void 0:a(U)),content:c||(o==null?void 0:o(U)),visible:D&&D.style.display!=="none"})}}),s}},e.prototype.readData=function(t){var r=this,n=this.get("graph");t.forEach(function(a){var o=a.id,s=a.x,u=a.y,f=a.title,c=a.content,l=a.collapsed,m=a.visible,w=n.findById(o);if(!w&&o===M0&&(w=n.get("canvas")),!w){var C=r.get("cardInfoMap")||{};C[o]=a,r.set("cardInfoMap",C);return}r.toggleAnnotation(w,{x:s,y:u,title:f,content:c,collapsed:l}),m||r.hideCard(o)})},e.prototype.clear=function(){var t=this.get("cardInfoMap");if(t){var r=this.get("container");Object.values(t).forEach(function(n){var a=n.card,o=n.link;r.removeChild(a),o==null||o.remove(!0)}),this.set("cardInfoMap",{})}},e.prototype.destroy=function(){var t;this.clear(),(t=this.get("canvas"))===null||t===void 0||t.destroy();var r=this.get("graph");!r||r.destroyed||(this.get("containerCfg")&&r.getContainer().removeChild(this.get("container")),this.destroyed=!0)},e}(au),c_=f_,l_=function(e,t){var r,n,a,o=1/0;Object.keys(e).forEach(function(f){var c=e[f];Object.keys(t).forEach(function(l){var m=t[l],w=c.x-m.x,C=c.y-m.y,D=w*w+C*C;o>D&&(o=D,r=c,n=m,a=[f,l])})});var s=20,u=Ns.getControlPoint(r,n,.5,s);return[["M",r.x,r.y],["Q",u.x,u.y,n.x,n.y]]},Nv=function(e,t,r,n){var a,o,s=e.getType();if(s==="edge")o=[e.getKeyShape().getPoint(.5)];else{var u=(a=e.getKeyShape)===null||a===void 0?void 0:a.call(e).getBBox(),f=u.minX,c=u.minY,l=u.maxX,m=u.maxY,w=e.getModel(),C=w.x,D=w.y;f+=C,c+=D,l+=C,m+=D,o={left:{x:f,y:(c+m)/2},right:{x:l,y:(c+m)/2},top:{x:(f+l)/2,y:c},bottom:{x:(f+l)/2,y:m}}}Object.keys(o).forEach(function(ye){var ce=o[ye],Ne=ce.x,$e=ce.y,Rr=r.getClientByPoint(Ne,$e);o[ye]=n.getPointByClient(Rr.x,Rr.y)});var U=t.top,$=U===void 0?0:U,tt=t.left,it=tt===void 0?0:tt,ct=t.right,_t=ct===void 0?0:ct,Bt=t.bottom,Pt=Bt===void 0?0:Bt,Qt={left:n.getPointByClient(it,($+Pt)/2),right:n.getPointByClient(_t,($+Pt)/2),top:n.getPointByClient((it+_t)/2,$),bottom:n.getPointByClient((it+_t)/2,Pt)};return l_(o,Qt)},Rl=function(e){return Number(e.replace(/\s+|px/gi,""))||0},h_={PluginBase:au,Menu:Sx,Grid:xx,Minimap:Lx,Bundling:Px,ToolBar:Xx,Tooltip:Vx,Fisheye:Fx,TimeBar:YE,ImageMinimap:ZE,EdgeFilterLens:QE,SnapLine:n_,Legend:s_,Annotation:c_},d_=h_,Jo=d_;uc("circle",{options:{size:An.defaultNode.size,style:{x:0,y:0,stroke:An.defaultNode.style.stroke,fill:An.defaultNode.style.fill,lineWidth:An.defaultNode.style.lineWidth},labelCfg:{style:{fill:An.nodeLabel.style.fill,fontSize:An.nodeLabel.style.fontSize,fontFamily:An.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:An.defaultNode.linkPoints.size,lineWidth:An.defaultNode.linkPoints.lineWidth,fill:An.defaultNode.linkPoints.fill,stroke:An.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,g.__assign)({},An.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=(0,v.deepMix)({},n,e.icon),s="".concat(this.type,"-keyShape"),u=t.addShape("circle",{attrs:a,className:s,name:s,draggable:!0});t.shapeMap[s]=u;var f=o.width,c=o.height,l=o.show,m=o.text;if(l){var w="".concat(this.type,"-icon");m?t.shapeMap[w]=t.addShape("text",{attrs:(0,g.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},o),className:w,name:w,draggable:!0}):t.shapeMap[w]=t.addShape("image",{attrs:(0,g.__assign)({x:-f/2,y:-c/2},o),className:w,name:w,draggable:!0})}return this.drawLinkPoints(e,t),u},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints;if(r){var n=r||{},a=n.top,o=n.left,s=n.right,u=n.bottom,f=n.size,c=n.r,l=(0,g.__rest)(n,["top","left","right","bottom","size","r"]),m=this.getSize(e),w=m[0]/2;if(o){var C="link-point-left";t.shapeMap[C]=t.addShape("circle",{attrs:(0,g.__assign)((0,g.__assign)({},l),{x:-w,y:0,r:f/2||c||5}),className:C,name:C,isAnchorPoint:!0})}if(s){var D="link-point-right";t.shapeMap[D]=t.addShape("circle",{attrs:(0,g.__assign)((0,g.__assign)({},l),{x:w,y:0,r:f/2||c||5}),className:D,name:D,isAnchorPoint:!0})}if(a){var U="link-point-top";t.shapeMap[U]=t.addShape("circle",{attrs:(0,g.__assign)((0,g.__assign)({},l),{x:0,y:-w,r:f/2||c||5}),className:U,name:U,isAnchorPoint:!0})}if(u){var $="link-point-bottom";t.shapeMap[$]=t.addShape("circle",{attrs:(0,g.__assign)((0,g.__assign)({},l),{x:0,y:w,r:f/2||c||5}),className:$,name:$,isAnchorPoint:!0})}}},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,v.deepMix)({},t,r),a=this.getSize(e),o=a[0]/2,s=(0,g.__assign)({x:0,y:0,r:o},n);return s},update:function(e,t,r){var n=t.getContainer(),a=this.getSize(e),o=(0,g.__assign)({},e.style);e.style.stroke===void 0&&e.color&&(o.stroke=e.color),e.style.r===void 0&&!isNaN(a[0])&&(o.r=a[0]/2),this.updateShape(e,t,o,!0,r),this.updateLinkPoints(e,n)}},"single-node"),uc("rect",{options:{size:[100,30],style:{radius:0,stroke:An.defaultNode.style.stroke,fill:An.defaultNode.style.fill,lineWidth:An.defaultNode.style.lineWidth},labelCfg:{style:{fill:An.nodeLabel.style.fill,fontSize:An.nodeLabel.style.fontSize,fontFamily:An.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:An.defaultNode.linkPoints.size,lineWidth:An.defaultNode.linkPoints.lineWidth,fill:An.defaultNode.linkPoints.fill,stroke:An.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},anchorPoints:[[0,.5],[1,.5]],stateStyles:(0,g.__assign)({},An.nodeStateStyles)},shapeType:"rect",labelPosition:"center",drawShape:function(e,t){var r=this.getShapeStyle(e),n=t.addShape("rect",{attrs:r,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});return t.shapeMap["".concat(this.type,"-keyShape")]=n,this.drawLinkPoints(e,t),n},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,a=n.top,o=n.left,s=n.right,u=n.bottom,f=n.size,c=n.r,l=(0,g.__rest)(n,["top","left","right","bottom","size","r"]),m=this.getSize(e),w=m[0],C=m[1];o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,g.__assign)((0,g.__assign)({},l),{x:-w/2,y:0,r:f/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,g.__assign)((0,g.__assign)({},l),{x:w/2,y:0,r:f/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,g.__assign)((0,g.__assign)({},l),{x:0,y:-C/2,r:f/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),u&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,g.__assign)((0,g.__assign)({},l),{x:0,y:C/2,r:f/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,v.mix)({},t,r),a=this.getSize(e),o=n.width||a[0],s=n.height||a[1],u=(0,g.__assign)({x:-o/2,y:-s/2,width:o,height:s},n);return u},update:function(e,t,r){var n=t.getContainer(),a=this.getOptions({}).style,o=this.getSize(e),s=t.get("keyShape");e.size||(o[0]=s.attr("width")||a.width,o[1]=s.attr("height")||a.height);var u={stroke:e.color,x:-o[0]/2,y:-o[1]/2,width:o[0],height:o[1]},f=(0,v.mix)({},a,s.attr(),u);f=(0,v.mix)(f,e.style),this.updateShape(e,t,f,!1,r),this.updateLinkPoints(e,n)}},"single-node"),uc("ellipse",{options:{size:[80,40],style:{x:0,y:0,stroke:An.defaultNode.style.stroke,fill:An.defaultNode.style.fill,lineWidth:An.defaultNode.style.lineWidth},labelCfg:{style:{fill:An.nodeLabel.style.fill,fontSize:An.nodeLabel.style.fontSize,fontFamily:An.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:An.defaultNode.linkPoints.size,lineWidth:An.defaultNode.linkPoints.lineWidth,fill:An.defaultNode.linkPoints.fill,stroke:An.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,g.__assign)({},An.nodeStateStyles)},shapeType:"ellipse",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=t.addShape("ellipse",{attrs:a,className:"ellipse-keyShape",name:"ellipse-keyShape",draggable:!0});t.shapeMap["ellipse-keyShape"]=o;var s=n.width,u=n.height,f=n.show,c=n.text;return f&&(c?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,g.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,g.__assign)({x:-s/2,y:-u/2},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,t),o},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,a=n.top,o=n.left,s=n.right,u=n.bottom,f=n.size,c=n.r,l=(0,g.__rest)(n,["top","left","right","bottom","size","r"]),m=this.getSize(e),w=m[0]/2,C=m[1]/2;o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,g.__assign)((0,g.__assign)({},l),{x:-w,y:0,r:f/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,g.__assign)((0,g.__assign)({},l),{x:w,y:0,r:f/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,g.__assign)((0,g.__assign)({},l),{x:0,y:-C,r:f/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),u&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,g.__assign)((0,g.__assign)({},l),{x:0,y:C,r:f/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,v.mix)({},t,r),a=this.getSize(e),o=a[0]/2,s=a[1]/2,u=(0,g.__assign)({x:0,y:0,rx:o,ry:s},n);return u},update:function(e,t,r){var n=t.getContainer(),a=this.getOptions({}).style,o=this.getSize(e),s={stroke:e.color,rx:o[0]/2,ry:o[1]/2},u=t.get("keyShape"),f=(0,v.mix)({},a,u.attr(),s);f=(0,v.mix)(f,e.style),this.updateShape(e,t,f,!0,r),this.updateLinkPoints(e,n)}},"single-node"),uc("diamond",{options:{size:[80,80],style:{stroke:An.defaultNode.style.stroke,fill:An.defaultNode.style.fill,lineWidth:An.defaultNode.style.lineWidth},labelCfg:{style:{fill:An.nodeLabel.style.fill,fontSize:An.nodeLabel.style.fontSize,fontFamily:An.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:An.defaultNode.linkPoints.size,lineWidth:An.defaultNode.linkPoints.lineWidth,fill:An.defaultNode.linkPoints.fill,stroke:An.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,g.__assign)({},An.nodeStateStyles)},shapeType:"diamond",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=t.addShape("path",{attrs:a,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=o;var s=n.width,u=n.height,f=n.show,c=n.text;return f&&(c?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,g.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,g.__assign)({x:-s/2,y:-u/2},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,t),o},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,a=n.top,o=n.left,s=n.right,u=n.bottom,f=n.size,c=n.r,l=(0,g.__rest)(n,["top","left","right","bottom","size","r"]),m=this.getSize(e),w=m[0],C=m[1];o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,g.__assign)((0,g.__assign)({},l),{x:-w/2,y:0,r:f/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,g.__assign)((0,g.__assign)({},l),{x:w/2,y:0,r:f/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,g.__assign)((0,g.__assign)({},l),{x:0,y:-C/2,r:f/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),u&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,g.__assign)((0,g.__assign)({},l),{x:0,y:C/2,r:f/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},getPath:function(e){var t=this.getSize(e),r=t[0],n=t[1],a=[["M",0,-n/2],["L",r/2,0],["L",0,n/2],["L",-r/2,0],["Z"]];return a},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,v.mix)({},t,r),a=this.getPath(e),o=(0,g.__assign)({path:a},n);return o},update:function(e,t,r){var n=t.getContainer(),a=this.getOptions({}).style,o=this.getPath(e),s={stroke:e.color,path:o},u=t.get("keyShape"),f=(0,v.mix)({},a,u.attr(),s);f=(0,v.mix)(f,e.style),this.updateShape(e,t,f,!0,r),this.updateLinkPoints(e,n)}},"single-node"),uc("triangle",{options:{size:40,direction:"up",style:{stroke:An.defaultNode.style.stroke,fill:An.defaultNode.style.fill,lineWidth:An.defaultNode.style.lineWidth},labelCfg:{style:{fill:An.nodeLabel.style.fill,fontSize:An.nodeLabel.style.fontSize},offset:15},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:An.defaultNode.linkPoints.size,lineWidth:An.defaultNode.linkPoints.lineWidth,fill:An.defaultNode.linkPoints.fill,stroke:An.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20,offset:6},stateStyles:(0,g.__assign)({},An.nodeStateStyles)},shapeType:"triangle",labelPosition:"bottom",drawShape:function(e,t){var r=this.mergeStyle||this.getOptions(e),n=r.icon,a=n===void 0?{}:n,o=r.direction,s=this.getShapeStyle(e),u=e.direction||o,f=t.addShape("path",{attrs:s,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=f;var c=a.width,l=a.height,m=a.show,w=a.offset,C=a.text;if(m)if(C)t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,g.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},a),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0});else{var D=-c/2,U=-l/2;(u==="up"||u==="down")&&(U+=w),(u==="left"||u==="right")&&(D+=w),t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,g.__assign)({x:D,y:U},a),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})}return this.drawLinkPoints(e,t),f},drawLinkPoints:function(e,t){var r=this.mergeStyle||this.getOptions(e),n=r.linkPoints,a=n===void 0?{}:n,o=r.direction,s=e.direction||o,u=a.top,f=a.left,c=a.right,l=a.bottom,m=a.size,w=a.r,C=(0,g.__rest)(a,["top","left","right","bottom","size","r"]),D=this.getSize(e),U=D[0];if(f){var $=null,tt=U*Math.sin(1/3*Math.PI),it=U*Math.sin(1/3*Math.PI);s==="up"?$=[-it,tt]:s==="down"?$=[-it,-tt]:s==="left"&&($=[-it,it-tt]),$&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,g.__assign)((0,g.__assign)({},C),{x:$[0],y:$[1],r:m/2||w||5}),className:"link-point-left",name:"link-point-left"}))}if(c){var ct=null,tt=U*Math.sin(1/3*Math.PI),it=U*Math.sin(1/3*Math.PI);s==="up"?ct=[it,tt]:s==="down"?ct=[it,-tt]:s==="right"&&(ct=[it,it-tt]),ct&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,g.__assign)((0,g.__assign)({},C),{x:ct[0],y:ct[1],r:m/2||w||5}),className:"link-point-right",name:"link-point-right"}))}if(u){var _t=null,tt=U*Math.sin(1/3*Math.PI),it=U*Math.sin(1/3*Math.PI);s==="up"?_t=[it-tt,-tt]:s==="left"?_t=[it,-tt]:s==="right"&&(_t=[-it,-tt]),_t&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,g.__assign)((0,g.__assign)({},C),{x:_t[0],y:_t[1],r:m/2||w||5}),className:"link-point-top",name:"link-point-top"}))}if(l){var Bt=null,tt=U*Math.sin(1/3*Math.PI),it=U*Math.sin(1/3*Math.PI);s==="down"?Bt=[-it+tt,tt]:s==="left"?Bt=[it,tt]:s==="right"&&(Bt=[-it,tt]),Bt&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,g.__assign)((0,g.__assign)({},C),{x:Bt[0],y:Bt[1],r:m/2||w||5}),className:"link-point-bottom",name:"link-point-bottom"}))}},getPath:function(e){var t=(this.mergeStyle||this.getOptions(e)).direction,r=e.direction||t,n=this.getSize(e),a=n[0],o=a*Math.sin(1/3*Math.PI),s=a*Math.sin(1/3*Math.PI),u=[["M",-s,o],["L",0,-o],["L",s,o],["Z"]];return r==="down"?u=[["M",-s,-o],["L",s,-o],["L",0,o],["Z"]]:r==="left"?u=[["M",-s,s-o],["L",s,-s],["L",s,s],["Z"]]:r==="right"&&(u=[["M",s,s-o],["L",-s,s],["L",-s,-s],["Z"]]),u},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,v.mix)({},t,r),a=this.getPath(e),o=(0,g.__assign)({path:a},n);return o},update:function(e,t,r){var n=t.getContainer(),a=this.getOptions({}).style,o=this.getPath(e),s={stroke:e.color,path:o},u=t.get("keyShape"),f=(0,v.mix)({},a,u.attr(),s);f=(0,v.mix)(f,e.style),this.updateShape(e,t,f,!0,r),this.updateLinkPoints(e,n)},updateLinkPoints:function(e,t){var r=this.getOptions({}),n=r.linkPoints,a=r.direction,o=e.direction||a,s=t.shapeMap["link-point-left"]||t.find(function(Cr){return Cr.get("className")==="link-point-left"}),u=t.shapeMap["link-point-right"]||t.find(function(Cr){return Cr.get("className")==="link-point-right"}),f=t.shapeMap["link-point-top"]||t.find(function(Cr){return Cr.get("className")==="link-point-top"}),c=t.shapeMap["link-point-bottom"]||t.find(function(Cr){return Cr.get("className")==="link-point-bottom"}),l=n,m=s||u||f||c;m&&(l=m.attr());var w=(0,v.mix)({},l,e.linkPoints),C=w.fill,D=w.stroke,U=w.lineWidth,$=w.size/2;$||($=w.r);var tt=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,bottom:void 0},it=tt.left,ct=tt.right,_t=tt.top,Bt=tt.bottom,Pt=this.getSize(e),Qt=Pt[0],ye={r:$,fill:C,stroke:D,lineWidth:U},ce=null,Ne=Qt*Math.sin(1/3*Math.PI),$e=Qt*Math.sin(1/3*Math.PI);o==="up"?ce=[-$e,Ne]:o==="down"?ce=[-$e,-Ne]:o==="left"&&(ce=[-$e,$e-Ne]),ce&&(s?!it&&it!==void 0?(s.remove(),delete t.shapeMap["link-point-left"]):s.attr((0,g.__assign)((0,g.__assign)({},ye),{x:ce[0],y:ce[1]})):it&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,g.__assign)((0,g.__assign)({},ye),{x:ce[0],y:ce[1]}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})));var Rr=null;o==="up"?Rr=[$e,Ne]:o==="down"?Rr=[$e,-Ne]:o==="right"&&(Rr=[$e,$e-Ne]),Rr&&(u?!ct&&ct!==void 0?(u.remove(),delete t.shapeMap["link-point-right"]):u.attr((0,g.__assign)((0,g.__assign)({},ye),{x:Rr[0],y:Rr[1]})):ct&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,g.__assign)((0,g.__assign)({},ye),{x:Rr[0],y:Rr[1]}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})));var rn=null;o==="up"?rn=[$e-Ne,-Ne]:o==="left"?rn=[$e,-Ne]:o==="right"&&(rn=[-$e,-Ne]),rn&&(f?!_t&&_t!==void 0?(f.remove(),delete t.shapeMap["link-point-top"]):f.attr((0,g.__assign)((0,g.__assign)({},ye),{x:rn[0],y:rn[1]})):_t&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,g.__assign)((0,g.__assign)({},ye),{x:rn[0],y:rn[1]}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})));var Vr=null;o==="down"?Vr=[-$e+Ne,Ne]:o==="left"?Vr=[$e,Ne]:o==="right"&&(Vr=[-$e,Ne]),Vr&&(c?!Bt&&Bt!==void 0?(c.remove(),delete t.shapeMap["link-point-bottom"]):c.attr((0,g.__assign)((0,g.__assign)({},ye),{x:Vr[0],y:Vr[1]})):Bt&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,g.__assign)((0,g.__assign)({},ye),{x:Vr[0],y:Vr[1]}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0})))}},"single-node"),uc("modelRect",{options:{size:[185,70],style:{radius:5,stroke:"#69c0ff",fill:"#ffffff",lineWidth:An.defaultNode.style.lineWidth,fillOpacity:1},labelCfg:{style:{fill:"#595959",fontSize:14,fontFamily:An.windowFontFamily},offset:30},descriptionCfg:{style:{fontSize:12,fill:"#bfbfbf",fontFamily:An.windowFontFamily},paddingTop:0},preRect:{show:!0,width:4,fill:"#40a9ff",radius:2},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:10,lineWidth:1,fill:"#72CC4A",stroke:"#72CC4A"},logoIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/4f81893c-1806-4de4-aff3-9a6b266bc8a2.svg",width:16,height:16,offset:0},stateIcon:{show:!0,x:0,y:0,img:"https://gw.alipayobjects.com/zos/basement_prod/300a2523-67e0-4cbf-9d4a-67c077b40395.svg",width:16,height:16,offset:-5},anchorPoints:[[0,.5],[1,.5]]},shapeType:"modelRect",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).preRect,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=this.getSize(e),s=o[0],u=o[1],f=t.addShape("rect",{attrs:a,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=f;var c=n.show,l=(0,g.__rest)(n,["show"]);return c&&(t.shapeMap["pre-rect"]=t.addShape("rect",{attrs:(0,g.__assign)({x:-s/2,y:-u/2,height:u},l),className:"pre-rect",name:"pre-rect",draggable:!0})),this.drawLogoIcon(e,t),this.drawStateIcon(e,t),this.drawLinkPoints(e,t),f},drawLogoIcon:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).logoIcon,n=r===void 0?{}:r,a=this.getSize(e),o=a[0];if(n.show){var s=n.width,u=n.height,f=n.x,c=n.y,l=n.offset,m=n.text,w=(0,g.__rest)(n,["width","height","x","y","offset","text"]);m?t.shapeMap["rect-logo-icon"]=t.addShape("text",{attrs:(0,g.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},w),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0}):t.shapeMap["rect-logo-icon"]=t.addShape("image",{attrs:(0,g.__assign)((0,g.__assign)({},w),{x:f||-o/2+s+l,y:c||-u/2,width:s,height:u}),className:"rect-logo-icon",name:"rect-logo-icon",draggable:!0})}},drawStateIcon:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).stateIcon,n=r===void 0?{}:r,a=this.getSize(e),o=a[0];if(n.show){var s=n.width,u=n.height,f=n.x,c=n.y,l=n.offset,m=n.text,w=(0,g.__rest)(n,["width","height","x","y","offset","text"]);m?t.shapeMap["rect-state-icon"]=t.addShape("text",{attrs:(0,g.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},w),className:"rect-state-icon",name:"rect-state-icon",draggable:!0}):t.shapeMap["rect-state-icon"]=t.addShape("image",{attrs:(0,g.__assign)((0,g.__assign)({},w),{x:f||o/2-s+l,y:c||-u/2,width:s,height:u}),className:"rect-state-icon",name:"rect-state-icon",draggable:!0})}},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,a=n.top,o=n.left,s=n.right,u=n.bottom,f=n.size,c=n.r,l=(0,g.__rest)(n,["top","left","right","bottom","size","r"]),m=this.getSize(e),w=m[0],C=m[1];o&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,g.__assign)((0,g.__assign)({},l),{x:-w/2,y:0,r:f/2||c||5}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),s&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,g.__assign)((0,g.__assign)({},l),{x:w/2,y:0,r:f/2||c||5}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),a&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,g.__assign)((0,g.__assign)({},l),{x:0,y:-C/2,r:f/2||c||5}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),u&&(t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,g.__assign)((0,g.__assign)({},l),{x:0,y:C/2,r:f/2||c||5}),className:"link-point-bottom",name:"link-point-bottom",isAnchorPoint:!0}))},drawLabel:function(e,t){var r=this.getOptions(e),n=r.labelCfg,a=n===void 0?{}:n,o=r.logoIcon,s=o===void 0?{}:o,u=r.descriptionCfg,f=u===void 0?{}:u,c=this.getSize(e),l=c[0],m=null,w=s.show,C=s.width,D=-l/2+a.offset;w&&(D=-l/2+C+a.offset);var U=a.style,$=f.style,tt=f.paddingTop;return(0,v.isString)(e.description)?(m=t.addShape("text",{attrs:(0,g.__assign)((0,g.__assign)({},U),{x:D,y:-5,text:e.label}),className:"text-shape",name:"text-shape",draggable:!0,labelRelated:!0}),t.shapeMap["text-shape"]=m,t.shapeMap["rect-description"]=t.addShape("text",{attrs:(0,g.__assign)((0,g.__assign)({},$),{x:D,y:17+(tt||0),text:e.description}),className:"rect-description",name:"rect-description",draggable:!0,labelRelated:!0})):(m=t.addShape("text",{attrs:(0,g.__assign)((0,g.__assign)({},U),{x:D,y:7,text:e.label}),className:"text-shape",name:"text-shape",draggable:!0,labelRelated:!0}),t.shapeMap["text-shape"]=m),m},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,v.mix)({},t,r),a=this.getSize(e),o=n.width||a[0],s=n.height||a[1],u=(0,g.__assign)({x:-o/2,y:-s/2,width:o,height:s},n);return u},update:function(e,t){var r=this.mergeStyle||this.getOptions(e),n=r.style,a=n===void 0?{}:n,o=r.labelCfg,s=o===void 0?{}:o,u=r.descriptionCfg,f=u===void 0?{}:u,c=this.getSize(e),l=c[0],m=c[1],w=t.get("keyShape");w.attr((0,g.__assign)((0,g.__assign)({},a),{x:-l/2,y:-m/2,width:l,height:m}));var C=t.getContainer(),D=C.shapeMap["rect-logo-icon"]||C.find(function(Oa){return Oa.get("className")==="rect-logo-icon"}),U=D?D.attr():{},$=(0,v.mix)({},U,e.logoIcon),tt=$.width;tt===void 0&&(tt=this.options.logoIcon.width);var it=e.logoIcon?e.logoIcon.show:void 0,ct=s.offset,_t=-l/2+tt+ct;!it&&it!==void 0&&(_t=-l/2+ct);var Bt=C.shapeMap["node-label"]||C.find(function(Oa){return Oa.get("className")==="node-label"}),Pt=C.shapeMap["rect-description"]||C.find(function(Oa){return Oa.get("className")==="rect-description"});if(e.label)if(!Bt)C.shapeMap["node-label"]=C.addShape("text",{attrs:(0,g.__assign)((0,g.__assign)({},s.style),{x:_t,y:e.description?-5:7,text:e.label}),className:"node-label",name:"node-label",draggable:!0,labelRelated:!0});else{var Qt=e.labelCfg?e.labelCfg.style:{},ye=(0,v.mix)({},Bt.attr(),Qt);e.label&&(ye.text=e.label),ye.x=_t,(0,v.isString)(e.description)&&(ye.y=-5),Pt&&(Pt.resetMatrix(),Pt.attr({x:_t})),Bt.resetMatrix(),Bt.attr(ye)}if((0,v.isString)(e.description)){var ce=f.paddingTop;if(!Pt)C.shapeMap["rect-description"]=C.addShape("text",{attrs:(0,g.__assign)((0,g.__assign)({},f.style),{x:_t,y:17+(ce||0),text:e.description}),className:"rect-description",name:"rect-description",draggable:!0,labelRelated:!0});else{var Qt=e.descriptionCfg?e.descriptionCfg.style:{},Ne=(0,v.mix)({},Pt.attr(),Qt);(0,v.isString)(e.description)&&(Ne.text=e.description),Ne.x=_t,Pt.resetMatrix(),Pt.attr((0,g.__assign)((0,g.__assign)({},Ne),{y:17+(ce||0)}))}}var $e=C.shapeMap["pre-rect"]||C.find(function(Oa){return Oa.get("className")==="pre-rect"});if($e&&!$e.destroyed){var Rr=(0,v.mix)({},$e.attr(),e.preRect);$e.attr((0,g.__assign)((0,g.__assign)({},Rr),{x:-l/2,y:-m/2,height:m}))}if(D&&!D.destroyed)if(!it&&it!==void 0)D.remove(),delete C.shapeMap["pre-rect"];else{var rn=$.width,Vr=$.height,Cr=$.x,Cn=$.y,_n=$.offset,Tr=(0,g.__rest)($,["width","height","x","y","offset"]);D.attr((0,g.__assign)((0,g.__assign)({},Tr),{x:Cr||-l/2+rn+_n,y:Cn||-Vr/2,width:rn,height:Vr}))}else it&&this.drawLogoIcon(e,C);var jr=C.shapeMap["rect-state-icon"]||C.find(function(Oa){return Oa.get("className")==="rect-state-icon"}),dn=jr?jr.attr():{},vn=(0,v.mix)({},dn,e.stateIcon);if(jr){!vn.show&&vn.show!==void 0&&(jr.remove(),delete C.shapeMap["rect-state-icon"]);var Pn=vn.width,Vr=vn.height,Cr=vn.x,Cn=vn.y,Wn=vn.offset,ma=(0,g.__rest)(vn,["width","height","x","y","offset"]);jr.attr((0,g.__assign)((0,g.__assign)({},ma),{x:Cr||l/2-Pn+Wn,y:Cn||-Vr/2,width:Pn,height:Vr}))}else vn.show&&this.drawStateIcon(e,C);this.updateLinkPoints(e,C)},getOptions:function(e,t){return t==="move"?e:(0,v.deepMix)({},this.options,this.getCustomConfig(e)||{},e)}},"single-node"),uc("star",{options:{size:60,style:{stroke:An.defaultNode.style.stroke,fill:An.defaultNode.style.fill,lineWidth:An.defaultNode.style.lineWidth},labelCfg:{style:{fill:An.nodeLabel.style.fill,fontSize:An.nodeLabel.style.fontSize,fontFamily:An.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:An.defaultNode.linkPoints.size,lineWidth:An.defaultNode.linkPoints.lineWidth,fill:An.defaultNode.linkPoints.fill,stroke:An.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,g.__assign)({},An.nodeStateStyles)},shapeType:"star",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=t.addShape("path",{attrs:a,className:"".concat(this.type,"-keyShape"),name:"".concat(this.type,"-keyShape"),draggable:!0});t.shapeMap["".concat(this.type,"-keyShape")]=o;var s=n.width,u=n.height,f=n.show,c=n.text;return f&&(c?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,g.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,g.__assign)({x:-s/2,y:-u/2},n),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),this.drawLinkPoints(e,t),o},drawLinkPoints:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).linkPoints,n=r===void 0?{}:r,a=n.top,o=n.left,s=n.right,u=n.leftBottom,f=n.rightBottom,c=n.size,l=n.r,m=(0,g.__rest)(n,["top","left","right","leftBottom","rightBottom","size","r"]),w=this.getSize(e),C=w[0];if(s){var D=Math.cos(.1*Math.PI)*C,U=Math.sin((18+72*0)/180*Math.PI)*C;t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,g.__assign)((0,g.__assign)({},m),{x:D,y:-U,r:c/2||l||5}),className:"link-point-right",name:"link-point-right"})}if(a){var D=Math.cos(.5*Math.PI)*C,U=Math.sin((18+72*1)/180*Math.PI)*C;t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,g.__assign)((0,g.__assign)({},m),{x:D,y:-U,r:c/2||l||5}),className:"link-point-top",name:"link-point-top"})}if(o){var D=Math.cos(.9*Math.PI)*C,U=Math.sin((18+72*2)/180*Math.PI)*C;t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,g.__assign)((0,g.__assign)({},m),{x:D,y:-U,r:c/2||l||5}),className:"link-point-left",name:"link-point-left"})}if(u){var D=Math.cos(1.3*Math.PI)*C,U=Math.sin((18+72*3)/180*Math.PI)*C;t.shapeMap["link-point-bottom"]=t.addShape("circle",{attrs:(0,g.__assign)((0,g.__assign)({},m),{x:D,y:-U,r:c/2||l||5}),className:"link-point-left-bottom",name:"link-point-left-bottom"})}if(f){var D=Math.cos(1.7*Math.PI)*C,U=Math.sin((18+72*4)/180*Math.PI)*C;t.shapeMap["link-point-right-bottom"]=t.addShape("circle",{attrs:(0,g.__assign)((0,g.__assign)({},m),{x:D,y:-U,r:c/2||l||5}),className:"link-point-right-bottom",name:"link-point-right-bottom"})}},getPath:function(e){var t=this.getSize(e),r=t[0],n=r*3/8,a=e.innerR||n;return Ns.getStarPath(r,a)},getShapeStyle:function(e){var t=(this.mergeStyle||this.getOptions(e)).style,r={stroke:e.color},n=(0,v.mix)({},t,r),a=this.getPath(e),o=(0,g.__assign)({path:a},n);return o},update:function(e,t,r){var n=t.getContainer(),a=this.getOptions({}).style,o=this.getPath(e),s={stroke:e.color,path:o},u=t.get("keyShape"),f=(0,v.mix)({},a,u.attr(),s);f=(0,v.mix)(f,e.style),this.updateShape(e,t,f,!0,r),this.updateLinkPoints(e,n)},updateLinkPoints:function(e,t){var r=this.getOptions({}).linkPoints,n=t.shapeMap["link-point-left"]||t.find(function(Ne){return Ne.get("className")==="link-point-left"}),a=t.shapeMap["link-point-right"]||t.find(function(Ne){return Ne.get("className")==="link-point-right"}),o=t.shapeMap["link-point-top"]||t.find(function(Ne){return Ne.get("className")==="link-point-top"}),s=t.shapeMap["link-point-left-bottom"]||t.find(function(Ne){return Ne.get("className")==="link-point-left-bottom"}),u=t.shapeMap["link-point-left-bottom"]||t.find(function(Ne){return Ne.get("className")==="link-point-right-bottom"}),f=r,c=n||a||o||s||u;c&&(f=c.attr());var l=(0,v.mix)({},f,e.linkPoints),m=l.fill,w=l.stroke,C=l.lineWidth,D=l.size/2;D||(D=l.r);var U=e.linkPoints?e.linkPoints:{left:void 0,right:void 0,top:void 0,leftBottom:void 0,rightBottom:void 0},$=U.left,tt=U.right,it=U.top,ct=U.leftBottom,_t=U.rightBottom,Bt=this.getSize(e),Pt=Bt[0],Qt={r:D,fill:m,stroke:w,lineWidth:C},ye=Math.cos((18+72*0)/180*Math.PI)*Pt,ce=Math.sin((18+72*0)/180*Math.PI)*Pt;a?!tt&&tt!==void 0?(a.remove(),delete t.shapeMap["link-point-right"]):a.attr((0,g.__assign)((0,g.__assign)({},Qt),{x:ye,y:-ce})):tt&&(t.shapeMap["link-point-right"]=t.addShape("circle",{attrs:(0,g.__assign)((0,g.__assign)({},Qt),{x:ye,y:-ce}),className:"link-point-right",name:"link-point-right",isAnchorPoint:!0})),ye=Math.cos((18+72*1)/180*Math.PI)*Pt,ce=Math.sin((18+72*1)/180*Math.PI)*Pt,o?!it&&it!==void 0?(o.remove(),delete t.shapeMap["link-point-top"]):o.attr((0,g.__assign)((0,g.__assign)({},Qt),{x:ye,y:-ce})):it&&(t.shapeMap["link-point-top"]=t.addShape("circle",{attrs:(0,g.__assign)((0,g.__assign)({},Qt),{x:ye,y:-ce}),className:"link-point-top",name:"link-point-top",isAnchorPoint:!0})),ye=Math.cos((18+72*2)/180*Math.PI)*Pt,ce=Math.sin((18+72*2)/180*Math.PI)*Pt,n?!$&&$!==void 0?(n.remove(),delete t.shapeMap["link-point-left"]):n.attr((0,g.__assign)((0,g.__assign)({},Qt),{x:ye,y:-ce})):$&&(t.shapeMap["link-point-left"]=t.addShape("circle",{attrs:(0,g.__assign)((0,g.__assign)({},Qt),{x:ye,y:-ce}),className:"link-point-left",name:"link-point-left",isAnchorPoint:!0})),ye=Math.cos((18+72*3)/180*Math.PI)*Pt,ce=Math.sin((18+72*3)/180*Math.PI)*Pt,s?!ct&&ct!==void 0?(s.remove(),delete t.shapeMap["link-point-left-bottom"]):s.attr((0,g.__assign)((0,g.__assign)({},Qt),{x:ye,y:-ce})):ct&&(t.shapeMap["link-point-left-bottom"]=t.addShape("circle",{attrs:(0,g.__assign)((0,g.__assign)({},Qt),{x:ye,y:-ce}),className:"link-point-left-bottom",name:"link-point-left-bottom",isAnchorPoint:!0})),ye=Math.cos((18+72*4)/180*Math.PI)*Pt,ce=Math.sin((18+72*4)/180*Math.PI)*Pt,u?!_t&&_t!==void 0?(u.remove(),delete t.shapeMap["link-point-right-bottom"]):u.attr((0,g.__assign)((0,g.__assign)({},Qt),{x:ye,y:-ce})):_t&&(t.shapeMap["link-point-right-bottom"]=t.addShape("circle",{attrs:(0,g.__assign)((0,g.__assign)({},Qt),{x:ye,y:-ce}),className:"link-point-right-bottom",name:"link-point-right-bottom",isAnchorPoint:!0}))}},"single-node");var A0=Ns.defaultSubjectColors,Wh="fan-shape-";uc("donut",{options:{size:An.defaultNode.size,style:{x:0,y:0,stroke:An.defaultNode.style.stroke,fill:An.defaultNode.style.fill,lineWidth:An.defaultNode.style.lineWidth},labelCfg:{style:{fill:An.nodeLabel.style.fill,fontSize:An.nodeLabel.style.fontSize,fontFamily:An.windowFontFamily}},linkPoints:{top:!1,right:!1,bottom:!1,left:!1,size:An.defaultNode.linkPoints.size,lineWidth:An.defaultNode.linkPoints.lineWidth,fill:An.defaultNode.linkPoints.fill,stroke:An.defaultNode.linkPoints.stroke},icon:{show:!1,img:"https://gw.alipayobjects.com/zos/bmw-prod/5d015065-8505-4e7a-baec-976f81e3c41d.svg",width:20,height:20},stateStyles:(0,g.__assign)({},An.nodeStateStyles)},shapeType:"circle",labelPosition:"center",drawShape:function(e,t){var r=(this.mergeStyle||this.getOptions(e)).icon,n=r===void 0?{}:r,a=this.getShapeStyle(e),o=(0,v.deepMix)({},n,e.icon),s=t.addShape("circle",{attrs:a,className:"".concat(this.type,"-keyShape"),draggable:!0,name:"".concat(this.type,"-keyShape")});t.shapeMap["".concat(this.type,"-keyShape")]=s;var u=o.width,f=o.height,c=o.show,l=o.text;return c&&(l?t.shapeMap["".concat(this.type,"-icon")]=t.addShape("text",{attrs:(0,g.__assign)({x:0,y:0,fontSize:12,fill:"#000",stroke:"#000",textBaseline:"middle",textAlign:"center"},o),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0}):t.shapeMap["".concat(this.type,"-icon")]=t.addShape("image",{attrs:(0,g.__assign)({x:-u/2,y:-f/2},o),className:"".concat(this.type,"-icon"),name:"".concat(this.type,"-icon"),draggable:!0})),v_(e,t,s),this.drawLinkPoints(e,t),s},updateShape:function(e,t,r,n,a){var o=t.get("keyShape");o.attr((0,g.__assign)({},r)),p_(e,t,o),this.updateLabel(e,t,a),n&&this.updateIcon(e,t)}},"circle");var v_=function(e,t,r){var n=e.donutAttrs,a=n===void 0?{}:n,o=e.donutColorMap,s=o===void 0?{}:o,u=Object.keys(a).length;if(a&&u>1){var f=C0(a,s),c=f.configs,l=f.totalValue;if(l){var m=T0(r),w=m.lineWidth,C=m.arcR,D=[C,0],U=0;if(u===1){Ov(t,{arcR:C,arcBegin:D,beginAngle:U,config:c[0],fanIndex:0,lineWidth:w,totalValue:l,drawWhole:!0});return}for(var $=0;$<c.length;$++){var tt=Ov(t,{arcR:C,arcBegin:D,beginAngle:U,config:c[$],fanIndex:$,lineWidth:w,totalValue:l});if(tt.shouldEnd)return;D=tt.arcBegin,U=tt.beginAngle}}}},Ov=function(e,t){var r=t.arcR,n=t.arcBegin,a=t.beginAngle,o=t.config,s=t.fanIndex,u=t.lineWidth,f=t.totalValue,c=t.drawWhole,l=c===void 0?!1:c,m=t.updateShape,w=m===void 0?void 0:m,C=o.value/f;if(C<.001)return{beginAngle:a,arcBegin:n,shape:void 0,shouldEnd:!1};var D,U,$;if(l||C>.999)D=[r,1e-4],$=1;else{var tt=C*Math.PI*2;U=a+tt,D=[r*Math.cos(U),-r*Math.sin(U)],$=tt>Math.PI?1:0}var it={path:[["M",n[0],n[1]],["A",r,r,0,$,0,D[0],D[1]]],stroke:o.color||(w==null?void 0:w.attr("stroke"))||A0[s%A0.length],lineWidth:u};return w?w.attr(it):e.shapeMap["".concat(Wh).concat(s)]=e.addShape("path",{attrs:it,name:"".concat(Wh).concat(s),draggable:!0}),{beginAngle:U,arcBegin:D,shape:e.shapeMap["".concat(Wh).concat(s)],shouldEnd:l||C>.999}},p_=function(e,t,r){var n=e.donutAttrs,a=e.donutColorMap,o=a===void 0?{}:a,s={},u=t.getContainer();if(n){var f=C0(n,o),c=f.configs,l=f.totalValue;if(l)for(var m=T0(r),w=m.lineWidth,C=m.arcR,D=[C,0],U=0,$=0;$<c.length;$++){var tt="".concat(Wh).concat($),it=Ov(u,{arcR:C,arcBegin:D,beginAngle:U,config:c[$],fanIndex:$,lineWidth:w,totalValue:l,drawWhole:c.length===1,updateShape:u.shapeMap[tt]});if(it.shape&&(s[tt]=!0),it.shouldEnd)break;D=it.arcBegin,U=it.beginAngle}}var ct=Object.keys(u.shapeMap).filter(function(_t){return _t.includes(Wh)});ct.forEach(function(_t){s[_t]||(u.shapeMap[_t].remove(!0),delete u.shapeMap[_t])})},C0=function(e,t){var r=0,n=[];return Object.keys(e).forEach(function(a){var o=+e[a];isNaN(o)||(n.push({key:a,value:o,color:t[a]}),r+=o)}),{totalValue:r,configs:n}},T0=function(e){var t=e.attr("r"),r=.6*t,n=(t+r)/2,a=t-r;return{lineWidth:a,arcR:n}},Ad=function(e){var t=e.x,r=e.y;return{x:t,y:r,centerX:t,centerY:r,minX:t,minY:r,maxX:t,maxY:r,height:0,width:0}},g_=function(e){e===void 0&&(e=[]);var t=[],r=[];e.forEach(function(u){t.push(u.x),r.push(u.y)});var n=Math.min.apply(Math,t),a=Math.max.apply(Math,t),o=Math.min.apply(Math,r),s=Math.max.apply(Math,r);return{centerX:(n+a)/2,centerY:(o+s)/2,maxX:a,maxY:s,minX:n,minY:o,height:s-o,width:a-n}},rS=function(e,t){return Math.abs(e.centerX-t.centerX)*2<e.width+t.width&&Math.abs(e.centerY-t.centerY)*2<e.height+t.height},Dv=function(e){for(var t=[],r={},n=e.length,a=n-1;a>=0;a--){var o=e[a];o.id="".concat(o.x,"|||").concat(o.y),r[o.id]||(r[o.id]=o,t.push(o))}return t},I0=function(e){return Dv(e)},nS=function(e,t){return[e,{x:e.x,y:t.y},t]},Cd=function(e,t){return e.width||e.height?{centerX:e.centerX,centerY:e.centerY,minX:e.minX-t,minY:e.minY-t,maxX:e.maxX+t,maxY:e.maxY+t,height:e.height+2*t,width:e.width+2*t}:e},y_=function(e,t){var r=Math.abs(e.x-t.centerX),n=Math.abs(e.y-t.centerY);return r===0&&n===0?0:r/t.width>n/t.height},Pv=function(e,t,r){var n=y_(t,e);if(n===0){var a=e.centerX,o=e.centerY;return r.y<t.y?o=e.minY:r.x>t.x?a=e.maxX:r.x<t.x?a=e.minX:r.x===t.x&&(o=e.maxY),{x:a,y:o}}return n?{x:t.x>e.centerX?e.maxX:e.minX,y:t.y}:{x:t.x,y:t.y>e.centerY?e.maxY:e.minY}},k0=function(e,t){var r=Math.min(e.minX,t.minX),n=Math.min(e.minY,t.minY),a=Math.max(e.maxX,t.maxX),o=Math.max(e.maxY,t.maxY);return{centerX:(r+a)/2,centerY:(n+o)/2,minX:r,minY:n,maxX:a,maxY:o,height:o-n,width:a-r}},Rv=function(e){return[{x:e.minX,y:e.minY},{x:e.maxX,y:e.minY},{x:e.maxX,y:e.maxY},{x:e.minX,y:e.maxY}]},Td=function(e,t){var r=e.x,n=e.y;return r<t.minX||r>t.maxX||n<t.minY||n>t.maxY},m_=function(e,t){return t<e.minX||t>e.maxX?[]:[{x:t,y:e.minY},{x:t,y:e.maxY}]},b_=function(e,t){return t<e.minY||t>e.maxY?[]:[{x:e.minX,y:t},{x:e.maxX,y:t}]},x_=function(e,t){return m_(e,t.x).concat(b_(e,t.y))},Vh=function(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},w_=function(e,t){var r=-2,n=0;return t.forEach(function(a){a&&(e.x===a.x&&(n+=r),e.y===a.y&&(n+=r))}),n},L0=function(e,t,r,n,a){return Vh(e,t)+Vh(e,r)+w_(e,[t,r,n,a])},E_=function i(e,t,r,n,a){a===void 0&&(a=0),e.unshift(t[n]),r[n]&&r[n]!==n&&a<=100&&i(e,t,r,r[n],a+1)},aS=function(e,t){var r=e.indexOf(t);r>-1&&e.splice(r,1)},Id=function(e,t,r,n){var a=r.x-e.x,o=r.y-e.y,s=n.x-e.x,u=n.y-e.y,f=r.x-t.x,c=r.y-t.y,l=n.x-t.x,m=n.y-t.y,w=a*u-o*s,C=f*m-c*l,D=a*c-o*f,U=s*m-u*l;return w*C<=0&&D*U<=0},Bv=function(e,t,r){if(r.width||r.height){var n=Rv(r),a=n[0],o=n[1],s=n[2],u=n[3];return Id(e,t,a,o)||Id(e,t,a,u)||Id(e,t,o,s)||Id(e,t,s,u)}return!1},__=function(e,t,r,n){var a=[];return e.forEach(function(o){if(o!==t&&(o.x===t.x||o.y===t.y)){if(Bv(o,t,r)||Bv(o,t,n))return;a.push(o)}}),Dv(a)},S_=function(e,t,r,n,a,o,s){var u,f=[],c=(u={},u[t.id]=t,u),l={},m={},w={};m[t.id]=0,w[t.id]=L0(t,r,t);var C=new D0;C.add({id:t.id,value:w[t.id]});var D={};e.forEach(function(_t){D[_t.id]=_t});for(var U;Object.keys(c).length;){var $=C.minId(!1);if($)U=c[$];else break;if(U===r){var tt=[];return E_(tt,D,l,r.id),tt}delete c[U.id],C.remove(U.id),f.push(U);var it=__(e,U,n,a),ct=function(Bt){Bt.forEach(function(Pt){if(f.indexOf(Pt)===-1){var Qt=Pt.id;c[Qt]||(c[Qt]=Pt);var ye=w[U.id]+Vh(U,Pt);if(m[Qt]&&ye>=m[Qt]){C.add({id:Qt,value:w[Qt]});return}l[Qt]=U.id,m[Qt]=ye,w[Qt]=m[Qt]+L0(Pt,r,t,o,s),C.add({id:Qt,value:w[Qt]})}})};ct(it)}return[t,r]},M_=function(e,t,r){return!(e.x===t.x&&t.x===r.x||e.y===t.y&&t.y===r.y)},A_=function(e,t,r,n){var a=Vh(e,t),o=Vh(r,t);a<n&&(n=a),o<n&&(n=o);var s={x:t.x-n/a*(t.x-e.x),y:t.y-n/a*(t.y-e.y)},u={x:t.x-n/o*(t.x-r.x),y:t.y-n/o*(t.y-r.y)};return[s,u]},N0=function(e,t){var r=[],n=e[0];return r.push("M".concat(n.x," ").concat(n.y)),e.forEach(function(a,o){var s=e[o+1],u=e[o+2];if(s&&u)if(M_(a,s,u)){var f=A_(a,s,u,t),c=f[0],l=f[1];r.push("L".concat(c.x," ").concat(c.y)),r.push("Q".concat(s.x," ").concat(s.y," ").concat(l.x," ").concat(l.y)),r.push("L".concat(l.x," ").concat(l.y))}else r.push("L".concat(s.x," ").concat(s.y));else s&&r.push("L".concat(s.x," ").concat(s.y))}),r.join("")},O0=function(e,t,r,n,a){var o,s;if(!r||!r.getType())o=Ad(e);else if(r.getType()==="combo"){var u=r.getKeyShape().getBBox();if(u){var f=r.getModel(),c=f.x,l=f.y;o={x:c,y:l,width:u.width,height:u.height,minX:u.minX+c,maxX:u.maxX+c,minY:u.minY+l,maxY:u.maxY+l},o.centerX=(o.minX+o.maxX)/2,o.centerY=(o.minY+o.maxY)/2}else o=Ad(e)}else o=r&&r.getBBox();if(!n||!n.getType())s=Ad(t);else if(n.getType()==="combo"){var m=n.getKeyShape().getBBox();if(m){var w=n.getModel(),C=w.x,D=w.y;s={x:C,y:D,width:m.width,height:m.height,minX:m.minX+C,maxX:m.maxX+C,minY:m.minY+D,maxY:m.maxY+D},s.centerX=(s.minX+s.maxX)/2,s.centerY=(s.minY+s.maxY)/2}else s=Ad(t)}else s=n&&n.getBBox();var U=Cd(o,a),$=Cd(s,a),tt=Pv(U,e,t),it=Pv($,t,e),ct=g_([tt,it]),_t=k0(U,ct),Bt=k0($,ct),Pt=[];Pt=Pt.concat(Rv(_t)).concat(Rv(Bt));var Qt={x:(e.x+t.x)/2,y:(e.y+t.y)/2};[ct,_t,Bt].forEach(function(ce){Pt=Pt.concat(x_(ce,Qt).filter(function(Ne){return Td(Ne,U)&&Td(Ne,$)}))}),[{x:tt.x,y:it.y},{x:it.x,y:tt.y}].forEach(function(ce){Td(ce,U)&&Td(ce,$)&&Pt.push(ce)}),Pt.unshift(tt),Pt.push(it),Pt=Dv(Pt);var ye=S_(Pt,tt,it,o,s,e,t);return ye.unshift(e),ye.push(t),I0(ye)},C_=function(e){if(!(e!=null&&e.length))return e;for(var t=e[e.length-1],r={x:t.x,y:t.y},n=[t],a=[t],o=e.length-2;o>=0;o--){var s=e[o];if(s.x===r.x?n.push(s):(n=[s],r.x=s.x),s.y===r.y?a.push(s):(a=[s],r.y=s.y),n.length>2){var u=e.indexOf(n[1]);u>-1&&e.splice(u,1);continue}if(a.length>2){var u=e.indexOf(a[1]);u>-1&&e.splice(u,1)}}return e},D0=function(){function i(){this.arr=[],this.map={},this.arr=[],this.map={}}return i.prototype._innerAdd=function(e,t){for(var r=[0,t-1];r[1]-r[0]>1;){var n=Math.floor((r[0]+r[1])/2);if(this.arr[n].value>e.value)r[1]=n;else if(this.arr[n].value<e.value)r[0]=n;else{this.arr.splice(n,0,e),this.map[e.id]=!0;return}}this.arr.splice(r[1],0,e),this.map[e.id]=!0},i.prototype.add=function(e){delete this.map[e.id];var t=this.arr.length;if(!t){this.arr.push(e),this.map[e.id]=!0;return}if(this.arr[t-1].value<e.value){this.arr.push(e),this.map[e.id]=!0;return}this._innerAdd(e,t)},i.prototype.remove=function(e){this.map[e]&&delete this.map[e]},i.prototype._clearAndGetMinId=function(){for(var e,t=this.arr.length-1;t>=0;t--)this.map[this.arr[t].id]?e=this.arr[t].id:this.arr.splice(t,1);return e},i.prototype._findFirstId=function(){for(;this.arr.length;){var e=this.arr.shift();if(this.map[e.id])return e.id}},i.prototype.minId=function(e){return e?this._clearAndGetMinId():this._findFirstId()},i}(),T_=function(e,t){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)},I_=function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))},k_=function(e,t){return[e,t]},L_=function(e,t,r,n,a){return I0(O0(e,t,r,n,a.offset))},N_={offset:20,maxAllowedDirectionChange:Math.PI/2,maximumLoops:2e3,gridSize:10,directions:[{stepX:1,stepY:0},{stepX:-1,stepY:0},{stepX:0,stepY:1},{stepX:0,stepY:-1}],get penalties(){return{0:0,45:this.gridSize/2,90:this.gridSize/2}},distFunc:T_,fallbackRoute:L_},iS={maxAllowedDirectionChange:Math.PI/4,directions:[{stepX:1,stepY:0},{stepX:1,stepY:1},{stepX:0,stepY:1},{stepX:-1,stepY:1},{stepX:-1,stepY:0},{stepX:-1,stepY:-1},{stepX:0,stepY:-1},{stepX:1,stepY:-1}],distFunc:I_,fallbackRoute:k_},vc=function(e,t){var r=Math.round(Math.abs(e/t)),n=e<0?-1:1;return r<0?0:n*r},O_=function(e,t,r){var n={};return e.forEach(function(a){if(a)for(var o=Cd(a.getBBox(),r),s=vc(o.minX,t);s<=vc(o.maxX,t);s+=1)for(var u=vc(o.minY,t);u<=vc(o.maxY,t);u+=1)n["".concat(s,"|||").concat(u)]=!0}),n},Fv=function(e,t){var r=t.x-e.x,n=t.y-e.y;return r||n?Math.atan2(n,r):0},P0=function(e,t){var r=Math.abs(e-t);return r>Math.PI?2*Math.PI-r:r},R0=function(e,t,r){for(var n=1/0,a=0,o=t.length;a<o;a++){var s=r(e,t[a]);s<n&&(n=s)}return n},B0=function(e,t,r,n,a){var o=[];if(!r)return[e];var s=a.directions,u=a.offset,f=r.getBBox(),c=t.x>f.minX&&t.x<f.maxX&&t.y>f.minY&&t.y<f.maxY,l=Cd(f,u);for(var m in l)l[m]=vc(l[m],a.gridSize);if(c){for(var w=0,C=s;w<C.length;w++)for(var D=C[w],U=[[{x:l.minX,y:l.minY},{x:l.maxX,y:l.minY}],[{x:l.minX,y:l.minY},{x:l.minX,y:l.maxY}],[{x:l.maxX,y:l.minY},{x:l.maxX,y:l.maxY}],[{x:l.minX,y:l.maxY},{x:l.maxX,y:l.maxY}]],m=0;m<4;m++){var $=U[m],tt=Ns.getLineIntersect(e,{x:e.x+D.stepX*l.width,y:e.y+D.stepY*l.height},$[0],$[1]);tt&&!Bv(e,tt,f)&&(tt.id="".concat(tt.x,"|||").concat(tt.y),o.push(tt))}return o}var it=Pv(l,e,n);return it.id="".concat(it.x,"|||").concat(it.y),[it]},Gv=function(e,t,r,n){var a=Fv(e,t),o=r[e.id];if(!o){var s=Fv(n,e);return P0(s,a)}var u=Fv({x:o.x,y:o.y},e);return P0(u,a)},D_=function(e,t,r,n,a,o,s){var u=[n],f=n,c=e.id,l=e.x,m=e.y,w={x:l,y:m,id:c};Gv(w,o,t,r)&&(f={x:o.x===n.x?n.x:w.x*s,y:o.y===n.y?n.y:w.y*s},u.unshift(f));for(var C=t[c];C&&C.id!==c;){var D={x:l,y:m,id:c},U={x:C.x,y:C.y,id:C.id},$=Gv(U,D,t,r);$&&(f={x:U.x===D.x?f.x:U.x*s,y:U.y===D.y?f.y:U.y*s},u.unshift(f)),c=U.id,l=U.x,m=U.y,C=t[c]}return u[0].x=l===r.x?a.x:f.x,u[0].y=m===r.y?a.y:f.y,u.unshift(a),u},P_=function(e,t,r,n,a){if(isNaN(e.x)||isNaN(t.x))return[];var o=(0,v.deepMix)(N_,a);o.obstacles=o.obstacles||[];var s=o.penalties,u=o.gridSize,f=O_(o.obstacles.concat([r,n]),u,o.offset),c={x:vc(e.x,u),y:vc(e.y,u)},l={x:vc(t.x,u),y:vc(t.y,u)};e.id="".concat(c.x,"|||").concat(c.y),t.id="".concat(l.x,"|||").concat(l.y);var m=B0(c,e,r,l,o),w=B0(l,t,n,c,o);m.forEach(function(Tr){delete f[Tr.id]}),w.forEach(function(Tr){delete f[Tr.id]});for(var C={},D={},U={},$={},tt={},it=new D0,ct=0;ct<m.length;ct++){var _t=m[ct];C[_t.id]=_t,$[_t.id]=0,tt[_t.id]=R0(_t,w,o.distFunc),it.add({id:_t.id,value:tt[_t.id]})}var Bt=o.maximumLoops,Pt,Qt,ye,ce,Ne,$e,Rr=1/0,rn={};for(w.forEach(function(Tr){rn["".concat(Tr.x,"|||").concat(Tr.y)]=!0}),Object.keys(C).forEach(function(Tr){var jr=C[Tr].id;tt[jr]<=Rr&&(Rr=tt[jr],Pt=C[jr])});Object.keys(C).length>0&&Bt>0;){var Vr=it.minId((Bt+1)%30===0);if(Vr)Pt=C[Vr];else break;if(rn["".concat(Pt.x,"|||").concat(Pt.y)])return D_(Pt,U,c,t,e,l,u);delete C[Pt.id],it.remove(Pt.id),D[Pt.id]=!0;for(var ct=0;ct<o.directions.length;ct++){Qt=o.directions[ct];var Cr="".concat(Math.round(Pt.x)+Qt.stepX,"|||").concat(Math.round(Pt.y)+Qt.stepY);if(ye={x:Pt.x+Qt.stepX,y:Pt.y+Qt.stepY,id:Cr},!D[Cr]&&($e=Gv(Pt,ye,U,c),!($e>o.maxAllowedDirectionChange)&&!f[Cr])){C[Cr]||(C[Cr]=ye);var Cn=s[$e];ce=o.distFunc(Pt,ye)+(isNaN(Cn)?u:Cn),Ne=$[Pt.id]+ce;var _n=$[Cr];_n&&Ne>=_n||(U[Cr]=Pt,$[Cr]=Ne,tt[Cr]=Ne+R0(ye,w,o.distFunc),it.add({id:Cr,value:tt[Cr]}))}}Bt-=1}return o.fallbackRoute(e,t,r,n,o)};Cp("polyline",{options:{color:An.defaultEdge.color,size:An.defaultEdge.size,style:{radius:0,offset:15,x:0,y:0,stroke:An.defaultEdge.style.stroke,lineAppendWidth:An.defaultEdge.style.lineAppendWidth},labelCfg:{style:{fill:An.edgeLabel.style.fill,fontSize:An.edgeLabel.style.fontSize,fontFamily:An.windowFontFamily}},routeCfg:{obstacles:[],maxAllowedDirectionChange:Math.PI,maximumLoops:500,gridSize:10},stateStyles:(0,g.__assign)({},An.edgeStateStyles)},shapeType:"polyline",labelPosition:"center",drawShape:function(e,t){var r=this.getShapeStyle(e);r.radius===0&&delete r.radius;var n=t.addShape("path",{className:"edge-shape",name:"edge-shape",attrs:r});return t.shapeMap["edge-shape"]=n,n},getShapeStyle:function(e){var t=this.options.style,r={stroke:e.color},n=(0,v.mix)({},t,r,e.style);e=this.getPathPoints(e),this.radius=n.radius,this.offset=n.offset;var a=e.startPoint,o=e.endPoint,s=this.getControlPoints(e),u=[a];s&&(u=u.concat(s)),u.push(o);var f=e.sourceNode,c=e.targetNode,l=n.radius,m=this.options.routeCfg,w=(0,v.mix)({},m,e.routeCfg);w.offset=n.offset;var C=this.getPath(u,f,c,l,w,!s);((0,v.isArray)(C)&&C.length<=1||(0,v.isString)(C)&&C.indexOf("L")===-1)&&(C="M0 0, L0 0"),(isNaN(a.x)||isNaN(a.y)||isNaN(o.x)||isNaN(o.y))&&(C="M0 0, L0 0");var D=(0,v.mix)({},An.defaultEdge.style,n,{lineWidth:e.size,path:C});return D},updateShapeStyle:function(e,t){var r=t.getContainer();if(t.isVisible()){var n={stroke:e.color},a=r.shapeMap["edge-shape"]||r.find(function(ct){return ct.get("className")==="edge-shape"})||t.getKeyShape(),o=e.size;e=this.getPathPoints(e);var s=e.startPoint,u=e.endPoint,f=this.getControlPoints(e),c=[s];f&&(c=c.concat(f)),c.push(u);var l=a.attr(),m=(0,v.mix)({},n,l,e.style),w=e.sourceNode,C=e.targetNode,D=m.radius,U=this.options.routeCfg,$=(0,v.mix)({},U,e.routeCfg);$.offset=m.offset;var tt=this.getPath(c,w,C,D,$,!f);((0,v.isArray)(tt)&&tt.length<=1||(0,v.isString)(tt)&&tt.indexOf("L")===-1)&&(tt="M0 0, L0 0"),(isNaN(s.x)||isNaN(s.y)||isNaN(u.x)||isNaN(u.y))&&(tt="M0 0, L0 0"),l.endArrow&&m.endArrow===!1&&(e.style.endArrow={path:""}),l.startArrow&&m.startArrow===!1&&(e.style.startArrow={path:""});var it=(0,v.mix)(n,a.attr(),{lineWidth:o,path:tt},e.style);a&&a.attr(it)}},getPath:function(e,t,r,n,a,o){var s=a.offset,u=a.obstacles,f=a.simple;if(!s||e.length>2||o===!1){if(n)return N0(e,n);var c=[];return(0,v.each)(e,function(C,D){D===0?c.push(["M",C.x,C.y]):c.push(["L",C.x,C.y])}),c}f!==!1&&!(u!=null&&u.length)&&(f=!0);var l=f?O0(e[e.length-1],e[0],r,t,s):P_(e[0],e[e.length-1],t,r,a);if(!l||!l.length)return"M0 0, L0 0";if(n){var m=N0(l,n);return m}l=C_(l);var w=Ns.pointsToPolygon(l);return w}},"single-edge");var F0=lc.cloneEvent,G0=lc.isNaN,z0=Math.abs,R_=10,B_=["shift","ctrl","alt","control"],F_={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,scalableRange:0,allowDragOnItem:!1}},getEvents:function(){return{mousedown:"onMouseDown",drag:"onDragMove",dragend:"onMouseUp","canvas:click":"onMouseUp",keyup:"onKeyUp",focus:"onKeyUp",keydown:"onKeyDown",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onMouseUp"}},updateViewport:function(e){var t=this.origin,r=+e.clientX,n=+e.clientY;if(!(G0(r)||G0(n))){var a=r-t.x,o=n-t.y;this.get("direction")==="x"?o=0:this.get("direction")==="y"&&(a=0),this.origin={x:r,y:n};var s=this.graph.get("width"),u=this.graph.get("height"),f=this.graph.get("canvas").getCanvasBBox(),c=this.scalableRange,l=this.scalableRange;c<1&&c>-1&&(c=s*c,l=u*l),(f.minX<=s+c&&f.minX+a>s+c||f.maxX+c>=0&&f.maxX+c+a<0)&&(a=0),(f.minY<=u+l&&f.minY+o>u+l||f.maxY+l>=0&&f.maxY+l+o<0)&&(o=0),this.graph.translate(a,o)}},onTouchStart:function(e){var t=this,r=e.originalEvent.touches,n=r[0],a=r[1];n&&a||(e.preventDefault(),this.mousedown=!0,t.onDragStart(e))},onMouseDown:function(e){this.mousedown=!0},onDragMove:function(e){this.mousedown&&(this.dragstart?this.onDrag(e):(this.dragstart=!0,this.onDragStart(e)))},onDragStart:function(e){var t=this,r=e.originalEvent;if(!(r&&e.name!=="touchstart"&&r.button!==0)&&!(e.name!=="touchstart"&&typeof window!="undefined"&&window.event&&!window.event.buttons&&!window.event.button)&&this.shouldBegin(e,this)&&!t.keydown&&this.allowDrag(e)){if(t.origin={x:e.clientX,y:e.clientY},t.dragging=!1,this.enableOptimize){for(var n=this.graph,a=n.getEdges(),o=0,s=a.length;o<s;o++){var u=a[o].get("group").get("children");u&&u.forEach(function(it){it.set("ori-visibility",it.get("ori-visibility")||it.get("visible")),it.hide()})}for(var f=n.getNodes(),c=0,l=f.length;c<l;c++)for(var m=f[c].getContainer(),w=m.get("children"),C=0,D=w;C<D.length;C++){var U=D[C],$=U.get("isKeyShape");$||(U.set("ori-visibility",U.get("ori-visibility")||U.get("visible")),U.hide())}}if(typeof window!="undefined"){var tt=this;this.handleDOMContextMenu=function(it){return tt.onMouseUp(it)},document.body.addEventListener("contextmenu",this.handleDOMContextMenu)}}},onTouchMove:function(e){var t=this,r=e.originalEvent.touches,n=r[0],a=r[1];if(n&&a){this.onMouseUp(e);return}e.preventDefault(),t.onDrag(e)},onDrag:function(e){if(this.mousedown){var t=this.graph;if(!this.keydown&&this.allowDrag(e)&&(e=F0(e),!!this.origin)){if(this.dragging)e.type="drag",t.emit("canvas:drag",e);else{if(z0(this.origin.x-e.clientX)+z0(this.origin.y-e.clientY)<R_)return;this.shouldBegin(e,this)&&(e.type="dragstart",t.emit("canvas:dragstart",e),this.originPosition={x:e.clientX,y:e.clientY},this.dragging=!0)}this.shouldUpdate(e,this)&&this.updateViewport(e)}}},onMouseUp:function(e){var t,r;this.mousedown=!1,this.dragstart=!1;var n=this.graph;if(!this.keydown){var a=n.getZoom(),o=n.get("modeController"),s=(r=(t=o==null?void 0:o.modes[o.mode])===null||t===void 0?void 0:t.filter(function(Pt){return Pt.type==="zoom-canvas"}))===null||r===void 0?void 0:r[0],u=s?s.optimizeZoom||.1:0;if(this.enableOptimize){for(var f=n.getEdges(),c=0,l=f.length;c<l;c++){var m=f[c].get("group").get("children");m&&m.forEach(function(Pt){var Qt=Pt.get("ori-visibility");Pt.set("ori-visibility",void 0),Qt&&Pt.show()})}if(a>u)for(var w=n.getNodes(),C=0,D=w.length;C<D;C++)for(var U=w[C].getContainer(),$=U.get("children"),tt=0,it=$;tt<it.length;tt++){var ct=it[tt],_t=ct.get("isKeyShape");if(!_t){var Bt=ct.get("ori-visibility");ct.set("ori-visibility",void 0),Bt&&ct.show()}}}if(!this.dragging){this.origin=null;return}e=F0(e),this.shouldEnd(e,this)&&this.updateViewport(e),e.type="dragend",e.dx=e.clientX-this.originPosition.x,e.dy=e.clientY-this.originPosition.y,n.emit("canvas:dragend",e),this.endDrag(),typeof window!="undefined"&&document.body.removeEventListener("contextmenu",this.handleDOMContextMenu)}},endDrag:function(){this.origin=null,this.dragging=!1,this.dragbegin=!1,this.mousedown=!1,this.dragstart=!1},onKeyDown:function(e){var t=this,r=e.key;r&&(B_.indexOf(r.toLowerCase())>-1?t.keydown=!0:t.keydown=!1)},onKeyUp:function(){this.keydown=!1,this.origin=null,this.dragging=!1,this.dragbegin=!1},allowDrag:function(e){var t,r,n=e.target,a=n&&n.isCanvas&&n.isCanvas();if((0,v.isBoolean)(this.allowDragOnItem)&&!this.allowDragOnItem&&!a)return!1;if((0,v.isObject)(this.allowDragOnItem)){var o=this.allowDragOnItem,s=o.node,u=o.edge,f=o.combo,c=(r=(t=e.item)===null||t===void 0?void 0:t.getType)===null||r===void 0?void 0:r.call(t);if(!s&&c==="node"||!u&&c==="edge"||!f&&c==="combo")return!1}return!0}},G_={getDefaultCfg:function(){return{updateEdge:!0,delegateStyle:{},enableDelegate:!1,onlyChangeComboSize:!1,comboActiveState:"",selectedState:"selected",enableOptimize:!1,enableDebounce:!1,enableStack:!0}},getEvents:function(){return{"node:mousedown":"onMouseDown",drag:"onDragMove",dragend:"onDragEnd","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave","combo:drop":"onDropCombo","node:drop":"onDropNode","canvas:drop":"onDropCanvas",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onDragEnd",afterchangedata:"onDragEnd"}},validationCombo:function(e){if(!this.origin||!e||e.destroyed)return!1;var t=e.getType();return t==="combo"},onTouchStart:function(e){if(e.item){var t=this;try{var r=e.originalEvent.touches,n=r[0],a=r[1];if(n&&a)return;e.preventDefault()}catch(o){console.warn("Touch original event not exist!")}this.mousedown={item:e.item,target:e.target,origin:{x:e.x,y:e.y}},this.dragstart=!0,t.onDragStart(e)}},onTouchMove:function(e){var t=this;try{var r=e.originalEvent.touches,n=r[0],a=r[1];if(n&&a){t.onDragEnd(e);return}e.preventDefault()}catch(o){console.warn("Touch original event not exist!")}t.onDrag(e)},onMouseDown:function(e){this.mousedown={item:e.item,target:e.target,origin:{x:e.x,y:e.y}},typeof window!="undefined"&&!this.windowEventBinded&&(this.windowEventBinded=!0,document.body.addEventListener("contextmenu",this.onDragEnd.bind(this)),document.body.addEventListener("mouseup",this.onDragEnd.bind(this)))},onDragMove:function(e){var t,r;if(((r=(t=e.item)===null||t===void 0?void 0:t.getType)===null||r===void 0?void 0:r.call(t))!=="node"){this.onDragEnd();return}this.mousedown&&(this.dragstart?this.onDrag((0,g.__assign)((0,g.__assign)({},e),this.mousedown)):(this.dragstart=!0,this.onDragStart(e)))},onDragStart:function(e){var t=this;if(this.currentShouldEnd=!0,!!this.shouldBegin((0,g.__assign)((0,g.__assign)({},e),this.mousedown),this)){var r=this.mousedown,n=r.item,a=r.target;if(!(!n||n.destroyed||n.hasLocked())){var o=n.getContainer();if(o.set("capture",!1),this.cachedCaptureItems||(this.cachedCaptureItems=[]),this.cachedCaptureItems.push(n),a){var s=a.get("isAnchorPoint");if(s)return}var u=this.graph;this.targets=[],this.targetCombo=null;var f=u.findAllByState("node",this.selectedState),c=n.get("id"),l=f.filter(function(w){var C=w.get("id");return c===C});if(l.length===0?this.targets.push(n):f.length>1?f.forEach(function(w){var C=w.hasLocked();C||t.targets.push(w)}):this.targets.push(n),this.graph.get("enabledStack")&&this.enableStack){var m=[];this.targets.forEach(function(w){var C=w.getModel(),D=C.x,U=C.y,$=C.id;m.push({x:D,y:U,id:$})}),this.set("beforeDragNodes",m)}this.hidenEdge={},this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach(function(w){var C=w.getEdges();C.forEach(function(D){D.isVisible()&&(t.hidenEdge[D.getID()]=!0,D.hide())})}),this.origin=this.mousedown.origin,this.point={},this.originPoint={}}}},onDrag:function(e){var t=this;if(!(!this.mousedown||!this.origin)&&this.shouldUpdate(e,this))if(this.get("enableDelegate"))this.updateDelegate(e);else if(this.enableDebounce)this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:e,updateEdge:this.get("updateEdge"),onlyChangeComboSize:this.onlyChangeComboSize,updateParentCombos:this.updateParentCombos});else{var r={};this.targets.map(function(n){t.update(n,e);var a=n.getModel().comboId;a&&(r[a]=t.graph.findById(a))}),this.onlyChangeComboSize&&this.updateParentCombos()}},onDragEnd:function(e){var t=this,r;if(this.mousedown=!1,this.dragstart=!1,typeof window!="undefined"&&this.windowEventBinded&&(this.windowEventBinded=!1,document.body.removeEventListener("contextmenu",this.onDragEnd.bind(this)),document.body.removeEventListener("mouseup",this.onDragEnd.bind(this))),!!this.origin){(r=this.cachedCaptureItems)===null||r===void 0||r.forEach(function(o){var s=o.getContainer();s.set("capture",!0)}),this.cachedCaptureItems=[],this.delegateRect&&(this.delegateRect.remove(),this.delegateRect=null),this.get("updateEdge")&&this.enableOptimize&&!this.enableDelegate&&this.targets.forEach(function(o){var s=o.getEdges();s.forEach(function(u){t.hidenEdge[u.getID()]&&u.show(),u.refresh()})}),this.hidenEdge={};var n=this.graph;if(n.get("enabledStack")&&this.enableStack){var a={before:{nodes:[],edges:[],combos:[]},after:{nodes:[],edges:[],combos:[]}};this.get("beforeDragNodes").forEach(function(o){a.before.nodes.push(o)}),this.targets.forEach(function(o){var s=o.getModel(),u=s.x,f=s.y,c=s.id;a.after.nodes.push({x:u,y:f,id:c})}),n.pushStack("update",(0,v.clone)(a))}n.emit("dragnodeend",{items:this.targets,targetItem:null}),this.point={},this.origin=null,this.originPoint={},this.targets.length=0,this.targetCombo=null}},onDropCombo:function(e){var t=e.item;if(this.currentShouldEnd=this.shouldEnd(e,t,this),this.updatePositions(e,!this.currentShouldEnd),!(!this.currentShouldEnd||!this.validationCombo(t))){var r=this.graph;if(this.comboActiveState&&r.setItemState(t,this.comboActiveState,!1),this.targetCombo=t,this.onlyChangeComboSize)r.updateCombos();else{var n=t.getModel();this.targets.map(function(a){var o=a.getModel();o.comboId!==n.id&&r.updateComboTree(a,n.id)}),r.updateCombo(t)}r.emit("dragnodeend",{items:this.targets,targetItem:this.targetCombo})}},onDropCanvas:function(e){var t=this.graph;this.currentShouldEnd=this.shouldEnd(e,void 0,this),this.updatePositions(e,!this.currentShouldEnd),!(!this.targets||this.targets.length===0||!this.currentShouldEnd)&&(this.onlyChangeComboSize?this.updateParentCombos():this.targets.map(function(r){var n=r.getModel();n.comboId&&t.updateComboTree(r)}))},onDropNode:function(e){if(!(!this.targets||this.targets.length===0)){var t=this,r=e.item,n=t.graph,a=r.getModel().comboId,o=a?n.findById(a):void 0;if(this.currentShouldEnd=this.shouldEnd(e,o,this),this.updatePositions(e,!this.currentShouldEnd),!!this.currentShouldEnd){if(this.onlyChangeComboSize)this.updateParentCombos();else if(a){var s=n.findById(a);t.comboActiveState&&n.setItemState(s,t.comboActiveState,!1),this.targets.map(function(u){var f=u.getModel();a!==f.comboId&&n.updateComboTree(u,a)}),n.updateCombo(s)}else this.targets.map(function(u){var f=u.getModel();f.comboId&&n.updateComboTree(u)});n.emit("dragnodeend",{items:this.targets,targetItem:r})}}},onDragEnter:function(e){var t=e.item;if(this.validationCombo(t)){var r=this.graph;this.comboActiveState&&r.setItemState(t,this.comboActiveState,!0)}},onDragLeave:function(e){var t=e.item;if(this.validationCombo(t)){var r=this.graph;this.comboActiveState&&r.setItemState(t,this.comboActiveState,!1)}},updatePositions:function(e,t){var r=this;!this.targets||this.targets.length===0||(this.get("enableDelegate")?this.enableDebounce?this.debounceUpdate({targets:this.targets,graph:this.graph,point:this.point,origin:this.origin,evt:e,updateEdge:this.get("updateEdge"),onlyChangeComboSize:this.onlyChangeComboSize,updateParentCombos:this.updateParentCombos}):t||this.targets.map(function(n){return r.update(n,e)}):this.targets.map(function(n){return r.update(n,e,t)}))},update:function(e,t,r){var n=this.origin,a=e.get("model"),o=e.get("id");this.point[o]||(this.point[o]={x:a.x||0,y:a.y||0});var s=t.x-n.x+this.point[o].x,u=t.y-n.y+this.point[o].y;r&&(s+=n.x-t.x,u+=n.y-t.y);var f={x:s,y:u};this.get("updateEdge")?this.graph.updateItem(e,f,!1):e.updatePosition(f)},debounceUpdate:(0,v.debounce)(function(i){var e=i.targets,t=i.graph,r=i.point,n=i.origin,a=i.evt,o=i.updateEdge,s=i.onlyChangeComboSize,u=i.updateParentCombos;e.map(function(f){var c=f.get("model"),l=f.get("id");r[l]||(r[l]={x:c.x||0,y:c.y||0});var m=a.x-n.x+r[l].x,w=a.y-n.y+r[l].y,C={x:m,y:w};o?t.updateItem(f,C,!1):f.updatePosition(C)}),s&&u(t,e)},50,!0),updateDelegate:function(e){var t=this.graph;if(this.delegateRect){var m=e.x-this.origin.x+this.originPoint.minX,w=e.y-this.origin.y+this.originPoint.minY;this.delegateRect.attr({x:m,y:w})}else{var r=t.get("group"),n=(0,v.deepMix)({},Ll.delegateStyle,this.delegateStyle),a=this.calculationGroupPosition(e),o=a.x,s=a.y,u=a.width,f=a.height,c=a.minX,l=a.minY;this.originPoint={x:o,y:s,width:u,height:f,minX:c,minY:l},this.delegateRect=r.addShape("rect",{attrs:(0,g.__assign)({width:u,height:f,x:o,y:s},n),name:"rect-delegate-shape"}),this.delegate=this.delegateRect,this.delegateRect.set("capture",!1)}},calculationGroupPosition:function(e){var t=this.targets;t.length===0&&t.push(e.item);for(var r=1/0,n=-1/0,a=1/0,o=-1/0,s=0;s<t.length;s++){var u=t[s],f=u.getBBox(),c=f.minX,l=f.minY,m=f.maxX,w=f.maxY;c<r&&(r=c),l<a&&(a=l),m>n&&(n=m),w>o&&(o=w)}var C=Math.floor(r),D=Math.floor(a),U=Math.ceil(n)-Math.floor(r),$=Math.ceil(o)-Math.floor(a);return{x:C,y:D,width:U,height:$,minX:r,minY:a}},updateParentCombos:function(e,t){var r=e||this.graph,n=t||this.targets,a={};n==null||n.forEach(function(o){var s=o.getModel().comboId;s&&(a[s]=r.findById(s))}),Object.values(a).forEach(function(o){o&&r.updateCombo(o)})}},kd=null,z_={getDefaultCfg:function(){return{trigger:"mouseenter",activeState:"active",inactiveState:"inactive",resetSelected:!1,shouldClearStatusOnSecond:!1,shouldUpdate:function(){return!0}}},getEvents:function(){return this.get("trigger")==="mouseenter"?{"node:mouseenter":"setAllItemStates","combo:mouseenter":"setAllItemStates","node:mouseleave":"clearActiveState","combo:mouseleave":"clearActiveState"}:{"node:click":"setAllItemStates","combo:click":"setAllItemStates","canvas:click":"clearActiveState","node:touchstart":"setOnTouchStart","combo:touchstart":"setOnTouchStart","canvas:touchstart":"clearOnTouchStart"}},setOnTouchStart:function(e){var t=this;try{var r=e.originalEvent.touches,n=r[0],a=r[1];if(n&&a)return;e.preventDefault()}catch(o){console.warn("Touch original event not exist!")}t.setAllItemStates(e)},clearOnTouchStart:function(e){var t=this;try{var r=e.originalEvent.touches,n=r[0],a=r[1];if(n&&a)return;e.preventDefault()}catch(o){console.warn("Touch original event not exist!")}t.clearActiveState(e)},setAllItemStates:function(e){clearTimeout(this.timer),this.throttleSetAllItemStates(e,this)},clearActiveState:function(e){var t=this,r=this.shouldClearStatusOnSecond;r&&(kd=null),this.timer=setTimeout(function(){t.throttleClearActiveState(e,t)},50)},throttleSetAllItemStates:(0,v.throttle)(function(i,e){var t=i.item,r=e.graph;if(!(!r||r.destroyed)&&(e.item=t,!!e.shouldUpdate(i.item,{event:i,action:"activate"},e))){var n=e.shouldClearStatusOnSecond,a=t.getModel().id;if(kd===a&&n){e.throttleClearActiveState(i,e),kd=null;return}for(var o=e.activeState,s=e.inactiveState,u=r.getNodes(),f=r.getCombos(),c=r.getEdges(),l=r.get("vedges"),m=u.length,w=f.length,C=c.length,D=l.length,U=e.inactiveItems||{},$=e.activeItems||{},tt=0;tt<m;tt++){var it=u[tt],ct=it.getID(),_t=it.hasState("selected");e.resetSelected&&_t&&r.setItemState(it,"selected",!1),$[ct]&&(r.setItemState(it,o,!1),delete $[ct]),s&&!U[ct]&&(r.setItemState(it,s,!0),U[ct]=it)}for(var tt=0;tt<w;tt++){var Bt=f[tt],Pt=Bt.getID(),_t=Bt.hasState("selected");e.resetSelected&&_t&&r.setItemState(Bt,"selected",!1),$[Pt]&&(r.setItemState(Bt,o,!1),delete $[Pt]),s&&!U[Pt]&&(r.setItemState(Bt,s,!0),U[Pt]=Bt)}for(var tt=0;tt<C;tt++){var Qt=c[tt],ye=Qt.getID();$[ye]&&(r.setItemState(Qt,o,!1),delete $[ye]),s&&!U[ye]&&(r.setItemState(Qt,s,!0),U[ye]=Qt)}for(var tt=0;tt<D;tt++){var ce=l[tt],Ne=ce.getID();$[Ne]&&(r.setItemState(ce,o,!1),delete $[Ne]),s&&!U[Ne]&&(r.setItemState(ce,s,!0),U[Ne]=ce)}if(t&&!t.destroyed){s&&(r.setItemState(t,s,!1),delete U[t.getID()]),$[t.getID()]||(r.setItemState(t,o,!0),$[t.getID()]=t);for(var $e=t.getEdges(),Rr=$e.length,tt=0;tt<Rr;tt++){var Qt=$e[tt],ye=Qt.getID(),rn=void 0;Qt.getSource()===t?rn=Qt.getTarget():rn=Qt.getSource();var Vr=rn.getID();s&&U[Vr]&&(r.setItemState(rn,s,!1),delete U[Vr]),$[Vr]||(r.setItemState(rn,o,!0),$[Vr]=rn),U[ye]&&(r.setItemState(Qt,s,!1),delete U[ye]),$[ye]||(r.setItemState(Qt,o,!0),$[ye]=Qt),Qt.toFront()}}e.activeItems=$,e.inactiveItems=U,n&&(kd=t.getModel().id),r.emit("afteractivaterelations",{item:i.item,action:"activate"})}},50,{trailing:!0,leading:!0}),throttleClearActiveState:(0,v.throttle)(function(i,e){var t=e.get("graph");if(!(!t||t.destroyed)&&e.shouldUpdate(i.item,{event:i,action:"deactivate"},e)){var r=e.activeState,n=e.inactiveState,a=e.activeItems||{},o=e.inactiveItems||{};Object.values(a).filter(function(s){return!s.destroyed}).forEach(function(s){t.clearItemStates(s,r)}),Object.values(o).filter(function(s){return!s.destroyed}).forEach(function(s){t.clearItemStates(s,n)}),e.activeItems={},e.inactiveItems={},t.emit("afteractivaterelations",{item:i.item||e.get("item"),action:"deactivate"})}},50,{trailing:!0,leading:!0})},Ld=Math.min,U0=Math.max,X0=Math.abs,Y0="shift",U_=["drag","shift","ctrl","alt","control"],X_={getDefaultCfg:function(){return{brushStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},selectedState:"selected",trigger:Y0,includeEdges:!0,includeCombos:!1,selectOnCombo:!1,selectedEdges:[],selectedNodes:[],selectedCombos:[]}},getEvents:function(){return U_.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=Y0,console.warn("Behavior brush-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.trigger==="drag"?{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates"}:{dragstart:"onMouseDown",drag:"onMouseMove",dragend:"onMouseUp","canvas:click":"clearStates",keyup:"onKeyUp",keydown:"onKeyDown"}},onMouseDown:function(e){var t=e.item,r=this.brush,n=this.selectOnCombo,a=(t==null?void 0:t.getType())==="combo";a&&!n||!a&&t||this.trigger!=="drag"&&!this.keydown||(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates(),r||(r=this.createBrush()),this.originPoint={x:e.canvasX,y:e.canvasY},r.attr({width:0,height:0}),r.show(),this.dragging=!0)},onMouseMove:function(e){this.dragging&&(this.trigger!=="drag"&&!this.keydown||this.updateBrush(e))},onMouseUp:function(e){var t=this.graph;!this.brush&&!this.dragging||this.trigger!=="drag"&&!this.keydown||(this.brush.remove(!0),this.brush=null,this.getSelectedNodes(e),this.dragging=!1)},clearStates:function(){var e=this,t=e.graph,r=e.selectedState,n=t.findAllByState("node",r),a=t.findAllByState("edge",r),o=t.findAllByState("combo",r);n.forEach(function(s){return t.setItemState(s,r,!1)}),a.forEach(function(s){return t.setItemState(s,r,!1)}),o.forEach(function(s){return t.setItemState(s,r,!1)}),this.selectedNodes=[],this.selectedEdges=[],this.selectedCombos=[],this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges,this.selectedCombos),t.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})},isBBoxCenterInRect:function(e,t,r,n,a){var o=e.getBBox();return o.centerX>=t&&o.centerX<=r&&o.centerY>=n&&o.centerY<=a},getSelectedNodes:function(e){var t=this,r=this,n=r.graph,a=r.originPoint,o=r.shouldUpdate,s=r.isBBoxCenterInRect,u=this.selectedState,f={x:e.x,y:e.y},c=n.getPointByCanvas(a.x,a.y),l=Ld(f.x,c.x),m=U0(f.x,c.x),w=Ld(f.y,c.y),C=U0(f.y,c.y),D=[],U=[];n.getNodes().forEach(function(it){if(it.isVisible()&&s(it,l,m,w,C)&&o(it,"select",t)){D.push(it);var ct=it.getModel();U.push(ct.id),n.setItemState(it,u,!0)}});var $=[];this.includeEdges&&D.forEach(function(it){var ct=it.getOutEdges();ct.forEach(function(_t){if(_t.isVisible()){var Bt=_t.getModel(),Pt=Bt.source,Qt=Bt.target;U.includes(Pt)&&U.includes(Qt)&&o(_t,"select",t)&&($.push(_t),n.setItemState(_t,t.selectedState,!0))}})});var tt=[];this.includeCombos&&n.getCombos().forEach(function(it){if(it.isVisible()&&s(it,l,m,w,C)&&o(it,"select",t)){tt.push(it);var ct=it.getModel();U.push(ct.id),n.setItemState(it,u,!0)}}),this.selectedEdges=$,this.selectedNodes=D,this.selectedCombos=tt,this.onSelect&&this.onSelect(D,$,tt),n.emit("nodeselectchange",{selectedItems:{nodes:D,edges:$,combos:tt},select:!0})},createBrush:function(){var e=this,t=e.graph.get("canvas").addShape("rect",{attrs:e.brushStyle,capture:!1,name:"brush-shape"});return this.brush=t,this.delegate=t,t},updateBrush:function(e){var t=this.originPoint;this.brush.attr({width:X0(e.canvasX-t.x),height:X0(e.canvasY-t.y),x:Ld(e.canvasX,t.x),y:Ld(e.canvasY,t.y)})},onKeyDown:function(e){var t=e.key;if(t){var r=this.trigger.toLowerCase(),n=t.toLowerCase();n===r||n==="control"&&r==="ctrl"||n==="ctrl"&&r==="control"?this.keydown=!0:this.keydown=!1}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.keydown=!1}},W0="shift",Y_=["shift","ctrl","alt","control"],W_={getDefaultCfg:function(){return{multiple:!0,trigger:W0,selectedState:"selected",selectNode:!0,selectEdge:!1,selectCombo:!0}},getEvents:function(){var e=this;return Y_.indexOf(e.trigger.toLowerCase())>-1||(e.trigger=W0,console.warn("Behavior click-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),e.multiple?{"node:click":"onClick","combo:click":"onClick","edge:click":"onClick","canvas:click":"onCanvasClick",keyup:"onKeyUp",keydown:"onKeyDown"}:{"node:click":"onClick","combo:click":"onClick","edge:click":"onClick","canvas:click":"onCanvasClick"}},onClick:function(e){var t=this,r=e.item;if(!(!r||r.destroyed)){var n=r.getType(),a=t.graph,o=t.keydown,s=t.multiple,u=t.shouldUpdate,f=t.shouldBegin;if(f(e,t)){if(!o||!s){var c=a.findAllByState("node",t.selectedState).concat(a.findAllByState("edge",t.selectedState)).concat(a.findAllByState("combo",t.selectedState));(0,v.each)(c,function(D){D!==r&&a.setItemState(D,t.selectedState,!1)})}var l=function(){switch(n){case"node":return t.selectNode;case"edge":return t.selectEdge;case"combo":return t.selectCombo;default:return!1}}();if(!l){var m=a.findAllByState("node",t.selectedState),w=a.findAllByState("edge",t.selectedState),C=a.findAllByState("combo",t.selectedState);a.emit("nodeselectchange",{selectedItems:{nodes:m,edges:w,combos:C},select:!1});return}if(r.hasState(t.selectedState)){u(e,t)&&a.setItemState(r,t.selectedState,!1);var m=a.findAllByState("node",t.selectedState),w=a.findAllByState("edge",t.selectedState),C=a.findAllByState("combo",t.selectedState);a.emit("nodeselectchange",{target:r,selectedItems:{nodes:m,edges:w,combos:C},select:!1})}else{u(e,t)&&a.setItemState(r,t.selectedState,!0);var m=a.findAllByState("node",t.selectedState),w=a.findAllByState("edge",t.selectedState),C=a.findAllByState("combo",t.selectedState);a.emit("nodeselectchange",{target:r,selectedItems:{nodes:m,edges:w,combos:C},select:!0})}}}},onCanvasClick:function(e){var t=this,r=this,n=r.graph,a=r.shouldBegin;if(a(e,this)){var o=n.findAllByState("node",this.selectedState);(0,v.each)(o,function(f){n.setItemState(f,t.selectedState,!1)});var s=n.findAllByState("edge",this.selectedState);(0,v.each)(s,function(f){n.setItemState(f,t.selectedState,!1)});var u=n.findAllByState("combo",this.selectedState);(0,v.each)(u,function(f){n.setItemState(f,t.selectedState,!1)}),n.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[],combos:[]},select:!1})}},onKeyDown:function(e){var t=this,r=e.key;r&&(r.toLowerCase()===this.trigger.toLowerCase()||r.toLowerCase()==="control"?t.keydown=!0:t.keydown=!1)},onKeyUp:function(){var e=this;e.keydown=!1}},V_=Ht,Nd=.05,H_={getDefaultCfg:function(){return this.isFireFox=_g()==="firefox",{sensitivity:2,minZoom:void 0,maxZoom:void 0,enableOptimize:!1,optimizeZoom:.1,fixSelectedItems:{fixAll:!1,fixLineWidth:!1,fixLabel:!1,fixState:"selected"},animate:!1,animateCfg:{duration:500}}},getEvents:function(){var e=this.fixSelectedItems;return e.fixState||(e.fixState="selected"),e.fixAll&&(e.fixLineWidth=!0,e.fixLabel=!0),{wheel:"onWheel",touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd"}},onTouchStart:function(e){var t=e.originalEvent.touches,r=t[0],n=t[1];e.preventDefault(),n&&(this.shouldBegin&&!this.shouldBegin(e,this)||(this.startPoint={pageX:r.pageX,pageY:r.pageY},this.moveable=!0,n&&(this.endPoint={pageX:n.pageX,pageY:n.pageY}),this.originScale=this.graph.getZoom()||this.currentScale||1))},onTouchMove:function(e){if(this.moveable){e.preventDefault();var t=e.originalEvent.touches,r=t[0],n=t[1];if(n){this.endPoint||(this.endPoint={pageX:n.pageX,pageY:n.pageY});var a=function(D,U){return Math.hypot(U.x-D.x,U.y-D.y)},o=a({x:r.pageX,y:r.pageY},{x:n.pageX,y:n.pageY})/a({x:this.startPoint.pageX,y:this.startPoint.pageY},{x:this.endPoint.pageX,y:this.endPoint.pageY}),s=this.originScale*o;this.currentScale=s;var u=this.get("minZoom")||this.graph.get("minZoom"),f=this.get("maxZoom")||this.graph.get("maxZoom");if(!(s>f||s<u)){var c=this.get("animate"),l=this.get("animateCfg"),m=this.graph.get("canvas"),w=m.getPointByClient(e.clientX,e.clientY);this.graph.zoomTo(s,{x:w.x,y:w.y},c,l),this.graph.emit("wheelzoom",e)}}}},onTouchEnd:function(){this.moveable=!1,this.endPoint=null},onWheel:function(e){var t=this,r=this,n=r.graph,a=r.fixSelectedItems;if(!(this.shouldBegin&&!this.shouldBegin(e,this))&&this.shouldUpdate(e,this)){e.preventDefault();var o=n.get("canvas"),s=o.getPointByClient(e.clientX,e.clientY),u=this.get("sensitivity"),f=n.getZoom(),c=f,l=f;this.isFireFox?e.deltaY>0||e.wheelDelta<0?c=1-Nd*u:c=1/(1-Nd*u):e.wheelDelta<0?c=1-Nd*u:c=1/(1-Nd*u),l=f*c;var m=this.get("minZoom")||n.get("minZoom"),w=this.get("maxZoom")||n.get("maxZoom");l>w?l=w:l<m&&(l=m);var C=this.get("enableOptimize");if(C){var D=this.get("optimizeZoom"),U=this.get("optimized"),$=n.getNodes(),tt=n.getEdges(),it=$.length,ct=tt.length;if(!U){for(var _t=0;_t<it;_t++){var Bt=$[_t];if(!Bt.destroyed)for(var Pt=Bt.get("group").get("children"),Qt=Pt.length,ye=0;ye<Qt;ye++){var ce=Pt[ye];!ce.destoryed&&!ce.get("isKeyShape")&&(ce.set("ori-visibility",ce.get("ori-visibility")||ce.get("visible")),ce.hide())}}for(var Ne=0;Ne<ct;Ne++)for(var $e=tt[Ne],Pt=$e.get("group").get("children"),Qt=Pt.length,ye=0;ye<Qt;ye++){var ce=Pt[ye];ce.set("ori-visibility",ce.get("ori-visibility")||ce.get("visible")),ce.hide()}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var Rr=setTimeout(function(){var Va=n.getZoom(),ci=t.get("optimized");if(ci){t.set("optimized",!1);for(var Ya=0;Ya<it;Ya++){var li=$[Ya],Di=li.get("group").get("children"),fa=Di.length;if(Va<D){var Ka=li.getKeyShape(),ti=Ka.get("ori-visibility");Ka.set("ori-visibility",void 0),ti&&Ka.show()}else for(var Pi=0;Pi<fa;Pi++){var ei=Di[Pi],ti=ei.get("ori-visibility");ei.set("ori-visibility",void 0),!ei.get("visible")&&ti&&ti&&ei.show()}}for(var fi=0;fi<ct;fi++){var po=tt[fi],Di=po.get("group").get("children"),fa=Di.length;if(Va<D){var Ka=po.getKeyShape(),ti=Ka.get("ori-visibility");Ka.set("ori-visibility",void 0),ti&&Ka.show()}else for(var Pi=0;Pi<fa;Pi++){var ei=Di[Pi];if(!ei.get("visible")){var ti=ei.get("ori-visibility");ei.set("ori-visibility",void 0),ti&&ei.show()}}}}},100);this.set("timeout",Rr)}if(f<=1){var rn=void 0,Vr=void 0;if(a.fixAll||a.fixLineWidth||a.fixLabel){rn=n.findAllByState("node",a.fixState),Vr=n.findAllByState("edge",a.fixState);for(var Cr=f/l,Cn=rn.length,_n=0;_n<Cn;_n++){var Bt=rn[_n],Tr=Bt.getContainer(),jr=Bt.getModel(),dn=Bt.getOriginStyle(),vn=Bt.getStateStyle(a.fixState),Pn=Bt.get("shapeFactory").getShape(jr.type).getStateStyle(a.fixState,Bt)[a.fixState];if(a.fixAll){if(l<=1){var Wn=(0,v.clone)(Tr.getMatrix());Wn||(Wn=[1,0,0,0,1,0,0,0,1]);var ma=Bt.getModel(),Oa=ma.x,pi=ma.y;Wn=V_(Wn,[["t",-Oa,-pi],["s",Cr,Cr],["t",Oa,pi]]),Tr.setMatrix(Wn)}}else for(var Pt=Tr.get("children"),Qt=Pt.length,ye=0;ye<Qt;ye++){var ce=Pt[ye],ai=void 0,gi=void 0;if(a.fixLabel){var Ei=ce.get("type");if(Ei==="text"){ai=ce.attr("fontSize")||12;var Qi=vn[ce.get("name")],Fi=Pn[ce.get("name")],Gu=Qi?Qi.fontSize:12,ts=Fi?Fi.fontSize:12,zu=Gu||ts||12;if(l<=1&&ce.attr("fontSize",zu/l),gi)break}}if(a.fixLineWidth&&ce.get("isKeyShape")){gi=ce.attr("lineWidth")||0;var es=vn.lineWidth||Pn.lineWidth||dn.lineWidth||0;if(l<=1&&ce.attr("lineWidth",es/l),ai)break}}}for(var rs=Vr.length,xu=0;xu<rs;xu++)for(var $e=Vr[xu],Tr=$e.getContainer(),Pt=Tr.get("children"),jr=$e.getModel(),vn=$e.getStateStyle(a.fixState),Pn=$e.get("shapeFactory").getShape(jr.type).getStateStyle(a.fixState,$e)[a.fixState],Qt=Pt.length,ye=0;ye<Qt;ye++){var ce=Pt[ye],ai=void 0,gi=void 0;if(a.fixLabel||a.fixAll){var Ei=ce.get("type");if(Ei==="text"){ai=ce.attr("fontSize")||12;var Qi=vn[ce.get("name")],Fi=Pn[ce.get("name")],Gu=Qi?Qi.fontSize:12,ts=Fi?Fi.fontSize:12,zu=Gu||ts||12;if(l<=1&&ce.attr("fontSize",zu/l),gi)break}}if((a.fixLineWidth||a.fixAll)&&ce.get("isKeyShape")){gi=ce.attr("lineWidth")||0;var es=vn.lineWidth||Pn.lineWidth||1;if(l<=1&&ce.attr("lineWidth",es/l),ai)break}}}}var Os=this.get("animate"),$s=this.get("animateCfg");n.zoomTo(l,{x:s.x,y:s.y},Os,$s),n.emit("wheelzoom",e)}}},V0={onMouseEnter:function(e){var t=e.item;this.currentTarget=t,this.showTooltip(e),this.graph.emit("tooltipchange",{item:e.item,action:"show"})},onMouseMove:function(e){if(!this.shouldUpdate(e,this)){this.hideTooltip();return}!this.currentTarget||e.item!==this.currentTarget||this.updatePosition(e)},onMouseLeave:function(e){this.shouldEnd(e,this)&&(this.hideTooltip(),this.graph.emit("tooltipchange",{item:this.currentTarget,action:"hide"}),this.currentTarget=null)},showTooltip:function(e){var t=this.container;if(!(!e.item||e.item.destroyed)){t||(t=this.createTooltip(this.graph.get("canvas")),this.container=t);var r=this.formatText(e.item.get("model"),e);t.innerHTML=r,Wa(this.container,{visibility:"visible"}),this.updatePosition(e)}},hideTooltip:function(){Wa(this.container,{visibility:"hidden"})},updatePosition:function(e){var t=this.get("shouldBegin"),r=this,n=r.width,a=r.height,o=r.container,s=r.graph;if(!t(e,this)){Wa(o,{visibility:"hidden"});return}var u=s.getPointByClient(e.clientX,e.clientY),f=s.getCanvasByPoint(u.x,u.y),c=f.x,l=f.y,m=o.getBoundingClientRect();c>n/2?c-=m.width:c+=this.offset,l>a/2?l-=m.height:l+=this.offset;var w="".concat(c,"px"),C="".concat(l,"px");Wa(this.container,{left:w,top:C,visibility:"visible"})},createTooltip:function(e){var t=e.get("el");t.style.position="relative";var r=no('<div class="g6-tooltip g6-'.concat(this.item,'-tooltip"></div>'));return t.parentNode.appendChild(r),Wa(r,{position:"absolute",visibility:"visible"}),this.width=e.get("width"),this.height=e.get("height"),this.container=r,this.graph.get("tooltips").push(r),r}},j_=(0,g.__assign)({getDefaultCfg:function(){return{item:"node",offset:12,formatText:function(t){return t.label}}},getEvents:function(){return{"node:mouseenter":"onMouseEnter","node:mouseleave":"onMouseLeave","node:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},V0),Z_=(0,g.__assign)({getDefaultCfg:function(){return{item:"edge",offset:12,formatText:function(t){return"source: ".concat(t.source," target: ").concat(t.target)}}},getEvents:function(){return{"edge:mouseenter":"onMouseEnter","edge:mouseleave":"onMouseLeave","edge:mousemove":"onMouseMove",afterremoveitem:"onMouseLeave"}}},V0),H0="click",q_=["click","dblclick"],$_={getDefaultCfg:function(){return{trigger:H0,onChange:function(){}}},getEvents:function(){var e,t;return q_.includes(this.trigger)?t=this.trigger:(t=H0,console.warn("Behavior collapse-expand \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click' \u6216 'dblclick'")),e={},e["node:".concat(t)]="onNodeClick",e.touchstart="onNodeClick",e},onNodeClick:function(e){var t=this;if(this.trigger==="click"){if(this.timer){clearTimeout(this.timer),this.timer=0;return}this.timer=setTimeout(function(){t.toggle(e),clearTimeout(t.timer),t.timer=0},200)}else this.toggle(e)},toggle:function(e){var t=e.item;if(t){var r=this.graph.findDataById(t.get("id"));if(r){var n=r.children;if(!(!n||n.length===0)){var a=!r.collapsed;this.shouldBegin(e,a,this)&&(r.collapsed=a,t.getModel().collapsed=a,this.graph.emit("itemcollapsed",{item:e.item,collapsed:a}),this.shouldUpdate(e,a,this)&&(this.onChange(t,a,this),this.graph.layout()))}}}}},K_=lc.calculationItemsBBox,Q_=function i(e,t){if(t(e)!==!1&&e){var r=e.get("combos");if(r.length===0)return!1;(0,v.each)(r,function(n){i(n,t)})}},J_={getDefaultCfg:function(){return{enableDelegate:!1,delegateStyle:{},onlyChangeComboSize:!1,activeState:"",selectedState:"selected",enableStack:!0}},getEvents:function(){return{"combo:mousedown":"onMouseDown","combo:dragstart":"onDragStart","combo:drag":"onDrag","combo:dragend":"onDragEnd","combo:drop":"onDrop","node:drop":"onNodeDrop","combo:dragenter":"onDragEnter","combo:dragleave":"onDragLeave"}},validationCombo:function(e){var t=e.item;if(!t||t.destroyed||!this.shouldUpdate(e,this))return!1;var r=t.getType();return r==="combo"},onMouseDown:function(e){this.origin={x:e.x,y:e.y}},onDragStart:function(e){var t=this,r=this.graph,n=e.item;if(this.currentShouldEnd=!0,!!this.validationCombo(e)){this.targets=[];var a=r.findAllByState("combo",this.selectedState),o=n.get("id"),s=a.filter(function(f){var c=f.get("id");return o===c});s.length===0?this.targets.push(n):this.targets=a;var u=[];this.targets.forEach(function(f){var c=f.getModel(),l=c.x,m=c.y,w=c.id;u.push({x:l,y:m,id:w})}),this.set("beforeDragItems",u),this.activeState&&this.targets.map(function(f){var c=f.getModel();if(c.parentId){var l=r.findById(c.parentId);l&&r.setItemState(l,t.activeState,!0)}}),this.point={},this.originPoint={},this.currentItemChildCombos=[],Q_(n,function(f){if(f.destroyed)return!1;var c=f.getModel();return t.currentItemChildCombos.push(c.id),!0})}},onDrag:function(e){var t=this;if(this.origin&&this.validationCombo(e))if(this.enableDelegate)this.updateDelegate(e);else{if(this.activeState){var r=this.graph,n=e.item,a=n.getModel(),o=r.getCombos(),s=n.getBBox(),u=s.centerX,f=s.centerY,c=s.width,l=o.filter(function(m){var w=m.getModel();return a.parentId,w.id!==a.id&&!t.currentItemChildCombos.includes(w.id)});l.map(function(m){var w=m.getBBox(),C=w.centerX,D=w.centerY,U=w.width,$=u-C,tt=f-D,it=2*Math.sqrt($*$+tt*tt);c+U-it>.8*c?r.setItemState(m,t.activeState,!0):r.setItemState(m,t.activeState,!1)})}(0,v.each)(this.targets,function(m){t.updateCombo(m,e)}),this.onlyChangeComboSize&&this.updateParentCombos()}},updatePositions:function(e,t){var r=this;(this.enableDelegate||t)&&(0,v.each)(this.targets,function(n){r.updateCombo(n,e,t)})},onDrop:function(e){var t=this,r=e.item;if(this.currentShouldEnd=this.shouldEnd(e,r,this),this.updatePositions(e,!this.currentShouldEnd),!(!this.currentShouldEnd||!r||!this.targets||r.destroyed)){var n=this.graph,a=r.getModel();this.targets.map(function(o){var s=o.getModel();s.parentId!==a.id?(t.activeState&&n.setItemState(r,t.activeState,!1),t.onlyChangeComboSize?n.updateCombo(o):n.updateComboTree(o,a.id,!1)):n.updateCombo(r)}),this.end(r,e),this.endComparison=!0}},onNodeDrop:function(e){var t=this;if(!(!this.targets||this.targets.length===0)){var r=this.graph,n=e.item,a=n.getModel().comboId,o=a?r.findById(a):void 0;if(this.currentShouldEnd=this.shouldEnd(e,o,this),this.updatePositions(e,!this.currentShouldEnd),!!this.currentShouldEnd){var s;if(a){if(this.activeState){var u=r.findById(a);r.setItemState(u,this.activeState,!1)}this.targets.map(function(f){t.onlyChangeComboSize?r.updateCombo(f):a!==f.getID()&&(s=r.findById(a),a!==f.getModel().parentId&&r.updateComboTree(f,a,!1))})}else this.targets.map(function(f){if(t.onlyChangeComboSize)r.updateCombo(f);else{var c=f.getModel();c.comboId&&r.updateComboTree(f,void 0,!1)}});this.endComparison=!0,this.end(s,e)}}},onDragEnter:function(e){if(this.origin&&this.validationCombo(e)){var t=e.item,r=this.graph;this.activeState&&r.setItemState(t,this.activeState,!0)}},onDragLeave:function(e){if(this.origin&&this.validationCombo(e)){var t=e.item,r=this.graph;this.activeState&&r.setItemState(t,this.activeState,!1)}},onDragEnd:function(e){if(!(!this.targets||this.targets.length===0)){var t=e.item;this.currentShouldEnd&&this.updatePositions(e);var r=this.getParentCombo(t.getModel().parentId),n=this.graph;r&&this.activeState&&n.setItemState(r,this.activeState,!1),this.end(void 0,e)}},end:function(e,t){var r=this;if(this.origin){var n=this.graph;if(this.delegateShape){var a=n.get("delegateGroup");a.clear(),this.delegateShape=null}if(e&&this.activeState&&n.setItemState(e,this.activeState,!1),!e){var o=n.get("enabledStack")&&this.enableStack,s={before:{nodes:[],edges:[],combos:[].concat(this.get("beforeDragItems"))},after:{nodes:[],edges:[],combos:[]}};this.targets.map(function(u){if(!r.onlyChangeComboSize)n.updateComboTree(u,void 0,o);else{n.updateCombo(u);var f=u.getModel(),c=f.x,l=f.y,m=f.id;s.after.combos.push({x:c,y:l,id:m}),n.pushStack("update",s)}})}this.point=[],this.origin=null,this.originPoint=null,this.targets.length=0}},traverse:function(e,t,r){var n=this;if(r===void 0&&(r={}),t(e,r)!==!1&&e){var a=e.get("combos");(0,v.each)(a,function(s){n.traverse(s,t,r)});var o=e.get("nodes");(0,v.each)(o,function(s){n.traverse(s,t,r)})}},updateCombo:function(e,t,r){this.updateSingleItem(e,t,r);var n={};this.traverse(e,function(a,o){return a.destroyed?!1:(a.getEdges().forEach(function(s){return o[s.getID()]=s}),!0)},n),Object.values(n).forEach(function(a){return a.refresh()})},updateSingleItem:function(e,t,r){var n=this.origin,a=this.graph,o=e.getModel(),s=e.get("id");this.point[s]||(this.point[s]={x:o.x,y:o.y});var u=t.x-n.x+this.point[s].x,f=t.y-n.y+this.point[s].y;r&&(u+=n.x-t.x,f+=n.y-t.y),a.updateItem(e,{x:u,y:f},!1)},getParentCombo:function(e){var t=this.graph;if(e){var r=t.findById(e);if(r)return r}},updateDelegate:function(e){var t=this.graph;if(this.delegateShape){var m=e.x-this.origin.x+this.originPoint.minX,w=e.y-this.origin.y+this.originPoint.minY;this.delegateShape.attr({x:m,y:w})}else{var r=t.get("delegateGroup"),n=null;this.targets.length>1?n=K_(this.targets):n=this.targets[0].getBBox();var a=n.x,o=n.y,s=n.width,u=n.height,f=n.minX,c=n.minY;this.originPoint={x:a,y:o,width:s,height:u,minX:f,minY:c};var l=(0,g.__assign)((0,g.__assign)({},Ll.delegateStyle),this.delegateStyle);this.delegateShape=r.addShape("rect",{attrs:(0,g.__assign)({width:n.width,height:n.height,x:n.x,y:n.y},l),name:"combo-delegate-shape"}),this.delegateShape.set("capture",!1),this.delegate=this.delegateShape}},updateParentCombos:function(){var e=this,t=e.graph,r=e.targets,n={};r==null||r.forEach(function(a){var o=a.getModel().parentId;o&&(n[o]=t.findById(o))}),Object.values(n).forEach(function(a){a&&t.updateCombo(a)})}},j0="dblclick",t2=["click","dblclick"],e2={getDefaultCfg:function(){return{trigger:j0,relayout:!0}},getEvents:function(){var e,t;return t2.includes(this.trigger)?t=this.trigger:(t=j0,console.warn("Behavior collapse-expand-group \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click' \u6216 'dblclick'")),e={},e["combo:".concat(t)]="onComboClick",e},onComboClick:function(e){var t=e.item,r=this,n=r.graph,a=r.relayout;if(!(!t||t.destroyed||t.getType()!=="combo")){var o=t.getModel(),s=o.id;s&&(n.collapseExpandCombo(s),a&&n.get("layout")?n.layout():n.refreshPositions())}}},r2=lc.isPolygonsIntersect,n2=lc.pathToPoints,Z0="shift",a2=["drag","shift","ctrl","alt","control"],i2=function(e,t){var r,n=e.getKeyShape();if(e.get("type")==="path")r=n2(n.attr("path"));else{var a=n.getCanvasBBox();r=[[a.minX,a.minY],[a.maxX,a.minY],[a.maxX,a.maxY],[a.minX,a.maxY]]}return r2(t,r)},o2={getDefaultCfg:function(){return{delegateStyle:{fill:"#EEF6FF",fillOpacity:.4,stroke:"#DDEEFE",lineWidth:1},onSelect:function(){},onDeselect:function(){},shouldDeselect:void 0,selectedState:"selected",trigger:Z0,includeEdges:!0,selectedEdges:[],selectedNodes:[]}},getEvents:function(){return a2.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=Z0,console.warn("Behavior lasso-select \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'")),this.trigger==="drag"?{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd","canvas:click":"clearStates"}:{dragstart:"onDragStart",drag:"onDragMove",dragend:"onDragEnd",keyup:"onKeyUp",keydown:"onKeyDown","canvas:click":"clearStates"}},onDragStart:function(e){var t=this.lasso,r=e.item;r||this.trigger!=="drag"&&!this.keydown||(this.selectedNodes&&this.selectedNodes.length!==0&&this.clearStates("dragstart"),t||(t=this.createLasso()),this.dragging=!0,this.originPoint={x:e.x,y:e.y},this.points.push(this.originPoint),t.show())},onDragMove:function(e){this.dragging&&(this.trigger!=="drag"&&!this.keydown||(this.points.push({x:e.x,y:e.y}),this.updateLasso(e)))},onDragEnd:function(e){!this.lasso&&!this.dragging||this.trigger!=="drag"&&!this.keydown||(this.points.push(this.originPoint),this.getSelectedItems(),this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1)},getLassoPath:function(){var e=this.points,t=[];return e.length&&(e.forEach(function(r,n){n===0?t.push(["M",r.x,r.y]):t.push(["L",r.x,r.y])}),t.push(["L",e[0].x,e[0].y])),t},clearStates:function(e){e===void 0&&(e="canvas:click");var t=this,r=t.graph,n=t.selectedState,a=t.shouldDeselect,o=r.findAllByState("node",n),s=r.findAllByState("edge",n);(!a||a({action:e,nodes:o,edges:s}))&&(o.forEach(function(u){return r.setItemState(u,n,!1)}),s.forEach(function(u){return r.setItemState(u,n,!1)})),this.onDeselect&&this.onDeselect(this.selectedNodes,this.selectedEdges),this.selectedNodes=[],this.selectedEdges=[],r.emit("nodeselectchange",{selectedItems:{nodes:[],edges:[]},select:!1})},getSelectedItems:function(){var e=this,t=this,r=t.graph,n=t.shouldUpdate,a=this.points.map(function(c){return[r.getCanvasByPoint(c.x,c.y).x,r.getCanvasByPoint(c.x,c.y).y]}),o=this.selectedState,s=[],u=[];r.getNodes().forEach(function(c){if(c.isVisible()&&i2(c,a)&&n(c,"select",e)){s.push(c);var l=c.getModel();u.push(l.id),r.setItemState(c,o,!0)}});var f=[];this.includeEdges&&s.forEach(function(c){var l=c.getOutEdges();l.forEach(function(m){if(m.isVisible()){var w=m.getModel(),C=w.source,D=w.target;u.includes(C)&&u.includes(D)&&n(m,"select",e)&&(f.push(m),r.setItemState(m,e.selectedState,!0))}})}),this.selectedEdges=f,this.selectedNodes=s,this.onSelect&&this.onSelect(s,f),r.emit("nodeselectchange",{selectedItems:{nodes:s,edges:f},select:!0})},createLasso:function(){var e=this,t=e.graph.get("delegateGroup").addShape("path",{attrs:(0,g.__assign)({path:[]},e.delegateStyle),capture:!1,name:"lasso-shape"});return this.lasso=t,this.delegate=t,this.points=[],t},updateLasso:function(e){var t=this;this.lasso.attr({path:t.getLassoPath()})},onKeyDown:function(e){var t=e.key;t&&(t.toLowerCase()===this.trigger.toLowerCase()?this.keydown=!0:this.keydown=!1)},onKeyUp:function(){this.lasso&&(this.lasso.remove(!0),this.lasso=null,this.points=[],this.dragging=!1),this.keydown=!1}},q0="click",s2=["click","drag"],$0=void 0,u2=["shift","ctrl","control","alt","meta",void 0],f2={getDefaultCfg:function(){return{trigger:q0,key:$0,edgeConfig:{},getEdgeConfig:void 0}},getEvents:function(){var e=this;s2.indexOf(e.trigger.toLowerCase())>-1||(e.trigger=q0,console.warn("Behavior create-edge \u7684 trigger \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'click'\uFF0C'drag'")),e.key&&u2.indexOf(e.key.toLowerCase())===-1&&(e.trigger=$0,console.warn("Behavior create-edge \u7684 key \u53C2\u6570\u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'shift'\uFF0C'ctrl'\uFF0C'alt'\uFF0C'control'\uFF0C\u6216 undefined"));var t;return e.trigger==="drag"?t={"node:dragstart":"onClick","combo:dragstart":"onClick",drag:"updateEndPoint","node:drop":"onClick","combo:drop":"onClick",dragend:"onDragEnd"}:e.trigger==="click"&&(t={"node:click":"onClick",mousemove:"updateEndPoint","edge:click":"cancelCreating","canvas:click":"cancelCreating","combo:click":"onClick"}),e.key&&(t.keydown="onKeyDown",t.keyup="onKeyUp"),t},onDragEnd:function(e){var t=this;if(!(t.key&&!t.keydown)){var r=e.item;(!r||r.getID()===t.source||r.getType()!=="node")&&t.cancelCreating({item:t.edge,x:e.x,y:e.y})}},onClick:function(e){var t=this;if(!(t.key&&!t.keydown)){var r=e.item,n=t.graph,a=r.getModel(),o=t.getEdgeConfig;if(t.addingEdge&&t.edge){if(!t.shouldEnd(e,t))return;var s=void 0;o&&(0,v.isFunction)(o)?s=o({source:t.source,target:a.id},t):s=t.edgeConfig;var u=(0,g.__assign)({target:a.id},s);if(t.source===a.id&&(u.type="loop"),n.emit("beforecreateedge",{}),n.updateItem(t.edge,u,!1),n.get("enabledStack")){var f=(0,g.__assign)((0,g.__assign)({},t.edge.getModel()),{itemType:"edge"}),c={};c.edges=[f],n.pushStack("add",{before:{},after:c})}n.emit("aftercreateedge",{edge:t.edge}),t.edge.getKeyShape().set("capture",!0),t.edge=null,t.addingEdge=!1}else{if(!t.shouldBegin(e,t))return;var s=void 0;o&&(0,v.isFunction)(o)?s=o({source:a.id,target:a.id},t):s=t.edgeConfig,t.edge=n.addItem("edge",(0,g.__assign)({source:a.id,target:a.id},s),!1),t.source=a.id,t.addingEdge=!0,t.edge.getKeyShape().set("capture",!1)}}},updateEndPoint:function(e){var t=this;if(!(t.key&&!t.keydown)){t.edge&&t.edge.destroyed&&t.cancelCreating({item:t.edge});var r={x:e.x,y:e.y};if(!t.graph.findById(t.source)){t.addingEdge=!1;return}t.addingEdge&&t.edge&&t.graph.updateItem(t.edge,{target:r},!1)}},cancelCreating:function(e){var t,r,n=this;if(!(n.key&&!n.keydown)){var a=n.graph,o=e.item;if(n.addingEdge&&(n.edge===o||!((r=(t=e.target)===null||t===void 0?void 0:t.isCanvas)===null||r===void 0)&&r.call(t))){n.edge&&!n.edge.destroyed&&a.removeItem(n.edge,!1),n.edge=null,n.addingEdge=!1;return}}},onKeyDown:function(e){var t=this,r=e.key;r&&(r.toLowerCase()===t.key.toLowerCase()?t.keydown=!0:t.keydown=!1)},onKeyUp:function(){var e=this;e.addingEdge&&e.edge&&(e.graph.removeItem(e.edge,!1),e.addingEdge=!1,e.edge=null),this.keydown=!1}},K0="ctrl",c2=["shift","ctrl","alt","control"],l2="1",h2={getDefaultCfg:function(){return{trigger:K0,combinedKey:l2,functionName:"fitView",functionParams:[]}},getEvents:function(){return c2.indexOf(this.trigger.toLowerCase())>-1||(this.trigger=K0,console.warn("Behavior shortcuts-fit-view \u7684 trigger \u53C2\u6570 '".concat(this.trigger,"' \u4E0D\u5408\u6CD5\uFF0C\u8BF7\u8F93\u5165 'drag'\u3001'shift'\u3001'ctrl' \u6216 'alt'"))),this.combinedKey===this.trigger&&(this.combinedKey=void 0),{keyup:"onKeyUp",keydown:"onKeyDown"}},onKeyDown:function(e){var t=e.key;if(t){var r=this.trigger.toLowerCase(),n=t.toLowerCase();this.triggerKeydown||(n===r||n==="control"&&r==="ctrl"||n==="ctrl"&&r==="control"?this.triggerKeydown=!0:this.triggerKeydown=!1);var a=this.graph;if(!a[this.functionName])return console.warn("Behavior shortcuts-fit-view \u7684 functionName \u53C2\u6570 '".concat(this.functionName,"' \u4E0D\u5408\u6CD5\uFF0C\u5B83\u4E0D\u662F Graph \u7684\u4E00\u4E2A\u51FD\u6570\u540D")),{};if(this.triggerKeydown&&!this.combinedKey){this.functionParams&&this.functionParams.length?a[this.functionName].apply(a,this.functionParams):a[this.functionName]();return}var o=this.combinedKey.toLowerCase();this.triggerKeydown&&(n===o||n==="control"&&o==="ctrl"||n==="ctrl"&&o==="control")&&(this.functionParams&&this.functionParams.length?a[this.functionName].apply(a,this.functionParams):a[this.functionName]())}},onKeyUp:function(){this.brush&&(this.brush.remove(!0),this.brush=null,this.dragging=!1),this.triggerKeydown=!1}},d2=["shift","ctrl","alt","control","meta"],v2={getDefaultCfg:function(){return{direction:"both",enableOptimize:!1,zoomKey:"ctrl",scalableRange:0,allowDragOnItem:!0}},getEvents:function(){return(!this.zoomKey||d2.indexOf(this.zoomKey)===-1)&&(this.zoomKey="ctrl"),{wheel:"onWheel"}},onWheel:function(e){var t=this;if(this.allowDrag(e)){var r=this.graph,n=Array.isArray(this.zoomKey)?[].concat(this.zoomKey):[this.zoomKey];n.includes("control")&&n.push("ctrl");var a=n.some(function(jr){return e["".concat(jr,"Key")]});if(a){var o=r.get("canvas"),s=o.getPointByClient(e.clientX,e.clientY),u=r.getZoom();e.wheelDelta>0?u=u+u*.05:u=u-u*.05,r.zoomTo(u,{x:s.x,y:s.y})}else{var f=e.deltaX||e.movementX,c=e.deltaY||e.movementY;!c&&navigator.userAgent.indexOf("Firefox")>-1&&(c=-e.wheelDelta*125/3);var l=this.graph.get("width"),m=this.graph.get("height"),w=this.graph.get("canvas").getCanvasBBox(),C=this.scalableRange,D=this.scalableRange;C<1&&C>-1&&(C=l*C,D=m*D);var U=w.minX,$=w.maxX,tt=w.minY,it=w.maxY;f>0?$<-C?f=0:$-f<-C&&(f=$+C):f<0&&(U>l+C?f=0:U-f>l+C&&(f=U-(l+C))),c>0?it<-D?c=0:it-c<-D&&(c=it+D):c<0&&(tt>m+D?c=0:tt-c>m+D&&(c=tt-(m+D))),this.get("direction")==="x"?c=0:this.get("direction")==="y"&&(f=0),r.translate(-f,-c)}e.preventDefault();var ct=this.get("enableOptimize");if(ct){var _t=this.get("optimizeZoom"),Bt=this.get("optimized"),Pt=r.getNodes(),Qt=r.getEdges(),ye=Pt.length,ce=Qt.length;if(!Bt){for(var Ne=0;Ne<ye;Ne++){var $e=Pt[Ne];if(!$e.destroyed)for(var Rr=$e.get("group").get("children"),rn=Rr.length,Vr=0;Vr<rn;Vr++){var Cr=Rr[Vr];!Cr.destoryed&&!Cr.get("isKeyShape")&&(Cr.set("ori-visibility",Cr.get("ori-visibility")||Cr.get("visible")),Cr.hide())}}for(var Cn=0;Cn<ce;Cn++)for(var _n=Qt[Cn],Rr=_n.get("group").get("children"),rn=Rr.length,Vr=0;Vr<rn;Vr++){var Cr=Rr[Vr];Cr.set("ori-visibility",Cr.get("ori-visibility")||Cr.get("visible")),Cr.hide()}this.set("optimized",!0)}clearTimeout(this.get("timeout"));var Tr=setTimeout(function(){var jr=r.getZoom(),dn=t.get("optimized");if(dn){t.set("optimized",!1);for(var vn=0;vn<ye;vn++){var Pn=Pt[vn],Wn=Pn.get("group").get("children"),ma=Wn.length;if(jr<_t){var Oa=Pn.getKeyShape(),pi=Oa.get("ori-visibility");pi&&Oa.show()}else for(var ai=0;ai<ma;ai++){var gi=Wn[ai],pi=gi.get("ori-visibility");!gi.get("visible")&&pi&&pi&&gi.show()}}for(var Ei=0;Ei<ce;Ei++){var Qi=Qt[Ei],Wn=Qi.get("group").get("children"),ma=Wn.length;if(jr<_t){var Oa=Qi.getKeyShape(),pi=Oa.get("ori-visibility");pi&&Oa.show()}else for(var ai=0;ai<ma;ai++){var gi=Wn[ai];if(!gi.get("visible")){var pi=gi.get("ori-visibility");pi&&gi.show()}}}}},100);this.set("timeout",Tr)}}},allowDrag:function(e){var t,r,n=e.target,a=n&&n.isCanvas&&n.isCanvas();if((0,v.isBoolean)(this.allowDragOnItem)&&!this.allowDragOnItem&&!a)return!1;if((0,v.isObject)(this.allowDragOnItem)){var o=this.allowDragOnItem,s=o.node,u=o.edge,f=o.combo,c=(r=(t=e.item)===null||t===void 0?void 0:t.getType)===null||r===void 0?void 0:r.call(t);if(!s&&c==="node"||!u&&c==="edge"||!f&&c==="combo")return!1}return!0}},p2={"drag-canvas":F_,"zoom-canvas":H_,"drag-node":G_,"activate-relations":z_,"brush-select":X_,"click-select":W_,"lasso-select":o2,tooltip:j_,"edge-tooltip":Z_,"collapse-expand":$_,"drag-combo":J_,"collapse-expand-combo":e2,"create-edge":f2,"shortcuts-call":h2,"scroll-canvas":v2};(0,v.each)(p2,function(i,e){Tp(e,i)});var g2=(0,g.__assign)((0,g.__assign)({},ft),fm),oS=Jo.Grid,sS=Jo.Minimap,uS=Jo.Bundling,fS=Jo.Menu,y2=Jo.Fisheye,cS=Jo.ToolBar,lS=Jo.Tooltip,m2=Jo.TimeBar,b2=Jo.ImageMinimap,x2=Jo.EdgeFilterLens,w2=Jo.SnapLine,hS=Jo.Legend,E2=Jo.Annotation,Q0={version:Ll.version,Graph:Ig,TreeGraph:gx,Util:lc,Layout:Ja.Layouts,TreeLayout:Jb,registerLayout:tx,Global:Ll,registerBehavior:Tp,registerCombo:um,registerEdge:Cp,registerNode:uc,Minimap:Jo.Minimap,Grid:Jo.Grid,Bundling:Jo.Bundling,Menu:Jo.Menu,ToolBar:Jo.ToolBar,Tooltip:Jo.Tooltip,Legend:Jo.Legend,TimeBar:m2,SnapLine:w2,Fisheye:y2,ImageMinimap:b2,EdgeFilterLens:x2,Annotation:E2,Algorithm:g2,Arrow:Ep,Marker:_p,Shape:Vc};Q0.version="4.8.23";var _2=Q0,dS="4.8.23"},99905:function(Se,R,et){"use strict";et.r(R),et.d(R,{Graph:function(){return j},GraphWithEvent:function(){return Lt},algorithm:function(){return ft},comparision:function(){return V},essence:function(){return nt},generate:function(){return z}});var ft={};et.r(ft),et.d(ft,{components:function(){return Ce},dfs:function(){return ue},dijkstra:function(){return Ir},dijkstraAll:function(){return Ur},findCycles:function(){return Kn},floydWarshall:function(){return tn},isAcyclic:function(){return qe},postorder:function(){return or},preorder:function(){return Br},prim:function(){return oe},tarjan:function(){return Xr},topsort:function(){return ya}});var nt={};et.r(nt),et.d(nt,{hasSelfLoop:function(){return xr},isGraph:function(){return hn},isNullGraph:function(){return Ze},isSimpleGraph:function(){return Yn}});var V={};et.r(V),et.d(V,{containAllSameEdges:function(){return Et},containAllSameNodes:function(){return q},containSameEdges:function(){return bt},containSameNodes:function(){return vt},getSameEdges:function(){return I},getSameNodes:function(){return P},isGraphComplement:function(){return Dr},isGraphContainsAnother:function(){return Dt},isGraphOptionSame:function(){return T},isGraphSame:function(){return Gt}});var z={};et.r(z),et.d(z,{getGraphComplement:function(){return Yr}});var H;(function($t){$t.DEFAULT_EDGE_NAME="\0",$t.GRAPH_NODE="\0",$t.EDGE_KEY_DELIM=""})(H||(H={}));function F($t,It){var ne=$t.get(It)||0;$t.set(It,ne+1)}function M($t,It){var ne=$t.get(It);ne!==void 0&&(ne=ne-1,ne>0?$t.set(It,ne):$t.delete(It))}function A($t,It,ne,xe){var pe=String(It),ke=String(ne);if(!$t&&pe>ke){var sr=pe;pe=ke,ke=sr}return pe+H.EDGE_KEY_DELIM+ke+H.EDGE_KEY_DELIM+(xe===void 0?H.DEFAULT_EDGE_NAME:xe)}function y($t,It,ne,xe){var pe=String(It),ke=String(ne),sr={v:It,w:ne};if(!$t&&pe>ke){var lr=sr.v;sr.v=sr.w,sr.w=lr}return xe!==void 0&&(sr.name=xe),sr}function x($t,It){return A($t,It.v,It.w,It.name)}function p($t){return typeof $t=="function"}var _=function(It){return It.nodes().map(function(ne){var xe=It.node(ne),pe=It.parent(ne),ke={id:ne,value:xe,parent:pe};return ke.value===void 0&&delete ke.value,ke.parent===void 0&&delete ke.parent,ke})},E=function(It){return It.edges().map(function(ne){var xe=It.edge(ne),pe={v:ne.v,w:ne.w,value:xe,name:ne.name};return pe.name===void 0&&delete pe.name,pe.value===void 0&&delete pe.value,pe})},b=function(It){var ne={options:{directed:It.isDirected(),multigraph:It.isMultigraph(),compound:It.isCompound()},nodes:_(It),edges:E(It),value:It.graph()};return ne.value===void 0&&delete ne.value,ne},k=function(It){var ne=new j(It.options);return It.value!==void 0&&ne.setGraph(It.value),It.nodes.forEach(function(xe){ne.setNode(xe.id,xe.value),xe.parent&&ne.setParent(xe.id,xe.parent)}),It.edges.forEach(function(xe){ne.setEdge(xe.v,xe.w,xe.value,xe.name)}),ne};function N($t,It){var ne=Object.keys($t);if(Object.getOwnPropertySymbols){var xe=Object.getOwnPropertySymbols($t);It&&(xe=xe.filter(function(pe){return Object.getOwnPropertyDescriptor($t,pe).enumerable})),ne.push.apply(ne,xe)}return ne}function g($t){for(var It=1;It<arguments.length;It++){var ne=arguments[It]!=null?arguments[It]:{};It%2?N(Object(ne),!0).forEach(function(xe){v($t,xe,ne[xe])}):Object.getOwnPropertyDescriptors?Object.defineProperties($t,Object.getOwnPropertyDescriptors(ne)):N(Object(ne)).forEach(function(xe){Object.defineProperty($t,xe,Object.getOwnPropertyDescriptor(ne,xe))})}return $t}function v($t,It,ne){return It in $t?Object.defineProperty($t,It,{value:ne,enumerable:!0,configurable:!0,writable:!0}):$t[It]=ne,$t}function K($t,It){if(!($t instanceof It))throw new TypeError("Cannot call a class as a function")}function B($t,It){for(var ne=0;ne<It.length;ne++){var xe=It[ne];xe.enumerable=xe.enumerable||!1,xe.configurable=!0,"value"in xe&&(xe.writable=!0),Object.defineProperty($t,xe.key,xe)}}function G($t,It,ne){return It&&B($t.prototype,It),ne&&B($t,ne),Object.defineProperty($t,"prototype",{writable:!1}),$t}var Y={compound:!1,multigraph:!1,directed:!0},j=function(){function $t(){var It=this,ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};K(this,$t),this.directed=!0,this.multigraph=!1,this.compound=!1,this.GRAPH_NODE=H.GRAPH_NODE,this.label=void 0,this.nodeCountNum=0,this.edgeCountNum=0,this.defaultNodeLabelFn=function(){},this.defaultEdgeLabelFn=function(){},this.parentMap=void 0,this.childrenMap=void 0,this.nodesLabelMap=new Map,this.inEdgesMap=new Map,this.outEdgesMap=new Map,this.predecessorsMap=new Map,this.successorsMap=new Map,this.edgesMap=new Map,this.edgesLabelsMap=new Map,this.isDirected=function(){return It.directed},this.isMultigraph=function(){return It.multigraph},this.isCompound=function(){return It.compound},this.setGraph=function(pe){return It.label=pe,It},this.graph=function(){return It.label},this.setDefaultNodeLabel=function(pe){return p(pe)?It.defaultNodeLabelFn=pe:It.defaultNodeLabelFn=function(){return pe},It},this.nodeCount=function(){return It.nodeCountNum},this.node=function(pe){return It.nodesLabelMap.get(pe)},this.nodes=function(){return Array.from(It.nodesLabelMap.keys())},this.sources=function(){return It.nodes().filter(function(pe){var ke;return!(!((ke=It.inEdgesMap.get(pe))===null||ke===void 0)&&ke.size)})},this.sinks=function(){return It.nodes().filter(function(pe){var ke;return!(!((ke=It.outEdgesMap.get(pe))===null||ke===void 0)&&ke.size)})},this.setNodes=function(pe,ke){return pe.map(function(sr){return It.setNode(sr,ke)}),It},this.hasNode=function(pe){return It.nodesLabelMap.has(pe)},this.checkCompound=function(){if(!It.isCompound())throw new Error("Cannot construct parent-children relations in a non-compound graph")},this.parent=function(pe){if(It.isCompound()){var ke,sr=(ke=It.parentMap)===null||ke===void 0?void 0:ke.get(pe);if(sr!==It.GRAPH_NODE)return sr}},this.removeFromParentsChildList=function(pe){var ke=It.parentMap.get(pe);It.childrenMap.get(ke).delete(pe)},this.setParent=function(pe,ke){var sr,lr;It.checkCompound();for(var en=ke===void 0?It.GRAPH_NODE:ke,Dn=It.parent(en);Dn;){if(pe===Dn)throw new Error("Setting "+ke+" as parent of "+pe+" would create a cycle");Dn=It.parent(Dn)}ke&&It.setNode(ke),It.setNode(pe),It.removeFromParentsChildList(pe),(sr=It.parentMap)===null||sr===void 0||sr.set(pe,en);var En=It.childrenMap.get(en);return En.set(pe,!0),(lr=It.childrenMap)===null||lr===void 0||lr.set(en,En),It},this.children=function(pe){var ke=pe===void 0?It.GRAPH_NODE:pe;if(It.isCompound()){var sr,lr=(sr=It.childrenMap)===null||sr===void 0?void 0:sr.get(ke);return lr?Array.from(lr.keys()):void 0}if(ke===It.GRAPH_NODE)return It.nodes();if(pe&&It.hasNode(pe))return[]},this.predecessors=function(pe){var ke=It.predecessorsMap.get(pe);return ke?Array.from(ke.keys()):void 0},this.successors=function(pe){var ke=It.successorsMap.get(pe);return ke?Array.from(ke.keys()):void 0},this.neighbors=function(pe){var ke;if(It.hasNode(pe))return Array.from(new Set((ke=It.predecessors(pe))===null||ke===void 0?void 0:ke.concat(It.successors(pe))))},this.isLeaf=function(pe){var ke;if(It.isDirected()){var sr;return!(!((sr=It.successors(pe))===null||sr===void 0)&&sr.length)}return!(!((ke=It.neighbors(pe))===null||ke===void 0)&&ke.length)},this.filterNodes=function(pe){var ke=It.directed,sr=It.multigraph,lr=It.compound,en=new $t({directed:ke,multigraph:sr,compound:lr});if(en.setGraph(It.graph()),It.nodes().forEach(function(En){pe(En)&&en.setNode(En,It.node(En))}),It.edges().forEach(function(En){en.hasNode(En.v)&&en.hasNode(En.w)&&en.setEdgeObj(En,It.edge(En))}),lr){var Dn=function(ta){for(var Qn=It.parent(ta);Qn!==void 0&&!en.hasNode(Qn);)Qn=It.parent(Qn);return Qn};en.nodes().forEach(function(En){en.setParent(En,Dn(En))})}return en},this.setDefaultEdgeLabel=function(pe){return p(pe)?It.defaultEdgeLabelFn=pe:It.defaultEdgeLabelFn=function(){return pe},It},this.edgeCount=function(){return It.edgeCountNum},this.setEdgeObj=function(pe,ke){return It.setEdge(pe.v,pe.w,ke,pe.name)},this.setPath=function(pe,ke){return pe.reduce(function(sr,lr){return It.setEdge(sr,lr,ke),lr}),It},this.edgeFromArgs=function(pe,ke,sr){return It.edge({v:pe,w:ke,name:sr})},this.edge=function(pe){return It.edgesLabelsMap.get(x(It.isDirected(),pe))},this.hasEdge=function(pe,ke,sr){return It.edgesLabelsMap.has(x(It.isDirected(),{v:pe,w:ke,name:sr}))},this.removeEdgeObj=function(pe){var ke=pe.v,sr=pe.w,lr=pe.name;return It.removeEdge(ke,sr,lr)},this.edges=function(){return Array.from(It.edgesMap.values())},this.inEdges=function(pe,ke){var sr=It.inEdgesMap.get(pe);if(sr)return Array.from(sr.values()).filter(function(lr){return!ke||lr.v===ke})},this.outEdges=function(pe,ke){var sr=It.outEdgesMap.get(pe);if(sr)return Array.from(sr.values()).filter(function(lr){return!ke||lr.w===ke})},this.nodeEdges=function(pe,ke){var sr;if(It.hasNode(pe))return(sr=It.inEdges(pe,ke))===null||sr===void 0?void 0:sr.concat(It.outEdges(pe,ke))},this.toJSON=function(){return b(It)},this.nodeInDegree=function(pe){var ke=It.inEdgesMap.get(pe);return ke?ke.size:0},this.nodeOutDegree=function(pe){var ke=It.outEdgesMap.get(pe);return ke?ke.size:0},this.nodeDegree=function(pe){return It.nodeInDegree(pe)+It.nodeOutDegree(pe)},this.source=function(pe){return pe.v},this.target=function(pe){return pe.w};var xe=g(g({},Y),ne);this.compound=xe.compound,this.directed=xe.directed,this.multigraph=xe.multigraph,this.compound&&(this.parentMap=new Map,this.childrenMap=new Map)}return G($t,[{key:"setNode",value:function(ne,xe){var pe=this.nodesLabelMap,ke=this.defaultNodeLabelFn,sr=this.isCompound,lr=this.parentMap,en=this.childrenMap,Dn=this.inEdgesMap,En=this.outEdgesMap,ta=this.predecessorsMap,Qn=this.successorsMap;if(pe.has(ne))return xe!==void 0&&pe.set(ne,xe),this;if(pe.set(ne,xe||ke(ne)),sr()){var ba;lr==null||lr.set(ne,this.GRAPH_NODE),en==null||en.set(ne,new Map),en!=null&&en.has(this.GRAPH_NODE)||en==null||en.set(this.GRAPH_NODE,new Map),en==null||(ba=en.get(this.GRAPH_NODE))===null||ba===void 0||ba.set(ne,!0)}return[Dn,En,ta,Qn].forEach(function(Ha){return Ha.set(ne,new Map)}),this.nodeCountNum+=1,this}},{key:"removeNode",value:function(ne){var xe=this;if(this.hasNode(ne)){var pe=function(Ba){xe.removeEdge(Ba.v,Ba.w,Ba.name)},ke=this.inEdgesMap,sr=this.outEdgesMap,lr=this.predecessorsMap,en=this.successorsMap,Dn=this.nodesLabelMap;if(this.isCompound()){var En,ta,Qn;this.removeFromParentsChildList(ne),(En=this.parentMap)===null||En===void 0||En.delete(ne),(ta=this.children(ne))===null||ta===void 0||ta.forEach(function(Za){return xe.setParent(Za)}),(Qn=this.childrenMap)===null||Qn===void 0||Qn.delete(ne)}var ba=ke.get(ne),Ha=sr.get(ne);Array.from(ba.values()).forEach(function(Za){return pe(Za)}),Array.from(Ha.values()).forEach(function(Za){return pe(Za)}),Dn.delete(ne),ke.delete(ne),sr.delete(ne),lr.delete(ne),en.delete(ne),this.nodeCountNum-=1}return this}},{key:"setEdge",value:function(ne,xe,pe,ke){var sr,lr,en=y(this.isDirected(),ne,xe,ke),Dn=x(this.isDirected(),en),En=en.v,ta=en.w;if(this.edgesLabelsMap.has(Dn))return this.edgesLabelsMap.set(Dn,pe),this;if(ke!==void 0&&!this.isMultigraph())throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(En),this.setNode(ta),this.edgesLabelsMap.set(Dn,pe||this.defaultEdgeLabelFn(En,ta,ke)),Object.freeze(en),this.edgesMap.set(Dn,en);var Qn=this.predecessorsMap.get(ta),ba=this.successorsMap.get(En);return F(Qn,En),F(ba,ta),(sr=this.inEdgesMap.get(ta))===null||sr===void 0||sr.set(Dn,en),(lr=this.outEdgesMap.get(En))===null||lr===void 0||lr.set(Dn,en),this.edgeCountNum+=1,this}},{key:"removeEdge",value:function(ne,xe,pe){var ke=A(this.isDirected(),ne,xe,pe),sr=this.edgesMap.get(ke);if(sr){var lr=y(this.isDirected(),ne,xe,pe),en=lr.v,Dn=lr.w;this.edgesLabelsMap.delete(ke),this.edgesMap.delete(ke);var En=this.predecessorsMap.get(Dn),ta=this.successorsMap.get(en);M(En,en),M(ta,Dn),this.inEdgesMap.get(Dn).delete(ke),this.outEdgesMap.get(en).delete(ke),this.edgeCountNum-=1}return this}}]),$t}();j.fromJSON=k;function Q($t){"@babel/helpers - typeof";return Q=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(It){return typeof It}:function(It){return It&&typeof Symbol=="function"&&It.constructor===Symbol&&It!==Symbol.prototype?"symbol":typeof It},Q($t)}function Z($t,It){if(!($t instanceof It))throw new TypeError("Cannot call a class as a function")}function rt($t,It){for(var ne=0;ne<It.length;ne++){var xe=It[ne];xe.enumerable=xe.enumerable||!1,xe.configurable=!0,"value"in xe&&(xe.writable=!0),Object.defineProperty($t,xe.key,xe)}}function ut($t,It,ne){return It&&rt($t.prototype,It),ne&&rt($t,ne),Object.defineProperty($t,"prototype",{writable:!1}),$t}function ht(){return typeof Reflect!="undefined"&&Reflect.get?ht=Reflect.get:ht=function(It,ne,xe){var pe=kt(It,ne);if(pe){var ke=Object.getOwnPropertyDescriptor(pe,ne);return ke.get?ke.get.call(arguments.length<3?It:xe):ke.value}},ht.apply(this,arguments)}function kt($t,It){for(;!Object.prototype.hasOwnProperty.call($t,It)&&($t=yt($t),$t!==null););return $t}function At($t,It){if(typeof It!="function"&&It!==null)throw new TypeError("Super expression must either be null or a function");$t.prototype=Object.create(It&&It.prototype,{constructor:{value:$t,writable:!0,configurable:!0}}),Object.defineProperty($t,"prototype",{writable:!1}),It&&Ht($t,It)}function Ht($t,It){return Ht=Object.setPrototypeOf||function(xe,pe){return xe.__proto__=pe,xe},Ht($t,It)}function Rt($t){var It=ot();return function(){var xe=yt($t),pe;if(It){var ke=yt(this).constructor;pe=Reflect.construct(xe,arguments,ke)}else pe=xe.apply(this,arguments);return le(this,pe)}}function le($t,It){if(It&&(Q(It)==="object"||typeof It=="function"))return It;if(It!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dt($t)}function dt($t){if($t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $t}function ot(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch($t){return!1}}function yt($t){return yt=Object.setPrototypeOf?Object.getPrototypeOf:function(ne){return ne.__proto__||Object.getPrototypeOf(ne)},yt($t)}var Lt=function($t){At(ne,$t);var It=Rt(ne);function ne(){var xe;Z(this,ne);for(var pe=arguments.length,ke=new Array(pe),sr=0;sr<pe;sr++)ke[sr]=arguments[sr];return xe=It.call.apply(It,[this].concat(ke)),xe.eventPool={},xe}return ut(ne,[{key:"appendEvent",value:function(pe,ke){this.eventPool[pe]||(this.eventPool[pe]=[]),this.eventPool[pe].push(ke)}},{key:"removeEvent",value:function(pe,ke){if(this.eventPool[pe]){var sr=this.eventPool[pe].indexOf(ke);sr>-1&&this.eventPool[pe].splice(sr,1)}}},{key:"emitEvent",value:function(pe){for(var ke=arguments.length,sr=new Array(ke>1?ke-1:0),lr=1;lr<ke;lr++)sr[lr-1]=arguments[lr];this.eventPool[pe]&&this.eventPool[pe].forEach(function(en){en.apply(void 0,sr)})}},{key:"setNode",value:function(pe,ke){return ht(yt(ne.prototype),"setNode",this).call(this,pe,ke),this.emitEvent("nodeAdd",pe,ke),this}},{key:"removeNode",value:function(pe){return ht(yt(ne.prototype),"removeNode",this).call(this,pe),this.emitEvent("nodeRemove",pe),this}},{key:"setEdge",value:function(pe,ke,sr,lr){return ht(yt(ne.prototype),"setEdge",this).call(this,pe,ke,sr,lr),this.emitEvent("edgeAdd",pe,ke,sr,lr),this}},{key:"removeEdge",value:function(pe,ke,sr){return ht(yt(ne.prototype),"removeEdge",this).call(this,pe,ke,sr),this.emitEvent("edgeRemove",pe,ke,sr),this}}]),ne}(j);function Ot($t,It){for(var ne=0;ne<It.length;ne++){var xe=It[ne];xe.enumerable=xe.enumerable||!1,xe.configurable=!0,"value"in xe&&(xe.writable=!0),Object.defineProperty($t,xe.key,xe)}}function Wt($t,It,ne){return It&&Ot($t.prototype,It),ne&&Ot($t,ne),Object.defineProperty($t,"prototype",{writable:!1}),$t}function Jt($t,It){if(!($t instanceof It))throw new TypeError("Cannot call a class as a function")}var De=Wt(function $t(){var It=this;Jt(this,$t),this.arr=[],this.keyIndice=new Map,this.size=function(){return It.arr.length},this.keys=function(){return It.arr.map(function(ne){return ne.key})},this.has=function(ne){return It.keyIndice.has(ne)},this.priority=function(ne){var xe=It.keyIndice.get(ne);if(xe!==void 0)return It.arr[xe].priority},this.swap=function(ne,xe){var pe=It.arr,ke=It.keyIndice,sr=[pe[ne],pe[xe]],lr=sr[0],en=sr[1];pe[ne]=en,pe[xe]=lr,ke.set(lr.key,xe),ke.set(en.key,ne)},this.innerDecrease=function(ne){for(var xe=It.arr,pe=xe[ne].priority,ke,sr=ne;sr!==0;){var lr;if(ke=sr>>1,((lr=xe[ke])===null||lr===void 0?void 0:lr.priority)<pe)break;It.swap(sr,ke),sr=ke}},this.heapify=function(ne){var xe=It.arr,pe=ne<<1,ke=pe+1,sr=ne;pe<xe.length&&(sr=xe[pe].priority<xe[sr].priority?pe:sr,ke<xe.length&&(sr=xe[ke].priority<xe[sr].priority?ke:sr),sr!==ne&&(It.swap(ne,sr),It.heapify(sr)))},this.min=function(){if(It.size()===0)throw new Error("Queue underflow");return It.arr[0].key},this.add=function(ne,xe){var pe=It.keyIndice,ke=It.arr;if(!pe.has(ne)){var sr=ke.length;return pe.set(ne,sr),ke.push({key:ne,priority:xe}),It.innerDecrease(sr),!0}return!1},this.removeMin=function(){It.swap(0,It.arr.length-1);var ne=It.arr.pop();return It.keyIndice.delete(ne.key),It.heapify(0),ne.key},this.decrease=function(ne,xe){if(!It.has(ne))throw new Error("There's no key named ".concat(ne));var pe=It.keyIndice.get(ne);if(xe>It.arr[pe].priority)throw new Error("New priority is greater than current priority.Key: ".concat(ne," Old: + ").concat(It.arr[pe].priority," New: ").concat(xe));It.arr[pe].priority=xe,It.innerDecrease(pe)}}),te=function(It,ne){var xe=new j,pe=new Map,ke=new De,sr;function lr(En){var ta=En.v===sr?En.w:En.v,Qn=ke.priority(ta);if(Qn!==void 0){var ba=ne(En);ba<Qn&&(pe.set(ta,sr),ke.decrease(ta,ba))}}if(It.nodeCount()===0)return xe;It.nodes().forEach(function(En){ke.add(En,Number.POSITIVE_INFINITY),xe.setNode(En)}),ke.decrease(It.nodes()[0],0);for(var en=!1;ke.size()>0;){var Dn;if(sr=ke.removeMin(),pe.has(sr))xe.setEdge(sr,pe.get(sr));else{if(en)throw new Error("Input graph is not connected: "+It.graph());en=!0}(Dn=It.nodeEdges(sr))===null||Dn===void 0||Dn.forEach(lr)}return xe},oe=te,me=function(It){var ne=new Set,xe=[],pe=It.nodes();return pe.forEach(function(ke){for(var sr=[],lr=[ke];lr.length>0;){var en=lr.pop();if(!ne.has(en)){var Dn,En;ne.add(en),sr.push(en),(Dn=It.successors(en))===null||Dn===void 0||Dn.forEach(function(ta){return lr.push(ta)}),(En=It.predecessors(en))===null||En===void 0||En.forEach(function(ta){return lr.push(ta)})}}sr.length&&xe.push(sr)}),xe},Ce=me,_e=function $t(It,ne,xe,pe,ke,sr){pe.includes(ne)||(pe.push(ne),xe||sr.push(ne),ke(ne).forEach(function(lr){return $t(It,lr,xe,pe,ke,sr)}),xe&&sr.push(ne))},zt=function(It,ne,xe){var pe=Array.isArray(ne)?ne:[ne],ke=function(Dn){return It.isDirected()?It.successors(Dn):It.neighbors(Dn)},sr=[],lr=[];return pe.forEach(function(en){if(It.hasNode(en))_e(It,en,xe==="post",lr,ke,sr);else throw new Error("Graph does not have node: "+en)}),sr},ue=zt;function Pe($t,It){return Te($t)||se($t,It)||ie($t,It)||Xt()}function Xt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ie($t,It){if($t){if(typeof $t=="string")return Ie($t,It);var ne=Object.prototype.toString.call($t).slice(8,-1);if(ne==="Object"&&$t.constructor&&(ne=$t.constructor.name),ne==="Map"||ne==="Set")return Array.from($t);if(ne==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ne))return Ie($t,It)}}function Ie($t,It){(It==null||It>$t.length)&&(It=$t.length);for(var ne=0,xe=new Array(It);ne<It;ne++)xe[ne]=$t[ne];return xe}function se($t,It){var ne=$t==null?null:typeof Symbol!="undefined"&&$t[Symbol.iterator]||$t["@@iterator"];if(ne!=null){var xe=[],pe=!0,ke=!1,sr,lr;try{for(ne=ne.call($t);!(pe=(sr=ne.next()).done)&&(xe.push(sr.value),!(It&&xe.length===It));pe=!0);}catch(en){ke=!0,lr=en}finally{try{!pe&&ne.return!=null&&ne.return()}finally{if(ke)throw lr}}return xe}}function Te($t){if(Array.isArray($t))return $t}var Be=function(){return 1},Tt=function(It,ne,xe,pe){return nr(It,ne,xe||Be,pe||function(ke){return It.outEdges(ke)})},nr=function(It,ne,xe,pe){var ke=new Map,sr=new De,lr,en,Dn=function(Qn){var ba=Qn.v!==lr?Qn.v:Qn.w,Ha=ke.get(ba),Za=xe(Qn),Ba=en.distance+Za;if(Za<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+Qn+" Weight: "+Za);Ba<Ha.distance&&(Ha.distance=Ba,Ha.predecessor=lr,sr.decrease(ba,Ba))};for(It.nodes().forEach(function(ta){var Qn=ta===ne?0:Number.POSITIVE_INFINITY;ke.set(ta,{distance:Qn}),sr.add(ta,Qn)});sr.size()>0&&(lr=sr.removeMin(),en=ke.get(lr),!(en&&en.distance===Number.POSITIVE_INFINITY));)pe(lr).forEach(Dn);var En={};return Array.from(ke.entries()).forEach(function(ta){var Qn=Pe(ta,2),ba=Qn[0],Ha=Qn[1];return En[String(ba)]=Ha,En}),En},Ir=Tt,Zr=function(It,ne,xe){var pe={};return It.nodes().forEach(function(ke){return pe[String(ke)]=Ir(It,ke,ne,xe),pe}),pe},Ur=Zr,wn=function(It){var ne=0,xe=[],pe=new Map,ke=[];function sr(lr){var en,Dn={onStack:!0,lowlink:ne,index:ne};if(pe.set(lr,Dn),ne+=1,xe.push(lr),(en=It.successors(lr))===null||en===void 0||en.forEach(function(ba){var Ha;if(pe.has(ba)){if(!((Ha=pe.get(ba))===null||Ha===void 0)&&Ha.onStack){var Ba=pe.get(ba);Dn.lowlink=Math.min(Dn.lowlink,Ba.index)}}else{sr(ba);var Za=pe.get(ba);Dn.lowlink=Math.min(Dn.lowlink,Za.lowlink)}}),Dn.lowlink===Dn.index){var En=[],ta;do{ta=xe.pop();var Qn=pe.get(ta);Qn.onStack=!1,En.push(ta)}while(lr!==ta);ke.push(En)}}return It.nodes().forEach(function(lr){pe.has(lr)||sr(lr)}),ke},Xr=wn,Sn=function(It){return Xr(It).filter(function(ne){return ne.length>1||ne.length===1&&It.hasEdge(ne[0],ne[0])})},Kn=Sn;function Fn($t){"@babel/helpers - typeof";return Fn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(It){return typeof It}:function(It){return It&&typeof Symbol=="function"&&It.constructor===Symbol&&It!==Symbol.prototype?"symbol":typeof It},Fn($t)}function pn($t,It){for(var ne=0;ne<It.length;ne++){var xe=It[ne];xe.enumerable=xe.enumerable||!1,xe.configurable=!0,"value"in xe&&(xe.writable=!0),Object.defineProperty($t,xe.key,xe)}}function er($t,It,ne){return It&&pn($t.prototype,It),ne&&pn($t,ne),Object.defineProperty($t,"prototype",{writable:!1}),$t}function cr($t,It){if(!($t instanceof It))throw new TypeError("Cannot call a class as a function")}function dr($t,It){if(typeof It!="function"&&It!==null)throw new TypeError("Super expression must either be null or a function");$t.prototype=Object.create(It&&It.prototype,{constructor:{value:$t,writable:!0,configurable:!0}}),Object.defineProperty($t,"prototype",{writable:!1}),It&&bn($t,It)}function Gr($t){var It=ca();return function(){var xe=qn($t),pe;if(It){var ke=qn(this).constructor;pe=Reflect.construct(xe,arguments,ke)}else pe=xe.apply(this,arguments);return sn(this,pe)}}function sn($t,It){if(It&&(Fn(It)==="object"||typeof It=="function"))return It;if(It!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return yn($t)}function yn($t){if($t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $t}function ln($t){var It=typeof Map=="function"?new Map:void 0;return ln=function(xe){if(xe===null||!oa(xe))return xe;if(typeof xe!="function")throw new TypeError("Super expression must either be null or a function");if(typeof It!="undefined"){if(It.has(xe))return It.get(xe);It.set(xe,pe)}function pe(){return Vn(xe,arguments,qn(this).constructor)}return pe.prototype=Object.create(xe.prototype,{constructor:{value:pe,enumerable:!1,writable:!0,configurable:!0}}),bn(pe,xe)},ln($t)}function Vn($t,It,ne){return ca()?Vn=Reflect.construct:Vn=function(pe,ke,sr){var lr=[null];lr.push.apply(lr,ke);var en=Function.bind.apply(pe,lr),Dn=new en;return sr&&bn(Dn,sr.prototype),Dn},Vn.apply(null,arguments)}function ca(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch($t){return!1}}function oa($t){return Function.toString.call($t).indexOf("[native code]")!==-1}function bn($t,It){return bn=Object.setPrototypeOf||function(xe,pe){return xe.__proto__=pe,xe},bn($t,It)}function qn($t){return qn=Object.setPrototypeOf?Object.getPrototypeOf:function(ne){return ne.__proto__||Object.getPrototypeOf(ne)},qn($t)}var Gn=function($t){dr(ne,$t);var It=Gr(ne);function ne(){return cr(this,ne),It.apply(this,arguments)}return er(ne)}(ln(Error));function zn($t){var It=new Set,ne=new Set,xe=[];function pe(ke){if(ne.has(ke))throw new Gn;if(!It.has(ke)){var sr;ne.add(ke),It.add(ke),(sr=$t.predecessors(ke))===null||sr===void 0||sr.forEach(pe),ne.delete(ke),xe.push(ke)}}if($t.sinks().forEach(pe),It.size!==$t.nodeCount())throw new Gn;return xe}var ya=zn,W=function(It){try{ya(It)}catch(ne){if(ne instanceof Gn)return!1;throw ne}return!0},qe=W,be=function(It,ne){return ue(It,ne,"post")},or=be,ar=function(It,ne){return ue(It,ne,"pre")},Br=ar,Pr=function(){return 1};function cn($t,It,ne){return xn($t,It||Pr,ne||function(xe){return $t.outEdges(xe)})}function xn($t,It,ne){var xe={},pe=$t.nodes();return pe.forEach(function(ke){var sr=String(ke);xe[sr]={},xe[sr][sr]={distance:0},pe.forEach(function(lr){ke!==lr&&(xe[sr][String(lr)]={distance:Number.POSITIVE_INFINITY})}),ne(ke).forEach(function(lr){var en=lr.v===ke?lr.w:lr.v,Dn=It(lr);xe[sr][String(en)]={distance:Dn,predecessor:ke}})}),pe.forEach(function(ke){var sr=String(ke),lr=xe[sr];pe.forEach(function(en){var Dn=String(en),En=xe[Dn];pe.forEach(function(ta){var Qn=String(ta),ba=En[sr],Ha=lr[Qn],Za=En[Qn],Ba=ba.distance+Ha.distance;Ba<Za.distance&&(Za.distance=Ba,Za.predecessor=Ha.predecessor)})})}),xe}var tn=cn,vt=function(It,ne){for(var xe=It.nodes(),pe=0;pe<xe.length;pe++){var ke=xe[pe];if(ne.hasNode(ke))return!0}return!1},bt=function(It,ne){for(var xe=It.edges(),pe=0;pe<xe.length;pe++){var ke=xe[pe];if(ne.hasEdge(ke.v,ke.w,ke.name))return!0}return!1},P=function(It,ne){var xe=It.nodes(),pe=xe.filter(function(ke){return ne.hasNode(ke)});return pe},I=function(It,ne){var xe=It.edges(),pe=xe.filter(function(ke){return ne.hasEdge(ke.v,ke.w,ke.name)});return pe},T=function(It,ne){return It.isCompound()===ne.isCompound()&&It.isDirected()===ne.isDirected()&&It.isMultigraph()===ne.isMultigraph()},q=function(It,ne){var xe=P(It,ne);return xe.length===It.nodes().length},Et=function(It,ne){var xe=I(It,ne);return xe.length===It.edges().length},Gt=function(It,ne){return T(It,ne)&&It.nodeCount()===ne.nodeCount()&&q(It,ne)&&It.edgeCount()===ne.edgeCount()&&Et(It,ne)},Dt=function(It,ne){return q(It,ne)&&Et(It,ne)};function ee($t,It){return wr($t)||Hr($t,It)||Ae($t,It)||Ye()}function Ye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ae($t,It){if($t){if(typeof $t=="string")return fr($t,It);var ne=Object.prototype.toString.call($t).slice(8,-1);if(ne==="Object"&&$t.constructor&&(ne=$t.constructor.name),ne==="Map"||ne==="Set")return Array.from($t);if(ne==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ne))return fr($t,It)}}function fr($t,It){(It==null||It>$t.length)&&(It=$t.length);for(var ne=0,xe=new Array(It);ne<It;ne++)xe[ne]=$t[ne];return xe}function Hr($t,It){var ne=$t==null?null:typeof Symbol!="undefined"&&$t[Symbol.iterator]||$t["@@iterator"];if(ne!=null){var xe=[],pe=!0,ke=!1,sr,lr;try{for(ne=ne.call($t);!(pe=(sr=ne.next()).done)&&(xe.push(sr.value),!(It&&xe.length===It));pe=!0);}catch(en){ke=!0,lr=en}finally{try{!pe&&ne.return!=null&&ne.return()}finally{if(ke)throw lr}}return xe}}function wr($t){if(Array.isArray($t))return $t}function hn($t){return $t instanceof j}function Yn($t){if($t.isMultigraph())return!1;for(var It=$t.edges(),ne=new Map,xe=0;xe<It.length;xe++){var pe=It[xe];if(pe.v===pe.w)return!1;var ke=[pe.v,pe.w].sort(),sr=ee(ke,2),lr=sr[0],en=sr[1],Dn="".concat(lr,"-").concat(en);if(ne.has(Dn))return!1;ne.set(Dn,!0)}return!0}function Ze($t){return $t.nodes().length===0}function xr($t){for(var It=$t.edges(),ne=0;ne<It.length;ne++){var xe=It[ne];if(xe.v===xe.w)return!0}return!1}var Dr=function(It,ne){if(!Yn(It)||!Yn(ne)||!q(It,ne)||bt(It,ne))return!1;var xe=It.nodeCount();return It.edgeCount()+ne.edgeCount()===xe*(xe-1)/2},Yr=function(It){if(!Yn(It))return null;for(var ne=It.nodeCount(),xe=new j({compound:It.isCompound(),directed:It.isDirected(),multigraph:It.isMultigraph()}),pe=It.nodes(),ke=0;ke<ne;ke++){var sr=pe[ke];xe.setNode(sr,It.node(sr));for(var lr=ke+1;lr<ne;lr++){var en=pe[lr];It.hasEdge(sr,en)||xe.setEdge(sr,en)}}return xe}},81746:function(Se){(function(et,ft){Se.exports=ft()})(typeof self!="undefined"?self:this,function(){return function(R){var et={};function ft(nt){if(et[nt])return et[nt].exports;var V=et[nt]={i:nt,l:!1,exports:{}};return R[nt].call(V.exports,V,V.exports,ft),V.l=!0,V.exports}return ft.m=R,ft.c=et,ft.d=function(nt,V,z){ft.o(nt,V)||Object.defineProperty(nt,V,{configurable:!1,enumerable:!0,get:z})},ft.n=function(nt){var V=nt&&nt.__esModule?function(){return nt.default}:function(){return nt};return ft.d(V,"a",V),V},ft.o=function(nt,V){return Object.prototype.hasOwnProperty.call(nt,V)},ft.p="",ft(ft.s=5)}([function(R,et){function ft(nt,V,z,H){return H===void 0&&(H="height"),z==="center"?(nt[H]+V[H])/2:nt.height}R.exports={assign:Object.assign,getHeight:ft}},function(R,et,ft){var nt=ft(3),V=function(){function z(F,M){M===void 0&&(M={});var A=this;A.options=M,A.rootNode=nt(F,M)}var H=z.prototype;return H.execute=function(){throw new Error("please override this method")},z}();R.exports=V},function(R,et,ft){var nt=ft(4),V=["LR","RL","TB","BT","H","V"],z=["LR","RL","H"],H=function(A){return z.indexOf(A)>-1},F=V[0];R.exports=function(M,A,y){var x=A.direction||F;if(A.isHorizontal=H(x),x&&V.indexOf(x)===-1)throw new TypeError("Invalid direction: "+x);if(x===V[0])y(M,A);else if(x===V[1])y(M,A),M.right2left();else if(x===V[2])y(M,A);else if(x===V[3])y(M,A),M.bottom2top();else if(x===V[4]||x===V[5]){var p=nt(M,A),_=p.left,E=p.right;y(_,A),y(E,A),A.isHorizontal?_.right2left():_.bottom2top(),E.translate(_.x-E.x,_.y-E.y),M.x=_.x,M.y=E.y;var b=M.getBoundingBox();A.isHorizontal?b.top<0&&M.translate(0,-b.top):b.left<0&&M.translate(-b.left,0)}var k=A.fixedRoot;return k===void 0&&(k=!0),k&&M.translate(-(M.x+M.width/2+M.hgap),-(M.y+M.height/2+M.vgap)),M}},function(R,et,ft){var nt=ft(0),V=18,z=V*2,H=V,F={getId:function(x){return x.id||x.name},getPreH:function(x){return x.preH||0},getPreV:function(x){return x.preV||0},getHGap:function(x){return x.hgap||H},getVGap:function(x){return x.vgap||H},getChildren:function(x){return x.children},getHeight:function(x){return x.height||z},getWidth:function(x){var p=x.label||" ";return x.width||p.split("").length*V}};function M(y,x){var p=this;if(p.vgap=p.hgap=0,y instanceof M)return y;p.data=y;var _=x.getHGap(y),E=x.getVGap(y);return p.preH=x.getPreH(y),p.preV=x.getPreV(y),p.width=x.getWidth(y),p.height=x.getHeight(y),p.width+=p.preH,p.height+=p.preV,p.id=x.getId(y),p.x=p.y=0,p.depth=0,p.children||(p.children=[]),p.addGap(_,E),p}nt.assign(M.prototype,{isRoot:function(){return this.depth===0},isLeaf:function(){return this.children.length===0},addGap:function(x,p){var _=this;_.hgap+=x,_.vgap+=p,_.width+=2*x,_.height+=2*p},eachNode:function(x){for(var p=this,_=[p],E;E=_.shift();)x(E),_=E.children.concat(_)},DFTraverse:function(x){this.eachNode(x)},BFTraverse:function(x){for(var p=this,_=[p],E;E=_.shift();)x(E),_=_.concat(E.children)},getBoundingBox:function(){var x={left:Number.MAX_VALUE,top:Number.MAX_VALUE,width:0,height:0};return this.eachNode(function(p){x.left=Math.min(x.left,p.x),x.top=Math.min(x.top,p.y),x.width=Math.max(x.width,p.x+p.width),x.height=Math.max(x.height,p.y+p.height)}),x},translate:function(x,p){x===void 0&&(x=0),p===void 0&&(p=0),this.eachNode(function(_){_.x+=x,_.y+=p,_.x+=_.preH,_.y+=_.preV})},right2left:function(){var x=this,p=x.getBoundingBox();x.eachNode(function(_){_.x=_.x-(_.x-p.left)*2-_.width}),x.translate(p.width,0)},bottom2top:function(){var x=this,p=x.getBoundingBox();x.eachNode(function(_){_.y=_.y-(_.y-p.top)*2-_.height}),x.translate(0,p.height)}});function A(y,x,p){x===void 0&&(x={}),x=nt.assign({},F,x);var _=new M(y,x),E=[_],b;if(!p&&!y.collapsed){for(;b=E.shift();)if(!b.data.collapsed){var k=x.getChildren(b.data),N=k?k.length:0;if(b.children=new Array(N),k&&N)for(var g=0;g<N;g++){var v=new M(k[g],x);b.children[g]=v,E.push(v),v.parent=b,v.depth=b.depth+1}}}return _}R.exports=A},function(R,et,ft){var nt=ft(3);R.exports=function(V,z){for(var H=nt(V.data,z,!0),F=nt(V.data,z,!0),M=V.children.length,A=Math.round(M/2),y=z.getSide||function(E,b){return b<A?"right":"left"},x=0;x<M;x++){var p=V.children[x],_=y(p,x);_==="right"?F.children.push(p):H.children.push(p)}return H.eachNode(function(E){E.isRoot()||(E.side="left")}),F.eachNode(function(E){E.isRoot()||(E.side="right")}),{left:H,right:F}}},function(R,et,ft){var nt={compactBox:ft(6),dendrogram:ft(8),indented:ft(10),mindmap:ft(12)};R.exports=nt},function(R,et,ft){function nt(p,_){p.prototype=Object.create(_.prototype),p.prototype.constructor=p,V(p,_)}function V(p,_){return V=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(b,k){return b.__proto__=k,b},V(p,_)}var z=ft(1),H=ft(7),F=ft(2),M=ft(0),A=function(p){function _(){return p.apply(this,arguments)||this}nt(_,p);var E=_.prototype;return E.execute=function(){var k=this;return F(k.rootNode,k.options,H)},_}(z),y={};function x(p,_){return _=M.assign({},y,_),new A(p,_).execute()}R.exports=x},function(R,et){function ft(M,A,y,x){x===void 0&&(x=[]);var p=this;p.w=M||0,p.h=A||0,p.y=y||0,p.x=0,p.c=x||[],p.cs=x.length,p.prelim=0,p.mod=0,p.shift=0,p.change=0,p.tl=null,p.tr=null,p.el=null,p.er=null,p.msel=0,p.mser=0}ft.fromNode=function(M,A){if(!M)return null;var y=[];return M.children.forEach(function(x){y.push(ft.fromNode(x,A))}),A?new ft(M.height,M.width,M.x,y):new ft(M.width,M.height,M.y,y)};function nt(M,A,y){y?M.y+=A:M.x+=A,M.children.forEach(function(x){nt(x,A,y)})}function V(M,A){var y=A?M.y:M.x;return M.children.forEach(function(x){y=Math.min(V(x,A),y)}),y}function z(M,A){var y=V(M,A);nt(M,-y,A)}function H(M,A,y){y?A.y=M.x:A.x=M.x,M.c.forEach(function(x,p){H(x,A.children[p],y)})}function F(M,A,y){y===void 0&&(y=0),A?(M.x=y,y+=M.width):(M.y=y,y+=M.height),M.children.forEach(function(x){F(x,A,y)})}R.exports=function(M,A){A===void 0&&(A={});var y=A.isHorizontal;function x(Z){if(Z.cs===0){p(Z);return}x(Z.c[0]);for(var rt=j(N(Z.c[0].el),0,null),ut=1;ut<Z.cs;++ut){x(Z.c[ut]);var ht=N(Z.c[ut].er);_(Z,ut,rt),rt=j(ht,ut,rt)}K(Z),p(Z)}function p(Z){Z.cs===0?(Z.el=Z,Z.er=Z,Z.msel=Z.mser=0):(Z.el=Z.c[0].el,Z.msel=Z.c[0].msel,Z.er=Z.c[Z.cs-1].er,Z.mser=Z.c[Z.cs-1].mser)}function _(Z,rt,ut){for(var ht=Z.c[rt-1],kt=ht.mod,At=Z.c[rt],Ht=At.mod;ht!==null&&At!==null;){N(ht)>ut.low&&(ut=ut.nxt);var Rt=kt+ht.prelim+ht.w-(Ht+At.prelim);Rt>0&&(Ht+=Rt,E(Z,rt,ut.index,Rt));var le=N(ht),dt=N(At);le<=dt&&(ht=k(ht),ht!==null&&(kt+=ht.mod)),le>=dt&&(At=b(At),At!==null&&(Ht+=At.mod))}!ht&&At?g(Z,rt,At,Ht):ht&&!At&&v(Z,rt,ht,kt)}function E(Z,rt,ut,ht){Z.c[rt].mod+=ht,Z.c[rt].msel+=ht,Z.c[rt].mser+=ht,G(Z,rt,ut,ht)}function b(Z){return Z.cs===0?Z.tl:Z.c[0]}function k(Z){return Z.cs===0?Z.tr:Z.c[Z.cs-1]}function N(Z){return Z.y+Z.h}function g(Z,rt,ut,ht){var kt=Z.c[0].el;kt.tl=ut;var At=ht-ut.mod-Z.c[0].msel;kt.mod+=At,kt.prelim-=At,Z.c[0].el=Z.c[rt].el,Z.c[0].msel=Z.c[rt].msel}function v(Z,rt,ut,ht){var kt=Z.c[rt].er;kt.tr=ut;var At=ht-ut.mod-Z.c[rt].mser;kt.mod+=At,kt.prelim-=At,Z.c[rt].er=Z.c[rt-1].er,Z.c[rt].mser=Z.c[rt-1].mser}function K(Z){Z.prelim=(Z.c[0].prelim+Z.c[0].mod+Z.c[Z.cs-1].mod+Z.c[Z.cs-1].prelim+Z.c[Z.cs-1].w)/2-Z.w/2}function B(Z,rt){rt+=Z.mod,Z.x=Z.prelim+rt,Y(Z);for(var ut=0;ut<Z.cs;ut++)B(Z.c[ut],rt)}function G(Z,rt,ut,ht){if(ut!==rt-1){var kt=rt-ut;Z.c[ut+1].shift+=ht/kt,Z.c[rt].shift-=ht/kt,Z.c[rt].change-=ht-ht/kt}}function Y(Z){for(var rt=0,ut=0,ht=0;ht<Z.cs;ht++)rt+=Z.c[ht].shift,ut+=rt+Z.c[ht].change,Z.c[ht].mod+=ut}function j(Z,rt,ut){for(;ut!==null&&Z>=ut.low;)ut=ut.nxt;return{low:Z,index:rt,nxt:ut}}F(M,y);var Q=ft.fromNode(M,y);return x(Q),B(Q,0),H(Q,M,y),z(M,y),M}},function(R,et,ft){function nt(p,_){p.prototype=Object.create(_.prototype),p.prototype.constructor=p,V(p,_)}function V(p,_){return V=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(b,k){return b.__proto__=k,b},V(p,_)}var z=ft(1),H=ft(9),F=ft(2),M=ft(0),A=function(p){function _(){return p.apply(this,arguments)||this}nt(_,p);var E=_.prototype;return E.execute=function(){var k=this;return k.rootNode.width=0,F(k.rootNode,k.options,H)},_}(z),y={};function x(p,_){return _=M.assign({},y,_),new A(p,_).execute()}R.exports=x},function(R,et,ft){var nt=ft(0);function V(F,M){F===void 0&&(F=0),M===void 0&&(M=[]);var A=this;A.x=A.y=0,A.leftChild=A.rightChild=null,A.height=0,A.children=M}var z={isHorizontal:!0,nodeSep:20,nodeSize:20,rankSep:200,subTreeSep:10};function H(F,M,A){A?(M.x=F.x,M.y=F.y):(M.x=F.y,M.y=F.x),F.children.forEach(function(y,x){H(y,M.children[x],A)})}R.exports=function(F,M){M===void 0&&(M={}),M=nt.assign({},z,M);var A=0;function y(b){if(!b)return null;b.width=0,b.depth&&b.depth>A&&(A=b.depth);var k=b.children,N=k.length,g=new V(b.height,[]);return k.forEach(function(v,K){var B=y(v);g.children.push(B),K===0&&(g.leftChild=B),K===N-1&&(g.rightChild=B)}),g.originNode=b,g.isLeaf=b.isLeaf(),g}function x(b){if(b.isLeaf||b.children.length===0)b.drawingDepth=A;else{var k=b.children.map(function(g){return x(g)}),N=Math.min.apply(null,k);b.drawingDepth=N-1}return b.drawingDepth}var p;function _(b){b.x=b.drawingDepth*M.rankSep,b.isLeaf?(b.y=0,p&&(b.y=p.y+p.height+M.nodeSep,b.originNode.parent!==p.originNode.parent&&(b.y+=M.subTreeSep)),p=b):(b.children.forEach(function(k){_(k)}),b.y=(b.leftChild.y+b.rightChild.y)/2)}var E=y(F);return x(E),_(E),H(E,F,M.isHorizontal),F}},function(R,et,ft){function nt(E,b){E.prototype=Object.create(b.prototype),E.prototype.constructor=E,V(E,b)}function V(E,b){return V=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(N,g){return N.__proto__=g,N},V(E,b)}var z=ft(1),H=ft(11),F=ft(4),M=ft(0),A=["LR","RL","H"],y=A[0],x=function(E){function b(){return E.apply(this,arguments)||this}nt(b,E);var k=b.prototype;return k.execute=function(){var g=this,v=g.options,K=g.rootNode;v.isHorizontal=!0;var B=v.indent,G=B===void 0?20:B,Y=v.dropCap,j=Y===void 0?!0:Y,Q=v.direction,Z=Q===void 0?y:Q,rt=v.align;if(Z&&A.indexOf(Z)===-1)throw new TypeError("Invalid direction: "+Z);if(Z===A[0])H(K,G,j,rt);else if(Z===A[1])H(K,G,j,rt),K.right2left();else if(Z===A[2]){var ut=F(K,v),ht=ut.left,kt=ut.right;H(ht,G,j,rt),ht.right2left(),H(kt,G,j,rt);var At=ht.getBoundingBox();kt.translate(At.width,0),K.x=kt.x-K.width/2}return K},b}(z),p={};function _(E,b){return b=M.assign({},p,b),new x(E,b).execute()}R.exports=_},function(R,et,ft){var nt=ft(0);function V(z,H,F,M,A){var y=typeof F=="function"?F(z):F*z.depth;if(!M)try{if(z.id===z.parent.children[0].id){z.x+=y,z.y=H?H.y:0;return}}catch(_){}if(z.x+=y,H){if(z.y=H.y+nt.getHeight(H,z,A),H.parent&&z.parent.id!==H.parent.id){var x=H.parent,p=x.y+nt.getHeight(x,z,A);z.y=p>z.y?p:z.y}}else z.y=0}R.exports=function(z,H,F,M){var A=null;z.eachNode(function(y){V(y,A,H,F,M),A=y})}},function(R,et,ft){function nt(p,_){p.prototype=Object.create(_.prototype),p.prototype.constructor=p,V(p,_)}function V(p,_){return V=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(b,k){return b.__proto__=k,b},V(p,_)}var z=ft(1),H=ft(13),F=ft(2),M=ft(0),A=function(p){function _(){return p.apply(this,arguments)||this}nt(_,p);var E=_.prototype;return E.execute=function(){var k=this;return F(k.rootNode,k.options,H)},_}(z),y={};function x(p,_){return _=M.assign({},y,_),new A(p,_).execute()}R.exports=x},function(R,et,ft){var nt=ft(0);function V(F,M){var A=0;return F.children.length?F.children.forEach(function(y){A+=V(y,M)}):A=F.height,F._subTreeSep=M.getSubTreeSep(F.data),F.totalHeight=Math.max(F.height,A)+2*F._subTreeSep,F.totalHeight}function z(F){var M=F.children,A=M.length;if(A){M.forEach(function(b){z(b)});var y=M[0],x=M[A-1],p=x.y-y.y+x.height,_=0;if(M.forEach(function(b){_+=b.totalHeight}),p>F.height)F.y=y.y+p/2-F.height/2;else if(M.length!==1||F.height>_){var E=F.y+(F.height-p)/2-y.y;M.forEach(function(b){b.translate(0,E)})}else F.y=(y.y+y.height/2+x.y+x.height/2)/2-F.height/2}}var H={getSubTreeSep:function(){return 0}};R.exports=function(F,M){M===void 0&&(M={}),M=nt.assign({},H,M),F.parent={x:0,width:0,height:0,y:0},F.BFTraverse(function(A){A.x=A.parent.x+A.parent.width}),F.parent=null,V(F,M),F.startY=0,F.y=F.totalHeight/2-F.height/2,F.eachNode(function(A){var y=A.children,x=y.length;if(x){var p=y[0];if(p.startY=A.startY+A._subTreeSep,x===1)p.y=A.y+A.height/2-p.height/2;else{p.y=p.startY+p.totalHeight/2-p.height/2;for(var _=1;_<x;_++){var E=y[_];E.startY=y[_-1].startY+y[_-1].totalHeight,E.y=E.startY+E.totalHeight/2-E.height/2}}}}),z(F)}}])})},83360:function(Se,R,et){"use strict";var ft=this&&this.__createBinding||(Object.create?function(z,H,F,M){M===void 0&&(M=F);var A=Object.getOwnPropertyDescriptor(H,F);(!A||("get"in A?!H.__esModule:A.writable||A.configurable))&&(A={enumerable:!0,get:function(){return H[F]}}),Object.defineProperty(z,M,A)}:function(z,H,F,M){M===void 0&&(M=F),z[M]=H[F]}),nt=this&&this.__exportStar||function(z,H){for(var F in z)F!=="default"&&!Object.prototype.hasOwnProperty.call(H,F)&&ft(H,z,F)};Object.defineProperty(R,"__esModule",{value:!0}),R.getLayoutByName=R.unRegisterLayout=R.registerLayout=void 0;var V=et(95326);Object.defineProperty(R,"registerLayout",{enumerable:!0,get:function(){return V.registerLayout}}),Object.defineProperty(R,"unRegisterLayout",{enumerable:!0,get:function(){return V.unRegisterLayout}}),Object.defineProperty(R,"getLayoutByName",{enumerable:!0,get:function(){return V.getLayoutByName}}),nt(et(2584),R)},62329:function(Se,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.Base=void 0;var et=function(){function ft(){this.nodes=[],this.edges=[],this.combos=[],this.comboEdges=[],this.hiddenNodes=[],this.hiddenEdges=[],this.hiddenCombos=[],this.vedges=[],this.positions=[],this.destroyed=!1,this.onLayoutEnd=function(){}}return ft.prototype.layout=function(nt){return this.init(nt),this.execute(!0)},ft.prototype.init=function(nt){this.nodes=nt.nodes||[],this.edges=nt.edges||[],this.combos=nt.combos||[],this.comboEdges=nt.comboEdges||[],this.hiddenNodes=nt.hiddenNodes||[],this.hiddenEdges=nt.hiddenEdges||[],this.hiddenCombos=nt.hiddenCombos||[],this.vedges=nt.vedges||[]},ft.prototype.execute=function(nt){},ft.prototype.executeWithWorker=function(){},ft.prototype.getDefaultCfg=function(){return{}},ft.prototype.updateCfg=function(nt){nt&&Object.assign(this,nt)},ft.prototype.getType=function(){return"base"},ft.prototype.destroy=function(){this.nodes=null,this.edges=null,this.combos=null,this.positions=null,this.destroyed=!0},ft}();R.Base=et},64885:function(Se,R,et){"use strict";var ft=this&&this.__extends||function(){var A=function(y,x){return A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,_){p.__proto__=_}||function(p,_){for(var E in _)Object.prototype.hasOwnProperty.call(_,E)&&(p[E]=_[E])},A(y,x)};return function(y,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");A(y,x);function p(){this.constructor=y}y.prototype=x===null?Object.create(x):(p.prototype=x.prototype,new p)}}();Object.defineProperty(R,"__esModule",{value:!0}),R.CircularLayout=void 0;var nt=et(62329),V=et(49784);function z(A,y,x,p){A.forEach(function(_,E){A[E].children=[],A[E].parent=[]}),p?y.forEach(function(_){var E=(0,V.getEdgeTerminal)(_,"source"),b=(0,V.getEdgeTerminal)(_,"target"),k=0;E&&(k=x[E]);var N=0;b&&(N=x[b]);var g=A[k].children,v=A[N].parent;g.push(A[N].id),v.push(A[k].id)}):y.forEach(function(_){var E=(0,V.getEdgeTerminal)(_,"source"),b=(0,V.getEdgeTerminal)(_,"target"),k=0;E&&(k=x[E]);var N=0;b&&(N=x[b]);var g=A[k].children,v=A[N].children;g.push(A[N].id),v.push(A[k].id)})}function H(A,y,x){for(var p=x.length,_=0;_<p;_++){var E=(0,V.getEdgeTerminal)(x[_],"source"),b=(0,V.getEdgeTerminal)(x[_],"target");if(A.id===E&&y.id===b||y.id===E&&A.id===b)return!0}return!1}function F(A,y){var x=A.degree,p=y.degree;return x<p?-1:x>p?1:0}var M=function(A){ft(y,A);function y(x){var p=A.call(this)||this;return p.radius=null,p.nodeSize=void 0,p.startRadius=null,p.endRadius=null,p.startAngle=0,p.endAngle=2*Math.PI,p.clockwise=!0,p.divisions=1,p.ordering=null,p.angleRatio=1,p.nodes=[],p.edges=[],p.nodeMap={},p.degrees=[],p.width=300,p.height=300,p.updateCfg(x),p}return y.prototype.getDefaultCfg=function(){return{radius:null,startRadius:null,endRadius:null,startAngle:0,endAngle:2*Math.PI,clockwise:!0,divisions:1,ordering:null,angleRatio:1}},y.prototype.execute=function(){var x,p=this,_=p.nodes,E=p.edges,b=_.length;if(b===0){p.onLayoutEnd&&p.onLayoutEnd();return}!p.width&&typeof window!="undefined"&&(p.width=window.innerWidth),!p.height&&typeof window!="undefined"&&(p.height=window.innerHeight),p.center||(p.center=[p.width/2,p.height/2]);var k=p.center;if(b===1){_[0].x=k[0],_[0].y=k[1],p.onLayoutEnd&&p.onLayoutEnd();return}var N=p.radius,g=p.startRadius,v=p.endRadius,K=p.divisions,B=p.startAngle,G=p.endAngle,Y=p.angleRatio,j=p.ordering,Q=p.clockwise,Z=p.nodeSpacing,rt=p.nodeSize,ut=(G-B)/b,ht={};_.forEach(function(Jt,De){ht[Jt.id]=De}),p.nodeMap=ht;var kt=(0,V.getDegree)(_.length,ht,E);if(p.degrees=kt,Z){var At=(0,V.getFuncByUnknownType)(10,Z),Ht=(0,V.getFuncByUnknownType)(10,rt),Rt=-1/0;_.forEach(function(Jt){var De=Ht(Jt);Rt<De&&(Rt=De)});var le=0;_.forEach(function(Jt,De){De===0?le+=Rt||10:le+=(At(Jt)||0)+(Rt||10)}),N=le/(2*Math.PI)}else!N&&!g&&!v?N=p.height>p.width?p.width/2:p.height/2:!g&&v?g=v:g&&!v&&(v=g);var dt=ut*Y,ot=[];j==="topology"?ot=p.topologyOrdering():j==="topology-directed"?ot=p.topologyOrdering(!0):j==="degree"?ot=p.degreeOrdering():ot=_;for(var yt=Math.ceil(b/K),Lt=0;Lt<b;++Lt){var Ot=N;!Ot&&g!==null&&v!==null&&(Ot=g+Lt*(v-g)/(b-1)),Ot||(Ot=10+Lt*100/(b-1));var Wt=B+Lt%yt*dt+2*Math.PI/K*Math.floor(Lt/yt);Q||(Wt=G-Lt%yt*dt-2*Math.PI/K*Math.floor(Lt/yt)),ot[Lt].x=k[0]+Math.cos(Wt)*Ot,ot[Lt].y=k[1]+Math.sin(Wt)*Ot,ot[Lt].weight=kt[Lt].all}return(x=p.onLayoutEnd)===null||x===void 0||x.call(p),{nodes:ot,edges:this.edges}},y.prototype.topologyOrdering=function(x){x===void 0&&(x=!1);var p=this,_=p.degrees,E=p.edges,b=p.nodes,k=(0,V.clone)(b),N=p.nodeMap,g=[k[0]],v=[b[0]],K=[],B=b.length;K[0]=!0,z(k,E,N,x);var G=0;return k.forEach(function(Y,j){if(j!==0)if((j===B-1||_[j].all!==_[j+1].all||H(g[G],Y,E))&&!K[j])g.push(Y),v.push(b[N[Y.id]]),K[j]=!0,G++;else{for(var Q=g[G].children,Z=!1,rt=0;rt<Q.length;rt++){var ut=N[Q[rt]];if(_[ut].all===_[j].all&&!K[ut]){g.push(k[ut]),v.push(b[N[k[ut].id]]),K[ut]=!0,Z=!0;break}}for(var ht=0;!Z&&(K[ht]||(g.push(k[ht]),v.push(b[N[k[ht].id]]),K[ht]=!0,Z=!0),ht++,ht!==B););}}),v},y.prototype.degreeOrdering=function(){var x=this,p=x.nodes,_=[],E=x.degrees;return p.forEach(function(b,k){b.degree=E[k].all,_.push(b)}),_.sort(F),_},y.prototype.getType=function(){return"circular"},y}(nt.Base);R.CircularLayout=M},63861:function(Se,R,et){"use strict";var ft=this&&this.__extends||function(){var A=function(y,x){return A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,_){p.__proto__=_}||function(p,_){for(var E in _)Object.prototype.hasOwnProperty.call(_,E)&&(p[E]=_[E])},A(y,x)};return function(y,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");A(y,x);function p(){this.constructor=y}y.prototype=x===null?Object.create(x):(p.prototype=x.prototype,new p)}}(),nt=this&&this.__assign||function(){return nt=Object.assign||function(A){for(var y,x=1,p=arguments.length;x<p;x++){y=arguments[x];for(var _ in y)Object.prototype.hasOwnProperty.call(y,_)&&(A[_]=y[_])}return A},nt.apply(this,arguments)};Object.defineProperty(R,"__esModule",{value:!0}),R.ComboCombinedLayout=void 0;var V=et(16470),z=et(62329),H=et(49784),F=et(2584),M=function(A){ft(y,A);function y(x){var p=A.call(this)||this;return p.center=[0,0],p.nodes=[],p.edges=[],p.combos=[],p.comboEdges=[],p.comboPadding=10,p.comboTrees=[],p.updateCfg(x),p}return y.prototype.getDefaultCfg=function(){return{}},y.prototype.execute=function(){var x=this,p=x.nodes,_=x.center;if(!p||p.length===0){x.onLayoutEnd&&x.onLayoutEnd();return}if(p.length===1){p[0].x=_[0],p[0].y=_[1],x.onLayoutEnd&&x.onLayoutEnd();return}x.initVals(),x.run(),x.onLayoutEnd&&x.onLayoutEnd()},y.prototype.run=function(){var x,p=this,_=p.nodes,E=p.edges,b=p.combos,k=p.comboEdges,N=p.center,g={};_.forEach(function(Rt){g[Rt.id]=Rt});var v={};b.forEach(function(Rt){v[Rt.id]=Rt});var K=p.getInnerGraphs(g),B=[],G=[],Y={},j=!0;this.comboTrees.forEach(function(Rt){var le=K[Rt.id];if(le){var dt=nt(nt({},Rt),{x:le.x||v[Rt.id].x,y:le.y||v[Rt.id].y,fx:le.fx||v[Rt.id].fx,fy:le.fy||v[Rt.id].fy,mass:le.mass||v[Rt.id].mass,size:le.size});G.push(dt),!isNaN(dt.x)&&dt.x!==0&&!isNaN(dt.y)&&dt.y!==0?j=!1:(dt.x=Math.random()*100,dt.y=Math.random()*100),B.push(Rt.id),(0,H.traverseTreeUp)(Rt,function(ot){return ot.id!==Rt.id&&(Y[ot.id]=Rt.id),!0})}}),_.forEach(function(Rt){if(!(Rt.comboId&&v[Rt.comboId])){var le=nt({},Rt);G.push(le),!isNaN(le.x)&&le.x!==0&&!isNaN(le.y)&&le.y!==0?j=!1:(le.x=Math.random()*100,le.y=Math.random()*100),B.push(Rt.id)}});var Q=[];if(E.concat(k).forEach(function(Rt){var le=Y[Rt.source]||Rt.source,dt=Y[Rt.target]||Rt.target;le!==dt&&B.includes(le)&&B.includes(dt)&&Q.push({source:le,target:dt})}),G!=null&&G.length){if(G.length===1)G[0].x=N[0],G[0].y=N[1];else{var Z={nodes:G,edges:Q},rt=this.outerLayout||new F.GForceLayout({gravity:1,factor:4,linkDistance:function(Rt,le,dt){var ot,yt,Lt=((((ot=le.size)===null||ot===void 0?void 0:ot[0])||30)+(((yt=dt.size)===null||yt===void 0?void 0:yt[0])||30))/2;return Math.min(Lt*1.5,700)}}),ut=(x=rt.getType)===null||x===void 0?void 0:x.call(rt);if(rt.updateCfg({center:N,kg:5,preventOverlap:!0,animate:!1}),j&&V.FORCE_LAYOUT_TYPE_MAP[ut]){var ht=G.length<100?new F.MDSLayout:new F.GridLayout;ht.layout(Z)}rt.layout(Z)}G.forEach(function(Rt){var le=K[Rt.id];if(!le){var dt=g[Rt.id];dt&&(dt.x=Rt.x,dt.y=Rt.y);return}le.visited=!0,le.x=Rt.x,le.y=Rt.y,le.nodes.forEach(function(ot){ot.x+=Rt.x,ot.y+=Rt.y})})}for(var kt=Object.keys(K),At=function(Rt){var le=kt[Rt],dt=K[le];if(!dt)return"continue";dt.nodes.forEach(function(ot){dt.visited||(ot.x+=dt.x||0,ot.y+=dt.y||0),g[ot.id]&&(g[ot.id].x=ot.x,g[ot.id].y=ot.y)}),v[le]&&(v[le].x=dt.x,v[le].y=dt.y)},Ht=kt.length-1;Ht>=0;Ht--)At(Ht);return{nodes:_,edges:E,combos:b,comboEdges:k}},y.prototype.getInnerGraphs=function(x){var p=this,_=p.comboTrees,E=p.nodeSize,b=p.edges,k=p.comboPadding,N=p.spacing,g={},v=this.innerLayout||new F.ConcentricLayout({type:"concentric",sortBy:"id"});return v.center=[0,0],v.preventOverlap=!0,v.nodeSpacing=N,(_||[]).forEach(function(K){(0,H.traverseTreeUp)(K,function(B){var G,Y=(k==null?void 0:k(B))||10;if((0,H.isArray)(Y)&&(Y=Math.max.apply(Math,Y)),!((G=B.children)===null||G===void 0)&&G.length){var Q=B.children.map(function(yt){if(yt.itemType==="combo")return g[yt.id];var Lt=x[yt.id]||{};return nt(nt({},Lt),yt)}),Z=Q.map(function(yt){return yt.id}),rt={nodes:Q,edges:b.filter(function(yt){return Z.includes(yt.source)&&Z.includes(yt.target)})},ut=1/0;Q.forEach(function(yt){var Lt;yt.size||(yt.size=((Lt=g[yt.id])===null||Lt===void 0?void 0:Lt.size)||(E==null?void 0:E(yt))||[30,30]),(0,H.isNumber)(yt.size)&&(yt.size=[yt.size,yt.size]),ut>yt.size[0]&&(ut=yt.size[0]),ut>yt.size[1]&&(ut=yt.size[1])}),v.layout(rt);var ht=(0,H.getLayoutBBox)(Q),kt=ht.minX,At=ht.minY,Ht=ht.maxX,Rt=ht.maxY,le={x:(Ht+kt)/2,y:(Rt+At)/2};rt.nodes.forEach(function(yt){yt.x-=le.x,yt.y-=le.y});var dt=Math.max(Ht-kt,ut)+Y*2,ot=Math.max(Rt-At,ut)+Y*2;g[B.id]={id:B.id,nodes:Q,size:[dt,ot]}}else if(B.itemType==="combo"){var j=Y?[Y*2,Y*2]:[30,30];g[B.id]={id:B.id,nodes:[],size:j}}return!0})}),g},y.prototype.initVals=function(){var x=this,p=x.nodeSize,_=x.spacing,E,b;if((0,H.isNumber)(_)?b=function(){return _}:(0,H.isFunction)(_)?b=_:b=function(){return 0},this.spacing=b,!p)E=function(B){var G=b(B);if(B.size){if((0,H.isArray)(B.size)){var Y=B.size[0]>B.size[1]?B.size[0]:B.size[1];return(Y+G)/2}if((0,H.isObject)(B.size)){var Y=B.size.width>B.size.height?B.size.width:B.size.height;return(Y+G)/2}return(B.size+G)/2}return 10+G/2};else if((0,H.isFunction)(p))E=function(B){var G=p(B),Y=b(B);if((0,H.isArray)(B.size)){var j=B.size[0]>B.size[1]?B.size[0]:B.size[1];return(j+Y)/2}return((G||10)+Y)/2};else if((0,H.isArray)(p)){var k=p[0]>p[1]?p[0]:p[1],N=k/2;E=function(B){return N+b(B)/2}}else{var g=p/2;E=function(B){return g+b(B)/2}}this.nodeSize=E;var v=x.comboPadding,K;(0,H.isNumber)(v)?K=function(){return v}:(0,H.isArray)(v)?K=function(){return Math.max.apply(null,v)}:(0,H.isFunction)(v)?K=v:K=function(){return 0},this.comboPadding=K},y.prototype.getType=function(){return"comboCombined"},y}(z.Base);R.ComboCombinedLayout=M},66590:function(Se,R,et){"use strict";var ft=this&&this.__extends||function(){var H=function(F,M){return H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,y){A.__proto__=y}||function(A,y){for(var x in y)Object.prototype.hasOwnProperty.call(y,x)&&(A[x]=y[x])},H(F,M)};return function(F,M){if(typeof M!="function"&&M!==null)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");H(F,M);function A(){this.constructor=F}F.prototype=M===null?Object.create(M):(A.prototype=M.prototype,new A)}}();Object.defineProperty(R,"__esModule",{value:!0}),R.ComboForceLayout=void 0;var nt=et(62329),V=et(49784),z=function(H){ft(F,H);function F(M){var A=H.call(this)||this;return A.center=[0,0],A.maxIteration=100,A.gravity=10,A.comboGravity=10,A.linkDistance=10,A.alpha=1,A.alphaMin=.001,A.alphaDecay=1-Math.pow(A.alphaMin,1/300),A.alphaTarget=0,A.velocityDecay=.6,A.edgeStrength=.6,A.nodeStrength=30,A.preventOverlap=!1,A.preventNodeOverlap=!1,A.preventComboOverlap=!1,A.collideStrength=void 0,A.nodeCollideStrength=.5,A.comboCollideStrength=.5,A.comboSpacing=20,A.comboPadding=10,A.optimizeRangeFactor=1,A.onTick=function(){},A.onLayoutEnd=function(){},A.depthAttractiveForceScale=1,A.depthRepulsiveForceScale=2,A.nodes=[],A.edges=[],A.combos=[],A.comboTrees=[],A.width=300,A.height=300,A.bias=[],A.nodeMap={},A.oriComboMap={},A.indexMap={},A.comboMap={},A.previousLayouted=!1,A.updateCfg(M),A}return F.prototype.getDefaultCfg=function(){return{maxIteration:100,center:[0,0],gravity:10,speed:1,comboGravity:30,preventOverlap:!1,preventComboOverlap:!0,preventNodeOverlap:!0,nodeSpacing:void 0,collideStrength:void 0,nodeCollideStrength:.5,comboCollideStrength:.5,comboSpacing:20,comboPadding:10,edgeStrength:.6,nodeStrength:30,linkDistance:10}},F.prototype.execute=function(){var M=this,A=M.nodes,y=M.center;if(M.comboTree={id:"comboTreeRoot",depth:-1,children:M.comboTrees},!A||A.length===0){M.onLayoutEnd&&M.onLayoutEnd();return}if(A.length===1){A[0].x=y[0],A[0].y=y[1],M.onLayoutEnd&&M.onLayoutEnd();return}M.initVals(),M.run(),M.onLayoutEnd&&M.onLayoutEnd()},F.prototype.run=function(){var M=this,A=M.nodes,y=M.previousLayouted?M.maxIteration/5:M.maxIteration;!M.width&&typeof window!="undefined"&&(M.width=window.innerWidth),!M.height&&typeof window!="undefined"&&(M.height=window.innerHeight);var x=M.center,p=M.velocityDecay,_=M.comboMap;M.previousLayouted||M.initPos(_);for(var E=function(g){var v=[];A.forEach(function(K,B){v[B]={x:0,y:0}}),M.applyCalculate(v),M.applyComboCenterForce(v),A.forEach(function(K,B){!(0,V.isNumber)(K.x)||!(0,V.isNumber)(K.y)||(K.x+=v[B].x*p,K.y+=v[B].y*p)}),M.alpha+=(M.alphaTarget-M.alpha)*M.alphaDecay,M.onTick()},b=0;b<y;b++)E(b);var k=[0,0];A.forEach(function(g){!(0,V.isNumber)(g.x)||!(0,V.isNumber)(g.y)||(k[0]+=g.x,k[1]+=g.y)}),k[0]/=A.length,k[1]/=A.length;var N=[x[0]-k[0],x[1]-k[1]];A.forEach(function(g,v){!(0,V.isNumber)(g.x)||!(0,V.isNumber)(g.y)||(g.x+=N[0],g.y+=N[1])}),M.combos.forEach(function(g){var v=_[g.id];v&&v.empty&&(g.x=v.cx||g.x,g.y=v.cy||g.y)}),M.previousLayouted=!0},F.prototype.initVals=function(){var M=this,A=M.edges,y=M.nodes,x=M.combos,p={},_={},E={};y.forEach(function(Ot,Wt){_[Ot.id]=Ot,E[Ot.id]=Wt}),M.nodeMap=_,M.indexMap=E;var b={};x.forEach(function(Ot){b[Ot.id]=Ot}),M.oriComboMap=b,M.comboMap=M.getComboMap();var k=M.preventOverlap;M.preventComboOverlap=M.preventComboOverlap||k,M.preventNodeOverlap=M.preventNodeOverlap||k;var N=M.collideStrength;N&&(M.comboCollideStrength=N,M.nodeCollideStrength=N),M.comboCollideStrength=M.comboCollideStrength?M.comboCollideStrength:0,M.nodeCollideStrength=M.nodeCollideStrength?M.nodeCollideStrength:0;for(var g=0;g<A.length;++g){var v=(0,V.getEdgeTerminal)(A[g],"source"),K=(0,V.getEdgeTerminal)(A[g],"target");p[v]?p[v]++:p[v]=1,p[K]?p[K]++:p[K]=1}for(var B=[],g=0;g<A.length;++g){var v=(0,V.getEdgeTerminal)(A[g],"source"),K=(0,V.getEdgeTerminal)(A[g],"target");B[g]=p[v]/(p[v]+p[K])}this.bias=B;var G=M.nodeSize,Y=M.nodeSpacing,j,Q;if((0,V.isNumber)(Y)?Q=function(){return Y}:(0,V.isFunction)(Y)?Q=Y:Q=function(){return 0},this.nodeSpacing=Q,!G)j=function(Ot){if(Ot.size){if((0,V.isArray)(Ot.size)){var Wt=Ot.size[0]>Ot.size[1]?Ot.size[0]:Ot.size[1];return Wt/2}if((0,V.isObject)(Ot.size)){var Wt=Ot.size.width>Ot.size.height?Ot.size.width:Ot.size.height;return Wt/2}return Ot.size/2}return 10};else if((0,V.isFunction)(G))j=function(Ot){return G(Ot)};else if((0,V.isArray)(G)){var Z=G[0]>G[1]?G[0]:G[1],rt=Z/2;j=function(Ot){return rt}}else{var ut=G/2;j=function(Ot){return ut}}this.nodeSize=j;var ht=M.comboSpacing,kt;(0,V.isNumber)(ht)?kt=function(){return ht}:(0,V.isFunction)(ht)?kt=ht:kt=function(){return 0},this.comboSpacing=kt;var At=M.comboPadding,Ht;(0,V.isNumber)(At)?Ht=function(){return At}:(0,V.isArray)(At)?Ht=function(){return Math.max.apply(null,At)}:(0,V.isFunction)(At)?Ht=At:Ht=function(){return 0},this.comboPadding=Ht;var Rt=this.linkDistance,le;Rt||(Rt=10),(0,V.isNumber)(Rt)?le=function(Ot){return Rt}:le=Rt,this.linkDistance=le;var dt=this.edgeStrength,ot;dt||(dt=1),(0,V.isNumber)(dt)?ot=function(Ot){return dt}:ot=dt,this.edgeStrength=ot;var yt=this.nodeStrength,Lt;yt||(yt=30),(0,V.isNumber)(yt)?Lt=function(Ot){return yt}:Lt=yt,this.nodeStrength=Lt},F.prototype.initPos=function(M){var A=this,y=A.nodes;y.forEach(function(x,p){var _=x.comboId,E=M[_];_&&E?(x.x=E.cx+100/(p+1),x.y=E.cy+100/(p+1)):(x.x=100/(p+1),x.y=100/(p+1))})},F.prototype.getComboMap=function(){var M=this,A=M.nodeMap,y=M.comboTrees,x=M.oriComboMap,p={};return(y||[]).forEach(function(_){var E=[];(0,V.traverseTreeUp)(_,function(b){if(b.itemType==="node"||!x[b.id])return!0;if(p[b.id]===void 0){var k={id:b.id,name:b.id,cx:0,cy:0,count:0,depth:M.oriComboMap[b.id].depth||0,children:[]};p[b.id]=k}var N=b.children;N&&N.forEach(function(K){if(!p[K.id]&&!A[K.id])return!0;E.push(K)});var g=p[b.id];if(g.cx=0,g.cy=0,E.length===0){g.empty=!0;var v=x[b.id];g.cx=v.x,g.cy=v.y}return E.forEach(function(K){if(g.count++,K.itemType!=="node"){var B=p[K.id];(0,V.isNumber)(B.cx)&&(g.cx+=B.cx),(0,V.isNumber)(B.cy)&&(g.cy+=B.cy);return}var G=A[K.id];G&&((0,V.isNumber)(G.x)&&(g.cx+=G.x),(0,V.isNumber)(G.y)&&(g.cy+=G.y))}),g.cx/=g.count||1,g.cy/=g.count||1,g.children=E,!0})}),p},F.prototype.applyComboCenterForce=function(M){var A=this,y=A.gravity,x=A.comboGravity||y,p=this.alpha,_=A.comboTrees,E=A.indexMap,b=A.nodeMap,k=A.comboMap;(_||[]).forEach(function(N){(0,V.traverseTreeUp)(N,function(g){if(g.itemType==="node")return!0;var v=k[g.id];if(!v)return!0;var K=k[g.id],B=(K.depth+1)/10*.5,G=K.cx,Y=K.cy;return K.cx=0,K.cy=0,K.children.forEach(function(j){if(j.itemType!=="node"){var Q=k[j.id];Q&&(0,V.isNumber)(Q.cx)&&(K.cx+=Q.cx),Q&&(0,V.isNumber)(Q.cy)&&(K.cy+=Q.cy);return}var Z=b[j.id],rt=Z.x-G||.005,ut=Z.y-Y||.005,ht=Math.sqrt(rt*rt+ut*ut),kt=E[Z.id],At=x*p/ht*B;M[kt].x-=rt*At,M[kt].y-=ut*At,(0,V.isNumber)(Z.x)&&(K.cx+=Z.x),(0,V.isNumber)(Z.y)&&(K.cy+=Z.y)}),K.cx/=K.count||1,K.cy/=K.count||1,!0})})},F.prototype.applyCalculate=function(M){var A=this,y=A.comboMap,x=A.nodes,p={};x.forEach(function(E,b){x.forEach(function(k,N){if(!(b<N)){var g=E.x-k.x||.005,v=E.y-k.y||.005,K=g*g+v*v,B=Math.sqrt(K);K<1&&(K=B),p["".concat(E.id,"-").concat(k.id)]={vx:g,vy:v,vl2:K,vl:B},p["".concat(k.id,"-").concat(E.id)]={vl2:K,vl:B,vx:-g,vy:-v}}})}),A.updateComboSizes(y),A.calRepulsive(M,p),A.calAttractive(M,p);var _=A.preventComboOverlap;_&&A.comboNonOverlapping(M,y)},F.prototype.updateComboSizes=function(M){var A=this,y=A.comboTrees,x=A.nodeMap,p=A.nodeSize,_=A.comboSpacing,E=A.comboPadding;(y||[]).forEach(function(b){var k=[];(0,V.traverseTreeUp)(b,function(N){if(N.itemType==="node")return!0;var g=M[N.id];if(!g)return!1;var v=N.children;v&&v.forEach(function(G){!M[G.id]&&!x[G.id]||k.push(G)}),g.minX=1/0,g.minY=1/0,g.maxX=-1/0,g.maxY=-1/0,k.forEach(function(G){if(G.itemType!=="node")return!0;var Y=x[G.id];if(!Y)return!0;var j=p(Y),Q=Y.x-j,Z=Y.y-j,rt=Y.x+j,ut=Y.y+j;g.minX>Q&&(g.minX=Q),g.minY>Z&&(g.minY=Z),g.maxX<rt&&(g.maxX=rt),g.maxY<ut&&(g.maxY=ut)});var K=A.oriComboMap[N.id].size||10;(0,V.isArray)(K)&&(K=K[0]);var B=Math.max(g.maxX-g.minX,g.maxY-g.minY,K);return g.r=B/2+_(g)/2+E(g),!0})})},F.prototype.comboNonOverlapping=function(M,A){var y=this,x=y.comboTree,p=y.comboCollideStrength,_=y.indexMap,E=y.nodeMap;(0,V.traverseTreeUp)(x,function(b){if(!A[b.id]&&!E[b.id]&&b.id!=="comboTreeRoot")return!1;var k=b.children;return k&&k.length>1&&k.forEach(function(N,g){if(N.itemType==="node")return!1;var v=A[N.id];v&&k.forEach(function(K,B){if(g<=B||K.itemType==="node")return!1;var G=A[K.id];if(!G)return!1;var Y=v.cx-G.cx||.005,j=v.cy-G.cy||.005,Q=Y*Y+j*j,Z=v.r||1,rt=G.r||1,ut=Z+rt,ht=rt*rt,kt=Z*Z;if(Q<ut*ut){var At=N.children;if(!At||At.length===0)return!1;var Ht=K.children;if(!Ht||Ht.length===0)return!1;var Rt=Math.sqrt(Q),le=(ut-Rt)/Rt*p,dt=Y*le,ot=j*le,yt=ht/(kt+ht),Lt=1-yt;At.forEach(function(Ot){if(Ot.itemType!=="node")return!1;if(E[Ot.id]){var Wt=_[Ot.id];Ht.forEach(function(Jt){if(Jt.itemType!=="node"||!E[Jt.id])return!1;var De=_[Jt.id];M[Wt].x+=dt*yt,M[Wt].y+=ot*yt,M[De].x-=dt*Lt,M[De].y-=ot*Lt})}})}})}),!0})},F.prototype.calRepulsive=function(M,A){var y=this,x=y.nodes,p=y.width*y.optimizeRangeFactor,_=y.nodeStrength,E=y.alpha,b=y.nodeCollideStrength,k=y.preventNodeOverlap,N=y.nodeSize,g=y.nodeSpacing,v=y.depthRepulsiveForceScale,K=y.center;x.forEach(function(B,G){if(!(!B.x||!B.y)){if(K){var Y=y.gravity,j=B.x-K[0]||.005,Q=B.y-K[1]||.005,Z=Math.sqrt(j*j+Q*Q);M[G].x-=j*Y*E/Z,M[G].y-=Q*Y*E/Z}x.forEach(function(rt,ut){if(G!==ut&&!(!rt.x||!rt.y)){var ht=A["".concat(B.id,"-").concat(rt.id)],kt=ht.vl2,At=ht.vl;if(!(At>p)){var Ht=A["".concat(B.id,"-").concat(rt.id)],Rt=Ht.vx,le=Ht.vy,dt=Math.log(Math.abs(rt.depth-B.depth)/10)+1||1;dt=dt<1?1:dt,rt.comboId!==B.comboId&&(dt+=1);var ot=dt?Math.pow(v,dt):1,yt=_(rt)*E/kt*ot;if(M[G].x+=Rt*yt,M[G].y+=le*yt,G<ut&&k){var Lt=N(B)+g(B)||1,Ot=N(rt)+g(rt)||1,Wt=Lt+Ot;if(kt<Wt*Wt){var Jt=(Wt-At)/At*b,De=Ot*Ot,te=De/(Lt*Lt+De),oe=Rt*Jt,me=le*Jt;M[G].x+=oe*te,M[G].y+=me*te,te=1-te,M[ut].x-=oe*te,M[ut].y-=me*te}}}}})}})},F.prototype.calAttractive=function(M,A){var y=this,x=y.edges,p=y.linkDistance,_=y.alpha,E=y.edgeStrength,b=y.bias,k=y.depthAttractiveForceScale;x.forEach(function(N,g){var v=(0,V.getEdgeTerminal)(N,"source"),K=(0,V.getEdgeTerminal)(N,"target");if(!(!v||!K||v===K)){var B=y.indexMap[v],G=y.indexMap[K],Y=y.nodeMap[v],j=y.nodeMap[K];if(!(!Y||!j)){var Q=Y.depth===j.depth?0:Math.log(Math.abs(Y.depth-j.depth)/10);Y.comboId===j.comboId&&(Q=Q/2);var Z=Q?Math.pow(k,Q):1;if(Y.comboId!==j.comboId&&Z===1?Z=k/2:Y.comboId===j.comboId&&(Z=2),!(!(0,V.isNumber)(j.x)||!(0,V.isNumber)(Y.x)||!(0,V.isNumber)(j.y)||!(0,V.isNumber)(Y.y))){var rt=A["".concat(K,"-").concat(v)],ut=rt.vl,ht=rt.vx,kt=rt.vy,At=(ut-p(N))/ut*_*E(N)*Z,Ht=ht*At,Rt=kt*At,le=b[g];M[G].x-=Ht*le,M[G].y-=Rt*le,M[B].x+=Ht*(1-le),M[B].y+=Rt*(1-le)}}}})},F.prototype.getType=function(){return"comboForce"},F}(nt.Base);R.ComboForceLayout=z},43281:function(Se,R,et){"use strict";var ft=this&&this.__extends||function(){var H=function(F,M){return H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,y){A.__proto__=y}||function(A,y){for(var x in y)Object.prototype.hasOwnProperty.call(y,x)&&(A[x]=y[x])},H(F,M)};return function(F,M){if(typeof M!="function"&&M!==null)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");H(F,M);function A(){this.constructor=F}F.prototype=M===null?Object.create(M):(A.prototype=M.prototype,new A)}}();Object.defineProperty(R,"__esModule",{value:!0}),R.ConcentricLayout=void 0;var nt=et(49784),V=et(62329),z=function(H){ft(F,H);function F(M){var A=H.call(this)||this;return A.nodeSize=30,A.minNodeSpacing=10,A.nodeSpacing=10,A.preventOverlap=!1,A.equidistant=!1,A.startAngle=3/2*Math.PI,A.clockwise=!0,A.sortBy="degree",A.nodes=[],A.edges=[],A.width=300,A.height=300,A.onLayoutEnd=function(){},A.updateCfg(M),A}return F.prototype.getDefaultCfg=function(){return{nodeSize:30,minNodeSpacing:10,nodeSpacing:10,preventOverlap:!1,sweep:void 0,equidistant:!1,startAngle:3/2*Math.PI,clockwise:!0,maxLevelDiff:void 0,sortBy:"degree"}},F.prototype.execute=function(){var M,A,y=this,x=y.nodes,p=y.edges,_=x.length;if(_===0){(M=y.onLayoutEnd)===null||M===void 0||M.call(y);return}!y.width&&typeof window!="undefined"&&(y.width=window.innerWidth),!y.height&&typeof window!="undefined"&&(y.height=window.innerHeight),y.center||(y.center=[y.width/2,y.height/2]);var E=y.center;if(_===1){x[0].x=E[0],x[0].y=E[1],(A=y.onLayoutEnd)===null||A===void 0||A.call(y);return}var b=y.nodeSize,k=y.nodeSpacing,N=[],g,v=0;(0,nt.isArray)(b)?g=Math.max(b[0],b[1]):g=b,(0,nt.isArray)(k)?v=Math.max(k[0],k[1]):(0,nt.isNumber)(k)&&(v=k),x.forEach(function(dt){N.push(dt);var ot=g;(0,nt.isArray)(dt.size)?ot=Math.max(dt.size[0],dt.size[1]):(0,nt.isNumber)(dt.size)?ot=dt.size:(0,nt.isObject)(dt.size)&&(ot=Math.max(dt.size.width,dt.size.height)),g=Math.max(g,ot),(0,nt.isFunction)(k)&&(v=Math.max(k(dt),v))}),y.clockwise=y.counterclockwise!==void 0?!y.counterclockwise:y.clockwise;var K={},B={};if(N.forEach(function(dt,ot){K[dt.id]=dt,B[dt.id]=ot}),(y.sortBy==="degree"||!(0,nt.isString)(y.sortBy)||N[0][y.sortBy]===void 0)&&(y.sortBy="degree",!(0,nt.isNumber)(x[0].degree))){var G=(0,nt.getDegree)(x.length,B,p);N.forEach(function(dt,ot){dt.degree=G[ot].all})}N.sort(function(dt,ot){return ot[y.sortBy]-dt[y.sortBy]}),y.maxValueNode=N[0],y.maxLevelDiff=y.maxLevelDiff||y.maxValueNode[y.sortBy]/4;var Y=[[]],j=Y[0];N.forEach(function(dt){if(j.length>0){var ot=Math.abs(j[0][y.sortBy]-dt[y.sortBy]);y.maxLevelDiff&&ot>=y.maxLevelDiff&&(j=[],Y.push(j))}j.push(dt)});var Q=g+(v||y.minNodeSpacing);if(!y.preventOverlap){var Z=Y.length>0&&Y[0].length>1,rt=Math.min(y.width,y.height)/2-Q,ut=rt/(Y.length+(Z?1:0));Q=Math.min(Q,ut)}var ht=0;if(Y.forEach(function(dt){var ot=y.sweep;ot===void 0&&(ot=2*Math.PI-2*Math.PI/dt.length);var yt=dt.dTheta=ot/Math.max(1,dt.length-1);if(dt.length>1&&y.preventOverlap){var Lt=Math.cos(yt)-Math.cos(0),Ot=Math.sin(yt)-Math.sin(0),Wt=Math.sqrt(Q*Q/(Lt*Lt+Ot*Ot));ht=Math.max(Wt,ht)}dt.r=ht,ht+=Q}),y.equidistant){for(var kt=0,At=0,Ht=0;Ht<Y.length;Ht++){var Rt=Y[Ht],le=Rt.r-At;kt=Math.max(kt,le)}At=0,Y.forEach(function(dt,ot){ot===0&&(At=dt.r),dt.r=At,At+=kt})}return Y.forEach(function(dt){var ot=dt.dTheta,yt=dt.r;dt.forEach(function(Lt,Ot){var Wt=y.startAngle+(y.clockwise?1:-1)*ot*Ot;Lt.x=E[0]+yt*Math.cos(Wt),Lt.y=E[1]+yt*Math.sin(Wt)})}),y.onLayoutEnd&&y.onLayoutEnd(),{nodes:x,edges:p}},F.prototype.getType=function(){return"concentric"},F}(V.Base);R.ConcentricLayout=z},16470:function(Se,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.FORCE_LAYOUT_TYPE_MAP=R.LAYOUT_MESSAGE=void 0,R.LAYOUT_MESSAGE={RUN:"LAYOUT_RUN",END:"LAYOUT_END",ERROR:"LAYOUT_ERROR",TICK:"LAYOUT_TICK",GPURUN:"GPU_LAYOUT_RUN",GPUEND:"GPU_LAYOUT_END"},R.FORCE_LAYOUT_TYPE_MAP={gForce:!0,force2:!0,fruchterman:!0,forceAtlas2:!0,force:!0,"graphin-force":!0}},20171:function(Se,R,et){"use strict";var ft=this&&this.__extends||function(){var y=function(x,p){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,E){_.__proto__=E}||function(_,E){for(var b in E)Object.prototype.hasOwnProperty.call(E,b)&&(_[b]=E[b])},y(x,p)};return function(x,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");y(x,p);function _(){this.constructor=x}x.prototype=p===null?Object.create(p):(_.prototype=p.prototype,new _)}}(),nt=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(R,"__esModule",{value:!0}),R.DagreLayout=void 0;var V=nt(et(41106)),z=et(49784),H=et(62329),F=et(27652),M=function(y){ft(x,y);function x(p){var _=y.call(this)||this;return _.rankdir="TB",_.nodesep=50,_.ranksep=50,_.controlPoints=!1,_.sortByCombo=!1,_.edgeLabelSpace=!0,_.radial=!1,_.nodes=[],_.edges=[],_.onLayoutEnd=function(){},_.layoutNode=function(E){var b=_,k=b.nodes,N=k.find(function(v){return v.id===E});if(N){var g=N.layout!==!1;return g}return!0},_.updateCfg(p),_}return x.prototype.getDefaultCfg=function(){return{rankdir:"TB",align:void 0,nodeSize:void 0,nodesepFunc:void 0,ranksepFunc:void 0,nodesep:50,ranksep:50,controlPoints:!1,radial:!1,focusNode:null}},x.prototype.execute=function(){var p=this,_,E,b,k,N=this,g=N.nodes,v=N.nodeSize,K=N.rankdir,B=N.combos,G=N.begin,Y=N.radial,j=N.comboEdges,Q=j===void 0?[]:j,Z=N.vedges,rt=Z===void 0?[]:Z;if(g){var ut=N.edges||[],ht=new F.Graph({multigraph:!0,compound:!0});N.nodeMap={};var kt={};g.forEach(function(er){N.nodeMap[er.id]=er,er.comboId&&(kt[er.comboId]=kt[er.comboId]||[],kt[er.comboId].push(er.id))});var At=[],Ht={};!((_=N.nodeOrder)===null||_===void 0)&&_.length?(N.nodeOrder.forEach(function(er){Ht[er]=!0,At.push(N.nodeMap[er])}),g.forEach(function(er){Ht[er.id]||At.push(er)})):At=g;var Rt;v?(0,z.isArray)(v)?Rt=function(){return v}:Rt=function(){return[v,v]}:Rt=function(er){return er.size?(0,z.isArray)(er.size)?er.size:(0,z.isObject)(er.size)?[er.size.width||40,er.size.height||40]:[er.size,er.size]:[40,40]};var le=(0,z.getFunc)(N.ranksep,50,N.ranksepFunc),dt=(0,z.getFunc)(N.nodesep,50,N.nodesepFunc),ot=dt,yt=le;(K==="LR"||K==="RL")&&(ot=le,yt=dt),ht.setDefaultEdgeLabel(function(){return{}}),ht.setGraph(N);var Lt={};this.sortByCombo&&B&&B.forEach(function(er){if(Lt[er.id]=er,er.collapsed){var cr=Rt(er),dr=yt(er),Gr=ot(er),sn=cr[0]+2*Gr,yn=cr[1]+2*dr;ht.setNode(er.id,{width:sn,height:yn})}er.parentId&&(Lt[er.parentId]||ht.setNode(er.parentId,{}),ht.setParent(er.id,er.parentId))}),At.filter(function(er){return er.layout!==!1}).forEach(function(er){var cr=Rt(er),dr=yt(er),Gr=ot(er),sn=cr[0]+2*Gr,yn=cr[1]+2*dr,ln=er.layer;(0,z.isNumber)(ln)?ht.setNode(er.id,{width:sn,height:yn,layer:ln}):ht.setNode(er.id,{width:sn,height:yn}),p.sortByCombo&&er.comboId&&(Lt[er.comboId]||(Lt[er.comboId]={id:er.comboId},ht.setNode(er.comboId,{})),ht.setParent(er.id,er.comboId))}),ut.forEach(function(er){var cr=(0,z.getEdgeTerminal)(er,"source"),dr=(0,z.getEdgeTerminal)(er,"target");p.layoutNode(cr)&&p.layoutNode(dr)&&ht.setEdge(cr,dr,{weight:er.weight||1})}),(E=Q==null?void 0:Q.concat(rt||[]))===null||E===void 0||E.forEach(function(er){var cr,dr,Gr=er.source,sn=er.target,yn=!((cr=Lt[Gr])===null||cr===void 0)&&cr.collapsed?[Gr]:kt[Gr]||[Gr],ln=!((dr=Lt[sn])===null||dr===void 0)&&dr.collapsed?[sn]:kt[sn]||[sn];yn.forEach(function(Vn){ln.forEach(function(ca){ht.setEdge(Vn,ca,{weight:er.weight||1})})})});var Ot=void 0;!((b=N.preset)===null||b===void 0)&&b.nodes&&(Ot=new F.Graph({multigraph:!0,compound:!0}),N.preset.nodes.forEach(function(er){Ot==null||Ot.setNode(er.id,er)})),V.default.layout(ht,{prevGraph:Ot,edgeLabelSpace:N.edgeLabelSpace,keepNodeOrder:!!N.nodeOrder,nodeOrder:N.nodeOrder});var Wt=[0,0];if(G){var Jt=1/0,De=1/0;ht.nodes().forEach(function(er){var cr=ht.node(er);Jt>cr.x&&(Jt=cr.x),De>cr.y&&(De=cr.y)}),ht.edges().forEach(function(er){var cr,dr=ht.edge(er);(cr=dr.points)===null||cr===void 0||cr.forEach(function(Gr){Jt>Gr.x&&(Jt=Gr.x),De>Gr.y&&(De=Gr.y)})}),Wt[0]=G[0]-Jt,Wt[1]=G[1]-De}var te=K==="LR"||K==="RL";if(Y){var oe=this,me=oe.focusNode,Ce=oe.ranksep,_e=oe.getRadialPos,zt=(0,z.isString)(me)?me:me==null?void 0:me.id,ue=zt?(k=ht.node(zt))===null||k===void 0?void 0:k._rank:0,Pe=[],Xt=te?"y":"x",ie=te?"height":"width",Ie=1/0,se=-1/0;ht.nodes().forEach(function(er){var cr=ht.node(er);if(N.nodeMap[er]){var dr=dt(N.nodeMap[er]);if(ue===0)Pe[cr._rank]||(Pe[cr._rank]={nodes:[],totalWidth:0,maxSize:-1/0}),Pe[cr._rank].nodes.push(er),Pe[cr._rank].totalWidth+=dr*2+cr[ie],Pe[cr._rank].maxSize<Math.max(cr.width,cr.height)&&(Pe[cr._rank].maxSize=Math.max(cr.width,cr.height));else{var Gr=cr._rank-ue;if(Gr===0)Pe[Gr]||(Pe[Gr]={nodes:[],totalWidth:0,maxSize:-1/0}),Pe[Gr].nodes.push(er),Pe[Gr].totalWidth+=dr*2+cr[ie],Pe[Gr].maxSize<Math.max(cr.width,cr.height)&&(Pe[Gr].maxSize=Math.max(cr.width,cr.height));else{var sn=Math.abs(Gr);Pe[sn]||(Pe[sn]={left:[],right:[],totalWidth:0,maxSize:-1/0}),Pe[sn].totalWidth+=dr*2+cr[ie],Pe[sn].maxSize<Math.max(cr.width,cr.height)&&(Pe[sn].maxSize=Math.max(cr.width,cr.height)),Gr<0?Pe[sn].left.push(er):Pe[sn].right.push(er)}}var yn=cr[Xt]-cr[ie]/2-dr,ln=cr[Xt]+cr[ie]/2+dr;yn<Ie&&(Ie=yn),ln>se&&(se=ln)}});var Te=Ce||50,Be={},Tt=(se-Ie)/.9,nr=[(Ie+se-Tt)*.5,(Ie+se+Tt)*.5],Ir=function(er,cr,dr,Gr){dr===void 0&&(dr=-1/0),Gr===void 0&&(Gr=[0,1]);var sn=dr;return er.forEach(function(yn){var ln=ht.node(yn);Be[yn]=cr;var Vn=_e(ln[Xt],nr,Tt,cr,Gr),ca=Vn.x,oa=Vn.y;if(N.nodeMap[yn]){N.nodeMap[yn].x=ca+Wt[0],N.nodeMap[yn].y=oa+Wt[1],N.nodeMap[yn]._order=ln._order;var bn=le(N.nodeMap[yn]);sn<bn&&(sn=bn)}}),sn},Zr=!0,Ur=0;Pe.forEach(function(er){var cr,dr,Gr,sn,yn,ln,Vn;if(!(!(!((cr=er==null?void 0:er.nodes)===null||cr===void 0)&&cr.length)&&!(!((dr=er==null?void 0:er.left)===null||dr===void 0)&&dr.length)&&!(!((Gr=er==null?void 0:er.right)===null||Gr===void 0)&&Gr.length))){if(Zr&&er.nodes.length===1){var ca=er.nodes[0];if(!N.nodeMap[ca])return;N.nodeMap[ca].x=Wt[0],N.nodeMap[ca].y=Wt[1],Be[er.nodes[0]]=0,Te=le(N.nodeMap[ca]),Zr=!1;return}Te=Math.max(Te,er.totalWidth/(2*Math.PI));var oa=-1/0;if(ue===0||!((sn=er.nodes)===null||sn===void 0)&&sn.length)oa=Ir(er.nodes,Te,oa,[0,1]);else{var bn=((yn=er.left)===null||yn===void 0?void 0:yn.length)/(((ln=er.left)===null||ln===void 0?void 0:ln.length)+((Vn=er.right)===null||Vn===void 0?void 0:Vn.length));oa=Ir(er.left,Te,oa,[0,bn]),oa=Ir(er.right,Te,oa,[bn+.05,1])}Te+=oa,Zr=!1,Ur-er.maxSize}}),ht.edges().forEach(function(er){var cr,dr,Gr,sn=ht.edge(er),yn=ut.findIndex(function(zn){var ya=(0,z.getEdgeTerminal)(zn,"source"),W=(0,z.getEdgeTerminal)(zn,"target");return ya===er.v&&W===er.w});if(!(yn<=-1)&&N.edgeLabelSpace&&N.controlPoints&&ut[yn].type!=="loop"){var ln=Xt==="x"?"y":"x",Vn=(cr=sn==null?void 0:sn.points)===null||cr===void 0?void 0:cr.slice(1,sn.points.length-1),ca=[],oa=(dr=ht.node(er.v))===null||dr===void 0?void 0:dr[ln],bn=oa-((Gr=ht.node(er.w))===null||Gr===void 0?void 0:Gr[ln]),qn=Be[er.v],Gn=qn-Be[er.w];Vn==null||Vn.forEach(function(zn){var ya=(zn[ln]-oa)/bn*Gn+qn,W=_e(zn[Xt],nr,Tt,ya);ca.push({x:W.x+Wt[0],y:W.y+Wt[1]})}),ut[yn].controlPoints=ca}})}else{var wn=new Set,Xr=K==="BT"||K==="RL",Sn=Xr?function(er,cr){return cr-er}:function(er,cr){return er-cr};ht.nodes().forEach(function(er){var cr=ht.node(er);if(cr){var dr=p.nodeMap[er];dr||(dr=B==null?void 0:B.find(function(Gr){return Gr.id===er})),dr&&(dr.x=cr.x+Wt[0],dr.y=cr.y+Wt[1],dr._order=cr._order,wn.add(te?dr.x:dr.y))}});var Kn=Array.from(wn).sort(Sn),Fn=te?function(er,cr){return er.x!==cr.x}:function(er,cr){return er.y!==cr.y},pn=te?function(er,cr,dr){var Gr=Math.max(cr.y,dr.y),sn=Math.min(cr.y,dr.y);return er.filter(function(yn){return yn.y<=Gr&&yn.y>=sn})}:function(er,cr,dr){var Gr=Math.max(cr.x,dr.x),sn=Math.min(cr.x,dr.x);return er.filter(function(yn){return yn.x<=Gr&&yn.x>=sn})};ht.edges().forEach(function(er){var cr,dr=ht.edge(er),Gr=ut.findIndex(function(ln){var Vn=(0,z.getEdgeTerminal)(ln,"source"),ca=(0,z.getEdgeTerminal)(ln,"target");return Vn===er.v&&ca===er.w});if(!(Gr<=-1)&&N.edgeLabelSpace&&N.controlPoints&&ut[Gr].type!=="loop"){(cr=dr==null?void 0:dr.points)===null||cr===void 0||cr.forEach(function(ln){ln.x+=Wt[0],ln.y+=Wt[1]});var sn=N.nodeMap[er.v],yn=N.nodeMap[er.w];ut[Gr].controlPoints=A(dr==null?void 0:dr.points,sn,yn,Kn,te,Fn,pn)}})}return N.onLayoutEnd&&N.onLayoutEnd(),{nodes:g,edges:ut}}},x.prototype.getRadialPos=function(p,_,E,b,k){k===void 0&&(k=[0,1]);var N=(p-_[0])/E;N=N*(k[1]-k[0])+k[0];var g=N*2*Math.PI;return{x:Math.cos(g)*b,y:Math.sin(g)*b}},x.prototype.getType=function(){return"dagre"},x}(H.Base);R.DagreLayout=M;var A=function(y,x,p,_,E,b,k){var N=(y==null?void 0:y.slice(1,y.length-1))||[];if(x&&p){var g=x.x,v=x.y,K=p.x,B=p.y;if(E&&(g=x.y,v=x.x,K=p.y,B=p.x),B!==v&&g!==K){var G=_.indexOf(v),Y=_[G+1];if(Y){var j=N[0],Q=E?{x:(v+Y)/2,y:(j==null?void 0:j.y)||K}:{x:(j==null?void 0:j.x)||K,y:(v+Y)/2};(!j||b(j,Q))&&N.unshift(Q)}var Z=_.indexOf(B),rt=Math.abs(Z-G);if(rt===1)N=k(N,x,p),N.length||N.push(E?{x:(v+B)/2,y:g}:{x:g,y:(v+B)/2});else if(rt>1){var ut=_[Z-1];if(ut){var ht=N[N.length-1],kt=E?{x:(B+ut)/2,y:(ht==null?void 0:ht.y)||K}:{x:(ht==null?void 0:ht.x)||g,y:(B+ut)/2};(!ht||b(ht,kt))&&N.push(kt)}}}}return N}},27652:function(Se,R,et){"use strict";var ft=this&&this.__extends||function(){var z=function(H,F){return z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,A){M.__proto__=A}||function(M,A){for(var y in A)Object.prototype.hasOwnProperty.call(A,y)&&(M[y]=A[y])},z(H,F)};return function(H,F){if(typeof F!="function"&&F!==null)throw new TypeError("Class extends value "+String(F)+" is not a constructor or null");z(H,F);function M(){this.constructor=H}H.prototype=F===null?Object.create(F):(M.prototype=F.prototype,new M)}}();Object.defineProperty(R,"__esModule",{value:!0}),R.Graph=void 0;var nt=et(99905),V=function(z){ft(H,z);function H(){return z!==null&&z.apply(this,arguments)||this}return H}(nt.Graph);R.Graph=V},41106:function(Se,R,et){"use strict";var ft=this&&this.__importDefault||function(z){return z&&z.__esModule?z:{default:z}};Object.defineProperty(R,"__esModule",{value:!0});var nt=ft(et(65236)),V=et(69209);R.default={layout:nt.default,util:{time:V.time,notime:V.notime}}},78029:function(Se,R,et){"use strict";var ft=this&&this.__importDefault||function(F){return F&&F.__esModule?F:{default:F}};Object.defineProperty(R,"__esModule",{value:!0});var nt=ft(et(40773)),V=function(F){var M=function(y){return function(x){var p;return((p=y.edge(x))===null||p===void 0?void 0:p.weight)||1}},A=F.graph().acyclicer==="greedy"?(0,nt.default)(F,M(F)):z(F);A==null||A.forEach(function(y){var x=F.edge(y);F.removeEdgeObj(y),x.forwardName=y.name,x.reversed=!0,F.setEdge(y.w,y.v,x,"rev-".concat(Math.random()))})},z=function(F){var M=[],A={},y={},x=function(p){var _;y[p]||(y[p]=!0,A[p]=!0,(_=F.outEdges(p))===null||_===void 0||_.forEach(function(E){A[E.w]?M.push(E):x(E.w)}),delete A[p])};return F.nodes().forEach(x),M},H=function(F){F.edges().forEach(function(M){var A=F.edge(M);if(A.reversed){F.removeEdgeObj(M);var y=A.forwardName;delete A.reversed,delete A.forwardName,F.setEdge(M.w,M.v,A,y)}})};R.default={run:V,undo:H}},11500:function(Se,R,et){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var ft=et(69209),nt=function(z){var H,F=function(M){var A=z.children(M),y=z.node(M);if(A!=null&&A.length&&A.forEach(function(_){return F(_)}),y.hasOwnProperty("minRank")){y.borderLeft=[],y.borderRight=[];for(var x=y.minRank,p=y.maxRank+1;x<p;x+=1)V(z,"borderLeft","_bl",M,y,x),V(z,"borderRight","_br",M,y,x)}};(H=z.children())===null||H===void 0||H.forEach(function(M){return F(M)})},V=function(z,H,F,M,A,y){var x={rank:y,borderType:H,width:0,height:0},p=A[H][y-1],_=(0,ft.addDummyNode)(z,"border",x,F);A[H][y]=_,z.setParent(_,M),p&&z.setEdge(p,_,{weight:1})};R.default=nt},35279:function(Se,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var et=function(A){var y,x=(y=A.graph().rankdir)===null||y===void 0?void 0:y.toLowerCase();(x==="lr"||x==="rl")&&nt(A)},ft=function(A){var y,x=(y=A.graph().rankdir)===null||y===void 0?void 0:y.toLowerCase();(x==="bt"||x==="rl")&&z(A),(x==="lr"||x==="rl")&&(F(A),nt(A))},nt=function(A){A.nodes().forEach(function(y){V(A.node(y))}),A.edges().forEach(function(y){V(A.edge(y))})},V=function(A){var y=A.width;A.width=A.height,A.height=y},z=function(A){A.nodes().forEach(function(y){H(A.node(y))}),A.edges().forEach(function(y){var x,p=A.edge(y);(x=p.points)===null||x===void 0||x.forEach(function(_){return H(_)}),p.hasOwnProperty("y")&&H(p)})},H=function(A){A!=null&&A.y&&(A.y=-A.y)},F=function(A){A.nodes().forEach(function(y){M(A.node(y))}),A.edges().forEach(function(y){var x,p=A.edge(y);(x=p.points)===null||x===void 0||x.forEach(function(_){return M(_)}),p.hasOwnProperty("x")&&M(p)})},M=function(A){var y=A.x;A.x=A.y,A.y=y};R.default={adjust:et,undo:ft}},55532:function(Se,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var et=function(V,z){if(V!=="next"&&V!=="prev")return z},ft=function(V){V.prev.next=V.next,V.next.prev=V.prev,delete V.next,delete V.prev},nt=function(){function V(){var z={};z.prev=z,z.next=z.prev,this.shortcut=z}return V.prototype.dequeue=function(){var z=this.shortcut,H=z.prev;if(H&&H!==z)return ft(H),H},V.prototype.enqueue=function(z){var H=this.shortcut;z.prev&&z.next&&ft(z),z.next=H.next,H.next.prev=z,H.next=z,z.prev=H},V.prototype.toString=function(){for(var z=[],H=this.shortcut,F=H.prev;F!==H;)z.push(JSON.stringify(F,et)),F=F==null?void 0:F.prev;return"[".concat(z.join(", "),"]")},V}();R.default=nt},40773:function(Se,R,et){"use strict";var ft=this&&this.__extends||function(){var E=function(b,k){return E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(N,g){N.__proto__=g}||function(N,g){for(var v in g)Object.prototype.hasOwnProperty.call(g,v)&&(N[v]=g[v])},E(b,k)};return function(b,k){if(typeof k!="function"&&k!==null)throw new TypeError("Class extends value "+String(k)+" is not a constructor or null");E(b,k);function N(){this.constructor=b}b.prototype=k===null?Object.create(k):(N.prototype=k.prototype,new N)}}(),nt=this&&this.__importDefault||function(E){return E&&E.__esModule?E:{default:E}};Object.defineProperty(R,"__esModule",{value:!0});var V=nt(et(55532)),z=et(99905),H=function(E){ft(b,E);function b(){return E!==null&&E.apply(this,arguments)||this}return b}(V.default),F=function(E){ft(b,E);function b(){return E!==null&&E.apply(this,arguments)||this}return b}(z.Graph),M=function(){return 1},A=function(E,b){var k;if(E.nodeCount()<=1)return[];var N=p(E,b||M),g=y(N.graph,N.buckets,N.zeroIdx);return(k=g.map(function(v){return E.outEdges(v.v,v.w)}))===null||k===void 0?void 0:k.flat()},y=function(E,b,k){for(var N=[],g=b[b.length-1],v=b[0],K;E.nodeCount();){for(;K=v.dequeue();)x(E,b,k,K);for(;K=g.dequeue();)x(E,b,k,K);if(E.nodeCount()){for(var B=b.length-2;B>0;--B)if(K=b[B].dequeue(),K){N=N.concat(x(E,b,k,K,!0));break}}}return N},x=function(E,b,k,N,g){var v,K,B=[];return(v=E.inEdges(N.v))===null||v===void 0||v.forEach(function(G){var Y=E.edge(G),j=E.node(G.v);g&&B.push({v:G.v,w:G.w,in:0,out:0}),j.out===void 0&&(j.out=0),j.out-=Y,_(b,k,j)}),(K=E.outEdges(N.v))===null||K===void 0||K.forEach(function(G){var Y=E.edge(G),j=G.w,Q=E.node(j);Q.in===void 0&&(Q.in=0),Q.in-=Y,_(b,k,Q)}),E.removeNode(N.v),g?B:void 0},p=function(E,b){var k=new F,N=0,g=0;E.nodes().forEach(function(Y){k.setNode(Y,{v:Y,in:0,out:0})}),E.edges().forEach(function(Y){var j=k.edge(Y)||0,Q=(b==null?void 0:b(Y))||1,Z=j+Q;k.setEdge(Y.v,Y.w,Z),g=Math.max(g,k.node(Y.v).out+=Q),N=Math.max(N,k.node(Y.w).in+=Q)});for(var v=[],K=g+N+3,B=0;B<K;B++)v.push(new H);var G=N+1;return k.nodes().forEach(function(Y){_(v,G,k.node(Y))}),{buckets:v,zeroIdx:G,graph:k}},_=function(E,b,k){k.out?k.in?E[k.out-k.in+b].enqueue(k):E[E.length-1].enqueue(k):E[0].enqueue(k)};R.default=A},65236:function(Se,R,et){"use strict";var ft=this&&this.__assign||function(){return ft=Object.assign||function(te){for(var oe,me=1,Ce=arguments.length;me<Ce;me++){oe=arguments[me];for(var _e in oe)Object.prototype.hasOwnProperty.call(oe,_e)&&(te[_e]=oe[_e])}return te},ft.apply(this,arguments)},nt=this&&this.__importDefault||function(te){return te&&te.__esModule?te:{default:te}};Object.defineProperty(R,"__esModule",{value:!0});var V=nt(et(78029)),z=nt(et(46171)),H=nt(et(76827)),F=et(69209),M=nt(et(33562)),A=nt(et(59596)),y=nt(et(11500)),x=nt(et(35279)),p=nt(et(19597)),_=nt(et(95)),E=nt(et(24956)),b=et(27652),k=function(te,oe){var me=oe&&oe.debugTiming?F.time:F.notime;me("layout",function(){oe&&!oe.keepNodeOrder&&oe.prevGraph&&me("  inheritOrder",function(){g(te,oe.prevGraph)});var Ce=me("  buildLayoutGraph",function(){return ut(te)});oe&&oe.edgeLabelSpace===!1||me("  makeSpaceForEdgeLabels",function(){ht(Ce)});try{me("  runLayout",function(){N(Ce,me,oe)})}catch(_e){if(_e.message==="Not possible to find intersection inside of the rectangle"){console.error(`The following error may be caused by improper layer setting, please make sure your manual layer setting does not violate the graph's structure:
`,_e);return}throw _e}me("  updateInputGraph",function(){v(te,Ce)})})},N=function(te,oe,me){oe("    removeSelfEdges",function(){Lt(te)}),oe("    acyclic",function(){V.default.run(te)}),oe("    nestingGraph.run",function(){A.default.run(te)}),oe("    rank",function(){(0,H.default)((0,F.asNonCompoundGraph)(te))}),oe("    injectEdgeLabelProxies",function(){kt(te)}),oe("    removeEmptyRanks",function(){(0,F.removeEmptyRanks)(te)}),oe("    nestingGraph.cleanup",function(){A.default.cleanup(te)}),oe("    normalizeRanks",function(){(0,F.normalizeRanks)(te)}),oe("    assignRankMinMax",function(){At(te)}),oe("    removeEdgeLabelProxies",function(){Ht(te)}),oe("    normalize.run",function(){z.default.run(te)}),oe("    parentDummyChains",function(){(0,M.default)(te)}),oe("    addBorderSegments",function(){(0,y.default)(te)}),me&&me.keepNodeOrder&&oe("    initDataOrder",function(){(0,E.default)(te,me.nodeOrder)}),oe("    order",function(){(0,p.default)(te,me==null?void 0:me.keepNodeOrder)}),oe("    insertSelfEdges",function(){Ot(te)}),oe("    adjustCoordinateSystem",function(){x.default.adjust(te)}),oe("    position",function(){(0,_.default)(te)}),oe("    positionSelfEdges",function(){Wt(te)}),oe("    removeBorderNodes",function(){yt(te)}),oe("    normalize.undo",function(){z.default.undo(te)}),oe("    fixupEdgeLabelCoords",function(){dt(te)}),oe("    undoCoordinateSystem",function(){x.default.undo(te)}),oe("    translateGraph",function(){Rt(te)}),oe("    assignNodeIntersects",function(){le(te)}),oe("    reversePoints",function(){ot(te)}),oe("    acyclic.undo",function(){V.default.undo(te)})},g=function(te,oe){te.nodes().forEach(function(me){var Ce=te.node(me),_e=oe.node(me);_e!==void 0?(Ce.fixorder=_e._order,delete _e._order):delete Ce.fixorder})},v=function(te,oe){te.nodes().forEach(function(me){var Ce,_e=te.node(me);if(_e){var zt=oe.node(me);_e.x=zt.x,_e.y=zt.y,_e._order=zt.order,_e._rank=zt.rank,!((Ce=oe.children(me))===null||Ce===void 0)&&Ce.length&&(_e.width=zt.width,_e.height=zt.height)}}),te.edges().forEach(function(me){var Ce=te.edge(me),_e=oe.edge(me);Ce.points=_e?_e.points:[],_e&&_e.hasOwnProperty("x")&&(Ce.x=_e.x,Ce.y=_e.y)}),te.graph().width=oe.graph().width,te.graph().height=oe.graph().height},K=["nodesep","edgesep","ranksep","marginx","marginy"],B={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},G=["acyclicer","ranker","rankdir","align"],Y=["width","height","layer","fixorder"],j={width:0,height:0},Q=["minlen","weight","width","height","labeloffset"],Z={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},rt=["labelpos"],ut=function(te){var oe=new b.Graph({multigraph:!0,compound:!0}),me=De(te.graph()),Ce={};return G==null||G.forEach(function(_e){me[_e]!==void 0&&(Ce[_e]=me[_e])}),oe.setGraph(Object.assign({},B,Jt(me,K),Ce)),te.nodes().forEach(function(_e){var zt=De(te.node(_e)),ue=ft(ft({},j),zt),Pe=Jt(ue,Y);oe.setNode(_e,Pe),oe.setParent(_e,te.parent(_e))}),te.edges().forEach(function(_e){var zt=De(te.edge(_e)),ue={};rt==null||rt.forEach(function(Pe){zt[Pe]!==void 0&&(ue[Pe]=zt[Pe])}),oe.setEdgeObj(_e,Object.assign({},Z,Jt(zt,Q),ue))}),oe},ht=function(te){var oe=te.graph();oe.ranksep||(oe.ranksep=0),oe.ranksep/=2,te.nodes().forEach(function(me){var Ce=te.node(me);isNaN(Ce.layer)||Ce.layer||(Ce.layer=0)}),te.edges().forEach(function(me){var Ce,_e=te.edge(me);_e.minlen*=2,((Ce=_e.labelpos)===null||Ce===void 0?void 0:Ce.toLowerCase())!=="c"&&(oe.rankdir==="TB"||oe.rankdir==="BT"?_e.width+=_e.labeloffset:_e.height+=_e.labeloffset)})},kt=function(te){te.edges().forEach(function(oe){var me=te.edge(oe);if(me.width&&me.height){var Ce=te.node(oe.v),_e=te.node(oe.w),zt={e:oe,rank:(_e.rank-Ce.rank)/2+Ce.rank};(0,F.addDummyNode)(te,"edge-proxy",zt,"_ep")}})},At=function(te){var oe=0;te.nodes().forEach(function(me){var Ce,_e,zt=te.node(me);zt.borderTop&&(zt.minRank=(Ce=te.node(zt.borderTop))===null||Ce===void 0?void 0:Ce.rank,zt.maxRank=(_e=te.node(zt.borderBottom))===null||_e===void 0?void 0:_e.rank,oe=Math.max(oe,zt.maxRank||-1/0))}),te.graph().maxRank=oe},Ht=function(te){te.nodes().forEach(function(oe){var me=te.node(oe);me.dummy==="edge-proxy"&&(te.edge(me.e).labelRank=me.rank,te.removeNode(oe))})},Rt=function(te){var oe,me=0,Ce,_e=0,zt=te.graph(),ue=zt.marginx||0,Pe=zt.marginy||0,Xt=function(ie){if(ie){var Ie=ie.x,se=ie.y,Te=ie.width,Be=ie.height;!isNaN(Ie)&&!isNaN(Te)&&(oe===void 0&&(oe=Ie-Te/2),oe=Math.min(oe,Ie-Te/2),me=Math.max(me,Ie+Te/2)),!isNaN(se)&&!isNaN(Be)&&(Ce===void 0&&(Ce=se-Be/2),Ce=Math.min(Ce,se-Be/2),_e=Math.max(_e,se+Be/2))}};te.nodes().forEach(function(ie){Xt(te.node(ie))}),te.edges().forEach(function(ie){var Ie=te.edge(ie);Ie!=null&&Ie.hasOwnProperty("x")&&Xt(Ie)}),oe-=ue,Ce-=Pe,te.nodes().forEach(function(ie){var Ie=te.node(ie);Ie&&(Ie.x-=oe,Ie.y-=Ce)}),te.edges().forEach(function(ie){var Ie,se=te.edge(ie);(Ie=se.points)===null||Ie===void 0||Ie.forEach(function(Te){Te.x-=oe,Te.y-=Ce}),se.hasOwnProperty("x")&&(se.x-=oe),se.hasOwnProperty("y")&&(se.y-=Ce)}),zt.width=me-oe+ue,zt.height=_e-Ce+Pe},le=function(te){te.edges().forEach(function(oe){var me=te.edge(oe),Ce=te.node(oe.v),_e=te.node(oe.w),zt,ue;me.points?(zt=me.points[0],ue=me.points[me.points.length-1]):(me.points=[],zt=_e,ue=Ce),me.points.unshift((0,F.intersectRect)(Ce,zt)),me.points.push((0,F.intersectRect)(_e,ue))})},dt=function(te){te.edges().forEach(function(oe){var me=te.edge(oe);if(me!=null&&me.hasOwnProperty("x"))switch((me.labelpos==="l"||me.labelpos==="r")&&(me.width-=me.labeloffset),me.labelpos){case"l":me.x-=me.width/2+me.labeloffset;break;case"r":me.x+=me.width/2+me.labeloffset;break}})},ot=function(te){te.edges().forEach(function(oe){var me,Ce=te.edge(oe);Ce.reversed&&((me=Ce.points)===null||me===void 0||me.reverse())})},yt=function(te){te.nodes().forEach(function(oe){var me,Ce,_e;if(!((me=te.children(oe))===null||me===void 0)&&me.length){var zt=te.node(oe),ue=te.node(zt.borderTop),Pe=te.node(zt.borderBottom),Xt=te.node(zt.borderLeft[((Ce=zt.borderLeft)===null||Ce===void 0?void 0:Ce.length)-1]),ie=te.node(zt.borderRight[((_e=zt.borderRight)===null||_e===void 0?void 0:_e.length)-1]);zt.width=Math.abs((ie==null?void 0:ie.x)-(Xt==null?void 0:Xt.x))||10,zt.height=Math.abs((Pe==null?void 0:Pe.y)-(ue==null?void 0:ue.y))||10,zt.x=((Xt==null?void 0:Xt.x)||0)+zt.width/2,zt.y=((ue==null?void 0:ue.y)||0)+zt.height/2}}),te.nodes().forEach(function(oe){var me;((me=te.node(oe))===null||me===void 0?void 0:me.dummy)==="border"&&te.removeNode(oe)})},Lt=function(te){te.edges().forEach(function(oe){if(oe.v===oe.w){var me=te.node(oe.v);me.selfEdges||(me.selfEdges=[]),me.selfEdges.push({e:oe,label:te.edge(oe)}),te.removeEdgeObj(oe)}})},Ot=function(te){var oe=(0,F.buildLayerMatrix)(te);oe==null||oe.forEach(function(me){var Ce=0;me==null||me.forEach(function(_e,zt){var ue,Pe=te.node(_e);Pe.order=zt+Ce,(ue=Pe.selfEdges)===null||ue===void 0||ue.forEach(function(Xt){(0,F.addDummyNode)(te,"selfedge",{width:Xt.label.width,height:Xt.label.height,rank:Pe.rank,order:zt+ ++Ce,e:Xt.e,label:Xt.label},"_se")}),delete Pe.selfEdges})})},Wt=function(te){te.nodes().forEach(function(oe){var me=te.node(oe);if(me.dummy==="selfedge"){var Ce=te.node(me.e.v),_e=Ce.x+Ce.width/2,zt=Ce.y,ue=me.x-_e,Pe=Ce.height/2;te.setEdgeObj(me.e,me.label),te.removeNode(oe),me.label.points=[{x:_e+2*ue/3,y:zt-Pe},{x:_e+5*ue/6,y:zt-Pe},{y:zt,x:_e+ue},{x:_e+5*ue/6,y:zt+Pe},{x:_e+2*ue/3,y:zt+Pe}],me.label.x=me.x,me.label.y=me.y}})},Jt=function(te,oe){var me={};return oe==null||oe.forEach(function(Ce){te[Ce]!==void 0&&(me[Ce]=+te[Ce])}),me},De=function(te){te===void 0&&(te={});var oe={};return Object.keys(te).forEach(function(me){oe[me.toLowerCase()]=te[me]}),oe};R.default=k},59596:function(Se,R,et){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var ft=et(69209),nt=function(M){var A,y=(0,ft.addDummyNode)(M,"root",{},"_root"),x=z(M),p=Math.max.apply(Math,Object.values(x));Math.abs(p)===1/0&&(p=1);var _=p-1,E=2*_+1;M.graph().nestingRoot=y,M.edges().forEach(function(k){M.edge(k).minlen*=E});var b=H(M)+1;(A=M.children())===null||A===void 0||A.forEach(function(k){V(M,y,E,b,_,x,k)}),M.graph().nodeRankFactor=E},V=function(M,A,y,x,p,_,E){var b=M.children(E);if(!(b!=null&&b.length)){E!==A&&M.setEdge(A,E,{weight:0,minlen:y});return}var k=(0,ft.addBorderNode)(M,"_bt"),N=(0,ft.addBorderNode)(M,"_bb"),g=M.node(E);M.setParent(k,E),g.borderTop=k,M.setParent(N,E),g.borderBottom=N,b==null||b.forEach(function(v){V(M,A,y,x,p,_,v);var K=M.node(v),B=K.borderTop?K.borderTop:v,G=K.borderBottom?K.borderBottom:v,Y=K.borderTop?x:2*x,j=B!==G?1:p-_[E]+1;M.setEdge(k,B,{minlen:j,weight:Y,nestingEdge:!0}),M.setEdge(G,N,{minlen:j,weight:Y,nestingEdge:!0})}),M.parent(E)||M.setEdge(A,k,{weight:0,minlen:p+_[E]})},z=function(M){var A,y={},x=function(p,_){var E=M.children(p);E==null||E.forEach(function(b){return x(b,_+1)}),y[p]=_};return(A=M.children())===null||A===void 0||A.forEach(function(p){return x(p,1)}),y},H=function(M){var A=0;return M.edges().forEach(function(y){A+=M.edge(y).weight}),A},F=function(M){var A=M.graph();A.nestingRoot&&M.removeNode(A.nestingRoot),delete A.nestingRoot,M.edges().forEach(function(y){var x=M.edge(y);x.nestingEdge&&M.removeEdgeObj(y)})};R.default={run:nt,cleanup:F}},46171:function(Se,R,et){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var ft=et(69209),nt=function(H){H.graph().dummyChains=[],H.edges().forEach(function(F){return V(H,F)})},V=function(H,F){var M=F.v,A=H.node(M).rank,y=F.w,x=H.node(y).rank,p=F.name,_=H.edge(F),E=_.labelRank;if(x!==A+1){H.removeEdgeObj(F);var b=H.graph(),k,N,g;for(g=0,++A;A<x;++g,++A)_.points=[],N={edgeLabel:_,width:0,height:0,edgeObj:F,rank:A},k=(0,ft.addDummyNode)(H,"edge",N,"_d"),A===E&&(N.width=_.width,N.height=_.height,N.dummy="edge-label",N.labelpos=_.labelpos),H.setEdge(M,k,{weight:_.weight},p),g===0&&(b.dummyChains||(b.dummyChains=[]),b.dummyChains.push(k)),M=k;H.setEdge(M,y,{weight:_.weight},p)}},z=function(H){var F;(F=H.graph().dummyChains)===null||F===void 0||F.forEach(function(M){var A=H.node(M),y=A.edgeLabel,x;A.edgeObj&&H.setEdgeObj(A.edgeObj,y);for(var p=M;A.dummy;)x=H.successors(p)[0],H.removeNode(p),y.points.push({x:A.x,y:A.y}),A.dummy==="edge-label"&&(y.x=A.x,y.y=A.y,y.width=A.width,y.height=A.height),p=x,A=H.node(p)})};R.default={run:nt,undo:z}},80314:function(Se,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var et=function(ft,nt,V){var z={},H;V==null||V.forEach(function(F){for(var M=ft.parent(F),A,y;M;){if(A=ft.parent(M),A?(y=z[A],z[A]=M):(y=H,H=M),y&&y!==M){nt.setEdge(y,M);return}M=A}})};R.default=et},89921:function(Se,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var et=function(ft,nt){return nt.map(function(V){var z=ft.inEdges(V);if(!(z!=null&&z.length))return{v:V};{var H={sum:0,weight:0};return z==null||z.forEach(function(F){var M=ft.edge(F),A=ft.node(F.v);H.sum+=M.weight*A.order,H.weight+=M.weight}),{v:V,barycenter:H.sum/H.weight,weight:H.weight}}})};R.default=et},77006:function(Se,R,et){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var ft=et(27652),nt=function(z,H,F){var M=V(z),A=new ft.Graph({compound:!0}).setGraph({root:M}).setDefaultNodeLabel(function(y){return z.node(y)});return z.nodes().forEach(function(y){var x,p=z.node(y),_=z.parent(y);(p.rank===H||p.minRank<=H&&H<=p.maxRank)&&(A.setNode(y),A.setParent(y,_||M),(x=z[F](y))===null||x===void 0||x.forEach(function(E){var b=E.v===y?E.w:E.v,k=A.edgeFromArgs(b,y),N=k!==void 0?k.weight:0;A.setEdge(b,y,{weight:z.edge(E).weight+N})}),p.hasOwnProperty("minRank")&&A.setNode(y,{borderLeft:p.borderLeft[H],borderRight:p.borderRight[H]}))}),A},V=function(z){for(var H;z.hasNode(H="_root".concat(Math.random())););return H};R.default=nt},32957:function(Se,R,et){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var ft=et(69209),nt=function(z,H,F){for(var M=(0,ft.zipObject)(F,F.map(function(b,k){return k})),A=H.map(function(b){var k,N=(k=z.outEdges(b))===null||k===void 0?void 0:k.map(function(g){return{pos:M[g.w]||0,weight:z.edge(g).weight}});return N==null?void 0:N.sort(function(g,v){return g.pos-v.pos})}),y=A.flat().filter(function(b){return b!==void 0}),x=1;x<F.length;)x<<=1;var p=2*x-1;x-=1;var _=Array(p).fill(0,0,p),E=0;return y==null||y.forEach(function(b){if(b){var k=b.pos+x;_[k]+=b.weight;for(var N=0;k>0;)k%2&&(N+=_[k+1]),k=k-1>>1,_[k]+=b.weight;E+=b.weight*N}}),E},V=function(z,H){for(var F=0,M=1;M<(H==null?void 0:H.length);M+=1)F+=nt(z,H[M-1],H[M]);return F};R.default=V},19597:function(Se,R,et){"use strict";var ft=this&&this.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(R,"__esModule",{value:!0});var nt=ft(et(15697)),V=ft(et(32957)),z=ft(et(77006)),H=ft(et(80314)),F=ft(et(99455)),M=et(49784),A=et(27652),y=et(69209),x=function(b,k){for(var N=(0,y.maxRank)(b),g=[],v=[],K=1;K<N+1;K++)g.push(K);for(var K=N-1;K>-1;K--)v.push(K);var B=p(b,g,"inEdges"),G=p(b,v,"outEdges"),Y=(0,nt.default)(b);E(b,Y);for(var j=Number.POSITIVE_INFINITY,Q,K=0,Z=0;Z<4;++K,++Z){_(K%2?B:G,K%4>=2,!1,k),Y=(0,y.buildLayerMatrix)(b);var rt=(0,V.default)(b,Y);rt<j&&(Z=0,Q=(0,M.clone)(Y),j=rt)}Y=(0,nt.default)(b),E(b,Y);for(var K=0,Z=0;Z<4;++K,++Z){_(K%2?B:G,K%4>=2,!0,k),Y=(0,y.buildLayerMatrix)(b);var rt=(0,V.default)(b,Y);rt<j&&(Z=0,Q=(0,M.clone)(Y),j=rt)}E(b,Q)},p=function(b,k,N){return k.map(function(g){return(0,z.default)(b,g,N)})},_=function(b,k,N,g){var v=new A.Graph;b==null||b.forEach(function(K){for(var B,G=K.graph().root,Y=(0,F.default)(K,G,v,k,N,g),j=0;j<((B=Y.vs)===null||B===void 0?void 0:B.length);j++){var Q=K.node(Y.vs[j]);Q&&(Q.order=j)}(0,H.default)(K,v,Y.vs)})},E=function(b,k){k==null||k.forEach(function(N){N==null||N.forEach(function(g,v){b.node(g).order=v})})};R.default=x},24956:function(Se,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var et=function(ft,nt){for(var V=ft.nodes().filter(function(A){var y;return!(!((y=ft.children(A))===null||y===void 0)&&y.length)}),z=V.map(function(A){return ft.node(A).rank}),H=Math.max.apply(Math,z),F=[],M=0;M<H+1;M++)F[M]=[];nt==null||nt.forEach(function(A){var y=ft.node(A);!y||y!=null&&y.dummy||isNaN(y.rank)||(y.fixorder=F[y.rank].length,F[y.rank].push(A))})};R.default=et},15697:function(Se,R,et){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var ft=et(11707),nt=function(V){for(var z={},H=V.nodes().filter(function(b){var k;return!(!((k=V.children(b))===null||k===void 0)&&k.length)}),F=H.map(function(b){return V.node(b).rank}),M=(0,ft.max)(F),A=[],y=0;y<M+1;y++)A.push([]);var x=function(b){var k;if(!z.hasOwnProperty(b)){z[b]=!0;var N=V.node(b);isNaN(N.rank)||A[N.rank].push(b),(k=V.successors(b))===null||k===void 0||k.forEach(function(g){return x(g)})}},p=H.sort(function(b,k){return V.node(b).rank-V.node(k).rank}),_=p.filter(function(b){return V.node(b).fixorder!==void 0}),E=_.sort(function(b,k){return V.node(b).fixorder-V.node(k).fixorder});return E==null||E.forEach(function(b){isNaN(V.node(b).rank)||A[V.node(b).rank].push(b),z[b]=!0}),p==null||p.forEach(x),A};R.default=nt},7043:function(Se,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var et=function(V,z){var H,F,M,A={};V==null||V.forEach(function(x,p){A[x.v]={i:p,indegree:0,in:[],out:[],vs:[x.v]};var _=A[x.v];x.barycenter!==void 0&&(_.barycenter=x.barycenter,_.weight=x.weight)}),(H=z.edges())===null||H===void 0||H.forEach(function(x){var p=A[x.v],_=A[x.w];p!==void 0&&_!==void 0&&(_.indegree++,p.out.push(A[x.w]))});var y=(M=(F=Object.values(A)).filter)===null||M===void 0?void 0:M.call(F,function(x){return!x.indegree});return ft(y)},ft=function(V){for(var z,H,F=[],M=function(_){return function(E){E.merged||(E.barycenter===void 0||_.barycenter===void 0||E.barycenter>=_.barycenter)&&nt(_,E)}},A=function(_){return function(E){E.in.push(_),--E.indegree===0&&V.push(E)}},y=function(){var _=V.pop();F.push(_),(z=_.in.reverse())===null||z===void 0||z.forEach(function(E){return M(_)(E)}),(H=_.out)===null||H===void 0||H.forEach(function(E){return A(_)(E)})};V!=null&&V.length;)y();var x=F.filter(function(_){return!_.merged}),p=["vs","i","barycenter","weight"];return x.map(function(_){var E={};return p==null||p.forEach(function(b){_[b]!==void 0&&(E[b]=_[b])}),E})},nt=function(V,z){var H,F=0,M=0;V.weight&&(F+=V.barycenter*V.weight,M+=V.weight),z.weight&&(F+=z.barycenter*z.weight,M+=z.weight),V.vs=(H=z.vs)===null||H===void 0?void 0:H.concat(V.vs),V.barycenter=F/M,V.weight=M,V.i=Math.min(z.i,V.i),z.merged=!0};R.default=et},99455:function(Se,R,et){"use strict";var ft=this&&this.__importDefault||function(A){return A&&A.__esModule?A:{default:A}};Object.defineProperty(R,"__esModule",{value:!0});var nt=ft(et(89921)),V=ft(et(7043)),z=ft(et(21498)),H=function(A,y,x,p,_,E){var b,k,N,g,v=A.children(y),K=A.node(y),B=K?K.borderLeft:void 0,G=K?K.borderRight:void 0,Y={};B&&(v=v==null?void 0:v.filter(function(ht){return ht!==B&&ht!==G}));var j=(0,nt.default)(A,v||[]);j==null||j.forEach(function(ht){var kt;if(!((kt=A.children(ht.v))===null||kt===void 0)&&kt.length){var At=H(A,ht.v,x,p,E);Y[ht.v]=At,At.hasOwnProperty("barycenter")&&M(ht,At)}});var Q=(0,V.default)(j,x);F(Q,Y),(b=Q.filter(function(ht){return ht.vs.length>0}))===null||b===void 0||b.forEach(function(ht){var kt=A.node(ht.vs[0]);kt&&(ht.fixorder=kt.fixorder,ht.order=kt.order)});var Z=(0,z.default)(Q,p,_,E);if(B&&(Z.vs=[B,Z.vs,G].flat(),!((k=A.predecessors(B))===null||k===void 0)&&k.length)){var rt=A.node(((N=A.predecessors(B))===null||N===void 0?void 0:N[0])||""),ut=A.node(((g=A.predecessors(G))===null||g===void 0?void 0:g[0])||"");Z.hasOwnProperty("barycenter")||(Z.barycenter=0,Z.weight=0),Z.barycenter=(Z.barycenter*Z.weight+rt.order+ut.order)/(Z.weight+2),Z.weight+=2}return Z},F=function(A,y){A==null||A.forEach(function(x){var p,_=(p=x.vs)===null||p===void 0?void 0:p.map(function(E){return y[E]?y[E].vs:E});x.vs=_.flat()})},M=function(A,y){A.barycenter!==void 0?(A.barycenter=(A.barycenter*A.weight+y.barycenter*y.weight)/(A.weight+y.weight),A.weight+=y.weight):(A.barycenter=y.barycenter,A.weight=y.weight)};R.default=H},21498:function(Se,R,et){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var ft=et(69209),nt=function(H,F,M,A){var y=(0,ft.partition)(H,function(g){var v=g.hasOwnProperty("fixorder")&&!isNaN(g.fixorder);return A?!v&&g.hasOwnProperty("barycenter"):v||g.hasOwnProperty("barycenter")}),x=y.lhs,p=y.rhs.sort(function(g,v){return-g.i- -v.i}),_=[],E=0,b=0,k=0;x==null||x.sort(z(!!F,!!M)),k=V(_,p,k),x==null||x.forEach(function(g){var v;k+=(v=g.vs)===null||v===void 0?void 0:v.length,_.push(g.vs),E+=g.barycenter*g.weight,b+=g.weight,k=V(_,p,k)});var N={vs:_.flat()};return b&&(N.barycenter=E/b,N.weight=b),N},V=function(H,F,M){for(var A=M,y;F.length&&(y=F[F.length-1]).i<=A;)F.pop(),H==null||H.push(y.vs),A++;return A},z=function(H,F){return function(M,A){if(M.fixorder!==void 0&&A.fixorder!==void 0)return M.fixorder-A.fixorder;if(M.barycenter<A.barycenter)return-1;if(M.barycenter>A.barycenter)return 1;if(F&&M.order!==void 0&&A.order!==void 0){if(M.order<A.order)return-1;if(M.order>A.order)return 1}return H?A.i-M.i:M.i-A.i}};R.default=nt},33562:function(Se,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var et=function(V){var z,H={},F=0,M=function(A){var y,x=F;(y=V.children(A))===null||y===void 0||y.forEach(M),H[A]={low:x,lim:F++}};return(z=V.children())===null||z===void 0||z.forEach(M),H},ft=function(V,z,H,F){var M=[],A=[],y=Math.min(z[H].low,z[F].low),x=Math.max(z[H].lim,z[F].lim),p,_;p=H;do p=V.parent(p),M.push(p);while(p&&(z[p].low>y||x>z[p].lim));for(_=p,p=F;p&&p!==_;)A.push(p),p=V.parent(p);return{lca:_,path:M.concat(A.reverse())}},nt=function(V){var z,H=et(V);(z=V.graph().dummyChains)===null||z===void 0||z.forEach(function(F){var M,A,y=F,x=V.node(y),p=x.edgeObj;if(p)for(var _=ft(V,H,p.v,p.w),E=_.path,b=_.lca,k=0,N=E[k],g=!0;y!==p.w;){if(x=V.node(y),g){for(;N!==b&&((M=V.node(N))===null||M===void 0?void 0:M.maxRank)<x.rank;)k++,N=E[k];N===b&&(g=!1)}if(!g){for(;k<E.length-1&&((A=V.node(E[k+1]))===null||A===void 0?void 0:A.minRank)<=x.rank;)k++;N=E[k]}V.setParent(y,N),y=V.successors(y)[0]}})};R.default=nt},71963:function(Se,R,et){"use strict";var ft=this&&this.__extends||function(){var B=function(G,Y){return B=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(j,Q){j.__proto__=Q}||function(j,Q){for(var Z in Q)Object.prototype.hasOwnProperty.call(Q,Z)&&(j[Z]=Q[Z])},B(G,Y)};return function(G,Y){if(typeof Y!="function"&&Y!==null)throw new TypeError("Class extends value "+String(Y)+" is not a constructor or null");B(G,Y);function j(){this.constructor=G}G.prototype=Y===null?Object.create(Y):(j.prototype=Y.prototype,new j)}}();Object.defineProperty(R,"__esModule",{value:!0}),R.width=R.sep=R.positionX=R.balance=R.alignCoordinates=R.findSmallestWidthAlignment=R.buildBlockGraph=R.horizontalCompaction=R.verticalAlignment=R.hasConflict=R.addConflict=R.findOtherInnerSegmentNode=R.findType2Conflicts=R.findType1Conflicts=void 0;var nt=et(99905),V=et(11707),z=et(69209),H=function(B){ft(G,B);function G(){return B!==null&&B.apply(this,arguments)||this}return G}(nt.Graph),F=function(B,G){var Y={},j=function(Q,Z){var rt=0,ut=0,ht=Q.length,kt=Z==null?void 0:Z[(Z==null?void 0:Z.length)-1];return Z==null||Z.forEach(function(At,Ht){var Rt,le=(0,R.findOtherInnerSegmentNode)(B,At),dt=le?B.node(le).order:ht;(le||At===kt)&&((Rt=Z.slice(ut,Ht+1))===null||Rt===void 0||Rt.forEach(function(ot){var yt;(yt=B.predecessors(ot))===null||yt===void 0||yt.forEach(function(Lt){var Ot,Wt=B.node(Lt),Jt=Wt.order;(Jt<rt||dt<Jt)&&!(Wt.dummy&&(!((Ot=B.node(ot))===null||Ot===void 0)&&Ot.dummy))&&(0,R.addConflict)(Y,Lt,ot)})}),ut=Ht+1,rt=dt)}),Z};return G!=null&&G.length&&G.reduce(j),Y};R.findType1Conflicts=F;var M=function(B,G){var Y={};function j(ut,ht,kt,At,Ht){for(var Rt,le,dt,ot=ht;ot<kt;ot++)dt=ut[ot],!((Rt=B.node(dt))===null||Rt===void 0)&&Rt.dummy&&((le=B.predecessors(dt))===null||le===void 0||le.forEach(function(yt){var Lt=B.node(yt);Lt.dummy&&(Lt.order<At||Lt.order>Ht)&&(0,R.addConflict)(Y,yt,dt)}))}function Q(ut){return JSON.stringify(ut.slice(1))}function Z(ut,ht){var kt=Q(ut);ht.get(kt)||(j.apply(void 0,ut),ht.set(kt,!0))}var rt=function(ut,ht){var kt=-1,At,Ht=0,Rt=new Map;return ht==null||ht.forEach(function(le,dt){var ot;if(((ot=B.node(le))===null||ot===void 0?void 0:ot.dummy)==="border"){var yt=B.predecessors(le)||[];yt.length&&(At=B.node(yt[0]).order,Z([ht,Ht,dt,kt,At],Rt),Ht=dt,kt=At)}Z([ht,Ht,ht.length,At,ut.length],Rt)}),ht};return G!=null&&G.length&&G.reduce(rt),Y};R.findType2Conflicts=M;var A=function(B,G){var Y,j;if(!((Y=B.node(G))===null||Y===void 0)&&Y.dummy)return(j=B.predecessors(G))===null||j===void 0?void 0:j.find(function(Q){return B.node(Q).dummy})};R.findOtherInnerSegmentNode=A;var y=function(B,G,Y){var j=G,Q=Y;if(j>Q){var Z=j;j=Q,Q=Z}var rt=B[j];rt||(B[j]=rt={}),rt[Q]=!0};R.addConflict=y;var x=function(B,G,Y){var j=G,Q=Y;if(j>Q){var Z=G;j=Q,Q=Z}return!!B[j]};R.hasConflict=x;var p=function(B,G,Y,j){var Q={},Z={},rt={};return G==null||G.forEach(function(ut){ut==null||ut.forEach(function(ht,kt){Q[ht]=ht,Z[ht]=ht,rt[ht]=kt})}),G==null||G.forEach(function(ut){var ht=-1;ut==null||ut.forEach(function(kt){var At=j(kt);if(At.length){At=At.sort(function(ot,yt){return rt[ot]-rt[yt]});for(var Ht=(At.length-1)/2,Rt=Math.floor(Ht),le=Math.ceil(Ht);Rt<=le;++Rt){var dt=At[Rt];Z[kt]===kt&&ht<rt[dt]&&!(0,R.hasConflict)(Y,kt,dt)&&(Z[dt]=kt,Z[kt]=Q[kt]=Q[dt],ht=rt[dt])}}})}),{root:Q,align:Z}};R.verticalAlignment=p;var _=function(B,G,Y,j,Q){var Z,rt={},ut=(0,R.buildBlockGraph)(B,G,Y,Q),ht=Q?"borderLeft":"borderRight",kt=function(Rt,le){for(var dt=ut.nodes(),ot=dt.pop(),yt={};ot;)yt[ot]?Rt(ot):(yt[ot]=!0,dt.push(ot),dt=dt.concat(le(ot))),ot=dt.pop()},At=function(Rt){rt[Rt]=(ut.inEdges(Rt)||[]).reduce(function(le,dt){return Math.max(le,(rt[dt.v]||0)+ut.edge(dt))},0)},Ht=function(Rt){var le=(ut.outEdges(Rt)||[]).reduce(function(ot,yt){return Math.min(ot,(rt[yt.w]||0)-ut.edge(yt))},Number.POSITIVE_INFINITY),dt=B.node(Rt);le!==Number.POSITIVE_INFINITY&&dt.borderType!==ht&&(rt[Rt]=Math.max(rt[Rt],le))};return kt(At,ut.predecessors.bind(ut)),kt(Ht,ut.successors.bind(ut)),(Z=Object.values(j))===null||Z===void 0||Z.forEach(function(Rt){rt[Rt]=rt[Y[Rt]]}),rt};R.horizontalCompaction=_;var E=function(B,G,Y,j){var Q=new H,Z=B.graph(),rt=(0,R.sep)(Z.nodesep,Z.edgesep,j);return G==null||G.forEach(function(ut){var ht;ut==null||ut.forEach(function(kt){var At=Y[kt];if(Q.setNode(At),ht){var Ht=Y[ht],Rt=Q.edgeFromArgs(Ht,At);Q.setEdge(Ht,At,Math.max(rt(B,kt,ht),Rt||0))}ht=kt})}),Q};R.buildBlockGraph=E;var b=function(B,G){return(0,z.minBy)(Object.values(G),function(Y){var j,Q=Number.NEGATIVE_INFINITY,Z=Number.POSITIVE_INFINITY;return(j=Object.keys(Y))===null||j===void 0||j.forEach(function(rt){var ut=Y[rt],ht=(0,R.width)(B,rt)/2;Q=Math.max(ut+ht,Q),Z=Math.min(ut-ht,Z)}),Q-Z})};R.findSmallestWidthAlignment=b;function k(B,G){var Y=Object.values(G),j=(0,V.min)(Y),Q=(0,V.max)(Y);["u","d"].forEach(function(Z){["l","r"].forEach(function(rt){var ut=Z+rt,ht=B[ut],kt;if(ht!==G){var At=Object.values(ht);kt=rt==="l"?j-(0,V.min)(At):Q-(0,V.max)(At),kt&&(B[ut]={},Object.keys(ht).forEach(function(Ht){B[ut][Ht]=ht[Ht]+kt}))}})})}R.alignCoordinates=k;var N=function(B,G){var Y={};return Object.keys(B.ul).forEach(function(j){if(G)Y[j]=B[G.toLowerCase()][j];else{var Q=Object.values(B).map(function(Z){return Z[j]});Y[j]=(Q[0]+Q[1])/2}}),Y};R.balance=N;var g=function(B){var G=(0,z.buildLayerMatrix)(B),Y=Object.assign((0,R.findType1Conflicts)(B,G),(0,R.findType2Conflicts)(B,G)),j={},Q;["u","d"].forEach(function(rt){Q=rt==="u"?G:Object.values(G).reverse(),["l","r"].forEach(function(ut){ut==="r"&&(Q=Q.map(function(Ht){return Object.values(Ht).reverse()}));var ht=(rt==="u"?B.predecessors:B.successors).bind(B),kt=(0,R.verticalAlignment)(B,Q,Y,ht),At=(0,R.horizontalCompaction)(B,Q,kt.root,kt.align,ut==="r");ut==="r"&&Object.keys(At).forEach(function(Ht){At[Ht]=-At[Ht]}),j[rt+ut]=At})});var Z=(0,R.findSmallestWidthAlignment)(B,j);return k(j,Z),(0,R.balance)(j,B.graph().align)};R.positionX=g;var v=function(B,G,Y){return function(j,Q,Z){var rt=j.node(Q),ut=j.node(Z),ht=0,kt;if(ht+=rt.width/2,rt.hasOwnProperty("labelpos"))switch((rt.labelpos||"").toLowerCase()){case"l":kt=-rt.width/2;break;case"r":kt=rt.width/2;break}if(kt&&(ht+=Y?kt:-kt),kt=0,ht+=(rt.dummy?G:B)/2,ht+=(ut.dummy?G:B)/2,ht+=ut.width/2,ut.labelpos)switch((ut.labelpos||"").toLowerCase()){case"l":kt=ut.width/2;break;case"r":kt=-ut.width/2;break}return kt&&(ht+=Y?kt:-kt),kt=0,ht}};R.sep=v;var K=function(B,G){return B.node(G).width||0};R.width=K},95:function(Se,R,et){"use strict";var ft=this&&this.__spreadArray||function(M,A,y){if(y||arguments.length===2)for(var x=0,p=A.length,_;x<p;x++)(_||!(x in A))&&(_||(_=Array.prototype.slice.call(A,0,x)),_[x]=A[x]);return M.concat(_||Array.prototype.slice.call(A))};Object.defineProperty(R,"__esModule",{value:!0});var nt=et(69209),V=et(71963),z=function(M){var A=(0,nt.buildLayerMatrix)(M),y=M.graph().ranksep,x=0;A==null||A.forEach(function(p){var _=p.map(function(b){return M.node(b).height}),E=Math.max.apply(Math,ft(ft([],_,!1),[0],!1));p==null||p.forEach(function(b){M.node(b).y=x+E/2}),x+=E+y})},H=function(M){var A=(0,nt.buildLayerMatrix)(M),y=Object.assign((0,V.findType1Conflicts)(M,A),(0,V.findType2Conflicts)(M,A)),x={},p=[];["u","d"].forEach(function(E){p=E==="u"?A:Object.values(A).reverse(),["l","r"].forEach(function(b){b==="r"&&(p=p.map(function(v){return Object.values(v).reverse()}));var k=(E==="u"?M.predecessors:M.successors).bind(M),N=(0,V.verticalAlignment)(M,p,y,k),g=(0,V.horizontalCompaction)(M,p,N.root,N.align,b==="r");b==="r"&&Object.keys(g).forEach(function(v){return g[v]=-g[v]}),x[E+b]=g})});var _=(0,V.findSmallestWidthAlignment)(M,x);return _&&(0,V.alignCoordinates)(x,_),(0,V.balance)(x,M.graph().align)},F=function(M){var A,y=(0,nt.asNonCompoundGraph)(M);z(y);var x=H(y);(A=Object.keys(x))===null||A===void 0||A.forEach(function(p){y.node(p).x=x[p]})};R.default=F},13614:function(Se,R,et){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.feasibleTreeWithLayer=R.feasibleTree=void 0;var ft=et(37323),nt=et(69209),V=et(27652),z=function(x){var p=new V.Graph({directed:!1}),_=x.nodes()[0],E=x.nodeCount();p.setNode(_,{});for(var b,k;H(p,x)<E;)b=A(p,x),k=p.hasNode(b.v)?(0,ft.slack)(x,b):-(0,ft.slack)(x,b),y(p,x,k);return p};R.feasibleTree=z;var H=function(x,p){var _=function(E){p.nodeEdges(E).forEach(function(b){var k=b.v,N=E===k?b.w:k;!x.hasNode(N)&&!(0,ft.slack)(p,b)&&(x.setNode(N,{}),x.setEdge(E,N,{}),_(N))})};return x.nodes().forEach(_),x.nodeCount()},F=function(x){var p=new V.Graph({directed:!1}),_=x.nodes()[0],E=x.nodes().filter(function(N){return!!x.node(N)}).length;p.setNode(_,{});for(var b,k;M(p,x)<E;)b=A(p,x),k=p.hasNode(b.v)?(0,ft.slack)(x,b):-(0,ft.slack)(x,b),y(p,x,k);return p};R.feasibleTreeWithLayer=F;var M=function(x,p){var _=function(E){var b;(b=p.nodeEdges(E))===null||b===void 0||b.forEach(function(k){var N=k.v,g=E===N?k.w:N;!x.hasNode(g)&&(p.node(g).layer!==void 0||!(0,ft.slack)(p,k))&&(x.setNode(g,{}),x.setEdge(E,g,{}),_(g))})};return x.nodes().forEach(_),x.nodeCount()},A=function(x,p){return(0,nt.minBy)(p.edges(),function(_){return x.hasNode(_.v)!==x.hasNode(_.w)?(0,ft.slack)(p,_):1/0})},y=function(x,p,_){x.nodes().forEach(function(E){p.node(E).rank||(p.node(E).rank=0),p.node(E).rank+=_})};R.default={feasibleTree:z,feasibleTreeWithLayer:F}},76827:function(Se,R,et){"use strict";var ft=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(R,"__esModule",{value:!0});var nt=et(37323),V=et(13614),z=ft(et(32253)),H=function(y){switch(y.graph().ranker){case"network-simplex":A(y);break;case"tight-tree":M(y);break;case"longest-path":F(y);break;default:M(y)}},F=nt.longestPath,M=function(y){(0,nt.longestPathWithLayer)(y),(0,V.feasibleTreeWithLayer)(y)},A=function(y){(0,z.default)(y)};R.default=H},32253:function(Se,R,et){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.exchangeEdges=R.enterEdge=R.leaveEdge=R.initLowLimValues=R.calcCutValue=R.initCutValues=void 0;var ft=et(13614),nt=et(37323),V=et(69209),z=et(99905),H=z.algorithm.preorder,F=z.algorithm.postorder,M=function(K){var B=(0,V.simplify)(K);(0,nt.longestPath)(B);var G=(0,ft.feasibleTree)(B);(0,R.initLowLimValues)(G),(0,R.initCutValues)(G,B);for(var Y,j;Y=(0,R.leaveEdge)(G);)j=(0,R.enterEdge)(G,B,Y),(0,R.exchangeEdges)(G,B,Y,j)},A=function(K,B){var G=F(K,K.nodes());G=G==null?void 0:G.slice(0,(G==null?void 0:G.length)-1),G==null||G.forEach(function(Y){y(K,B,Y)})};R.initCutValues=A;var y=function(K,B,G){var Y=K.node(G),j=Y.parent;K.edgeFromArgs(G,j).cutvalue=(0,R.calcCutValue)(K,B,G)},x=function(K,B,G){var Y,j=K.node(G),Q=j.parent,Z=!0,rt=B.edgeFromArgs(G,Q),ut=0;return rt||(Z=!1,rt=B.edgeFromArgs(Q,G)),ut=rt.weight,(Y=B.nodeEdges(G))===null||Y===void 0||Y.forEach(function(ht){var kt=ht.v===G,At=kt?ht.w:ht.v;if(At!==Q){var Ht=kt===Z,Rt=B.edge(ht).weight;if(ut+=Ht?Rt:-Rt,g(K,G,At)){var le=K.edgeFromArgs(G,At).cutvalue;ut+=Ht?-le:le}}}),ut};R.calcCutValue=x;var p=function(K,B){B===void 0&&(B=K.nodes()[0]),_(K,{},1,B)};R.initLowLimValues=p;var _=function(K,B,G,Y,j){var Q,Z=G,rt=G,ut=K.node(Y);return B[Y]=!0,(Q=K.neighbors(Y))===null||Q===void 0||Q.forEach(function(ht){B[ht]||(rt=_(K,B,rt,ht,Y))}),ut.low=Z,ut.lim=rt++,j?ut.parent=j:delete ut.parent,rt},E=function(K){return K.edges().find(function(B){return K.edge(B).cutvalue<0})};R.leaveEdge=E;var b=function(K,B,G){var Y=G.v,j=G.w;B.hasEdge(Y,j)||(Y=G.w,j=G.v);var Q=K.node(Y),Z=K.node(j),rt=Q,ut=!1;Q.lim>Z.lim&&(rt=Z,ut=!0);var ht=B.edges().filter(function(kt){return ut===v(K,K.node(kt.v),rt)&&ut!==v(K,K.node(kt.w),rt)});return(0,V.minBy)(ht,function(kt){return(0,nt.slack)(B,kt)})};R.enterEdge=b;var k=function(K,B,G,Y){var j=G.v,Q=G.w;K.removeEdge(j,Q),K.setEdge(Y.v,Y.w,{}),(0,R.initLowLimValues)(K),(0,R.initCutValues)(K,B),N(K,B)};R.exchangeEdges=k;var N=function(K,B){var G=K.nodes().find(function(j){var Q;return!(!((Q=B.node(j))===null||Q===void 0)&&Q.parent)}),Y=H(K,G);Y=Y==null?void 0:Y.slice(1),Y==null||Y.forEach(function(j){var Q=K.node(j).parent,Z=B.edgeFromArgs(j,Q),rt=!1;Z||(Z=B.edgeFromArgs(Q,j),rt=!0),B.node(j).rank=B.node(Q).rank+(rt?Z.minlen:-Z.minlen)})},g=function(K,B,G){return K.hasEdge(B,G)},v=function(K,B,G){return G.low<=B.lim&&B.lim<=G.lim};R.default=M},37323:function(Se,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.slack=R.longestPathWithLayer=R.longestPath=void 0;var et=function(V){var z,H={},F=function(M){var A,y=V.node(M);if(!y)return 0;if(H[M])return y.rank;H[M]=!0;var x;return(A=V.outEdges(M))===null||A===void 0||A.forEach(function(p){var _=F(p.w),E=V.edge(p).minlen,b=_-E;b&&(x===void 0||b<x)&&(x=b)}),x||(x=0),y.rank=x,x};(z=V.sources())===null||z===void 0||z.forEach(function(M){return F(M)})};R.longestPath=et;var ft=function(V){var z,H={},F,M=function(x){var p,_=V.node(x);if(!_)return 0;if(H[x])return _.rank;H[x]=!0;var E;return(p=V.outEdges(x))===null||p===void 0||p.forEach(function(b){var k=M(b.w),N=V.edge(b).minlen,g=k-N;g&&(E===void 0||g<E)&&(E=g)}),E||(E=0),(F===void 0||E<F)&&(F=E),_.rank=E,E};(z=V.sources())===null||z===void 0||z.forEach(function(x){V.node(x)&&M(x)}),F===void 0&&(F=0);var A={},y=function(x,p){var _,E=V.node(x),b=isNaN(E.layer)?p:E.layer;(E.rank===void 0||E.rank<b)&&(E.rank=b),!A[x]&&(A[x]=!0,(_=V.outEdges(x))===null||_===void 0||_.map(function(k){y(k.w,b+V.edge(k).minlen)}))};V.nodes().forEach(function(x){var p=V.node(x);p&&(isNaN(p.layer)?p.rank-=F:y(x,p.layer))})};R.longestPathWithLayer=ft;var nt=function(V,z){return V.node(z.w).rank-V.node(z.v).rank-V.edge(z).minlen};R.slack=nt,R.default={longestPath:et,longestPathWithLayer:ft,slack:nt}},69209:function(Se,R,et){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.minBy=R.notime=R.time=R.partition=R.maxRank=R.addBorderNode=R.removeEmptyRanks=R.normalizeRanks=R.buildLayerMatrix=R.intersectRect=R.predecessorWeights=R.successorWeights=R.zipObject=R.asNonCompoundGraph=R.simplify=R.addDummyNode=void 0;var ft=et(49784),nt=et(27652),V=function(B,G){return Number(B)-Number(G)},z=function(B,G,Y,j){var Q;do Q="".concat(j).concat(Math.random());while(B.hasNode(Q));return Y.dummy=G,B.setNode(Q,Y),Q};R.addDummyNode=z;var H=function(B){var G=new nt.Graph().setGraph(B.graph());return B.nodes().forEach(function(Y){G.setNode(Y,B.node(Y))}),B.edges().forEach(function(Y){var j=G.edgeFromArgs(Y.v,Y.w)||{weight:0,minlen:1},Q=B.edge(Y);G.setEdge(Y.v,Y.w,{weight:j.weight+Q.weight,minlen:Math.max(j.minlen,Q.minlen)})}),G};R.simplify=H;var F=function(B){var G=new nt.Graph({multigraph:B.isMultigraph()}).setGraph(B.graph());return B.nodes().forEach(function(Y){var j;!((j=B.children(Y))===null||j===void 0)&&j.length||G.setNode(Y,B.node(Y))}),B.edges().forEach(function(Y){G.setEdgeObj(Y,B.edge(Y))}),G};R.asNonCompoundGraph=F;var M=function(B,G){return B==null?void 0:B.reduce(function(Y,j,Q){return Y[j]=G[Q],Y},{})};R.zipObject=M;var A=function(B){var G={};return B.nodes().forEach(function(Y){var j,Q={};(j=B.outEdges(Y))===null||j===void 0||j.forEach(function(Z){var rt;Q[Z.w]=(Q[Z.w]||0)+(((rt=B.edge(Z))===null||rt===void 0?void 0:rt.weight)||0)}),G[Y]=Q}),G};R.successorWeights=A;var y=function(B){var G=B.nodes(),Y=G.map(function(j){var Q,Z={};return(Q=B.inEdges(j))===null||Q===void 0||Q.forEach(function(rt){Z[rt.v]=(Z[rt.v]||0)+B.edge(rt).weight}),Z});return(0,R.zipObject)(G,Y)};R.predecessorWeights=y;var x=function(B,G){var Y=Number(B.x),j=Number(B.y),Q=Number(G.x)-Y,Z=Number(G.y)-j,rt=Number(B.width)/2,ut=Number(B.height)/2;if(!Q&&!Z)return{x:0,y:0};var ht,kt;return Math.abs(Z)*rt>Math.abs(Q)*ut?(Z<0&&(ut=-ut),ht=ut*Q/Z,kt=ut):(Q<0&&(rt=-rt),ht=rt,kt=rt*Z/Q),{x:Y+ht,y:j+kt}};R.intersectRect=x;var p=function(B){for(var G=[],Y=(0,R.maxRank)(B)+1,j=0;j<Y;j++)G.push([]);B.nodes().forEach(function(Q){var Z=B.node(Q);if(Z){var rt=Z.rank;rt!==void 0&&G[rt]&&G[rt].push(Q)}});for(var j=0;j<Y;j++)G[j]=G[j].sort(function(Z,rt){var ut,ht;return V((ut=B.node(Z))===null||ut===void 0?void 0:ut.order,(ht=B.node(rt))===null||ht===void 0?void 0:ht.order)});return G};R.buildLayerMatrix=p;var _=function(B){var G=B.nodes().filter(function(j){var Q;return((Q=B.node(j))===null||Q===void 0?void 0:Q.rank)!==void 0}).map(function(j){return B.node(j).rank}),Y=Math.min.apply(Math,G);B.nodes().forEach(function(j){var Q=B.node(j);Q.hasOwnProperty("rank")&&Y!==1/0&&(Q.rank-=Y)})};R.normalizeRanks=_;var E=function(B){var G=B.nodes(),Y=G.filter(function(kt){var At;return((At=B.node(kt))===null||At===void 0?void 0:At.rank)!==void 0}).map(function(kt){return B.node(kt).rank}),j=Math.min.apply(Math,Y),Q=[];G.forEach(function(kt){var At,Ht=(((At=B.node(kt))===null||At===void 0?void 0:At.rank)||0)-j;Q[Ht]||(Q[Ht]=[]),Q[Ht].push(kt)});for(var Z=0,rt=B.graph().nodeRankFactor||0,ut=0;ut<Q.length;ut++){var ht=Q[ut];ht===void 0?ut%rt!==0&&(Z-=1):Z&&(ht==null||ht.forEach(function(kt){var At=B.node(kt);At&&(At.rank=At.rank||0,At.rank+=Z)}))}};R.removeEmptyRanks=E;var b=function(B,G,Y,j){var Q={width:0,height:0};return(0,ft.isNumber)(Y)&&(0,ft.isNumber)(j)&&(Q.rank=Y,Q.order=j),(0,R.addDummyNode)(B,"border",Q,G)};R.addBorderNode=b;var k=function(B){var G;return B.nodes().forEach(function(Y){var j,Q=(j=B.node(Y))===null||j===void 0?void 0:j.rank;Q!==void 0&&(G===void 0||Q>G)&&(G=Q)}),G||(G=0),G};R.maxRank=k;var N=function(B,G){var Y={lhs:[],rhs:[]};return B==null||B.forEach(function(j){G(j)?Y.lhs.push(j):Y.rhs.push(j)}),Y};R.partition=N;var g=function(B,G){var Y=Date.now();try{return G()}finally{console.log("".concat(B," time: ").concat(Date.now()-Y,"ms"))}};R.time=g;var v=function(B,G){return G()};R.notime=v;var K=function(B,G){return B.reduce(function(Y,j){var Q=G(Y),Z=G(j);return Q>Z?j:Y})};R.minBy=K},77057:function(Se,R,et){"use strict";var ft=this&&this.__extends||function(){var A=function(y,x){return A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,_){p.__proto__=_}||function(p,_){for(var E in _)Object.prototype.hasOwnProperty.call(_,E)&&(p[E]=_[E])},A(y,x)};return function(y,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");A(y,x);function p(){this.constructor=y}y.prototype=x===null?Object.create(x):(p.prototype=x.prototype,new p)}}(),nt=this&&this.__assign||function(){return nt=Object.assign||function(A){for(var y,x=1,p=arguments.length;x<p;x++){y=arguments[x];for(var _ in y)Object.prototype.hasOwnProperty.call(y,_)&&(A[_]=y[_])}return A},nt.apply(this,arguments)},V=this&&this.__spreadArray||function(A,y,x){if(x||arguments.length===2)for(var p=0,_=y.length,E;p<_;p++)(E||!(p in y))&&(E||(E=Array.prototype.slice.call(y,0,p)),E[p]=y[p]);return A.concat(E||Array.prototype.slice.call(y))};Object.defineProperty(R,"__esModule",{value:!0}),R.DagreCompoundLayout=void 0;var z=et(62329),H=et(31969),F=et(49784),M=function(A){ft(y,A);function y(x){var p=A.call(this)||this;return p.rankdir="TB",p.nodesep=50,p.edgesep=5,p.ranksep=50,p.controlPoints=!0,p.anchorPoint=!0,p.nodes=[],p.edges=[],p.combos=[],p.onLayoutEnd=function(){},p.updateCfg(x),p}return y.prototype.getDefaultCfg=function(){return{rankdir:"TB",align:void 0,begin:void 0,nodeSize:void 0,nodesep:50,ranksep:50,controlPoints:!0,anchorPoint:!0}},y.prototype.init=function(x){var p=x.hiddenNodes||[],_=x.hiddenEdges||[],E=x.hiddenCombos||[];this.nodes=this.getDataByOrder((x.nodes||[]).concat(p)),this.edges=this.getDataByOrder((x.edges||[]).concat(_)),this.combos=(x.combos||[]).concat(E.map(function(b){return nt(nt({},b),{collapsed:!0})}))},y.prototype.execute=function(){var x=this,p=x.nodes,_=x.edges;if(p){var E=x.getLayoutConfig(),b=E.graphDef,k=E.graphOption,N=E.graphSettings,g=(0,H.buildGraph)(b,k,N),v=(0,H.flatGraph)(g,!0);return this.updatePosition(v),x.onLayoutEnd&&x.onLayoutEnd(),{nodes:p,edges:_}}},y.prototype.getNodePath=function(x){var p=this,_=p.nodes,E=p.combos,b=_.find(function(N){return N.id===x}),k=function(N,g){g===void 0&&(g=[]);var v=E.find(function(K){return K.id===N});return v?(g.unshift(N),v.parentId?k(v.parentId,g):g):g};return b&&b.comboId?k(b.comboId,[x]):[x]},y.prototype.getLayoutConfig=function(){var x,p,_,E=this,b=E.nodes,k=E.edges,N=E.combos,g=E.nodeSize,v=E.rankdir,K=E.align,B=E.edgesep,G=E.nodesep,Y=E.ranksep,j=E.settings,Q=(N||[]).reduce(function(Jt,De){var te=b.filter(function(me){return me.comboId===De.id}).map(function(me){return me.id}),oe=(N||[]).filter(function(me){return me.parentId===De.id}).map(function(me){return me.id});return(te.length||oe.length)&&(Jt[De.id]=V(V([],te,!0),oe,!0)),Jt},{}),Z;g?(0,F.isArray)(g)?Z=function(){return g}:Z=function(){return[g,g]}:Z=function(Jt){return Jt&&Jt.size?(0,F.isArray)(Jt.size)?Jt.size:(0,F.isObject)(Jt.size)?[Jt.size.width||40,Jt.size.height||40]:[Jt.size,Jt.size]:[40,40]};var rt=function(Jt){return Jt&&Jt.size?(0,F.isArray)(Jt.size)?Jt.size:[Jt.size,Jt.size]:[80,40]},ut=rt(N==null?void 0:N[0]),ht=ut[0],kt=ut[1],At=(p=(x=E.graphSettings)===null||x===void 0?void 0:x.subScene)===null||p===void 0?void 0:p.meta,Ht=((_=N.find(function(Jt){return!Jt.collapsed}))===null||_===void 0?void 0:_.padding)||[20,20,20,20],Rt=Ht[0],le=Ht[1],dt=Ht[2],ot=Ht[3],yt={compound:Q,nodes:V([],(b||[]).map(function(Jt){var De=Z(Jt),te=De[0],oe=De[1];return nt(nt({},Jt),{width:te,height:oe})}),!0),edges:V([],(k||[]).map(function(Jt){return nt(nt({},Jt),{v:Jt.source,w:Jt.target})}),!0)},Lt={expanded:(N||[]).filter(function(Jt){return!Jt.collapsed}).map(function(Jt){return Jt.id})},Ot={graph:{meta:{align:K,rankDir:v,nodeSep:G,edgeSep:B,rankSep:Y}},subScene:{meta:{paddingTop:Rt||(At==null?void 0:At.paddingTop)||20,paddingRight:le||(At==null?void 0:At.paddingRight)||20,paddingBottom:dt||(At==null?void 0:At.paddingBottom)||20,paddingLeft:ot||(At==null?void 0:At.paddingLeft)||20,labelHeight:0}},nodeSize:{meta:{width:ht,height:kt}}},Wt=(0,H.mergeConfig)(j,nt({},(0,H.mergeConfig)(Ot,H.LAYOUT_CONFIG)));return E.graphSettings=Wt,{graphDef:yt,graphOption:Lt,graphSettings:Wt}},y.prototype.updatePosition=function(x){var p=x.nodes,_=x.edges;this.updateNodePosition(p,_),this.updateEdgePosition(p,_)},y.prototype.getBegin=function(x,p){var _=this,E=_.begin,b=[0,0];if(E){var k=1/0,N=1/0;x.forEach(function(g){k>g.x&&(k=g.x),N>g.y&&(N=g.y)}),p.forEach(function(g){g.points.forEach(function(v){k>v.x&&(k=v.x),N>v.y&&(N=v.y)})}),b[0]=E[0]-k,b[1]=E[1]-N}return b},y.prototype.updateNodePosition=function(x,p){var _=this,E=_.combos,b=_.nodes,k=_.edges,N=_.anchorPoint,g=_.graphSettings,v=this.getBegin(x,p);x.forEach(function(K){var B,G=K.x,Y=K.y,j=K.id,Q=K.type,Z=K.coreBox;if(Q===H.HierarchyNodeType.META&&j!==H.ROOT_NAME){var rt=E.findIndex(function(Ht){return Ht.id===j}),ut=(B=g==null?void 0:g.subScene)===null||B===void 0?void 0:B.meta;E[rt].offsetX=G+v[0],E[rt].offsetY=Y+v[1],E[rt].fixSize=[Z.width,Z.height],E[rt].fixCollapseSize=[Z.width,Z.height],K.expanded?E[rt].padding=[ut==null?void 0:ut.paddingTop,ut==null?void 0:ut.paddingRight,ut==null?void 0:ut.paddingBottom,ut==null?void 0:ut.paddingLeft]:E[rt].padding=[0,0,0,0]}else if(Q===H.HierarchyNodeType.OP){var rt=b.findIndex(function(Rt){return Rt.id===j});if(b[rt].x=G+v[0],b[rt].y=Y+v[1],N){var ht=[],kt=p.filter(function(Rt){return Rt.v===j}),At=p.filter(function(Rt){return Rt.w===j});kt.length>0&&kt.forEach(function(Rt){var le=Rt.points[0],dt=(le.x-G)/K.width+.5,ot=(le.y-Y)/K.height+.5;ht.push([dt,ot]),Rt.baseEdgeList.forEach(function(yt){var Lt=k.find(function(Ot){return Ot.source===yt.v&&Ot.target===yt.w});Lt&&(Lt.sourceAnchor=ht.length-1)})}),At.length>0&&At.forEach(function(Rt){var le=Rt.points[Rt.points.length-1],dt=(le.x-G)/K.width+.5,ot=(le.y-Y)/K.height+.5;ht.push([dt,ot]),Rt.baseEdgeList.forEach(function(yt){var Lt=k.find(function(Ot){return Ot.source===yt.v&&Ot.target===yt.w});Lt&&(Lt.targetAnchor=ht.length-1)})}),b[rt].anchorPoints=ht.length>0?ht:b[rt].anchorPoints||[]}}})},y.prototype.updateEdgePosition=function(x,p){var _=this,E=_.combos,b=_.edges,k=_.controlPoints,N=this.getBegin(x,p);k&&(E.forEach(function(g){g.inEdges=[],g.outEdges=[]}),b.forEach(function(g){var v,K,B,G,Y=x.find(function(Ht){return Ht.id===g.source}),j=x.find(function(Ht){return Ht.id===g.target}),Q=[],Z=[];if(Y&&j)Z=(0,H.getEdges)(Y==null?void 0:Y.id,j==null?void 0:j.id,x);else if(!Y||!j){var rt=_.getNodePath(g.source),ut=_.getNodePath(g.target),ht=rt.reverse().slice(Y?0:1).find(function(Ht){return x.find(function(Rt){return Rt.id===Ht})}),kt=ut.reverse().slice(j?0:1).find(function(Ht){return x.find(function(Rt){return Rt.id===Ht})});Y=x.find(function(Ht){return Ht.id===ht}),j=x.find(function(Ht){return Ht.id===kt}),Z=(0,H.getEdges)(Y==null?void 0:Y.id,j==null?void 0:j.id,x,{v:g.source,w:g.target})}if(Q=Z.reduce(function(Ht,Rt){return V(V([],Ht,!0),Rt.points.map(function(le){return nt(nt({},le),{x:le.x+N[0],y:le.y+N[1]})}),!0)},[]),Q=Q.slice(1,-1),g.controlPoints=Q,(j==null?void 0:j.type)===H.NodeType.META){var At=E.findIndex(function(Ht){return Ht.id===(j==null?void 0:j.id)});if(!E[At]||!((v=E[At].inEdges)===null||v===void 0)&&v.some(function(Ht){return Ht.source===Y.id&&Ht.target===j.id}))return;(K=E[At].inEdges)===null||K===void 0||K.push({source:Y.id,target:j.id,controlPoints:Q})}if((Y==null?void 0:Y.type)===H.NodeType.META){var At=E.findIndex(function(Rt){return Rt.id===(Y==null?void 0:Y.id)});if(!E[At]||!((B=E[At].outEdges)===null||B===void 0)&&B.some(function(Rt){return Rt.source===Y.id&&Rt.target===j.id}))return;(G=E[At].outEdges)===null||G===void 0||G.push({source:Y.id,target:j.id,controlPoints:Q})}}))},y.prototype.getType=function(){return"dagreCompound"},y.prototype.getDataByOrder=function(x){return x.every(function(p){return p.layoutOrder!==void 0})||x.forEach(function(p,_){p.layoutOrder=_}),x.sort(function(p,_){return p.layoutOrder-_.layoutOrder})},y}(z.Base);R.DagreCompoundLayout=M},34015:function(Se,R,et){"use strict";var ft=this&&this.__assign||function(){return ft=Object.assign||function(p){for(var _,E=1,b=arguments.length;E<b;E++){_=arguments[E];for(var k in _)Object.prototype.hasOwnProperty.call(_,k)&&(p[k]=_[k])}return p},ft.apply(this,arguments)},nt=this&&this.__createBinding||(Object.create?function(p,_,E,b){b===void 0&&(b=E);var k=Object.getOwnPropertyDescriptor(_,E);(!k||("get"in k?!_.__esModule:k.writable||k.configurable))&&(k={enumerable:!0,get:function(){return _[E]}}),Object.defineProperty(p,b,k)}:function(p,_,E,b){b===void 0&&(b=E),p[b]=_[E]}),V=this&&this.__setModuleDefault||(Object.create?function(p,_){Object.defineProperty(p,"default",{enumerable:!0,value:_})}:function(p,_){p.default=_}),z=this&&this.__importStar||function(p){if(p&&p.__esModule)return p;var _={};if(p!=null)for(var E in p)E!=="default"&&Object.prototype.hasOwnProperty.call(p,E)&&nt(_,p,E);return V(_,p),_},H=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(R,"__esModule",{value:!0});var F=z(et(86880)),M=H(et(88221)),A=H(et(87064)),y=et(20171);function x(p,_){var E=p.nodes,b=p.edges,k=_.width,N=_.height;if(!(E!=null&&E.length))return Promise.resolve();var g=[];E.forEach(function(Z){var rt=b.filter(function(ht){return ht.source===Z.id||ht.target===Z.id});if(rt.length>1){var ut=ft({},Z);delete ut.size,g.push(ut)}});var v=[];b.forEach(function(Z){var rt=g.find(function(ht){return ht.id===Z.source}),ut=g.find(function(ht){return ht.id===Z.target});rt&&ut&&v.push(Z)});var K=new y.DagreLayout({type:"dagre",ranksep:_.nodeMinGap,nodesep:_.nodeMinGap}),B=K.layout({nodes:g,edges:v}).nodes;E.forEach(function(Z){var rt=(B||[]).find(function(ut){return ut.id===Z.id});Z.x=(rt==null?void 0:rt.x)||k/2,Z.y=(rt==null?void 0:rt.y)||N/2});var G=JSON.parse(JSON.stringify(E)),Y=JSON.parse(JSON.stringify(b)),j=F.forceSimulation().nodes(G).force("link",F.forceLink(Y).id(function(Z){return Z.id}).distance(function(Z){var rt=v.find(function(ut){return ut.source===Z.source&&ut.target===Z.target});return rt?30:20})).force("charge",F.forceManyBody()).force("center",F.forceCenter(k/2,N/2)).force("x",F.forceX(k/2)).force("y",F.forceY(N/2)).alpha(.3).alphaDecay(.08).alphaMin(.001),Q=new Promise(function(Z){j.on("end",function(){E.forEach(function(Rt){var le=G.find(function(dt){return dt.id===Rt.id});le&&(Rt.x=le.x,Rt.y=le.y)});var rt=Math.min.apply(Math,E.map(function(Rt){return Rt.x})),ut=Math.max.apply(Math,E.map(function(Rt){return Rt.x})),ht=Math.min.apply(Math,E.map(function(Rt){return Rt.y})),kt=Math.max.apply(Math,E.map(function(Rt){return Rt.y})),At=k/(ut-rt),Ht=N/(kt-ht);E.forEach(function(Rt){Rt.x!==void 0&&At<1&&(Rt.x=(Rt.x-rt)*At),Rt.y!==void 0&&Ht<1&&(Rt.y=(Rt.y-ht)*Ht)}),E.forEach(function(Rt){Rt.sizeTemp=Rt.size,Rt.size=[10,10]}),(0,A.default)(E,b),E.forEach(function(Rt){Rt.size=Rt.sizeTemp||[],delete Rt.sizeTemp}),(0,M.default)({nodes:E,edges:b},_),Z()})});return Q}R.default=x},88221:function(Se,R,et){"use strict";var ft=this&&this.__importDefault||function(z){return z&&z.__esModule?z:{default:z}};Object.defineProperty(R,"__esModule",{value:!0});var nt=ft(et(28611));function V(z,H){if(!z.nodes||z.nodes.length===0)return z;var F=H.width,M=H.height,A=H.nodeMinGap,y=1e4,x=1e4;z.nodes.forEach(function(Y){var j=Y.size[0]||50,Q=Y.size[1]||50;y=Math.min(j,y),x=Math.min(Q,x)});var p=new nt.default;p.init(F,M,{CELL_H:x,CELL_W:y}),z.nodes.forEach(function(Y){var j=p.occupyNearest(Y);j&&(j.node={id:Y.id,size:Y.size},Y.x=j.x,Y.y=j.y,Y.dx=j.dx,Y.dy=j.dy)});for(var _=0;_<z.nodes.length;_++){var E=z.nodes[_],b=p.findGridByNodeId(E.id);if(!b)throw new Error("can not find node cell");var k=b.column,N=b.row;if(E.size[0]+A>y){for(var g=Math.ceil((E.size[0]+A)/y)-1,v=g,K=0;K<g;K++){var B=p.additionColumn.indexOf(k+K+1)>-1;if(B&&!p.cells[k+K+1][N].node)v--;else break}p.insertColumn(k,v)}if(E.size[1]+A>x){for(var g=Math.ceil((E.size[1]+A)/x)-1,v=g,K=0;K<g;K++){var B=p.additionRow.indexOf(N+K+1)>-1;if(B&&!p.cells[k][N+K+1].node)v--;else break}p.insertRow(N,v)}}for(var _=0;_<p.columnNum;_++)for(var G=function(j){var Q=p.cells[_][j];if(Q.node){var Z=z.nodes.find(function(rt){var ut;return rt.id===((ut=Q==null?void 0:Q.node)===null||ut===void 0?void 0:ut.id)});Z&&(Z.x=Q.x+Z.size[0]/2,Z.y=Q.y+Z.size[1]/2)}},K=0;K<p.rowNum;K++)G(K)}R.default=V},28611:function(Se,R){"use strict";var et=this&&this.__assign||function(){return et=Object.assign||function(nt){for(var V,z=1,H=arguments.length;z<H;z++){V=arguments[z];for(var F in V)Object.prototype.hasOwnProperty.call(V,F)&&(nt[F]=V[F])}return nt},et.apply(this,arguments)};Object.defineProperty(R,"__esModule",{value:!0});var ft=function(){function nt(){this.cells=[],this.columnNum=0,this.rowNum=0,this.additionColumn=[],this.additionRow=[]}return nt.prototype.init=function(V,z,H){this.cells=[],this.CELL_W=H.CELL_W||nt.DEFAULT_CELL_W,this.CELL_H=H.CELL_H||nt.DEFAULT_CELL_H,this.columnNum=Math.ceil(V/this.CELL_W),this.rowNum=Math.ceil(z/this.CELL_H),nt.MIN_DIST=Math.pow(V,2)+Math.pow(z,2);for(var F=0;F<this.columnNum;F++){for(var M=[],A=0;A<this.rowNum;A++){var y={dx:F,dy:A,x:F*this.CELL_W,y:A*this.CELL_H,occupied:!1};M.push(y)}this.cells.push(M)}},nt.prototype.findGridByNodeId=function(V){for(var z,H,F=0;F<this.columnNum;F++)for(var M=0;M<this.rowNum;M++)if(this.cells[F][M].node&&((H=(z=this.cells[F][M])===null||z===void 0?void 0:z.node)===null||H===void 0?void 0:H.id)===V)return{column:F,row:M};return null},nt.prototype.sqdist=function(V,z){return Math.pow(V.x-z.x,2)+Math.pow(V.y-z.y,2)},nt.prototype.occupyNearest=function(V){for(var z=nt.MIN_DIST,H,F=null,M=0;M<this.columnNum;M++)for(var A=0;A<this.rowNum;A++)!this.cells[M][A].occupied&&(H=this.sqdist(V,this.cells[M][A]))<z&&(z=H,F=this.cells[M][A]);return F&&(F.occupied=!0),F},nt.prototype.insertColumn=function(V,z){if(!(z<=0)){for(var H=0;H<z;H++){this.cells[H+this.columnNum]=[];for(var F=0;F<this.rowNum;F++)this.cells[H+this.columnNum][F]={dx:H,dy:F,x:H*this.CELL_W,y:F*this.CELL_H,occupied:!1,node:null}}for(var H=this.columnNum-1;H>V;H--)for(var F=0;F<this.rowNum;F++)this.cells[H+z][F]=et(et({},this.cells[H][F]),{x:(H+z)*this.CELL_W,y:F*this.CELL_H}),this.cells[H][F]={x:H*this.CELL_W,y:F*this.CELL_H,occupied:!0,node:null};for(var F=0;F<this.additionColumn.length;F++)this.additionColumn[F]>=V&&(this.additionColumn[F]+=z);for(var H=0;H<z;H++)this.additionColumn.push(V+H+1);this.columnNum+=z}},nt.prototype.insertRow=function(V,z){if(!(z<=0)){for(var H=0;H<z;H++)for(var F=0;F<this.columnNum;F++)this.cells[F][H+this.rowNum]={dx:F,dy:H,x:F*this.CELL_W,y:H*this.CELL_H,occupied:!1,node:null};for(var F=0;F<this.columnNum;F++)for(var H=this.rowNum-1;H>V;H--)this.cells[F][H+z]=et(et({},this.cells[F][H]),{dx:F,dy:H+z,x:F*this.CELL_W,y:(H+z)*this.CELL_H}),this.cells[F][H]={dx:F,dy:H,x:F*this.CELL_W,y:H*this.CELL_H,occupied:!1,node:null};for(var H=0;H<this.additionRow.length;H++)this.additionRow[H]>=V&&(this.additionRow[H]+=z);for(var F=0;F<z;F++)this.additionRow.push(V+F+1);this.rowNum+=z}},nt.prototype.getNodes=function(){for(var V=[],z=0;z<this.columnNum;z++)for(var H=0;H<this.rowNum;H++)this.cells[z][H].node&&V.push(this.cells[z][H]);return V},nt.MIN_DIST=50,nt.DEFAULT_CELL_W=80,nt.DEFAULT_CELL_H=80,nt}();R.default=ft},90441:function(Se,R,et){"use strict";var ft=this&&this.__extends||function(){var F=function(M,A){return F=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,x){y.__proto__=x}||function(y,x){for(var p in x)Object.prototype.hasOwnProperty.call(x,p)&&(y[p]=x[p])},F(M,A)};return function(M,A){if(typeof A!="function"&&A!==null)throw new TypeError("Class extends value "+String(A)+" is not a constructor or null");F(M,A);function y(){this.constructor=M}M.prototype=A===null?Object.create(A):(y.prototype=A.prototype,new y)}}(),nt=this&&this.__importDefault||function(F){return F&&F.__esModule?F:{default:F}};Object.defineProperty(R,"__esModule",{value:!0}),R.ERLayout=void 0;var V=et(62329),z=nt(et(34015)),H=function(F){ft(M,F);function M(A){var y=F.call(this)||this;return y.width=300,y.height=300,y.nodeMinGap=50,y.onLayoutEnd=function(){},A&&y.updateCfg(A),y}return M.prototype.getDefaultCfg=function(){return{width:300,height:300,nodeMinGap:50}},M.prototype.execute=function(){var A=this,y=A.nodes,x=A.edges;return y==null||y.forEach(function(p){p.size||(p.size=[50,50])}),(0,z.default)({nodes:y,edges:x},{width:this.width,height:this.height,nodeMinGap:this.nodeMinGap}).then(function(){A.onLayoutEnd&&A.onLayoutEnd()})},M.prototype.getType=function(){return"er"},M}(V.Base);R.ERLayout=H},87064:function(Se,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var et=1200,ft=800,nt=1e7,V=10,z=3.141592653589793,H=1.5707963267948966,F=z*.375,M=z*.625,A=new Map,y=10,x=10,p=.8,_=.1,E=.5;function b(G,Y,j){var Q=G.x-G.size[0]/2,Z=G.y-G.size[1]/2,rt=G.x+G.size[0]/2,ut=G.y+G.size[1]/2,ht=Y.x-Y.size[0]/2,kt=Y.y-Y.size[1]/2,At=Y.x+Y.size[0]/2,Ht=Y.y+Y.size[1]/2,Rt=G.x,le=G.y,dt=Y.x,ot=Y.y,yt=dt-Rt,Lt=Math.atan2(yt,ot-le),Ot=0,Wt=0,Jt=0,De=0;Lt>H?(Wt=Z-Ht,Ot=ht-rt,Jt=parseFloat(Wt?(Wt/Math.cos(Lt)).toFixed(2):Ot.toFixed(2)),De=parseFloat(Ot?(Ot/Math.sin(Lt)).toFixed(2):Wt.toFixed(2))):0<Lt&&Lt<=H?(Wt=kt-ut,Ot=ht-rt,Wt>Ot?Jt=De=parseFloat(Wt?(Wt/Math.cos(Lt)).toFixed(2):Ot.toFixed(2)):Jt=De=parseFloat(Ot?(Ot/Math.sin(Lt)).toFixed(2):Wt.toFixed(2))):Lt<-H?(Wt=Z-Ht,Ot=-(At-Q),Wt>Ot?Jt=De=parseFloat(Wt?(Wt/Math.cos(Lt)).toFixed(2):Ot.toFixed(2)):Jt=De=parseFloat(Ot?(Ot/Math.sin(Lt)).toFixed(2):Wt.toFixed(2))):(Wt=kt-ut,Math.abs(yt)>(rt-Q)/2?Ot=Q-At:Ot=yt,Wt>Ot?Jt=De=parseFloat(Wt?(Wt/Math.cos(Lt)).toFixed(2):Ot.toFixed(2)):Jt=De=parseFloat(Ot&&Lt!==0?(Ot/Math.sin(Lt)).toFixed(2):Wt.toFixed(2)));var te=parseFloat(Lt.toFixed(2)),oe=j;return j&&(oe=F<te&&te<M),{distance:Math.abs(Jt<De?Jt:De),isHoriz:oe}}function k(G,Y){var j=A.get(G.id)||[],Q=j.find(function(se){return se.source===Y.id||se.target===Y.id}),Z=G.size[0]*G.size[1],rt=Y.size[0]*Y.size[1],ut=Z>rt?Y:G,ht=Z>rt?G:Y,kt=ut.x-ut.size[0]/2,At=ut.y-ut.size[1]/2,Ht=ut.x+ut.size[0]/2,Rt=ut.y+ut.size[1]/2,le=ht.x-ht.size[0]/2,dt=ht.y-ht.size[1]/2,ot=ht.x+ht.size[0]/2,yt=ht.y+ht.size[1]/2,Lt=ut.x,Ot=ut.y,Wt=ht.x,Jt=ht.y,De=Ht>=le&&ot>=kt&&Rt>=dt&&yt>=At,te=0,oe=0;if(De){oe=Math.sqrt(Math.pow(Wt-Lt,2)+Math.pow(Jt-Ot,2));var me=kt>le?kt:le,Ce=At>dt?At:dt,_e=Ht<ot?Ht:ot,zt=Rt<yt?Rt:yt,ue=_e-me,Pe=zt-Ce,Xt=ue*Pe;oe===0&&(oe=1e-7),te=V*1/oe*100+Xt,te*=nt}else{var ie=!1,Ie=b(ut,ht,ie);oe=Ie.distance,ie=Ie.isHoriz,oe<=V?oe!==0?Q?te+=V+nt*1/oe:te+=V+nt*V/oe:te+=nt:(te+=oe,Q&&(te+=oe*oe))}return te}function N(G){for(var Y=0,j=0;j<G.length;j++){var Q=G[j];(Q.x<0||Q.y<0||Q.x>et||Q.y>ft)&&(Y+=1e12);for(var Z=j+1;Z<G.length;Z++)Y+=k(Q,G[Z])}return Y}function g(G,Y,j,Q){var Z=new Map;j.forEach(function(Lt,Ot){Z.set(Lt.id,Lt)});var rt=Q.filter(function(Lt){return Lt.source===G.id||Lt.target===G.id})||[],ut=[];rt.forEach(function(Lt){var Ot=Lt.source===G.id?Lt.target:Lt.source,Wt=Z.get(Ot);Wt&&ut.push(Wt)});for(var ht=!0,kt=0;kt<ut.length;kt++){var At=ut[kt],Ht=Math.atan((G.y-At.y)/(At.x-G.y))*180,Rt=Math.atan((Y.y-At.y)/(At.x-Y.y))*180,le=Ht<30||Ht>150,dt=Rt<30||Rt>150,ot=Ht>70&&Ht<110,yt=Rt>70&&Rt<110;if(le&&!dt||Ht*Rt<0){ht=!1;break}else if(ot&&!yt||Ht*Rt<0){ht=!1;break}else if((At.x-G.x)*(At.x-Y.x)<0){ht=!1;break}else if((At.y-G.y)*(At.y-Y.y)<0){ht=!1;break}}return ht}function v(G,Y){for(var j=!1,Q=1,Z=y*Q,rt=x*Q,ut=[Z,-Z,0,0],ht=[0,0,rt,-rt],kt=0;kt<G.length;++kt)for(var At=G[kt],Ht=K(At,G),Rt=0;Rt<ut.length;Rt++){var le=g(At,{x:At.x+ut[Rt],y:At.y+ht[Rt]},G,Y);if(le){At.x+=ut[Rt],At.y+=ht[Rt];var dt=K(At,G),ot=Math.random();dt<Ht||ot<p&&ot>_?(Ht=dt,j=!0):(At.x-=ut[Rt],At.y-=ht[Rt])}}return p>_&&(p*=E),j?N(G):0}function K(G,Y){var j=0;(G.x<0||G.y<0||G.x+G.size[0]+20>et||G.y+G.size[1]+20>ft)&&(j+=1e12);for(var Q=0;Q<Y.length;++Q)G.id!==Y[Q].id&&(j+=k(G,Y[Q]));return j}function B(G,Y){if(G.length===0)return{nodes:G,edges:Y};G.forEach(function(At){var Ht=Y.filter(function(Rt){return Rt.source===At.id||Rt.target===At.id});A.set(At,Ht)}),G.sort(function(At,Ht){var Rt,le;return((Rt=A.get(At.id))===null||Rt===void 0?void 0:Rt.length)-((le=A.get(Ht.id))===null||le===void 0?void 0:le.length)});for(var j=N(G),Q=20,Z=1,rt=0,ut=50,ht=0;Q>0&&(ht++,!(ht>=ut));){var kt=v(G,Y);kt!==0&&(rt=kt),Z=rt-j,j=rt,Z===0?--Q:Q=20}return G.forEach(function(At){At.x=At.x-At.size[0]/2,At.y=At.y-At.size[1]/2}),{nodes:G,edges:Y}}R.default=B},89806:function(Se,R,et){"use strict";var ft=this&&this.__createBinding||(Object.create?function(M,A,y,x){x===void 0&&(x=y);var p=Object.getOwnPropertyDescriptor(A,y);(!p||("get"in p?!A.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return A[y]}}),Object.defineProperty(M,x,p)}:function(M,A,y,x){x===void 0&&(x=y),M[x]=A[y]}),nt=this&&this.__setModuleDefault||(Object.create?function(M,A){Object.defineProperty(M,"default",{enumerable:!0,value:A})}:function(M,A){M.default=A}),V=this&&this.__importStar||function(M){if(M&&M.__esModule)return M;var A={};if(M!=null)for(var y in M)y!=="default"&&Object.prototype.hasOwnProperty.call(M,y)&&ft(A,M,y);return nt(A,M),A};Object.defineProperty(R,"__esModule",{value:!0});var z=V(et(86880)),H=et(49784);function F(){function M(zt){return function(){return zt}}var A=function(zt){return zt.cluster},y=M(1),x=M(-1),p=M(100),_=M(.1),E=[0,0],b=[],k={},N=[],g=100,v=100,K={none:{x:0,y:0}},B=[],G,Y="force",j=!0,Q=.1;function Z(zt){if(!j)return Z;G.tick(),Ht();for(var ue=0,Pe=b.length,Xt=void 0,ie=zt*Q;ue<Pe;++ue)Xt=b[ue],Xt.vx+=(K[A(Xt)].x-Xt.x)*ie,Xt.vy+=(K[A(Xt)].y-Xt.y)*ie}function rt(){b&&ut()}function ut(){if(!(!b||!b.length)){if(A(b[0])===void 0)throw Error("Couldnt find the grouping attribute for the nodes. Make sure to set it up with forceInABox.groupBy('clusterAttr') before calling .links()");var zt=ht();G=z.forceSimulation(zt.nodes).force("x",z.forceX(g).strength(.1)).force("y",z.forceY(v).strength(.1)).force("collide",z.forceCollide(function(ue){return ue.r}).iterations(4)).force("charge",z.forceManyBody().strength(x)).force("links",z.forceLink(zt.nodes.length?zt.links:[]).distance(p).strength(_)),B=G.nodes(),Ht()}}function ht(){var zt=[],ue=[],Pe={},Xt=[],ie={},Ie=[];return ie=kt(b),Ie=At(N),Xt=Object.keys(ie),Xt.forEach(function(se,Te){var Be=ie[se];zt.push({id:se,size:Be.count,r:Math.sqrt(Be.sumforceNodeSize/Math.PI)}),Pe[se]=Te}),Ie.forEach(function(se){var Te=(0,H.getEdgeTerminal)(se,"source"),Be=(0,H.getEdgeTerminal)(se,"target"),Tt=Pe[Te],nr=Pe[Be];Tt!==void 0&&nr!==void 0&&ue.push({source:Tt,target:nr,count:se.count})}),{nodes:zt,links:ue}}function kt(zt){var ue={};return zt.forEach(function(Pe){var Xt=A(Pe);ue[Xt]||(ue[Xt]={count:0,sumforceNodeSize:0})}),zt.forEach(function(Pe){var Xt=A(Pe),ie=y(Pe),Ie=ue[Xt];Ie.count=Ie.count+1,Ie.sumforceNodeSize=Ie.sumforceNodeSize+Math.PI*(ie*ie)*1.3,ue[Xt]=Ie}),ue}function At(zt){var ue={},Pe=[];zt.forEach(function(ie){var Ie=Rt(ie),se=0;ue[Ie]!==void 0&&(se=ue[Ie]),se+=1,ue[Ie]=se});var Xt=Object.entries(ue);return Xt.forEach(function(ie){var Ie=ie[0],se=ie[1],Te=Ie.split("~")[0],Be=Ie.split("~")[1];Te!==void 0&&Be!==void 0&&Pe.push({source:Te,target:Be,count:se})}),Pe}function Ht(){return K={none:{x:0,y:0}},B.forEach(function(zt){K[zt.id]={x:zt.x-E[0],y:zt.y-E[1]}}),K}function Rt(zt){var ue=(0,H.getEdgeTerminal)(zt,"source"),Pe=(0,H.getEdgeTerminal)(zt,"target"),Xt=A(k[ue]),ie=A(k[Pe]);return Xt<=ie?"".concat(Xt,"~").concat(ie):"".concat(ie,"~").concat(Xt)}function le(zt){k={},zt.forEach(function(ue){k[ue.id]=ue})}function dt(zt){return arguments.length?(Y=zt,rt(),Z):Y}function ot(zt){return arguments.length?typeof zt=="string"?(A=function(ue){return ue[zt]},Z):(A=zt,Z):A}function yt(zt){return arguments.length?(j=zt,Z):j}function Lt(zt){return arguments.length?(Q=zt,Z):Q}function Ot(zt){return arguments.length?(g=zt,Z):g}function Wt(zt){return arguments.length?(v=zt,Z):v}function Jt(zt){return arguments.length?(le(zt||[]),b=zt||[],Z):b}function De(zt){return arguments.length?(N=zt||[],rt(),Z):N}function te(zt){return arguments.length?(typeof zt=="function"?y=zt:y=M(+zt),rt(),Z):y}function oe(zt){return arguments.length?(typeof zt=="function"?x=zt:x=M(+zt),rt(),Z):x}function me(zt){return arguments.length?(typeof zt=="function"?p=zt:p=M(+zt),rt(),Z):p}function Ce(zt){return arguments.length?(typeof zt=="function"?_=zt:_=M(+zt),rt(),Z):_}function _e(zt){return arguments.length?(E=zt,Z):E}return Z.initialize=function(zt){b=zt,rt()},Z.template=dt,Z.groupBy=ot,Z.enableGrouping=yt,Z.strength=Lt,Z.centerX=Ot,Z.centerY=Wt,Z.nodes=Jt,Z.links=De,Z.forceNodeSize=te,Z.nodeSize=Z.forceNodeSize,Z.forceCharge=oe,Z.forceLinkDistance=me,Z.forceLinkStrength=Ce,Z.offset=_e,Z.getFocis=Ht,Z}R.default=F},8810:function(Se,R,et){"use strict";var ft=this&&this.__extends||function(){var b=function(k,N){return b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,v){g.__proto__=v}||function(g,v){for(var K in v)Object.prototype.hasOwnProperty.call(v,K)&&(g[K]=v[K])},b(k,N)};return function(k,N){if(typeof N!="function"&&N!==null)throw new TypeError("Class extends value "+String(N)+" is not a constructor or null");b(k,N);function g(){this.constructor=k}k.prototype=N===null?Object.create(N):(g.prototype=N.prototype,new g)}}(),nt=this&&this.__createBinding||(Object.create?function(b,k,N,g){g===void 0&&(g=N);var v=Object.getOwnPropertyDescriptor(k,N);(!v||("get"in v?!k.__esModule:v.writable||v.configurable))&&(v={enumerable:!0,get:function(){return k[N]}}),Object.defineProperty(b,g,v)}:function(b,k,N,g){g===void 0&&(g=N),b[g]=k[N]}),V=this&&this.__setModuleDefault||(Object.create?function(b,k){Object.defineProperty(b,"default",{enumerable:!0,value:k})}:function(b,k){b.default=k}),z=this&&this.__importStar||function(b){if(b&&b.__esModule)return b;var k={};if(b!=null)for(var N in b)N!=="default"&&Object.prototype.hasOwnProperty.call(b,N)&&nt(k,b,N);return V(k,b),k},H=this&&this.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(R,"__esModule",{value:!0}),R.ForceLayout=void 0;var F=z(et(86880)),M=H(et(89806)),A=et(49784),y=et(62329),x=et(16470),p=function(b){ft(k,b);function k(N){var g=b.call(this)||this;return g.center=[0,0],g.nodeStrength=null,g.edgeStrength=null,g.preventOverlap=!1,g.clusterNodeStrength=null,g.clusterEdgeStrength=null,g.clusterEdgeDistance=null,g.clusterNodeSize=null,g.clusterFociStrength=null,g.linkDistance=50,g.alphaDecay=.028,g.alphaMin=.001,g.alpha=.3,g.collideStrength=1,g.workerEnabled=!1,g.tick=function(){},g.onLayoutEnd=function(){},g.ticking=void 0,N&&g.updateCfg(N),g}return k.prototype.getDefaultCfg=function(){return{center:[0,0],nodeStrength:null,edgeStrength:null,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,linkDistance:50,forceSimulation:null,alphaDecay:.028,alphaMin:.001,alpha:.3,collideStrength:1,clustering:!1,clusterNodeStrength:-1,clusterEdgeStrength:.1,clusterEdgeDistance:100,clusterFociStrength:.8,clusterNodeSize:10,tick:function(){},onLayoutEnd:function(){},workerEnabled:!1}},k.prototype.init=function(N){var g=this;g.nodes=N.nodes||[];var v=N.edges||[];g.edges=v.map(function(K){var B={},G=["targetNode","sourceNode","startPoint","endPoint"];return Object.keys(K).forEach(function(Y){G.indexOf(Y)>-1||(B[Y]=K[Y])}),B}),g.ticking=!1},k.prototype.execute=function(N){var g=this,v=g.nodes,K=g.edges;if(!g.ticking){var B=g.forceSimulation,G=g.alphaMin,Y=g.alphaDecay,j=g.alpha;if(B){if(N){if(g.clustering&&g.clusterForce&&(g.clusterForce.nodes(v),g.clusterForce.links(K)),B.nodes(v),K&&g.edgeForce)g.edgeForce.links(K);else if(K&&!g.edgeForce){var rt=F.forceLink().id(function(At){return At.id}).links(K);g.edgeStrength&&rt.strength(g.edgeStrength),g.linkDistance&&rt.distance(g.linkDistance),g.edgeForce=rt,B.force("link",rt)}}g.preventOverlap&&g.overlapProcess(B),B.alpha(j).restart(),this.ticking=!0}else try{var Q=F.forceManyBody();if(g.nodeStrength&&Q.strength(g.nodeStrength),B=F.forceSimulation().nodes(v),g.clustering){var Z=(0,M.default)();Z.centerX(g.center[0]).centerY(g.center[1]).template("force").strength(g.clusterFociStrength),K&&Z.links(K),v&&Z.nodes(v),Z.forceLinkDistance(g.clusterEdgeDistance).forceLinkStrength(g.clusterEdgeStrength).forceCharge(g.clusterNodeStrength).forceNodeSize(g.clusterNodeSize),g.clusterForce=Z,B.force("group",Z)}if(B.force("center",F.forceCenter(g.center[0],g.center[1])).force("charge",Q).alpha(j).alphaDecay(Y).alphaMin(G),g.preventOverlap&&g.overlapProcess(B),K){var rt=F.forceLink().id(function(kt){return kt.id}).links(K);g.edgeStrength&&rt.strength(g.edgeStrength),g.linkDistance&&rt.distance(g.linkDistance),g.edgeForce=rt,B.force("link",rt)}if(g.workerEnabled&&!E()&&(g.workerEnabled=!1,console.warn("workerEnabled option is only supported when running in web worker.")),!g.workerEnabled)B.on("tick",function(){g.tick()}).on("end",function(){g.ticking=!1,g.onLayoutEnd&&g.onLayoutEnd()}),g.ticking=!0;else{B.stop();for(var ut=_(B),ht=1;ht<=ut;ht++)B.tick(),postMessage({nodes:v,currentTick:ht,totalTicks:ut,type:x.LAYOUT_MESSAGE.TICK},void 0);g.ticking=!1}g.forceSimulation=B,g.ticking=!0}catch(kt){g.ticking=!1,console.warn(kt)}}},k.prototype.overlapProcess=function(N){var g=this,v=g.nodeSize,K=g.nodeSpacing,B,G,Y=g.collideStrength;if((0,A.isNumber)(K)?G=function(){return K}:(0,A.isFunction)(K)?G=K:G=function(){return 0},!v)B=function(rt){if(rt.size){if((0,A.isArray)(rt.size)){var ut=rt.size[0]>rt.size[1]?rt.size[0]:rt.size[1];return ut/2+G(rt)}if((0,A.isObject)(rt.size)){var ut=rt.size.width>rt.size.height?rt.size.width:rt.size.height;return ut/2+G(rt)}return rt.size/2+G(rt)}return 10+G(rt)};else if((0,A.isFunction)(v))B=function(rt){var ut=v(rt);return ut+G(rt)};else if((0,A.isArray)(v)){var j=v[0]>v[1]?v[0]:v[1],Q=j/2;B=function(rt){return Q+G(rt)}}else if((0,A.isNumber)(v)){var Z=v/2;B=function(rt){return Z+G(rt)}}else B=function(){return 10};N.force("collisionForce",F.forceCollide(B).strength(Y))},k.prototype.updateCfg=function(N){var g=this;g.ticking&&(g.forceSimulation.stop(),g.ticking=!1),g.forceSimulation=null,Object.assign(g,N)},k.prototype.destroy=function(){var N=this;N.ticking&&(N.forceSimulation.stop(),N.ticking=!1),N.nodes=null,N.edges=null,N.destroyed=!0},k}(y.Base);R.ForceLayout=p;function _(b){var k=b.alphaMin(),N=b.alphaTarget(),g=b.alpha(),v=Math.log((k-N)/(g-N))/Math.log(1-b.alphaDecay()),K=Math.ceil(v);return K}function E(){return typeof WorkerGlobalScope!="undefined"&&self instanceof WorkerGlobalScope}},85717:function(Se,R,et){"use strict";var ft=this&&this.__createBinding||(Object.create?function(V,z,H,F){F===void 0&&(F=H);var M=Object.getOwnPropertyDescriptor(z,H);(!M||("get"in M?!z.__esModule:M.writable||M.configurable))&&(M={enumerable:!0,get:function(){return z[H]}}),Object.defineProperty(V,F,M)}:function(V,z,H,F){F===void 0&&(F=H),V[F]=z[H]}),nt=this&&this.__exportStar||function(V,z){for(var H in V)H!=="default"&&!Object.prototype.hasOwnProperty.call(z,H)&&ft(z,V,H)};Object.defineProperty(R,"__esModule",{value:!0}),nt(et(8810),R)},91019:function(Se,R,et){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.forceNBody=void 0;var ft=et(71829),nt=.81,V=.1;function z(A,y,x,p,_){var E=x/p,b=A.map(function(N,g){var v=y[N.id],K=v.data,B=v.x,G=v.y,Y=v.size,j=K.layout.force.nodeStrength;return{x:B,y:G,size:Y,index:g,vx:0,vy:0,weight:E*j}}),k=(0,ft.quadtree)(b,function(N){return N.x},function(N){return N.y}).visitAfter(H);return b.forEach(function(N){M(N,k)}),b.map(function(N,g){var v=y[A[g].id],K=v.data.layout.force.mass,B=K===void 0?1:K;_[2*g]=N.vx/B,_[2*g+1]=N.vy/B}),_}R.forceNBody=z;function H(A){var y=0,x=0,p=0;if(A.length){for(var _=0;_<4;_++){var E=A[_];E&&E.weight&&(y+=E.weight,x+=E.x*E.weight,p+=E.y*E.weight)}A.x=x/y,A.y=p/y,A.weight=y}else{var E=A;A.x=E.data.x,A.y=E.data.y,A.weight=E.data.weight}}var F=function(A,y,x,p,_,E){var b=E.x-A.x||V,k=E.y-A.y||V,N=p-y,g=b*b+k*k,v=Math.sqrt(g)*g;if(N*N*nt<g){var K=A.weight/v;return E.vx+=b*K,E.vy+=k*K,!0}if(A.length)return!1;if(A.data!==E){var K=A.data.weight/v;E.vx+=b*K,E.vy+=k*K}};function M(A,y){y.visit(function(x,p,_,E,b){return F(x,p,_,E,b,A)})}},6740:function(Se,R,et){"use strict";var ft=this&&this.__extends||function(){var A=function(y,x){return A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,_){p.__proto__=_}||function(p,_){for(var E in _)Object.prototype.hasOwnProperty.call(_,E)&&(p[E]=_[E])},A(y,x)};return function(y,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");A(y,x);function p(){this.constructor=y}y.prototype=x===null?Object.create(x):(p.prototype=x.prototype,new p)}}(),nt=this&&this.__assign||function(){return nt=Object.assign||function(A){for(var y,x=1,p=arguments.length;x<p;x++){y=arguments[x];for(var _ in y)Object.prototype.hasOwnProperty.call(y,_)&&(A[_]=y[_])}return A},nt.apply(this,arguments)};Object.defineProperty(R,"__esModule",{value:!0}),R.Force2Layout=void 0;var V=et(62329),z=et(49784),H=et(91019),F=function(A,y){var x;return A?(0,z.isNumber)(A)?x=function(p){return A}:x=A:x=function(p){return y||1},x},M=function(A){ft(y,A);function y(x){var p=A.call(this)||this;p.maxIteration=1e3,p.workerEnabled=!1,p.edgeStrength=200,p.nodeStrength=1e3,p.coulombDisScale=.005,p.damping=.9,p.maxSpeed=500,p.minMovement=.4,p.interval=.02,p.factor=1,p.linkDistance=200,p.gravity=0,p.clusterNodeStrength=20,p.preventOverlap=!0,p.distanceThresholdMode="mean",p.tick=function(){},p.nodes=[],p.edges=[],p.width=300,p.height=300,p.nodeMap={},p.nodeIdxMap={},p.judgingDistance=0,p.centripetalOptions={leaf:2,single:2,others:1,center:function(E){return{x:p.width/2,y:p.height/2}}};var _=x.getMass;return p.propsGetMass=_,p.updateCfg(x),p}return y.prototype.getCentripetalOptions=function(){var x=this,p=x.leafCluster,_=x.clustering,E=x.nodeClusterBy,b=x.nodes,k=x.nodeMap,N=x.clusterNodeStrength,g=function(ut){return typeof N=="function"?N(ut):N},v={},K;if(p){K=this.getSameTypeLeafMap()||{};var B=Array.from(new Set(b==null?void 0:b.map(function(ut){return ut[E]})))||[];v={single:100,leaf:function(ut,ht,kt){var At=K[ut.id]||{},Ht=At.relativeLeafNodes,Rt=At.sameTypeLeafNodes;return(Rt==null?void 0:Rt.length)===(Ht==null?void 0:Ht.length)||(B==null?void 0:B.length)===1?1:g(ut)},others:1,center:function(ut,ht,kt){var At,Ht=(((At=ut.data)===null||At===void 0?void 0:At.layout)||{}).degree;if(!Ht)return{x:100,y:100};var Rt;if(Ht===1){var le=(K[ut.id]||{}).sameTypeLeafNodes,dt=le===void 0?[]:le;dt.length===1?Rt=void 0:dt.length>1&&(Rt=(0,z.getAvgNodePosition)(dt))}else Rt=void 0;return{x:Rt==null?void 0:Rt.x,y:Rt==null?void 0:Rt.y}}}}if(_){K||(K=this.getSameTypeLeafMap());var G=Array.from(new Set(b.map(function(ut,ht){return ut[E]}))).filter(function(ut){return ut!==void 0}),Y={};G.forEach(function(ut){var ht=b.filter(function(kt){return kt[E]===ut}).map(function(kt){return k[kt.id]});Y[ut]=(0,z.getAvgNodePosition)(ht)}),v={single:function(ut){return g(ut)},leaf:function(ut){return g(ut)},others:function(ut){return g(ut)},center:function(ut,ht,kt){var At=Y[ut[E]];return{x:At==null?void 0:At.x,y:At==null?void 0:At.y}}}}this.centripetalOptions=nt(nt({},this.centripetalOptions),v);var j=this.centripetalOptions,Q=j.leaf,Z=j.single,rt=j.others;Q&&typeof Q!="function"&&(this.centripetalOptions.leaf=function(){return Q}),Z&&typeof Z!="function"&&(this.centripetalOptions.single=function(){return Z}),rt&&typeof rt!="function"&&(this.centripetalOptions.others=function(){return rt})},y.prototype.updateCfg=function(x){x&&Object.assign(this,x)},y.prototype.getDefaultCfg=function(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}},y.prototype.execute=function(){var x=this;x.stop();var p=x.nodes,_=x.edges,E=x.defSpringLen;if(x.judgingDistance=0,!p||p.length===0){x.onLayoutEnd([]);return}!x.width&&typeof window!="undefined"&&(x.width=window.innerWidth),!x.height&&typeof window!="undefined"&&(x.height=window.innerHeight),x.center||(x.center=[x.width/2,x.height/2]);var b=x.center;if(p.length===1){p[0].x=b[0],p[0].y=b[1],x.onLayoutEnd([nt({},p[0])]);return}x.degreesMap=(0,z.getDegreeMap)(p,_),x.propsGetMass?x.getMass=x.propsGetMass:x.getMass=function(G){var Y=1;(0,z.isNumber)(G.mass)&&(Y=G.mass);var j=x.degreesMap[G.id].all;return!j||j<5?Y:j*5*Y};var k=x.nodeSize,N;if(x.preventOverlap){var g=x.nodeSpacing,v;(0,z.isNumber)(g)?v=function(){return g}:(0,z.isFunction)(g)?v=g:v=function(){return 0},k?(0,z.isArray)(k)?N=function(G){return Math.max(k[0],k[1])+v(G)}:N=function(G){return k+v(G)}:N=function(G){return G.size?(0,z.isArray)(G.size)?Math.max(G.size[0],G.size[1])+v(G):(0,z.isObject)(G.size)?Math.max(G.size.width,G.size.height)+v(G):G.size+v(G):10+v(G)}}x.nodeSize=N,x.linkDistance=F(x.linkDistance,1),x.nodeStrength=F(x.nodeStrength,1),x.edgeStrength=F(x.edgeStrength,1);var K={},B={};p.forEach(function(G,Y){(0,z.isNumber)(G.x)||(G.x=Math.random()*x.width),(0,z.isNumber)(G.y)||(G.y=Math.random()*x.height);var j=x.degreesMap[G.id];K[G.id]=nt(nt({},G),{data:nt(nt({},G.data),{size:x.nodeSize(G)||30,layout:{inDegree:j.in,outDegree:j.out,degree:j.all,tDegree:j.in,sDegree:j.out,force:{mass:x.getMass(G),nodeStrength:x.nodeStrength(G,_)}}})}),B[G.id]=Y}),x.nodeMap=K,x.nodeIdxMap=B,x.edgeInfos=[],_==null||_.forEach(function(G){var Y=K[G.source],j=K[G.target];!Y||!j?elf.edgeInfos.push({}):x.edgeInfos.push({edgeStrength:x.edgeStrength(G),linkDistance:E?E(nt(nt({},G),{source:Y,target:j}),Y,j):x.linkDistance(G,Y,j)||1+(k(Y)+k(Y)||0)/2})}),this.getCentripetalOptions(),x.onLayoutEnd=x.onLayoutEnd||function(){},x.run()},y.prototype.run=function(){var x=this,p=x.maxIteration,_=x.nodes,E=x.edges,b=x.workerEnabled,k=x.minMovement,N=x.animate,g=x.nodeMap,v=x.height;if(x.currentMinY=0,x.currentMaxY=v,!!_){var K=[];if(_.forEach(function(rt,ut){K[2*ut]=0,K[2*ut+1]=0}),this.defSideCoe&&typeof this.defSideCoe=="function"){var B={};E.forEach(function(rt){var ut=rt.source,ht=rt.target;B[ut]=B[ut]||[],B[ut].push(rt),B[ht]=B[ht]||[],B[ht].push(rt)}),this.relatedEdges=B}var G=p,Y=!N;if(b||Y){for(var j=0,Q=0;(x.judgingDistance>k||Q<1)&&Q<G;Q++)j=Q,x.runOneStep(Q,K);x.onLayoutEnd(Object.values(g))}else{if(typeof window=="undefined")return;var Z=0;this.timeInterval=window.setInterval(function(){_&&(x.runOneStep(Z,K),Z++,(Z>=G||x.judgingDistance<k)&&(x.onLayoutEnd(Object.values(g)),window.clearInterval(x.timeInterval)))},0)}}},y.prototype.runOneStep=function(x,p){var _,E=this,b=E.nodes,k=E.edges,N=E.nodeMap,g=E.monitor,v=[];if(b!=null&&b.length){E.calRepulsive(v),k&&E.calAttractive(v),E.calGravity(v),E.attractToSide(v);var K=E.interval;if(E.updateVelocity(v,p,K),E.updatePosition(p,K),(_=E.tick)===null||_===void 0||_.call(E),g){var B=this.calTotalEnergy(v);g({energy:B,nodes:b,edges:k,iterations:x})}}},y.prototype.calTotalEnergy=function(x){var p=this,_=p.nodes,E=p.nodeMap;if(!(_!=null&&_.length))return 0;var b=0;return _.forEach(function(k,N){var g=x[2*N],v=x[2*N+1],K=g*g+v*v,B=E[k.id].data.layout.force.mass,G=B===void 0?1:B;b+=G*K*.5}),b},y.prototype.calRepulsive=function(x){var p=this,_=p.nodes,E=p.nodeMap,b=p.factor,k=p.coulombDisScale,N=p.nodeSize;(0,H.forceNBody)(_,E,b,k*k,x)},y.prototype.calAttractive=function(x){var p=this,_=p.edges,E=p.nodeMap,b=p.nodeIdxMap,k=p.edgeInfos,N=p.nodeSize;_.forEach(function(g,v){var K=(0,z.getEdgeTerminal)(g,"source"),B=(0,z.getEdgeTerminal)(g,"target"),G=E[K],Y=E[B];if(!(!G||!Y)){var j=Y.x-G.x,Q=Y.y-G.y;!j&&!Q&&(j=Math.random()*.01,Q=Math.random()*.01);var Z=Math.sqrt(j*j+Q*Q),rt=j/Z,ut=Q/Z,ht=k[v]||{},kt=ht.linkDistance,At=kt===void 0?200:kt,Ht=ht.edgeStrength,Rt=Ht===void 0?200:Ht,le=At-Z,dt=le*Rt,ot=G.data.layout.force.mass||1,yt=Y.data.layout.force.mass||1,Lt=1/ot,Ot=1/yt,Wt=rt*dt,Jt=ut*dt,De=2*b[K],te=2*b[B];x[De]-=Wt*Lt,x[De+1]-=Jt*Lt,x[te]+=Wt*Ot,x[te+1]+=Jt*Ot}})},y.prototype.calGravity=function(x){var p,_=this,E=_.nodes,b=_.edges,k=b===void 0?[]:b,N=_.nodeMap,g=_.width,v=_.height,K=_.center,B=_.gravity,G=_.degreesMap,Y=_.centripetalOptions;if(E)for(var j=E.length,Q=0;Q<j;Q++){var Z=2*Q,rt=N[E[Q].id],ut=rt.data.layout.force.mass,ht=ut===void 0?1:ut,kt=0,At=0,Ht=B,Rt=G[rt.id],le=Rt.in,dt=Rt.out,ot=Rt.all,yt=(p=_.getCenter)===null||p===void 0?void 0:p.call(_,rt,ot);if(yt){var Lt=yt[0],Ot=yt[1],Wt=yt[2];kt=rt.x-Lt,At=rt.y-Ot,Ht=Wt}else kt=rt.x-K[0],At=rt.y-K[1];if(Ht&&(x[Z]-=Ht*kt/ht,x[Z+1]-=Ht*At/ht),Y){var Jt=Y.leaf,De=Y.single,te=Y.others,oe=Y.center,me=(oe==null?void 0:oe(rt,E,k,g,v))||{x:0,y:0,centerStrength:0},Ce=me.x,_e=me.y,zt=me.centerStrength;if(!(0,z.isNumber)(Ce)||!(0,z.isNumber)(_e))continue;var ue=(rt.x-Ce)/ht,Pe=(rt.y-_e)/ht;if(zt&&(x[Z]-=zt*ue,x[Z+1]-=zt*Pe),ot===0){var Xt=De(rt);if(!Xt)continue;x[Z]-=Xt*ue,x[Z+1]-=Xt*Pe;continue}if(le===0||dt===0){var ie=Jt(rt,E,k);if(!ie)continue;x[Z]-=ie*ue,x[Z+1]-=ie*Pe;continue}var Ie=te(rt);if(!Ie)continue;x[Z]-=Ie*ue,x[Z+1]-=Ie*Pe}}},y.prototype.attractToSide=function(x){var p=this,_=p.defSideCoe,E=p.height,b=p.nodes,k=p.relatedEdges,N=p.currentMinY,g=N===void 0?0:N,v=p.currentMaxY,K=v===void 0?this.height:v;!_||typeof _!="function"||!(b!=null&&b.length)||b.forEach(function(B,G){var Y=_(B,k[B.id]||[]);if(Y!==0){var j=Y<0?g:K,Q=Math.abs(Y);x[2*G+1]-=Q*(B.y-j)}})},y.prototype.updateVelocity=function(x,p,_){var E=this,b=E.nodes,k=E.damping,N=E.maxSpeed;b!=null&&b.length&&b.forEach(function(g,v){var K=(p[2*v]+x[2*v]*_)*k||.01,B=(p[2*v+1]+x[2*v+1]*_)*k||.01,G=Math.sqrt(K*K+B*B);if(G>N){var Y=N/G;K=Y*K,B=Y*B}p[2*v]=K,p[2*v+1]=B})},y.prototype.updatePosition=function(x,p){var _=this,E=_.nodes,b=_.distanceThresholdMode,k=_.nodeMap;if(!(E!=null&&E.length)){this.judgingDistance=0;return}var N=0;b==="max"?_.judgingDistance=-1/0:b==="min"&&(_.judgingDistance=1/0);var g=1/0,v=-1/0;E.forEach(function(K,B){var G=k[K.id];if((0,z.isNumber)(K.fx)&&(0,z.isNumber)(K.fy)){K.x=K.fx,K.y=K.fy,G.x=K.x,G.y=K.y;return}var Y=x[2*B]*p,j=x[2*B+1]*p;K.x+=Y,K.y+=j,G.x=K.x,G.y=K.y,K.y<g&&(g=K.y),K.y>v&&(v=K.y);var Q=Math.sqrt(Y*Y+j*j);switch(b){case"max":_.judgingDistance<Q&&(_.judgingDistance=Q);break;case"min":_.judgingDistance>Q&&(_.judgingDistance=Q);break;default:N=N+Q;break}}),this.currentMinY=g,this.currentMaxY=v,(!b||b==="mean")&&(_.judgingDistance=N/E.length)},y.prototype.stop=function(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)},y.prototype.destroy=function(){var x=this;x.stop(),x.tick=null,x.nodes=null,x.edges=null,x.destroyed=!0},y.prototype.getType=function(){return"force2"},y.prototype.getSameTypeLeafMap=function(){var x=this,p=x.nodeClusterBy,_=x.nodes,E=x.edges,b=x.nodeMap,k=x.degreesMap;if(_!=null&&_.length){var N={};return _.forEach(function(g,v){var K=k[g.id].all;K===1&&(N[g.id]=(0,z.getCoreNodeAndRelativeLeafNodes)("leaf",g,E,p,k,b))}),N}},y}(V.Base);R.Force2Layout=M},19712:function(Se,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var et=function(){function ft(nt){this.id=nt.id||0,this.rx=nt.rx,this.ry=nt.ry,this.fx=0,this.fy=0,this.mass=nt.mass,this.degree=nt.degree,this.g=nt.g||0}return ft.prototype.distanceTo=function(nt){var V=this.rx-nt.rx,z=this.ry-nt.ry;return Math.hypot(V,z)},ft.prototype.setPos=function(nt,V){this.rx=nt,this.ry=V},ft.prototype.resetForce=function(){this.fx=0,this.fy=0},ft.prototype.addForce=function(nt){var V=nt.rx-this.rx,z=nt.ry-this.ry,H=Math.hypot(V,z);H=H<1e-4?1e-4:H;var F=this.g*(this.degree+1)*(nt.degree+1)/H;this.fx+=F*V/H,this.fy+=F*z/H},ft.prototype.in=function(nt){return nt.contains(this.rx,this.ry)},ft.prototype.add=function(nt){var V=this.mass+nt.mass,z=(this.rx*this.mass+nt.rx*nt.mass)/V,H=(this.ry*this.mass+nt.ry*nt.mass)/V,F=this.degree+nt.degree,M={rx:z,ry:H,mass:V,degree:F};return new ft(M)},ft}();R.default=et},48564:function(Se,R,et){"use strict";var ft=this&&this.__extends||function(){var y=function(x,p){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,E){_.__proto__=E}||function(_,E){for(var b in E)Object.prototype.hasOwnProperty.call(E,b)&&(_[b]=E[b])},y(x,p)};return function(x,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");y(x,p);function _(){this.constructor=x}x.prototype=p===null?Object.create(p):(_.prototype=p.prototype,new _)}}(),nt=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(R,"__esModule",{value:!0}),R.ForceAtlas2Layout=void 0;var V=et(62329),z=et(49784),H=nt(et(19712)),F=nt(et(51638)),M=nt(et(62732)),A=function(y){ft(x,y);function x(p){var _=y.call(this)||this;return _.center=[0,0],_.width=300,_.height=300,_.nodes=[],_.edges=[],_.kr=5,_.kg=1,_.mode="normal",_.preventOverlap=!1,_.dissuadeHubs=!1,_.barnesHut=void 0,_.maxIteration=0,_.ks=.1,_.ksmax=10,_.tao=.1,_.onLayoutEnd=function(){},_.prune=void 0,_.updateCfg(p),_}return x.prototype.getDefaultCfg=function(){return{}},x.prototype.execute=function(){var p=this,_=p.nodes,E=p.onLayoutEnd,b=p.prune,k=p.maxIteration;!p.width&&typeof window!="undefined"&&(p.width=window.innerWidth),!p.height&&typeof window!="undefined"&&(p.height=window.innerHeight);for(var N=[],g=_.length,v=0;v<g;v+=1){var K=_[v],B=10,G=10;(0,z.isNumber)(K.size)&&(B=K.size,G=K.size),(0,z.isArray)(K.size)?(isNaN(K.size[0])||(B=K.size[0]),isNaN(K.size[1])||(G=K.size[1])):(0,z.isObject)(K.size)&&(B=K.size.width,G=K.size.height),p.getWidth&&!isNaN(p.getWidth(K))&&(G=p.getWidth(K)),p.getHeight&&!isNaN(p.getHeight(K))&&(B=p.getHeight(K));var Y=Math.max(B,G);N.push(Y)}p.barnesHut===void 0&&g>250&&(p.barnesHut=!0),p.prune===void 0&&g>100&&(p.prune=!0),this.maxIteration===0&&!p.prune?(k=250,g<=200&&g>100?k=1e3:g>200&&(k=1200),this.maxIteration=k):this.maxIteration===0&&b&&(k=100,g<=200&&g>100?k=500:g>200&&(k=950),this.maxIteration=k),p.kr||(p.kr=50,g>100&&g<=500?p.kr=20:g>500&&(p.kr=1)),p.kg||(p.kg=20,g>100&&g<=500?p.kg=10:g>500&&(p.kg=1)),this.nodes=p.updateNodesByForces(N),E()},x.prototype.updateNodesByForces=function(p){for(var _=this,E=_.edges,b=_.maxIteration,k=_.nodes,N=E.filter(function(Rt){var le=(0,z.getEdgeTerminal)(Rt,"source"),dt=(0,z.getEdgeTerminal)(Rt,"target");return le!==dt}),g=k.length,v=N.length,K=[],B={},G={},Y=[],j=0;j<g;j+=1)B[k[j].id]=j,K[j]=0,(k[j].x===void 0||isNaN(k[j].x))&&(k[j].x=Math.random()*1e3),(k[j].y===void 0||isNaN(k[j].y))&&(k[j].y=Math.random()*1e3),Y.push({x:k[j].x,y:k[j].y});for(var j=0;j<v;j+=1){for(var Q=void 0,Z=void 0,rt=0,ut=0,ht=0;ht<g;ht+=1){var kt=(0,z.getEdgeTerminal)(N[j],"source"),At=(0,z.getEdgeTerminal)(N[j],"target");k[ht].id===kt?(Q=k[ht],rt=ht):k[ht].id===At&&(Z=k[ht],ut=ht),G[j]={sourceIdx:rt,targetIdx:ut}}Q&&(K[B[Q.id]]+=1),Z&&(K[B[Z.id]]+=1)}var Ht=b;if(k=this.iterate(Ht,B,G,v,K,p),_.prune){for(var ht=0;ht<v;ht+=1)K[G[ht].sourceIdx]<=1?(k[G[ht].sourceIdx].x=k[G[ht].targetIdx].x,k[G[ht].sourceIdx].y=k[G[ht].targetIdx].y):K[G[ht].targetIdx]<=1&&(k[G[ht].targetIdx].x=k[G[ht].sourceIdx].x,k[G[ht].targetIdx].y=k[G[ht].sourceIdx].y);_.prune=!1,_.barnesHut=!1,Ht=100,k=this.iterate(Ht,B,G,v,K,p)}return k},x.prototype.iterate=function(p,_,E,b,k,N){for(var g=this,v=g.nodes,K=g.kr,B=g.preventOverlap,G=g.barnesHut,Y=v.length,j=0,Q=100,Z=p,rt=50,ut=[],ht=[],kt=[],At=0;At<Y;At+=1)if(ut[2*At]=0,ut[2*At+1]=0,G){var Ht={id:At,rx:v[At].x,ry:v[At].y,mass:1,g:K,degree:k[At]};kt[At]=new H.default(Ht)}for(;Z>0;){for(var At=0;At<Y;At+=1)ht[2*At]=ut[2*At],ht[2*At+1]=ut[2*At+1],ut[2*At]=0,ut[2*At+1]=0;ut=this.getAttrForces(Z,rt,b,_,E,k,N,ut),G&&(B&&Z>rt||!B)?ut=this.getOptRepGraForces(ut,kt,k):ut=this.getRepGraForces(Z,rt,ut,Q,N,k);var Rt=this.updatePos(ut,ht,j,k);v=Rt.nodes,j=Rt.sg,Z--,g.tick&&g.tick()}return v},x.prototype.getAttrForces=function(p,_,E,b,k,N,g,v){for(var K=this,B=K.nodes,G=K.preventOverlap,Y=K.dissuadeHubs,j=K.mode,Q=K.prune,Z=0;Z<E;Z+=1){var rt=B[k[Z].sourceIdx],ut=k[Z].sourceIdx,ht=B[k[Z].targetIdx],kt=k[Z].targetIdx;if(!(Q&&(N[ut]<=1||N[kt]<=1))){var At=[ht.x-rt.x,ht.y-rt.y],Ht=Math.hypot(At[0],At[1]);Ht=Ht<1e-4?1e-4:Ht,At[0]=At[0]/Ht,At[1]=At[1]/Ht,G&&p<_&&(Ht=Ht-g[ut]-g[kt]);var Rt=Ht,le=Rt;j==="linlog"&&(Rt=Math.log(1+Ht),le=Rt),Y&&(Rt=Ht/N[ut],le=Ht/N[kt]),G&&p<_&&Ht<=0?(Rt=0,le=0):G&&p<_&&Ht>0&&(Rt=Ht,le=Ht),v[2*b[rt.id]]+=Rt*At[0],v[2*b[ht.id]]-=le*At[0],v[2*b[rt.id]+1]+=Rt*At[1],v[2*b[ht.id]+1]-=le*At[1]}}return v},x.prototype.getRepGraForces=function(p,_,E,b,k,N){for(var g=this,v=g.nodes,K=g.preventOverlap,B=g.kr,G=g.kg,Y=g.center,j=g.prune,Q=v.length,Z=0;Z<Q;Z+=1){for(var rt=Z+1;rt<Q;rt+=1)if(!(j&&(N[Z]<=1||N[rt]<=1))){var ut=[v[rt].x-v[Z].x,v[rt].y-v[Z].y],ht=Math.hypot(ut[0],ut[1]);ht=ht<1e-4?1e-4:ht,ut[0]=ut[0]/ht,ut[1]=ut[1]/ht,K&&p<_&&(ht=ht-k[Z]-k[rt]);var kt=B*(N[Z]+1)*(N[rt]+1)/ht;K&&p<_&&ht<0?kt=b*(N[Z]+1)*(N[rt]+1):K&&p<_&&ht===0?kt=0:K&&p<_&&ht>0&&(kt=B*(N[Z]+1)*(N[rt]+1)/ht),E[2*Z]-=kt*ut[0],E[2*rt]+=kt*ut[0],E[2*Z+1]-=kt*ut[1],E[2*rt+1]+=kt*ut[1]}var At=[v[Z].x-Y[0],v[Z].y-Y[1]],Ht=Math.hypot(At[0],At[1]);At[0]=At[0]/Ht,At[1]=At[1]/Ht;var Rt=G*(N[Z]+1);E[2*Z]-=Rt*At[0],E[2*Z+1]-=Rt*At[1]}return E},x.prototype.getOptRepGraForces=function(p,_,E){for(var b=this,k=b.nodes,N=b.kg,g=b.center,v=b.prune,K=k.length,B=9e10,G=-9e10,Y=9e10,j=-9e10,Q=0;Q<K;Q+=1)v&&E[Q]<=1||(_[Q].setPos(k[Q].x,k[Q].y),k[Q].x>=G&&(G=k[Q].x),k[Q].x<=B&&(B=k[Q].x),k[Q].y>=j&&(j=k[Q].y),k[Q].y<=Y&&(Y=k[Q].y));for(var Z=Math.max(G-B,j-Y),rt={xmid:(G+B)/2,ymid:(j+Y)/2,length:Z,massCenter:g,mass:K},ut=new F.default(rt),ht=new M.default(ut),Q=0;Q<K;Q+=1)v&&E[Q]<=1||_[Q].in(ut)&&ht.insert(_[Q]);for(var Q=0;Q<K;Q+=1)if(!(v&&E[Q]<=1)){_[Q].resetForce(),ht.updateForce(_[Q]),p[2*Q]-=_[Q].fx,p[2*Q+1]-=_[Q].fy;var kt=[k[Q].x-g[0],k[Q].y-g[1]],At=Math.hypot(kt[0],kt[1]);At=At<1e-4?1e-4:At,kt[0]=kt[0]/At,kt[1]=kt[1]/At;var Ht=N*(E[Q]+1);p[2*Q]-=Ht*kt[0],p[2*Q+1]-=Ht*kt[1]}return p},x.prototype.updatePos=function(p,_,E,b){for(var k=this,N=k.nodes,g=k.ks,v=k.tao,K=k.prune,B=k.ksmax,G=N.length,Y=[],j=[],Q=0,Z=0,rt=0;rt<G;rt+=1)if(!(K&&b[rt]<=1)){var ut=[p[2*rt]-_[2*rt],p[2*rt+1]-_[2*rt+1]],ht=Math.hypot(ut[0],ut[1]),kt=[p[2*rt]+_[2*rt],p[2*rt+1]+_[2*rt+1]],At=Math.hypot(kt[0],kt[1]);Y[rt]=ht,j[rt]=At/2,Q+=(b[rt]+1)*Y[rt],Z+=(b[rt]+1)*j[rt]}var Ht=E;E=v*Z/Q,Ht!==0&&(E=E>1.5*Ht?1.5*Ht:E);for(var rt=0;rt<G;rt+=1)if(!(K&&b[rt]<=1)&&!((0,z.isNumber)(N[rt].fx)&&(0,z.isNumber)(N[rt].fy))){var Rt=g*E/(1+E*Math.sqrt(Y[rt])),le=Math.hypot(p[2*rt],p[2*rt+1]);le=le<1e-4?1e-4:le;var dt=B/le;Rt=Rt>dt?dt:Rt;var ot=Rt*p[2*rt],yt=Rt*p[2*rt+1];N[rt].x+=ot,N[rt].y+=yt}return{nodes:N,sg:E}},x}(V.Base);R.ForceAtlas2Layout=A},51638:function(Se,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var et=function(){function ft(nt){this.xmid=nt.xmid,this.ymid=nt.ymid,this.length=nt.length,this.massCenter=nt.massCenter||[0,0],this.mass=nt.mass||1}return ft.prototype.getLength=function(){return this.length},ft.prototype.contains=function(nt,V){var z=this.length/2;return nt<=this.xmid+z&&nt>=this.xmid-z&&V<=this.ymid+z&&V>=this.ymid-z},ft.prototype.NW=function(){var nt=this.xmid-this.length/4,V=this.ymid+this.length/4,z=this.length/2,H={xmid:nt,ymid:V,length:z},F=new ft(H);return F},ft.prototype.NE=function(){var nt=this.xmid+this.length/4,V=this.ymid+this.length/4,z=this.length/2,H={xmid:nt,ymid:V,length:z},F=new ft(H);return F},ft.prototype.SW=function(){var nt=this.xmid-this.length/4,V=this.ymid-this.length/4,z=this.length/2,H={xmid:nt,ymid:V,length:z},F=new ft(H);return F},ft.prototype.SE=function(){var nt=this.xmid+this.length/4,V=this.ymid-this.length/4,z=this.length/2,H={xmid:nt,ymid:V,length:z},F=new ft(H);return F},ft}();R.default=et},62732:function(Se,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var et=function(){function ft(nt){this.body=null,this.quad=null,this.NW=null,this.NE=null,this.SW=null,this.SE=null,this.theta=.5,nt!=null&&(this.quad=nt)}return ft.prototype.insert=function(nt){if(this.body==null){this.body=nt;return}this._isExternal()?(this.quad&&(this.NW=new ft(this.quad.NW()),this.NE=new ft(this.quad.NE()),this.SW=new ft(this.quad.SW()),this.SE=new ft(this.quad.SE())),this._putBody(this.body),this._putBody(nt),this.body=this.body.add(nt)):(this.body=this.body.add(nt),this._putBody(nt))},ft.prototype._putBody=function(nt){this.quad&&(nt.in(this.quad.NW())&&this.NW?this.NW.insert(nt):nt.in(this.quad.NE())&&this.NE?this.NE.insert(nt):nt.in(this.quad.SW())&&this.SW?this.SW.insert(nt):nt.in(this.quad.SE())&&this.SE&&this.SE.insert(nt))},ft.prototype._isExternal=function(){return this.NW==null&&this.NE==null&&this.SW==null&&this.SE==null},ft.prototype.updateForce=function(nt){if(!(this.body==null||nt===this.body))if(this._isExternal())nt.addForce(this.body);else{var V=this.quad?this.quad.getLength():0,z=this.body.distanceTo(nt);V/z<this.theta?nt.addForce(this.body):(this.NW&&this.NW.updateForce(nt),this.NE&&this.NE.updateForce(nt),this.SW&&this.SW.updateForce(nt),this.SE&&this.SE.updateForce(nt))}},ft}();R.default=et},80374:function(Se,R,et){"use strict";var ft=this&&this.__extends||function(){var F=function(M,A){return F=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,x){y.__proto__=x}||function(y,x){for(var p in x)Object.prototype.hasOwnProperty.call(x,p)&&(y[p]=x[p])},F(M,A)};return function(M,A){if(typeof A!="function"&&A!==null)throw new TypeError("Class extends value "+String(A)+" is not a constructor or null");F(M,A);function y(){this.constructor=M}M.prototype=A===null?Object.create(A):(y.prototype=A.prototype,new y)}}();Object.defineProperty(R,"__esModule",{value:!0}),R.FruchtermanLayout=void 0;var nt=et(62329),V=et(49784),z=800,H=function(F){ft(M,F);function M(A){var y=F.call(this)||this;return y.maxIteration=1e3,y.workerEnabled=!1,y.gravity=10,y.speed=5,y.clustering=!1,y.clusterGravity=10,y.nodes=[],y.edges=[],y.width=300,y.height=300,y.nodeMap={},y.nodeIdxMap={},y.onLayoutEnd=function(){},y.tick=function(){},y.animate=!0,y.updateCfg(A),y}return M.prototype.getDefaultCfg=function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10,animate:!0}},M.prototype.execute=function(){var A=this,y,x,p=this,_=p.nodes;if(p.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(p.timeInterval),!_||_.length===0){(y=p.onLayoutEnd)===null||y===void 0||y.call(p);return}!p.width&&typeof window!="undefined"&&(p.width=window.innerWidth),!p.height&&typeof window!="undefined"&&(p.height=window.innerHeight),p.center||(p.center=[p.width/2,p.height/2]);var E=p.center;if(_.length===1){_[0].x=E[0],_[0].y=E[1],(x=p.onLayoutEnd)===null||x===void 0||x.call(p);return}var b={},k={};return _.forEach(function(N,g){(0,V.isNumber)(N.x)||(N.x=Math.random()*A.width),(0,V.isNumber)(N.y)||(N.y=Math.random()*A.height),b[N.id]=N,k[N.id]=g}),p.nodeMap=b,p.nodeIdxMap=k,p.run()},M.prototype.run=function(){var A,y=this,x=y.nodes;if(x){var p=y.edges,_=y.maxIteration,E=y.workerEnabled,b=y.clustering,k=y.animate,N={};if(b&&x.forEach(function(K){N[K.cluster]===void 0&&(N[K.cluster]={name:K.cluster,cx:0,cy:0,count:0})}),E||!k){for(var g=0;g<_;g++)y.runOneStep(N);(A=y.onLayoutEnd)===null||A===void 0||A.call(y)}else{if(typeof window=="undefined")return;var v=0;this.timeInterval=window.setInterval(function(){var K;y.runOneStep(N),v++,v>=_&&((K=y.onLayoutEnd)===null||K===void 0||K.call(y),window.clearInterval(y.timeInterval))},0)}return{nodes:x,edges:p}}},M.prototype.runOneStep=function(A){var y,x=this,p=x.nodes;if(p){var _=x.edges,E=x.center,b=x.gravity,k=x.speed,N=x.clustering,g=x.height*x.width,v=Math.sqrt(g)/10,K=g/(p.length+1),B=Math.sqrt(K),G=[];if(p.forEach(function(Q,Z){G[Z]={x:0,y:0}}),x.applyCalculate(p,_,G,B,K),N){for(var Y in A)A[Y].cx=0,A[Y].cy=0,A[Y].count=0;p.forEach(function(Q){var Z=A[Q.cluster];(0,V.isNumber)(Q.x)&&(Z.cx+=Q.x),(0,V.isNumber)(Q.y)&&(Z.cy+=Q.y),Z.count++});for(var Y in A)A[Y].cx/=A[Y].count,A[Y].cy/=A[Y].count;var j=x.clusterGravity||b;p.forEach(function(Q,Z){if(!(!(0,V.isNumber)(Q.x)||!(0,V.isNumber)(Q.y))){var rt=A[Q.cluster],ut=Math.sqrt((Q.x-rt.cx)*(Q.x-rt.cx)+(Q.y-rt.cy)*(Q.y-rt.cy)),ht=B*j;G[Z].x-=ht*(Q.x-rt.cx)/ut,G[Z].y-=ht*(Q.y-rt.cy)/ut}})}p.forEach(function(Q,Z){if(!(!(0,V.isNumber)(Q.x)||!(0,V.isNumber)(Q.y))){var rt=.01*B*b;G[Z].x-=rt*(Q.x-E[0]),G[Z].y-=rt*(Q.y-E[1])}}),p.forEach(function(Q,Z){if((0,V.isNumber)(Q.fx)&&(0,V.isNumber)(Q.fy)){Q.x=Q.fx,Q.y=Q.fy;return}if(!(!(0,V.isNumber)(Q.x)||!(0,V.isNumber)(Q.y))){var rt=Math.sqrt(G[Z].x*G[Z].x+G[Z].y*G[Z].y);if(rt>0){var ut=Math.min(v*(k/z),rt);Q.x+=G[Z].x/rt*ut,Q.y+=G[Z].y/rt*ut}}}),(y=x.tick)===null||y===void 0||y.call(x)}},M.prototype.applyCalculate=function(A,y,x,p,_){var E=this;E.calRepulsive(A,x,_),y&&E.calAttractive(y,x,p)},M.prototype.calRepulsive=function(A,y,x){A.forEach(function(p,_){y[_]={x:0,y:0},A.forEach(function(E,b){if(_!==b&&!(!(0,V.isNumber)(p.x)||!(0,V.isNumber)(E.x)||!(0,V.isNumber)(p.y)||!(0,V.isNumber)(E.y))){var k=p.x-E.x,N=p.y-E.y,g=k*k+N*N;if(g===0){g=1;var v=_>b?1:-1;k=.01*v,N=.01*v}var K=x/g;y[_].x+=k*K,y[_].y+=N*K}})})},M.prototype.calAttractive=function(A,y,x){var p=this;A.forEach(function(_){var E=(0,V.getEdgeTerminal)(_,"source"),b=(0,V.getEdgeTerminal)(_,"target");if(!(!E||!b)){var k=p.nodeIdxMap[E],N=p.nodeIdxMap[b];if(k!==N){var g=p.nodeMap[E],v=p.nodeMap[b];if(!(!(0,V.isNumber)(v.x)||!(0,V.isNumber)(g.x)||!(0,V.isNumber)(v.y)||!(0,V.isNumber)(g.y))){var K=v.x-g.x,B=v.y-g.y,G=Math.sqrt(K*K+B*B),Y=G*G/x;y[N].x-=K/G*Y,y[N].y-=B/G*Y,y[k].x+=K/G*Y,y[k].y+=B/G*Y}}}})},M.prototype.stop=function(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)},M.prototype.destroy=function(){var A=this;A.stop(),A.tick=null,A.nodes=null,A.edges=null,A.destroyed=!0},M.prototype.getType=function(){return"fruchterman"},M}(nt.Base);R.FruchtermanLayout=H},13653:function(Se,R,et){"use strict";var ft=this&&this.__extends||function(){var F=function(M,A){return F=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,x){y.__proto__=x}||function(y,x){for(var p in x)Object.prototype.hasOwnProperty.call(x,p)&&(y[p]=x[p])},F(M,A)};return function(M,A){if(typeof A!="function"&&A!==null)throw new TypeError("Class extends value "+String(A)+" is not a constructor or null");F(M,A);function y(){this.constructor=M}M.prototype=A===null?Object.create(A):(y.prototype=A.prototype,new y)}}();Object.defineProperty(R,"__esModule",{value:!0}),R.GForceLayout=void 0;var nt=et(62329),V=et(49784),z=function(F,M){var A;return F?(0,V.isNumber)(F)?A=function(y){return F}:A=F:A=function(y){return M||1},A},H=function(F){ft(M,F);function M(A){var y=F.call(this)||this;return y.maxIteration=500,y.workerEnabled=!1,y.edgeStrength=200,y.nodeStrength=1e3,y.coulombDisScale=.005,y.damping=.9,y.maxSpeed=1e3,y.minMovement=.5,y.interval=.02,y.factor=1,y.linkDistance=1,y.gravity=10,y.preventOverlap=!0,y.collideStrength=1,y.tick=function(){},y.nodes=[],y.edges=[],y.width=300,y.height=300,y.nodeMap={},y.nodeIdxMap={},y.animate=!0,y.updateCfg(A),y}return M.prototype.getDefaultCfg=function(){return{maxIteration:500,gravity:10,enableTick:!0,animate:!0}},M.prototype.execute=function(){var A,y,x=this,p=x.nodes;if(x.timeInterval!==void 0&&typeof window!="undefined"&&window.clearInterval(x.timeInterval),!p||p.length===0){(A=x.onLayoutEnd)===null||A===void 0||A.call(x);return}!x.width&&typeof window!="undefined"&&(x.width=window.innerWidth),!x.height&&typeof window!="undefined"&&(x.height=window.innerHeight),x.center||(x.center=[x.width/2,x.height/2]);var _=x.center;if(p.length===1){p[0].x=_[0],p[0].y=_[1],(y=x.onLayoutEnd)===null||y===void 0||y.call(x);return}var E={},b={};p.forEach(function(B,G){(0,V.isNumber)(B.x)||(B.x=Math.random()*x.width),(0,V.isNumber)(B.y)||(B.y=Math.random()*x.height),E[B.id]=B,b[B.id]=G}),x.nodeMap=E,x.nodeIdxMap=b,x.linkDistance=z(x.linkDistance,1),x.nodeStrength=z(x.nodeStrength,1),x.edgeStrength=z(x.edgeStrength,1);var k=x.nodeSize,N;if(x.preventOverlap){var g=x.nodeSpacing,v;(0,V.isNumber)(g)?v=function(){return g}:(0,V.isFunction)(g)?v=g:v=function(){return 0},k?(0,V.isArray)(k)?N=function(B){return Math.max(k[0],k[1])+v(B)}:N=function(B){return k+v(B)}:N=function(B){return B.size?(0,V.isArray)(B.size)?Math.max(B.size[0],B.size[1])+v(B):(0,V.isObject)(B.size)?Math.max(B.size.width,B.size.height)+v(B):B.size+v(B):10+v(B)}}x.nodeSize=N;var K=x.edges;x.degrees=(0,V.getDegree)(p.length,x.nodeIdxMap,K),x.getMass||(x.getMass=function(B){var G=B.mass||x.degrees[x.nodeIdxMap[B.id]].all||1;return G}),x.run()},M.prototype.run=function(){var A,y=this,x=y.maxIteration,p=y.nodes,_=y.workerEnabled,E=y.minMovement,b=y.animate;if(p)if(_||!b){for(var k=0;k<x;k++){var N=y.runOneStep(k);if(y.reachMoveThreshold(p,N,E))break}(A=y.onLayoutEnd)===null||A===void 0||A.call(y)}else{if(typeof window=="undefined")return;var g=0;this.timeInterval=window.setInterval(function(){var v,K;if(p){var B=y.runOneStep(g)||[];y.reachMoveThreshold(p,B,E)&&((v=y.onLayoutEnd)===null||v===void 0||v.call(y),window.clearInterval(y.timeInterval)),g++,g>=x&&((K=y.onLayoutEnd)===null||K===void 0||K.call(y),window.clearInterval(y.timeInterval))}},0)}},M.prototype.reachMoveThreshold=function(A,y,x){var p=0;return A.forEach(function(_,E){var b=_.x-y[E].x,k=_.y-y[E].y;p+=Math.sqrt(b*b+k*k)}),p/=A.length,p<x},M.prototype.runOneStep=function(A){var y,x=this,p=x.nodes,_=x.edges,E=[],b=[];if(p){p.forEach(function(g,v){E[2*v]=0,E[2*v+1]=0,b[2*v]=0,b[2*v+1]=0}),x.calRepulsive(E,p),_&&x.calAttractive(E,_),x.calGravity(E,p);var k=Math.max(.02,x.interval-A*.002);x.updateVelocity(E,b,k,p);var N=[];return p.forEach(function(g){N.push({x:g.x,y:g.y})}),x.updatePosition(b,k,p),(y=x.tick)===null||y===void 0||y.call(x),N}},M.prototype.calRepulsive=function(A,y){var x=this,p=x.getMass,_=x.factor,E=x.coulombDisScale,b=x.preventOverlap,k=x.collideStrength,N=k===void 0?1:k,g=x.nodeStrength,v=x.nodeSize;y.forEach(function(K,B){var G=p?p(K):1;y.forEach(function(Y,j){if(!(B>=j)){var Q=K.x-Y.x,Z=K.y-Y.y;Q===0&&Z===0&&(Q=Math.random()*.01,Z=Math.random()*.01);var rt=Q*Q+Z*Z,ut=Math.sqrt(rt),ht=(ut+.1)*E,kt=Q/ut,At=Z/ut,Ht=(g(K)+g(Y))*.5*_/(ht*ht),Rt=p?p(Y):1;if(A[2*B]+=kt*Ht,A[2*B+1]+=At*Ht,A[2*j]-=kt*Ht,A[2*j+1]-=At*Ht,b&&(v(K)+v(Y))/2>ut){var le=N*(g(K)+g(Y))*.5/rt;A[2*B]+=kt*le/G,A[2*B+1]+=At*le/G,A[2*j]-=kt*le/Rt,A[2*j+1]-=At*le/Rt}}})})},M.prototype.calAttractive=function(A,y){var x=this,p=x.nodeMap,_=x.nodeIdxMap,E=x.linkDistance,b=x.edgeStrength,k=x.nodeSize,N=x.getMass;y.forEach(function(g,v){var K=(0,V.getEdgeTerminal)(g,"source"),B=(0,V.getEdgeTerminal)(g,"target"),G=p[K],Y=p[B],j=Y.x-G.x,Q=Y.y-G.y;j===0&&Q===0&&(j=Math.random()*.01,Q=Math.random()*.01);var Z=Math.sqrt(j*j+Q*Q),rt=j/Z,ut=Q/Z,ht=E(g,G,Y)||1+(k(G)+k(Y)||0)/2,kt=ht-Z,At=kt*b(g),Ht=_[K],Rt=_[B],le=N?N(G):1,dt=N?N(Y):1;A[2*Ht]-=rt*At/le,A[2*Ht+1]-=ut*At/le,A[2*Rt]+=rt*At/dt,A[2*Rt+1]+=ut*At/dt})},M.prototype.calGravity=function(A,y){for(var x=this,p=x.center,_=x.gravity,E=x.degrees,b=y.length,k=0;k<b;k++){var N=y[k],g=N.x-p[0],v=N.y-p[1],K=_;if(x.getCenter){var B=x.getCenter(N,E[k].all);B&&(0,V.isNumber)(B[0])&&(0,V.isNumber)(B[1])&&(0,V.isNumber)(B[2])&&(g=N.x-B[0],v=N.y-B[1],K=B[2])}K&&(A[2*k]-=K*g,A[2*k+1]-=K*v)}},M.prototype.updateVelocity=function(A,y,x,p){var _=this,E=x*_.damping;p.forEach(function(b,k){var N=A[2*k]*E||.01,g=A[2*k+1]*E||.01,v=Math.sqrt(N*N+g*g);if(v>_.maxSpeed){var K=_.maxSpeed/v;N=K*N,g=K*g}y[2*k]=N,y[2*k+1]=g})},M.prototype.updatePosition=function(A,y,x){x.forEach(function(p,_){if((0,V.isNumber)(p.fx)&&(0,V.isNumber)(p.fy)){p.x=p.fx,p.y=p.fy;return}var E=A[2*_]*y,b=A[2*_+1]*y;p.x+=E,p.y+=b})},M.prototype.stop=function(){this.timeInterval&&typeof window!="undefined"&&window.clearInterval(this.timeInterval)},M.prototype.destroy=function(){var A=this;A.stop(),A.tick=null,A.nodes=null,A.edges=null,A.destroyed=!0},M.prototype.getType=function(){return"gForce"},M}(nt.Base);R.GForceLayout=H},87745:function(Se,R,et){"use strict";var ft=this&&this.__extends||function(){var p=function(_,E){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,k){b.__proto__=k}||function(b,k){for(var N in k)Object.prototype.hasOwnProperty.call(k,N)&&(b[N]=k[N])},p(_,E)};return function(_,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");p(_,E);function b(){this.constructor=_}_.prototype=E===null?Object.create(E):(b.prototype=E.prototype,new b)}}(),nt=this&&this.__awaiter||function(p,_,E,b){function k(N){return N instanceof E?N:new E(function(g){g(N)})}return new(E||(E=Promise))(function(N,g){function v(G){try{B(b.next(G))}catch(Y){g(Y)}}function K(G){try{B(b.throw(G))}catch(Y){g(Y)}}function B(G){G.done?N(G.value):k(G.value).then(v,K)}B((b=b.apply(p,_||[])).next())})},V=this&&this.__generator||function(p,_){var E={label:0,sent:function(){if(N[0]&1)throw N[1];return N[1]},trys:[],ops:[]},b,k,N,g;return g={next:v(0),throw:v(1),return:v(2)},typeof Symbol=="function"&&(g[Symbol.iterator]=function(){return this}),g;function v(B){return function(G){return K([B,G])}}function K(B){if(b)throw new TypeError("Generator is already executing.");for(;g&&(g=0,B[0]&&(E=0)),E;)try{if(b=1,k&&(N=B[0]&2?k.return:B[0]?k.throw||((N=k.return)&&N.call(k),0):k.next)&&!(N=N.call(k,B[1])).done)return N;switch(k=0,N&&(B=[B[0]&2,N.value]),B[0]){case 0:case 1:N=B;break;case 4:return E.label++,{value:B[1],done:!1};case 5:E.label++,k=B[1],B=[0];continue;case 7:B=E.ops.pop(),E.trys.pop();continue;default:if(N=E.trys,!(N=N.length>0&&N[N.length-1])&&(B[0]===6||B[0]===2)){E=0;continue}if(B[0]===3&&(!N||B[1]>N[0]&&B[1]<N[3])){E.label=B[1];break}if(B[0]===6&&E.label<N[1]){E.label=N[1],N=B;break}if(N&&E.label<N[2]){E.label=N[2],E.ops.push(B);break}N[2]&&E.ops.pop(),E.trys.pop();continue}B=_.call(p,E)}catch(G){B=[6,G],k=0}finally{b=N=0}if(B[0]&5)throw B[1];return{value:B[0]?B[1]:void 0,done:!0}}};Object.defineProperty(R,"__esModule",{value:!0}),R.FruchtermanGPULayout=void 0;var z=et(62329),H=et(49784),F=et(1029),M=et(48835),A=et(8574),y=et(16470),x=function(p){ft(_,p);function _(E){var b=p.call(this)||this;return b.maxIteration=1e3,b.gravity=10,b.speed=1,b.clustering=!1,b.clusterField="cluster",b.clusterGravity=10,b.workerEnabled=!1,b.nodes=[],b.edges=[],b.width=300,b.height=300,b.nodeMap={},b.nodeIdxMap={},b.updateCfg(E),b}return _.prototype.getDefaultCfg=function(){return{maxIteration:1e3,gravity:10,speed:1,clustering:!1,clusterGravity:10}},_.prototype.execute=function(){return nt(this,void 0,void 0,function(){var E,b,k,N,g,v=this;return V(this,function(K){switch(K.label){case 0:return E=this,b=E.nodes,!b||b.length===0?(E.onLayoutEnd&&E.onLayoutEnd(),[2]):(!E.width&&typeof window!="undefined"&&(E.width=window.innerWidth),!E.height&&typeof window!="undefined"&&(E.height=window.innerHeight),E.center||(E.center=[E.width/2,E.height/2]),k=E.center,b.length===1?(b[0].x=k[0],b[0].y=k[1],E.onLayoutEnd&&E.onLayoutEnd(),[2]):(N={},g={},b.forEach(function(B,G){(0,H.isNumber)(B.x)||(B.x=Math.random()*v.width),(0,H.isNumber)(B.y)||(B.y=Math.random()*v.height),N[B.id]=B,g[B.id]=G}),E.nodeMap=N,E.nodeIdxMap=g,[4,E.run()]));case 1:return K.sent(),[2]}})})},_.prototype.executeWithWorker=function(E,b){return nt(this,void 0,void 0,function(){var k,N,g,v,K,B=this;return V(this,function(G){switch(G.label){case 0:return k=this,N=k.nodes,g=k.center,!N||N.length===0?[2]:N.length===1?(N[0].x=g[0],N[0].y=g[1],[2]):(v={},K={},N.forEach(function(Y,j){(0,H.isNumber)(Y.x)||(Y.x=Math.random()*B.width),(0,H.isNumber)(Y.y)||(Y.y=Math.random()*B.height),v[Y.id]=Y,K[Y.id]=j}),k.nodeMap=v,k.nodeIdxMap=K,[4,k.run(E,b)]);case 1:return G.sent(),[2]}})})},_.prototype.run=function(E,b){return nt(this,void 0,void 0,function(){var k,N,g,v,K,B,G,Y,j,Q,Z,rt,ut,ht,kt,At,Ht,Rt,le,dt,ot,yt,Lt,Ot,Wt,Jt,De=this;return V(this,function(te){switch(te.label){case 0:for(k=this,N=k.nodes,g=k.edges,v=k.maxIteration,K=k.center,B=k.height*k.width,G=Math.sqrt(B)/10,Y=B/(N.length+1),j=Math.sqrt(Y),Q=k.speed,Z=k.clustering,rt=(0,M.attributesToTextureData)([k.clusterField],N),ut=rt.array,ht=rt.count,N.forEach(function(oe,me){var Ce=0,_e=0;(0,H.isNumber)(oe.fx)&&(0,H.isNumber)(oe.fy)&&(Ce=oe.fx||.001,_e=oe.fy||.001),ut[4*me+1]=Ce,ut[4*me+2]=_e}),kt=N.length,At=(0,M.buildTextureData)(N,g),Ht=At.maxEdgePerVetex,Rt=At.array,le=k.workerEnabled,le?dt=F.World.create({canvas:E,engineOptions:{supportCompute:!0}}):dt=F.World.create({engineOptions:{supportCompute:!0}}),ot=k.onLayoutEnd,yt=[],Lt=0;Lt<ht;Lt++)yt.push(0,0,0,0);return Ot=dt.createKernel(A.fruchtermanBundle).setDispatch([kt,1,1]).setBinding({u_Data:Rt,u_K:j,u_K2:Y,u_Gravity:k.gravity,u_ClusterGravity:k.clusterGravity||k.gravity||1,u_Speed:Q,u_MaxDisplace:G,u_Clustering:Z?1:0,u_Center:K,u_AttributeArray:ut,u_ClusterCenters:yt,MAX_EDGE_PER_VERTEX:Ht,VERTEX_COUNT:kt}),Z&&(Wt=dt.createKernel(A.clusterBundle).setDispatch([ht,1,1]).setBinding({u_Data:Rt,u_NodeAttributes:ut,u_ClusterCenters:yt,VERTEX_COUNT:kt,CLUSTER_COUNT:ht})),Jt=function(){return nt(De,void 0,void 0,function(){var oe,me;return V(this,function(Ce){switch(Ce.label){case 0:oe=0,Ce.label=1;case 1:return oe<v?[4,Ot.execute()]:[3,6];case 2:return Ce.sent(),Z?(Wt.setBinding({u_Data:Ot}),[4,Wt.execute()]):[3,4];case 3:Ce.sent(),Ot.setBinding({u_ClusterCenters:Wt}),Ce.label=4;case 4:Ot.setBinding({u_MaxDisplace:G*=.99}),Ce.label=5;case 5:return oe++,[3,1];case 6:return[4,Ot.getOutput()];case 7:return me=Ce.sent(),E?b.postMessage({type:y.LAYOUT_MESSAGE.GPUEND,vertexEdgeData:me}):N.forEach(function(_e,zt){var ue=me[4*zt],Pe=me[4*zt+1];_e.x=ue,_e.y=Pe}),ot&&ot(),[2]}})})},[4,Jt()];case 1:return te.sent(),[2]}})})},_.prototype.getType=function(){return"fruchterman-gpu"},_}(z.Base);R.FruchtermanGPULayout=x},8574:function(Se,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.clusterBundle=R.clusterCode=R.fruchtermanBundle=R.fruchtermanCode=void 0,R.fruchtermanCode=`
import { globalInvocationID } from 'g-webgpu';
const MAX_EDGE_PER_VERTEX;
const VERTEX_COUNT;
@numthreads(1, 1, 1)
class Fruchterman {
  @in @out
  u_Data: vec4[];
  @in
  u_K: float;
  @in
  u_K2: float;
  
  @in
  u_Center: vec2;
  @in
  u_Gravity: float;
  @in
  u_ClusterGravity: float;
  @in
  u_Speed: float;
  @in
  u_MaxDisplace: float;
  @in
  u_Clustering: float;
  @in
  u_AttributeArray: vec4[];
  @in
  u_ClusterCenters: vec4[];
  calcRepulsive(i: int, currentNode: vec4): vec2 {
    let dx = 0, dy = 0;
    for (let j = 0; j < VERTEX_COUNT; j++) {
      if (i != j) {
        const nextNode = this.u_Data[j];
        const xDist = currentNode[0] - nextNode[0];
        const yDist = currentNode[1] - nextNode[1];
        const dist = (xDist * xDist + yDist * yDist) + 0.01;
        let param = this.u_K2 / dist;
        
        if (dist > 0.0) {
          dx += param * xDist;
          dy += param * yDist;
          if (xDist == 0 && yDist == 0) {
            const sign = i < j ? 1 : -1;
            dx += param * sign;
            dy += param * sign;
          }
        }
      }
    }
    return [dx, dy];
  }
  calcGravity(currentNode: vec4, nodeAttributes: vec4): vec2 { // 
    let dx = 0, dy = 0;
    const vx = currentNode[0] - this.u_Center[0];
    const vy = currentNode[1] - this.u_Center[1];
    const gf = 0.01 * this.u_K * this.u_Gravity;
    dx = gf * vx;
    dy = gf * vy;
    if (this.u_Clustering == 1) {
      const clusterIdx = int(nodeAttributes[0]);
      const center = this.u_ClusterCenters[clusterIdx];
      const cvx = currentNode[0] - center[0];
      const cvy = currentNode[1] - center[1];
      const dist = sqrt(cvx * cvx + cvy * cvy) + 0.01;
      const parma = this.u_K * this.u_ClusterGravity / dist;
      dx += parma * cvx;
      dy += parma * cvy;
    }
    return [dx, dy];
  }
  calcAttractive(i: int, currentNode: vec4): vec2 {
    let dx = 0, dy = 0;
    const arr_offset = int(floor(currentNode[2] + 0.5));
    const length = int(floor(currentNode[3] + 0.5));
    const node_buffer: vec4;
    for (let p = 0; p < MAX_EDGE_PER_VERTEX; p++) {
      if (p >= length) break;
      const arr_idx = arr_offset + p;
      // when arr_idx % 4 == 0 update currentNodedx_buffer
      const buf_offset = arr_idx - arr_idx / 4 * 4;
      if (p == 0 || buf_offset == 0) {
        node_buffer = this.u_Data[int(arr_idx / 4)];
      }
      const float_j = buf_offset == 0 ? node_buffer[0] :
                      buf_offset == 1 ? node_buffer[1] :
                      buf_offset == 2 ? node_buffer[2] :
                                        node_buffer[3];
      const nextNode = this.u_Data[int(float_j)];
      const xDist = currentNode[0] - nextNode[0];
      const yDist = currentNode[1] - nextNode[1];
      const dist = sqrt(xDist * xDist + yDist * yDist) + 0.01;
      let attractiveF = dist / this.u_K;
    
      if (dist > 0.0) {
        dx -= xDist * attractiveF;
        dy -= yDist * attractiveF;
        if (xDist == 0 && yDist == 0) {
          const sign = i < int(float_j) ? 1 : -1;
          dx -= sign * attractiveF;
          dy -= sign * attractiveF;
        }
      }
    }
    return [dx, dy];
  }
  @main
  compute() {
    const i = globalInvocationID.x;
    const currentNode = this.u_Data[i];
    let dx = 0, dy = 0;
    if (i >= VERTEX_COUNT) {
      this.u_Data[i] = currentNode;
      return;
    }

    // [gravity, fx, fy, 0]
    const nodeAttributes = this.u_AttributeArray[i];

    if (nodeAttributes[1] != 0 && nodeAttributes[2] != 0) {
      // the node is fixed
      this.u_Data[i] = [
        nodeAttributes[1],
        nodeAttributes[2],
        currentNode[2],
        currentNode[3]
      ];
      return;
    }

    // repulsive
    const repulsive = this.calcRepulsive(i, currentNode);
    dx += repulsive[0];
    dy += repulsive[1];
    // attractive
    const attractive = this.calcAttractive(i, currentNode);
    dx += attractive[0];
    dy += attractive[1];
    // gravity
    const gravity = this.calcGravity(currentNode, nodeAttributes);
    dx -= gravity[0];
    dy -= gravity[1];
    // speed
    dx *= this.u_Speed;
    dy *= this.u_Speed;

    // move
    const distLength = sqrt(dx * dx + dy * dy);
    if (distLength > 0.0) {
      const limitedDist = min(this.u_MaxDisplace * this.u_Speed, distLength);
      this.u_Data[i] = [
        currentNode[0] + dx / distLength * limitedDist,
        currentNode[1] + dy / distLength * limitedDist,
        currentNode[2],
        currentNode[3]
      ];
    }
  }
}
`,R.fruchtermanBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_K;\\nuniform float u_K2;\\nuniform vec2 u_Center;\\nuniform float u_Gravity;\\nuniform float u_ClusterGravity;\\nuniform float u_Speed;\\nuniform float u_MaxDisplace;\\nuniform float u_Clustering;\\nuniform sampler2D u_AttributeArray;\\nuniform vec2 u_AttributeArraySize;\\nvec4 getDatau_AttributeArray(vec2 address2D) {\\n  return vec4(texture2D(u_AttributeArray, address2D).rgba);\\n}\\nvec4 getDatau_AttributeArray(float address1D) {\\n  return getDatau_AttributeArray(addrTranslation_1Dto2D(address1D, u_AttributeArraySize));\\n}\\nvec4 getDatau_AttributeArray(int address1D) {\\n  return getDatau_AttributeArray(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = ((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat param = u_K2 / dist;\\nif (dist > 0.0) {dx += param * xDist;\\ndy += param * yDist;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < j) ? (1.0) : (-1.0);\\ndx += param * sign;\\ndy += param * sign;}}}}\\nreturn vec2(dx, dy);}\\nvec2 calcGravity(vec4 currentNode, vec4 nodeAttributes) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nfloat vx = currentNode.x - u_Center.x;\\nfloat vy = currentNode.y - u_Center.y;\\nfloat gf = (0.01 * u_K) * u_Gravity;\\ndx = gf * vx;\\ndy = gf * vy;\\nif (u_Clustering == 1.0) {int clusterIdx = int(nodeAttributes.x);\\nvec4 center = getDatau_ClusterCenters(clusterIdx);\\nfloat cvx = currentNode.x - center.x;\\nfloat cvy = currentNode.y - center.y;\\nfloat dist = sqrt((cvx * cvx) + (cvy * cvy)) + 0.01;\\nfloat parma = (u_K * u_ClusterGravity) / dist;\\ndx += parma * cvx;\\ndy += parma * cvy;}\\nreturn vec2(dx, dy);}\\nvec2 calcAttractive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nint arr_offset = int(floor(currentNode.z + 0.5));\\nint length = int(floor(currentNode.w + 0.5));\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + int(p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = (buf_offset == 0) ? (node_buffer.x) : ((buf_offset == 1) ? (node_buffer.y) : ((buf_offset == 2) ? (node_buffer.z) : (node_buffer.w)));\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat xDist = currentNode.x - nextNode.x;\\nfloat yDist = currentNode.y - nextNode.y;\\nfloat dist = sqrt((xDist * xDist) + (yDist * yDist)) + 0.01;\\nfloat attractiveF = dist / u_K;\\nif (dist > 0.0) {dx -= xDist * attractiveF;\\ndy -= yDist * attractiveF;\\nif ((xDist == 0.0) && (yDist == 0.0)) {float sign = (i < int(float_j)) ? (1.0) : (-1.0);\\ndx -= sign * attractiveF;\\ndy -= sign * attractiveF;}}}\\nreturn vec2(dx, dy);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nfloat dx = 0.0;\\nfloat dy = 0.0;\\nif (i >= VERTEX_COUNT) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes = getDatau_AttributeArray(i);\\nif ((nodeAttributes.y != 0.0) && (nodeAttributes.z != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes.y, nodeAttributes.z, currentNode.z, currentNode.w));\\nreturn ;}\\nvec2 repulsive = calcRepulsive(i, currentNode);\\ndx += repulsive.x;\\ndy += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode);\\ndx += attractive.x;\\ndy += attractive.y;\\nvec2 gravity = calcGravity(currentNode, nodeAttributes);\\ndx -= gravity.x;\\ndy -= gravity.y;\\ndx *= u_Speed;\\ndy *= u_Speed;\\nfloat distLength = sqrt((dx * dx) + (dy * dy));\\nif (distLength > 0.0) {float limitedDist = min(u_MaxDisplace * u_Speed, distLength);\\ngl_FragColor = vec4(vec4(currentNode.x + ((dx / distLength) * limitedDist), currentNode.y + ((dy / distLength) * limitedDist), currentNode.z, currentNode.w));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_K","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_K2","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Center","type":"vec2<f32>","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Gravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterGravity","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Speed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_MaxDisplace","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_Clustering","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AttributeArray","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',R.clusterCode=`
import { globalInvocationID } from 'g-webgpu';
const VERTEX_COUNT;
const CLUSTER_COUNT;
@numthreads(1, 1, 1)
class CalcCenter {
  @in
  u_Data: vec4[];
  @in
  u_NodeAttributes: vec4[]; // [[clusterIdx, 0, 0, 0], ...]
  @in @out
  u_ClusterCenters: vec4[]; // [[cx, cy, nodeCount, clusterIdx], ...]
  @main
  compute() {
    const i = globalInvocationID.x;
    const center = this.u_ClusterCenters[i];
    let sumx = 0;
    let sumy = 0;
    let count = 0;
    for (let j = 0; j < VERTEX_COUNT; j++) {
      const attributes = this.u_NodeAttributes[j];
      const clusterIdx = int(attributes[0]);
      const vertex = this.u_Data[j];
      if (clusterIdx == i) {
        sumx += vertex.x;
        sumy += vertex.y;
        count += 1;
      }
    }
    this.u_ClusterCenters[i] = [
      sumx / count,
      sumy / count,
      count,
      i
    ];
  }
}
`,R.clusterBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define CLUSTER_COUNT __DefineValuePlaceholder__CLUSTER_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributes;\\nuniform vec2 u_NodeAttributesSize;\\nvec4 getDatau_NodeAttributes(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributes, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributes(float address1D) {\\n  return getDatau_NodeAttributes(addrTranslation_1Dto2D(address1D, u_NodeAttributesSize));\\n}\\nvec4 getDatau_NodeAttributes(int address1D) {\\n  return getDatau_NodeAttributes(float(address1D));\\n}\\nuniform sampler2D u_ClusterCenters;\\nuniform vec2 u_ClusterCentersSize;\\nvec4 getDatau_ClusterCenters(vec2 address2D) {\\n  return vec4(texture2D(u_ClusterCenters, address2D).rgba);\\n}\\nvec4 getDatau_ClusterCenters(float address1D) {\\n  return getDatau_ClusterCenters(addrTranslation_1Dto2D(address1D, u_ClusterCentersSize));\\n}\\nvec4 getDatau_ClusterCenters(int address1D) {\\n  return getDatau_ClusterCenters(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 center = getDatau_ClusterCenters(i);\\nfloat sumx = 0.0;\\nfloat sumy = 0.0;\\nfloat count = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 attributes = getDatau_NodeAttributes(j);\\nint clusterIdx = int(attributes.x);\\nvec4 vertex = getDatau_Data(j);\\nif (clusterIdx == i) {sumx += vertex.x;\\nsumy += vertex.y;\\ncount += 1.0;}}\\ngl_FragColor = vec4(vec4(sumx / count, sumy / count, count, i));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"CLUSTER_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributes","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_ClusterCenters","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_ClusterCenters","size":[1,1],"length":1},"needPingpong":true}}'},85194:function(Se,R,et){"use strict";var ft=this&&this.__extends||function(){var _=function(E,b){return _=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(k,N){k.__proto__=N}||function(k,N){for(var g in N)Object.prototype.hasOwnProperty.call(N,g)&&(k[g]=N[g])},_(E,b)};return function(E,b){if(typeof b!="function"&&b!==null)throw new TypeError("Class extends value "+String(b)+" is not a constructor or null");_(E,b);function k(){this.constructor=E}E.prototype=b===null?Object.create(b):(k.prototype=b.prototype,new k)}}(),nt=this&&this.__awaiter||function(_,E,b,k){function N(g){return g instanceof b?g:new b(function(v){v(g)})}return new(b||(b=Promise))(function(g,v){function K(Y){try{G(k.next(Y))}catch(j){v(j)}}function B(Y){try{G(k.throw(Y))}catch(j){v(j)}}function G(Y){Y.done?g(Y.value):N(Y.value).then(K,B)}G((k=k.apply(_,E||[])).next())})},V=this&&this.__generator||function(_,E){var b={label:0,sent:function(){if(g[0]&1)throw g[1];return g[1]},trys:[],ops:[]},k,N,g,v;return v={next:K(0),throw:K(1),return:K(2)},typeof Symbol=="function"&&(v[Symbol.iterator]=function(){return this}),v;function K(G){return function(Y){return B([G,Y])}}function B(G){if(k)throw new TypeError("Generator is already executing.");for(;v&&(v=0,G[0]&&(b=0)),b;)try{if(k=1,N&&(g=G[0]&2?N.return:G[0]?N.throw||((g=N.return)&&g.call(N),0):N.next)&&!(g=g.call(N,G[1])).done)return g;switch(N=0,g&&(G=[G[0]&2,g.value]),G[0]){case 0:case 1:g=G;break;case 4:return b.label++,{value:G[1],done:!1};case 5:b.label++,N=G[1],G=[0];continue;case 7:G=b.ops.pop(),b.trys.pop();continue;default:if(g=b.trys,!(g=g.length>0&&g[g.length-1])&&(G[0]===6||G[0]===2)){b=0;continue}if(G[0]===3&&(!g||G[1]>g[0]&&G[1]<g[3])){b.label=G[1];break}if(G[0]===6&&b.label<g[1]){b.label=g[1],g=G;break}if(g&&b.label<g[2]){b.label=g[2],b.ops.push(G);break}g[2]&&b.ops.pop(),b.trys.pop();continue}G=E.call(_,b)}catch(Y){G=[6,Y],N=0}finally{k=g=0}if(G[0]&5)throw G[1];return{value:G[0]?G[1]:void 0,done:!0}}};Object.defineProperty(R,"__esModule",{value:!0}),R.GForceGPULayout=void 0;var z=et(62329),H=et(49784),F=et(1029),M=et(48835),A=et(80628),y=et(49762),x=et(16470),p=function(_){ft(E,_);function E(b){var k=_.call(this)||this;return k.maxIteration=1e3,k.edgeStrength=200,k.nodeStrength=1e3,k.coulombDisScale=.005,k.damping=.9,k.maxSpeed=1e3,k.minMovement=.5,k.interval=.02,k.factor=1,k.linkDistance=1,k.gravity=10,k.workerEnabled=!1,k.nodes=[],k.edges=[],k.width=300,k.height=300,k.nodeMap={},k.nodeIdxMap={},k.updateCfg(b),k}return E.prototype.getDefaultCfg=function(){return{maxIteration:2e3,gravity:10,clustering:!1,clusterGravity:10}},E.prototype.execute=function(){return nt(this,void 0,void 0,function(){var b,k,N,g,v;return V(this,function(K){switch(K.label){case 0:return b=this,k=b.nodes,!k||k.length===0?(b.onLayoutEnd&&b.onLayoutEnd(),[2]):(!b.width&&typeof window!="undefined"&&(b.width=window.innerWidth),!b.height&&typeof window!="undefined"&&(b.height=window.innerHeight),b.center||(b.center=[b.width/2,b.height/2]),N=b.center,k.length===1?(k[0].x=N[0],k[0].y=N[1],b.onLayoutEnd&&b.onLayoutEnd(),[2]):(g={},v={},k.forEach(function(B,G){(0,H.isNumber)(B.x)||(B.x=Math.random()*b.width),(0,H.isNumber)(B.y)||(B.y=Math.random()*b.height),g[B.id]=B,v[B.id]=G}),b.nodeMap=g,b.nodeIdxMap=v,b.nodeStrength=(0,M.proccessToFunc)(b.nodeStrength,1),b.edgeStrength=(0,M.proccessToFunc)(b.edgeStrength,1),[4,b.run()]));case 1:return K.sent(),[2]}})})},E.prototype.executeWithWorker=function(b,k){var N=this,g=N.nodes,v=N.center;if(!(!g||g.length===0)){if(g.length===1){g[0].x=v[0],g[0].y=v[1];return}var K={},B={};g.forEach(function(G,Y){(0,H.isNumber)(G.x)||(G.x=Math.random()*N.width),(0,H.isNumber)(G.y)||(G.y=Math.random()*N.height),K[G.id]=G,B[G.id]=Y}),N.nodeMap=K,N.nodeIdxMap=B,N.nodeStrength=(0,M.proccessToFunc)(N.nodeStrength,1),N.edgeStrength=(0,M.proccessToFunc)(N.edgeStrength,1),N.run(b,k)}},E.prototype.run=function(b,k){return nt(this,void 0,void 0,function(){var N,g,v,K,B,G,Y,j,Q,Z,rt,ut,ht,kt,At,Ht,Rt,le,dt,ot,yt,Lt,Ot,Wt,Jt,De,te,oe=this;return V(this,function(me){switch(me.label){case 0:for(N=this,g=N.nodes,v=N.edges,K=N.maxIteration,!N.width&&typeof window!="undefined"&&(N.width=window.innerWidth),!N.height&&typeof window!="undefined"&&(N.height=window.innerHeight),B=g.length,N.linkDistance=(0,M.proccessToFunc)(N.linkDistance),N.edgeStrength=(0,M.proccessToFunc)(N.edgeStrength),G=(0,M.buildTextureDataWithTwoEdgeAttr)(g,v,N.linkDistance,N.edgeStrength),Y=G.maxEdgePerVetex,j=G.array,N.degrees=(0,A.getDegree)(g.length,N.nodeIdxMap,v).map(function(Ce){return Ce.all}),Q=[],Z=[],rt=[],ut=[],ht=[],kt=[],At=[],N.getMass||(N.getMass=function(Ce){return N.degrees[N.nodeIdxMap[Ce.id]]||1}),Ht=N.gravity,Rt=N.center,g.forEach(function(Ce,_e){Q.push(N.getMass(Ce)),Z.push(N.nodeStrength(Ce)),N.degrees[_e]||(N.degrees[_e]=0);var zt=[Rt[0],Rt[1],Ht];if(N.getCenter){var ue=N.getCenter(Ce,N.degrees[_e]);ue&&(0,H.isNumber)(ue[0])&&(0,H.isNumber)(ue[1])&&(0,H.isNumber)(ue[2])&&(zt=ue)}rt.push(zt[0]),ut.push(zt[1]),ht.push(zt[2]),(0,H.isNumber)(Ce.fx)&&(0,H.isNumber)(Ce.fy)?(kt.push(Ce.fx||.001),At.push(Ce.fy||.001)):(kt.push(0),At.push(0))}),le=(0,M.arrayToTextureData)([Q,N.degrees,Z,kt]),dt=(0,M.arrayToTextureData)([rt,ut,ht,At]),ot=N.workerEnabled,ot?yt=F.World.create({canvas:b,engineOptions:{supportCompute:!0}}):yt=F.World.create({engineOptions:{supportCompute:!0}}),Lt=N.onLayoutEnd,Ot=[],j.forEach(function(Ce){Ot.push(Ce)}),Wt=0;Wt<4;Wt++)Ot.push(0);return Jt=yt.createKernel(y.gForceBundle).setDispatch([B,1,1]).setBinding({u_Data:j,u_damping:N.damping,u_maxSpeed:N.maxSpeed,u_minMovement:N.minMovement,u_coulombDisScale:N.coulombDisScale,u_factor:N.factor,u_NodeAttributeArray1:le,u_NodeAttributeArray2:dt,MAX_EDGE_PER_VERTEX:Y,VERTEX_COUNT:B,u_AveMovement:Ot,u_interval:N.interval}),De=yt.createKernel(y.aveMovementBundle).setDispatch([1,1,1]).setBinding({u_Data:j,VERTEX_COUNT:B,u_AveMovement:[0,0,0,0]}),te=function(){return nt(oe,void 0,void 0,function(){var Ce,_e,zt;return V(this,function(ue){switch(ue.label){case 0:Ce=0,ue.label=1;case 1:return Ce<K?[4,Jt.execute()]:[3,5];case 2:return ue.sent(),De.setBinding({u_Data:Jt}),[4,De.execute()];case 3:ue.sent(),_e=Math.max(.02,N.interval-Ce*.002),Jt.setBinding({u_interval:_e,u_AveMovement:De}),ue.label=4;case 4:return Ce++,[3,1];case 5:return[4,Jt.getOutput()];case 6:return zt=ue.sent(),b?k.postMessage({type:x.LAYOUT_MESSAGE.GPUEND,vertexEdgeData:zt}):g.forEach(function(Pe,Xt){var ie=zt[4*Xt],Ie=zt[4*Xt+1];Pe.x=ie,Pe.y=Ie}),Lt&&Lt(),[2]}})})},[4,te()];case 1:return me.sent(),[2]}})})},E.prototype.getType=function(){return"gForce-gpu"},E}(z.Base);R.GForceGPULayout=p},49762:function(Se,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.aveMovementBundle=R.aveMovementCode=R.gForceBundle=R.gForceCode=void 0,R.gForceCode=`
import { globalInvocationID } from 'g-webgpu';

const MAX_EDGE_PER_VERTEX;
const VERTEX_COUNT;
const SHIFT_20 = 1048576;

@numthreads(1, 1, 1)
class GGForce {
  @in @out
  u_Data: vec4[];

  @in
  u_damping: float;
  
  @in
  u_maxSpeed: float;

  @in
  u_minMovement: float;

  @in
  u_AveMovement: vec4[];

  @in
  u_coulombDisScale: float;

  @in
  u_factor: float;

  @in
  u_NodeAttributeArray1: vec4[];

  @in
  u_NodeAttributeArray2: vec4[];

  @in
  u_interval: float;

  unpack_float(packedValue: float): ivec2 {
    const packedIntValue = int(packedValue);
    const v0 = packedIntValue / SHIFT_20;
    return [v0, packedIntValue - v0 * SHIFT_20];
  }

  calcRepulsive(i: int, currentNode: vec4): vec2 {
    let ax = 0, ay = 0;
    for (let j: int = 0; j < VERTEX_COUNT; j++) {
      if (i != j) {
        const nextNode = this.u_Data[j];
        const vx = currentNode[0] - nextNode[0];
        const vy = currentNode[1] - nextNode[1];
        const dist = sqrt(vx * vx + vy * vy) + 0.01;
        const n_dist = (dist + 0.1) * this.u_coulombDisScale;
        const direx = vx / dist;
        const direy = vy / dist;
        const attributesi = this.u_NodeAttributeArray1[i];
        const attributesj = this.u_NodeAttributeArray1[j];
        const massi = attributesi[0];
        const nodeStrengthi = attributesi[2];
        const nodeStrengthj = attributesj[2];
        const nodeStrength = (nodeStrengthi + nodeStrengthj) / 2;
        // const param = nodeStrength * this.u_factor / (n_dist * n_dist * massi);
        const param = nodeStrength * this.u_factor / (n_dist * n_dist);
        ax += direx * param;
        ay += direy * param;
      }
    }
    return [ax, ay];
  }

  calcGravity(i: int, currentNode: vec4, attributes2: vec4): vec2 {
    // note: attributes2 = [centerX, centerY, gravity, 0]

    const vx = currentNode[0] - attributes2[0];
    const vy = currentNode[1] - attributes2[1];
    
    const ax = vx * attributes2[2];
    const ay = vy * attributes2[2];
    
    return [ax, ay];
  }

  calcAttractive(i: int, currentNode: vec4, attributes1: vec4): vec2 {
    // note: attributes1 = [mass, degree, nodeSterngth, 0]

    const mass = attributes1[0];
    let ax = 0, ay = 0;
    // const arr_offset = int(floor(currentNode[2] + 0.5));
    // const length = int(floor(currentNode[3] + 0.5));

    const compressed = this.unpack_float(currentNode[2]);
    const length = compressed[0];
    const arr_offset = compressed[1];

    const node_buffer: vec4;
    for (let p: int = 0; p < MAX_EDGE_PER_VERTEX; p++) {
      if (p >= length) break;
      const arr_idx = arr_offset + 4 * p; // i \u8282\u70B9\u7684\u7B2C p \u6761\u8FB9\u5F00\u59CB\u7684\u5C0F\u683C\u5B50\u4F4D\u7F6E
      const buf_offset = arr_idx - arr_idx / 4 * 4;
      if (p == 0 || buf_offset == 0) {
        node_buffer = this.u_Data[int(arr_idx / 4)]; // \u5927\u683C\u5B50\uFF0C\u5927\u683C\u5B50\u4F4D\u7F6E=\u5C0F\u4E2A\u5B50\u4F4D\u7F6E / 4\uFF0C
      }

      let float_j: float = node_buffer[0];

      const nextNode = this.u_Data[int(float_j)];
      const vx = nextNode[0] - currentNode[0];
      const vy = nextNode[1] - currentNode[1];
      const dist = sqrt(vx * vx + vy * vy) + 0.01;
      const direx = vx / dist;
      const direy = vy / dist;
      const edgeLength = node_buffer[1];
      const edgeStrength = node_buffer[2];
      const diff: float = edgeLength - dist;//edgeLength
      // const param = diff * this.u_stiffness / mass; //
      const param = diff * edgeStrength / mass; // 
      ax -= direx * param;
      ay -= direy * param;
    }
    return [ax, ay];
  }

  @main
  compute() {
    const i = globalInvocationID.x;
    const currentNode = this.u_Data[i];
    const movement = u_AveMovement[0];
    let ax = 0, ay = 0;

    if (i >= VERTEX_COUNT || movement.x < u_minMovement) {
      this.u_Data[i] = currentNode;
      return;
    }

    // \u6BCF\u4E2A\u8282\u70B9\u5C5E\u6027\u5360\u4E24\u4E2A\u6570\u7EC4\u4E2D\u5404\u4E00\u683C
    // [mass, degree, nodeStrength, fx]
    const nodeAttributes1 = this.u_NodeAttributeArray1[i];
    // [centerX, centerY, centerGravity, fy]
    const nodeAttributes2 = this.u_NodeAttributeArray2[i];

    // repulsive
    const repulsive = this.calcRepulsive(i, currentNode);
    ax += repulsive[0];
    ay += repulsive[1];

    // attractive
    const attractive = this.calcAttractive(i, currentNode, nodeAttributes1);
    ax += attractive[0];
    ay += attractive[1];

    // gravity
    const gravity = this.calcGravity(i, currentNode, nodeAttributes2);
    ax -= gravity[0];
    ay -= gravity[1];

    // speed
    const param = this.u_interval * this.u_damping;
    let vx = ax * param;
    let vy = ay * param;
    const vlength = sqrt(vx * vx + vy * vy) + 0.0001;
    if (vlength > this.u_maxSpeed) {
      const param2 = this.u_maxSpeed / vlength;
      vx = param2 * vx;
      vy = param2 * vy;
    }

    // move
    if (nodeAttributes1[3] != 0 && nodeAttributes2[3] != 0) {
      this.u_Data[i] = [
        nodeAttributes1[3],
        nodeAttributes2[3],
        currentNode[2],
        0
      ];
    } else {
      const distx = vx * this.u_interval;
      const disty = vy * this.u_interval;
      const distLength = sqrt(distx * distx + disty * disty);
      this.u_Data[i] = [
        currentNode[0] + distx,
        currentNode[1] + disty,
        currentNode[2],
        distLength
      ];
    }
    
    // the avarage move distance
    // need to share memory
    
  }
}
`,R.gForceBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define MAX_EDGE_PER_VERTEX __DefineValuePlaceholder__MAX_EDGE_PER_VERTEX\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n#define SHIFT_20 1048576.0\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_damping;\\nuniform float u_maxSpeed;\\nuniform float u_minMovement;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nuniform float u_coulombDisScale;\\nuniform float u_factor;\\nuniform sampler2D u_NodeAttributeArray1;\\nuniform vec2 u_NodeAttributeArray1Size;\\nvec4 getDatau_NodeAttributeArray1(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray1, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray1(float address1D) {\\n  return getDatau_NodeAttributeArray1(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray1Size));\\n}\\nvec4 getDatau_NodeAttributeArray1(int address1D) {\\n  return getDatau_NodeAttributeArray1(float(address1D));\\n}\\nuniform sampler2D u_NodeAttributeArray2;\\nuniform vec2 u_NodeAttributeArray2Size;\\nvec4 getDatau_NodeAttributeArray2(vec2 address2D) {\\n  return vec4(texture2D(u_NodeAttributeArray2, address2D).rgba);\\n}\\nvec4 getDatau_NodeAttributeArray2(float address1D) {\\n  return getDatau_NodeAttributeArray2(addrTranslation_1Dto2D(address1D, u_NodeAttributeArray2Size));\\n}\\nvec4 getDatau_NodeAttributeArray2(int address1D) {\\n  return getDatau_NodeAttributeArray2(float(address1D));\\n}\\nuniform float u_interval;\\nivec2 unpack_float(float packedValue) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint packedIntValue = int(packedValue);\\nint v0 = packedIntValue / int(SHIFT_20);\\nreturn ivec2(v0, packedIntValue - (v0 * int(SHIFT_20)));}\\nvec2 calcRepulsive(int i, vec4 currentNode) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {if (i != j) {vec4 nextNode = getDatau_Data(j);\\nfloat vx = currentNode.x - nextNode.x;\\nfloat vy = currentNode.y - nextNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat n_dist = (dist + 0.1) * u_coulombDisScale;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nvec4 attributesi = getDatau_NodeAttributeArray1(i);\\nvec4 attributesj = getDatau_NodeAttributeArray1(j);\\nfloat massi = attributesi.x;\\nfloat nodeStrengthi = attributesi.z;\\nfloat nodeStrengthj = attributesj.z;\\nfloat nodeStrength = (nodeStrengthi + nodeStrengthj) / 2.0;\\nfloat param = (nodeStrength * u_factor) / (n_dist * n_dist);\\nax += direx * param;\\nay += direy * param;}}\\nreturn vec2(ax, ay);}\\nvec2 calcGravity(int i, vec4 currentNode, vec4 attributes2) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat vx = currentNode.x - attributes2.x;\\nfloat vy = currentNode.y - attributes2.y;\\nfloat ax = vx * attributes2.z;\\nfloat ay = vy * attributes2.z;\\nreturn vec2(ax, ay);}\\nvec2 calcAttractive(int i, vec4 currentNode, vec4 attributes1) {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat mass = attributes1.x;\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nivec2 compressed = unpack_float(currentNode.z);\\nint length = compressed.x;\\nint arr_offset = compressed.y;\\nvec4 node_buffer;\\nfor (int p = 0; p < MAX_EDGE_PER_VERTEX; p++) {if (p >= length) {break;}\\nint arr_idx = arr_offset + (4 * p);\\nint buf_offset = arr_idx - ((arr_idx / 4) * 4);\\nif ((p == 0) || (buf_offset == 0)) {node_buffer = getDatau_Data(int(arr_idx / 4));}\\nfloat float_j = node_buffer.x;\\nvec4 nextNode = getDatau_Data(int(float_j));\\nfloat vx = nextNode.x - currentNode.x;\\nfloat vy = nextNode.y - currentNode.y;\\nfloat dist = sqrt((vx * vx) + (vy * vy)) + 0.01;\\nfloat direx = vx / dist;\\nfloat direy = vy / dist;\\nfloat edgeLength = node_buffer.y;\\nfloat edgeStrength = node_buffer.z;\\nfloat diff = edgeLength - dist;\\nfloat param = (diff * edgeStrength) / mass;\\nax -= direx * param;\\nay -= direy * param;}\\nreturn vec2(ax, ay);}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nint i = globalInvocationID.x;\\nvec4 currentNode = getDatau_Data(i);\\nvec4 movement = getDatau_AveMovement(0.0);\\nfloat ax = 0.0;\\nfloat ay = 0.0;\\nif ((i >= VERTEX_COUNT) || (movement.x < u_minMovement)) {gl_FragColor = vec4(currentNode);\\nreturn ;}\\nvec4 nodeAttributes1 = getDatau_NodeAttributeArray1(i);\\nvec4 nodeAttributes2 = getDatau_NodeAttributeArray2(i);\\nvec2 repulsive = calcRepulsive(i, currentNode);\\nax += repulsive.x;\\nay += repulsive.y;\\nvec2 attractive = calcAttractive(i, currentNode, nodeAttributes1);\\nax += attractive.x;\\nay += attractive.y;\\nvec2 gravity = calcGravity(i, currentNode, nodeAttributes2);\\nax -= gravity.x;\\nay -= gravity.y;\\nfloat param = u_interval * u_damping;\\nfloat vx = ax * param;\\nfloat vy = ay * param;\\nfloat vlength = sqrt((vx * vx) + (vy * vy)) + 0.0001;\\nif (vlength > u_maxSpeed) {float param2 = u_maxSpeed / vlength;\\nvx = param2 * vx;\\nvy = param2 * vy;}\\nif ((nodeAttributes1.w != 0.0) && (nodeAttributes2.w != 0.0)) {gl_FragColor = vec4(vec4(nodeAttributes1.w, nodeAttributes2.w, currentNode.z, 0.0));}else {float distx = vx * u_interval;\\nfloat disty = vy * u_interval;\\nfloat distLength = sqrt((distx * distx) + (disty * disty));\\ngl_FragColor = vec4(vec4(currentNode.x + distx, currentNode.y + disty, currentNode.z, distLength));}if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"MAX_EDGE_PER_VERTEX","type":"Float","runtime":true},{"name":"VERTEX_COUNT","type":"Float","runtime":true},{"name":"SHIFT_20","type":"Float","value":1048576,"runtime":false}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]},{"name":"u_damping","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_maxSpeed","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_minMovement","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_coulombDisScale","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_factor","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray1","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_NodeAttributeArray2","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_interval","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_Data","size":[1,1],"length":1},"needPingpong":true}}',R.aveMovementCode=`
const VERTEX_COUNT;
@numthreads(1, 1, 1)
class CalcAveMovement {
  @in
  u_Data: vec4[];
  @in
  u_iter: float;
  @in @out
  u_AveMovement: vec4[];
  @main
  compute() {
    let movement = 0;
    for (let j: int = 0; j < VERTEX_COUNT; j++) {
      const vertex = this.u_Data[j];
      movement += vertex[3];
    }
    movement = movement / float(VERTEX_COUNT);
    this.u_AveMovement[0] = [movement, 0, 0, 0];
  }
}
`,R.aveMovementBundle='{"shaders":{"WGSL":"","GLSL450":"","GLSL100":"\\n\\nfloat epsilon = 0.00001;\\nvec2 addrTranslation_1Dto2D(float address1D, vec2 texSize) {\\n  vec2 conv_const = vec2(1.0 / texSize.x, 1.0 / (texSize.x * texSize.y));\\n  vec2 normAddr2D = float(address1D) * conv_const;\\n  return vec2(fract(normAddr2D.x + epsilon), normAddr2D.y);\\n}\\n\\nvoid barrier() {}\\n  \\n\\nuniform vec2 u_OutputTextureSize;\\nuniform int u_OutputTexelCount;\\nvarying vec2 v_TexCoord;\\n\\nbool gWebGPUDebug = false;\\nvec4 gWebGPUDebugOutput = vec4(0.0);\\n\\n#define VERTEX_COUNT __DefineValuePlaceholder__VERTEX_COUNT\\n\\nuniform sampler2D u_Data;\\nuniform vec2 u_DataSize;\\nvec4 getDatau_Data(vec2 address2D) {\\n  return vec4(texture2D(u_Data, address2D).rgba);\\n}\\nvec4 getDatau_Data(float address1D) {\\n  return getDatau_Data(addrTranslation_1Dto2D(address1D, u_DataSize));\\n}\\nvec4 getDatau_Data(int address1D) {\\n  return getDatau_Data(float(address1D));\\n}\\nuniform float u_iter;\\nuniform sampler2D u_AveMovement;\\nuniform vec2 u_AveMovementSize;\\nvec4 getDatau_AveMovement(vec2 address2D) {\\n  return vec4(texture2D(u_AveMovement, address2D).rgba);\\n}\\nvec4 getDatau_AveMovement(float address1D) {\\n  return getDatau_AveMovement(addrTranslation_1Dto2D(address1D, u_AveMovementSize));\\n}\\nvec4 getDatau_AveMovement(int address1D) {\\n  return getDatau_AveMovement(float(address1D));\\n}\\nvoid main() {\\nivec3 workGroupSize = ivec3(1, 1, 1);\\nivec3 numWorkGroups = ivec3(1, 1, 1);     \\nint globalInvocationIndex = int(floor(v_TexCoord.x * u_OutputTextureSize.x))\\n  + int(floor(v_TexCoord.y * u_OutputTextureSize.y)) * int(u_OutputTextureSize.x);\\nint workGroupIDLength = globalInvocationIndex / (workGroupSize.x * workGroupSize.y * workGroupSize.z);\\nivec3 workGroupID = ivec3(workGroupIDLength / numWorkGroups.y / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.z, workGroupIDLength / numWorkGroups.x / numWorkGroups.y);\\nint localInvocationIDZ = globalInvocationIndex / (workGroupSize.x * workGroupSize.y);\\nint localInvocationIDY = (globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y) / workGroupSize.x;\\nint localInvocationIDX = globalInvocationIndex - localInvocationIDZ * workGroupSize.x * workGroupSize.y - localInvocationIDY * workGroupSize.x;\\nivec3 localInvocationID = ivec3(localInvocationIDX, localInvocationIDY, localInvocationIDZ);\\nivec3 globalInvocationID = workGroupID * workGroupSize + localInvocationID;\\nint localInvocationIndex = localInvocationID.z * workGroupSize.x * workGroupSize.y\\n                + localInvocationID.y * workGroupSize.x + localInvocationID.x;\\nfloat movement = 0.0;\\nfor (int j = 0; j < VERTEX_COUNT; j++) {vec4 vertex = getDatau_Data(j);\\nmovement += vertex.w;}\\nmovement = movement / float(VERTEX_COUNT);\\ngl_FragColor = vec4(vec4(movement, 0.0, 0.0, 0.0));if (gWebGPUDebug) {\\n  gl_FragColor = gWebGPUDebugOutput;\\n}}\\n"},"context":{"name":"","dispatch":[1,1,1],"threadGroupSize":[1,1,1],"maxIteration":1,"defines":[{"name":"VERTEX_COUNT","type":"Float","runtime":true}],"uniforms":[{"name":"u_Data","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_iter","type":"Float","storageClass":"Uniform","readonly":true,"writeonly":false,"size":[1,1]},{"name":"u_AveMovement","type":"vec4<f32>[]","storageClass":"StorageBuffer","readonly":false,"writeonly":false,"size":[1,1]}],"globalDeclarations":[],"output":{"name":"u_AveMovement","size":[1,1],"length":1},"needPingpong":true}}'},94414:function(Se,R,et){"use strict";var ft=this&&this.__extends||function(){var H=function(F,M){return H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(A,y){A.__proto__=y}||function(A,y){for(var x in y)Object.prototype.hasOwnProperty.call(y,x)&&(A[x]=y[x])},H(F,M)};return function(F,M){if(typeof M!="function"&&M!==null)throw new TypeError("Class extends value "+String(M)+" is not a constructor or null");H(F,M);function A(){this.constructor=F}F.prototype=M===null?Object.create(M):(A.prototype=M.prototype,new A)}}();Object.defineProperty(R,"__esModule",{value:!0}),R.GridLayout=void 0;var nt=et(49784),V=et(62329),z=function(H){ft(F,H);function F(M){var A=H.call(this)||this;return A.begin=[0,0],A.preventOverlap=!0,A.preventOverlapPadding=10,A.condense=!1,A.sortBy="degree",A.nodes=[],A.edges=[],A.width=300,A.height=300,A.row=0,A.col=0,A.cellWidth=0,A.cellHeight=0,A.cellUsed={},A.id2manPos={},A.onLayoutEnd=function(){},A.updateCfg(M),A}return F.prototype.getDefaultCfg=function(){return{begin:[0,0],preventOverlap:!0,preventOverlapPadding:10,condense:!1,rows:void 0,cols:void 0,position:void 0,sortBy:"degree",nodeSize:30}},F.prototype.execute=function(){var M=this,A=M.nodes,y=M.edges,x=M.begin,p=A.length;if(p===0)return M.onLayoutEnd&&M.onLayoutEnd(),{nodes:A,edges:y};if(p===1)return A[0].x=x[0],A[0].y=x[1],M.onLayoutEnd&&M.onLayoutEnd(),{nodes:A,edges:y};var _=M.sortBy,E=M.width,b=M.height,k=M.condense,N=M.preventOverlapPadding,g=M.preventOverlap,v=M.nodeSpacing,K=M.nodeSize,B=[];A.forEach(function(le){B.push(le)});var G={};if(B.forEach(function(le,dt){G[le.id]=dt}),(_==="degree"||!(0,nt.isString)(_)||B[0][_]===void 0)&&(_="degree",(0,nt.isNaN)(A[0].degree))){var Y=(0,nt.getDegree)(B.length,G,y);B.forEach(function(le,dt){le.degree=Y[dt].all})}B.sort(function(le,dt){return dt[_]-le[_]}),!E&&typeof window!="undefined"&&(E=window.innerWidth),!b&&typeof window!="undefined"&&(b=window.innerHeight);var j=M.rows,Q=M.cols!=null?M.cols:M.columns;if(M.cells=p,j!=null&&Q!=null?(M.rows=j,M.cols=Q):j!=null&&Q==null?(M.rows=j,M.cols=Math.ceil(M.cells/M.rows)):j==null&&Q!=null?(M.cols=Q,M.rows=Math.ceil(M.cells/M.cols)):(M.splits=Math.sqrt(M.cells*M.height/M.width),M.rows=Math.round(M.splits),M.cols=Math.round(M.width/M.height*M.splits)),M.rows=Math.max(M.rows,1),M.cols=Math.max(M.cols,1),M.cols*M.rows>M.cells){var Z=M.small(),rt=M.large();(Z-1)*rt>=M.cells?M.small(Z-1):(rt-1)*Z>=M.cells&&M.large(rt-1)}else for(;M.cols*M.rows<M.cells;){var Z=M.small(),rt=M.large();(rt+1)*Z>=M.cells?M.large(rt+1):M.small(Z+1)}if(M.cellWidth=E/M.cols,M.cellHeight=b/M.rows,k&&(M.cellWidth=0,M.cellHeight=0),g||v){var ut=(0,nt.getFuncByUnknownType)(10,v),ht=(0,nt.getFuncByUnknownType)(30,K,!1);B.forEach(function(le){(!le.x||!le.y)&&(le.x=0,le.y=0);var dt=ht(le)||30,ot,yt;(0,nt.isArray)(dt)?(ot=dt[0],yt=dt[1]):(ot=dt,yt=dt);var Lt=ut!==void 0?ut(le):N,Ot=ot+Lt,Wt=yt+Lt;M.cellWidth=Math.max(M.cellWidth,Ot),M.cellHeight=Math.max(M.cellHeight,Wt)})}M.cellUsed={},M.row=0,M.col=0,M.id2manPos={};for(var kt=0;kt<B.length;kt++){var At=B[kt],Ht=void 0;if(M.position&&(Ht=M.position(At)),Ht&&(Ht.row!==void 0||Ht.col!==void 0)){var Rt={row:Ht.row,col:Ht.col};if(Rt.col===void 0)for(Rt.col=0;M.used(Rt.row,Rt.col);)Rt.col++;else if(Rt.row===void 0)for(Rt.row=0;M.used(Rt.row,Rt.col);)Rt.row++;M.id2manPos[At.id]=Rt,M.use(Rt.row,Rt.col)}M.getPos(At)}return M.onLayoutEnd&&M.onLayoutEnd(),{edges:y,nodes:B}},F.prototype.small=function(M){var A=this,y,x=A.rows||5,p=A.cols||5;if(M==null)y=Math.min(x,p);else{var _=Math.min(x,p);_===A.rows?A.rows=M:A.cols=M}return y},F.prototype.large=function(M){var A=this,y,x=A.rows||5,p=A.cols||5;if(M==null)y=Math.max(x,p);else{var _=Math.max(x,p);_===A.rows?A.rows=M:A.cols=M}return y},F.prototype.used=function(M,A){var y=this;return y.cellUsed["c-".concat(M,"-").concat(A)]||!1},F.prototype.use=function(M,A){var y=this;y.cellUsed["c-".concat(M,"-").concat(A)]=!0},F.prototype.moveToNextCell=function(){var M=this,A=M.cols||5;M.col++,M.col>=A&&(M.col=0,M.row++)},F.prototype.getPos=function(M){var A=this,y=A.begin,x=A.cellWidth,p=A.cellHeight,_,E,b=A.id2manPos[M.id];if(b)_=b.col*x+x/2+y[0],E=b.row*p+p/2+y[1];else{for(;A.used(A.row,A.col);)A.moveToNextCell();_=A.col*x+x/2+y[0],E=A.row*p+p/2+y[1],A.use(A.row,A.col),A.moveToNextCell()}M.x=_,M.y=E},F.prototype.getType=function(){return"grid"},F}(V.Base);R.GridLayout=z},2584:function(Se,R,et){"use strict";var ft=this&&this.__createBinding||(Object.create?function(Y,j,Q,Z){Z===void 0&&(Z=Q);var rt=Object.getOwnPropertyDescriptor(j,Q);(!rt||("get"in rt?!j.__esModule:rt.writable||rt.configurable))&&(rt={enumerable:!0,get:function(){return j[Q]}}),Object.defineProperty(Y,Z,rt)}:function(Y,j,Q,Z){Z===void 0&&(Z=Q),Y[Z]=j[Q]}),nt=this&&this.__exportStar||function(Y,j){for(var Q in Y)Q!=="default"&&!Object.prototype.hasOwnProperty.call(j,Q)&&ft(j,Y,Q)};Object.defineProperty(R,"__esModule",{value:!0}),R.ERLayout=R.ForceAtlas2Layout=R.ComboCombinedLayout=R.ComboForceLayout=R.GForceGPULayout=R.FruchtermanGPULayout=R.FruchtermanLayout=R.MDSLayout=R.ConcentricLayout=R.RadialLayout=R.DagreCompoundLayout=R.DagreLayout=R.CircularLayout=R.ForceLayout=R.Force2Layout=R.GForceLayout=R.RandomLayout=R.GridLayout=R.Layouts=R.Layout=void 0;var V=et(94414);Object.defineProperty(R,"GridLayout",{enumerable:!0,get:function(){return V.GridLayout}});var z=et(39711);Object.defineProperty(R,"RandomLayout",{enumerable:!0,get:function(){return z.RandomLayout}});var H=et(13653);Object.defineProperty(R,"GForceLayout",{enumerable:!0,get:function(){return H.GForceLayout}});var F=et(6740);Object.defineProperty(R,"Force2Layout",{enumerable:!0,get:function(){return F.Force2Layout}});var M=et(85717);Object.defineProperty(R,"ForceLayout",{enumerable:!0,get:function(){return M.ForceLayout}});var A=et(64885);Object.defineProperty(R,"CircularLayout",{enumerable:!0,get:function(){return A.CircularLayout}});var y=et(20171);Object.defineProperty(R,"DagreLayout",{enumerable:!0,get:function(){return y.DagreLayout}});var x=et(77057);Object.defineProperty(R,"DagreCompoundLayout",{enumerable:!0,get:function(){return x.DagreCompoundLayout}});var p=et(47944);Object.defineProperty(R,"RadialLayout",{enumerable:!0,get:function(){return p.RadialLayout}});var _=et(43281);Object.defineProperty(R,"ConcentricLayout",{enumerable:!0,get:function(){return _.ConcentricLayout}});var E=et(52899);Object.defineProperty(R,"MDSLayout",{enumerable:!0,get:function(){return E.MDSLayout}});var b=et(80374);Object.defineProperty(R,"FruchtermanLayout",{enumerable:!0,get:function(){return b.FruchtermanLayout}});var k=et(87745);Object.defineProperty(R,"FruchtermanGPULayout",{enumerable:!0,get:function(){return k.FruchtermanGPULayout}});var N=et(85194);Object.defineProperty(R,"GForceGPULayout",{enumerable:!0,get:function(){return N.GForceGPULayout}});var g=et(66590);Object.defineProperty(R,"ComboForceLayout",{enumerable:!0,get:function(){return g.ComboForceLayout}});var v=et(63861);Object.defineProperty(R,"ComboCombinedLayout",{enumerable:!0,get:function(){return v.ComboCombinedLayout}});var K=et(48564);Object.defineProperty(R,"ForceAtlas2Layout",{enumerable:!0,get:function(){return K.ForceAtlas2Layout}});var B=et(90441);Object.defineProperty(R,"ERLayout",{enumerable:!0,get:function(){return B.ERLayout}});var G=et(42875);Object.defineProperty(R,"Layout",{enumerable:!0,get:function(){return G.Layout}}),Object.defineProperty(R,"Layouts",{enumerable:!0,get:function(){return G.Layouts}}),nt(et(32867),R)},42875:function(Se,R,et){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.Layouts=R.Layout=void 0;var ft=et(95326),nt=et(94414),V=et(39711),z=et(6740),H=et(13653),F=et(85717),M=et(64885),A=et(20171),y=et(47944),x=et(43281),p=et(52899),_=et(80374),E=et(87745),b=et(85194),k=et(66590),N=et(63861),g=et(48564),v=et(90441),K=et(77057),B=et(49784),G=function(){function Y(j){var Q=(0,ft.getLayoutByName)(j.type);this.layoutInstance=new Q(j)}return Y.prototype.layout=function(j){return this.layoutInstance.layout(j)},Y.prototype.updateCfg=function(j){this.layoutInstance.updateCfg(j)},Y.prototype.init=function(j){this.correctLayers(j.nodes),this.layoutInstance.init(j)},Y.prototype.correctLayers=function(j){if(j!=null&&j.length){var Q=1/0,Z=[];if(j.forEach(function(ut){(0,B.isString)(ut.layer)&&(ut.layer=parseInt(ut.layer,10)),!(ut.layer===void 0||isNaN(ut.layer))&&(Z.push(ut),ut.layer<Q&&(Q=ut.layer))}),Q<=0){var rt=Math.abs(Q)+1;Z.forEach(function(ut){return ut.layer+=rt})}}},Y.prototype.execute=function(){this.layoutInstance.execute()},Y.prototype.getDefaultCfg=function(){return this.layoutInstance.getDefaultCfg()},Y.prototype.destroy=function(){return this.layoutInstance.destroy()},Y}();R.Layout=G,R.Layouts={force:F.ForceLayout,fruchterman:_.FruchtermanLayout,forceAtlas2:g.ForceAtlas2Layout,gForce:H.GForceLayout,force2:z.Force2Layout,dagre:A.DagreLayout,dagreCompound:K.DagreCompoundLayout,circular:M.CircularLayout,radial:y.RadialLayout,concentric:x.ConcentricLayout,grid:nt.GridLayout,mds:p.MDSLayout,comboForce:k.ComboForceLayout,comboCombined:N.ComboCombinedLayout,random:V.RandomLayout,"gForce-gpu":b.GForceGPULayout,"fruchterman-gpu":E.FruchtermanGPULayout,er:v.ERLayout}},52899:function(Se,R,et){"use strict";var ft=this&&this.__extends||function(){var F=function(M,A){return F=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(y,x){y.__proto__=x}||function(y,x){for(var p in x)Object.prototype.hasOwnProperty.call(x,p)&&(y[p]=x[p])},F(M,A)};return function(M,A){if(typeof A!="function"&&A!==null)throw new TypeError("Class extends value "+String(A)+" is not a constructor or null");F(M,A);function y(){this.constructor=M}M.prototype=A===null?Object.create(A):(y.prototype=A.prototype,new y)}}();Object.defineProperty(R,"__esModule",{value:!0}),R.MDSLayout=void 0;var nt=et(97828),V=et(49784),z=et(62329),H=function(F){ft(M,F);function M(A){var y=F.call(this)||this;return y.center=[0,0],y.linkDistance=50,y.nodes=[],y.edges=[],y.onLayoutEnd=function(){},y.updateCfg(A),y}return M.prototype.getDefaultCfg=function(){return{center:[0,0],linkDistance:50}},M.prototype.execute=function(){var A=this,y=A.nodes,x=A.edges,p=x===void 0?[]:x,_=A.center;if(!y||y.length===0){A.onLayoutEnd&&A.onLayoutEnd();return}if(y.length===1){y[0].x=_[0],y[0].y=_[1],A.onLayoutEnd&&A.onLayoutEnd();return}var E=A.linkDistance,b=(0,V.getAdjMatrix)({nodes:y,edges:p},!1),k=(0,V.floydWarshall)(b);A.handleInfinity(k);var N=(0,V.scaleMatrix)(k,E);A.scaledDistances=N;var g=A.runMDS();return A.positions=g,g.forEach(function(v,K){y[K].x=v[0]+_[0],y[K].y=v[1]+_[1]}),A.onLayoutEnd&&A.onLayoutEnd(),{nodes:y,edges:p}},M.prototype.runMDS=function(){var A=this,y=2,x=A.scaledDistances,p=nt.Matrix.mul(nt.Matrix.pow(x,2),-.5),_=p.mean("row"),E=p.mean("column"),b=p.mean();p.add(b).subRowVector(_).subColumnVector(E);var k=new nt.SingularValueDecomposition(p),N=nt.Matrix.sqrt(k.diagonalMatrix).diagonal();return k.leftSingularVectors.toJSON().map(function(g){return nt.Matrix.mul([g],[N]).toJSON()[0].splice(0,y)})},M.prototype.handleInfinity=function(A){var y=-999999;A.forEach(function(x){x.forEach(function(p){p!==1/0&&y<p&&(y=p)})}),A.forEach(function(x,p){x.forEach(function(_,E){_===1/0&&(A[p][E]=y)})})},M.prototype.getType=function(){return"mds"},M}(z.Base);R.MDSLayout=H},47944:function(Se,R,et){"use strict";var ft=this&&this.__createBinding||(Object.create?function(V,z,H,F){F===void 0&&(F=H);var M=Object.getOwnPropertyDescriptor(z,H);(!M||("get"in M?!z.__esModule:M.writable||M.configurable))&&(M={enumerable:!0,get:function(){return z[H]}}),Object.defineProperty(V,F,M)}:function(V,z,H,F){F===void 0&&(F=H),V[F]=z[H]}),nt=this&&this.__exportStar||function(V,z){for(var H in V)H!=="default"&&!Object.prototype.hasOwnProperty.call(z,H)&&ft(z,V,H)};Object.defineProperty(R,"__esModule",{value:!0}),nt(et(55974),R)},66082:function(Se,R,et){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var ft=et(97828),nt=function(){function V(z){this.distances=z.distances,this.dimension=z.dimension||2,this.linkDistance=z.linkDistance}return V.prototype.layout=function(){var z=this,H=z.dimension,F=z.distances,M=z.linkDistance;try{var A=ft.Matrix.mul(ft.Matrix.pow(F,2),-.5),y=A.mean("row"),x=A.mean("column"),p=A.mean();A.add(p).subRowVector(y).subColumnVector(x);var _=new ft.SingularValueDecomposition(A),E=ft.Matrix.sqrt(_.diagonalMatrix).diagonal();return _.leftSingularVectors.toJSON().map(function(v){return ft.Matrix.mul([v],[E]).toJSON()[0].splice(0,H)})}catch(v){for(var b=[],k=0;k<F.length;k++){var N=Math.random()*M,g=Math.random()*M;b.push([N,g])}return b}},V}();R.default=nt},55974:function(Se,R,et){"use strict";var ft=this&&this.__extends||function(){var p=function(_,E){return p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(b,k){b.__proto__=k}||function(b,k){for(var N in k)Object.prototype.hasOwnProperty.call(k,N)&&(b[N]=k[N])},p(_,E)};return function(_,E){if(typeof E!="function"&&E!==null)throw new TypeError("Class extends value "+String(E)+" is not a constructor or null");p(_,E);function b(){this.constructor=_}_.prototype=E===null?Object.create(E):(b.prototype=E.prototype,new b)}}(),nt=this&&this.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(R,"__esModule",{value:!0}),R.RadialLayout=void 0;var V=et(49784),z=et(62329),H=nt(et(66082)),F=nt(et(6290));function M(p){for(var _=p.length,E=p[0].length,b=[],k=0;k<_;k++){for(var N=[],g=0;g<E;g++)p[k][g]!==0?N.push(1/(p[k][g]*p[k][g])):N.push(0);b.push(N)}return b}function A(p,_){var E=-1;return p.forEach(function(b,k){b.id===_&&(E=k)}),E}function y(p,_){return Math.sqrt((p[0]-_[0])*(p[0]-_[0])+(p[1]-_[1])*(p[1]-_[1]))}var x=function(p){ft(_,p);function _(E){var b=p.call(this)||this;return b.maxIteration=1e3,b.focusNode=null,b.unitRadius=null,b.linkDistance=50,b.preventOverlap=!1,b.strictRadial=!0,b.maxPreventOverlapIteration=200,b.sortStrength=10,b.nodes=[],b.edges=[],b.updateCfg(E),b}return _.prototype.getDefaultCfg=function(){return{maxIteration:1e3,focusNode:null,unitRadius:null,linkDistance:50,preventOverlap:!1,nodeSize:void 0,nodeSpacing:void 0,strictRadial:!0,maxPreventOverlapIteration:200,sortBy:void 0,sortStrength:10}},_.prototype.execute=function(){var E=this,b=E.nodes,k=E.edges||[];if(!b||b.length===0){E.onLayoutEnd&&E.onLayoutEnd();return}!E.width&&typeof window!="undefined"&&(E.width=window.innerWidth),!E.height&&typeof window!="undefined"&&(E.height=window.innerHeight),E.center||(E.center=[E.width/2,E.height/2]);var N=E.center;if(b.length===1){b[0].x=N[0],b[0].y=N[1],E.onLayoutEnd&&E.onLayoutEnd();return}var g=E.linkDistance,v=null;if((0,V.isString)(E.focusNode)){for(var K=!1,B=0;B<b.length;B++)b[B].id===E.focusNode&&(v=b[B],E.focusNode=v,K=!0,B=b.length);K||(v=null)}else v=E.focusNode;v||(v=b[0],E.focusNode=v);var G=A(b,v.id);G<0&&(G=0),E.focusIndex=G;var Y=(0,V.getAdjMatrix)({nodes:b,edges:k},!1),j=(0,V.floydWarshall)(Y),Q=E.maxToFocus(j,G);E.handleInfinity(j,G,Q+1),E.distances=j;var Z=j[G],rt=E.width||500,ut=E.height||500,ht=rt-N[0]>N[0]?N[0]:rt-N[0],kt=ut-N[1]>N[1]?N[1]:ut-N[1];ht===0&&(ht=rt/2),kt===0&&(kt=ut/2);var At=kt>ht?ht:kt,Ht=Math.max.apply(Math,Z),Rt=[];Z.forEach(function(Ce,_e){E.unitRadius||(E.unitRadius=At/Ht),Rt[_e]=Ce*E.unitRadius}),E.radii=Rt;var le=E.eIdealDisMatrix();E.eIdealDistances=le;var dt=M(le);E.weights=dt;var ot=new H.default({linkDistance:g,distances:le}),yt=ot.layout();yt.forEach(function(Ce){(0,V.isNaN)(Ce[0])&&(Ce[0]=Math.random()*g),(0,V.isNaN)(Ce[1])&&(Ce[1]=Math.random()*g)}),E.positions=yt,yt.forEach(function(Ce,_e){b[_e].x=Ce[0]+N[0],b[_e].y=Ce[1]+N[1]}),yt.forEach(function(Ce){Ce[0]-=yt[G][0],Ce[1]-=yt[G][1]}),E.run();var Lt=E.preventOverlap,Ot=E.nodeSize,Wt,Jt=E.strictRadial;if(Lt){var De=E.nodeSpacing,te;(0,V.isNumber)(De)?te=function(){return De}:(0,V.isFunction)(De)?te=De:te=function(){return 0},Ot?(0,V.isArray)(Ot)?Wt=function(Ce){var _e=Ot[0]>Ot[1]?Ot[0]:Ot[1];return _e+te(Ce)}:Wt=function(Ce){return Ot+te(Ce)}:Wt=function(Ce){if(Ce.size){if((0,V.isArray)(Ce.size)){var _e=Ce.size[0]>Ce.size[1]?Ce.size[0]:Ce.size[1];return _e+te(Ce)}if((0,V.isObject)(Ce.size)){var _e=Ce.size.width>Ce.size.height?Ce.size.width:Ce.size.height;return _e+te(Ce)}return Ce.size+te(Ce)}return 10+te(Ce)};var oe={nodes:b,nodeSizeFunc:Wt,adjMatrix:Y,positions:yt,radii:Rt,height:ut,width:rt,strictRadial:Jt,focusID:G,iterations:E.maxPreventOverlapIteration||200,k:yt.length/4.5},me=new F.default(oe);yt=me.layout()}return yt.forEach(function(Ce,_e){b[_e].x=Ce[0]+N[0],b[_e].y=Ce[1]+N[1]}),E.onLayoutEnd&&E.onLayoutEnd(),{nodes:b,edges:k}},_.prototype.run=function(){for(var E=this,b=E.maxIteration,k=E.positions||[],N=E.weights||[],g=E.eIdealDistances||[],v=E.radii||[],K=0;K<=b;K++){var B=K/b;E.oneIteration(B,k,v,g,N)}},_.prototype.oneIteration=function(E,b,k,N,g){var v=this,K=1-E,B=v.focusIndex;b.forEach(function(G,Y){var j=y(G,[0,0]),Q=j===0?0:1/j;if(Y!==B){var Z=0,rt=0,ut=0;b.forEach(function(kt,At){if(Y!==At){var Ht=y(G,kt),Rt=Ht===0?0:1/Ht,le=N[At][Y];ut+=g[Y][At],Z+=g[Y][At]*(kt[0]+le*(G[0]-kt[0])*Rt),rt+=g[Y][At]*(kt[1]+le*(G[1]-kt[1])*Rt)}});var ht=k[Y]===0?0:1/k[Y];ut*=K,ut+=E*ht*ht,Z*=K,Z+=E*ht*G[0]*Q,G[0]=Z/ut,rt*=K,rt+=E*ht*G[1]*Q,G[1]=rt/ut}})},_.prototype.eIdealDisMatrix=function(){var E=this,b=E.nodes;if(!b)return[];var k=E.distances,N=E.linkDistance,g=E.radii||[],v=E.unitRadius||50,K=[];return k&&k.forEach(function(B,G){var Y=[];B.forEach(function(j,Q){if(G===Q)Y.push(0);else if(g[G]===g[Q])if(E.sortBy==="data")Y.push(j*(Math.abs(G-Q)*E.sortStrength)/(g[G]/v));else if(E.sortBy){var Z=b[G][E.sortBy]||0,rt=b[Q][E.sortBy]||0;(0,V.isString)(Z)&&(Z=Z.charCodeAt(0)),(0,V.isString)(rt)&&(rt=rt.charCodeAt(0)),Y.push(j*(Math.abs(Z-rt)*E.sortStrength)/(g[G]/v))}else Y.push(j*N/(g[G]/v));else{var ut=(N+v)/2;Y.push(j*ut)}}),K.push(Y)}),K},_.prototype.handleInfinity=function(E,b,k){for(var N=E.length,g=0;g<N;g++)if(E[b][g]===1/0){E[b][g]=k,E[g][b]=k;for(var v=0;v<N;v++)E[g][v]!==1/0&&E[b][v]===1/0&&(E[b][v]=k+E[g][v],E[v][b]=k+E[g][v])}for(var g=0;g<N;g++)if(g!==b){for(var v=0;v<N;v++)if(E[g][v]===1/0){var K=Math.abs(E[b][g]-E[b][v]);K=K===0?1:K,E[g][v]=K}}},_.prototype.maxToFocus=function(E,b){for(var k=0,N=0;N<E[b].length;N++)E[b][N]!==1/0&&(k=E[b][N]>k?E[b][N]:k);return k},_.prototype.getType=function(){return"radial"},_}(z.Base);R.RadialLayout=x},6290:function(Se,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0});var et=800,ft=function(){function nt(V){this.disp=[],this.positions=V.positions,this.adjMatrix=V.adjMatrix,this.focusID=V.focusID,this.radii=V.radii,this.iterations=V.iterations||10,this.height=V.height||10,this.width=V.width||10,this.speed=V.speed||100,this.gravity=V.gravity||10,this.nodeSizeFunc=V.nodeSizeFunc,this.k=V.k||5,this.strictRadial=V.strictRadial,this.nodes=V.nodes}return nt.prototype.layout=function(){var V=this,z=V.positions,H=[],F=V.iterations,M=V.width/10;V.maxDisplace=M,V.disp=H;for(var A=0;A<F;A++)z.forEach(function(y,x){H[x]={x:0,y:0}}),V.getRepulsion(),V.updatePositions();return z},nt.prototype.getRepulsion=function(){var V=this,z=V.positions,H=V.nodes,F=V.disp,M=V.k,A=V.radii||[];z.forEach(function(y,x){F[x]={x:0,y:0},z.forEach(function(p,_){if(x!==_&&A[x]===A[_]){var E=y[0]-p[0],b=y[1]-p[1],k=Math.sqrt(E*E+b*b);if(k===0){k=1;var N=x>_?1:-1;E=.01*N,b=.01*N}if(k<V.nodeSizeFunc(H[x])/2+V.nodeSizeFunc(H[_])/2){var g=M*M/k;F[x].x+=E/k*g,F[x].y+=b/k*g}}})})},nt.prototype.updatePositions=function(){var V=this,z=V.positions,H=V.disp,F=V.speed,M=V.strictRadial,A=V.focusID,y=V.maxDisplace||V.width/10;M&&H.forEach(function(p,_){var E=z[_][0]-z[A][0],b=z[_][1]-z[A][1],k=Math.sqrt(E*E+b*b),N=b/k,g=-E/k,v=Math.sqrt(p.x*p.x+p.y*p.y),K=Math.acos((N*p.x+g*p.y)/v);K>Math.PI/2&&(K-=Math.PI/2,N*=-1,g*=-1);var B=Math.cos(K)*v;p.x=N*B,p.y=g*B});var x=V.radii;z.forEach(function(p,_){if(_!==A){var E=Math.sqrt(H[_].x*H[_].x+H[_].y*H[_].y);if(E>0&&_!==A){var b=Math.min(y*(F/et),E);if(p[0]+=H[_].x/E*b,p[1]+=H[_].y/E*b,M){var k=p[0]-z[A][0],N=p[1]-z[A][1],g=Math.sqrt(k*k+N*N);k=k/g*x[_],N=N/g*x[_],p[0]=z[A][0]+k,p[1]=z[A][1]+N}}}})},nt}();R.default=ft},39711:function(Se,R,et){"use strict";var ft=this&&this.__extends||function(){var z=function(H,F){return z=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(M,A){M.__proto__=A}||function(M,A){for(var y in A)Object.prototype.hasOwnProperty.call(A,y)&&(M[y]=A[y])},z(H,F)};return function(H,F){if(typeof F!="function"&&F!==null)throw new TypeError("Class extends value "+String(F)+" is not a constructor or null");z(H,F);function M(){this.constructor=H}H.prototype=F===null?Object.create(F):(M.prototype=F.prototype,new M)}}();Object.defineProperty(R,"__esModule",{value:!0}),R.RandomLayout=void 0;var nt=et(62329),V=function(z){ft(H,z);function H(F){var M=z.call(this)||this;return M.center=[0,0],M.width=300,M.height=300,M.nodes=[],M.edges=[],M.onLayoutEnd=function(){},M.updateCfg(F),M}return H.prototype.getDefaultCfg=function(){return{center:[0,0],width:300,height:300}},H.prototype.execute=function(){var F=this,M=F.nodes,A=.9,y=F.center;return!F.width&&typeof window!="undefined"&&(F.width=window.innerWidth),!F.height&&typeof window!="undefined"&&(F.height=window.innerHeight),M&&M.forEach(function(x){x.x=(Math.random()-.5)*A*F.width+y[0],x.y=(Math.random()-.5)*A*F.height+y[1]}),F.onLayoutEnd&&F.onLayoutEnd(),{nodes:M,edges:this.edges}},H.prototype.getType=function(){return"random"},H}(nt.Base);R.RandomLayout=V},32867:function(Se,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0})},95326:function(Se,R,et){"use strict";var ft=this&&this.__extends||function(){var A=function(y,x){return A=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,_){p.__proto__=_}||function(p,_){for(var E in _)Object.prototype.hasOwnProperty.call(_,E)&&(p[E]=_[E])},A(y,x)};return function(y,x){if(typeof x!="function"&&x!==null)throw new TypeError("Class extends value "+String(x)+" is not a constructor or null");A(y,x);function p(){this.constructor=y}y.prototype=x===null?Object.create(x):(p.prototype=x.prototype,new p)}}();Object.defineProperty(R,"__esModule",{value:!0}),R.getLayoutByName=R.unRegisterLayout=R.registerLayout=void 0;var nt=et(62329),V=et(49784),z=new Map,H=function(A,y){if(z.get(A)&&console.warn("The layout with the name ".concat(A," exists already, it will be overridden")),(0,V.isObject)(y)){var x=function(p){ft(_,p);function _(E){var b=this,k;b=p.call(this)||this;var N=b,g={},v=Object.assign({},N.getDefaultCfg(),((k=y.getDefaultCfg)===null||k===void 0?void 0:k.call(y))||{});return Object.assign(g,v,y,E),Object.keys(g).forEach(function(K){var B=g[K];N[K]=B}),b}return _}(nt.Base);z.set(A,x)}else z.set(A,y);return z.get(A)};R.registerLayout=H;var F=function(A){z.has(A)&&z.delete(A)};R.unRegisterLayout=F;var M=function(A){return z.has(A)?z.get(A):null};R.getLayoutByName=M},85087:function(Se,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.isArray=void 0,R.isArray=Array.isArray},78732:function(Se,R,et){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.getFuncByUnknownType=R.getFunc=R.isFunction=void 0;var ft=et(49784),nt=et(30627),V=function(F){return typeof F=="function"};R.isFunction=V;var z=function(F,M,A){var y;return A?y=A:(0,nt.isNumber)(F)?y=function(){return F}:y=function(){return M},y};R.getFunc=z;var H=function(F,M,A){return A===void 0&&(A=!0),!M&&M!==0?function(y){return y.size?(0,ft.isArray)(y.size)?y.size[0]>y.size[1]?y.size[0]:y.size[1]:(0,ft.isObject)(y.size)?y.size.width>y.size.height?y.size.width:y.size.height:y.size:F}:(0,R.isFunction)(M)?M:(0,nt.isNumber)(M)?function(){return M}:(0,ft.isArray)(M)?function(){if(A){var y=Math.max.apply(Math,M);return isNaN(y)?F:y}return M}:(0,ft.isObject)(M)?function(){if(A){var y=Math.max(M.width,M.height);return isNaN(y)?F:y}return[M.width,M.height]}:function(){return F}};R.getFuncByUnknownType=H},48835:function(Se,R,et){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.arrayToTextureData=R.attributesToTextureData=R.buildTextureDataWithTwoEdgeAttr=R.buildTextureData=R.proccessToFunc=void 0;var ft=et(49784),nt=et(80628),V=function(A,y){var x;return A?(0,ft.isNumber)(A)?x=function(){return A}:x=A:x=function(){return y||1},x};R.proccessToFunc=V;var z=function(A,y){var x=[],p=[],_={},E=0;for(E=0;E<A.length;E++){var b=A[E];_[b.id]=E,x.push(b.x),x.push(b.y),x.push(0),x.push(0),p.push([])}for(E=0;E<y.length;E++){var k=y[E],N=(0,nt.getEdgeTerminal)(k,"source"),g=(0,nt.getEdgeTerminal)(k,"target");!isNaN(_[N])&&!isNaN(_[g])&&(p[_[N]].push(_[g]),p[_[g]].push(_[N]))}var v=0;for(E=0;E<A.length;E++){var K=x.length,B=p[E],G=B.length;x[E*4+2]=K,x[E*4+3]=G,v=Math.max(v,G);for(var Y=0;Y<G;++Y){var j=B[Y];x.push(+j)}}for(;x.length%4!==0;)x.push(0);return{maxEdgePerVetex:v,array:new Float32Array(x)}};R.buildTextureData=z;var H=function(A,y,x,p){var _=[],E=[],b={},k=0;for(k=0;k<A.length;k++){var N=A[k];b[N.id]=k,_.push(N.x),_.push(N.y),_.push(0),_.push(0),E.push([])}for(k=0;k<y.length;k++){var g=y[k],v=(0,nt.getEdgeTerminal)(g,"source"),K=(0,nt.getEdgeTerminal)(g,"target");E[b[v]].push(b[K]),E[b[v]].push(x(g)),E[b[v]].push(p(g)),E[b[v]].push(0),E[b[K]].push(b[v]),E[b[K]].push(x(g)),E[b[K]].push(p(g)),E[b[K]].push(0)}var B=0;for(k=0;k<A.length;k++){var G=_.length,Y=E[k],j=Y.length;_[k*4+2]=G+1048576*j/4,_[k*4+3]=0,B=Math.max(B,j/4);for(var Q=0;Q<j;++Q){var Z=Y[Q];_.push(+Z)}}for(;_.length%4!==0;)_.push(0);return{maxEdgePerVetex:B,array:new Float32Array(_)}};R.buildTextureDataWithTwoEdgeAttr=H;var F=function(A,y){var x=[],p=A.length,_={};return y.forEach(function(E){A.forEach(function(b,k){if(_[E[b]]===void 0&&(_[E[b]]=Object.keys(_).length),x.push(_[E[b]]),k===p-1)for(;x.length%4!==0;)x.push(0)})}),{array:new Float32Array(x),count:Object.keys(_).length}};R.attributesToTextureData=F;var M=function(A){for(var y=[],x=A.length,p=A[0].length,_=function(b){A.forEach(function(k,N){if(y.push(k[b]),N===x-1)for(;y.length%4!==0;)y.push(0)})},E=0;E<p;E++)_(E);return new Float32Array(y)};R.arrayToTextureData=M},49784:function(Se,R,et){"use strict";var ft=this&&this.__createBinding||(Object.create?function(V,z,H,F){F===void 0&&(F=H);var M=Object.getOwnPropertyDescriptor(z,H);(!M||("get"in M?!z.__esModule:M.writable||M.configurable))&&(M={enumerable:!0,get:function(){return z[H]}}),Object.defineProperty(V,F,M)}:function(V,z,H,F){F===void 0&&(F=H),V[F]=z[H]}),nt=this&&this.__exportStar||function(V,z){for(var H in V)H!=="default"&&!Object.prototype.hasOwnProperty.call(z,H)&&ft(z,V,H)};Object.defineProperty(R,"__esModule",{value:!0}),nt(et(8055),R),nt(et(85087),R),nt(et(30627),R),nt(et(80628),R),nt(et(98130),R),nt(et(78732),R)},80628:function(Se,R,et){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.getCoreNodeAndRelativeLeafNodes=R.getAvgNodePosition=R.getLayoutBBox=R.traverseTreeUp=R.scaleMatrix=R.getAdjMatrix=R.floydWarshall=R.getDegreeMap=R.getDegree=R.getEdgeTerminal=void 0;var ft=et(85087),nt=et(30627),V=et(98130),z=function(v,K){var B=v[K];return(0,V.isObject)(B)?B.cell:B};R.getEdgeTerminal=z;var H=function(v,K,B){for(var G=[],Y=0;Y<v;Y++)G[Y]={in:0,out:0,all:0};return B&&B.forEach(function(j){var Q=(0,R.getEdgeTerminal)(j,"source"),Z=(0,R.getEdgeTerminal)(j,"target");Q&&G[K[Q]]&&(G[K[Q]].out+=1,G[K[Q]].all+=1),Z&&G[K[Z]]&&(G[K[Z]].in+=1,G[K[Z]].all+=1)}),G};R.getDegree=H;var F=function(v,K){var B={};return v.forEach(function(G){B[G.id]={in:0,out:0,all:0}}),K&&K.forEach(function(G){var Y=(0,R.getEdgeTerminal)(G,"source"),j=(0,R.getEdgeTerminal)(G,"target");Y&&(B[Y].out+=1,B[Y].all+=1),j&&(B[j].in+=1,B[j].all+=1)}),B};R.getDegreeMap=F;var M=function(v){for(var K=[],B=v.length,G=0;G<B;G+=1){K[G]=[];for(var Y=0;Y<B;Y+=1)G===Y?K[G][Y]=0:v[G][Y]===0||!v[G][Y]?K[G][Y]=1/0:K[G][Y]=v[G][Y]}for(var j=0;j<B;j+=1)for(var G=0;G<B;G+=1)for(var Y=0;Y<B;Y+=1)K[G][Y]>K[G][j]+K[j][Y]&&(K[G][Y]=K[G][j]+K[j][Y]);return K};R.floydWarshall=M;var A=function(v,K){var B=v.nodes,G=v.edges,Y=[],j={};if(!B)throw new Error("invalid nodes data!");return B&&B.forEach(function(Q,Z){j[Q.id]=Z;var rt=[];Y.push(rt)}),G==null||G.forEach(function(Q){var Z=(0,R.getEdgeTerminal)(Q,"source"),rt=(0,R.getEdgeTerminal)(Q,"target"),ut=j[Z],ht=j[rt];ut===void 0||ht===void 0||(Y[ut][ht]=1,K||(Y[ht][ut]=1))}),Y};R.getAdjMatrix=A;var y=function(v,K){var B=[];return v.forEach(function(G){var Y=[];G.forEach(function(j){Y.push(j*K)}),B.push(Y)}),B};R.scaleMatrix=y;var x=function(v,K){if(v&&v.children){for(var B=v.children.length-1;B>=0;B--)if(!x(v.children[B],K))return}return!!K(v)},p=function(v,K){typeof K=="function"&&x(v,K)};R.traverseTreeUp=p;var _=function(v){var K=1/0,B=1/0,G=-1/0,Y=-1/0;return v.forEach(function(j){var Q=j.size;(0,ft.isArray)(Q)?Q.length===1&&(Q=[Q[0],Q[0]]):(0,nt.isNumber)(Q)?Q=[Q,Q]:(Q===void 0||isNaN(Q))&&(Q=[30,30]);var Z=[Q[0]/2,Q[1]/2],rt=j.x-Z[0],ut=j.x+Z[0],ht=j.y-Z[1],kt=j.y+Z[1];K>rt&&(K=rt),B>ht&&(B=ht),G<ut&&(G=ut),Y<kt&&(Y=kt)}),{minX:K,minY:B,maxX:G,maxY:Y}};R.getLayoutBBox=_;var E=function(v){var K={x:0,y:0};v.forEach(function(G){K.x+=G.x||0,K.y+=G.y||0});var B=v.length||1;return{x:K.x/B,y:K.y/B}};R.getAvgNodePosition=E;var b=function(v,K,B){var G,Y;return v==="source"?((G=B==null?void 0:B.find(function(j){return j.target===K.id}))===null||G===void 0?void 0:G.source)||{}:((Y=B==null?void 0:B.find(function(j){return j.source===K.id}))===null||Y===void 0?void 0:Y.target)||{}},k=function(v,K,B){var G=[];switch(v){case"source":G=B==null?void 0:B.filter(function(j){return j.source===K.id}).map(function(j){return j.target});break;case"target":G=B==null?void 0:B.filter(function(j){return j.target===K.id}).map(function(j){return j.source});break;case"both":G=B==null?void 0:B.filter(function(j){return j.source===K.id}).map(function(j){return j.target}).concat(B==null?void 0:B.filter(function(j){return j.target===K.id}).map(function(j){return j.source}));break;default:break}var Y=new Set(G);return Array.from(Y)},N=function(v,K,B,G,Y){var j=B[K]||"",Q=(G==null?void 0:G.filter(function(Z){return Z[K]===j}))||[];return v==="leaf"&&(Q=Q.filter(function(Z){var rt,ut;return((rt=Y[Z.id])===null||rt===void 0?void 0:rt.in)===0||((ut=Y[Z.id])===null||ut===void 0?void 0:ut.out)===0})),Q},g=function(v,K,B,G,Y,j){var Q=Y[K.id],Z=Q.in,rt=Q.out,ut=K,ht=[];Z===0?(ut=b("source",K,B),ht=k("both",ut,B).map(function(At){return j[At]})):rt===0&&(ut=b("target",K,B),ht=k("both",ut,B).map(function(At){return j[At]})),ht=ht.filter(function(At){return Y[At.id]&&(Y[At.id].in===0||Y[At.id].out===0)});var kt=N(v,G,K,ht,Y);return{coreNode:ut,relativeLeafNodes:ht,sameTypeLeafNodes:kt}};R.getCoreNodeAndRelativeLeafNodes=g},30627:function(Se,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.toNumber=R.isNaN=R.isNumber=void 0;var et=function(V){return typeof V=="number"};R.isNumber=et;var ft=function(V){return Number.isNaN(Number(V))};R.isNaN=ft;var nt=function(V){var z=parseFloat(V);return(0,R.isNaN)(z)?V:z};R.toNumber=nt},98130:function(Se,R){"use strict";var et=this&&this.__assign||function(){return et=Object.assign||function(V){for(var z,H=1,F=arguments.length;H<F;H++){z=arguments[H];for(var M in z)Object.prototype.hasOwnProperty.call(z,M)&&(V[M]=z[M])}return V},et.apply(this,arguments)};Object.defineProperty(R,"__esModule",{value:!0}),R.clone=R.isObject=void 0;var ft=function(V){return V!==null&&typeof V=="object"};R.isObject=ft;var nt=function(V){if(V===null)return V;if(V instanceof Date)return new Date(V.getTime());if(V instanceof Array){var z=[];return V.forEach(function(F){z.push(F)}),z.map(function(F){return(0,R.clone)(F)})}if(typeof V=="object"&&Object.keys(V).length){var H=et({},V);return Object.keys(H).forEach(function(F){H[F]=(0,R.clone)(H[F])}),H}return V};R.clone=nt},8055:function(Se,R){"use strict";Object.defineProperty(R,"__esModule",{value:!0}),R.camelize=R.isString=void 0;var et=function(V){return typeof V=="string"};R.isString=et;var ft=function(V){var z=Object.create(null);return function(H){var F=z[H];return F||(z[H]=V(H))}},nt=/-(\w)/g;R.camelize=ft(function(V){return V.replace(nt,function(z,H){return H?H.toUpperCase():""})})},11707:function(Se,R,et){"use strict";et.r(R),et.d(R,{Cache:function(){return Yf},angleTo:function(){return ht},arcToCubic:function(){return Tt},assign:function(){return Kr},augment:function(){return Lr},clamp:function(){return Gi},clearAnimationFrame:function(){return Sr},clone:function(){return _a},clonePath:function(){return Sn},contains:function(){return bt},createDOM:function(){return Is},debounce:function(){return pa},deepMix:function(){return Ai},difference:function(){return q},direction:function(){return ut},distanceSquareRoot:function(){return Fn},each:function(){return wr},endsWith:function(){return Po},equalizeSegments:function(){return cn},every:function(){return Wo},extend:function(){return Oi},filter:function(){return I},find:function(){return xe},findIndex:function(){return ke},firstValue:function(){return lr},fixedBase:function(){return qi},flatten:function(){return Dn},flattenDeep:function(){return ta},forIn:function(){return Zt},get:function(){return Uf},getDrawDirection:function(){return W},getPathArea:function(){return ya},getPathBBox:function(){return ca},getPathBBoxTotalLength:function(){return bn},getPointAtLength:function(){return qe},getRange:function(){return Za},getRotatedCurve:function(){return Gn},getTotalLength:function(){return oa},getType:function(){return tu},getWrapBehavior:function(){return ds},gradient:function(){return b},group:function(){return Ho},groupBy:function(){return bi},groupToMap:function(){return Vo},has:function(){return Xe},hasKey:function(){return Ke},hasValue:function(){return Nn},head:function(){return Mi},identity:function(){return Au},includes:function(){return bt},indexOf:function(){return to},isArguments:function(){return eu},isArray:function(){return Ae},isArrayLike:function(){return tn},isBoolean:function(){return No},isDate:function(){return Bf},isDecimal:function(){return Bo},isElement:function(){return He},isEmpty:function(){return Fs},isEqual:function(){return Oo},isEqualWith:function(){return Mu},isError:function(){return Bs},isEven:function(){return jo},isFinite:function(){return Gf},isFunction:function(){return z},isInteger:function(){return Zo},isMatch:function(){return xr},isNegative:function(){return Da},isNil:function(){return Gt},isNull:function(){return L},isNumber:function(){return hi},isNumberEqual:function(){return zi},isObject:function(){return fr},isObjectLike:function(){return Yr},isOdd:function(){return Ii},isPlainObject:function(){return It},isPointInPolygon:function(){return uf},isPointInStroke:function(){return ar},isPolygonsIntersect:function(){return Vu},isPositive:function(){return Bi},isPrototype:function(){return Nt},isRegExp:function(){return Vt},isString:function(){return Vi},isType:function(){return Ye},isUndefined:function(){return ge},keys:function(){return Yn},last:function(){return uo},lowerCase:function(){return Ji},lowerFirst:function(){return Hs},map:function(){return yc},mapValues:function(){return bc},max:function(){return Qn},maxBy:function(){return Fo},memoize:function(){return F},min:function(){return ba},minBy:function(){return Ao},mix:function(){return Kr},mod:function(){return Ts},modifyCSS:function(){return Cu},noop:function(){return In},normalizePath:function(){return se},number2color:function(){return _o},omit:function(){return of},parseRadius:function(){return As},path2Absolute:function(){return ie},path2Array:function(){return Xr},path2Curve:function(){return wn},path2String:function(){return Ht},pick:function(){return af},pull:function(){return io},pullAt:function(){return oo},reduce:function(){return ko},remove:function(){return ri},requestAnimationFrame:function(){return _r},reverseCurve:function(){return Kn},rgb2arr:function(){return ft},set:function(){return Xf},size:function(){return Xa},some:function(){return $n},sortBy:function(){return Xo},startsWith:function(){return Un},substitute:function(){return Ui},throttle:function(){return wc},toArray:function(){return tl},toCSSGradient:function(){return K},toDegree:function(){return ps},toInteger:function(){return ou},toRGB:function(){return p},toRadian:function(){return Ct},toString:function(){return ra},transform:function(){return Z},union:function(){return Ws},uniq:function(){return Hi},uniqueId:function(){return Ec},upperCase:function(){return Js},upperFirst:function(){return Su},values:function(){return gn},valuesOfKey:function(){return Yo},vertical:function(){return kt},wrapBehavior:function(){return ns}});function ft(J){return[parseInt(J.substr(1,2),16),parseInt(J.substr(3,2),16),parseInt(J.substr(5,2),16)]}function nt(J){var gt=Math.round(J).toString(16);return gt.length===1?"0"+gt:gt}function V(J){return"#"+nt(J[0])+nt(J[1])+nt(J[2])}var z=function(J){return typeof J=="function"};function H(J){var gt,St,Ut,ae=J||1;function Ue(vr,zr){++gt>ae&&(Ut=St,We(1),++gt),St[vr]=zr}function We(vr){gt=0,St=Object.create(null),vr||(Ut=Object.create(null))}return We(),{clear:We,has:function(vr){return St[vr]!==void 0||Ut[vr]!==void 0},get:function(vr){var zr=St[vr];if(zr!==void 0)return zr;if((zr=Ut[vr])!==void 0)return Ue(vr,zr),zr},set:function(vr,zr){St[vr]!==void 0?St[vr]=zr:Ue(vr,zr)}}}var F=function(J,gt,St){if(St===void 0&&(St=128),!z(J))throw new TypeError("Expected a function");var Ut=function(){for(var ae=[],Ue=0;Ue<arguments.length;Ue++)ae[Ue]=arguments[Ue];var We=gt?gt.apply(this,ae):ae[0],vr=Ut.cache;if(vr.has(We))return vr.get(We);var zr=J.apply(this,ae);return vr.set(We,zr),zr};return Ut.cache=H(St),Ut},M=/rgba?\(([\s.,0-9]+)\)/;function A(){var J=document.createElement("i");return J.title="Web Colour Picker",J.style.display="none",document.body.appendChild(J),J}var y;function x(J){if(J[0]==="#"&&J.length===7)return J;y||(y=A()),y.style.color=J;var gt=document.defaultView.getComputedStyle(y,"").getPropertyValue("color"),St=M.exec(gt),Ut=St[1].split(/\s*,\s*/).map(function(ae){return Number(ae)});return gt=V(Ut),gt}var p=F(x,function(J){return J},256);function _(J,gt,St,Ut){return J[Ut]+(gt[Ut]-J[Ut])*St}function E(J,gt){var St=isNaN(Number(gt))||gt<0?0:gt>1?1:Number(gt),Ut=J.length-1,ae=Math.floor(Ut*St),Ue=Ut*St-ae,We=J[ae],vr=ae===Ut?We:J[ae+1];return V([_(We,vr,Ue,0),_(We,vr,Ue,1),_(We,vr,Ue,2)])}function b(J){var gt=typeof J=="string"?J.split("-"):J,St=gt.map(function(Ut){return ft(Ut.indexOf("#")===-1?p(Ut):Ut)});return function(Ut){return E(St,Ut)}}var k=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,N=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,g=/[\d.]+:(#[^\s]+|[^)]+\))/gi;function v(J){return/^[r,R,L,l]{1}[\s]*\(/.test(J)}function K(J){if(v(J)){var gt,St=void 0;if(J[0]==="l"){var Ut=k.exec(J),ae=+Ut[1]+90;St=Ut[2],gt="linear-gradient("+ae+"deg, "}else if(J[0]==="r"){gt="radial-gradient(";var Ut=N.exec(J);St=Ut[4]}var Ue=St.match(g);return Ue.forEach(function(We,vr){var zr=We.split(":");gt+=zr[1]+" "+Number(zr[0])*100+"%",vr!==Ue.length-1&&(gt+=", ")}),gt+=")",gt}return J}var B=et(35600);function G(J,gt,St){var Ut=[0,0,0,0,0,0,0,0,0];return B.fromTranslation(Ut,St),B.multiply(J,Ut,gt)}function Y(J,gt,St){var Ut=[0,0,0,0,0,0,0,0,0];return B.fromRotation(Ut,St),B.multiply(J,Ut,gt)}function j(J,gt,St){var Ut=[0,0,0,0,0,0,0,0,0];return B.fromScaling(Ut,St),B.multiply(J,Ut,gt)}function Q(J,gt,St){return B.multiply(J,St,gt)}function Z(J,gt){for(var St=J?[].concat(J):[1,0,0,0,1,0,0,0,1],Ut=0,ae=gt.length;Ut<ae;Ut++){var Ue=gt[Ut];switch(Ue[0]){case"t":G(St,St,[Ue[1],Ue[2]]);break;case"s":j(St,St,[Ue[1],Ue[2]]);break;case"r":Y(St,St,Ue[1]);break;case"m":Q(St,St,Ue[1]);break;default:break}}return St}var rt=et(31437);function ut(J,gt){return J[0]*gt[1]-gt[0]*J[1]}function ht(J,gt,St){var Ut=rt.angle(J,gt),ae=ut(J,gt)>=0;return St?ae?Math.PI*2-Ut:Ut:ae?Ut:Math.PI*2-Ut}function kt(J,gt,St){return St?(J[0]=gt[1],J[1]=-1*gt[0]):(J[0]=-1*gt[1],J[1]=gt[0]),J}function At(J,gt){if(gt==="off")return[].concat(J);var St=typeof gt=="number"&&gt>=1?Math.pow(10,gt):1;return J.map(function(Ut){var ae=Ut.slice(1).map(Number).map(function(Ue){return gt?Math.round(Ue*St)/St:Math.round(Ue)});return[Ut[0]].concat(ae)})}function Ht(J,gt){return gt===void 0&&(gt="off"),At(J,gt).map(function(St){return St[0]+St.slice(1).join(" ")}).join("")}var Rt=et(97582),le={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null};function dt(J,gt,St){if(J[St].length>7){J[St].shift();for(var Ut=J[St],ae=St;Ut.length;)gt[St]="A",J.splice(ae+=1,0,["C"].concat(Ut.splice(0,6)));J.splice(St,1)}}var ot={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0};function yt(J){return Array.isArray(J)&&J.every(function(gt){var St=gt[0].toLowerCase();return ot[St]===gt.length-1&&"achlmqstvz".includes(St)})}function Lt(J){return yt(J)&&J.every(function(gt){var St=gt[0];return St===St.toUpperCase()})}function Ot(J){return Lt(J)&&J.every(function(gt){var St=gt[0];return"ACLMQZ".includes(St)})}function Wt(J){for(var gt=J.pathValue[J.segmentStart],St=gt.toLowerCase(),Ut=J.data;Ut.length>=ot[St]&&(St==="m"&&Ut.length>2?(J.segments.push([gt].concat(Ut.splice(0,2))),St="l",gt=gt==="m"?"l":"L"):J.segments.push([gt].concat(Ut.splice(0,ot[St]))),!!ot[St]););}function Jt(J){var gt=J.index,St=J.pathValue,Ut=St.charCodeAt(gt);if(Ut===48){J.param=0,J.index+=1;return}if(Ut===49){J.param=1,J.index+=1;return}J.err='[path-util]: invalid Arc flag "'+St[gt]+'", expecting 0 or 1 at index '+gt}function De(J){return J>=48&&J<=57||J===43||J===45||J===46}function te(J){return J>=48&&J<=57}function oe(J){var gt=J.max,St=J.pathValue,Ut=J.index,ae=Ut,Ue=!1,We=!1,vr=!1,zr=!1,qr;if(ae>=gt){J.err="[path-util]: Invalid path value at index "+ae+', "pathValue" is missing param';return}if(qr=St.charCodeAt(ae),(qr===43||qr===45)&&(ae+=1,qr=St.charCodeAt(ae)),!te(qr)&&qr!==46){J.err="[path-util]: Invalid path value at index "+ae+', "'+St[ae]+'" is not a number';return}if(qr!==46){if(Ue=qr===48,ae+=1,qr=St.charCodeAt(ae),Ue&&ae<gt&&qr&&te(qr)){J.err="[path-util]: Invalid path value at index "+Ut+', "'+St[Ut]+'" illegal number';return}for(;ae<gt&&te(St.charCodeAt(ae));)ae+=1,We=!0;qr=St.charCodeAt(ae)}if(qr===46){for(zr=!0,ae+=1;te(St.charCodeAt(ae));)ae+=1,vr=!0;qr=St.charCodeAt(ae)}if(qr===101||qr===69){if(zr&&!We&&!vr){J.err="[path-util]: Invalid path value at index "+ae+', "'+St[ae]+'" invalid float exponent';return}if(ae+=1,qr=St.charCodeAt(ae),(qr===43||qr===45)&&(ae+=1),ae<gt&&te(St.charCodeAt(ae)))for(;ae<gt&&te(St.charCodeAt(ae));)ae+=1;else{J.err="[path-util]: Invalid path value at index "+ae+', "'+St[ae]+'" invalid integer exponent';return}}J.index=ae,J.param=+J.pathValue.slice(Ut,ae)}function me(J){var gt=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];return J===10||J===13||J===8232||J===8233||J===32||J===9||J===11||J===12||J===160||J>=5760&&gt.includes(J)}function Ce(J){for(var gt=J.pathValue,St=J.max;J.index<St&&me(gt.charCodeAt(J.index));)J.index+=1}function _e(J){switch(J|32){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:return!0;default:return!1}}function zt(J){return(J|32)===97}function ue(J){var gt=J.max,St=J.pathValue,Ut=J.index,ae=St.charCodeAt(Ut),Ue=ot[St[Ut].toLowerCase()];if(J.segmentStart=Ut,!_e(ae)){J.err='[path-util]: Invalid path value "'+St[Ut]+'" is not a path command';return}if(J.index+=1,Ce(J),J.data=[],!Ue){Wt(J);return}for(;;){for(var We=Ue;We>0;We-=1){if(zt(ae)&&(We===3||We===4)?Jt(J):oe(J),J.err.length)return;J.data.push(J.param),Ce(J),J.index<gt&&St.charCodeAt(J.index)===44&&(J.index+=1,Ce(J))}if(J.index>=J.max||!De(St.charCodeAt(J.index)))break}Wt(J)}var Pe=function(){function J(gt){this.pathValue=gt,this.segments=[],this.max=gt.length,this.index=0,this.param=0,this.segmentStart=0,this.data=[],this.err=""}return J}();function Xt(J){if(yt(J))return[].concat(J);var gt=new Pe(J);for(Ce(gt);gt.index<gt.max&&!gt.err.length;)ue(gt);return gt.err?gt.err:gt.segments}function ie(J){if(Lt(J))return[].concat(J);var gt=Xt(J),St=0,Ut=0,ae=0,Ue=0;return gt.map(function(We){var vr=We.slice(1).map(Number),zr=We[0],qr=zr.toUpperCase();if(zr==="M")return St=vr[0],Ut=vr[1],ae=St,Ue=Ut,["M",St,Ut];var Ln;if(zr!==qr)switch(qr){case"A":Ln=[qr,vr[0],vr[1],vr[2],vr[3],vr[4],vr[5]+St,vr[6]+Ut];break;case"V":Ln=[qr,vr[0]+Ut];break;case"H":Ln=[qr,vr[0]+St];break;default:{var Mn=vr.map(function(sa,Ta){return sa+(Ta%2?Ut:St)});Ln=[qr].concat(Mn)}}else Ln=[qr].concat(vr);var kn=Ln.length;switch(qr){case"Z":St=ae,Ut=Ue;break;case"H":St=Ln[1];break;case"V":Ut=Ln[1];break;default:St=Ln[kn-2],Ut=Ln[kn-1],qr==="M"&&(ae=St,Ue=Ut)}return Ln})}function Ie(J,gt){var St=J[0],Ut=gt.x1,ae=gt.y1,Ue=gt.x2,We=gt.y2,vr=J.slice(1).map(Number),zr=J;if("TQ".includes(St)||(gt.qx=null,gt.qy=null),St==="H")zr=["L",J[1],ae];else if(St==="V")zr=["L",Ut,J[1]];else if(St==="S"){var qr=Ut*2-Ue,Ln=ae*2-We;gt.x1=qr,gt.y1=Ln,zr=["C",qr,Ln].concat(vr)}else if(St==="T"){var Mn=Ut*2-gt.qx,kn=ae*2-gt.qy;gt.qx=Mn,gt.qy=kn,zr=["Q",Mn,kn].concat(vr)}else if(St==="Q"){var sa=vr[0],Ta=vr[1];gt.qx=sa,gt.qy=Ta}return zr}function se(J){if(Ot(J))return[].concat(J);for(var gt=ie(J),St=(0,Rt.__assign)({},le),Ut=0;Ut<gt.length;Ut+=1){gt[Ut]=Ie(gt[Ut],St);var ae=gt[Ut],Ue=ae.length;St.x1=+ae[Ue-2],St.y1=+ae[Ue-1],St.x2=+ae[Ue-4]||St.x1,St.y2=+ae[Ue-3]||St.y1}return gt}function Te(J){return Ot(J)&&J.every(function(gt){var St=gt[0];return"MC".includes(St)})}function Be(J,gt,St){var Ut=J*Math.cos(St)-gt*Math.sin(St),ae=J*Math.sin(St)+gt*Math.cos(St);return{x:Ut,y:ae}}function Tt(J,gt,St,Ut,ae,Ue,We,vr,zr,qr){var Ln=J,Mn=gt,kn=St,sa=Ut,Ta=vr,xa=zr,aa=Math.PI*120/180,ka=Math.PI/180*(+ae||0),jn=[],Ea,la,Hn,La,ja;if(qr)la=qr[0],Hn=qr[1],La=qr[2],ja=qr[3];else{Ea=Be(Ln,Mn,-ka),Ln=Ea.x,Mn=Ea.y,Ea=Be(Ta,xa,-ka),Ta=Ea.x,xa=Ea.y;var Qa=(Ln-Ta)/2,qa=(Mn-xa)/2,Na=Qa*Qa/(kn*kn)+qa*qa/(sa*sa);Na>1&&(Na=Math.sqrt(Na),kn*=Na,sa*=Na);var di=kn*kn,wi=sa*sa,yi=(Ue===We?-1:1)*Math.sqrt(Math.abs((di*wi-di*qa*qa-wi*Qa*Qa)/(di*qa*qa+wi*Qa*Qa)));La=yi*kn*qa/sa+(Ln+Ta)/2,ja=yi*-sa*Qa/kn+(Mn+xa)/2,la=Math.asin(((Mn-ja)/sa*Math.pow(10,9)>>0)/Math.pow(10,9)),Hn=Math.asin(((xa-ja)/sa*Math.pow(10,9)>>0)/Math.pow(10,9)),la=Ln<La?Math.PI-la:la,Hn=Ta<La?Math.PI-Hn:Hn,la<0&&(la=Math.PI*2+la),Hn<0&&(Hn=Math.PI*2+Hn),We&&la>Hn&&(la-=Math.PI*2),!We&&Hn>la&&(Hn-=Math.PI*2)}var Tu=Hn-la;if(Math.abs(Tu)>aa){var Wf=Hn,as=Ta,cu=xa;Hn=la+aa*(We&&Hn>la?1:-1),Ta=La+kn*Math.cos(Hn),xa=ja+sa*Math.sin(Hn),jn=Tt(Ta,xa,kn,sa,ae,0,We,as,cu,[Hn,Wf,La,ja])}Tu=Hn-la;var lf=Math.cos(la),ru=Math.sin(la),Vf=Math.cos(Hn),el=Math.sin(Hn),Hu=Math.tan(Tu/4),hf=4/3*kn*Hu,df=4/3*sa*Hu,lu=[Ln,Mn],xs=[Ln+hf*ru,Mn-df*lf],js=[Ta+hf*el,xa-df*Vf],ju=[Ta,xa];if(xs[0]=2*lu[0]-xs[0],xs[1]=2*lu[1]-xs[1],qr)return xs.concat(js,ju,jn);jn=xs.concat(js,ju,jn);for(var ws=[],Co=0,ks=jn.length;Co<ks;Co+=1)ws[Co]=Co%2?Be(jn[Co-1],jn[Co],ka).y:Be(jn[Co],jn[Co+1],ka).x;return ws}function nr(J,gt,St,Ut,ae,Ue){var We=.3333333333333333,vr=2/3;return[We*J+vr*St,We*gt+vr*Ut,We*ae+vr*St,We*Ue+vr*Ut,ae,Ue]}function Ir(J,gt,St){var Ut=J[0],ae=J[1],Ue=gt[0],We=gt[1];return[Ut+(Ue-Ut)*St,ae+(We-ae)*St]}var Zr=function(J,gt,St,Ut){var ae=.5,Ue=Ir([J,gt],[St,Ut],ae);return(0,Rt.__spreadArray)((0,Rt.__spreadArray)([],Ue,!0),[St,Ut,St,Ut],!1)};function Ur(J,gt){var St=J[0],Ut=J.slice(1).map(Number),ae=Ut[0],Ue=Ut[1],We,vr=gt.x1,zr=gt.y1,qr=gt.x,Ln=gt.y;switch("TQ".includes(St)||(gt.qx=null,gt.qy=null),St){case"M":return gt.x=ae,gt.y=Ue,J;case"A":return We=[vr,zr].concat(Ut),["C"].concat(Tt(We[0],We[1],We[2],We[3],We[4],We[5],We[6],We[7],We[8],We[9]));case"Q":return gt.qx=ae,gt.qy=Ue,We=[vr,zr].concat(Ut),["C"].concat(nr(We[0],We[1],We[2],We[3],We[4],We[5]));case"L":return["C"].concat(Zr(vr,zr,ae,Ue));case"Z":return vr===qr&&zr===Ln?["C",vr,zr,qr,Ln,qr,Ln]:["C"].concat(Zr(vr,zr,qr,Ln));default:}return J}function wn(J,gt){if(gt===void 0&&(gt=!1),Te(J)){var St=[].concat(J);return gt?[St,[]]:St}for(var Ut=se(J),ae=(0,Rt.__assign)({},le),Ue=[],We="",vr=Ut.length,zr,qr,Ln=[],Mn=0;Mn<vr;Mn+=1){Ut[Mn]&&(We=Ut[Mn][0]),Ue[Mn]=We;var kn=Ur(Ut[Mn],ae);Ut[Mn]=kn,dt(Ut,Ue,Mn),vr=Ut.length,We==="Z"&&Ln.push(Mn),zr=Ut[Mn],qr=zr.length,ae.x1=+zr[qr-2],ae.y1=+zr[qr-1],ae.x2=+zr[qr-4]||ae.x1,ae.y2=+zr[qr-3]||ae.y1}return gt?[Ut,Ln]:Ut}function Xr(J){return Xt(J)}function Sn(J){return J.map(function(gt){return Array.isArray(gt)?[].concat(gt):gt})}function Kn(J){var gt=J.slice(1).map(function(St,Ut,ae){return Ut?ae[Ut-1].slice(-2).concat(St.slice(1)):J[0].slice(1).concat(St.slice(1))}).map(function(St){return St.map(function(Ut,ae){return St[St.length-ae-2*(1-ae%2)]})}).reverse();return[["M"].concat(gt[0].slice(0,2))].concat(gt.map(function(St){return["C"].concat(St.slice(2))}))}function Fn(J,gt){return Math.sqrt((J[0]-gt[0])*(J[0]-gt[0])+(J[1]-gt[1])*(J[1]-gt[1]))}function pn(J,gt,St,Ut,ae){var Ue=Fn([J,gt],[St,Ut]),We={x:0,y:0};if(typeof ae=="number")if(ae<=0)We={x:J,y:gt};else if(ae>=Ue)We={x:St,y:Ut};else{var vr=Ir([J,gt],[St,Ut],ae/Ue),zr=vr[0],qr=vr[1];We={x:zr,y:qr}}return{length:Ue,point:We,min:{x:Math.min(J,St),y:Math.min(gt,Ut)},max:{x:Math.max(J,St),y:Math.max(gt,Ut)}}}function er(J,gt){var St=J.x,Ut=J.y,ae=gt.x,Ue=gt.y,We=St*ae+Ut*Ue,vr=Math.sqrt((Math.pow(St,2)+Math.pow(Ut,2))*(Math.pow(ae,2)+Math.pow(Ue,2))),zr=St*Ue-Ut*ae<0?-1:1,qr=zr*Math.acos(We/vr);return qr}function cr(J,gt,St,Ut,ae,Ue,We,vr,zr,qr){var Ln=Math.abs,Mn=Math.sin,kn=Math.cos,sa=Math.sqrt,Ta=Math.PI,xa=Ln(St),aa=Ln(Ut),ka=(ae%360+360)%360,jn=ka*(Ta/180);if(J===vr&&gt===zr)return{x:J,y:gt};if(xa===0||aa===0)return pn(J,gt,vr,zr,qr).point;var Ea=(J-vr)/2,la=(gt-zr)/2,Hn={x:kn(jn)*Ea+Mn(jn)*la,y:-Mn(jn)*Ea+kn(jn)*la},La=Math.pow(Hn.x,2)/Math.pow(xa,2)+Math.pow(Hn.y,2)/Math.pow(aa,2);La>1&&(xa*=sa(La),aa*=sa(La));var ja=Math.pow(xa,2)*Math.pow(aa,2)-Math.pow(xa,2)*Math.pow(Hn.y,2)-Math.pow(aa,2)*Math.pow(Hn.x,2),Qa=Math.pow(xa,2)*Math.pow(Hn.y,2)+Math.pow(aa,2)*Math.pow(Hn.x,2),qa=ja/Qa;qa=qa<0?0:qa;var Na=(Ue!==We?1:-1)*sa(qa),di={x:Na*(xa*Hn.y/aa),y:Na*(-(aa*Hn.x)/xa)},wi={x:kn(jn)*di.x-Mn(jn)*di.y+(J+vr)/2,y:Mn(jn)*di.x+kn(jn)*di.y+(gt+zr)/2},yi={x:(Hn.x-di.x)/xa,y:(Hn.y-di.y)/aa},Tu=er({x:1,y:0},yi),Wf={x:(-Hn.x-di.x)/xa,y:(-Hn.y-di.y)/aa},as=er(yi,Wf);!We&&as>0?as-=2*Ta:We&&as<0&&(as+=2*Ta),as%=2*Ta;var cu=Tu+as*qr,lf=xa*kn(cu),ru=aa*Mn(cu),Vf={x:kn(jn)*lf-Mn(jn)*ru+wi.x,y:Mn(jn)*lf+kn(jn)*ru+wi.y};return Vf}function dr(J,gt,St,Ut,ae,Ue,We,vr,zr,qr,Ln){var Mn,kn=Ln.bbox,sa=kn===void 0?!0:kn,Ta=Ln.length,xa=Ta===void 0?!0:Ta,aa=Ln.sampleSize,ka=aa===void 0?30:aa,jn=typeof qr=="number",Ea=J,la=gt,Hn=0,La=[Ea,la,Hn],ja=[Ea,la],Qa=0,qa={x:0,y:0},Na=[{x:Ea,y:la}];jn&&qr<=0&&(qa={x:Ea,y:la});for(var di=0;di<=ka;di+=1){if(Qa=di/ka,Mn=cr(J,gt,St,Ut,ae,Ue,We,vr,zr,Qa),Ea=Mn.x,la=Mn.y,sa&&Na.push({x:Ea,y:la}),xa&&(Hn+=Fn(ja,[Ea,la])),ja=[Ea,la],jn&&Hn>=qr&&qr>La[2]){var wi=(Hn-qr)/(Hn-La[2]);qa={x:ja[0]*(1-wi)+La[0]*wi,y:ja[1]*(1-wi)+La[1]*wi}}La=[Ea,la,Hn]}return jn&&qr>=Hn&&(qa={x:vr,y:zr}),{length:Hn,point:qa,min:{x:Math.min.apply(null,Na.map(function(yi){return yi.x})),y:Math.min.apply(null,Na.map(function(yi){return yi.y}))},max:{x:Math.max.apply(null,Na.map(function(yi){return yi.x})),y:Math.max.apply(null,Na.map(function(yi){return yi.y}))}}}function Gr(J,gt,St,Ut,ae,Ue,We,vr,zr){var qr=1-zr;return{x:Math.pow(qr,3)*J+3*Math.pow(qr,2)*zr*St+3*qr*Math.pow(zr,2)*ae+Math.pow(zr,3)*We,y:Math.pow(qr,3)*gt+3*Math.pow(qr,2)*zr*Ut+3*qr*Math.pow(zr,2)*Ue+Math.pow(zr,3)*vr}}function sn(J,gt,St,Ut,ae,Ue,We,vr,zr,qr){var Ln,Mn=qr.bbox,kn=Mn===void 0?!0:Mn,sa=qr.length,Ta=sa===void 0?!0:sa,xa=qr.sampleSize,aa=xa===void 0?10:xa,ka=typeof zr=="number",jn=J,Ea=gt,la=0,Hn=[jn,Ea,la],La=[jn,Ea],ja=0,Qa={x:0,y:0},qa=[{x:jn,y:Ea}];ka&&zr<=0&&(Qa={x:jn,y:Ea});for(var Na=0;Na<=aa;Na+=1){if(ja=Na/aa,Ln=Gr(J,gt,St,Ut,ae,Ue,We,vr,ja),jn=Ln.x,Ea=Ln.y,kn&&qa.push({x:jn,y:Ea}),Ta&&(la+=Fn(La,[jn,Ea])),La=[jn,Ea],ka&&la>=zr&&zr>Hn[2]){var di=(la-zr)/(la-Hn[2]);Qa={x:La[0]*(1-di)+Hn[0]*di,y:La[1]*(1-di)+Hn[1]*di}}Hn=[jn,Ea,la]}return ka&&zr>=la&&(Qa={x:We,y:vr}),{length:la,point:Qa,min:{x:Math.min.apply(null,qa.map(function(wi){return wi.x})),y:Math.min.apply(null,qa.map(function(wi){return wi.y}))},max:{x:Math.max.apply(null,qa.map(function(wi){return wi.x})),y:Math.max.apply(null,qa.map(function(wi){return wi.y}))}}}function yn(J,gt,St,Ut,ae,Ue,We){var vr=1-We;return{x:Math.pow(vr,2)*J+2*vr*We*St+Math.pow(We,2)*ae,y:Math.pow(vr,2)*gt+2*vr*We*Ut+Math.pow(We,2)*Ue}}function ln(J,gt,St,Ut,ae,Ue,We,vr){var zr,qr=vr.bbox,Ln=qr===void 0?!0:qr,Mn=vr.length,kn=Mn===void 0?!0:Mn,sa=vr.sampleSize,Ta=sa===void 0?10:sa,xa=typeof We=="number",aa=J,ka=gt,jn=0,Ea=[aa,ka,jn],la=[aa,ka],Hn=0,La={x:0,y:0},ja=[{x:aa,y:ka}];xa&&We<=0&&(La={x:aa,y:ka});for(var Qa=0;Qa<=Ta;Qa+=1){if(Hn=Qa/Ta,zr=yn(J,gt,St,Ut,ae,Ue,Hn),aa=zr.x,ka=zr.y,Ln&&ja.push({x:aa,y:ka}),kn&&(jn+=Fn(la,[aa,ka])),la=[aa,ka],xa&&jn>=We&&We>Ea[2]){var qa=(jn-We)/(jn-Ea[2]);La={x:la[0]*(1-qa)+Ea[0]*qa,y:la[1]*(1-qa)+Ea[1]*qa}}Ea=[aa,ka,jn]}return xa&&We>=jn&&(La={x:ae,y:Ue}),{length:jn,point:La,min:{x:Math.min.apply(null,ja.map(function(Na){return Na.x})),y:Math.min.apply(null,ja.map(function(Na){return Na.y}))},max:{x:Math.max.apply(null,ja.map(function(Na){return Na.x})),y:Math.max.apply(null,ja.map(function(Na){return Na.y}))}}}function Vn(J,gt,St){for(var Ut,ae,Ue,We,vr,zr,qr=se(J),Ln=typeof gt=="number",Mn,kn=[],sa,Ta=0,xa=0,aa=0,ka=0,jn,Ea=[],la=[],Hn=0,La={x:0,y:0},ja=La,Qa=La,qa=La,Na=0,di=0,wi=qr.length;di<wi;di+=1)jn=qr[di],sa=jn[0],Mn=sa==="M",kn=Mn?kn:[Ta,xa].concat(jn.slice(1)),Mn?(aa=jn[1],ka=jn[2],La={x:aa,y:ka},ja=La,Hn=0,Ln&&gt<.001&&(qa=La)):sa==="L"?(Ut=pn(kn[0],kn[1],kn[2],kn[3],(gt||0)-Na),Hn=Ut.length,La=Ut.min,ja=Ut.max,Qa=Ut.point):sa==="A"?(ae=dr(kn[0],kn[1],kn[2],kn[3],kn[4],kn[5],kn[6],kn[7],kn[8],(gt||0)-Na,St||{}),Hn=ae.length,La=ae.min,ja=ae.max,Qa=ae.point):sa==="C"?(Ue=sn(kn[0],kn[1],kn[2],kn[3],kn[4],kn[5],kn[6],kn[7],(gt||0)-Na,St||{}),Hn=Ue.length,La=Ue.min,ja=Ue.max,Qa=Ue.point):sa==="Q"?(We=ln(kn[0],kn[1],kn[2],kn[3],kn[4],kn[5],(gt||0)-Na,St||{}),Hn=We.length,La=We.min,ja=We.max,Qa=We.point):sa==="Z"&&(kn=[Ta,xa,aa,ka],vr=pn(kn[0],kn[1],kn[2],kn[3],(gt||0)-Na),Hn=vr.length,La=vr.min,ja=vr.max,Qa=vr.point),Ln&&Na<gt&&Na+Hn>=gt&&(qa=Qa),la.push(ja),Ea.push(La),Na+=Hn,zr=sa!=="Z"?jn.slice(-2):[aa,ka],Ta=zr[0],xa=zr[1];return Ln&&gt>=Na&&(qa={x:Ta,y:xa}),{length:Na,point:qa,min:{x:Math.min.apply(null,Ea.map(function(yi){return yi.x})),y:Math.min.apply(null,Ea.map(function(yi){return yi.y}))},max:{x:Math.max.apply(null,la.map(function(yi){return yi.x})),y:Math.max.apply(null,la.map(function(yi){return yi.y}))}}}function ca(J,gt){if(!J)return{x:0,y:0,width:0,height:0,x2:0,y2:0,cx:0,cy:0,cz:0};var St=Vn(J,void 0,(0,Rt.__assign)((0,Rt.__assign)({},gt),{length:!1})),Ut=St.min,ae=Ut.x,Ue=Ut.y,We=St.max,vr=We.x,zr=We.y,qr=vr-ae,Ln=zr-Ue;return{width:qr,height:Ln,x:ae,y:Ue,x2:vr,y2:zr,cx:ae+qr/2,cy:Ue+Ln/2,cz:Math.max(qr,Ln)+Math.min(qr,Ln)/2}}function oa(J,gt){return Vn(J,void 0,(0,Rt.__assign)((0,Rt.__assign)({},gt),{bbox:!1,length:!0})).length}function bn(J,gt){if(!J)return{length:0,x:0,y:0,width:0,height:0,x2:0,y2:0,cx:0,cy:0,cz:0};var St=Vn(J,void 0,(0,Rt.__assign)((0,Rt.__assign)({},gt),{bbox:!0,length:!0})),Ut=St.length,ae=St.min,Ue=ae.x,We=ae.y,vr=St.max,zr=vr.x,qr=vr.y,Ln=zr-Ue,Mn=qr-We;return{length:Ut,width:Ln,height:Mn,x:Ue,y:We,x2:zr,y2:qr,cx:Ue+Ln/2,cy:We+Mn/2,cz:Math.max(Ln,Mn)+Math.min(Ln,Mn)/2}}function qn(J){var gt=J.length,St=gt-1;return J.map(function(Ut,ae){return J.map(function(Ue,We){var vr=ae+We,zr;return We===0||J[vr]&&J[vr][0]==="M"?(zr=J[vr],["M"].concat(zr.slice(-2))):(vr>=gt&&(vr-=St),J[vr])})})}function Gn(J,gt){var St=J.length-1,Ut=[],ae=0,Ue=0,We=qn(J);return We.forEach(function(vr,zr){J.slice(1).forEach(function(qr,Ln){Ue+=Fn(J[(zr+Ln)%St].slice(-2),gt[Ln%St].slice(-2))}),Ut[zr]=Ue,Ue=0}),ae=Ut.indexOf(Math.min.apply(null,Ut)),We[ae]}function zn(J,gt,St,Ut,ae,Ue,We,vr){return 3*((vr-gt)*(St+ae)-(We-J)*(Ut+Ue)+Ut*(J-ae)-St*(gt-Ue)+vr*(ae+J/3)-We*(Ue+gt/3))/20}function ya(J){var gt=0,St=0,Ut=0;return wn(J).map(function(ae){var Ue;switch(ae[0]){case"M":return gt=ae[1],St=ae[2],0;default:var We=ae.slice(1),vr=We[0],zr=We[1],qr=We[2],Ln=We[3],Mn=We[4],kn=We[5];return Ut=zn(gt,St,vr,zr,qr,Ln,Mn,kn),Ue=ae.slice(-2),gt=Ue[0],St=Ue[1],Ut}}).reduce(function(ae,Ue){return ae+Ue},0)}function W(J){return ya(J)>=0}function qe(J,gt,St){return Vn(J,gt,(0,Rt.__assign)((0,Rt.__assign)({},St),{bbox:!1,length:!0})).point}function be(J,gt){var St=Xt(J);if(typeof St=="string")throw TypeError(St);var Ut=St.slice(),ae=oa(Ut),Ue=Ut.length-1,We=0,vr=0,zr=St[0],qr=zr.slice(-2),Ln=qr[0],Mn=qr[1],kn={x:Ln,y:Mn};if(Ue<=0||!gt||!Number.isFinite(gt))return{segment:zr,index:0,length:vr,point:kn,lengthAtSegment:We};if(gt>=ae)return Ut=St.slice(0,-1),We=oa(Ut),vr=ae-We,{segment:St[Ue],index:Ue,length:vr,lengthAtSegment:We};for(var sa=[];Ue>0;)zr=Ut[Ue],Ut=Ut.slice(0,-1),We=oa(Ut),vr=ae-We,ae=We,sa.push({segment:zr,index:Ue,length:vr,lengthAtSegment:We}),Ue-=1;return sa.find(function(Ta){var xa=Ta.lengthAtSegment;return xa<=gt})}function or(J,gt){for(var St=Xt(J),Ut=se(St),ae=oa(St),Ue=function(Hn){var La=Hn.x-gt.x,ja=Hn.y-gt.y;return La*La+ja*ja},We=8,vr,zr=0,qr,Ln=0,Mn=1/0,kn=0;kn<=ae;kn+=We)vr=qe(Ut,kn),zr=Ue(vr),zr<Mn&&(qr=vr,Ln=kn,Mn=zr);We/=2;for(var sa,Ta,xa=0,aa=0,ka=0,jn=0;We>.5;)xa=Ln-We,sa=qe(Ut,xa),ka=Ue(sa),aa=Ln+We,Ta=qe(Ut,aa),jn=Ue(Ta),xa>=0&&ka<Mn?(qr=sa,Ln=xa,Mn=ka):aa<=ae&&jn<Mn?(qr=Ta,Ln=aa,Mn=jn):We/=2;var Ea=be(St,Ln),la=Math.sqrt(Mn);return{closest:qr,distance:la,segment:Ea}}function ar(J,gt){var St=or(J,gt).distance;return Math.abs(St)<.001}function Br(J,gt){gt===void 0&&(gt=.5);var St=J.slice(0,2),Ut=J.slice(2,4),ae=J.slice(4,6),Ue=J.slice(6,8),We=Ir(St,Ut,gt),vr=Ir(Ut,ae,gt),zr=Ir(ae,Ue,gt),qr=Ir(We,vr,gt),Ln=Ir(vr,zr,gt),Mn=Ir(qr,Ln,gt);return[["C"].concat(We,qr,Mn),["C"].concat(Ln,zr,Ue)]}function Pr(J){return J.map(function(gt,St,Ut){var ae=St&&Ut[St-1].slice(-2).concat(gt.slice(1)),Ue=St?sn(ae[0],ae[1],ae[2],ae[3],ae[4],ae[5],ae[6],ae[7],ae[8],{bbox:!1}).length:0,We;return St?We=Ue?Br(ae):[gt,gt]:We=[gt],{s:gt,ss:We,l:Ue}})}function cn(J,gt,St){var Ut=Pr(J),ae=Pr(gt),Ue=Ut.length,We=ae.length,vr=Ut.filter(function(aa){return aa.l}).length,zr=ae.filter(function(aa){return aa.l}).length,qr=Ut.filter(function(aa){return aa.l}).reduce(function(aa,ka){var jn=ka.l;return aa+jn},0)/vr||0,Ln=ae.filter(function(aa){return aa.l}).reduce(function(aa,ka){var jn=ka.l;return aa+jn},0)/zr||0,Mn=St||Math.max(Ue,We),kn=[qr,Ln],sa=[Mn-Ue,Mn-We],Ta=0,xa=[Ut,ae].map(function(aa,ka){return aa.l===Mn?aa.map(function(jn){return jn.s}):aa.map(function(jn,Ea){return Ta=Ea&&sa[ka]&&jn.l>=kn[ka],sa[ka]-=Ta?1:0,Ta?jn.ss:[jn.s]}).flat()});return xa[0].length===xa[1].length?xa:cn(xa[0],xa[1],Mn)}var xn=function(J){return J!==null&&typeof J!="function"&&isFinite(J.length)},tn=xn,vt=function(J,gt){return tn(J)?J.indexOf(gt)>-1:!1},bt=vt,P=function(J,gt){if(!tn(J))return J;for(var St=[],Ut=0;Ut<J.length;Ut++){var ae=J[Ut];gt(ae,Ut)&&St.push(ae)}return St},I=P,T=function(J,gt){return gt===void 0&&(gt=[]),I(J,function(St){return!bt(gt,St)})},q=T,Et=function(J){return J==null},Gt=Et,Dt={}.toString,ee=function(J,gt){return Dt.call(J)==="[object "+gt+"]"},Ye=ee,Ae=function(J){return Array.isArray?Array.isArray(J):Ye(J,"Array")},fr=function(J){var gt=typeof J;return J!==null&&gt==="object"||gt==="function"};function Hr(J,gt){if(J){var St;if(Ae(J))for(var Ut=0,ae=J.length;Ut<ae&&(St=gt(J[Ut],Ut),St!==!1);Ut++);else if(fr(J)){for(var Ue in J)if(J.hasOwnProperty(Ue)&&(St=gt(J[Ue],Ue),St===!1))break}}}var wr=Hr,hn=Object.keys?function(J){return Object.keys(J)}:function(J){var gt=[];return wr(J,function(St,Ut){z(J)&&Ut==="prototype"||gt.push(Ut)}),gt},Yn=hn;function Ze(J,gt){var St=Yn(gt),Ut=St.length;if(Gt(J))return!Ut;for(var ae=0;ae<Ut;ae+=1){var Ue=St[ae];if(gt[Ue]!==J[Ue]||!(Ue in J))return!1}return!0}var xr=Ze,Dr=function(J){return typeof J=="object"&&J!==null},Yr=Dr,$t=function(J){if(!Yr(J)||!Ye(J,"Object"))return!1;if(Object.getPrototypeOf(J)===null)return!0;for(var gt=J;Object.getPrototypeOf(gt)!==null;)gt=Object.getPrototypeOf(gt);return Object.getPrototypeOf(J)===gt},It=$t;function ne(J,gt){if(!Ae(J))return null;var St;if(z(gt)&&(St=gt),It(gt)&&(St=function(ae){return xr(ae,gt)}),St){for(var Ut=0;Ut<J.length;Ut+=1)if(St(J[Ut]))return J[Ut]}return null}var xe=ne;function pe(J,gt,St){St===void 0&&(St=0);for(var Ut=St;Ut<J.length;Ut++)if(gt(J[Ut],Ut))return Ut;return-1}var ke=pe,sr=function(J,gt){for(var St=null,Ut=0;Ut<J.length;Ut++){var ae=J[Ut],Ue=ae[gt];if(!Gt(Ue)){Ae(Ue)?St=Ue[0]:St=Ue;break}}return St},lr=sr,en=function(J){if(!Ae(J))return[];for(var gt=[],St=0;St<J.length;St++)gt=gt.concat(J[St]);return gt},Dn=en,En=function(J,gt){if(gt===void 0&&(gt=[]),!Ae(J))gt.push(J);else for(var St=0;St<J.length;St+=1)En(J[St],gt);return gt},ta=En,Qn=function(J){if(Ae(J))return J.reduce(function(gt,St){return Math.max(gt,St)},J[0])},ba=function(J){if(Ae(J))return J.reduce(function(gt,St){return Math.min(gt,St)},J[0])},Ha=function(J){var gt=J.filter(function(We){return!isNaN(We)});if(!gt.length)return{min:0,max:0};if(Ae(J[0])){for(var St=[],Ut=0;Ut<J.length;Ut++)St=St.concat(J[Ut]);gt=St}var ae=Qn(gt),Ue=ba(gt);return{min:Ue,max:ae}},Za=Ha,Ba=Array.prototype,To=Ba.splice,_i=Ba.indexOf,Si=function(J){for(var gt=[],St=1;St<arguments.length;St++)gt[St-1]=arguments[St];for(var Ut=0;Ut<gt.length;Ut++)for(var ae=gt[Ut],Ue=-1;(Ue=_i.call(J,ae))>-1;)To.call(J,Ue,1);return J},io=Si,fs=Array.prototype.splice,Io=function(gt,St){if(!tn(gt))return[];for(var Ut=gt?St.length:0,ae=Ut-1;Ut--;){var Ue=void 0,We=St[Ut];(Ut===ae||We!==Ue)&&(Ue=We,fs.call(gt,We,1))}return gt},oo=Io,Ca=function(J,gt,St){if(!Ae(J)&&!It(J))return J;var Ut=St;return wr(J,function(ae,Ue){Ut=gt(Ut,ae,Ue)}),Ut},ko=Ca,cs=function(J,gt){var St=[];if(!tn(J))return St;for(var Ut=-1,ae=[],Ue=J.length;++Ut<Ue;){var We=J[Ut];gt(We,Ut,J)&&(St.push(We),ae.push(Ut))}return oo(J,ae),St},ri=cs,Vi=function(J){return Ye(J,"String")};function ls(J,gt){var St;if(z(gt))St=function(ae,Ue){return gt(ae)-gt(Ue)};else{var Ut=[];Vi(gt)?Ut.push(gt):Ae(gt)&&(Ut=gt),St=function(ae,Ue){for(var We=0;We<Ut.length;We+=1){var vr=Ut[We];if(ae[vr]>Ue[vr])return 1;if(ae[vr]<Ue[vr])return-1}return 0}}return J.sort(St),J}var Xo=ls;function Hi(J,gt){gt===void 0&&(gt=new Map);var St=[];if(Array.isArray(J))for(var Ut=0,ae=J.length;Ut<ae;Ut++){var Ue=J[Ut];gt.has(Ue)||(St.push(Ue),gt.set(Ue,!0))}return St}var so=function(){for(var J=[],gt=0;gt<arguments.length;gt++)J[gt]=arguments[gt];return Hi([].concat.apply([],J))},Ws=so,Yo=function(J,gt){for(var St=[],Ut={},ae=0;ae<J.length;ae++){var Ue=J[ae],We=Ue[gt];if(!Gt(We)){Ae(We)||(We=[We]);for(var vr=0;vr<We.length;vr++){var zr=We[vr];Ut[zr]||(St.push(zr),Ut[zr]=!0)}}}return St};function Mi(J){if(tn(J))return J[0]}function uo(J){if(tn(J)){var gt=J;return gt[gt.length-1]}}function hs(J,gt){return Ae(J)||Vi(J)?J[0]===gt:!1}var Un=hs;function Eo(J,gt){return Ae(J)||Vi(J)?J[J.length-1]===gt:!1}var Po=Eo,Ss=function(J,gt){for(var St=0;St<J.length;St++)if(!gt(J[St],St))return!1;return!0},Wo=Ss,Ds=function(J,gt){for(var St=0;St<J.length;St++)if(gt(J[St],St))return!0;return!1},$n=Ds,ji=Object.prototype.hasOwnProperty;function Zi(J,gt){if(!gt||!Ae(J))return{};for(var St={},Ut=z(gt)?gt:function(vr){return vr[gt]},ae,Ue=0;Ue<J.length;Ue++){var We=J[Ue];ae=Ut(We),ji.call(St,ae)?St[ae].push(We):St[ae]=[We]}return St}var bi=Zi;function Vo(J,gt){if(!gt)return{0:J};if(!z(gt)){var St=Ae(gt)?gt:gt.replace(/\s+/g,"").split("*");gt=function(Ut){for(var ae="_",Ue=0,We=St.length;Ue<We;Ue++)ae+=Ut[St[Ue]]&&Ut[St[Ue]].toString();return ae}}return bi(J,gt)}var Ho=function(J,gt){if(!gt)return[J];var St=Vo(J,gt),Ut=[];for(var ae in St)Ut.push(St[ae]);return Ut};function fo(J,gt){return J["_wrap_"+gt]}var ds=fo;function Ms(J,gt){if(J["_wrap_"+gt])return J["_wrap_"+gt];var St=function(Ut){J[gt](Ut)};return J["_wrap_"+gt]=St,St}var ns=Ms,Ia={};function Ps(J){var gt=Ia[J];if(!gt){for(var St=J.toString(16),Ut=St.length;Ut<6;Ut++)St="0"+St;gt="#"+St,Ia[J]=gt}return gt}var _o=Ps;function co(J){var gt=0,St=0,Ut=0,ae=0;return Ae(J)?J.length===1?gt=St=Ut=ae=J[0]:J.length===2?(gt=Ut=J[0],St=ae=J[1]):J.length===3?(gt=J[0],St=ae=J[1],Ut=J[2]):(gt=J[0],St=J[1],Ut=J[2],ae=J[3]):gt=St=Ut=ae=J,{r1:gt,r2:St,r3:Ut,r4:ae}}var As=co,Ro=function(J,gt,St){return J<gt?gt:J>St?St:J},Gi=Ro,So=function(J,gt){var St=gt.toString(),Ut=St.indexOf(".");if(Ut===-1)return Math.round(J);var ae=St.substr(Ut+1).length;return ae>20&&(ae=20),parseFloat(J.toFixed(ae))},qi=So,Lo=function(J){return Ye(J,"Number")},hi=Lo,Cs=function(J){return hi(J)&&J%1!==0},Bo=Cs,lo=function(J){return hi(J)&&J%2===0},jo=lo,Mo=Number.isInteger?Number.isInteger:function(J){return hi(J)&&J%1===0},Zo=Mo,go=function(J){return hi(J)&&J<0},Da=go,Ri=1e-5;function zi(J,gt,St){return St===void 0&&(St=Ri),Math.abs(J-gt)<St}var Pa=function(J){return hi(J)&&J%2!==0},Ii=Pa,qo=function(J){return hi(J)&&J>0},Bi=qo,Fo=function(J,gt){if(Ae(J)){for(var St,Ut=-1/0,ae=0;ae<J.length;ae++){var Ue=J[ae],We=z(gt)?gt(Ue):Ue[gt];We>Ut&&(St=Ue,Ut=We)}return St}},Ao=function(J,gt){if(Ae(J)){for(var St,Ut=1/0,ae=0;ae<J.length;ae++){var Ue=J[ae],We=z(gt)?gt(Ue):Ue[gt];We<Ut&&(St=Ue,Ut=We)}return St}},$i=function(J,gt){return(J%gt+gt)%gt},Ts=$i,vs=180/Math.PI,$o=function(J){return vs*J},ps=$o,ou=parseInt,Vs=Math.PI/180,gs=function(J){return Vs*J},Ct=gs,Zt=wr,Xe=function(J,gt){return J.hasOwnProperty(gt)},Ke=Xe,kr=Object.values?function(J){return Object.values(J)}:function(J){var gt=[];return wr(J,function(St,Ut){z(J)&&Ut==="prototype"||gt.push(St)}),gt},gn=kr,Nn=function(J,gt){return bt(gn(J),gt)},ra=function(J){return Gt(J)?"":J.toString()},oi=function(J){return ra(J).toLowerCase()},Ji=oi,ho=function(J){var gt=ra(J);return gt.charAt(0).toLowerCase()+gt.substring(1)},Hs=ho;function _u(J,gt){return!J||!gt?J:J.replace(/\\?\{([^{}]+)\}/g,function(St,Ut){return St.charAt(0)==="\\"?St.slice(1):gt[Ut]===void 0?"":gt[Ut]})}var Ui=_u,yo=function(J){return ra(J).toUpperCase()},Js=yo,Xu=function(J){var gt=ra(J);return gt.charAt(0).toUpperCase()+gt.substring(1)},Su=Xu,su={}.toString,uu=function(J){return su.call(J).replace(/^\[object /,"").replace(/]$/,"")},tu=uu,Rs=function(J){return Ye(J,"Arguments")},eu=Rs,ys=function(J){return Ye(J,"Boolean")},No=ys,nf=function(J){return Ye(J,"Date")},Bf=nf,Ff=function(J){return Ye(J,"Error")},Bs=Ff;function Gf(J){return hi(J)&&isFinite(J)}var h=function(J){return J===null},L=h,lt=Object.prototype,wt=function(J){var gt=J&&J.constructor,St=typeof gt=="function"&&gt.prototype||lt;return J===St},Nt=wt,Yt=function(J){return Ye(J,"RegExp")},Vt=Yt,he=function(J){return J===void 0},ge=he,Le=function(J){return J instanceof Element||J instanceof Document},He=Le;function _r(J){var gt=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(St){return setTimeout(St,16)};return gt(J)}function Sr(J){var gt=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;gt(J)}function Er(J,gt){for(var St in gt)gt.hasOwnProperty(St)&&St!=="constructor"&&gt[St]!==void 0&&(J[St]=gt[St])}function Kr(J,gt,St,Ut){return gt&&Er(J,gt),St&&Er(J,St),Ut&&Er(J,Ut),J}var an=function(){for(var J=[],gt=0;gt<arguments.length;gt++)J[gt]=arguments[gt];for(var St=J[0],Ut=1;Ut<J.length;Ut++){var ae=J[Ut];z(ae)&&(ae=ae.prototype),Kr(St.prototype,ae)}},Lr=an,Tn=function(J){if(typeof J!="object"||J===null)return J;var gt;if(Ae(J)){gt=[];for(var St=0,Ut=J.length;St<Ut;St++)typeof J[St]=="object"&&J[St]!=null?gt[St]=Tn(J[St]):gt[St]=J[St]}else{gt={};for(var ae in J)typeof J[ae]=="object"&&J[ae]!=null?gt[ae]=Tn(J[ae]):gt[ae]=J[ae]}return gt},_a=Tn;function Sa(J,gt,St){var Ut;return function(){var ae=this,Ue=arguments,We=function(){Ut=null,St||J.apply(ae,Ue)},vr=St&&!Ut;clearTimeout(Ut),Ut=setTimeout(We,gt),vr&&J.apply(ae,Ue)}}var pa=Sa,na=5;function da(J,gt){if(Object.hasOwn)return Object.hasOwn(J,gt);if(J==null)throw new TypeError("Cannot convert undefined or null to object");return Object.prototype.hasOwnProperty.call(Object(J),gt)}function ki(J,gt,St,Ut){St=St||0,Ut=Ut||na;for(var ae in gt)if(da(gt,ae)){var Ue=gt[ae];Ue!==null&&It(Ue)?(It(J[ae])||(J[ae]={}),St<Ut?ki(J[ae],Ue,St+1,Ut):J[ae]=gt[ae]):Ae(Ue)?(J[ae]=[],J[ae]=J[ae].concat(Ue)):Ue!==void 0&&(J[ae]=Ue)}}var Li=function(J){for(var gt=[],St=1;St<arguments.length;St++)gt[St-1]=arguments[St];for(var Ut=0;Ut<gt.length;Ut+=1)ki(J,gt[Ut]);return J},Ai=Li,Ni=function(J,gt,St,Ut){z(gt)||(St=gt,gt=J,J=function(){});var ae=Object.create?function(We,vr){return Object.create(We,{constructor:{value:vr}})}:function(We,vr){function zr(){}zr.prototype=We;var qr=new zr;return qr.constructor=vr,qr},Ue=ae(gt.prototype,J);return J.prototype=Kr(Ue,J.prototype),J.superclass=ae(gt.prototype,gt),Kr(Ue,St),Kr(J,Ut),J},Oi=Ni,Xi=function(J,gt){if(!tn(J))return-1;var St=Array.prototype.indexOf;if(St)return St.call(J,gt);for(var Ut=-1,ae=0;ae<J.length;ae++)if(J[ae]===gt){Ut=ae;break}return Ut},to=Xi,Ua=Object.prototype.hasOwnProperty;function si(J){if(Gt(J))return!0;if(tn(J))return!J.length;var gt=tu(J);if(gt==="Map"||gt==="Set")return!J.size;if(Nt(J))return!Object.keys(J).length;for(var St in J)if(Ua.call(J,St))return!1;return!0}var Fs=si,ms=function(J,gt){if(J===gt)return!0;if(!J||!gt||Vi(J)||Vi(gt))return!1;if(tn(J)||tn(gt)){if(J.length!==gt.length)return!1;for(var St=!0,Ut=0;Ut<J.length&&(St=ms(J[Ut],gt[Ut]),!!St);Ut++);return St}if(Yr(J)||Yr(gt)){var ae=Object.keys(J),Ue=Object.keys(gt);if(ae.length!==Ue.length)return!1;for(var St=!0,Ut=0;Ut<ae.length&&(St=ms(J[ae[Ut]],gt[ae[Ut]]),!!St);Ut++);return St}return!1},Oo=ms,Mu=function(J,gt,St){return z(St)?!!St(J,gt):Oo(J,gt)},zf=function(J,gt){if(!tn(J))return J;for(var St=[],Ut=0;Ut<J.length;Ut++){var ae=J[Ut];St.push(gt(ae,Ut))}return St},yc=zf,mc=function(J){return J},bc=function(J,gt){gt===void 0&&(gt=mc);var St={};return fr(J)&&!Gt(J)&&Object.keys(J).forEach(function(Ut){St[Ut]=gt(J[Ut],Ut)}),St},Uf=function(J,gt,St){for(var Ut=0,ae=Vi(gt)?gt.split("."):gt;J&&Ut<ae.length;)J=J[ae[Ut++]];return J===void 0||Ut<ae.length?St:J},Xf=function(J,gt,St){var Ut=J,ae=Vi(gt)?gt.split("."):gt;return ae.forEach(function(Ue,We){We<ae.length-1?(fr(Ut[Ue])||(Ut[Ue]=hi(ae[We+1])?[]:{}),Ut=Ut[Ue]):Ut[Ue]=St}),J},xc=Object.prototype.hasOwnProperty,af=function(J,gt){if(J===null||!It(J))return{};var St={};return wr(gt,function(Ut){xc.call(J,Ut)&&(St[Ut]=J[Ut])}),St},of=function(J,gt){return ko(J,function(St,Ut,ae){return gt.includes(ae)||(St[ae]=Ut),St},{})},wc=function(J,gt,St){var Ut,ae,Ue,We,vr=0;St||(St={});var zr=function(){vr=St.leading===!1?0:Date.now(),Ut=null,We=J.apply(ae,Ue),Ut||(ae=Ue=null)},qr=function(){var Ln=Date.now();!vr&&St.leading===!1&&(vr=Ln);var Mn=gt-(Ln-vr);return ae=this,Ue=arguments,Mn<=0||Mn>gt?(Ut&&(clearTimeout(Ut),Ut=null),vr=Ln,We=J.apply(ae,Ue),Ut||(ae=Ue=null)):!Ut&&St.trailing!==!1&&(Ut=setTimeout(zr,Mn)),We};return qr.cancel=function(){clearTimeout(Ut),vr=0,Ut=ae=Ue=null},qr},tl=function(J){return tn(J)?Array.prototype.slice.call(J):[]},Gs={},Ec=function(J){return J=J||"g",Gs[J]?Gs[J]+=1:Gs[J]=1,J+Gs[J]},In=function(){},Au=function(J){return J};function Xa(J){return Gt(J)?0:tn(J)?J.length:Object.keys(J).length}var sf=function(){function J(){this.map={}}return J.prototype.has=function(gt){return this.map[gt]!==void 0},J.prototype.get=function(gt,St){var Ut=this.map[gt];return Ut===void 0?St:Ut},J.prototype.set=function(gt,St){this.map[gt]=St},J.prototype.clear=function(){this.map={}},J.prototype.delete=function(gt){delete this.map[gt]},J.prototype.size=function(){return Object.keys(this.map).length},J}(),Yf=sf,fu=1e-6;function Yu(J){return Math.abs(J)<fu?0:J<0?-1:1}function Wu(J,gt,St){return(St[0]-J[0])*(gt[1]-J[1])===(gt[0]-J[0])*(St[1]-J[1])&&Math.min(J[0],gt[0])<=St[0]&&St[0]<=Math.max(J[0],gt[0])&&Math.min(J[1],gt[1])<=St[1]&&St[1]<=Math.max(J[1],gt[1])}function uf(J,gt,St){var Ut=!1,ae=J.length;if(ae<=2)return!1;for(var Ue=0;Ue<ae;Ue++){var We=J[Ue],vr=J[(Ue+1)%ae];if(Wu(We,vr,[gt,St]))return!0;Yu(We[1]-St)>0!=Yu(vr[1]-St)>0&&Yu(gt-(St-We[1])*(We[0]-vr[0])/(We[1]-vr[1])-We[0])<0&&(Ut=!Ut)}return Ut}var ff=function(J,gt,St){return J>=gt&&J<=St};function _c(J,gt,St,Ut){var ae=.001,Ue={x:St.x-J.x,y:St.y-J.y},We={x:gt.x-J.x,y:gt.y-J.y},vr={x:Ut.x-St.x,y:Ut.y-St.y},zr=We.x*vr.y-We.y*vr.x,qr=zr*zr,Ln=We.x*We.x+We.y*We.y,Mn=vr.x*vr.x+vr.y*vr.y,kn=null;if(qr>ae*Ln*Mn){var sa=(Ue.x*vr.y-Ue.y*vr.x)/zr,Ta=(Ue.x*We.y-Ue.y*We.x)/zr;ff(sa,0,1)&&ff(Ta,0,1)&&(kn={x:J.x+sa*We.x,y:J.y+sa*We.y})}return kn}function bs(J){for(var gt=[],St=J.length,Ut=0;Ut<St-1;Ut++){var ae=J[Ut],Ue=J[Ut+1];gt.push({from:{x:ae[0],y:ae[1]},to:{x:Ue[0],y:Ue[1]}})}if(gt.length>1){var We=J[0],vr=J[St-1];gt.push({from:{x:vr[0],y:vr[1]},to:{x:We[0],y:We[1]}})}return gt}function Sc(J,gt){var St=!1;return J.forEach(function(Ut){if(_c(Ut.from,Ut.to,gt.from,gt.to))return St=!0,!1}),St}function cf(J){var gt=J.map(function(Ut){return Ut[0]}),St=J.map(function(Ut){return Ut[1]});return{minX:Math.min.apply(null,gt),maxX:Math.max.apply(null,gt),minY:Math.min.apply(null,St),maxY:Math.max.apply(null,St)}}function xi(J,gt){return!(gt.minX>J.maxX||gt.maxX<J.minX||gt.minY>J.maxY||gt.maxY<J.minY)}function Vu(J,gt){if(J.length<2||gt.length<2)return!1;var St=cf(J),Ut=cf(gt);if(!xi(St,Ut))return!1;var ae=!1;if(gt.forEach(function(zr){if(uf(J,zr[0],zr[1]))return ae=!0,!1}),ae||(J.forEach(function(zr){if(uf(gt,zr[0],zr[1]))return ae=!0,!1}),ae))return!0;var Ue=bs(J),We=bs(gt),vr=!1;return We.forEach(function(zr){if(Sc(Ue,zr))return vr=!0,!1}),vr}function Is(J){var gt=document.createElement("div");gt.innerHTML=J;var St=gt.childNodes[0];return St&&gt.contains(St)&&gt.removeChild(St),St}function Cu(J,gt){if(J)return Object.keys(gt).forEach(function(St){J.style[St]=gt[St]}),J}},31278:function(Se,R,et){"use strict";var ft;ft={value:!0};var nt=et(58204);function V(p,_,E){var b=[0,0,0,0,0,0,0,0,0];return nt.mat3.fromTranslation(b,E),nt.mat3.multiply(p,b,_)}ft=V;function z(p,_,E){var b=[0,0,0,0,0,0,0,0,0];return nt.mat3.fromRotation(b,E),nt.mat3.multiply(p,b,_)}ft=z;function H(p,_,E){var b=[0,0,0,0,0,0,0,0,0];return nt.mat3.fromScaling(b,E),nt.mat3.multiply(p,b,_)}ft=H;function F(p,_,E){return nt.mat3.multiply(p,E,_)}function M(p,_){for(var E=p?[].concat(p):[1,0,0,0,1,0,0,0,1],b=0,k=_.length;b<k;b++){var N=_[b];switch(N[0]){case"t":V(E,E,[N[1],N[2]]);break;case"s":H(E,E,[N[1],N[2]]);break;case"r":z(E,E,N[1]);break;case"m":F(E,E,N[1]);break;default:break}}return E}R.vs=M;function A(p,_){return p[0]*_[1]-_[0]*p[1]}ft=A;function y(p,_,E){var b=nt.vec2.angle(p,_),k=A(p,_)>=0;return E?k?Math.PI*2-b:b:k?b:Math.PI*2-b}ft=y;function x(p,_,E){return E?(p[0]=_[1],p[1]=-1*_[0]):(p[0]=-1*_[1],p[1]=_[0]),p}ft=x},13810:function(Se,R,et){"use strict";et.r(R),et.d(R,{Cache:function(){return gs},assign:function(){return ji},augment:function(){return bi},clamp:function(){return or},clearAnimationFrame:function(){return Ds},clone:function(){return Ho},contains:function(){return z},debounce:function(){return ds},deepMix:function(){return _o},difference:function(){return A},each:function(){return v},endsWith:function(){return Fn},every:function(){return er},extend:function(){return As},filter:function(){return F},find:function(){return ht},findIndex:function(){return At},firstValue:function(){return Rt},fixedBase:function(){return Br},flatten:function(){return dt},flattenDeep:function(){return yt},forIn:function(){return ne},get:function(){return go},getEllipsisText:function(){return ou},getRange:function(){return Jt},getType:function(){return fs},getWrapBehavior:function(){return oa},group:function(){return Vn},groupBy:function(){return yn},groupToMap:function(){return ln},has:function(){return xe},hasKey:function(){return pe},hasValue:function(){return lr},head:function(){return Ur},identity:function(){return $i},includes:function(){return z},indexOf:function(){return Gi},isArguments:function(){return oo},isArray:function(){return k},isArrayLike:function(){return nt},isBoolean:function(){return ko},isDate:function(){return ri},isDecimal:function(){return tn},isElement:function(){return Ss},isEmpty:function(){return Lo},isEqual:function(){return Cs},isEqualWith:function(){return Bo},isError:function(){return ls},isEven:function(){return bt},isFinite:function(){return Xo},isFunction:function(){return _},isInteger:function(){return I},isMatch:function(){return Y},isNegative:function(){return q},isNil:function(){return b},isNull:function(){return so},isNumber:function(){return cn},isNumberEqual:function(){return Gt},isObject:function(){return N},isObjectLike:function(){return Q},isOdd:function(){return ee},isPlainObject:function(){return rt},isPositive:function(){return Ae},isPrototype:function(){return Mi},isRegExp:function(){return hs},isString:function(){return se},isType:function(){return p},isUndefined:function(){return Eo},keys:function(){return B},last:function(){return wn},lowerCase:function(){return En},lowerFirst:function(){return Qn},map:function(){return jo},mapValues:function(){return Zo},max:function(){return Lt},maxBy:function(){return fr},measureTextWidth:function(){return ps},memoize:function(){return Ms},min:function(){return Ot},minBy:function(){return Hr},mix:function(){return ji},mod:function(){return hn},noop:function(){return Ao},number2color:function(){return ya},omit:function(){return Pa},parseRadius:function(){return qe},pick:function(){return zi},pull:function(){return Ce},pullAt:function(){return ue},reduce:function(){return Xt},remove:function(){return Ie},requestAnimationFrame:function(){return Wo},set:function(){return Da},size:function(){return Ts},some:function(){return dr},sortBy:function(){return Be},startsWith:function(){return Sn},substitute:function(){return Ha},throttle:function(){return Ii},toArray:function(){return qo},toDegree:function(){return xr},toInteger:function(){return Dr},toRadian:function(){return It},toString:function(){return en},union:function(){return Ir},uniq:function(){return Tt},uniqueId:function(){return Fo},upperCase:function(){return Ba},upperFirst:function(){return _i},values:function(){return sr},valuesOfKey:function(){return Zr},wrapBehavior:function(){return qn}});var ft=function(Ct){return Ct!==null&&typeof Ct!="function"&&isFinite(Ct.length)},nt=ft,V=function(Ct,Zt){return nt(Ct)?Ct.indexOf(Zt)>-1:!1},z=V,H=function(Ct,Zt){if(!nt(Ct))return Ct;for(var Xe=[],Ke=0;Ke<Ct.length;Ke++){var kr=Ct[Ke];Zt(kr,Ke)&&Xe.push(kr)}return Xe},F=H,M=function(Ct,Zt){return Zt===void 0&&(Zt=[]),F(Ct,function(Xe){return!z(Zt,Xe)})},A=M,y={}.toString,x=function(Ct,Zt){return y.call(Ct)==="[object "+Zt+"]"},p=x,_=function(Ct){return p(Ct,"Function")},E=function(Ct){return Ct==null},b=E,k=function(Ct){return Array.isArray?Array.isArray(Ct):p(Ct,"Array")},N=function(Ct){var Zt=typeof Ct;return Ct!==null&&Zt==="object"||Zt==="function"};function g(Ct,Zt){if(Ct){var Xe;if(k(Ct))for(var Ke=0,kr=Ct.length;Ke<kr&&(Xe=Zt(Ct[Ke],Ke),Xe!==!1);Ke++);else if(N(Ct)){for(var gn in Ct)if(Ct.hasOwnProperty(gn)&&(Xe=Zt(Ct[gn],gn),Xe===!1))break}}}var v=g,K=Object.keys?function(Ct){return Object.keys(Ct)}:function(Ct){var Zt=[];return v(Ct,function(Xe,Ke){_(Ct)&&Ke==="prototype"||Zt.push(Ke)}),Zt},B=K;function G(Ct,Zt){var Xe=B(Zt),Ke=Xe.length;if(b(Ct))return!Ke;for(var kr=0;kr<Ke;kr+=1){var gn=Xe[kr];if(Zt[gn]!==Ct[gn]||!(gn in Ct))return!1}return!0}var Y=G,j=function(Ct){return typeof Ct=="object"&&Ct!==null},Q=j,Z=function(Ct){if(!Q(Ct)||!p(Ct,"Object"))return!1;if(Object.getPrototypeOf(Ct)===null)return!0;for(var Zt=Ct;Object.getPrototypeOf(Zt)!==null;)Zt=Object.getPrototypeOf(Zt);return Object.getPrototypeOf(Ct)===Zt},rt=Z;function ut(Ct,Zt){if(!k(Ct))return null;var Xe;if(_(Zt)&&(Xe=Zt),rt(Zt)&&(Xe=function(kr){return Y(kr,Zt)}),Xe){for(var Ke=0;Ke<Ct.length;Ke+=1)if(Xe(Ct[Ke]))return Ct[Ke]}return null}var ht=ut;function kt(Ct,Zt,Xe){Xe===void 0&&(Xe=0);for(var Ke=Xe;Ke<Ct.length;Ke++)if(Zt(Ct[Ke],Ke))return Ke;return-1}var At=kt,Ht=function(Ct,Zt){for(var Xe=null,Ke=0;Ke<Ct.length;Ke++){var kr=Ct[Ke],gn=kr[Zt];if(!b(gn)){k(gn)?Xe=gn[0]:Xe=gn;break}}return Xe},Rt=Ht,le=function(Ct){if(!k(Ct))return[];for(var Zt=[],Xe=0;Xe<Ct.length;Xe++)Zt=Zt.concat(Ct[Xe]);return Zt},dt=le,ot=function(Ct,Zt){if(Zt===void 0&&(Zt=[]),!k(Ct))Zt.push(Ct);else for(var Xe=0;Xe<Ct.length;Xe+=1)ot(Ct[Xe],Zt);return Zt},yt=ot,Lt=function(Ct){if(k(Ct))return Ct.reduce(function(Zt,Xe){return Math.max(Zt,Xe)},Ct[0])},Ot=function(Ct){if(k(Ct))return Ct.reduce(function(Zt,Xe){return Math.min(Zt,Xe)},Ct[0])},Wt=function(Ct){var Zt=Ct.filter(function(Nn){return!isNaN(Nn)});if(!Zt.length)return{min:0,max:0};if(k(Ct[0])){for(var Xe=[],Ke=0;Ke<Ct.length;Ke++)Xe=Xe.concat(Ct[Ke]);Zt=Xe}var kr=Lt(Zt),gn=Ot(Zt);return{min:gn,max:kr}},Jt=Wt,De=Array.prototype,te=De.splice,oe=De.indexOf,me=function(Ct){for(var Zt=[],Xe=1;Xe<arguments.length;Xe++)Zt[Xe-1]=arguments[Xe];for(var Ke=0;Ke<Zt.length;Ke++)for(var kr=Zt[Ke],gn=-1;(gn=oe.call(Ct,kr))>-1;)te.call(Ct,gn,1);return Ct},Ce=me,_e=Array.prototype.splice,zt=function(Zt,Xe){if(!nt(Zt))return[];for(var Ke=Zt?Xe.length:0,kr=Ke-1;Ke--;){var gn=void 0,Nn=Xe[Ke];(Ke===kr||Nn!==gn)&&(gn=Nn,_e.call(Zt,Nn,1))}return Zt},ue=zt,Pe=function(Ct,Zt,Xe){if(!k(Ct)&&!rt(Ct))return Ct;var Ke=Xe;return v(Ct,function(kr,gn){Ke=Zt(Ke,kr,gn)}),Ke},Xt=Pe,ie=function(Ct,Zt){var Xe=[];if(!nt(Ct))return Xe;for(var Ke=-1,kr=[],gn=Ct.length;++Ke<gn;){var Nn=Ct[Ke];Zt(Nn,Ke,Ct)&&(Xe.push(Nn),kr.push(Ke))}return ue(Ct,kr),Xe},Ie=ie,se=function(Ct){return p(Ct,"String")};function Te(Ct,Zt){var Xe;if(_(Zt))Xe=function(kr,gn){return Zt(kr)-Zt(gn)};else{var Ke=[];se(Zt)?Ke.push(Zt):k(Zt)&&(Ke=Zt),Xe=function(kr,gn){for(var Nn=0;Nn<Ke.length;Nn+=1){var ra=Ke[Nn];if(kr[ra]>gn[ra])return 1;if(kr[ra]<gn[ra])return-1}return 0}}return Ct.sort(Xe),Ct}var Be=Te;function Tt(Ct,Zt){Zt===void 0&&(Zt=new Map);var Xe=[];if(Array.isArray(Ct))for(var Ke=0,kr=Ct.length;Ke<kr;Ke++){var gn=Ct[Ke];Zt.has(gn)||(Xe.push(gn),Zt.set(gn,!0))}return Xe}var nr=function(){for(var Ct=[],Zt=0;Zt<arguments.length;Zt++)Ct[Zt]=arguments[Zt];return Tt([].concat.apply([],Ct))},Ir=nr,Zr=function(Ct,Zt){for(var Xe=[],Ke={},kr=0;kr<Ct.length;kr++){var gn=Ct[kr],Nn=gn[Zt];if(!b(Nn)){k(Nn)||(Nn=[Nn]);for(var ra=0;ra<Nn.length;ra++){var oi=Nn[ra];Ke[oi]||(Xe.push(oi),Ke[oi]=!0)}}}return Xe};function Ur(Ct){if(nt(Ct))return Ct[0]}function wn(Ct){if(nt(Ct)){var Zt=Ct;return Zt[Zt.length-1]}}function Xr(Ct,Zt){return k(Ct)||se(Ct)?Ct[0]===Zt:!1}var Sn=Xr;function Kn(Ct,Zt){return k(Ct)||se(Ct)?Ct[Ct.length-1]===Zt:!1}var Fn=Kn,pn=function(Ct,Zt){for(var Xe=0;Xe<Ct.length;Xe++)if(!Zt(Ct[Xe],Xe))return!1;return!0},er=pn,cr=function(Ct,Zt){for(var Xe=0;Xe<Ct.length;Xe++)if(Zt(Ct[Xe],Xe))return!0;return!1},dr=cr,Gr=Object.prototype.hasOwnProperty;function sn(Ct,Zt){if(!Zt||!k(Ct))return{};for(var Xe={},Ke=_(Zt)?Zt:function(ra){return ra[Zt]},kr,gn=0;gn<Ct.length;gn++){var Nn=Ct[gn];kr=Ke(Nn),Gr.call(Xe,kr)?Xe[kr].push(Nn):Xe[kr]=[Nn]}return Xe}var yn=sn;function ln(Ct,Zt){if(!Zt)return{0:Ct};if(!_(Zt)){var Xe=k(Zt)?Zt:Zt.replace(/\s+/g,"").split("*");Zt=function(Ke){for(var kr="_",gn=0,Nn=Xe.length;gn<Nn;gn++)kr+=Ke[Xe[gn]]&&Ke[Xe[gn]].toString();return kr}}return yn(Ct,Zt)}var Vn=function(Ct,Zt){if(!Zt)return[Ct];var Xe=ln(Ct,Zt),Ke=[];for(var kr in Xe)Ke.push(Xe[kr]);return Ke};function ca(Ct,Zt){return Ct["_wrap_"+Zt]}var oa=ca;function bn(Ct,Zt){if(Ct["_wrap_"+Zt])return Ct["_wrap_"+Zt];var Xe=function(Ke){Ct[Zt](Ke)};return Ct["_wrap_"+Zt]=Xe,Xe}var qn=bn,Gn={};function zn(Ct){var Zt=Gn[Ct];if(!Zt){for(var Xe=Ct.toString(16),Ke=Xe.length;Ke<6;Ke++)Xe="0"+Xe;Zt="#"+Xe,Gn[Ct]=Zt}return Zt}var ya=zn;function W(Ct){var Zt=0,Xe=0,Ke=0,kr=0;return k(Ct)?Ct.length===1?Zt=Xe=Ke=kr=Ct[0]:Ct.length===2?(Zt=Ke=Ct[0],Xe=kr=Ct[1]):Ct.length===3?(Zt=Ct[0],Xe=kr=Ct[1],Ke=Ct[2]):(Zt=Ct[0],Xe=Ct[1],Ke=Ct[2],kr=Ct[3]):Zt=Xe=Ke=kr=Ct,{r1:Zt,r2:Xe,r3:Ke,r4:kr}}var qe=W,be=function(Ct,Zt,Xe){return Ct<Zt?Zt:Ct>Xe?Xe:Ct},or=be,ar=function(Ct,Zt){var Xe=Zt.toString(),Ke=Xe.indexOf(".");if(Ke===-1)return Math.round(Ct);var kr=Xe.substr(Ke+1).length;return kr>20&&(kr=20),parseFloat(Ct.toFixed(kr))},Br=ar,Pr=function(Ct){return p(Ct,"Number")},cn=Pr,xn=function(Ct){return cn(Ct)&&Ct%1!==0},tn=xn,vt=function(Ct){return cn(Ct)&&Ct%2===0},bt=vt,P=Number.isInteger?Number.isInteger:function(Ct){return cn(Ct)&&Ct%1===0},I=P,T=function(Ct){return cn(Ct)&&Ct<0},q=T,Et=1e-5;function Gt(Ct,Zt,Xe){return Xe===void 0&&(Xe=Et),Math.abs(Ct-Zt)<Xe}var Dt=function(Ct){return cn(Ct)&&Ct%2!==0},ee=Dt,Ye=function(Ct){return cn(Ct)&&Ct>0},Ae=Ye,fr=function(Ct,Zt){if(k(Ct)){for(var Xe,Ke=-1/0,kr=0;kr<Ct.length;kr++){var gn=Ct[kr],Nn=_(Zt)?Zt(gn):gn[Zt];Nn>Ke&&(Xe=gn,Ke=Nn)}return Xe}},Hr=function(Ct,Zt){if(k(Ct)){for(var Xe,Ke=1/0,kr=0;kr<Ct.length;kr++){var gn=Ct[kr],Nn=_(Zt)?Zt(gn):gn[Zt];Nn<Ke&&(Xe=gn,Ke=Nn)}return Xe}},wr=function(Ct,Zt){return(Ct%Zt+Zt)%Zt},hn=wr,Yn=180/Math.PI,Ze=function(Ct){return Yn*Ct},xr=Ze,Dr=parseInt,Yr=Math.PI/180,$t=function(Ct){return Yr*Ct},It=$t,ne=v,xe=function(Ct,Zt){return Ct.hasOwnProperty(Zt)},pe=xe,ke=Object.values?function(Ct){return Object.values(Ct)}:function(Ct){var Zt=[];return v(Ct,function(Xe,Ke){_(Ct)&&Ke==="prototype"||Zt.push(Xe)}),Zt},sr=ke,lr=function(Ct,Zt){return z(sr(Ct),Zt)},en=function(Ct){return b(Ct)?"":Ct.toString()},Dn=function(Ct){return en(Ct).toLowerCase()},En=Dn,ta=function(Ct){var Zt=en(Ct);return Zt.charAt(0).toLowerCase()+Zt.substring(1)},Qn=ta;function ba(Ct,Zt){return!Ct||!Zt?Ct:Ct.replace(/\\?\{([^{}]+)\}/g,function(Xe,Ke){return Xe.charAt(0)==="\\"?Xe.slice(1):Zt[Ke]===void 0?"":Zt[Ke]})}var Ha=ba,Za=function(Ct){return en(Ct).toUpperCase()},Ba=Za,To=function(Ct){var Zt=en(Ct);return Zt.charAt(0).toUpperCase()+Zt.substring(1)},_i=To,Si={}.toString,io=function(Ct){return Si.call(Ct).replace(/^\[object /,"").replace(/]$/,"")},fs=io,Io=function(Ct){return p(Ct,"Arguments")},oo=Io,Ca=function(Ct){return p(Ct,"Boolean")},ko=Ca,cs=function(Ct){return p(Ct,"Date")},ri=cs,Vi=function(Ct){return p(Ct,"Error")},ls=Vi;function Xo(Ct){return cn(Ct)&&isFinite(Ct)}var Hi=function(Ct){return Ct===null},so=Hi,Ws=Object.prototype,Yo=function(Ct){var Zt=Ct&&Ct.constructor,Xe=typeof Zt=="function"&&Zt.prototype||Ws;return Ct===Xe},Mi=Yo,uo=function(Ct){return p(Ct,"RegExp")},hs=uo,Un=function(Ct){return Ct===void 0},Eo=Un,Po=function(Ct){return Ct instanceof Element||Ct instanceof HTMLDocument},Ss=Po;function Wo(Ct){var Zt=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(Xe){return setTimeout(Xe,16)};return Zt(Ct)}function Ds(Ct){var Zt=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.msCancelAnimationFrame||clearTimeout;Zt(Ct)}function $n(Ct,Zt){for(var Xe in Zt)Zt.hasOwnProperty(Xe)&&Xe!=="constructor"&&Zt[Xe]!==void 0&&(Ct[Xe]=Zt[Xe])}function ji(Ct,Zt,Xe,Ke){return Zt&&$n(Ct,Zt),Xe&&$n(Ct,Xe),Ke&&$n(Ct,Ke),Ct}var Zi=function(){for(var Ct=[],Zt=0;Zt<arguments.length;Zt++)Ct[Zt]=arguments[Zt];for(var Xe=Ct[0],Ke=1;Ke<Ct.length;Ke++){var kr=Ct[Ke];_(kr)&&(kr=kr.prototype),ji(Xe.prototype,kr)}},bi=Zi,Vo=function(Ct){if(typeof Ct!="object"||Ct===null)return Ct;var Zt;if(k(Ct)){Zt=[];for(var Xe=0,Ke=Ct.length;Xe<Ke;Xe++)typeof Ct[Xe]=="object"&&Ct[Xe]!=null?Zt[Xe]=Vo(Ct[Xe]):Zt[Xe]=Ct[Xe]}else{Zt={};for(var kr in Ct)typeof Ct[kr]=="object"&&Ct[kr]!=null?Zt[kr]=Vo(Ct[kr]):Zt[kr]=Ct[kr]}return Zt},Ho=Vo;function fo(Ct,Zt,Xe){var Ke;return function(){var kr=this,gn=arguments,Nn=function(){Ke=null,Xe||Ct.apply(kr,gn)},ra=Xe&&!Ke;clearTimeout(Ke),Ke=setTimeout(Nn,Zt),ra&&Ct.apply(kr,gn)}}var ds=fo,Ms=function(Ct,Zt){if(!_(Ct))throw new TypeError("Expected a function");var Xe=function(){for(var Ke=[],kr=0;kr<arguments.length;kr++)Ke[kr]=arguments[kr];var gn=Zt?Zt.apply(this,Ke):Ke[0],Nn=Xe.cache;if(Nn.has(gn))return Nn.get(gn);var ra=Ct.apply(this,Ke);return Nn.set(gn,ra),ra};return Xe.cache=new Map,Xe},ns=5;function Ia(Ct,Zt,Xe,Ke){Xe=Xe||0,Ke=Ke||ns;for(var kr in Zt)if(Zt.hasOwnProperty(kr)){var gn=Zt[kr];gn!==null&&rt(gn)?(rt(Ct[kr])||(Ct[kr]={}),Xe<Ke?Ia(Ct[kr],gn,Xe+1,Ke):Ct[kr]=Zt[kr]):k(gn)?(Ct[kr]=[],Ct[kr]=Ct[kr].concat(gn)):gn!==void 0&&(Ct[kr]=gn)}}var Ps=function(Ct){for(var Zt=[],Xe=1;Xe<arguments.length;Xe++)Zt[Xe-1]=arguments[Xe];for(var Ke=0;Ke<Zt.length;Ke+=1)Ia(Ct,Zt[Ke]);return Ct},_o=Ps,co=function(Ct,Zt,Xe,Ke){_(Zt)||(Xe=Zt,Zt=Ct,Ct=function(){});var kr=Object.create?function(Nn,ra){return Object.create(Nn,{constructor:{value:ra}})}:function(Nn,ra){function oi(){}oi.prototype=Nn;var Ji=new oi;return Ji.constructor=ra,Ji},gn=kr(Zt.prototype,Ct);return Ct.prototype=ji(gn,Ct.prototype),Ct.superclass=kr(Zt.prototype,Zt),ji(gn,Xe),ji(Ct,Ke),Ct},As=co,Ro=function(Ct,Zt){if(!nt(Ct))return-1;var Xe=Array.prototype.indexOf;if(Xe)return Xe.call(Ct,Zt);for(var Ke=-1,kr=0;kr<Ct.length;kr++)if(Ct[kr]===Zt){Ke=kr;break}return Ke},Gi=Ro,So=Object.prototype.hasOwnProperty;function qi(Ct){if(b(Ct))return!0;if(nt(Ct))return!Ct.length;var Zt=fs(Ct);if(Zt==="Map"||Zt==="Set")return!Ct.size;if(Mi(Ct))return!Object.keys(Ct).length;for(var Xe in Ct)if(So.call(Ct,Xe))return!1;return!0}var Lo=qi,hi=function(Ct,Zt){if(Ct===Zt)return!0;if(!Ct||!Zt||se(Ct)||se(Zt))return!1;if(nt(Ct)||nt(Zt)){if(Ct.length!==Zt.length)return!1;for(var Xe=!0,Ke=0;Ke<Ct.length&&(Xe=hi(Ct[Ke],Zt[Ke]),!!Xe);Ke++);return Xe}if(Q(Ct)||Q(Zt)){var kr=Object.keys(Ct),gn=Object.keys(Zt);if(kr.length!==gn.length)return!1;for(var Xe=!0,Ke=0;Ke<kr.length&&(Xe=hi(Ct[kr[Ke]],Zt[kr[Ke]]),!!Xe);Ke++);return Xe}return!1},Cs=hi,Bo=function(Ct,Zt,Xe){return _(Xe)?!!Xe(Ct,Zt):Cs(Ct,Zt)},lo=function(Ct,Zt){if(!nt(Ct))return Ct;for(var Xe=[],Ke=0;Ke<Ct.length;Ke++){var kr=Ct[Ke];Xe.push(Zt(kr,Ke))}return Xe},jo=lo,Mo=function(Ct){return Ct},Zo=function(Ct,Zt){Zt===void 0&&(Zt=Mo);var Xe={};return N(Ct)&&!b(Ct)&&Object.keys(Ct).forEach(function(Ke){Xe[Ke]=Zt(Ct[Ke],Ke)}),Xe},go=function(Ct,Zt,Xe){for(var Ke=0,kr=se(Zt)?Zt.split("."):Zt;Ct&&Ke<kr.length;)Ct=Ct[kr[Ke++]];return Ct===void 0||Ke<kr.length?Xe:Ct},Da=function(Ct,Zt,Xe){var Ke=Ct,kr=se(Zt)?Zt.split("."):Zt;return kr.forEach(function(gn,Nn){Nn<kr.length-1?(N(Ke[gn])||(Ke[gn]=cn(kr[Nn+1])?[]:{}),Ke=Ke[gn]):Ke[gn]=Xe}),Ct},Ri=Object.prototype.hasOwnProperty,zi=function(Ct,Zt){if(Ct===null||!rt(Ct))return{};var Xe={};return v(Zt,function(Ke){Ri.call(Ct,Ke)&&(Xe[Ke]=Ct[Ke])}),Xe},Pa=function(Ct,Zt){return Xt(Ct,function(Xe,Ke,kr){return Zt.includes(kr)||(Xe[kr]=Ke),Xe},{})},Ii=function(Ct,Zt,Xe){var Ke,kr,gn,Nn,ra=0;Xe||(Xe={});var oi=function(){ra=Xe.leading===!1?0:Date.now(),Ke=null,Nn=Ct.apply(kr,gn),Ke||(kr=gn=null)},Ji=function(){var ho=Date.now();!ra&&Xe.leading===!1&&(ra=ho);var Hs=Zt-(ho-ra);return kr=this,gn=arguments,Hs<=0||Hs>Zt?(Ke&&(clearTimeout(Ke),Ke=null),ra=ho,Nn=Ct.apply(kr,gn),Ke||(kr=gn=null)):!Ke&&Xe.trailing!==!1&&(Ke=setTimeout(oi,Hs)),Nn};return Ji.cancel=function(){clearTimeout(Ke),ra=0,Ke=kr=gn=null},Ji},qo=function(Ct){return nt(Ct)?Array.prototype.slice.call(Ct):[]},Bi={},Fo=function(Ct){return Ct=Ct||"g",Bi[Ct]?Bi[Ct]+=1:Bi[Ct]=1,Ct+Bi[Ct]},Ao=function(){},$i=function(Ct){return Ct};function Ts(Ct){return b(Ct)?0:nt(Ct)?Ct.length:Object.keys(Ct).length}var vs=et(97582),$o,ps=Ms(function(Ct,Zt){Zt===void 0&&(Zt={});var Xe=Zt.fontSize,Ke=Zt.fontFamily,kr=Zt.fontWeight,gn=Zt.fontStyle,Nn=Zt.fontVariant;return $o||($o=document.createElement("canvas").getContext("2d")),$o.font=[gn,Nn,kr,Xe+"px",Ke].join(" "),$o.measureText(se(Ct)?Ct:"").width},function(Ct,Zt){return Zt===void 0&&(Zt={}),(0,vs.__spreadArrays)([Ct],sr(Zt)).join("")}),ou=function(Ct,Zt,Xe,Ke){Ke===void 0&&(Ke="...");var kr=16,gn=ps(Ke,Xe),Nn=se(Ct)?Ct:en(Ct),ra=Zt,oi=[],Ji,ho;if(ps(Ct,Xe)<=Zt)return Ct;for(;Ji=Nn.substr(0,kr),ho=ps(Ji,Xe),!(ho+gn>ra&&ho>ra);)if(oi.push(Ji),ra-=ho,Nn=Nn.substr(kr),!Nn)return oi.join("");for(;Ji=Nn.substr(0,1),ho=ps(Ji,Xe),!(ho+gn>ra);)if(oi.push(Ji),ra-=ho,Nn=Nn.substr(1),!Nn)return oi.join("");return""+oi.join("")+Ke},Vs=function(){function Ct(){this.map={}}return Ct.prototype.has=function(Zt){return this.map[Zt]!==void 0},Ct.prototype.get=function(Zt,Xe){var Ke=this.map[Zt];return Ke===void 0?Xe:Ke},Ct.prototype.set=function(Zt,Xe){this.map[Zt]=Xe},Ct.prototype.clear=function(){this.map={}},Ct.prototype.delete=function(Zt){delete this.map[Zt]},Ct.prototype.size=function(){return Object.keys(this.map).length},Ct}(),gs=Vs},97828:function(Se,R,et){"use strict";et.r(R),et.d(R,{AbstractMatrix:function(){return Be},CHO:function(){return xn},CholeskyDecomposition:function(){return xn},EVD:function(){return be},EigenvalueDecomposition:function(){return be},LU:function(){return sn},LuDecomposition:function(){return sn},Matrix:function(){return nr},MatrixColumnSelectionView:function(){return Ur},MatrixColumnView:function(){return Zr},MatrixFlipColumnView:function(){return wn},MatrixFlipRowView:function(){return Xr},MatrixRowSelectionView:function(){return Kn},MatrixRowView:function(){return Sn},MatrixSelectionView:function(){return Fn},MatrixSubView:function(){return pn},MatrixTransposeView:function(){return er},NIPALS:function(){return tn},Nipals:function(){return tn},QR:function(){return ln},QrDecomposition:function(){return ln},SVD:function(){return Vn},SingularValueDecomposition:function(){return Vn},WrapperMatrix1D:function(){return cr},WrapperMatrix2D:function(){return dr},correlation:function(){return qe},covariance:function(){return W},default:function(){return nr},determinant:function(){return bn},inverse:function(){return ca},linearDependencies:function(){return zn},pseudoInverse:function(){return ya},solve:function(){return oa},wrap:function(){return Gr}});var ft=et(73408),nt=et.n(ft),V=et(25098),z=et.n(V),H=et(31996),F=et.n(H),M=et(26037),A=et.n(M),y=et(52677),x=et.n(y),p=et(12444),_=et.n(p),E=et(72004),b=et.n(E);const k=Object.prototype.toString;function N(vt){const bt=k.call(vt);return bt.endsWith("Array]")&&!bt.includes("Big")}function g(vt){var bt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!N(vt))throw new TypeError("input must be an array");if(vt.length===0)throw new TypeError("input must not be empty");var P=bt.fromIndex,I=P===void 0?0:P,T=bt.toIndex,q=T===void 0?vt.length:T;if(I<0||I>=vt.length||!Number.isInteger(I))throw new Error("fromIndex must be a positive integer smaller than length");if(q<=I||q>vt.length||!Number.isInteger(q))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var Et=vt[I],Gt=I+1;Gt<q;Gt++)vt[Gt]>Et&&(Et=vt[Gt]);return Et}function v(vt){var bt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!N(vt))throw new TypeError("input must be an array");if(vt.length===0)throw new TypeError("input must not be empty");var P=bt.fromIndex,I=P===void 0?0:P,T=bt.toIndex,q=T===void 0?vt.length:T;if(I<0||I>=vt.length||!Number.isInteger(I))throw new Error("fromIndex must be a positive integer smaller than length");if(q<=I||q>vt.length||!Number.isInteger(q))throw new Error("toIndex must be an integer greater than fromIndex and at most equal to length");for(var Et=vt[I],Gt=I+1;Gt<q;Gt++)vt[Gt]<Et&&(Et=vt[Gt]);return Et}function K(vt){var bt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(N(vt)){if(vt.length===0)throw new TypeError("input must not be empty")}else throw new TypeError("input must be an array");var P;if(bt.output!==void 0){if(!N(bt.output))throw new TypeError("output option must be an array if specified");P=bt.output}else P=new Array(vt.length);var I=v(vt),T=g(vt);if(I===T)throw new RangeError("minimum and maximum input values are equal. Cannot rescale a constant array");var q=bt.min,Et=q===void 0?bt.autoMinMax?I:0:q,Gt=bt.max,Dt=Gt===void 0?bt.autoMinMax?T:1:Gt;if(Et>=Dt)throw new RangeError("min option must be smaller than max option");for(var ee=(Dt-Et)/(T-I),Ye=0;Ye<vt.length;Ye++)P[Ye]=(vt[Ye]-I)*ee+Et;return P}var B=" ".repeat(2),G=" ".repeat(4);function Y(){return j(this)}function j(vt){var bt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},P=bt.maxRows,I=P===void 0?15:P,T=bt.maxColumns,q=T===void 0?10:T,Et=bt.maxNumSize,Gt=Et===void 0?8:Et;return"".concat(vt.constructor.name,` {
`).concat(B,`[
`).concat(G).concat(Q(vt,I,q,Gt),`
`).concat(B,`]
`).concat(B,"rows: ").concat(vt.rows,`
`).concat(B,"columns: ").concat(vt.columns,`
}`)}function Q(vt,bt,P,I){for(var T=vt.rows,q=vt.columns,Et=Math.min(T,bt),Gt=Math.min(q,P),Dt=[],ee=0;ee<Et;ee++){for(var Ye=[],Ae=0;Ae<Gt;Ae++)Ye.push(Z(vt.get(ee,Ae),I));Dt.push("".concat(Ye.join(" ")))}return Gt!==q&&(Dt[Dt.length-1]+=" ... ".concat(q-P," more columns")),Et!==T&&Dt.push("... ".concat(T-bt," more rows")),Dt.join(`
`.concat(G))}function Z(vt,bt){var P=String(vt);if(P.length<=bt)return P.padEnd(bt," ");var I=vt.toPrecision(bt-2);if(I.length<=bt)return I;var T=vt.toExponential(bt-2),q=T.indexOf("e"),Et=T.slice(q);return T.slice(0,bt-Et.length)+Et}function rt(vt,bt){vt.prototype.add=function(I){return typeof I=="number"?this.addS(I):this.addM(I)},vt.prototype.addS=function(I){for(var T=0;T<this.rows;T++)for(var q=0;q<this.columns;q++)this.set(T,q,this.get(T,q)+I);return this},vt.prototype.addM=function(I){if(I=bt.checkMatrix(I),this.rows!==I.rows||this.columns!==I.columns)throw new RangeError("Matrices dimensions must be equal");for(var T=0;T<this.rows;T++)for(var q=0;q<this.columns;q++)this.set(T,q,this.get(T,q)+I.get(T,q));return this},vt.add=function(I,T){var q=new bt(I);return q.add(T)},vt.prototype.sub=function(I){return typeof I=="number"?this.subS(I):this.subM(I)},vt.prototype.subS=function(I){for(var T=0;T<this.rows;T++)for(var q=0;q<this.columns;q++)this.set(T,q,this.get(T,q)-I);return this},vt.prototype.subM=function(I){if(I=bt.checkMatrix(I),this.rows!==I.rows||this.columns!==I.columns)throw new RangeError("Matrices dimensions must be equal");for(var T=0;T<this.rows;T++)for(var q=0;q<this.columns;q++)this.set(T,q,this.get(T,q)-I.get(T,q));return this},vt.sub=function(I,T){var q=new bt(I);return q.sub(T)},vt.prototype.subtract=vt.prototype.sub,vt.prototype.subtractS=vt.prototype.subS,vt.prototype.subtractM=vt.prototype.subM,vt.subtract=vt.sub,vt.prototype.mul=function(I){return typeof I=="number"?this.mulS(I):this.mulM(I)},vt.prototype.mulS=function(I){for(var T=0;T<this.rows;T++)for(var q=0;q<this.columns;q++)this.set(T,q,this.get(T,q)*I);return this},vt.prototype.mulM=function(I){if(I=bt.checkMatrix(I),this.rows!==I.rows||this.columns!==I.columns)throw new RangeError("Matrices dimensions must be equal");for(var T=0;T<this.rows;T++)for(var q=0;q<this.columns;q++)this.set(T,q,this.get(T,q)*I.get(T,q));return this},vt.mul=function(I,T){var q=new bt(I);return q.mul(T)},vt.prototype.multiply=vt.prototype.mul,vt.prototype.multiplyS=vt.prototype.mulS,vt.prototype.multiplyM=vt.prototype.mulM,vt.multiply=vt.mul,vt.prototype.div=function(I){return typeof I=="number"?this.divS(I):this.divM(I)},vt.prototype.divS=function(I){for(var T=0;T<this.rows;T++)for(var q=0;q<this.columns;q++)this.set(T,q,this.get(T,q)/I);return this},vt.prototype.divM=function(I){if(I=bt.checkMatrix(I),this.rows!==I.rows||this.columns!==I.columns)throw new RangeError("Matrices dimensions must be equal");for(var T=0;T<this.rows;T++)for(var q=0;q<this.columns;q++)this.set(T,q,this.get(T,q)/I.get(T,q));return this},vt.div=function(I,T){var q=new bt(I);return q.div(T)},vt.prototype.divide=vt.prototype.div,vt.prototype.divideS=vt.prototype.divS,vt.prototype.divideM=vt.prototype.divM,vt.divide=vt.div,vt.prototype.mod=function(I){return typeof I=="number"?this.modS(I):this.modM(I)},vt.prototype.modS=function(I){for(var T=0;T<this.rows;T++)for(var q=0;q<this.columns;q++)this.set(T,q,this.get(T,q)%I);return this},vt.prototype.modM=function(I){if(I=bt.checkMatrix(I),this.rows!==I.rows||this.columns!==I.columns)throw new RangeError("Matrices dimensions must be equal");for(var T=0;T<this.rows;T++)for(var q=0;q<this.columns;q++)this.set(T,q,this.get(T,q)%I.get(T,q));return this},vt.mod=function(I,T){var q=new bt(I);return q.mod(T)},vt.prototype.modulus=vt.prototype.mod,vt.prototype.modulusS=vt.prototype.modS,vt.prototype.modulusM=vt.prototype.modM,vt.modulus=vt.mod,vt.prototype.and=function(I){return typeof I=="number"?this.andS(I):this.andM(I)},vt.prototype.andS=function(I){for(var T=0;T<this.rows;T++)for(var q=0;q<this.columns;q++)this.set(T,q,this.get(T,q)&I);return this},vt.prototype.andM=function(I){if(I=bt.checkMatrix(I),this.rows!==I.rows||this.columns!==I.columns)throw new RangeError("Matrices dimensions must be equal");for(var T=0;T<this.rows;T++)for(var q=0;q<this.columns;q++)this.set(T,q,this.get(T,q)&I.get(T,q));return this},vt.and=function(I,T){var q=new bt(I);return q.and(T)},vt.prototype.or=function(I){return typeof I=="number"?this.orS(I):this.orM(I)},vt.prototype.orS=function(I){for(var T=0;T<this.rows;T++)for(var q=0;q<this.columns;q++)this.set(T,q,this.get(T,q)|I);return this},vt.prototype.orM=function(I){if(I=bt.checkMatrix(I),this.rows!==I.rows||this.columns!==I.columns)throw new RangeError("Matrices dimensions must be equal");for(var T=0;T<this.rows;T++)for(var q=0;q<this.columns;q++)this.set(T,q,this.get(T,q)|I.get(T,q));return this},vt.or=function(I,T){var q=new bt(I);return q.or(T)},vt.prototype.xor=function(I){return typeof I=="number"?this.xorS(I):this.xorM(I)},vt.prototype.xorS=function(I){for(var T=0;T<this.rows;T++)for(var q=0;q<this.columns;q++)this.set(T,q,this.get(T,q)^I);return this},vt.prototype.xorM=function(I){if(I=bt.checkMatrix(I),this.rows!==I.rows||this.columns!==I.columns)throw new RangeError("Matrices dimensions must be equal");for(var T=0;T<this.rows;T++)for(var q=0;q<this.columns;q++)this.set(T,q,this.get(T,q)^I.get(T,q));return this},vt.xor=function(I,T){var q=new bt(I);return q.xor(T)},vt.prototype.leftShift=function(I){return typeof I=="number"?this.leftShiftS(I):this.leftShiftM(I)},vt.prototype.leftShiftS=function(I){for(var T=0;T<this.rows;T++)for(var q=0;q<this.columns;q++)this.set(T,q,this.get(T,q)<<I);return this},vt.prototype.leftShiftM=function(I){if(I=bt.checkMatrix(I),this.rows!==I.rows||this.columns!==I.columns)throw new RangeError("Matrices dimensions must be equal");for(var T=0;T<this.rows;T++)for(var q=0;q<this.columns;q++)this.set(T,q,this.get(T,q)<<I.get(T,q));return this},vt.leftShift=function(I,T){var q=new bt(I);return q.leftShift(T)},vt.prototype.signPropagatingRightShift=function(I){return typeof I=="number"?this.signPropagatingRightShiftS(I):this.signPropagatingRightShiftM(I)},vt.prototype.signPropagatingRightShiftS=function(I){for(var T=0;T<this.rows;T++)for(var q=0;q<this.columns;q++)this.set(T,q,this.get(T,q)>>I);return this},vt.prototype.signPropagatingRightShiftM=function(I){if(I=bt.checkMatrix(I),this.rows!==I.rows||this.columns!==I.columns)throw new RangeError("Matrices dimensions must be equal");for(var T=0;T<this.rows;T++)for(var q=0;q<this.columns;q++)this.set(T,q,this.get(T,q)>>I.get(T,q));return this},vt.signPropagatingRightShift=function(I,T){var q=new bt(I);return q.signPropagatingRightShift(T)},vt.prototype.rightShift=function(I){return typeof I=="number"?this.rightShiftS(I):this.rightShiftM(I)},vt.prototype.rightShiftS=function(I){for(var T=0;T<this.rows;T++)for(var q=0;q<this.columns;q++)this.set(T,q,this.get(T,q)>>>I);return this},vt.prototype.rightShiftM=function(I){if(I=bt.checkMatrix(I),this.rows!==I.rows||this.columns!==I.columns)throw new RangeError("Matrices dimensions must be equal");for(var T=0;T<this.rows;T++)for(var q=0;q<this.columns;q++)this.set(T,q,this.get(T,q)>>>I.get(T,q));return this},vt.rightShift=function(I,T){var q=new bt(I);return q.rightShift(T)},vt.prototype.zeroFillRightShift=vt.prototype.rightShift,vt.prototype.zeroFillRightShiftS=vt.prototype.rightShiftS,vt.prototype.zeroFillRightShiftM=vt.prototype.rightShiftM,vt.zeroFillRightShift=vt.rightShift,vt.prototype.not=function(){for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,~this.get(I,T));return this},vt.not=function(I){var T=new bt(I);return T.not()},vt.prototype.abs=function(){for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,Math.abs(this.get(I,T)));return this},vt.abs=function(I){var T=new bt(I);return T.abs()},vt.prototype.acos=function(){for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,Math.acos(this.get(I,T)));return this},vt.acos=function(I){var T=new bt(I);return T.acos()},vt.prototype.acosh=function(){for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,Math.acosh(this.get(I,T)));return this},vt.acosh=function(I){var T=new bt(I);return T.acosh()},vt.prototype.asin=function(){for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,Math.asin(this.get(I,T)));return this},vt.asin=function(I){var T=new bt(I);return T.asin()},vt.prototype.asinh=function(){for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,Math.asinh(this.get(I,T)));return this},vt.asinh=function(I){var T=new bt(I);return T.asinh()},vt.prototype.atan=function(){for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,Math.atan(this.get(I,T)));return this},vt.atan=function(I){var T=new bt(I);return T.atan()},vt.prototype.atanh=function(){for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,Math.atanh(this.get(I,T)));return this},vt.atanh=function(I){var T=new bt(I);return T.atanh()},vt.prototype.cbrt=function(){for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,Math.cbrt(this.get(I,T)));return this},vt.cbrt=function(I){var T=new bt(I);return T.cbrt()},vt.prototype.ceil=function(){for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,Math.ceil(this.get(I,T)));return this},vt.ceil=function(I){var T=new bt(I);return T.ceil()},vt.prototype.clz32=function(){for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,Math.clz32(this.get(I,T)));return this},vt.clz32=function(I){var T=new bt(I);return T.clz32()},vt.prototype.cos=function(){for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,Math.cos(this.get(I,T)));return this},vt.cos=function(I){var T=new bt(I);return T.cos()},vt.prototype.cosh=function(){for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,Math.cosh(this.get(I,T)));return this},vt.cosh=function(I){var T=new bt(I);return T.cosh()},vt.prototype.exp=function(){for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,Math.exp(this.get(I,T)));return this},vt.exp=function(I){var T=new bt(I);return T.exp()},vt.prototype.expm1=function(){for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,Math.expm1(this.get(I,T)));return this},vt.expm1=function(I){var T=new bt(I);return T.expm1()},vt.prototype.floor=function(){for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,Math.floor(this.get(I,T)));return this},vt.floor=function(I){var T=new bt(I);return T.floor()},vt.prototype.fround=function(){for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,Math.fround(this.get(I,T)));return this},vt.fround=function(I){var T=new bt(I);return T.fround()},vt.prototype.log=function(){for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,Math.log(this.get(I,T)));return this},vt.log=function(I){var T=new bt(I);return T.log()},vt.prototype.log1p=function(){for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,Math.log1p(this.get(I,T)));return this},vt.log1p=function(I){var T=new bt(I);return T.log1p()},vt.prototype.log10=function(){for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,Math.log10(this.get(I,T)));return this},vt.log10=function(I){var T=new bt(I);return T.log10()},vt.prototype.log2=function(){for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,Math.log2(this.get(I,T)));return this},vt.log2=function(I){var T=new bt(I);return T.log2()},vt.prototype.round=function(){for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,Math.round(this.get(I,T)));return this},vt.round=function(I){var T=new bt(I);return T.round()},vt.prototype.sign=function(){for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,Math.sign(this.get(I,T)));return this},vt.sign=function(I){var T=new bt(I);return T.sign()},vt.prototype.sin=function(){for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,Math.sin(this.get(I,T)));return this},vt.sin=function(I){var T=new bt(I);return T.sin()},vt.prototype.sinh=function(){for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,Math.sinh(this.get(I,T)));return this},vt.sinh=function(I){var T=new bt(I);return T.sinh()},vt.prototype.sqrt=function(){for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,Math.sqrt(this.get(I,T)));return this},vt.sqrt=function(I){var T=new bt(I);return T.sqrt()},vt.prototype.tan=function(){for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,Math.tan(this.get(I,T)));return this},vt.tan=function(I){var T=new bt(I);return T.tan()},vt.prototype.tanh=function(){for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,Math.tanh(this.get(I,T)));return this},vt.tanh=function(I){var T=new bt(I);return T.tanh()},vt.prototype.trunc=function(){for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,Math.trunc(this.get(I,T)));return this},vt.trunc=function(I){var T=new bt(I);return T.trunc()},vt.pow=function(I,T){var q=new bt(I);return q.pow(T)},vt.prototype.pow=function(I){return typeof I=="number"?this.powS(I):this.powM(I)},vt.prototype.powS=function(I){for(var T=0;T<this.rows;T++)for(var q=0;q<this.columns;q++)this.set(T,q,Math.pow(this.get(T,q),I));return this},vt.prototype.powM=function(I){if(I=bt.checkMatrix(I),this.rows!==I.rows||this.columns!==I.columns)throw new RangeError("Matrices dimensions must be equal");for(var T=0;T<this.rows;T++)for(var q=0;q<this.columns;q++)this.set(T,q,Math.pow(this.get(T,q),I.get(T,q)));return this}}function ut(vt,bt,P){var I=P?vt.rows:vt.rows-1;if(bt<0||bt>I)throw new RangeError("Row index out of range")}function ht(vt,bt,P){var I=P?vt.columns:vt.columns-1;if(bt<0||bt>I)throw new RangeError("Column index out of range")}function kt(vt,bt){if(bt.to1DArray&&(bt=bt.to1DArray()),bt.length!==vt.columns)throw new RangeError("vector size must be the same as the number of columns");return bt}function At(vt,bt){if(bt.to1DArray&&(bt=bt.to1DArray()),bt.length!==vt.rows)throw new RangeError("vector size must be the same as the number of rows");return bt}function Ht(vt,bt,P){return{row:Rt(vt,bt),column:le(vt,P)}}function Rt(vt,bt){if(x()(bt)!=="object")throw new TypeError("unexpected type for row indices");var P=bt.some(function(I){return I<0||I>=vt.rows});if(P)throw new RangeError("row indices are out of range");return Array.isArray(bt)||(bt=Array.from(bt)),bt}function le(vt,bt){if(x()(bt)!=="object")throw new TypeError("unexpected type for column indices");var P=bt.some(function(I){return I<0||I>=vt.columns});if(P)throw new RangeError("column indices are out of range");return Array.isArray(bt)||(bt=Array.from(bt)),bt}function dt(vt,bt,P,I,T){if(arguments.length!==5)throw new RangeError("expected 4 arguments");if(yt("startRow",bt),yt("endRow",P),yt("startColumn",I),yt("endColumn",T),bt>P||I>T||bt<0||bt>=vt.rows||P<0||P>=vt.rows||I<0||I>=vt.columns||T<0||T>=vt.columns)throw new RangeError("Submatrix indices are out of range")}function ot(vt){for(var bt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,P=[],I=0;I<vt;I++)P.push(bt);return P}function yt(vt,bt){if(typeof bt!="number")throw new TypeError("".concat(vt," must be a number"))}function Lt(vt){for(var bt=ot(vt.rows),P=0;P<vt.rows;++P)for(var I=0;I<vt.columns;++I)bt[P]+=vt.get(P,I);return bt}function Ot(vt){for(var bt=ot(vt.columns),P=0;P<vt.rows;++P)for(var I=0;I<vt.columns;++I)bt[I]+=vt.get(P,I);return bt}function Wt(vt){for(var bt=0,P=0;P<vt.rows;P++)for(var I=0;I<vt.columns;I++)bt+=vt.get(P,I);return bt}function Jt(vt){for(var bt=ot(vt.rows,1),P=0;P<vt.rows;++P)for(var I=0;I<vt.columns;++I)bt[P]*=vt.get(P,I);return bt}function De(vt){for(var bt=ot(vt.columns,1),P=0;P<vt.rows;++P)for(var I=0;I<vt.columns;++I)bt[I]*=vt.get(P,I);return bt}function te(vt){for(var bt=1,P=0;P<vt.rows;P++)for(var I=0;I<vt.columns;I++)bt*=vt.get(P,I);return bt}function oe(vt,bt,P){for(var I=vt.rows,T=vt.columns,q=[],Et=0;Et<I;Et++){for(var Gt=0,Dt=0,ee=0,Ye=0;Ye<T;Ye++)ee=vt.get(Et,Ye)-P[Et],Gt+=ee,Dt+=ee*ee;bt?q.push((Dt-Gt*Gt/T)/(T-1)):q.push((Dt-Gt*Gt/T)/T)}return q}function me(vt,bt,P){for(var I=vt.rows,T=vt.columns,q=[],Et=0;Et<T;Et++){for(var Gt=0,Dt=0,ee=0,Ye=0;Ye<I;Ye++)ee=vt.get(Ye,Et)-P[Et],Gt+=ee,Dt+=ee*ee;bt?q.push((Dt-Gt*Gt/I)/(I-1)):q.push((Dt-Gt*Gt/I)/I)}return q}function Ce(vt,bt,P){for(var I=vt.rows,T=vt.columns,q=I*T,Et=0,Gt=0,Dt=0,ee=0;ee<I;ee++)for(var Ye=0;Ye<T;Ye++)Dt=vt.get(ee,Ye)-P,Et+=Dt,Gt+=Dt*Dt;return bt?(Gt-Et*Et/q)/(q-1):(Gt-Et*Et/q)/q}function _e(vt,bt){for(var P=0;P<vt.rows;P++)for(var I=0;I<vt.columns;I++)vt.set(P,I,vt.get(P,I)-bt[P])}function zt(vt,bt){for(var P=0;P<vt.rows;P++)for(var I=0;I<vt.columns;I++)vt.set(P,I,vt.get(P,I)-bt[I])}function ue(vt,bt){for(var P=0;P<vt.rows;P++)for(var I=0;I<vt.columns;I++)vt.set(P,I,vt.get(P,I)-bt)}function Pe(vt){for(var bt=[],P=0;P<vt.rows;P++){for(var I=0,T=0;T<vt.columns;T++)I+=Math.pow(vt.get(P,T),2)/(vt.columns-1);bt.push(Math.sqrt(I))}return bt}function Xt(vt,bt){for(var P=0;P<vt.rows;P++)for(var I=0;I<vt.columns;I++)vt.set(P,I,vt.get(P,I)/bt[P])}function ie(vt){for(var bt=[],P=0;P<vt.columns;P++){for(var I=0,T=0;T<vt.rows;T++)I+=Math.pow(vt.get(T,P),2)/(vt.rows-1);bt.push(Math.sqrt(I))}return bt}function Ie(vt,bt){for(var P=0;P<vt.rows;P++)for(var I=0;I<vt.columns;I++)vt.set(P,I,vt.get(P,I)/bt[I])}function se(vt){for(var bt=vt.size-1,P=0,I=0;I<vt.columns;I++)for(var T=0;T<vt.rows;T++)P+=Math.pow(vt.get(T,I),2)/bt;return Math.sqrt(P)}function Te(vt,bt){for(var P=0;P<vt.rows;P++)for(var I=0;I<vt.columns;I++)vt.set(P,I,vt.get(P,I)/bt)}var Be=function(){function vt(){_()(this,vt)}return b()(vt,[{key:"size",get:function(){return this.rows*this.columns}},{key:"apply",value:function(P){if(typeof P!="function")throw new TypeError("callback must be a function");for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)P.call(this,I,T);return this}},{key:"to1DArray",value:function(){for(var P=[],I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)P.push(this.get(I,T));return P}},{key:"to2DArray",value:function(){for(var P=[],I=0;I<this.rows;I++){P.push([]);for(var T=0;T<this.columns;T++)P[I].push(this.get(I,T))}return P}},{key:"toJSON",value:function(){return this.to2DArray()}},{key:"isRowVector",value:function(){return this.rows===1}},{key:"isColumnVector",value:function(){return this.columns===1}},{key:"isVector",value:function(){return this.rows===1||this.columns===1}},{key:"isSquare",value:function(){return this.rows===this.columns}},{key:"isSymmetric",value:function(){if(this.isSquare()){for(var P=0;P<this.rows;P++)for(var I=0;I<=P;I++)if(this.get(P,I)!==this.get(I,P))return!1;return!0}return!1}},{key:"isEchelonForm",value:function(){for(var P=0,I=0,T=-1,q=!0,Et=!1;P<this.rows&&q;){for(I=0,Et=!1;I<this.columns&&Et===!1;)this.get(P,I)===0?I++:this.get(P,I)===1&&I>T?(Et=!0,T=I):(q=!1,Et=!0);P++}return q}},{key:"isReducedEchelonForm",value:function(){for(var P=0,I=0,T=-1,q=!0,Et=!1;P<this.rows&&q;){for(I=0,Et=!1;I<this.columns&&Et===!1;)this.get(P,I)===0?I++:this.get(P,I)===1&&I>T?(Et=!0,T=I):(q=!1,Et=!0);for(var Gt=I+1;Gt<this.rows;Gt++)this.get(P,Gt)!==0&&(q=!1);P++}return q}},{key:"echelonForm",value:function(){for(var P=this.clone(),I=0,T=0;I<P.rows&&T<P.columns;){for(var q=I,Et=I;Et<P.rows;Et++)P.get(Et,T)>P.get(q,T)&&(q=Et);if(P.get(q,T)===0)T++;else{P.swapRows(I,q);for(var Gt=P.get(I,T),Dt=T;Dt<P.columns;Dt++)P.set(I,Dt,P.get(I,Dt)/Gt);for(var ee=I+1;ee<P.rows;ee++){var Ye=P.get(ee,T)/P.get(I,T);P.set(ee,T,0);for(var Ae=T+1;Ae<P.columns;Ae++)P.set(ee,Ae,P.get(ee,Ae)-P.get(I,Ae)*Ye)}I++,T++}}return P}},{key:"reducedEchelonForm",value:function(){for(var P=this.echelonForm(),I=P.columns,T=P.rows,q=T-1;q>=0;)if(P.maxRow(q)===0)q--;else{for(var Et=0,Gt=!1;Et<T&&Gt===!1;)P.get(q,Et)===1?Gt=!0:Et++;for(var Dt=0;Dt<q;Dt++)for(var ee=P.get(Dt,Et),Ye=Et;Ye<I;Ye++){var Ae=P.get(Dt,Ye)-ee*P.get(q,Ye);P.set(Dt,Ye,Ae)}q--}return P}},{key:"set",value:function(){throw new Error("set method is unimplemented")}},{key:"get",value:function(){throw new Error("get method is unimplemented")}},{key:"repeat",value:function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(x()(P)!=="object")throw new TypeError("options must be an object");var I=P.rows,T=I===void 0?1:I,q=P.columns,Et=q===void 0?1:q;if(!Number.isInteger(T)||T<=0)throw new TypeError("rows must be a positive integer");if(!Number.isInteger(Et)||Et<=0)throw new TypeError("columns must be a positive integer");for(var Gt=new nr(this.rows*T,this.columns*Et),Dt=0;Dt<T;Dt++)for(var ee=0;ee<Et;ee++)Gt.setSubMatrix(this,this.rows*Dt,this.columns*ee);return Gt}},{key:"fill",value:function(P){for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,P);return this}},{key:"neg",value:function(){return this.mulS(-1)}},{key:"getRow",value:function(P){ut(this,P);for(var I=[],T=0;T<this.columns;T++)I.push(this.get(P,T));return I}},{key:"getRowVector",value:function(P){return nr.rowVector(this.getRow(P))}},{key:"setRow",value:function(P,I){ut(this,P),I=kt(this,I);for(var T=0;T<this.columns;T++)this.set(P,T,I[T]);return this}},{key:"swapRows",value:function(P,I){ut(this,P),ut(this,I);for(var T=0;T<this.columns;T++){var q=this.get(P,T);this.set(P,T,this.get(I,T)),this.set(I,T,q)}return this}},{key:"getColumn",value:function(P){ht(this,P);for(var I=[],T=0;T<this.rows;T++)I.push(this.get(T,P));return I}},{key:"getColumnVector",value:function(P){return nr.columnVector(this.getColumn(P))}},{key:"setColumn",value:function(P,I){ht(this,P),I=At(this,I);for(var T=0;T<this.rows;T++)this.set(T,P,I[T]);return this}},{key:"swapColumns",value:function(P,I){ht(this,P),ht(this,I);for(var T=0;T<this.rows;T++){var q=this.get(T,P);this.set(T,P,this.get(T,I)),this.set(T,I,q)}return this}},{key:"addRowVector",value:function(P){P=kt(this,P);for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,this.get(I,T)+P[T]);return this}},{key:"subRowVector",value:function(P){P=kt(this,P);for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,this.get(I,T)-P[T]);return this}},{key:"mulRowVector",value:function(P){P=kt(this,P);for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,this.get(I,T)*P[T]);return this}},{key:"divRowVector",value:function(P){P=kt(this,P);for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,this.get(I,T)/P[T]);return this}},{key:"addColumnVector",value:function(P){P=At(this,P);for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,this.get(I,T)+P[I]);return this}},{key:"subColumnVector",value:function(P){P=At(this,P);for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,this.get(I,T)-P[I]);return this}},{key:"mulColumnVector",value:function(P){P=At(this,P);for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,this.get(I,T)*P[I]);return this}},{key:"divColumnVector",value:function(P){P=At(this,P);for(var I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.set(I,T,this.get(I,T)/P[I]);return this}},{key:"mulRow",value:function(P,I){ut(this,P);for(var T=0;T<this.columns;T++)this.set(P,T,this.get(P,T)*I);return this}},{key:"mulColumn",value:function(P,I){ht(this,P);for(var T=0;T<this.rows;T++)this.set(T,P,this.get(T,P)*I);return this}},{key:"max",value:function(){for(var P=this.get(0,0),I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.get(I,T)>P&&(P=this.get(I,T));return P}},{key:"maxIndex",value:function(){for(var P=this.get(0,0),I=[0,0],T=0;T<this.rows;T++)for(var q=0;q<this.columns;q++)this.get(T,q)>P&&(P=this.get(T,q),I[0]=T,I[1]=q);return I}},{key:"min",value:function(){for(var P=this.get(0,0),I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)this.get(I,T)<P&&(P=this.get(I,T));return P}},{key:"minIndex",value:function(){for(var P=this.get(0,0),I=[0,0],T=0;T<this.rows;T++)for(var q=0;q<this.columns;q++)this.get(T,q)<P&&(P=this.get(T,q),I[0]=T,I[1]=q);return I}},{key:"maxRow",value:function(P){ut(this,P);for(var I=this.get(P,0),T=1;T<this.columns;T++)this.get(P,T)>I&&(I=this.get(P,T));return I}},{key:"maxRowIndex",value:function(P){ut(this,P);for(var I=this.get(P,0),T=[P,0],q=1;q<this.columns;q++)this.get(P,q)>I&&(I=this.get(P,q),T[1]=q);return T}},{key:"minRow",value:function(P){ut(this,P);for(var I=this.get(P,0),T=1;T<this.columns;T++)this.get(P,T)<I&&(I=this.get(P,T));return I}},{key:"minRowIndex",value:function(P){ut(this,P);for(var I=this.get(P,0),T=[P,0],q=1;q<this.columns;q++)this.get(P,q)<I&&(I=this.get(P,q),T[1]=q);return T}},{key:"maxColumn",value:function(P){ht(this,P);for(var I=this.get(0,P),T=1;T<this.rows;T++)this.get(T,P)>I&&(I=this.get(T,P));return I}},{key:"maxColumnIndex",value:function(P){ht(this,P);for(var I=this.get(0,P),T=[0,P],q=1;q<this.rows;q++)this.get(q,P)>I&&(I=this.get(q,P),T[0]=q);return T}},{key:"minColumn",value:function(P){ht(this,P);for(var I=this.get(0,P),T=1;T<this.rows;T++)this.get(T,P)<I&&(I=this.get(T,P));return I}},{key:"minColumnIndex",value:function(P){ht(this,P);for(var I=this.get(0,P),T=[0,P],q=1;q<this.rows;q++)this.get(q,P)<I&&(I=this.get(q,P),T[0]=q);return T}},{key:"diag",value:function(){for(var P=Math.min(this.rows,this.columns),I=[],T=0;T<P;T++)I.push(this.get(T,T));return I}},{key:"norm",value:function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"frobenius",I=0;if(P==="max")return this.max();if(P==="frobenius"){for(var T=0;T<this.rows;T++)for(var q=0;q<this.columns;q++)I=I+this.get(T,q)*this.get(T,q);return Math.sqrt(I)}else throw new RangeError("unknown norm type: ".concat(P))}},{key:"cumulativeSum",value:function(){for(var P=0,I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)P+=this.get(I,T),this.set(I,T,P);return this}},{key:"dot",value:function(P){vt.isMatrix(P)&&(P=P.to1DArray());var I=this.to1DArray();if(I.length!==P.length)throw new RangeError("vectors do not have the same size");for(var T=0,q=0;q<I.length;q++)T+=I[q]*P[q];return T}},{key:"mmul",value:function(P){P=nr.checkMatrix(P);for(var I=this.rows,T=this.columns,q=P.columns,Et=new nr(I,q),Gt=new Float64Array(T),Dt=0;Dt<q;Dt++){for(var ee=0;ee<T;ee++)Gt[ee]=P.get(ee,Dt);for(var Ye=0;Ye<I;Ye++){for(var Ae=0,fr=0;fr<T;fr++)Ae+=this.get(Ye,fr)*Gt[fr];Et.set(Ye,Dt,Ae)}}return Et}},{key:"strassen2x2",value:function(P){P=nr.checkMatrix(P);var I=new nr(2,2),T=this.get(0,0),q=P.get(0,0),Et=this.get(0,1),Gt=P.get(0,1),Dt=this.get(1,0),ee=P.get(1,0),Ye=this.get(1,1),Ae=P.get(1,1),fr=(T+Ye)*(q+Ae),Hr=(Dt+Ye)*q,wr=T*(Gt-Ae),hn=Ye*(ee-q),Yn=(T+Et)*Ae,Ze=(Dt-T)*(q+Gt),xr=(Et-Ye)*(ee+Ae),Dr=fr+hn-Yn+xr,Yr=wr+Yn,$t=Hr+hn,It=fr-Hr+wr+Ze;return I.set(0,0,Dr),I.set(0,1,Yr),I.set(1,0,$t),I.set(1,1,It),I}},{key:"strassen3x3",value:function(P){P=nr.checkMatrix(P);var I=new nr(3,3),T=this.get(0,0),q=this.get(0,1),Et=this.get(0,2),Gt=this.get(1,0),Dt=this.get(1,1),ee=this.get(1,2),Ye=this.get(2,0),Ae=this.get(2,1),fr=this.get(2,2),Hr=P.get(0,0),wr=P.get(0,1),hn=P.get(0,2),Yn=P.get(1,0),Ze=P.get(1,1),xr=P.get(1,2),Dr=P.get(2,0),Yr=P.get(2,1),$t=P.get(2,2),It=(T+q+Et-Gt-Dt-Ae-fr)*Ze,ne=(T-Gt)*(-wr+Ze),xe=Dt*(-Hr+wr+Yn-Ze-xr-Dr+$t),pe=(-T+Gt+Dt)*(Hr-wr+Ze),ke=(Gt+Dt)*(-Hr+wr),sr=T*Hr,lr=(-T+Ye+Ae)*(Hr-hn+xr),en=(-T+Ye)*(hn-xr),Dn=(Ye+Ae)*(-Hr+hn),En=(T+q+Et-Dt-ee-Ye-Ae)*xr,ta=Ae*(-Hr+hn+Yn-Ze-xr-Dr+Yr),Qn=(-Et+Ae+fr)*(Ze+Dr-Yr),ba=(Et-fr)*(Ze-Yr),Ha=Et*Dr,Za=(Ae+fr)*(-Dr+Yr),Ba=(-Et+Dt+ee)*(xr+Dr-$t),To=(Et-ee)*(xr-$t),_i=(Dt+ee)*(-Dr+$t),Si=q*Yn,io=ee*Yr,fs=Gt*hn,Io=Ye*wr,oo=fr*$t,Ca=sr+Ha+Si,ko=It+pe+ke+sr+Qn+Ha+Za,cs=sr+lr+Dn+En+Ha+Ba+_i,ri=ne+xe+pe+sr+Ha+Ba+To,Vi=ne+pe+ke+sr+io,ls=Ha+Ba+To+_i+fs,Xo=sr+lr+en+ta+Qn+ba+Ha,Hi=Qn+ba+Ha+Za+Io,so=sr+lr+en+Dn+oo;return I.set(0,0,Ca),I.set(0,1,ko),I.set(0,2,cs),I.set(1,0,ri),I.set(1,1,Vi),I.set(1,2,ls),I.set(2,0,Xo),I.set(2,1,Hi),I.set(2,2,so),I}},{key:"mmulStrassen",value:function(P){P=nr.checkMatrix(P);var I=this.clone(),T=I.rows,q=I.columns,Et=P.rows,Gt=P.columns;q!==Et&&console.warn("Multiplying ".concat(T," x ").concat(q," and ").concat(Et," x ").concat(Gt," matrix: dimensions do not match."));function Dt(fr,Hr,wr){var hn=fr.rows,Yn=fr.columns;if(hn===Hr&&Yn===wr)return fr;var Ze=vt.zeros(Hr,wr);return Ze=Ze.setSubMatrix(fr,0,0),Ze}var ee=Math.max(T,Et),Ye=Math.max(q,Gt);I=Dt(I,ee,Ye),P=Dt(P,ee,Ye);function Ae(fr,Hr,wr,hn){if(wr<=512||hn<=512)return fr.mmul(Hr);wr%2===1&&hn%2===1?(fr=Dt(fr,wr+1,hn+1),Hr=Dt(Hr,wr+1,hn+1)):wr%2===1?(fr=Dt(fr,wr+1,hn),Hr=Dt(Hr,wr+1,hn)):hn%2===1&&(fr=Dt(fr,wr,hn+1),Hr=Dt(Hr,wr,hn+1));var Yn=parseInt(fr.rows/2,10),Ze=parseInt(fr.columns/2,10),xr=fr.subMatrix(0,Yn-1,0,Ze-1),Dr=Hr.subMatrix(0,Yn-1,0,Ze-1),Yr=fr.subMatrix(0,Yn-1,Ze,fr.columns-1),$t=Hr.subMatrix(0,Yn-1,Ze,Hr.columns-1),It=fr.subMatrix(Yn,fr.rows-1,0,Ze-1),ne=Hr.subMatrix(Yn,Hr.rows-1,0,Ze-1),xe=fr.subMatrix(Yn,fr.rows-1,Ze,fr.columns-1),pe=Hr.subMatrix(Yn,Hr.rows-1,Ze,Hr.columns-1),ke=Ae(vt.add(xr,xe),vt.add(Dr,pe),Yn,Ze),sr=Ae(vt.add(It,xe),Dr,Yn,Ze),lr=Ae(xr,vt.sub($t,pe),Yn,Ze),en=Ae(xe,vt.sub(ne,Dr),Yn,Ze),Dn=Ae(vt.add(xr,Yr),pe,Yn,Ze),En=Ae(vt.sub(It,xr),vt.add(Dr,$t),Yn,Ze),ta=Ae(vt.sub(Yr,xe),vt.add(ne,pe),Yn,Ze),Qn=vt.add(ke,en);Qn.sub(Dn),Qn.add(ta);var ba=vt.add(lr,Dn),Ha=vt.add(sr,en),Za=vt.sub(ke,sr);Za.add(lr),Za.add(En);var Ba=vt.zeros(2*Qn.rows,2*Qn.columns);return Ba=Ba.setSubMatrix(Qn,0,0),Ba=Ba.setSubMatrix(ba,Qn.rows,0),Ba=Ba.setSubMatrix(Ha,0,Qn.columns),Ba=Ba.setSubMatrix(Za,Qn.rows,Qn.columns),Ba.subMatrix(0,wr-1,0,hn-1)}return Ae(I,P,ee,Ye)}},{key:"scaleRows",value:function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(x()(P)!=="object")throw new TypeError("options must be an object");var I=P.min,T=I===void 0?0:I,q=P.max,Et=q===void 0?1:q;if(!Number.isFinite(T))throw new TypeError("min must be a number");if(!Number.isFinite(Et))throw new TypeError("max must be a number");if(T>=Et)throw new RangeError("min must be smaller than max");for(var Gt=new nr(this.rows,this.columns),Dt=0;Dt<this.rows;Dt++){var ee=this.getRow(Dt);K(ee,{min:T,max:Et,output:ee}),Gt.setRow(Dt,ee)}return Gt}},{key:"scaleColumns",value:function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(x()(P)!=="object")throw new TypeError("options must be an object");var I=P.min,T=I===void 0?0:I,q=P.max,Et=q===void 0?1:q;if(!Number.isFinite(T))throw new TypeError("min must be a number");if(!Number.isFinite(Et))throw new TypeError("max must be a number");if(T>=Et)throw new RangeError("min must be smaller than max");for(var Gt=new nr(this.rows,this.columns),Dt=0;Dt<this.columns;Dt++){var ee=this.getColumn(Dt);K(ee,{min:T,max:Et,output:ee}),Gt.setColumn(Dt,ee)}return Gt}},{key:"flipRows",value:function(){for(var P=Math.ceil(this.columns/2),I=0;I<this.rows;I++)for(var T=0;T<P;T++){var q=this.get(I,T),Et=this.get(I,this.columns-1-T);this.set(I,T,Et),this.set(I,this.columns-1-T,q)}return this}},{key:"flipColumns",value:function(){for(var P=Math.ceil(this.rows/2),I=0;I<this.columns;I++)for(var T=0;T<P;T++){var q=this.get(T,I),Et=this.get(this.rows-1-T,I);this.set(T,I,Et),this.set(this.rows-1-T,I,q)}return this}},{key:"kroneckerProduct",value:function(P){P=nr.checkMatrix(P);for(var I=this.rows,T=this.columns,q=P.rows,Et=P.columns,Gt=new nr(I*q,T*Et),Dt=0;Dt<I;Dt++)for(var ee=0;ee<T;ee++)for(var Ye=0;Ye<q;Ye++)for(var Ae=0;Ae<Et;Ae++)Gt.set(q*Dt+Ye,Et*ee+Ae,this.get(Dt,ee)*P.get(Ye,Ae));return Gt}},{key:"transpose",value:function(){for(var P=new nr(this.columns,this.rows),I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)P.set(T,I,this.get(I,T));return P}},{key:"sortRows",value:function(){for(var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Tt,I=0;I<this.rows;I++)this.setRow(I,this.getRow(I).sort(P));return this}},{key:"sortColumns",value:function(){for(var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Tt,I=0;I<this.columns;I++)this.setColumn(I,this.getColumn(I).sort(P));return this}},{key:"subMatrix",value:function(P,I,T,q){dt(this,P,I,T,q);for(var Et=new nr(I-P+1,q-T+1),Gt=P;Gt<=I;Gt++)for(var Dt=T;Dt<=q;Dt++)Et.set(Gt-P,Dt-T,this.get(Gt,Dt));return Et}},{key:"subMatrixRow",value:function(P,I,T){if(I===void 0&&(I=0),T===void 0&&(T=this.columns-1),I>T||I<0||I>=this.columns||T<0||T>=this.columns)throw new RangeError("Argument out of range");for(var q=new nr(P.length,T-I+1),Et=0;Et<P.length;Et++)for(var Gt=I;Gt<=T;Gt++){if(P[Et]<0||P[Et]>=this.rows)throw new RangeError("Row index out of range: ".concat(P[Et]));q.set(Et,Gt-I,this.get(P[Et],Gt))}return q}},{key:"subMatrixColumn",value:function(P,I,T){if(I===void 0&&(I=0),T===void 0&&(T=this.rows-1),I>T||I<0||I>=this.rows||T<0||T>=this.rows)throw new RangeError("Argument out of range");for(var q=new nr(T-I+1,P.length),Et=0;Et<P.length;Et++)for(var Gt=I;Gt<=T;Gt++){if(P[Et]<0||P[Et]>=this.columns)throw new RangeError("Column index out of range: ".concat(P[Et]));q.set(Gt-I,Et,this.get(Gt,P[Et]))}return q}},{key:"setSubMatrix",value:function(P,I,T){P=nr.checkMatrix(P);var q=I+P.rows-1,Et=T+P.columns-1;dt(this,I,q,T,Et);for(var Gt=0;Gt<P.rows;Gt++)for(var Dt=0;Dt<P.columns;Dt++)this.set(I+Gt,T+Dt,P.get(Gt,Dt));return this}},{key:"selection",value:function(P,I){for(var T=Ht(this,P,I),q=new nr(P.length,I.length),Et=0;Et<T.row.length;Et++)for(var Gt=T.row[Et],Dt=0;Dt<T.column.length;Dt++){var ee=T.column[Dt];q.set(Et,Dt,this.get(Gt,ee))}return q}},{key:"trace",value:function(){for(var P=Math.min(this.rows,this.columns),I=0,T=0;T<P;T++)I+=this.get(T,T);return I}},{key:"clone",value:function(){for(var P=new nr(this.rows,this.columns),I=0;I<this.rows;I++)for(var T=0;T<this.columns;T++)P.set(I,T,this.get(I,T));return P}},{key:"sum",value:function(P){switch(P){case"row":return Lt(this);case"column":return Ot(this);case void 0:return Wt(this);default:throw new Error("invalid option: ".concat(P))}}},{key:"product",value:function(P){switch(P){case"row":return Jt(this);case"column":return De(this);case void 0:return te(this);default:throw new Error("invalid option: ".concat(P))}}},{key:"mean",value:function(P){var I=this.sum(P);switch(P){case"row":{for(var T=0;T<this.rows;T++)I[T]/=this.columns;return I}case"column":{for(var q=0;q<this.columns;q++)I[q]/=this.rows;return I}case void 0:return I/this.size;default:throw new Error("invalid option: ".concat(P))}}},{key:"variance",value:function(P){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(x()(P)==="object"&&(I=P,P=void 0),x()(I)!=="object")throw new TypeError("options must be an object");var T=I,q=T.unbiased,Et=q===void 0?!0:q,Gt=T.mean,Dt=Gt===void 0?this.mean(P):Gt;if(typeof Et!="boolean")throw new TypeError("unbiased must be a boolean");switch(P){case"row":{if(!Array.isArray(Dt))throw new TypeError("mean must be an array");return oe(this,Et,Dt)}case"column":{if(!Array.isArray(Dt))throw new TypeError("mean must be an array");return me(this,Et,Dt)}case void 0:{if(typeof Dt!="number")throw new TypeError("mean must be a number");return Ce(this,Et,Dt)}default:throw new Error("invalid option: ".concat(P))}}},{key:"standardDeviation",value:function(P,I){x()(P)==="object"&&(I=P,P=void 0);var T=this.variance(P,I);if(P===void 0)return Math.sqrt(T);for(var q=0;q<T.length;q++)T[q]=Math.sqrt(T[q]);return T}},{key:"center",value:function(P){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(x()(P)==="object"&&(I=P,P=void 0),x()(I)!=="object")throw new TypeError("options must be an object");var T=I,q=T.center,Et=q===void 0?this.mean(P):q;switch(P){case"row":{if(!Array.isArray(Et))throw new TypeError("center must be an array");return _e(this,Et),this}case"column":{if(!Array.isArray(Et))throw new TypeError("center must be an array");return zt(this,Et),this}case void 0:{if(typeof Et!="number")throw new TypeError("center must be a number");return ue(this,Et),this}default:throw new Error("invalid option: ".concat(P))}}},{key:"scale",value:function(P){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(x()(P)==="object"&&(I=P,P=void 0),x()(I)!=="object")throw new TypeError("options must be an object");var T=I.scale;switch(P){case"row":{if(T===void 0)T=Pe(this);else if(!Array.isArray(T))throw new TypeError("scale must be an array");return Xt(this,T),this}case"column":{if(T===void 0)T=ie(this);else if(!Array.isArray(T))throw new TypeError("scale must be an array");return Ie(this,T),this}case void 0:{if(T===void 0)T=se(this);else if(typeof T!="number")throw new TypeError("scale must be a number");return Te(this,T),this}default:throw new Error("invalid option: ".concat(P))}}},{key:"toString",value:function(P){return j(this,P)}}],[{key:"from1DArray",value:function(P,I,T){var q=P*I;if(q!==T.length)throw new RangeError("data length does not match given dimensions");for(var Et=new nr(P,I),Gt=0;Gt<P;Gt++)for(var Dt=0;Dt<I;Dt++)Et.set(Gt,Dt,T[Gt*I+Dt]);return Et}},{key:"rowVector",value:function(P){for(var I=new nr(1,P.length),T=0;T<P.length;T++)I.set(0,T,P[T]);return I}},{key:"columnVector",value:function(P){for(var I=new nr(P.length,1),T=0;T<P.length;T++)I.set(T,0,P[T]);return I}},{key:"zeros",value:function(P,I){return new nr(P,I)}},{key:"ones",value:function(P,I){return new nr(P,I).fill(1)}},{key:"rand",value:function(P,I){var T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(x()(T)!=="object")throw new TypeError("options must be an object");for(var q=T.random,Et=q===void 0?Math.random:q,Gt=new nr(P,I),Dt=0;Dt<P;Dt++)for(var ee=0;ee<I;ee++)Gt.set(Dt,ee,Et());return Gt}},{key:"randInt",value:function(P,I){var T=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(x()(T)!=="object")throw new TypeError("options must be an object");var q=T.min,Et=q===void 0?0:q,Gt=T.max,Dt=Gt===void 0?1e3:Gt,ee=T.random,Ye=ee===void 0?Math.random:ee;if(!Number.isInteger(Et))throw new TypeError("min must be an integer");if(!Number.isInteger(Dt))throw new TypeError("max must be an integer");if(Et>=Dt)throw new RangeError("min must be smaller than max");for(var Ae=Dt-Et,fr=new nr(P,I),Hr=0;Hr<P;Hr++)for(var wr=0;wr<I;wr++){var hn=Et+Math.round(Ye()*Ae);fr.set(Hr,wr,hn)}return fr}},{key:"eye",value:function(P,I,T){I===void 0&&(I=P),T===void 0&&(T=1);for(var q=Math.min(P,I),Et=this.zeros(P,I),Gt=0;Gt<q;Gt++)Et.set(Gt,Gt,T);return Et}},{key:"diag",value:function(P,I,T){var q=P.length;I===void 0&&(I=q),T===void 0&&(T=I);for(var Et=Math.min(q,I,T),Gt=this.zeros(I,T),Dt=0;Dt<Et;Dt++)Gt.set(Dt,Dt,P[Dt]);return Gt}},{key:"min",value:function(P,I){P=this.checkMatrix(P),I=this.checkMatrix(I);for(var T=P.rows,q=P.columns,Et=new nr(T,q),Gt=0;Gt<T;Gt++)for(var Dt=0;Dt<q;Dt++)Et.set(Gt,Dt,Math.min(P.get(Gt,Dt),I.get(Gt,Dt)));return Et}},{key:"max",value:function(P,I){P=this.checkMatrix(P),I=this.checkMatrix(I);for(var T=P.rows,q=P.columns,Et=new this(T,q),Gt=0;Gt<T;Gt++)for(var Dt=0;Dt<q;Dt++)Et.set(Gt,Dt,Math.max(P.get(Gt,Dt),I.get(Gt,Dt)));return Et}},{key:"checkMatrix",value:function(P){return vt.isMatrix(P)?P:new nr(P)}},{key:"isMatrix",value:function(P){return P!=null&&P.klass==="Matrix"}}]),vt}();Be.prototype.klass="Matrix",typeof Symbol!="undefined"&&(Be.prototype[Symbol.for("nodejs.util.inspect.custom")]=Y);function Tt(vt,bt){return vt-bt}Be.random=Be.rand,Be.randomInt=Be.randInt,Be.diagonal=Be.diag,Be.prototype.diagonal=Be.prototype.diag,Be.identity=Be.eye,Be.prototype.negate=Be.prototype.neg,Be.prototype.tensorProduct=Be.prototype.kroneckerProduct;var nr=function(vt){F()(P,vt);var bt=A()(P);function P(I,T){var q;if(_()(this,P),q=bt.call(this),P.isMatrix(I))return nt()(q,I.clone());if(Number.isInteger(I)&&I>0)if(q.data=[],Number.isInteger(T)&&T>0)for(var Et=0;Et<I;Et++)q.data.push(new Float64Array(T));else throw new TypeError("nColumns must be a positive integer");else if(Array.isArray(I)){var Gt=I;if(I=Gt.length,T=Gt[0].length,typeof T!="number"||T===0)throw new TypeError("Data must be a 2D array with at least one element");q.data=[];for(var Dt=0;Dt<I;Dt++){if(Gt[Dt].length!==T)throw new RangeError("Inconsistent array dimensions");q.data.push(Float64Array.from(Gt[Dt]))}}else throw new TypeError("First argument must be a positive number or an array");return q.rows=I,q.columns=T,nt()(q,z()(q))}return b()(P,[{key:"set",value:function(T,q,Et){return this.data[T][q]=Et,this}},{key:"get",value:function(T,q){return this.data[T][q]}},{key:"removeRow",value:function(T){if(ut(this,T),this.rows===1)throw new RangeError("A matrix cannot have less than one row");return this.data.splice(T,1),this.rows-=1,this}},{key:"addRow",value:function(T,q){return q===void 0&&(q=T,T=this.rows),ut(this,T,!0),q=Float64Array.from(kt(this,q,!0)),this.data.splice(T,0,q),this.rows+=1,this}},{key:"removeColumn",value:function(T){if(ht(this,T),this.columns===1)throw new RangeError("A matrix cannot have less than one column");for(var q=0;q<this.rows;q++){for(var Et=new Float64Array(this.columns-1),Gt=0;Gt<T;Gt++)Et[Gt]=this.data[q][Gt];for(var Dt=T+1;Dt<this.columns;Dt++)Et[Dt-1]=this.data[q][Dt];this.data[q]=Et}return this.columns-=1,this}},{key:"addColumn",value:function(T,q){typeof q=="undefined"&&(q=T,T=this.columns),ht(this,T,!0),q=At(this,q);for(var Et=0;Et<this.rows;Et++){for(var Gt=new Float64Array(this.columns+1),Dt=0;Dt<T;Dt++)Gt[Dt]=this.data[Et][Dt];for(Gt[Dt++]=q[Et];Dt<this.columns+1;Dt++)Gt[Dt]=this.data[Et][Dt-1];this.data[Et]=Gt}return this.columns+=1,this}}]),P}(Be);rt(Be,nr);var Ir=function(vt){F()(P,vt);var bt=A()(P);function P(I,T,q){var Et;return _()(this,P),Et=bt.call(this),Et.matrix=I,Et.rows=T,Et.columns=q,Et}return b()(P)}(Be),Zr=function(vt){F()(P,vt);var bt=A()(P);function P(I,T){var q;return _()(this,P),ht(I,T),q=bt.call(this,I,I.rows,1),q.column=T,q}return b()(P,[{key:"set",value:function(T,q,Et){return this.matrix.set(T,this.column,Et),this}},{key:"get",value:function(T){return this.matrix.get(T,this.column)}}]),P}(Ir),Ur=function(vt){F()(P,vt);var bt=A()(P);function P(I,T){var q;return _()(this,P),T=le(I,T),q=bt.call(this,I,I.rows,T.length),q.columnIndices=T,q}return b()(P,[{key:"set",value:function(T,q,Et){return this.matrix.set(T,this.columnIndices[q],Et),this}},{key:"get",value:function(T,q){return this.matrix.get(T,this.columnIndices[q])}}]),P}(Ir),wn=function(vt){F()(P,vt);var bt=A()(P);function P(I){return _()(this,P),bt.call(this,I,I.rows,I.columns)}return b()(P,[{key:"set",value:function(T,q,Et){return this.matrix.set(T,this.columns-q-1,Et),this}},{key:"get",value:function(T,q){return this.matrix.get(T,this.columns-q-1)}}]),P}(Ir),Xr=function(vt){F()(P,vt);var bt=A()(P);function P(I){return _()(this,P),bt.call(this,I,I.rows,I.columns)}return b()(P,[{key:"set",value:function(T,q,Et){return this.matrix.set(this.rows-T-1,q,Et),this}},{key:"get",value:function(T,q){return this.matrix.get(this.rows-T-1,q)}}]),P}(Ir),Sn=function(vt){F()(P,vt);var bt=A()(P);function P(I,T){var q;return _()(this,P),ut(I,T),q=bt.call(this,I,1,I.columns),q.row=T,q}return b()(P,[{key:"set",value:function(T,q,Et){return this.matrix.set(this.row,q,Et),this}},{key:"get",value:function(T,q){return this.matrix.get(this.row,q)}}]),P}(Ir),Kn=function(vt){F()(P,vt);var bt=A()(P);function P(I,T){var q;return _()(this,P),T=Rt(I,T),q=bt.call(this,I,T.length,I.columns),q.rowIndices=T,q}return b()(P,[{key:"set",value:function(T,q,Et){return this.matrix.set(this.rowIndices[T],q,Et),this}},{key:"get",value:function(T,q){return this.matrix.get(this.rowIndices[T],q)}}]),P}(Ir),Fn=function(vt){F()(P,vt);var bt=A()(P);function P(I,T,q){var Et;_()(this,P);var Gt=Ht(I,T,q);return Et=bt.call(this,I,Gt.row.length,Gt.column.length),Et.rowIndices=Gt.row,Et.columnIndices=Gt.column,Et}return b()(P,[{key:"set",value:function(T,q,Et){return this.matrix.set(this.rowIndices[T],this.columnIndices[q],Et),this}},{key:"get",value:function(T,q){return this.matrix.get(this.rowIndices[T],this.columnIndices[q])}}]),P}(Ir),pn=function(vt){F()(P,vt);var bt=A()(P);function P(I,T,q,Et,Gt){var Dt;return _()(this,P),dt(I,T,q,Et,Gt),Dt=bt.call(this,I,q-T+1,Gt-Et+1),Dt.startRow=T,Dt.startColumn=Et,Dt}return b()(P,[{key:"set",value:function(T,q,Et){return this.matrix.set(this.startRow+T,this.startColumn+q,Et),this}},{key:"get",value:function(T,q){return this.matrix.get(this.startRow+T,this.startColumn+q)}}]),P}(Ir),er=function(vt){F()(P,vt);var bt=A()(P);function P(I){return _()(this,P),bt.call(this,I,I.columns,I.rows)}return b()(P,[{key:"set",value:function(T,q,Et){return this.matrix.set(q,T,Et),this}},{key:"get",value:function(T,q){return this.matrix.get(q,T)}}]),P}(Ir),cr=function(vt){F()(P,vt);var bt=A()(P);function P(I){var T,q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};_()(this,P);var Et=q.rows,Gt=Et===void 0?1:Et;if(I.length%Gt!==0)throw new Error("the data length is not divisible by the number of rows");return T=bt.call(this),T.rows=Gt,T.columns=I.length/Gt,T.data=I,T}return b()(P,[{key:"set",value:function(T,q,Et){var Gt=this._calculateIndex(T,q);return this.data[Gt]=Et,this}},{key:"get",value:function(T,q){var Et=this._calculateIndex(T,q);return this.data[Et]}},{key:"_calculateIndex",value:function(T,q){return T*this.columns+q}}]),P}(Be),dr=function(vt){F()(P,vt);var bt=A()(P);function P(I){var T;return _()(this,P),T=bt.call(this),T.data=I,T.rows=I.length,T.columns=I[0].length,T}return b()(P,[{key:"set",value:function(T,q,Et){return this.data[T][q]=Et,this}},{key:"get",value:function(T,q){return this.data[T][q]}}]),P}(Be);function Gr(vt,bt){if(Array.isArray(vt))return vt[0]&&Array.isArray(vt[0])?new dr(vt):new cr(vt,bt);throw new Error("the argument is not an array")}var sn=function(){function vt(bt){_()(this,vt),bt=dr.checkMatrix(bt);var P=bt.clone(),I=P.rows,T=P.columns,q=new Float64Array(I),Et=1,Gt,Dt,ee,Ye,Ae,fr,Hr,wr,hn;for(Gt=0;Gt<I;Gt++)q[Gt]=Gt;for(wr=new Float64Array(I),Dt=0;Dt<T;Dt++){for(Gt=0;Gt<I;Gt++)wr[Gt]=P.get(Gt,Dt);for(Gt=0;Gt<I;Gt++){for(hn=Math.min(Gt,Dt),Ae=0,ee=0;ee<hn;ee++)Ae+=P.get(Gt,ee)*wr[ee];wr[Gt]-=Ae,P.set(Gt,Dt,wr[Gt])}for(Ye=Dt,Gt=Dt+1;Gt<I;Gt++)Math.abs(wr[Gt])>Math.abs(wr[Ye])&&(Ye=Gt);if(Ye!==Dt){for(ee=0;ee<T;ee++)fr=P.get(Ye,ee),P.set(Ye,ee,P.get(Dt,ee)),P.set(Dt,ee,fr);Hr=q[Ye],q[Ye]=q[Dt],q[Dt]=Hr,Et=-Et}if(Dt<I&&P.get(Dt,Dt)!==0)for(Gt=Dt+1;Gt<I;Gt++)P.set(Gt,Dt,P.get(Gt,Dt)/P.get(Dt,Dt))}this.LU=P,this.pivotVector=q,this.pivotSign=Et}return b()(vt,[{key:"isSingular",value:function(){for(var P=this.LU,I=P.columns,T=0;T<I;T++)if(P.get(T,T)===0)return!0;return!1}},{key:"solve",value:function(P){P=nr.checkMatrix(P);var I=this.LU,T=I.rows;if(T!==P.rows)throw new Error("Invalid matrix dimensions");if(this.isSingular())throw new Error("LU matrix is singular");var q=P.columns,Et=P.subMatrixRow(this.pivotVector,0,q-1),Gt=I.columns,Dt,ee,Ye;for(Ye=0;Ye<Gt;Ye++)for(Dt=Ye+1;Dt<Gt;Dt++)for(ee=0;ee<q;ee++)Et.set(Dt,ee,Et.get(Dt,ee)-Et.get(Ye,ee)*I.get(Dt,Ye));for(Ye=Gt-1;Ye>=0;Ye--){for(ee=0;ee<q;ee++)Et.set(Ye,ee,Et.get(Ye,ee)/I.get(Ye,Ye));for(Dt=0;Dt<Ye;Dt++)for(ee=0;ee<q;ee++)Et.set(Dt,ee,Et.get(Dt,ee)-Et.get(Ye,ee)*I.get(Dt,Ye))}return Et}},{key:"determinant",get:function(){var P=this.LU;if(!P.isSquare())throw new Error("Matrix must be square");for(var I=this.pivotSign,T=P.columns,q=0;q<T;q++)I*=P.get(q,q);return I}},{key:"lowerTriangularMatrix",get:function(){for(var P=this.LU,I=P.rows,T=P.columns,q=new nr(I,T),Et=0;Et<I;Et++)for(var Gt=0;Gt<T;Gt++)Et>Gt?q.set(Et,Gt,P.get(Et,Gt)):Et===Gt?q.set(Et,Gt,1):q.set(Et,Gt,0);return q}},{key:"upperTriangularMatrix",get:function(){for(var P=this.LU,I=P.rows,T=P.columns,q=new nr(I,T),Et=0;Et<I;Et++)for(var Gt=0;Gt<T;Gt++)Et<=Gt?q.set(Et,Gt,P.get(Et,Gt)):q.set(Et,Gt,0);return q}},{key:"pivotPermutationVector",get:function(){return Array.from(this.pivotVector)}}]),vt}();function yn(vt,bt){var P=0;return Math.abs(vt)>Math.abs(bt)?(P=bt/vt,Math.abs(vt)*Math.sqrt(1+P*P)):bt!==0?(P=vt/bt,Math.abs(bt)*Math.sqrt(1+P*P)):0}var ln=function(){function vt(bt){_()(this,vt),bt=dr.checkMatrix(bt);var P=bt.clone(),I=bt.rows,T=bt.columns,q=new Float64Array(T),Et,Gt,Dt,ee;for(Dt=0;Dt<T;Dt++){var Ye=0;for(Et=Dt;Et<I;Et++)Ye=yn(Ye,P.get(Et,Dt));if(Ye!==0){for(P.get(Dt,Dt)<0&&(Ye=-Ye),Et=Dt;Et<I;Et++)P.set(Et,Dt,P.get(Et,Dt)/Ye);for(P.set(Dt,Dt,P.get(Dt,Dt)+1),Gt=Dt+1;Gt<T;Gt++){for(ee=0,Et=Dt;Et<I;Et++)ee+=P.get(Et,Dt)*P.get(Et,Gt);for(ee=-ee/P.get(Dt,Dt),Et=Dt;Et<I;Et++)P.set(Et,Gt,P.get(Et,Gt)+ee*P.get(Et,Dt))}}q[Dt]=-Ye}this.QR=P,this.Rdiag=q}return b()(vt,[{key:"solve",value:function(P){P=nr.checkMatrix(P);var I=this.QR,T=I.rows;if(P.rows!==T)throw new Error("Matrix row dimensions must agree");if(!this.isFullRank())throw new Error("Matrix is rank deficient");var q=P.columns,Et=P.clone(),Gt=I.columns,Dt,ee,Ye,Ae;for(Ye=0;Ye<Gt;Ye++)for(ee=0;ee<q;ee++){for(Ae=0,Dt=Ye;Dt<T;Dt++)Ae+=I.get(Dt,Ye)*Et.get(Dt,ee);for(Ae=-Ae/I.get(Ye,Ye),Dt=Ye;Dt<T;Dt++)Et.set(Dt,ee,Et.get(Dt,ee)+Ae*I.get(Dt,Ye))}for(Ye=Gt-1;Ye>=0;Ye--){for(ee=0;ee<q;ee++)Et.set(Ye,ee,Et.get(Ye,ee)/this.Rdiag[Ye]);for(Dt=0;Dt<Ye;Dt++)for(ee=0;ee<q;ee++)Et.set(Dt,ee,Et.get(Dt,ee)-Et.get(Ye,ee)*I.get(Dt,Ye))}return Et.subMatrix(0,Gt-1,0,q-1)}},{key:"isFullRank",value:function(){for(var P=this.QR.columns,I=0;I<P;I++)if(this.Rdiag[I]===0)return!1;return!0}},{key:"upperTriangularMatrix",get:function(){var P=this.QR,I=P.columns,T=new nr(I,I),q,Et;for(q=0;q<I;q++)for(Et=0;Et<I;Et++)q<Et?T.set(q,Et,P.get(q,Et)):q===Et?T.set(q,Et,this.Rdiag[q]):T.set(q,Et,0);return T}},{key:"orthogonalMatrix",get:function(){var P=this.QR,I=P.rows,T=P.columns,q=new nr(I,T),Et,Gt,Dt,ee;for(Dt=T-1;Dt>=0;Dt--){for(Et=0;Et<I;Et++)q.set(Et,Dt,0);for(q.set(Dt,Dt,1),Gt=Dt;Gt<T;Gt++)if(P.get(Dt,Dt)!==0){for(ee=0,Et=Dt;Et<I;Et++)ee+=P.get(Et,Dt)*q.get(Et,Gt);for(ee=-ee/P.get(Dt,Dt),Et=Dt;Et<I;Et++)q.set(Et,Gt,q.get(Et,Gt)+ee*P.get(Et,Dt))}}return q}}]),vt}(),Vn=function(){function vt(bt){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};_()(this,vt),bt=dr.checkMatrix(bt);var I=bt.rows,T=bt.columns,q=P.computeLeftSingularVectors,Et=q===void 0?!0:q,Gt=P.computeRightSingularVectors,Dt=Gt===void 0?!0:Gt,ee=P.autoTranspose,Ye=ee===void 0?!1:ee,Ae=!!Et,fr=!!Dt,Hr=!1,wr;if(I<T)if(!Ye)wr=bt.clone(),console.warn("Computing SVD on a matrix with more columns than rows. Consider enabling autoTranspose");else{wr=bt.transpose(),I=wr.rows,T=wr.columns,Hr=!0;var hn=Ae;Ae=fr,fr=hn}else wr=bt.clone();for(var Yn=Math.min(I,T),Ze=Math.min(I+1,T),xr=new Float64Array(Ze),Dr=new nr(I,Yn),Yr=new nr(T,T),$t=new Float64Array(T),It=new Float64Array(I),ne=new Float64Array(Ze),xe=0;xe<Ze;xe++)ne[xe]=xe;for(var pe=Math.min(I-1,T),ke=Math.max(0,Math.min(T-2,I)),sr=Math.max(pe,ke),lr=0;lr<sr;lr++){if(lr<pe){xr[lr]=0;for(var en=lr;en<I;en++)xr[lr]=yn(xr[lr],wr.get(en,lr));if(xr[lr]!==0){wr.get(lr,lr)<0&&(xr[lr]=-xr[lr]);for(var Dn=lr;Dn<I;Dn++)wr.set(Dn,lr,wr.get(Dn,lr)/xr[lr]);wr.set(lr,lr,wr.get(lr,lr)+1)}xr[lr]=-xr[lr]}for(var En=lr+1;En<T;En++){if(lr<pe&&xr[lr]!==0){for(var ta=0,Qn=lr;Qn<I;Qn++)ta+=wr.get(Qn,lr)*wr.get(Qn,En);ta=-ta/wr.get(lr,lr);for(var ba=lr;ba<I;ba++)wr.set(ba,En,wr.get(ba,En)+ta*wr.get(ba,lr))}$t[En]=wr.get(lr,En)}if(Ae&&lr<pe)for(var Ha=lr;Ha<I;Ha++)Dr.set(Ha,lr,wr.get(Ha,lr));if(lr<ke){$t[lr]=0;for(var Za=lr+1;Za<T;Za++)$t[lr]=yn($t[lr],$t[Za]);if($t[lr]!==0){$t[lr+1]<0&&($t[lr]=0-$t[lr]);for(var Ba=lr+1;Ba<T;Ba++)$t[Ba]/=$t[lr];$t[lr+1]+=1}if($t[lr]=-$t[lr],lr+1<I&&$t[lr]!==0){for(var To=lr+1;To<I;To++)It[To]=0;for(var _i=lr+1;_i<I;_i++)for(var Si=lr+1;Si<T;Si++)It[_i]+=$t[Si]*wr.get(_i,Si);for(var io=lr+1;io<T;io++)for(var fs=-$t[io]/$t[lr+1],Io=lr+1;Io<I;Io++)wr.set(Io,io,wr.get(Io,io)+fs*It[Io])}if(fr)for(var oo=lr+1;oo<T;oo++)Yr.set(oo,lr,$t[oo])}}var Ca=Math.min(T,I+1);if(pe<T&&(xr[pe]=wr.get(pe,pe)),I<Ca&&(xr[Ca-1]=0),ke+1<Ca&&($t[ke]=wr.get(ke,Ca-1)),$t[Ca-1]=0,Ae){for(var ko=pe;ko<Yn;ko++){for(var cs=0;cs<I;cs++)Dr.set(cs,ko,0);Dr.set(ko,ko,1)}for(var ri=pe-1;ri>=0;ri--)if(xr[ri]!==0){for(var Vi=ri+1;Vi<Yn;Vi++){for(var ls=0,Xo=ri;Xo<I;Xo++)ls+=Dr.get(Xo,ri)*Dr.get(Xo,Vi);ls=-ls/Dr.get(ri,ri);for(var Hi=ri;Hi<I;Hi++)Dr.set(Hi,Vi,Dr.get(Hi,Vi)+ls*Dr.get(Hi,ri))}for(var so=ri;so<I;so++)Dr.set(so,ri,-Dr.get(so,ri));Dr.set(ri,ri,1+Dr.get(ri,ri));for(var Ws=0;Ws<ri-1;Ws++)Dr.set(Ws,ri,0)}else{for(var Yo=0;Yo<I;Yo++)Dr.set(Yo,ri,0);Dr.set(ri,ri,1)}}if(fr)for(var Mi=T-1;Mi>=0;Mi--){if(Mi<ke&&$t[Mi]!==0)for(var uo=Mi+1;uo<T;uo++){for(var hs=0,Un=Mi+1;Un<T;Un++)hs+=Yr.get(Un,Mi)*Yr.get(Un,uo);hs=-hs/Yr.get(Mi+1,Mi);for(var Eo=Mi+1;Eo<T;Eo++)Yr.set(Eo,uo,Yr.get(Eo,uo)+hs*Yr.get(Eo,Mi))}for(var Po=0;Po<T;Po++)Yr.set(Po,Mi,0);Yr.set(Mi,Mi,1)}for(var Ss=Ca-1,Wo=0,Ds=Number.EPSILON;Ca>0;){var $n=void 0,ji=void 0;for($n=Ca-2;$n>=-1&&$n!==-1;$n--){var Zi=Number.MIN_VALUE+Ds*Math.abs(xr[$n]+Math.abs(xr[$n+1]));if(Math.abs($t[$n])<=Zi||Number.isNaN($t[$n])){$t[$n]=0;break}}if($n===Ca-2)ji=4;else{var bi=void 0;for(bi=Ca-1;bi>=$n&&bi!==$n;bi--){var Vo=(bi!==Ca?Math.abs($t[bi]):0)+(bi!==$n+1?Math.abs($t[bi-1]):0);if(Math.abs(xr[bi])<=Ds*Vo){xr[bi]=0;break}}bi===$n?ji=3:bi===Ca-1?ji=1:(ji=2,$n=bi)}switch($n++,ji){case 1:{var Ho=$t[Ca-2];$t[Ca-2]=0;for(var fo=Ca-2;fo>=$n;fo--){var ds=yn(xr[fo],Ho),Ms=xr[fo]/ds,ns=Ho/ds;if(xr[fo]=ds,fo!==$n&&(Ho=-ns*$t[fo-1],$t[fo-1]=Ms*$t[fo-1]),fr)for(var Ia=0;Ia<T;Ia++)ds=Ms*Yr.get(Ia,fo)+ns*Yr.get(Ia,Ca-1),Yr.set(Ia,Ca-1,-ns*Yr.get(Ia,fo)+Ms*Yr.get(Ia,Ca-1)),Yr.set(Ia,fo,ds)}break}case 2:{var Ps=$t[$n-1];$t[$n-1]=0;for(var _o=$n;_o<Ca;_o++){var co=yn(xr[_o],Ps),As=xr[_o]/co,Ro=Ps/co;if(xr[_o]=co,Ps=-Ro*$t[_o],$t[_o]=As*$t[_o],Ae)for(var Gi=0;Gi<I;Gi++)co=As*Dr.get(Gi,_o)+Ro*Dr.get(Gi,$n-1),Dr.set(Gi,$n-1,-Ro*Dr.get(Gi,_o)+As*Dr.get(Gi,$n-1)),Dr.set(Gi,_o,co)}break}case 3:{var So=Math.max(Math.abs(xr[Ca-1]),Math.abs(xr[Ca-2]),Math.abs($t[Ca-2]),Math.abs(xr[$n]),Math.abs($t[$n])),qi=xr[Ca-1]/So,Lo=xr[Ca-2]/So,hi=$t[Ca-2]/So,Cs=xr[$n]/So,Bo=$t[$n]/So,lo=((Lo+qi)*(Lo-qi)+hi*hi)/2,jo=qi*hi*(qi*hi),Mo=0;(lo!==0||jo!==0)&&(lo<0?Mo=0-Math.sqrt(lo*lo+jo):Mo=Math.sqrt(lo*lo+jo),Mo=jo/(lo+Mo));for(var Zo=(Cs+qi)*(Cs-qi)+Mo,go=Cs*Bo,Da=$n;Da<Ca-1;Da++){var Ri=yn(Zo,go);Ri===0&&(Ri=Number.MIN_VALUE);var zi=Zo/Ri,Pa=go/Ri;if(Da!==$n&&($t[Da-1]=Ri),Zo=zi*xr[Da]+Pa*$t[Da],$t[Da]=zi*$t[Da]-Pa*xr[Da],go=Pa*xr[Da+1],xr[Da+1]=zi*xr[Da+1],fr)for(var Ii=0;Ii<T;Ii++)Ri=zi*Yr.get(Ii,Da)+Pa*Yr.get(Ii,Da+1),Yr.set(Ii,Da+1,-Pa*Yr.get(Ii,Da)+zi*Yr.get(Ii,Da+1)),Yr.set(Ii,Da,Ri);if(Ri=yn(Zo,go),Ri===0&&(Ri=Number.MIN_VALUE),zi=Zo/Ri,Pa=go/Ri,xr[Da]=Ri,Zo=zi*$t[Da]+Pa*xr[Da+1],xr[Da+1]=-Pa*$t[Da]+zi*xr[Da+1],go=Pa*$t[Da+1],$t[Da+1]=zi*$t[Da+1],Ae&&Da<I-1)for(var qo=0;qo<I;qo++)Ri=zi*Dr.get(qo,Da)+Pa*Dr.get(qo,Da+1),Dr.set(qo,Da+1,-Pa*Dr.get(qo,Da)+zi*Dr.get(qo,Da+1)),Dr.set(qo,Da,Ri)}$t[Ca-2]=Zo,Wo=Wo+1;break}case 4:{if(xr[$n]<=0&&(xr[$n]=xr[$n]<0?-xr[$n]:0,fr))for(var Bi=0;Bi<=Ss;Bi++)Yr.set(Bi,$n,-Yr.get(Bi,$n));for(;$n<Ss&&!(xr[$n]>=xr[$n+1]);){var Fo=xr[$n];if(xr[$n]=xr[$n+1],xr[$n+1]=Fo,fr&&$n<T-1)for(var Ao=0;Ao<T;Ao++)Fo=Yr.get(Ao,$n+1),Yr.set(Ao,$n+1,Yr.get(Ao,$n)),Yr.set(Ao,$n,Fo);if(Ae&&$n<I-1)for(var $i=0;$i<I;$i++)Fo=Dr.get($i,$n+1),Dr.set($i,$n+1,Dr.get($i,$n)),Dr.set($i,$n,Fo);$n++}Wo=0,Ca--;break}}}if(Hr){var Ts=Yr;Yr=Dr,Dr=Ts}this.m=I,this.n=T,this.s=xr,this.U=Dr,this.V=Yr}return b()(vt,[{key:"solve",value:function(P){for(var I=P,T=this.threshold,q=this.s.length,Et=nr.zeros(q,q),Gt=0;Gt<q;Gt++)Math.abs(this.s[Gt])<=T?Et.set(Gt,Gt,0):Et.set(Gt,Gt,1/this.s[Gt]);for(var Dt=this.U,ee=this.rightSingularVectors,Ye=ee.mmul(Et),Ae=ee.rows,fr=Dt.rows,Hr=nr.zeros(Ae,fr),wr=0;wr<Ae;wr++)for(var hn=0;hn<fr;hn++){for(var Yn=0,Ze=0;Ze<q;Ze++)Yn+=Ye.get(wr,Ze)*Dt.get(hn,Ze);Hr.set(wr,hn,Yn)}return Hr.mmul(I)}},{key:"solveForDiagonal",value:function(P){return this.solve(nr.diag(P))}},{key:"inverse",value:function(){for(var P=this.V,I=this.threshold,T=P.rows,q=P.columns,Et=new nr(T,this.s.length),Gt=0;Gt<T;Gt++)for(var Dt=0;Dt<q;Dt++)Math.abs(this.s[Dt])>I&&Et.set(Gt,Dt,P.get(Gt,Dt)/this.s[Dt]);for(var ee=this.U,Ye=ee.rows,Ae=ee.columns,fr=new nr(T,Ye),Hr=0;Hr<T;Hr++)for(var wr=0;wr<Ye;wr++){for(var hn=0,Yn=0;Yn<Ae;Yn++)hn+=Et.get(Hr,Yn)*ee.get(wr,Yn);fr.set(Hr,wr,hn)}return fr}},{key:"condition",get:function(){return this.s[0]/this.s[Math.min(this.m,this.n)-1]}},{key:"norm2",get:function(){return this.s[0]}},{key:"rank",get:function(){for(var P=Math.max(this.m,this.n)*this.s[0]*Number.EPSILON,I=0,T=this.s,q=0,Et=T.length;q<Et;q++)T[q]>P&&I++;return I}},{key:"diagonal",get:function(){return Array.from(this.s)}},{key:"threshold",get:function(){return Number.EPSILON/2*Math.max(this.m,this.n)*this.s[0]}},{key:"leftSingularVectors",get:function(){return this.U}},{key:"rightSingularVectors",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){return nr.diag(this.s)}}]),vt}();function ca(vt){var bt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return vt=dr.checkMatrix(vt),bt?new Vn(vt).inverse():oa(vt,nr.eye(vt.rows))}function oa(vt,bt){var P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return vt=dr.checkMatrix(vt),bt=dr.checkMatrix(bt),P?new Vn(vt).solve(bt):vt.isSquare()?new sn(vt).solve(bt):new ln(vt).solve(bt)}function bn(vt){if(vt=nr.checkMatrix(vt),vt.isSquare()){var bt,P,I,T;if(vt.columns===2)return bt=vt.get(0,0),P=vt.get(0,1),I=vt.get(1,0),T=vt.get(1,1),bt*T-P*I;if(vt.columns===3){var q,Et,Gt;return q=new Fn(vt,[1,2],[1,2]),Et=new Fn(vt,[1,2],[0,2]),Gt=new Fn(vt,[1,2],[0,1]),bt=vt.get(0,0),P=vt.get(0,1),I=vt.get(0,2),bt*bn(q)-P*bn(Et)+I*bn(Gt)}else return new sn(vt).determinant}else throw Error("determinant can only be calculated for a square matrix")}function qn(vt,bt){for(var P=[],I=0;I<vt;I++)I!==bt&&P.push(I);return P}function Gn(vt,bt,P){var I=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1e-9,T=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1e-9;if(vt>T)return new Array(bt.rows+1).fill(0);for(var q=bt.addRow(P,[0]),Et=0;Et<q.rows;Et++)Math.abs(q.get(Et,0))<I&&q.set(Et,0,0);return q.to1DArray()}function zn(vt){var bt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},P=bt.thresholdValue,I=P===void 0?1e-9:P,T=bt.thresholdError,q=T===void 0?1e-9:T;vt=nr.checkMatrix(vt);for(var Et=vt.rows,Gt=new nr(Et,Et),Dt=0;Dt<Et;Dt++){var ee=nr.columnVector(vt.getRow(Dt)),Ye=vt.subMatrixRow(qn(Et,Dt)).transpose(),Ae=new Vn(Ye),fr=Ae.solve(ee),Hr=nr.sub(ee,Ye.mmul(fr)).abs().max();Gt.setRow(Dt,Gn(Hr,fr,Dt,I,q))}return Gt}function ya(vt){var bt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.EPSILON;vt=nr.checkMatrix(vt);for(var P=new Vn(vt,{autoTranspose:!0}),I=P.leftSingularVectors,T=P.rightSingularVectors,q=P.diagonal,Et=0;Et<q.length;Et++)Math.abs(q[Et])>bt?q[Et]=1/q[Et]:q[Et]=0;return T.mmul(nr.diag(q).mmul(I.transpose()))}function W(vt){var bt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:vt,P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};vt=new nr(vt);var I=!1;if(x()(bt)==="object"&&!nr.isMatrix(bt)&&!Array.isArray(bt)?(P=bt,bt=vt,I=!0):bt=new nr(bt),vt.rows!==bt.rows)throw new TypeError("Both matrices must have the same number of rows");var T=P,q=T.center,Et=q===void 0?!0:q;Et&&(vt=vt.center("column"),I||(bt=bt.center("column")));for(var Gt=vt.transpose().mmul(bt),Dt=0;Dt<Gt.rows;Dt++)for(var ee=0;ee<Gt.columns;ee++)Gt.set(Dt,ee,Gt.get(Dt,ee)*(1/(vt.rows-1)));return Gt}function qe(vt){var bt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:vt,P=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};vt=new nr(vt);var I=!1;if(x()(bt)==="object"&&!nr.isMatrix(bt)&&!Array.isArray(bt)?(P=bt,bt=vt,I=!0):bt=new nr(bt),vt.rows!==bt.rows)throw new TypeError("Both matrices must have the same number of rows");var T=P,q=T.center,Et=q===void 0?!0:q,Gt=T.scale,Dt=Gt===void 0?!0:Gt;Et&&(vt.center("column"),I||bt.center("column")),Dt&&(vt.scale("column"),I||bt.scale("column"));for(var ee=vt.standardDeviation("column",{unbiased:!0}),Ye=I?ee:bt.standardDeviation("column",{unbiased:!0}),Ae=vt.transpose().mmul(bt),fr=0;fr<Ae.rows;fr++)for(var Hr=0;Hr<Ae.columns;Hr++)Ae.set(fr,Hr,Ae.get(fr,Hr)*(1/(ee[fr]*Ye[Hr]))*(1/(vt.rows-1)));return Ae}var be=function(){function vt(bt){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};_()(this,vt);var I=P.assumeSymmetric,T=I===void 0?!1:I;if(bt=dr.checkMatrix(bt),!bt.isSquare())throw new Error("Matrix is not a square matrix");var q=bt.columns,Et=new nr(q,q),Gt=new Float64Array(q),Dt=new Float64Array(q),ee=bt,Ye,Ae,fr=!1;if(T?fr=!0:fr=bt.isSymmetric(),fr){for(Ye=0;Ye<q;Ye++)for(Ae=0;Ae<q;Ae++)Et.set(Ye,Ae,ee.get(Ye,Ae));or(q,Dt,Gt,Et),ar(q,Dt,Gt,Et)}else{var Hr=new nr(q,q),wr=new Float64Array(q);for(Ae=0;Ae<q;Ae++)for(Ye=0;Ye<q;Ye++)Hr.set(Ye,Ae,ee.get(Ye,Ae));Br(q,Hr,wr,Et),Pr(q,Dt,Gt,Et,Hr)}this.n=q,this.e=Dt,this.d=Gt,this.V=Et}return b()(vt,[{key:"realEigenvalues",get:function(){return Array.from(this.d)}},{key:"imaginaryEigenvalues",get:function(){return Array.from(this.e)}},{key:"eigenvectorMatrix",get:function(){return this.V}},{key:"diagonalMatrix",get:function(){var P=this.n,I=this.e,T=this.d,q=new nr(P,P),Et,Gt;for(Et=0;Et<P;Et++){for(Gt=0;Gt<P;Gt++)q.set(Et,Gt,0);q.set(Et,Et,T[Et]),I[Et]>0?q.set(Et,Et+1,I[Et]):I[Et]<0&&q.set(Et,Et-1,I[Et])}return q}}]),vt}();function or(vt,bt,P,I){var T,q,Et,Gt,Dt,ee,Ye,Ae;for(Dt=0;Dt<vt;Dt++)P[Dt]=I.get(vt-1,Dt);for(Gt=vt-1;Gt>0;Gt--){for(Ae=0,Et=0,ee=0;ee<Gt;ee++)Ae=Ae+Math.abs(P[ee]);if(Ae===0)for(bt[Gt]=P[Gt-1],Dt=0;Dt<Gt;Dt++)P[Dt]=I.get(Gt-1,Dt),I.set(Gt,Dt,0),I.set(Dt,Gt,0);else{for(ee=0;ee<Gt;ee++)P[ee]/=Ae,Et+=P[ee]*P[ee];for(T=P[Gt-1],q=Math.sqrt(Et),T>0&&(q=-q),bt[Gt]=Ae*q,Et=Et-T*q,P[Gt-1]=T-q,Dt=0;Dt<Gt;Dt++)bt[Dt]=0;for(Dt=0;Dt<Gt;Dt++){for(T=P[Dt],I.set(Dt,Gt,T),q=bt[Dt]+I.get(Dt,Dt)*T,ee=Dt+1;ee<=Gt-1;ee++)q+=I.get(ee,Dt)*P[ee],bt[ee]+=I.get(ee,Dt)*T;bt[Dt]=q}for(T=0,Dt=0;Dt<Gt;Dt++)bt[Dt]/=Et,T+=bt[Dt]*P[Dt];for(Ye=T/(Et+Et),Dt=0;Dt<Gt;Dt++)bt[Dt]-=Ye*P[Dt];for(Dt=0;Dt<Gt;Dt++){for(T=P[Dt],q=bt[Dt],ee=Dt;ee<=Gt-1;ee++)I.set(ee,Dt,I.get(ee,Dt)-(T*bt[ee]+q*P[ee]));P[Dt]=I.get(Gt-1,Dt),I.set(Gt,Dt,0)}}P[Gt]=Et}for(Gt=0;Gt<vt-1;Gt++){if(I.set(vt-1,Gt,I.get(Gt,Gt)),I.set(Gt,Gt,1),Et=P[Gt+1],Et!==0){for(ee=0;ee<=Gt;ee++)P[ee]=I.get(ee,Gt+1)/Et;for(Dt=0;Dt<=Gt;Dt++){for(q=0,ee=0;ee<=Gt;ee++)q+=I.get(ee,Gt+1)*I.get(ee,Dt);for(ee=0;ee<=Gt;ee++)I.set(ee,Dt,I.get(ee,Dt)-q*P[ee])}}for(ee=0;ee<=Gt;ee++)I.set(ee,Gt+1,0)}for(Dt=0;Dt<vt;Dt++)P[Dt]=I.get(vt-1,Dt),I.set(vt-1,Dt,0);I.set(vt-1,vt-1,1),bt[0]=0}function ar(vt,bt,P,I){var T,q,Et,Gt,Dt,ee,Ye,Ae,fr,Hr,wr,hn,Yn,Ze,xr,Dr,Yr;for(Et=1;Et<vt;Et++)bt[Et-1]=bt[Et];bt[vt-1]=0;var $t=0,It=0,ne=Number.EPSILON;for(ee=0;ee<vt;ee++){for(It=Math.max(It,Math.abs(P[ee])+Math.abs(bt[ee])),Ye=ee;Ye<vt&&!(Math.abs(bt[Ye])<=ne*It);)Ye++;if(Ye>ee){Yr=0;do{for(Yr=Yr+1,T=P[ee],Ae=(P[ee+1]-T)/(2*bt[ee]),fr=yn(Ae,1),Ae<0&&(fr=-fr),P[ee]=bt[ee]/(Ae+fr),P[ee+1]=bt[ee]*(Ae+fr),Hr=P[ee+1],q=T-P[ee],Et=ee+2;Et<vt;Et++)P[Et]-=q;for($t=$t+q,Ae=P[Ye],wr=1,hn=wr,Yn=wr,Ze=bt[ee+1],xr=0,Dr=0,Et=Ye-1;Et>=ee;Et--)for(Yn=hn,hn=wr,Dr=xr,T=wr*bt[Et],q=wr*Ae,fr=yn(Ae,bt[Et]),bt[Et+1]=xr*fr,xr=bt[Et]/fr,wr=Ae/fr,Ae=wr*P[Et]-xr*T,P[Et+1]=q+xr*(wr*T+xr*P[Et]),Dt=0;Dt<vt;Dt++)q=I.get(Dt,Et+1),I.set(Dt,Et+1,xr*I.get(Dt,Et)+wr*q),I.set(Dt,Et,wr*I.get(Dt,Et)-xr*q);Ae=-xr*Dr*Yn*Ze*bt[ee]/Hr,bt[ee]=xr*Ae,P[ee]=wr*Ae}while(Math.abs(bt[ee])>ne*It)}P[ee]=P[ee]+$t,bt[ee]=0}for(Et=0;Et<vt-1;Et++){for(Dt=Et,Ae=P[Et],Gt=Et+1;Gt<vt;Gt++)P[Gt]<Ae&&(Dt=Gt,Ae=P[Gt]);if(Dt!==Et)for(P[Dt]=P[Et],P[Et]=Ae,Gt=0;Gt<vt;Gt++)Ae=I.get(Gt,Et),I.set(Gt,Et,I.get(Gt,Dt)),I.set(Gt,Dt,Ae)}}function Br(vt,bt,P,I){var T=0,q=vt-1,Et,Gt,Dt,ee,Ye,Ae,fr;for(Ae=T+1;Ae<=q-1;Ae++){for(fr=0,ee=Ae;ee<=q;ee++)fr=fr+Math.abs(bt.get(ee,Ae-1));if(fr!==0){for(Dt=0,ee=q;ee>=Ae;ee--)P[ee]=bt.get(ee,Ae-1)/fr,Dt+=P[ee]*P[ee];for(Gt=Math.sqrt(Dt),P[Ae]>0&&(Gt=-Gt),Dt=Dt-P[Ae]*Gt,P[Ae]=P[Ae]-Gt,Ye=Ae;Ye<vt;Ye++){for(Et=0,ee=q;ee>=Ae;ee--)Et+=P[ee]*bt.get(ee,Ye);for(Et=Et/Dt,ee=Ae;ee<=q;ee++)bt.set(ee,Ye,bt.get(ee,Ye)-Et*P[ee])}for(ee=0;ee<=q;ee++){for(Et=0,Ye=q;Ye>=Ae;Ye--)Et+=P[Ye]*bt.get(ee,Ye);for(Et=Et/Dt,Ye=Ae;Ye<=q;Ye++)bt.set(ee,Ye,bt.get(ee,Ye)-Et*P[Ye])}P[Ae]=fr*P[Ae],bt.set(Ae,Ae-1,fr*Gt)}}for(ee=0;ee<vt;ee++)for(Ye=0;Ye<vt;Ye++)I.set(ee,Ye,ee===Ye?1:0);for(Ae=q-1;Ae>=T+1;Ae--)if(bt.get(Ae,Ae-1)!==0){for(ee=Ae+1;ee<=q;ee++)P[ee]=bt.get(ee,Ae-1);for(Ye=Ae;Ye<=q;Ye++){for(Gt=0,ee=Ae;ee<=q;ee++)Gt+=P[ee]*I.get(ee,Ye);for(Gt=Gt/P[Ae]/bt.get(Ae,Ae-1),ee=Ae;ee<=q;ee++)I.set(ee,Ye,I.get(ee,Ye)+Gt*P[ee])}}}function Pr(vt,bt,P,I,T){var q=vt-1,Et=0,Gt=vt-1,Dt=Number.EPSILON,ee=0,Ye=0,Ae=0,fr=0,Hr=0,wr=0,hn=0,Yn=0,Ze,xr,Dr,Yr,$t,It,ne,xe,pe,ke,sr,lr,en,Dn,En;for(Ze=0;Ze<vt;Ze++)for((Ze<Et||Ze>Gt)&&(P[Ze]=T.get(Ze,Ze),bt[Ze]=0),xr=Math.max(Ze-1,0);xr<vt;xr++)Ye=Ye+Math.abs(T.get(Ze,xr));for(;q>=Et;){for(Yr=q;Yr>Et&&(wr=Math.abs(T.get(Yr-1,Yr-1))+Math.abs(T.get(Yr,Yr)),wr===0&&(wr=Ye),!(Math.abs(T.get(Yr,Yr-1))<Dt*wr));)Yr--;if(Yr===q)T.set(q,q,T.get(q,q)+ee),P[q]=T.get(q,q),bt[q]=0,q--,Yn=0;else if(Yr===q-1){if(ne=T.get(q,q-1)*T.get(q-1,q),Ae=(T.get(q-1,q-1)-T.get(q,q))/2,fr=Ae*Ae+ne,hn=Math.sqrt(Math.abs(fr)),T.set(q,q,T.get(q,q)+ee),T.set(q-1,q-1,T.get(q-1,q-1)+ee),xe=T.get(q,q),fr>=0){for(hn=Ae>=0?Ae+hn:Ae-hn,P[q-1]=xe+hn,P[q]=P[q-1],hn!==0&&(P[q]=xe-ne/hn),bt[q-1]=0,bt[q]=0,xe=T.get(q,q-1),wr=Math.abs(xe)+Math.abs(hn),Ae=xe/wr,fr=hn/wr,Hr=Math.sqrt(Ae*Ae+fr*fr),Ae=Ae/Hr,fr=fr/Hr,xr=q-1;xr<vt;xr++)hn=T.get(q-1,xr),T.set(q-1,xr,fr*hn+Ae*T.get(q,xr)),T.set(q,xr,fr*T.get(q,xr)-Ae*hn);for(Ze=0;Ze<=q;Ze++)hn=T.get(Ze,q-1),T.set(Ze,q-1,fr*hn+Ae*T.get(Ze,q)),T.set(Ze,q,fr*T.get(Ze,q)-Ae*hn);for(Ze=Et;Ze<=Gt;Ze++)hn=I.get(Ze,q-1),I.set(Ze,q-1,fr*hn+Ae*I.get(Ze,q)),I.set(Ze,q,fr*I.get(Ze,q)-Ae*hn)}else P[q-1]=xe+Ae,P[q]=xe+Ae,bt[q-1]=hn,bt[q]=-hn;q=q-2,Yn=0}else{if(xe=T.get(q,q),pe=0,ne=0,Yr<q&&(pe=T.get(q-1,q-1),ne=T.get(q,q-1)*T.get(q-1,q)),Yn===10){for(ee+=xe,Ze=Et;Ze<=q;Ze++)T.set(Ze,Ze,T.get(Ze,Ze)-xe);wr=Math.abs(T.get(q,q-1))+Math.abs(T.get(q-1,q-2)),xe=pe=.75*wr,ne=-.4375*wr*wr}if(Yn===30&&(wr=(pe-xe)/2,wr=wr*wr+ne,wr>0)){for(wr=Math.sqrt(wr),pe<xe&&(wr=-wr),wr=xe-ne/((pe-xe)/2+wr),Ze=Et;Ze<=q;Ze++)T.set(Ze,Ze,T.get(Ze,Ze)-wr);ee+=wr,xe=pe=ne=.964}for(Yn=Yn+1,$t=q-2;$t>=Yr&&(hn=T.get($t,$t),Hr=xe-hn,wr=pe-hn,Ae=(Hr*wr-ne)/T.get($t+1,$t)+T.get($t,$t+1),fr=T.get($t+1,$t+1)-hn-Hr-wr,Hr=T.get($t+2,$t+1),wr=Math.abs(Ae)+Math.abs(fr)+Math.abs(Hr),Ae=Ae/wr,fr=fr/wr,Hr=Hr/wr,!($t===Yr||Math.abs(T.get($t,$t-1))*(Math.abs(fr)+Math.abs(Hr))<Dt*(Math.abs(Ae)*(Math.abs(T.get($t-1,$t-1))+Math.abs(hn)+Math.abs(T.get($t+1,$t+1))))));)$t--;for(Ze=$t+2;Ze<=q;Ze++)T.set(Ze,Ze-2,0),Ze>$t+2&&T.set(Ze,Ze-3,0);for(Dr=$t;Dr<=q-1&&(Dn=Dr!==q-1,Dr!==$t&&(Ae=T.get(Dr,Dr-1),fr=T.get(Dr+1,Dr-1),Hr=Dn?T.get(Dr+2,Dr-1):0,xe=Math.abs(Ae)+Math.abs(fr)+Math.abs(Hr),xe!==0&&(Ae=Ae/xe,fr=fr/xe,Hr=Hr/xe)),xe!==0);Dr++)if(wr=Math.sqrt(Ae*Ae+fr*fr+Hr*Hr),Ae<0&&(wr=-wr),wr!==0){for(Dr!==$t?T.set(Dr,Dr-1,-wr*xe):Yr!==$t&&T.set(Dr,Dr-1,-T.get(Dr,Dr-1)),Ae=Ae+wr,xe=Ae/wr,pe=fr/wr,hn=Hr/wr,fr=fr/Ae,Hr=Hr/Ae,xr=Dr;xr<vt;xr++)Ae=T.get(Dr,xr)+fr*T.get(Dr+1,xr),Dn&&(Ae=Ae+Hr*T.get(Dr+2,xr),T.set(Dr+2,xr,T.get(Dr+2,xr)-Ae*hn)),T.set(Dr,xr,T.get(Dr,xr)-Ae*xe),T.set(Dr+1,xr,T.get(Dr+1,xr)-Ae*pe);for(Ze=0;Ze<=Math.min(q,Dr+3);Ze++)Ae=xe*T.get(Ze,Dr)+pe*T.get(Ze,Dr+1),Dn&&(Ae=Ae+hn*T.get(Ze,Dr+2),T.set(Ze,Dr+2,T.get(Ze,Dr+2)-Ae*Hr)),T.set(Ze,Dr,T.get(Ze,Dr)-Ae),T.set(Ze,Dr+1,T.get(Ze,Dr+1)-Ae*fr);for(Ze=Et;Ze<=Gt;Ze++)Ae=xe*I.get(Ze,Dr)+pe*I.get(Ze,Dr+1),Dn&&(Ae=Ae+hn*I.get(Ze,Dr+2),I.set(Ze,Dr+2,I.get(Ze,Dr+2)-Ae*Hr)),I.set(Ze,Dr,I.get(Ze,Dr)-Ae),I.set(Ze,Dr+1,I.get(Ze,Dr+1)-Ae*fr)}}}if(Ye!==0){for(q=vt-1;q>=0;q--)if(Ae=P[q],fr=bt[q],fr===0)for(Yr=q,T.set(q,q,1),Ze=q-1;Ze>=0;Ze--){for(ne=T.get(Ze,Ze)-Ae,Hr=0,xr=Yr;xr<=q;xr++)Hr=Hr+T.get(Ze,xr)*T.get(xr,q);if(bt[Ze]<0)hn=ne,wr=Hr;else if(Yr=Ze,bt[Ze]===0?T.set(Ze,q,ne!==0?-Hr/ne:-Hr/(Dt*Ye)):(xe=T.get(Ze,Ze+1),pe=T.get(Ze+1,Ze),fr=(P[Ze]-Ae)*(P[Ze]-Ae)+bt[Ze]*bt[Ze],It=(xe*wr-hn*Hr)/fr,T.set(Ze,q,It),T.set(Ze+1,q,Math.abs(xe)>Math.abs(hn)?(-Hr-ne*It)/xe:(-wr-pe*It)/hn)),It=Math.abs(T.get(Ze,q)),Dt*It*It>1)for(xr=Ze;xr<=q;xr++)T.set(xr,q,T.get(xr,q)/It)}else if(fr<0)for(Yr=q-1,Math.abs(T.get(q,q-1))>Math.abs(T.get(q-1,q))?(T.set(q-1,q-1,fr/T.get(q,q-1)),T.set(q-1,q,-(T.get(q,q)-Ae)/T.get(q,q-1))):(En=cn(0,-T.get(q-1,q),T.get(q-1,q-1)-Ae,fr),T.set(q-1,q-1,En[0]),T.set(q-1,q,En[1])),T.set(q,q-1,0),T.set(q,q,1),Ze=q-2;Ze>=0;Ze--){for(ke=0,sr=0,xr=Yr;xr<=q;xr++)ke=ke+T.get(Ze,xr)*T.get(xr,q-1),sr=sr+T.get(Ze,xr)*T.get(xr,q);if(ne=T.get(Ze,Ze)-Ae,bt[Ze]<0)hn=ne,Hr=ke,wr=sr;else if(Yr=Ze,bt[Ze]===0?(En=cn(-ke,-sr,ne,fr),T.set(Ze,q-1,En[0]),T.set(Ze,q,En[1])):(xe=T.get(Ze,Ze+1),pe=T.get(Ze+1,Ze),lr=(P[Ze]-Ae)*(P[Ze]-Ae)+bt[Ze]*bt[Ze]-fr*fr,en=(P[Ze]-Ae)*2*fr,lr===0&&en===0&&(lr=Dt*Ye*(Math.abs(ne)+Math.abs(fr)+Math.abs(xe)+Math.abs(pe)+Math.abs(hn))),En=cn(xe*Hr-hn*ke+fr*sr,xe*wr-hn*sr-fr*ke,lr,en),T.set(Ze,q-1,En[0]),T.set(Ze,q,En[1]),Math.abs(xe)>Math.abs(hn)+Math.abs(fr)?(T.set(Ze+1,q-1,(-ke-ne*T.get(Ze,q-1)+fr*T.get(Ze,q))/xe),T.set(Ze+1,q,(-sr-ne*T.get(Ze,q)-fr*T.get(Ze,q-1))/xe)):(En=cn(-Hr-pe*T.get(Ze,q-1),-wr-pe*T.get(Ze,q),hn,fr),T.set(Ze+1,q-1,En[0]),T.set(Ze+1,q,En[1]))),It=Math.max(Math.abs(T.get(Ze,q-1)),Math.abs(T.get(Ze,q))),Dt*It*It>1)for(xr=Ze;xr<=q;xr++)T.set(xr,q-1,T.get(xr,q-1)/It),T.set(xr,q,T.get(xr,q)/It)}for(Ze=0;Ze<vt;Ze++)if(Ze<Et||Ze>Gt)for(xr=Ze;xr<vt;xr++)I.set(Ze,xr,T.get(Ze,xr));for(xr=vt-1;xr>=Et;xr--)for(Ze=Et;Ze<=Gt;Ze++){for(hn=0,Dr=Et;Dr<=Math.min(xr,Gt);Dr++)hn=hn+I.get(Ze,Dr)*T.get(Dr,xr);I.set(Ze,xr,hn)}}}function cn(vt,bt,P,I){var T,q;return Math.abs(P)>Math.abs(I)?(T=I/P,q=P+T*I,[(vt+T*bt)/q,(bt-T*vt)/q]):(T=P/I,q=I+T*P,[(T*vt+bt)/q,(T*bt-vt)/q])}var xn=function(){function vt(bt){if(_()(this,vt),bt=dr.checkMatrix(bt),!bt.isSymmetric())throw new Error("Matrix is not symmetric");var P=bt,I=P.rows,T=new nr(I,I),q=!0,Et,Gt,Dt;for(Gt=0;Gt<I;Gt++){var ee=0;for(Dt=0;Dt<Gt;Dt++){var Ye=0;for(Et=0;Et<Dt;Et++)Ye+=T.get(Dt,Et)*T.get(Gt,Et);Ye=(P.get(Gt,Dt)-Ye)/T.get(Dt,Dt),T.set(Gt,Dt,Ye),ee=ee+Ye*Ye}for(ee=P.get(Gt,Gt)-ee,q&=ee>0,T.set(Gt,Gt,Math.sqrt(Math.max(ee,0))),Dt=Gt+1;Dt<I;Dt++)T.set(Gt,Dt,0)}this.L=T,this.positiveDefinite=!!q}return b()(vt,[{key:"isPositiveDefinite",value:function(){return this.positiveDefinite}},{key:"solve",value:function(P){P=dr.checkMatrix(P);var I=this.L,T=I.rows;if(P.rows!==T)throw new Error("Matrix dimensions do not match");if(this.isPositiveDefinite()===!1)throw new Error("Matrix is not positive definite");var q=P.columns,Et=P.clone(),Gt,Dt,ee;for(ee=0;ee<T;ee++)for(Dt=0;Dt<q;Dt++){for(Gt=0;Gt<ee;Gt++)Et.set(ee,Dt,Et.get(ee,Dt)-Et.get(Gt,Dt)*I.get(ee,Gt));Et.set(ee,Dt,Et.get(ee,Dt)/I.get(ee,ee))}for(ee=T-1;ee>=0;ee--)for(Dt=0;Dt<q;Dt++){for(Gt=ee+1;Gt<T;Gt++)Et.set(ee,Dt,Et.get(ee,Dt)-Et.get(Gt,Dt)*I.get(Gt,ee));Et.set(ee,Dt,Et.get(ee,Dt)/I.get(ee,ee))}return Et}},{key:"lowerTriangularMatrix",get:function(){return this.L}}]),vt}(),tn=b()(function vt(bt){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};_()(this,vt),bt=dr.checkMatrix(bt);var I=P.Y,T=P.scaleScores,q=T===void 0?!1:T,Et=P.maxIterations,Gt=Et===void 0?1e3:Et,Dt=P.terminationCriteria,ee=Dt===void 0?1e-10:Dt,Ye;if(I){if(Array.isArray(I)&&typeof I[0]=="number"?I=nr.columnVector(I):I=dr.checkMatrix(I),!I.isColumnVector()||I.rows!==bt.rows)throw new Error("Y must be a column vector of length X.rows");Ye=I}else Ye=bt.getColumnVector(0);for(var Ae=1,fr,Hr,wr,hn,Yn=0;Yn<Gt&&Ae>ee;Yn++)wr=bt.transpose().mmul(Ye).div(Ye.transpose().mmul(Ye).get(0,0)),wr=wr.div(wr.norm()),fr=bt.mmul(wr).div(wr.transpose().mmul(wr).get(0,0)),Yn>0&&(Ae=fr.clone().sub(hn).pow(2).sum()),hn=fr.clone(),I?(Hr=I.transpose().mmul(fr).div(fr.transpose().mmul(fr).get(0,0)),Hr=Hr.div(Hr.norm()),Ye=I.mmul(Hr).div(Hr.transpose().mmul(Hr).get(0,0))):Ye=fr;if(I){var Ze=bt.transpose().mmul(fr).div(fr.transpose().mmul(fr).get(0,0));Ze=Ze.div(Ze.norm());var xr=bt.clone().sub(fr.clone().mmul(Ze.transpose())),Dr=Ye.transpose().mmul(fr).div(fr.transpose().mmul(fr).get(0,0)),Yr=I.clone().sub(fr.clone().mulS(Dr.get(0,0)).mmul(Hr.transpose()));this.t=fr,this.p=Ze.transpose(),this.w=wr.transpose(),this.q=Hr,this.u=Ye,this.s=fr.transpose().mmul(fr),this.xResidual=xr,this.yResidual=Yr,this.betas=Dr}else this.w=wr.transpose(),this.s=fr.transpose().mmul(fr).sqrt(),q?this.t=fr.clone().div(this.s.get(0,0)):this.t=fr,this.xResidual=bt.sub(fr.mmul(wr.transpose()))})},86880:function(Se,R,et){"use strict";et.r(R),et.d(R,{forceCenter:function(){return ft},forceCollide:function(){return M},forceLink:function(){return _},forceManyBody:function(){return Pe},forceRadial:function(){return Xt},forceSimulation:function(){return ue},forceX:function(){return ie},forceY:function(){return Ie}});function ft(se,Te){var Be,Tt=1;se==null&&(se=0),Te==null&&(Te=0);function nr(){var Ir,Zr=Be.length,Ur,wn=0,Xr=0;for(Ir=0;Ir<Zr;++Ir)Ur=Be[Ir],wn+=Ur.x,Xr+=Ur.y;for(wn=(wn/Zr-se)*Tt,Xr=(Xr/Zr-Te)*Tt,Ir=0;Ir<Zr;++Ir)Ur=Be[Ir],Ur.x-=wn,Ur.y-=Xr}return nr.initialize=function(Ir){Be=Ir},nr.x=function(Ir){return arguments.length?(se=+Ir,nr):se},nr.y=function(Ir){return arguments.length?(Te=+Ir,nr):Te},nr.strength=function(Ir){return arguments.length?(Tt=+Ir,nr):Tt},nr}var nt=et(47148);function V(se){return function(){return se}}function z(se){return(se()-.5)*1e-6}function H(se){return se.x+se.vx}function F(se){return se.y+se.vy}function M(se){var Te,Be,Tt,nr=1,Ir=1;typeof se!="function"&&(se=V(se==null?1:+se));function Zr(){for(var Xr,Sn=Te.length,Kn,Fn,pn,er,cr,dr,Gr=0;Gr<Ir;++Gr)for(Kn=(0,nt.Z)(Te,H,F).visitAfter(Ur),Xr=0;Xr<Sn;++Xr)Fn=Te[Xr],cr=Be[Fn.index],dr=cr*cr,pn=Fn.x+Fn.vx,er=Fn.y+Fn.vy,Kn.visit(sn);function sn(yn,ln,Vn,ca,oa){var bn=yn.data,qn=yn.r,Gn=cr+qn;if(bn){if(bn.index>Fn.index){var zn=pn-bn.x-bn.vx,ya=er-bn.y-bn.vy,W=zn*zn+ya*ya;W<Gn*Gn&&(zn===0&&(zn=z(Tt),W+=zn*zn),ya===0&&(ya=z(Tt),W+=ya*ya),W=(Gn-(W=Math.sqrt(W)))/W*nr,Fn.vx+=(zn*=W)*(Gn=(qn*=qn)/(dr+qn)),Fn.vy+=(ya*=W)*Gn,bn.vx-=zn*(Gn=1-Gn),bn.vy-=ya*Gn)}return}return ln>pn+Gn||ca<pn-Gn||Vn>er+Gn||oa<er-Gn}}function Ur(Xr){if(Xr.data)return Xr.r=Be[Xr.data.index];for(var Sn=Xr.r=0;Sn<4;++Sn)Xr[Sn]&&Xr[Sn].r>Xr.r&&(Xr.r=Xr[Sn].r)}function wn(){if(Te){var Xr,Sn=Te.length,Kn;for(Be=new Array(Sn),Xr=0;Xr<Sn;++Xr)Kn=Te[Xr],Be[Kn.index]=+se(Kn,Xr,Te)}}return Zr.initialize=function(Xr,Sn){Te=Xr,Tt=Sn,wn()},Zr.iterations=function(Xr){return arguments.length?(Ir=+Xr,Zr):Ir},Zr.strength=function(Xr){return arguments.length?(nr=+Xr,Zr):nr},Zr.radius=function(Xr){return arguments.length?(se=typeof Xr=="function"?Xr:V(+Xr),wn(),Zr):se},Zr}var A=et(52677),y=et.n(A);function x(se){return se.index}function p(se,Te){var Be=se.get(Te);if(!Be)throw new Error("node not found: "+Te);return Be}function _(se){var Te=x,Be=Kn,Tt,nr=V(30),Ir,Zr,Ur,wn,Xr,Sn=1;se==null&&(se=[]);function Kn(dr){return 1/Math.min(Ur[dr.source.index],Ur[dr.target.index])}function Fn(dr){for(var Gr=0,sn=se.length;Gr<Sn;++Gr)for(var yn=0,ln,Vn,ca,oa,bn,qn,Gn;yn<sn;++yn)ln=se[yn],Vn=ln.source,ca=ln.target,oa=ca.x+ca.vx-Vn.x-Vn.vx||z(Xr),bn=ca.y+ca.vy-Vn.y-Vn.vy||z(Xr),qn=Math.sqrt(oa*oa+bn*bn),qn=(qn-Ir[yn])/qn*dr*Tt[yn],oa*=qn,bn*=qn,ca.vx-=oa*(Gn=wn[yn]),ca.vy-=bn*Gn,Vn.vx+=oa*(Gn=1-Gn),Vn.vy+=bn*Gn}function pn(){if(Zr){var dr,Gr=Zr.length,sn=se.length,yn=new Map(Zr.map(function(Vn,ca){return[Te(Vn,ca,Zr),Vn]})),ln;for(dr=0,Ur=new Array(Gr);dr<sn;++dr)ln=se[dr],ln.index=dr,y()(ln.source)!=="object"&&(ln.source=p(yn,ln.source)),y()(ln.target)!=="object"&&(ln.target=p(yn,ln.target)),Ur[ln.source.index]=(Ur[ln.source.index]||0)+1,Ur[ln.target.index]=(Ur[ln.target.index]||0)+1;for(dr=0,wn=new Array(sn);dr<sn;++dr)ln=se[dr],wn[dr]=Ur[ln.source.index]/(Ur[ln.source.index]+Ur[ln.target.index]);Tt=new Array(sn),er(),Ir=new Array(sn),cr()}}function er(){if(Zr)for(var dr=0,Gr=se.length;dr<Gr;++dr)Tt[dr]=+Be(se[dr],dr,se)}function cr(){if(Zr)for(var dr=0,Gr=se.length;dr<Gr;++dr)Ir[dr]=+nr(se[dr],dr,se)}return Fn.initialize=function(dr,Gr){Zr=dr,Xr=Gr,pn()},Fn.links=function(dr){return arguments.length?(se=dr,pn(),Fn):se},Fn.id=function(dr){return arguments.length?(Te=dr,Fn):Te},Fn.iterations=function(dr){return arguments.length?(Sn=+dr,Fn):Sn},Fn.strength=function(dr){return arguments.length?(Be=typeof dr=="function"?dr:V(+dr),er(),Fn):Be},Fn.distance=function(dr){return arguments.length?(nr=typeof dr=="function"?dr:V(+dr),cr(),Fn):nr},Fn}var E={value:function(){}};function b(){for(var se=0,Te=arguments.length,Be={},Tt;se<Te;++se){if(!(Tt=arguments[se]+"")||Tt in Be||/[\s.]/.test(Tt))throw new Error("illegal type: "+Tt);Be[Tt]=[]}return new k(Be)}function k(se){this._=se}function N(se,Te){return se.trim().split(/^|\s+/).map(function(Be){var Tt="",nr=Be.indexOf(".");if(nr>=0&&(Tt=Be.slice(nr+1),Be=Be.slice(0,nr)),Be&&!Te.hasOwnProperty(Be))throw new Error("unknown type: "+Be);return{type:Be,name:Tt}})}k.prototype=b.prototype={constructor:k,on:function(Te,Be){var Tt=this._,nr=N(Te+"",Tt),Ir,Zr=-1,Ur=nr.length;if(arguments.length<2){for(;++Zr<Ur;)if((Ir=(Te=nr[Zr]).type)&&(Ir=g(Tt[Ir],Te.name)))return Ir;return}if(Be!=null&&typeof Be!="function")throw new Error("invalid callback: "+Be);for(;++Zr<Ur;)if(Ir=(Te=nr[Zr]).type)Tt[Ir]=v(Tt[Ir],Te.name,Be);else if(Be==null)for(Ir in Tt)Tt[Ir]=v(Tt[Ir],Te.name,null);return this},copy:function(){var Te={},Be=this._;for(var Tt in Be)Te[Tt]=Be[Tt].slice();return new k(Te)},call:function(Te,Be){if((Ir=arguments.length-2)>0)for(var Tt=new Array(Ir),nr=0,Ir,Zr;nr<Ir;++nr)Tt[nr]=arguments[nr+2];if(!this._.hasOwnProperty(Te))throw new Error("unknown type: "+Te);for(Zr=this._[Te],nr=0,Ir=Zr.length;nr<Ir;++nr)Zr[nr].value.apply(Be,Tt)},apply:function(Te,Be,Tt){if(!this._.hasOwnProperty(Te))throw new Error("unknown type: "+Te);for(var nr=this._[Te],Ir=0,Zr=nr.length;Ir<Zr;++Ir)nr[Ir].value.apply(Be,Tt)}};function g(se,Te){for(var Be=0,Tt=se.length,nr;Be<Tt;++Be)if((nr=se[Be]).name===Te)return nr.value}function v(se,Te,Be){for(var Tt=0,nr=se.length;Tt<nr;++Tt)if(se[Tt].name===Te){se[Tt]=E,se=se.slice(0,Tt).concat(se.slice(Tt+1));break}return Be!=null&&se.push({name:Te,value:Be}),se}var K=b,B=0,G=0,Y=0,j=1e3,Q,Z,rt=0,ut=0,ht=0,kt=typeof performance=="object"&&performance.now?performance:Date,At=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(se){setTimeout(se,17)};function Ht(){return ut||(At(Rt),ut=kt.now()+ht)}function Rt(){ut=0}function le(){this._call=this._time=this._next=null}le.prototype=dt.prototype={constructor:le,restart:function(se,Te,Be){if(typeof se!="function")throw new TypeError("callback is not a function");Be=(Be==null?Ht():+Be)+(Te==null?0:+Te),!this._next&&Z!==this&&(Z?Z._next=this:Q=this,Z=this),this._call=se,this._time=Be,Wt()},stop:function(){this._call&&(this._call=null,this._time=1/0,Wt())}};function dt(se,Te,Be){var Tt=new le;return Tt.restart(se,Te,Be),Tt}function ot(){Ht(),++B;for(var se=Q,Te;se;)(Te=ut-se._time)>=0&&se._call.call(null,Te),se=se._next;--B}function yt(){ut=(rt=kt.now())+ht,B=G=0;try{ot()}finally{B=0,Ot(),ut=0}}function Lt(){var se=kt.now(),Te=se-rt;Te>j&&(ht-=Te,rt=se)}function Ot(){for(var se,Te=Q,Be,Tt=1/0;Te;)Te._call?(Tt>Te._time&&(Tt=Te._time),se=Te,Te=Te._next):(Be=Te._next,Te._next=null,Te=se?se._next=Be:Q=Be);Z=se,Wt(Tt)}function Wt(se){if(!B){G&&(G=clearTimeout(G));var Te=se-ut;Te>24?(se<1/0&&(G=setTimeout(yt,se-kt.now()-ht)),Y&&(Y=clearInterval(Y))):(Y||(rt=kt.now(),Y=setInterval(Lt,j)),B=1,At(yt))}}var Jt=1664525,De=1013904223,te=4294967296;function oe(){var se=1;return function(){return(se=(Jt*se+De)%te)/te}}function me(se){return se.x}function Ce(se){return se.y}var _e=10,zt=Math.PI*(3-Math.sqrt(5));function ue(se){var Te,Be=1,Tt=.001,nr=1-Math.pow(Tt,1/300),Ir=0,Zr=.6,Ur=new Map,wn=dt(Kn),Xr=K("tick","end"),Sn=oe();se==null&&(se=[]);function Kn(){Fn(),Xr.call("tick",Te),Be<Tt&&(wn.stop(),Xr.call("end",Te))}function Fn(cr){var dr,Gr=se.length,sn;cr===void 0&&(cr=1);for(var yn=0;yn<cr;++yn)for(Be+=(Ir-Be)*nr,Ur.forEach(function(ln){ln(Be)}),dr=0;dr<Gr;++dr)sn=se[dr],sn.fx==null?sn.x+=sn.vx*=Zr:(sn.x=sn.fx,sn.vx=0),sn.fy==null?sn.y+=sn.vy*=Zr:(sn.y=sn.fy,sn.vy=0);return Te}function pn(){for(var cr=0,dr=se.length,Gr;cr<dr;++cr){if(Gr=se[cr],Gr.index=cr,Gr.fx!=null&&(Gr.x=Gr.fx),Gr.fy!=null&&(Gr.y=Gr.fy),isNaN(Gr.x)||isNaN(Gr.y)){var sn=_e*Math.sqrt(.5+cr),yn=cr*zt;Gr.x=sn*Math.cos(yn),Gr.y=sn*Math.sin(yn)}(isNaN(Gr.vx)||isNaN(Gr.vy))&&(Gr.vx=Gr.vy=0)}}function er(cr){return cr.initialize&&cr.initialize(se,Sn),cr}return pn(),Te={tick:Fn,restart:function(){return wn.restart(Kn),Te},stop:function(){return wn.stop(),Te},nodes:function(dr){return arguments.length?(se=dr,pn(),Ur.forEach(er),Te):se},alpha:function(dr){return arguments.length?(Be=+dr,Te):Be},alphaMin:function(dr){return arguments.length?(Tt=+dr,Te):Tt},alphaDecay:function(dr){return arguments.length?(nr=+dr,Te):+nr},alphaTarget:function(dr){return arguments.length?(Ir=+dr,Te):Ir},velocityDecay:function(dr){return arguments.length?(Zr=1-dr,Te):1-Zr},randomSource:function(dr){return arguments.length?(Sn=dr,Ur.forEach(er),Te):Sn},force:function(dr,Gr){return arguments.length>1?(Gr==null?Ur.delete(dr):Ur.set(dr,er(Gr)),Te):Ur.get(dr)},find:function(dr,Gr,sn){var yn=0,ln=se.length,Vn,ca,oa,bn,qn;for(sn==null?sn=1/0:sn*=sn,yn=0;yn<ln;++yn)bn=se[yn],Vn=dr-bn.x,ca=Gr-bn.y,oa=Vn*Vn+ca*ca,oa<sn&&(qn=bn,sn=oa);return qn},on:function(dr,Gr){return arguments.length>1?(Xr.on(dr,Gr),Te):Xr.on(dr)}}}function Pe(){var se,Te,Be,Tt,nr=V(-30),Ir,Zr=1,Ur=1/0,wn=.81;function Xr(pn){var er,cr=se.length,dr=(0,nt.Z)(se,me,Ce).visitAfter(Kn);for(Tt=pn,er=0;er<cr;++er)Te=se[er],dr.visit(Fn)}function Sn(){if(se){var pn,er=se.length,cr;for(Ir=new Array(er),pn=0;pn<er;++pn)cr=se[pn],Ir[cr.index]=+nr(cr,pn,se)}}function Kn(pn){var er=0,cr,dr,Gr=0,sn,yn,ln;if(pn.length){for(sn=yn=ln=0;ln<4;++ln)(cr=pn[ln])&&(dr=Math.abs(cr.value))&&(er+=cr.value,Gr+=dr,sn+=dr*cr.x,yn+=dr*cr.y);pn.x=sn/Gr,pn.y=yn/Gr}else{cr=pn,cr.x=cr.data.x,cr.y=cr.data.y;do er+=Ir[cr.data.index];while(cr=cr.next)}pn.value=er}function Fn(pn,er,cr,dr){if(!pn.value)return!0;var Gr=pn.x-Te.x,sn=pn.y-Te.y,yn=dr-er,ln=Gr*Gr+sn*sn;if(yn*yn/wn<ln)return ln<Ur&&(Gr===0&&(Gr=z(Be),ln+=Gr*Gr),sn===0&&(sn=z(Be),ln+=sn*sn),ln<Zr&&(ln=Math.sqrt(Zr*ln)),Te.vx+=Gr*pn.value*Tt/ln,Te.vy+=sn*pn.value*Tt/ln),!0;if(pn.length||ln>=Ur)return;(pn.data!==Te||pn.next)&&(Gr===0&&(Gr=z(Be),ln+=Gr*Gr),sn===0&&(sn=z(Be),ln+=sn*sn),ln<Zr&&(ln=Math.sqrt(Zr*ln)));do pn.data!==Te&&(yn=Ir[pn.data.index]*Tt/ln,Te.vx+=Gr*yn,Te.vy+=sn*yn);while(pn=pn.next)}return Xr.initialize=function(pn,er){se=pn,Be=er,Sn()},Xr.strength=function(pn){return arguments.length?(nr=typeof pn=="function"?pn:V(+pn),Sn(),Xr):nr},Xr.distanceMin=function(pn){return arguments.length?(Zr=pn*pn,Xr):Math.sqrt(Zr)},Xr.distanceMax=function(pn){return arguments.length?(Ur=pn*pn,Xr):Math.sqrt(Ur)},Xr.theta=function(pn){return arguments.length?(wn=pn*pn,Xr):Math.sqrt(wn)},Xr}function Xt(se,Te,Be){var Tt,nr=V(.1),Ir,Zr;typeof se!="function"&&(se=V(+se)),Te==null&&(Te=0),Be==null&&(Be=0);function Ur(Xr){for(var Sn=0,Kn=Tt.length;Sn<Kn;++Sn){var Fn=Tt[Sn],pn=Fn.x-Te||1e-6,er=Fn.y-Be||1e-6,cr=Math.sqrt(pn*pn+er*er),dr=(Zr[Sn]-cr)*Ir[Sn]*Xr/cr;Fn.vx+=pn*dr,Fn.vy+=er*dr}}function wn(){if(Tt){var Xr,Sn=Tt.length;for(Ir=new Array(Sn),Zr=new Array(Sn),Xr=0;Xr<Sn;++Xr)Zr[Xr]=+se(Tt[Xr],Xr,Tt),Ir[Xr]=isNaN(Zr[Xr])?0:+nr(Tt[Xr],Xr,Tt)}}return Ur.initialize=function(Xr){Tt=Xr,wn()},Ur.strength=function(Xr){return arguments.length?(nr=typeof Xr=="function"?Xr:V(+Xr),wn(),Ur):nr},Ur.radius=function(Xr){return arguments.length?(se=typeof Xr=="function"?Xr:V(+Xr),wn(),Ur):se},Ur.x=function(Xr){return arguments.length?(Te=+Xr,Ur):Te},Ur.y=function(Xr){return arguments.length?(Be=+Xr,Ur):Be},Ur}function ie(se){var Te=V(.1),Be,Tt,nr;typeof se!="function"&&(se=V(se==null?0:+se));function Ir(Ur){for(var wn=0,Xr=Be.length,Sn;wn<Xr;++wn)Sn=Be[wn],Sn.vx+=(nr[wn]-Sn.x)*Tt[wn]*Ur}function Zr(){if(Be){var Ur,wn=Be.length;for(Tt=new Array(wn),nr=new Array(wn),Ur=0;Ur<wn;++Ur)Tt[Ur]=isNaN(nr[Ur]=+se(Be[Ur],Ur,Be))?0:+Te(Be[Ur],Ur,Be)}}return Ir.initialize=function(Ur){Be=Ur,Zr()},Ir.strength=function(Ur){return arguments.length?(Te=typeof Ur=="function"?Ur:V(+Ur),Zr(),Ir):Te},Ir.x=function(Ur){return arguments.length?(se=typeof Ur=="function"?Ur:V(+Ur),Zr(),Ir):se},Ir}function Ie(se){var Te=V(.1),Be,Tt,nr;typeof se!="function"&&(se=V(se==null?0:+se));function Ir(Ur){for(var wn=0,Xr=Be.length,Sn;wn<Xr;++wn)Sn=Be[wn],Sn.vy+=(nr[wn]-Sn.y)*Tt[wn]*Ur}function Zr(){if(Be){var Ur,wn=Be.length;for(Tt=new Array(wn),nr=new Array(wn),Ur=0;Ur<wn;++Ur)Tt[Ur]=isNaN(nr[Ur]=+se(Be[Ur],Ur,Be))?0:+Te(Be[Ur],Ur,Be)}}return Ir.initialize=function(Ur){Be=Ur,Zr()},Ir.strength=function(Ur){return arguments.length?(Te=typeof Ur=="function"?Ur:V(+Ur),Zr(),Ir):Te},Ir.y=function(Ur){return arguments.length?(se=typeof Ur=="function"?Ur:V(+Ur),Zr(),Ir):se},Ir}},48168:function(Se,R,et){var ft=et(39092),nt={};for(var V in ft)ft.hasOwnProperty(V)&&(nt[ft[V]]=V);var z=Se.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var H in z)if(z.hasOwnProperty(H)){if(!("channels"in z[H]))throw new Error("missing channels property: "+H);if(!("labels"in z[H]))throw new Error("missing channel labels property: "+H);if(z[H].labels.length!==z[H].channels)throw new Error("channel and label counts mismatch: "+H);var F=z[H].channels,M=z[H].labels;delete z[H].channels,delete z[H].labels,Object.defineProperty(z[H],"channels",{value:F}),Object.defineProperty(z[H],"labels",{value:M})}z.rgb.hsl=function(y){var x=y[0]/255,p=y[1]/255,_=y[2]/255,E=Math.min(x,p,_),b=Math.max(x,p,_),k=b-E,N,g,v;return b===E?N=0:x===b?N=(p-_)/k:p===b?N=2+(_-x)/k:_===b&&(N=4+(x-p)/k),N=Math.min(N*60,360),N<0&&(N+=360),v=(E+b)/2,b===E?g=0:v<=.5?g=k/(b+E):g=k/(2-b-E),[N,g*100,v*100]},z.rgb.hsv=function(y){var x,p,_,E,b,k=y[0]/255,N=y[1]/255,g=y[2]/255,v=Math.max(k,N,g),K=v-Math.min(k,N,g),B=function(G){return(v-G)/6/K+1/2};return K===0?E=b=0:(b=K/v,x=B(k),p=B(N),_=B(g),k===v?E=_-p:N===v?E=1/3+x-_:g===v&&(E=2/3+p-x),E<0?E+=1:E>1&&(E-=1)),[E*360,b*100,v*100]},z.rgb.hwb=function(y){var x=y[0],p=y[1],_=y[2],E=z.rgb.hsl(y)[0],b=1/255*Math.min(x,Math.min(p,_));return _=1-1/255*Math.max(x,Math.max(p,_)),[E,b*100,_*100]},z.rgb.cmyk=function(y){var x=y[0]/255,p=y[1]/255,_=y[2]/255,E,b,k,N;return N=Math.min(1-x,1-p,1-_),E=(1-x-N)/(1-N)||0,b=(1-p-N)/(1-N)||0,k=(1-_-N)/(1-N)||0,[E*100,b*100,k*100,N*100]};function A(y,x){return Math.pow(y[0]-x[0],2)+Math.pow(y[1]-x[1],2)+Math.pow(y[2]-x[2],2)}z.rgb.keyword=function(y){var x=nt[y];if(x)return x;var p=1/0,_;for(var E in ft)if(ft.hasOwnProperty(E)){var b=ft[E],k=A(y,b);k<p&&(p=k,_=E)}return _},z.keyword.rgb=function(y){return ft[y]},z.rgb.xyz=function(y){var x=y[0]/255,p=y[1]/255,_=y[2]/255;x=x>.04045?Math.pow((x+.055)/1.055,2.4):x/12.92,p=p>.04045?Math.pow((p+.055)/1.055,2.4):p/12.92,_=_>.04045?Math.pow((_+.055)/1.055,2.4):_/12.92;var E=x*.4124+p*.3576+_*.1805,b=x*.2126+p*.7152+_*.0722,k=x*.0193+p*.1192+_*.9505;return[E*100,b*100,k*100]},z.rgb.lab=function(y){var x=z.rgb.xyz(y),p=x[0],_=x[1],E=x[2],b,k,N;return p/=95.047,_/=100,E/=108.883,p=p>.008856?Math.pow(p,1/3):7.787*p+16/116,_=_>.008856?Math.pow(_,1/3):7.787*_+16/116,E=E>.008856?Math.pow(E,1/3):7.787*E+16/116,b=116*_-16,k=500*(p-_),N=200*(_-E),[b,k,N]},z.hsl.rgb=function(y){var x=y[0]/360,p=y[1]/100,_=y[2]/100,E,b,k,N,g;if(p===0)return g=_*255,[g,g,g];_<.5?b=_*(1+p):b=_+p-_*p,E=2*_-b,N=[0,0,0];for(var v=0;v<3;v++)k=x+1/3*-(v-1),k<0&&k++,k>1&&k--,6*k<1?g=E+(b-E)*6*k:2*k<1?g=b:3*k<2?g=E+(b-E)*(2/3-k)*6:g=E,N[v]=g*255;return N},z.hsl.hsv=function(y){var x=y[0],p=y[1]/100,_=y[2]/100,E=p,b=Math.max(_,.01),k,N;return _*=2,p*=_<=1?_:2-_,E*=b<=1?b:2-b,N=(_+p)/2,k=_===0?2*E/(b+E):2*p/(_+p),[x,k*100,N*100]},z.hsv.rgb=function(y){var x=y[0]/60,p=y[1]/100,_=y[2]/100,E=Math.floor(x)%6,b=x-Math.floor(x),k=255*_*(1-p),N=255*_*(1-p*b),g=255*_*(1-p*(1-b));switch(_*=255,E){case 0:return[_,g,k];case 1:return[N,_,k];case 2:return[k,_,g];case 3:return[k,N,_];case 4:return[g,k,_];case 5:return[_,k,N]}},z.hsv.hsl=function(y){var x=y[0],p=y[1]/100,_=y[2]/100,E=Math.max(_,.01),b,k,N;return N=(2-p)*_,b=(2-p)*E,k=p*E,k/=b<=1?b:2-b,k=k||0,N/=2,[x,k*100,N*100]},z.hwb.rgb=function(y){var x=y[0]/360,p=y[1]/100,_=y[2]/100,E=p+_,b,k,N,g;E>1&&(p/=E,_/=E),b=Math.floor(6*x),k=1-_,N=6*x-b,b&1&&(N=1-N),g=p+N*(k-p);var v,K,B;switch(b){default:case 6:case 0:v=k,K=g,B=p;break;case 1:v=g,K=k,B=p;break;case 2:v=p,K=k,B=g;break;case 3:v=p,K=g,B=k;break;case 4:v=g,K=p,B=k;break;case 5:v=k,K=p,B=g;break}return[v*255,K*255,B*255]},z.cmyk.rgb=function(y){var x=y[0]/100,p=y[1]/100,_=y[2]/100,E=y[3]/100,b,k,N;return b=1-Math.min(1,x*(1-E)+E),k=1-Math.min(1,p*(1-E)+E),N=1-Math.min(1,_*(1-E)+E),[b*255,k*255,N*255]},z.xyz.rgb=function(y){var x=y[0]/100,p=y[1]/100,_=y[2]/100,E,b,k;return E=x*3.2406+p*-1.5372+_*-.4986,b=x*-.9689+p*1.8758+_*.0415,k=x*.0557+p*-.204+_*1.057,E=E>.0031308?1.055*Math.pow(E,1/2.4)-.055:E*12.92,b=b>.0031308?1.055*Math.pow(b,1/2.4)-.055:b*12.92,k=k>.0031308?1.055*Math.pow(k,1/2.4)-.055:k*12.92,E=Math.min(Math.max(0,E),1),b=Math.min(Math.max(0,b),1),k=Math.min(Math.max(0,k),1),[E*255,b*255,k*255]},z.xyz.lab=function(y){var x=y[0],p=y[1],_=y[2],E,b,k;return x/=95.047,p/=100,_/=108.883,x=x>.008856?Math.pow(x,1/3):7.787*x+16/116,p=p>.008856?Math.pow(p,1/3):7.787*p+16/116,_=_>.008856?Math.pow(_,1/3):7.787*_+16/116,E=116*p-16,b=500*(x-p),k=200*(p-_),[E,b,k]},z.lab.xyz=function(y){var x=y[0],p=y[1],_=y[2],E,b,k;b=(x+16)/116,E=p/500+b,k=b-_/200;var N=Math.pow(b,3),g=Math.pow(E,3),v=Math.pow(k,3);return b=N>.008856?N:(b-16/116)/7.787,E=g>.008856?g:(E-16/116)/7.787,k=v>.008856?v:(k-16/116)/7.787,E*=95.047,b*=100,k*=108.883,[E,b,k]},z.lab.lch=function(y){var x=y[0],p=y[1],_=y[2],E,b,k;return E=Math.atan2(_,p),b=E*360/2/Math.PI,b<0&&(b+=360),k=Math.sqrt(p*p+_*_),[x,k,b]},z.lch.lab=function(y){var x=y[0],p=y[1],_=y[2],E,b,k;return k=_/360*2*Math.PI,E=p*Math.cos(k),b=p*Math.sin(k),[x,E,b]},z.rgb.ansi16=function(y){var x=y[0],p=y[1],_=y[2],E=1 in arguments?arguments[1]:z.rgb.hsv(y)[2];if(E=Math.round(E/50),E===0)return 30;var b=30+(Math.round(_/255)<<2|Math.round(p/255)<<1|Math.round(x/255));return E===2&&(b+=60),b},z.hsv.ansi16=function(y){return z.rgb.ansi16(z.hsv.rgb(y),y[2])},z.rgb.ansi256=function(y){var x=y[0],p=y[1],_=y[2];if(x===p&&p===_)return x<8?16:x>248?231:Math.round((x-8)/247*24)+232;var E=16+36*Math.round(x/255*5)+6*Math.round(p/255*5)+Math.round(_/255*5);return E},z.ansi16.rgb=function(y){var x=y%10;if(x===0||x===7)return y>50&&(x+=3.5),x=x/10.5*255,[x,x,x];var p=(~~(y>50)+1)*.5,_=(x&1)*p*255,E=(x>>1&1)*p*255,b=(x>>2&1)*p*255;return[_,E,b]},z.ansi256.rgb=function(y){if(y>=232){var x=(y-232)*10+8;return[x,x,x]}y-=16;var p,_=Math.floor(y/36)/5*255,E=Math.floor((p=y%36)/6)/5*255,b=p%6/5*255;return[_,E,b]},z.rgb.hex=function(y){var x=((Math.round(y[0])&255)<<16)+((Math.round(y[1])&255)<<8)+(Math.round(y[2])&255),p=x.toString(16).toUpperCase();return"000000".substring(p.length)+p},z.hex.rgb=function(y){var x=y.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!x)return[0,0,0];var p=x[0];x[0].length===3&&(p=p.split("").map(function(N){return N+N}).join(""));var _=parseInt(p,16),E=_>>16&255,b=_>>8&255,k=_&255;return[E,b,k]},z.rgb.hcg=function(y){var x=y[0]/255,p=y[1]/255,_=y[2]/255,E=Math.max(Math.max(x,p),_),b=Math.min(Math.min(x,p),_),k=E-b,N,g;return k<1?N=b/(1-k):N=0,k<=0?g=0:E===x?g=(p-_)/k%6:E===p?g=2+(_-x)/k:g=4+(x-p)/k+4,g/=6,g%=1,[g*360,k*100,N*100]},z.hsl.hcg=function(y){var x=y[1]/100,p=y[2]/100,_=1,E=0;return p<.5?_=2*x*p:_=2*x*(1-p),_<1&&(E=(p-.5*_)/(1-_)),[y[0],_*100,E*100]},z.hsv.hcg=function(y){var x=y[1]/100,p=y[2]/100,_=x*p,E=0;return _<1&&(E=(p-_)/(1-_)),[y[0],_*100,E*100]},z.hcg.rgb=function(y){var x=y[0]/360,p=y[1]/100,_=y[2]/100;if(p===0)return[_*255,_*255,_*255];var E=[0,0,0],b=x%1*6,k=b%1,N=1-k,g=0;switch(Math.floor(b)){case 0:E[0]=1,E[1]=k,E[2]=0;break;case 1:E[0]=N,E[1]=1,E[2]=0;break;case 2:E[0]=0,E[1]=1,E[2]=k;break;case 3:E[0]=0,E[1]=N,E[2]=1;break;case 4:E[0]=k,E[1]=0,E[2]=1;break;default:E[0]=1,E[1]=0,E[2]=N}return g=(1-p)*_,[(p*E[0]+g)*255,(p*E[1]+g)*255,(p*E[2]+g)*255]},z.hcg.hsv=function(y){var x=y[1]/100,p=y[2]/100,_=x+p*(1-x),E=0;return _>0&&(E=x/_),[y[0],E*100,_*100]},z.hcg.hsl=function(y){var x=y[1]/100,p=y[2]/100,_=p*(1-x)+.5*x,E=0;return _>0&&_<.5?E=x/(2*_):_>=.5&&_<1&&(E=x/(2*(1-_))),[y[0],E*100,_*100]},z.hcg.hwb=function(y){var x=y[1]/100,p=y[2]/100,_=x+p*(1-x);return[y[0],(_-x)*100,(1-_)*100]},z.hwb.hcg=function(y){var x=y[1]/100,p=y[2]/100,_=1-p,E=_-x,b=0;return E<1&&(b=(_-E)/(1-E)),[y[0],E*100,b*100]},z.apple.rgb=function(y){return[y[0]/65535*255,y[1]/65535*255,y[2]/65535*255]},z.rgb.apple=function(y){return[y[0]/255*65535,y[1]/255*65535,y[2]/255*65535]},z.gray.rgb=function(y){return[y[0]/100*255,y[0]/100*255,y[0]/100*255]},z.gray.hsl=z.gray.hsv=function(y){return[0,0,y[0]]},z.gray.hwb=function(y){return[0,100,y[0]]},z.gray.cmyk=function(y){return[0,0,0,y[0]]},z.gray.lab=function(y){return[y[0],0,0]},z.gray.hex=function(y){var x=Math.round(y[0]/100*255)&255,p=(x<<16)+(x<<8)+x,_=p.toString(16).toUpperCase();return"000000".substring(_.length)+_},z.rgb.gray=function(y){var x=(y[0]+y[1]+y[2])/3;return[x/255*100]}},12085:function(Se,R,et){var ft=et(48168),nt=et(4111),V={},z=Object.keys(ft);function H(M){var A=function(y){return y==null?y:(arguments.length>1&&(y=Array.prototype.slice.call(arguments)),M(y))};return"conversion"in M&&(A.conversion=M.conversion),A}function F(M){var A=function(y){if(y==null)return y;arguments.length>1&&(y=Array.prototype.slice.call(arguments));var x=M(y);if(typeof x=="object")for(var p=x.length,_=0;_<p;_++)x[_]=Math.round(x[_]);return x};return"conversion"in M&&(A.conversion=M.conversion),A}z.forEach(function(M){V[M]={},Object.defineProperty(V[M],"channels",{value:ft[M].channels}),Object.defineProperty(V[M],"labels",{value:ft[M].labels});var A=nt(M),y=Object.keys(A);y.forEach(function(x){var p=A[x];V[M][x]=F(p),V[M][x].raw=H(p)})}),Se.exports=V},39092:function(Se){"use strict";Se.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},4111:function(Se,R,et){var ft=et(48168);function nt(){for(var F={},M=Object.keys(ft),A=M.length,y=0;y<A;y++)F[M[y]]={distance:-1,parent:null};return F}function V(F){var M=nt(),A=[F];for(M[F].distance=0;A.length;)for(var y=A.pop(),x=Object.keys(ft[y]),p=x.length,_=0;_<p;_++){var E=x[_],b=M[E];b.distance===-1&&(b.distance=M[y].distance+1,b.parent=y,A.unshift(E))}return M}function z(F,M){return function(A){return M(F(A))}}function H(F,M){for(var A=[M[F].parent,F],y=ft[M[F].parent][F],x=M[F].parent;M[x].parent;)A.unshift(M[x].parent),y=z(ft[M[x].parent][x],y),x=M[x].parent;return y.conversion=A,y}Se.exports=function(F){for(var M=V(F),A={},y=Object.keys(M),x=y.length,p=0;p<x;p++){var _=y[p],E=M[_];E.parent!==null&&(A[_]=H(_,M))}return A}},8874:function(Se){"use strict";Se.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},19818:function(Se,R,et){var ft=et(8874),nt=et(86851),V=Object.hasOwnProperty,z=Object.create(null);for(var H in ft)V.call(ft,H)&&(z[ft[H]]=H);var F=Se.exports={to:{},get:{}};F.get=function(y){var x=y.substring(0,3).toLowerCase(),p,_;switch(x){case"hsl":p=F.get.hsl(y),_="hsl";break;case"hwb":p=F.get.hwb(y),_="hwb";break;default:p=F.get.rgb(y),_="rgb";break}return p?{model:_,value:p}:null},F.get.rgb=function(y){if(!y)return null;var x=/^#([a-f0-9]{3,4})$/i,p=/^#([a-f0-9]{6})([a-f0-9]{2})?$/i,_=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,E=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*,?\s*([+-]?[\d\.]+)\%\s*(?:[,|\/]\s*([+-]?[\d\.]+)(%?)\s*)?\)$/,b=/^(\w+)$/,k=[0,0,0,1],N,g,v;if(N=y.match(p)){for(v=N[2],N=N[1],g=0;g<3;g++){var K=g*2;k[g]=parseInt(N.slice(K,K+2),16)}v&&(k[3]=parseInt(v,16)/255)}else if(N=y.match(x)){for(N=N[1],v=N[3],g=0;g<3;g++)k[g]=parseInt(N[g]+N[g],16);v&&(k[3]=parseInt(v+v,16)/255)}else if(N=y.match(_)){for(g=0;g<3;g++)k[g]=parseInt(N[g+1],0);N[4]&&(N[5]?k[3]=parseFloat(N[4])*.01:k[3]=parseFloat(N[4]))}else if(N=y.match(E)){for(g=0;g<3;g++)k[g]=Math.round(parseFloat(N[g+1])*2.55);N[4]&&(N[5]?k[3]=parseFloat(N[4])*.01:k[3]=parseFloat(N[4]))}else return(N=y.match(b))?N[1]==="transparent"?[0,0,0,0]:V.call(ft,N[1])?(k=ft[N[1]],k[3]=1,k):null:null;for(g=0;g<3;g++)k[g]=M(k[g],0,255);return k[3]=M(k[3],0,1),k},F.get.hsl=function(y){if(!y)return null;var x=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d\.]+)%\s*,?\s*([+-]?[\d\.]+)%\s*(?:[,|\/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,p=y.match(x);if(p){var _=parseFloat(p[4]),E=(parseFloat(p[1])%360+360)%360,b=M(parseFloat(p[2]),0,100),k=M(parseFloat(p[3]),0,100),N=M(isNaN(_)?1:_,0,1);return[E,b,k,N]}return null},F.get.hwb=function(y){if(!y)return null;var x=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,p=y.match(x);if(p){var _=parseFloat(p[4]),E=(parseFloat(p[1])%360+360)%360,b=M(parseFloat(p[2]),0,100),k=M(parseFloat(p[3]),0,100),N=M(isNaN(_)?1:_,0,1);return[E,b,k,N]}return null},F.to.hex=function(){var y=nt(arguments);return"#"+A(y[0])+A(y[1])+A(y[2])+(y[3]<1?A(Math.round(y[3]*255)):"")},F.to.rgb=function(){var y=nt(arguments);return y.length<4||y[3]===1?"rgb("+Math.round(y[0])+", "+Math.round(y[1])+", "+Math.round(y[2])+")":"rgba("+Math.round(y[0])+", "+Math.round(y[1])+", "+Math.round(y[2])+", "+y[3]+")"},F.to.rgb.percent=function(){var y=nt(arguments),x=Math.round(y[0]/255*100),p=Math.round(y[1]/255*100),_=Math.round(y[2]/255*100);return y.length<4||y[3]===1?"rgb("+x+"%, "+p+"%, "+_+"%)":"rgba("+x+"%, "+p+"%, "+_+"%, "+y[3]+")"},F.to.hsl=function(){var y=nt(arguments);return y.length<4||y[3]===1?"hsl("+y[0]+", "+y[1]+"%, "+y[2]+"%)":"hsla("+y[0]+", "+y[1]+"%, "+y[2]+"%, "+y[3]+")"},F.to.hwb=function(){var y=nt(arguments),x="";return y.length>=4&&y[3]!==1&&(x=", "+y[3]),"hwb("+y[0]+", "+y[1]+"%, "+y[2]+"%"+x+")"},F.to.keyword=function(y){return z[y.slice(0,3)]};function M(y,x,p){return Math.min(Math.max(x,y),p)}function A(y){var x=Math.round(y).toString(16).toUpperCase();return x.length<2?"0"+x:x}},6767:function(Se,R,et){"use strict";var ft=et(19818),nt=et(12085),V=[].slice,z=["keyword","gray","hex"],H={};Object.keys(nt).forEach(function(b){H[V.call(nt[b].labels).sort().join("")]=b});var F={};function M(b,k){if(!(this instanceof M))return new M(b,k);if(k&&k in z&&(k=null),k&&!(k in nt))throw new Error("Unknown model: "+k);var N,g;if(b==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(b instanceof M)this.model=b.model,this.color=b.color.slice(),this.valpha=b.valpha;else if(typeof b=="string"){var v=ft.get(b);if(v===null)throw new Error("Unable to parse color from string: "+b);this.model=v.model,g=nt[this.model].channels,this.color=v.value.slice(0,g),this.valpha=typeof v.value[g]=="number"?v.value[g]:1}else if(b.length){this.model=k||"rgb",g=nt[this.model].channels;var K=V.call(b,0,g);this.color=E(K,g),this.valpha=typeof b[g]=="number"?b[g]:1}else if(typeof b=="number")b&=16777215,this.model="rgb",this.color=[b>>16&255,b>>8&255,b&255],this.valpha=1;else{this.valpha=1;var B=Object.keys(b);"alpha"in b&&(B.splice(B.indexOf("alpha"),1),this.valpha=typeof b.alpha=="number"?b.alpha:0);var G=B.sort().join("");if(!(G in H))throw new Error("Unable to parse color from object: "+JSON.stringify(b));this.model=H[G];var Y=nt[this.model].labels,j=[];for(N=0;N<Y.length;N++)j.push(b[Y[N]]);this.color=E(j)}if(F[this.model])for(g=nt[this.model].channels,N=0;N<g;N++){var Q=F[this.model][N];Q&&(this.color[N]=Q(this.color[N]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}M.prototype={toString:function(){return this.string()},toJSON:function(){return this[this.model]()},string:function(b){var k=this.model in ft.to?this:this.rgb();k=k.round(typeof b=="number"?b:1);var N=k.valpha===1?k.color:k.color.concat(this.valpha);return ft.to[k.model](N)},percentString:function(b){var k=this.rgb().round(typeof b=="number"?b:1),N=k.valpha===1?k.color:k.color.concat(this.valpha);return ft.to.rgb.percent(N)},array:function(){return this.valpha===1?this.color.slice():this.color.concat(this.valpha)},object:function(){for(var b={},k=nt[this.model].channels,N=nt[this.model].labels,g=0;g<k;g++)b[N[g]]=this.color[g];return this.valpha!==1&&(b.alpha=this.valpha),b},unitArray:function(){var b=this.rgb().color;return b[0]/=255,b[1]/=255,b[2]/=255,this.valpha!==1&&b.push(this.valpha),b},unitObject:function(){var b=this.rgb().object();return b.r/=255,b.g/=255,b.b/=255,this.valpha!==1&&(b.alpha=this.valpha),b},round:function(b){return b=Math.max(b||0,0),new M(this.color.map(y(b)).concat(this.valpha),this.model)},alpha:function(b){return arguments.length?new M(this.color.concat(Math.max(0,Math.min(1,b))),this.model):this.valpha},red:x("rgb",0,p(255)),green:x("rgb",1,p(255)),blue:x("rgb",2,p(255)),hue:x(["hsl","hsv","hsl","hwb","hcg"],0,function(b){return(b%360+360)%360}),saturationl:x("hsl",1,p(100)),lightness:x("hsl",2,p(100)),saturationv:x("hsv",1,p(100)),value:x("hsv",2,p(100)),chroma:x("hcg",1,p(100)),gray:x("hcg",2,p(100)),white:x("hwb",1,p(100)),wblack:x("hwb",2,p(100)),cyan:x("cmyk",0,p(100)),magenta:x("cmyk",1,p(100)),yellow:x("cmyk",2,p(100)),black:x("cmyk",3,p(100)),x:x("xyz",0,p(100)),y:x("xyz",1,p(100)),z:x("xyz",2,p(100)),l:x("lab",0,p(100)),a:x("lab",1),b:x("lab",2),keyword:function(b){return arguments.length?new M(b):nt[this.model].keyword(this.color)},hex:function(b){return arguments.length?new M(b):ft.to.hex(this.rgb().round().color)},rgbNumber:function(){var b=this.rgb().color;return(b[0]&255)<<16|(b[1]&255)<<8|b[2]&255},luminosity:function(){for(var b=this.rgb().color,k=[],N=0;N<b.length;N++){var g=b[N]/255;k[N]=g<=.03928?g/12.92:Math.pow((g+.055)/1.055,2.4)}return .2126*k[0]+.7152*k[1]+.0722*k[2]},contrast:function(b){var k=this.luminosity(),N=b.luminosity();return k>N?(k+.05)/(N+.05):(N+.05)/(k+.05)},level:function(b){var k=this.contrast(b);return k>=7.1?"AAA":k>=4.5?"AA":""},isDark:function(){var b=this.rgb().color,k=(b[0]*299+b[1]*587+b[2]*114)/1e3;return k<128},isLight:function(){return!this.isDark()},negate:function(){for(var b=this.rgb(),k=0;k<3;k++)b.color[k]=255-b.color[k];return b},lighten:function(b){var k=this.hsl();return k.color[2]+=k.color[2]*b,k},darken:function(b){var k=this.hsl();return k.color[2]-=k.color[2]*b,k},saturate:function(b){var k=this.hsl();return k.color[1]+=k.color[1]*b,k},desaturate:function(b){var k=this.hsl();return k.color[1]-=k.color[1]*b,k},whiten:function(b){var k=this.hwb();return k.color[1]+=k.color[1]*b,k},blacken:function(b){var k=this.hwb();return k.color[2]+=k.color[2]*b,k},grayscale:function(){var b=this.rgb().color,k=b[0]*.3+b[1]*.59+b[2]*.11;return M.rgb(k,k,k)},fade:function(b){return this.alpha(this.valpha-this.valpha*b)},opaquer:function(b){return this.alpha(this.valpha+this.valpha*b)},rotate:function(b){var k=this.hsl(),N=k.color[0];return N=(N+b)%360,N=N<0?360+N:N,k.color[0]=N,k},mix:function(b,k){if(!b||!b.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof b);var N=b.rgb(),g=this.rgb(),v=k===void 0?.5:k,K=2*v-1,B=N.alpha()-g.alpha(),G=((K*B===-1?K:(K+B)/(1+K*B))+1)/2,Y=1-G;return M.rgb(G*N.red()+Y*g.red(),G*N.green()+Y*g.green(),G*N.blue()+Y*g.blue(),N.alpha()*v+g.alpha()*(1-v))}},Object.keys(nt).forEach(function(b){if(z.indexOf(b)===-1){var k=nt[b].channels;M.prototype[b]=function(){if(this.model===b)return new M(this);if(arguments.length)return new M(arguments,b);var N=typeof arguments[k]=="number"?k:this.valpha;return new M(_(nt[this.model][b].raw(this.color)).concat(N),b)},M[b]=function(N){return typeof N=="number"&&(N=E(V.call(arguments),k)),new M(N,b)}}});function A(b,k){return Number(b.toFixed(k))}function y(b){return function(k){return A(k,b)}}function x(b,k,N){return b=Array.isArray(b)?b:[b],b.forEach(function(g){(F[g]||(F[g]=[]))[k]=N}),b=b[0],function(g){var v;return arguments.length?(N&&(g=N(g)),v=this[b](),v.color[k]=g,v):(v=this[b]().color[k],N&&(v=N(v)),v)}}function p(b){return function(k){return Math.max(0,Math.min(b,k))}}function _(b){return Array.isArray(b)?b:[b]}function E(b,k){for(var N=0;N<k;N++)typeof b[N]!="number"&&(b[N]=0);return b}Se.exports=M},71829:function(Se,R,et){"use strict";et.r(R),et.d(R,{quadtree:function(){return ft.Z}});var ft=et(47148)},47148:function(Se,R,et){"use strict";et.d(R,{Z:function(){return K}});function ft(j){const Q=+this._x.call(null,j),Z=+this._y.call(null,j);return nt(this.cover(Q,Z),Q,Z,j)}function nt(j,Q,Z,rt){if(isNaN(Q)||isNaN(Z))return j;var ut,ht=j._root,kt={data:rt},At=j._x0,Ht=j._y0,Rt=j._x1,le=j._y1,dt,ot,yt,Lt,Ot,Wt,Jt,De;if(!ht)return j._root=kt,j;for(;ht.length;)if((Ot=Q>=(dt=(At+Rt)/2))?At=dt:Rt=dt,(Wt=Z>=(ot=(Ht+le)/2))?Ht=ot:le=ot,ut=ht,!(ht=ht[Jt=Wt<<1|Ot]))return ut[Jt]=kt,j;if(yt=+j._x.call(null,ht.data),Lt=+j._y.call(null,ht.data),Q===yt&&Z===Lt)return kt.next=ht,ut?ut[Jt]=kt:j._root=kt,j;do ut=ut?ut[Jt]=new Array(4):j._root=new Array(4),(Ot=Q>=(dt=(At+Rt)/2))?At=dt:Rt=dt,(Wt=Z>=(ot=(Ht+le)/2))?Ht=ot:le=ot;while((Jt=Wt<<1|Ot)===(De=(Lt>=ot)<<1|yt>=dt));return ut[De]=ht,ut[Jt]=kt,j}function V(j){var Q,Z,rt=j.length,ut,ht,kt=new Array(rt),At=new Array(rt),Ht=1/0,Rt=1/0,le=-1/0,dt=-1/0;for(Z=0;Z<rt;++Z)isNaN(ut=+this._x.call(null,Q=j[Z]))||isNaN(ht=+this._y.call(null,Q))||(kt[Z]=ut,At[Z]=ht,ut<Ht&&(Ht=ut),ut>le&&(le=ut),ht<Rt&&(Rt=ht),ht>dt&&(dt=ht));if(Ht>le||Rt>dt)return this;for(this.cover(Ht,Rt).cover(le,dt),Z=0;Z<rt;++Z)nt(this,kt[Z],At[Z],j[Z]);return this}function z(j,Q){if(isNaN(j=+j)||isNaN(Q=+Q))return this;var Z=this._x0,rt=this._y0,ut=this._x1,ht=this._y1;if(isNaN(Z))ut=(Z=Math.floor(j))+1,ht=(rt=Math.floor(Q))+1;else{for(var kt=ut-Z||1,At=this._root,Ht,Rt;Z>j||j>=ut||rt>Q||Q>=ht;)switch(Rt=(Q<rt)<<1|j<Z,Ht=new Array(4),Ht[Rt]=At,At=Ht,kt*=2,Rt){case 0:ut=Z+kt,ht=rt+kt;break;case 1:Z=ut-kt,ht=rt+kt;break;case 2:ut=Z+kt,rt=ht-kt;break;case 3:Z=ut-kt,rt=ht-kt;break}this._root&&this._root.length&&(this._root=At)}return this._x0=Z,this._y0=rt,this._x1=ut,this._y1=ht,this}function H(){var j=[];return this.visit(function(Q){if(!Q.length)do j.push(Q.data);while(Q=Q.next)}),j}function F(j){return arguments.length?this.cover(+j[0][0],+j[0][1]).cover(+j[1][0],+j[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function M(j,Q,Z,rt,ut){this.node=j,this.x0=Q,this.y0=Z,this.x1=rt,this.y1=ut}function A(j,Q,Z){var rt,ut=this._x0,ht=this._y0,kt,At,Ht,Rt,le=this._x1,dt=this._y1,ot=[],yt=this._root,Lt,Ot;for(yt&&ot.push(new M(yt,ut,ht,le,dt)),Z==null?Z=1/0:(ut=j-Z,ht=Q-Z,le=j+Z,dt=Q+Z,Z*=Z);Lt=ot.pop();)if(!(!(yt=Lt.node)||(kt=Lt.x0)>le||(At=Lt.y0)>dt||(Ht=Lt.x1)<ut||(Rt=Lt.y1)<ht))if(yt.length){var Wt=(kt+Ht)/2,Jt=(At+Rt)/2;ot.push(new M(yt[3],Wt,Jt,Ht,Rt),new M(yt[2],kt,Jt,Wt,Rt),new M(yt[1],Wt,At,Ht,Jt),new M(yt[0],kt,At,Wt,Jt)),(Ot=(Q>=Jt)<<1|j>=Wt)&&(Lt=ot[ot.length-1],ot[ot.length-1]=ot[ot.length-1-Ot],ot[ot.length-1-Ot]=Lt)}else{var De=j-+this._x.call(null,yt.data),te=Q-+this._y.call(null,yt.data),oe=De*De+te*te;if(oe<Z){var me=Math.sqrt(Z=oe);ut=j-me,ht=Q-me,le=j+me,dt=Q+me,rt=yt.data}}return rt}function y(j){if(isNaN(le=+this._x.call(null,j))||isNaN(dt=+this._y.call(null,j)))return this;var Q,Z=this._root,rt,ut,ht,kt=this._x0,At=this._y0,Ht=this._x1,Rt=this._y1,le,dt,ot,yt,Lt,Ot,Wt,Jt;if(!Z)return this;if(Z.length)for(;;){if((Lt=le>=(ot=(kt+Ht)/2))?kt=ot:Ht=ot,(Ot=dt>=(yt=(At+Rt)/2))?At=yt:Rt=yt,Q=Z,!(Z=Z[Wt=Ot<<1|Lt]))return this;if(!Z.length)break;(Q[Wt+1&3]||Q[Wt+2&3]||Q[Wt+3&3])&&(rt=Q,Jt=Wt)}for(;Z.data!==j;)if(ut=Z,!(Z=Z.next))return this;return(ht=Z.next)&&delete Z.next,ut?(ht?ut.next=ht:delete ut.next,this):Q?(ht?Q[Wt]=ht:delete Q[Wt],(Z=Q[0]||Q[1]||Q[2]||Q[3])&&Z===(Q[3]||Q[2]||Q[1]||Q[0])&&!Z.length&&(rt?rt[Jt]=Z:this._root=Z),this):(this._root=ht,this)}function x(j){for(var Q=0,Z=j.length;Q<Z;++Q)this.remove(j[Q]);return this}function p(){return this._root}function _(){var j=0;return this.visit(function(Q){if(!Q.length)do++j;while(Q=Q.next)}),j}function E(j){var Q=[],Z,rt=this._root,ut,ht,kt,At,Ht;for(rt&&Q.push(new M(rt,this._x0,this._y0,this._x1,this._y1));Z=Q.pop();)if(!j(rt=Z.node,ht=Z.x0,kt=Z.y0,At=Z.x1,Ht=Z.y1)&&rt.length){var Rt=(ht+At)/2,le=(kt+Ht)/2;(ut=rt[3])&&Q.push(new M(ut,Rt,le,At,Ht)),(ut=rt[2])&&Q.push(new M(ut,ht,le,Rt,Ht)),(ut=rt[1])&&Q.push(new M(ut,Rt,kt,At,le)),(ut=rt[0])&&Q.push(new M(ut,ht,kt,Rt,le))}return this}function b(j){var Q=[],Z=[],rt;for(this._root&&Q.push(new M(this._root,this._x0,this._y0,this._x1,this._y1));rt=Q.pop();){var ut=rt.node;if(ut.length){var ht,kt=rt.x0,At=rt.y0,Ht=rt.x1,Rt=rt.y1,le=(kt+Ht)/2,dt=(At+Rt)/2;(ht=ut[0])&&Q.push(new M(ht,kt,At,le,dt)),(ht=ut[1])&&Q.push(new M(ht,le,At,Ht,dt)),(ht=ut[2])&&Q.push(new M(ht,kt,dt,le,Rt)),(ht=ut[3])&&Q.push(new M(ht,le,dt,Ht,Rt))}Z.push(rt)}for(;rt=Z.pop();)j(rt.node,rt.x0,rt.y0,rt.x1,rt.y1);return this}function k(j){return j[0]}function N(j){return arguments.length?(this._x=j,this):this._x}function g(j){return j[1]}function v(j){return arguments.length?(this._y=j,this):this._y}function K(j,Q,Z){var rt=new B(Q==null?k:Q,Z==null?g:Z,NaN,NaN,NaN,NaN);return j==null?rt:rt.addAll(j)}function B(j,Q,Z,rt,ut,ht){this._x=j,this._y=Q,this._x0=Z,this._y0=rt,this._x1=ut,this._y1=ht,this._root=void 0}function G(j){for(var Q={data:j.data},Z=Q;j=j.next;)Z=Z.next={data:j.data};return Q}var Y=K.prototype=B.prototype;Y.copy=function(){var j=new B(this._x,this._y,this._x0,this._y0,this._x1,this._y1),Q=this._root,Z,rt;if(!Q)return j;if(!Q.length)return j._root=G(Q),j;for(Z=[{source:Q,target:j._root=new Array(4)}];Q=Z.pop();)for(var ut=0;ut<4;++ut)(rt=Q.source[ut])&&(rt.length?Z.push({source:rt,target:Q.target[ut]=new Array(4)}):Q.target[ut]=G(rt));return j},Y.add=ft,Y.addAll=V,Y.cover=z,Y.data=H,Y.extent=F,Y.find=A,Y.remove=y,Y.removeAll=x,Y.root=p,Y.size=_,Y.visit=E,Y.visitAfter=b,Y.x=N,Y.y=v},31969:function(Se,R,et){"use strict";et.r(R),et.d(R,{BRIDGE_GRAPH_NAME:function(){return H},GraphType:function(){return A},HierarchyNodeType:function(){return y},InclusionType:function(){return M},LAYOUT_CONFIG:function(){return ft},NodeType:function(){return F},ROOT_NAME:function(){return z},buildGraph:function(){return mr},flatGraph:function(){return $r},getEdges:function(){return Qr},mergeConfig:function(){return nt}});const ft={graph:{meta:{rankDir:"TB",nodeSep:50,rankSep:50,edgeSep:5,align:void 0}},subScene:{meta:{paddingTop:20,paddingBottom:20,paddingLeft:20,paddingRight:20,labelHeight:20}},nodeSize:{meta:{width:100,maxLabelWidth:0,height:20},node:{width:80,height:20,labelOffset:10,maxLabelWidth:40},bridge:{width:5,height:5,radius:2,labelOffset:0}}};function nt(d={},S=ft){var O,X,at,st;const pt=JSON.parse(JSON.stringify(S)),xt=((O=d==null?void 0:d.graph)===null||O===void 0?void 0:O.meta)||{},Mt=((X=d==null?void 0:d.subScene)===null||X===void 0?void 0:X.meta)||{},Ft=((at=d==null?void 0:d.nodeSize)===null||at===void 0?void 0:at.meta)||{},re=((st=d==null?void 0:d.nodeSize)===null||st===void 0?void 0:st.node)||{},qt=pt.nodeSize.bridge;return{graph:{meta:Object.assign(pt.graph.meta,xt)},subScene:{meta:Object.assign(pt.subScene.meta,Mt)},nodeSize:{meta:Object.assign(pt.nodeSize.meta,Ft),node:Object.assign(pt.nodeSize.node,re),bridge:qt}}}function V(d){return`\u25EC${d}\u25EC`}const z=V("ROOT"),H=V("BRIDGE_GRAPH");var F,M,A,y;(function(d){d[d.META=0]="META",d[d.NODE=1]="NODE",d[d.BRIDGE=2]="BRIDGE"})(F||(F={})),function(d){d[d.INCLUDE=0]="INCLUDE",d[d.EXCLUDE=1]="EXCLUDE",d[d.UNSPECIFIED=2]="UNSPECIFIED"}(M||(M={})),function(d){d[d.META=0]="META",d[d.CORE=1]="CORE",d[d.BRIDGE=2]="BRIDGE"}(A||(A={})),function(d){d[d.META=0]="META",d[d.OP=1]="OP",d[d.SERIES=2]="SERIES"}(y||(y={}));var x=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof et.g!="undefined"?et.g:typeof self!="undefined"?self:{};function p(d,S){return d(S={exports:{}},S.exports),S.exports}var _=function(){this.__data__=[],this.size=0},E=function(d,S){return d===S||d!=d&&S!=S},b=function(d,S){for(var O=d.length;O--;)if(E(d[O][0],S))return O;return-1},k=Array.prototype.splice,N=function(d){var S=this.__data__,O=b(S,d);return!(O<0)&&(O==S.length-1?S.pop():k.call(S,O,1),--this.size,!0)},g=function(d){var S=this.__data__,O=b(S,d);return O<0?void 0:S[O][1]},v=function(d){return b(this.__data__,d)>-1},K=function(d,S){var O=this.__data__,X=b(O,d);return X<0?(++this.size,O.push([d,S])):O[X][1]=S,this};function B(d){var S=-1,O=d==null?0:d.length;for(this.clear();++S<O;){var X=d[S];this.set(X[0],X[1])}}B.prototype.clear=_,B.prototype.delete=N,B.prototype.get=g,B.prototype.has=v,B.prototype.set=K;var G=B,Y=function(){this.__data__=new G,this.size=0},j=function(d){var S=this.__data__,O=S.delete(d);return this.size=S.size,O},Q=function(d){return this.__data__.get(d)},Z=function(d){return this.__data__.has(d)},rt=typeof x=="object"&&x&&x.Object===Object&&x,ut=typeof self=="object"&&self&&self.Object===Object&&self,ht=rt||ut||Function("return this")(),kt=ht.Symbol,At=Object.prototype,Ht=At.hasOwnProperty,Rt=At.toString,le=kt?kt.toStringTag:void 0,dt=function(d){var S=Ht.call(d,le),O=d[le];try{d[le]=void 0;var X=!0}catch(st){}var at=Rt.call(d);return X&&(S?d[le]=O:delete d[le]),at},ot=Object.prototype.toString,yt=function(d){return ot.call(d)},Lt=kt?kt.toStringTag:void 0,Ot=function(d){return d==null?d===void 0?"[object Undefined]":"[object Null]":Lt&&Lt in Object(d)?dt(d):yt(d)},Wt=function(d){var S=typeof d;return d!=null&&(S=="object"||S=="function")},Jt,De=function(d){if(!Wt(d))return!1;var S=Ot(d);return S=="[object Function]"||S=="[object GeneratorFunction]"||S=="[object AsyncFunction]"||S=="[object Proxy]"},te=ht["__core-js_shared__"],oe=(Jt=/[^.]+$/.exec(te&&te.keys&&te.keys.IE_PROTO||""))?"Symbol(src)_1."+Jt:"",me=function(d){return!!oe&&oe in d},Ce=Function.prototype.toString,_e=function(d){if(d!=null){try{return Ce.call(d)}catch(S){}try{return d+""}catch(S){}}return""},zt=/^\[object .+?Constructor\]$/,ue=Function.prototype,Pe=Object.prototype,Xt=ue.toString,ie=Pe.hasOwnProperty,Ie=RegExp("^"+Xt.call(ie).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),se=function(d){return!(!Wt(d)||me(d))&&(De(d)?Ie:zt).test(_e(d))},Te=function(d,S){return d==null?void 0:d[S]},Be=function(d,S){var O=Te(d,S);return se(O)?O:void 0},Tt=Be(ht,"Map"),nr=Be(Object,"create"),Ir=function(){this.__data__=nr?nr(null):{},this.size=0},Zr=function(d){var S=this.has(d)&&delete this.__data__[d];return this.size-=S?1:0,S},Ur=Object.prototype.hasOwnProperty,wn=function(d){var S=this.__data__;if(nr){var O=S[d];return O==="__lodash_hash_undefined__"?void 0:O}return Ur.call(S,d)?S[d]:void 0},Xr=Object.prototype.hasOwnProperty,Sn=function(d){var S=this.__data__;return nr?S[d]!==void 0:Xr.call(S,d)},Kn=function(d,S){var O=this.__data__;return this.size+=this.has(d)?0:1,O[d]=nr&&S===void 0?"__lodash_hash_undefined__":S,this};function Fn(d){var S=-1,O=d==null?0:d.length;for(this.clear();++S<O;){var X=d[S];this.set(X[0],X[1])}}Fn.prototype.clear=Ir,Fn.prototype.delete=Zr,Fn.prototype.get=wn,Fn.prototype.has=Sn,Fn.prototype.set=Kn;var pn=Fn,er=function(){this.size=0,this.__data__={hash:new pn,map:new(Tt||G),string:new pn}},cr=function(d){var S=typeof d;return S=="string"||S=="number"||S=="symbol"||S=="boolean"?d!=="__proto__":d===null},dr=function(d,S){var O=d.__data__;return cr(S)?O[typeof S=="string"?"string":"hash"]:O.map},Gr=function(d){var S=dr(this,d).delete(d);return this.size-=S?1:0,S},sn=function(d){return dr(this,d).get(d)},yn=function(d){return dr(this,d).has(d)},ln=function(d,S){var O=dr(this,d),X=O.size;return O.set(d,S),this.size+=O.size==X?0:1,this};function Vn(d){var S=-1,O=d==null?0:d.length;for(this.clear();++S<O;){var X=d[S];this.set(X[0],X[1])}}Vn.prototype.clear=er,Vn.prototype.delete=Gr,Vn.prototype.get=sn,Vn.prototype.has=yn,Vn.prototype.set=ln;var ca=Vn,oa=function(d,S){var O=this.__data__;if(O instanceof G){var X=O.__data__;if(!Tt||X.length<199)return X.push([d,S]),this.size=++O.size,this;O=this.__data__=new ca(X)}return O.set(d,S),this.size=O.size,this};function bn(d){var S=this.__data__=new G(d);this.size=S.size}bn.prototype.clear=Y,bn.prototype.delete=j,bn.prototype.get=Q,bn.prototype.has=Z,bn.prototype.set=oa;var qn=bn,Gn=function(d,S){for(var O=-1,X=d==null?0:d.length;++O<X&&S(d[O],O,d)!==!1;);return d},zn=function(){try{var d=Be(Object,"defineProperty");return d({},"",{}),d}catch(S){}}(),ya=function(d,S,O){S=="__proto__"&&zn?zn(d,S,{configurable:!0,enumerable:!0,value:O,writable:!0}):d[S]=O},W=Object.prototype.hasOwnProperty,qe=function(d,S,O){var X=d[S];W.call(d,S)&&E(X,O)&&(O!==void 0||S in d)||ya(d,S,O)},be=function(d,S,O,X){var at=!O;O||(O={});for(var st=-1,pt=S.length;++st<pt;){var xt=S[st],Mt=X?X(O[xt],d[xt],xt,O,d):void 0;Mt===void 0&&(Mt=d[xt]),at?ya(O,xt,Mt):qe(O,xt,Mt)}return O},or=function(d,S){for(var O=-1,X=Array(d);++O<d;)X[O]=S(O);return X},ar=function(d){return d!=null&&typeof d=="object"},Br=function(d){return ar(d)&&Ot(d)=="[object Arguments]"},Pr=Object.prototype,cn=Pr.hasOwnProperty,xn=Pr.propertyIsEnumerable,tn=Br(function(){return arguments}())?Br:function(d){return ar(d)&&cn.call(d,"callee")&&!xn.call(d,"callee")},vt=Array.isArray,bt=function(){return!1},P=p(function(d,S){var O=S&&!S.nodeType&&S,X=O&&d&&!d.nodeType&&d,at=X&&X.exports===O?ht.Buffer:void 0,st=(at?at.isBuffer:void 0)||bt;d.exports=st}),I=/^(?:0|[1-9]\d*)$/,T=function(d,S){var O=typeof d;return!!(S=S==null?9007199254740991:S)&&(O=="number"||O!="symbol"&&I.test(d))&&d>-1&&d%1==0&&d<S},q=function(d){return typeof d=="number"&&d>-1&&d%1==0&&d<=9007199254740991},Et={};Et["[object Float32Array]"]=Et["[object Float64Array]"]=Et["[object Int8Array]"]=Et["[object Int16Array]"]=Et["[object Int32Array]"]=Et["[object Uint8Array]"]=Et["[object Uint8ClampedArray]"]=Et["[object Uint16Array]"]=Et["[object Uint32Array]"]=!0,Et["[object Arguments]"]=Et["[object Array]"]=Et["[object ArrayBuffer]"]=Et["[object Boolean]"]=Et["[object DataView]"]=Et["[object Date]"]=Et["[object Error]"]=Et["[object Function]"]=Et["[object Map]"]=Et["[object Number]"]=Et["[object Object]"]=Et["[object RegExp]"]=Et["[object Set]"]=Et["[object String]"]=Et["[object WeakMap]"]=!1;var Gt=function(d){return ar(d)&&q(d.length)&&!!Et[Ot(d)]},Dt=function(d){return function(S){return d(S)}},ee=p(function(d,S){var O=S&&!S.nodeType&&S,X=O&&d&&!d.nodeType&&d,at=X&&X.exports===O&&rt.process,st=function(){try{var pt=X&&X.require&&X.require("util").types;return pt||at&&at.binding&&at.binding("util")}catch(xt){}}();d.exports=st}),Ye=ee&&ee.isTypedArray,Ae=Ye?Dt(Ye):Gt,fr=Object.prototype.hasOwnProperty,Hr=function(d,S){var O=vt(d),X=!O&&tn(d),at=!O&&!X&&P(d),st=!O&&!X&&!at&&Ae(d),pt=O||X||at||st,xt=pt?or(d.length,String):[],Mt=xt.length;for(var Ft in d)!S&&!fr.call(d,Ft)||pt&&(Ft=="length"||at&&(Ft=="offset"||Ft=="parent")||st&&(Ft=="buffer"||Ft=="byteLength"||Ft=="byteOffset")||T(Ft,Mt))||xt.push(Ft);return xt},wr=Object.prototype,hn=function(d){var S=d&&d.constructor;return d===(typeof S=="function"&&S.prototype||wr)},Yn=function(d,S){return function(O){return d(S(O))}},Ze=Yn(Object.keys,Object),xr=Object.prototype.hasOwnProperty,Dr=function(d){if(!hn(d))return Ze(d);var S=[];for(var O in Object(d))xr.call(d,O)&&O!="constructor"&&S.push(O);return S},Yr=function(d){return d!=null&&q(d.length)&&!De(d)},$t=function(d){return Yr(d)?Hr(d):Dr(d)},It=function(d,S){return d&&be(S,$t(S),d)},ne=function(d){var S=[];if(d!=null)for(var O in Object(d))S.push(O);return S},xe=Object.prototype.hasOwnProperty,pe=function(d){if(!Wt(d))return ne(d);var S=hn(d),O=[];for(var X in d)(X!="constructor"||!S&&xe.call(d,X))&&O.push(X);return O},ke=function(d){return Yr(d)?Hr(d,!0):pe(d)},sr=function(d,S){return d&&be(S,ke(S),d)},lr=p(function(d,S){var O=S&&!S.nodeType&&S,X=O&&d&&!d.nodeType&&d,at=X&&X.exports===O?ht.Buffer:void 0,st=at?at.allocUnsafe:void 0;d.exports=function(pt,xt){if(xt)return pt.slice();var Mt=pt.length,Ft=st?st(Mt):new pt.constructor(Mt);return pt.copy(Ft),Ft}}),en=function(d,S){var O=-1,X=d.length;for(S||(S=Array(X));++O<X;)S[O]=d[O];return S},Dn=function(d,S){for(var O=-1,X=d==null?0:d.length,at=0,st=[];++O<X;){var pt=d[O];S(pt,O,d)&&(st[at++]=pt)}return st},En=function(){return[]},ta=Object.prototype.propertyIsEnumerable,Qn=Object.getOwnPropertySymbols,ba=Qn?function(d){return d==null?[]:(d=Object(d),Dn(Qn(d),function(S){return ta.call(d,S)}))}:En,Ha=function(d,S){return be(d,ba(d),S)},Za=function(d,S){for(var O=-1,X=S.length,at=d.length;++O<X;)d[at+O]=S[O];return d},Ba=Yn(Object.getPrototypeOf,Object),To=Object.getOwnPropertySymbols?function(d){for(var S=[];d;)Za(S,ba(d)),d=Ba(d);return S}:En,_i=function(d,S){return be(d,To(d),S)},Si=function(d,S,O){var X=S(d);return vt(d)?X:Za(X,O(d))},io=function(d){return Si(d,$t,ba)},fs=function(d){return Si(d,ke,To)},Io=Be(ht,"DataView"),oo=Be(ht,"Promise"),Ca=Be(ht,"Set"),ko=Be(ht,"WeakMap"),cs=_e(Io),ri=_e(Tt),Vi=_e(oo),ls=_e(Ca),Xo=_e(ko),Hi=Ot;(Io&&Hi(new Io(new ArrayBuffer(1)))!="[object DataView]"||Tt&&Hi(new Tt)!="[object Map]"||oo&&Hi(oo.resolve())!="[object Promise]"||Ca&&Hi(new Ca)!="[object Set]"||ko&&Hi(new ko)!="[object WeakMap]")&&(Hi=function(d){var S=Ot(d),O=S=="[object Object]"?d.constructor:void 0,X=O?_e(O):"";if(X)switch(X){case cs:return"[object DataView]";case ri:return"[object Map]";case Vi:return"[object Promise]";case ls:return"[object Set]";case Xo:return"[object WeakMap]"}return S});var so=Hi,Ws=Object.prototype.hasOwnProperty,Yo=function(d){var S=d.length,O=new d.constructor(S);return S&&typeof d[0]=="string"&&Ws.call(d,"index")&&(O.index=d.index,O.input=d.input),O},Mi=ht.Uint8Array,uo=function(d){var S=new d.constructor(d.byteLength);return new Mi(S).set(new Mi(d)),S},hs=function(d,S){var O=S?uo(d.buffer):d.buffer;return new d.constructor(O,d.byteOffset,d.byteLength)},Un=/\w*$/,Eo=function(d){var S=new d.constructor(d.source,Un.exec(d));return S.lastIndex=d.lastIndex,S},Po=kt?kt.prototype:void 0,Ss=Po?Po.valueOf:void 0,Wo=function(d){return Ss?Object(Ss.call(d)):{}},Ds=function(d,S){var O=S?uo(d.buffer):d.buffer;return new d.constructor(O,d.byteOffset,d.length)},$n=function(d,S,O){var X=d.constructor;switch(S){case"[object ArrayBuffer]":return uo(d);case"[object Boolean]":case"[object Date]":return new X(+d);case"[object DataView]":return hs(d,O);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Ds(d,O);case"[object Map]":return new X;case"[object Number]":case"[object String]":return new X(d);case"[object RegExp]":return Eo(d);case"[object Set]":return new X;case"[object Symbol]":return Wo(d)}},ji=Object.create,Zi=function(){function d(){}return function(S){if(!Wt(S))return{};if(ji)return ji(S);d.prototype=S;var O=new d;return d.prototype=void 0,O}}(),bi=function(d){return typeof d.constructor!="function"||hn(d)?{}:Zi(Ba(d))},Vo=function(d){return ar(d)&&so(d)=="[object Map]"},Ho=ee&&ee.isMap,fo=Ho?Dt(Ho):Vo,ds=function(d){return ar(d)&&so(d)=="[object Set]"},Ms=ee&&ee.isSet,ns=Ms?Dt(Ms):ds,Ia={};Ia["[object Arguments]"]=Ia["[object Array]"]=Ia["[object ArrayBuffer]"]=Ia["[object DataView]"]=Ia["[object Boolean]"]=Ia["[object Date]"]=Ia["[object Float32Array]"]=Ia["[object Float64Array]"]=Ia["[object Int8Array]"]=Ia["[object Int16Array]"]=Ia["[object Int32Array]"]=Ia["[object Map]"]=Ia["[object Number]"]=Ia["[object Object]"]=Ia["[object RegExp]"]=Ia["[object Set]"]=Ia["[object String]"]=Ia["[object Symbol]"]=Ia["[object Uint8Array]"]=Ia["[object Uint8ClampedArray]"]=Ia["[object Uint16Array]"]=Ia["[object Uint32Array]"]=!0,Ia["[object Error]"]=Ia["[object Function]"]=Ia["[object WeakMap]"]=!1;var Ps=function d(S,O,X,at,st,pt){var xt,Mt=1&O,Ft=2&O,re=4&O;if(X&&(xt=st?X(S,at,st,pt):X(S)),xt!==void 0)return xt;if(!Wt(S))return S;var qt=vt(S);if(qt){if(xt=Yo(S),!Mt)return en(S,xt)}else{var Ee=so(S),Ve=Ee=="[object Function]"||Ee=="[object GeneratorFunction]";if(P(S))return lr(S,Mt);if(Ee=="[object Object]"||Ee=="[object Arguments]"||Ve&&!st){if(xt=Ft||Ve?{}:bi(S),!Mt)return Ft?_i(S,sr(xt,S)):Ha(S,It(xt,S))}else{if(!Ia[Ee])return st?S:{};xt=$n(S,Ee,Mt)}}pt||(pt=new qn);var Mr=pt.get(S);if(Mr)return Mr;pt.set(S,xt),ns(S)?S.forEach(function(rr){xt.add(d(rr,O,X,rr,S,pt))}):fo(S)&&S.forEach(function(rr,tr){xt.set(tr,d(rr,O,X,tr,S,pt))});var Qe=qt?void 0:(re?Ft?fs:io:Ft?ke:$t)(S);return Gn(Qe||S,function(rr,tr){Qe&&(rr=S[tr=rr]),qe(xt,tr,d(rr,O,X,tr,S,pt))}),xt},_o=function(d){return Ps(d,4)},co=function(d){return function(){return d}},As=function(d){return function(S,O,X){for(var at=-1,st=Object(S),pt=X(S),xt=pt.length;xt--;){var Mt=pt[d?xt:++at];if(O(st[Mt],Mt,st)===!1)break}return S}}(),Ro=function(d,S){return d&&As(d,S,$t)},Gi=function(d,S){return function(O,X){if(O==null)return O;if(!Yr(O))return d(O,X);for(var at=O.length,st=S?at:-1,pt=Object(O);(S?st--:++st<at)&&X(pt[st],st,pt)!==!1;);return O}}(Ro),So=function(d){return d},qi=function(d){return typeof d=="function"?d:So},Lo=function(d,S){return(vt(d)?Gn:Gi)(d,qi(S))},hi=Lo,Cs=function(d,S){var O=[];return Gi(d,function(X,at,st){S(X,at,st)&&O.push(X)}),O},Bo=function(d){return this.__data__.set(d,"__lodash_hash_undefined__"),this},lo=function(d){return this.__data__.has(d)};function jo(d){var S=-1,O=d==null?0:d.length;for(this.__data__=new ca;++S<O;)this.add(d[S])}jo.prototype.add=jo.prototype.push=Bo,jo.prototype.has=lo;var Mo=jo,Zo=function(d,S){for(var O=-1,X=d==null?0:d.length;++O<X;)if(S(d[O],O,d))return!0;return!1},go=function(d,S){return d.has(S)},Da=function(d,S,O,X,at,st){var pt=1&O,xt=d.length,Mt=S.length;if(xt!=Mt&&!(pt&&Mt>xt))return!1;var Ft=st.get(d),re=st.get(S);if(Ft&&re)return Ft==S&&re==d;var qt=-1,Ee=!0,Ve=2&O?new Mo:void 0;for(st.set(d,S),st.set(S,d);++qt<xt;){var Mr=d[qt],Qe=S[qt];if(X)var rr=pt?X(Qe,Mr,qt,S,d,st):X(Mr,Qe,qt,d,S,st);if(rr!==void 0){if(rr)continue;Ee=!1;break}if(Ve){if(!Zo(S,function(tr,Jr){if(!go(Ve,Jr)&&(Mr===tr||at(Mr,tr,O,X,st)))return Ve.push(Jr)})){Ee=!1;break}}else if(Mr!==Qe&&!at(Mr,Qe,O,X,st)){Ee=!1;break}}return st.delete(d),st.delete(S),Ee},Ri=function(d){var S=-1,O=Array(d.size);return d.forEach(function(X,at){O[++S]=[at,X]}),O},zi=function(d){var S=-1,O=Array(d.size);return d.forEach(function(X){O[++S]=X}),O},Pa=kt?kt.prototype:void 0,Ii=Pa?Pa.valueOf:void 0,qo=function(d,S,O,X,at,st,pt){switch(O){case"[object DataView]":if(d.byteLength!=S.byteLength||d.byteOffset!=S.byteOffset)return!1;d=d.buffer,S=S.buffer;case"[object ArrayBuffer]":return!(d.byteLength!=S.byteLength||!st(new Mi(d),new Mi(S)));case"[object Boolean]":case"[object Date]":case"[object Number]":return E(+d,+S);case"[object Error]":return d.name==S.name&&d.message==S.message;case"[object RegExp]":case"[object String]":return d==S+"";case"[object Map]":var xt=Ri;case"[object Set]":var Mt=1&X;if(xt||(xt=zi),d.size!=S.size&&!Mt)return!1;var Ft=pt.get(d);if(Ft)return Ft==S;X|=2,pt.set(d,S);var re=Da(xt(d),xt(S),X,at,st,pt);return pt.delete(d),re;case"[object Symbol]":if(Ii)return Ii.call(d)==Ii.call(S)}return!1},Bi=Object.prototype.hasOwnProperty,Fo=function(d,S,O,X,at,st){var pt=1&O,xt=io(d),Mt=xt.length;if(Mt!=io(S).length&&!pt)return!1;for(var Ft=Mt;Ft--;){var re=xt[Ft];if(!(pt?re in S:Bi.call(S,re)))return!1}var qt=st.get(d),Ee=st.get(S);if(qt&&Ee)return qt==S&&Ee==d;var Ve=!0;st.set(d,S),st.set(S,d);for(var Mr=pt;++Ft<Mt;){var Qe=d[re=xt[Ft]],rr=S[re];if(X)var tr=pt?X(rr,Qe,re,S,d,st):X(Qe,rr,re,d,S,st);if(!(tr===void 0?Qe===rr||at(Qe,rr,O,X,st):tr)){Ve=!1;break}Mr||(Mr=re=="constructor")}if(Ve&&!Mr){var Jr=d.constructor,mn=S.constructor;Jr==mn||!("constructor"in d)||!("constructor"in S)||typeof Jr=="function"&&Jr instanceof Jr&&typeof mn=="function"&&mn instanceof mn||(Ve=!1)}return st.delete(d),st.delete(S),Ve},Ao=Object.prototype.hasOwnProperty,$i=function(d,S,O,X,at,st){var pt=vt(d),xt=vt(S),Mt=pt?"[object Array]":so(d),Ft=xt?"[object Array]":so(S),re=(Mt=Mt=="[object Arguments]"?"[object Object]":Mt)=="[object Object]",qt=(Ft=Ft=="[object Arguments]"?"[object Object]":Ft)=="[object Object]",Ee=Mt==Ft;if(Ee&&P(d)){if(!P(S))return!1;pt=!0,re=!1}if(Ee&&!re)return st||(st=new qn),pt||Ae(d)?Da(d,S,O,X,at,st):qo(d,S,Mt,O,X,at,st);if(!(1&O)){var Ve=re&&Ao.call(d,"__wrapped__"),Mr=qt&&Ao.call(S,"__wrapped__");if(Ve||Mr){var Qe=Ve?d.value():d,rr=Mr?S.value():S;return st||(st=new qn),at(Qe,rr,O,X,st)}}return!!Ee&&(st||(st=new qn),Fo(d,S,O,X,at,st))},Ts=function d(S,O,X,at,st){return S===O||(S==null||O==null||!ar(S)&&!ar(O)?S!=S&&O!=O:$i(S,O,X,at,d,st))},vs=function(d,S,O,X){var at=O.length,st=at,pt=!X;if(d==null)return!st;for(d=Object(d);at--;){var xt=O[at];if(pt&&xt[2]?xt[1]!==d[xt[0]]:!(xt[0]in d))return!1}for(;++at<st;){var Mt=(xt=O[at])[0],Ft=d[Mt],re=xt[1];if(pt&&xt[2]){if(Ft===void 0&&!(Mt in d))return!1}else{var qt=new qn;if(X)var Ee=X(Ft,re,Mt,d,S,qt);if(!(Ee===void 0?Ts(re,Ft,3,X,qt):Ee))return!1}}return!0},$o=function(d){return d==d&&!Wt(d)},ps=function(d){for(var S=$t(d),O=S.length;O--;){var X=S[O],at=d[X];S[O]=[X,at,$o(at)]}return S},ou=function(d,S){return function(O){return O!=null&&O[d]===S&&(S!==void 0||d in Object(O))}},Vs=function(d){var S=ps(d);return S.length==1&&S[0][2]?ou(S[0][0],S[0][1]):function(O){return O===d||vs(O,d,S)}},gs=function(d){return typeof d=="symbol"||ar(d)&&Ot(d)=="[object Symbol]"},Ct=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Zt=/^\w*$/,Xe=function(d,S){if(vt(d))return!1;var O=typeof d;return!(O!="number"&&O!="symbol"&&O!="boolean"&&d!=null&&!gs(d))||Zt.test(d)||!Ct.test(d)||S!=null&&d in Object(S)};function Ke(d,S){if(typeof d!="function"||S!=null&&typeof S!="function")throw new TypeError("Expected a function");var O=function(){var X=arguments,at=S?S.apply(this,X):X[0],st=O.cache;if(st.has(at))return st.get(at);var pt=d.apply(this,X);return O.cache=st.set(at,pt)||st,pt};return O.cache=new(Ke.Cache||ca),O}Ke.Cache=ca;var kr=Ke,gn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Nn=/\\(\\)?/g,ra=function(d){var S=kr(d,function(X){return O.size===500&&O.clear(),X}),O=S.cache;return S}(function(d){var S=[];return d.charCodeAt(0)===46&&S.push(""),d.replace(gn,function(O,X,at,st){S.push(at?st.replace(Nn,"$1"):X||O)}),S}),oi=function(d,S){for(var O=-1,X=d==null?0:d.length,at=Array(X);++O<X;)at[O]=S(d[O],O,d);return at},Ji=kt?kt.prototype:void 0,ho=Ji?Ji.toString:void 0,Hs=function d(S){if(typeof S=="string")return S;if(vt(S))return oi(S,d)+"";if(gs(S))return ho?ho.call(S):"";var O=S+"";return O=="0"&&1/S==-1/0?"-0":O},_u=function(d){return d==null?"":Hs(d)},Ui=function(d,S){return vt(d)?d:Xe(d,S)?[d]:ra(_u(d))},yo=function(d){if(typeof d=="string"||gs(d))return d;var S=d+"";return S=="0"&&1/d==-1/0?"-0":S},Js=function(d,S){for(var O=0,X=(S=Ui(S,d)).length;d!=null&&O<X;)d=d[yo(S[O++])];return O&&O==X?d:void 0},Xu=function(d,S,O){var X=d==null?void 0:Js(d,S);return X===void 0?O:X},Su=function(d,S){return d!=null&&S in Object(d)},su=function(d,S,O){for(var X=-1,at=(S=Ui(S,d)).length,st=!1;++X<at;){var pt=yo(S[X]);if(!(st=d!=null&&O(d,pt)))break;d=d[pt]}return st||++X!=at?st:!!(at=d==null?0:d.length)&&q(at)&&T(pt,at)&&(vt(d)||tn(d))},uu=function(d,S){return d!=null&&su(d,S,Su)},tu=function(d,S){return Xe(d)&&$o(S)?ou(yo(d),S):function(O){var X=Xu(O,d);return X===void 0&&X===S?uu(O,d):Ts(S,X,3)}},Rs=function(d){return function(S){return S==null?void 0:S[d]}},eu=function(d){return function(S){return Js(S,d)}},ys=function(d){return Xe(d)?Rs(yo(d)):eu(d)},No=function(d){return typeof d=="function"?d:d==null?So:typeof d=="object"?vt(d)?tu(d[0],d[1]):Vs(d):ys(d)},nf=function(d,S){return(vt(d)?Dn:Cs)(d,No(S))},Bf=Object.prototype.hasOwnProperty,Ff=function(d,S){return d!=null&&Bf.call(d,S)},Bs=function(d,S){return d!=null&&su(d,S,Ff)},Gf=Object.prototype.hasOwnProperty,h=function(d){if(d==null)return!0;if(Yr(d)&&(vt(d)||typeof d=="string"||typeof d.splice=="function"||P(d)||Ae(d)||tn(d)))return!d.length;var S=so(d);if(S=="[object Map]"||S=="[object Set]")return!d.size;if(hn(d))return!Dr(d).length;for(var O in d)if(Gf.call(d,O))return!1;return!0},L=function(d){return d===void 0},lt=function(d,S){var O=-1,X=Yr(d)?Array(d.length):[];return Gi(d,function(at,st,pt){X[++O]=S(at,st,pt)}),X},wt=function(d,S){return(vt(d)?oi:lt)(d,No(S))},Nt=function(d,S,O,X){var at=-1,st=d==null?0:d.length;for(X&&st&&(O=d[++at]);++at<st;)O=S(O,d[at],at,d);return O},Yt=function(d,S,O,X,at){return at(d,function(st,pt,xt){O=X?(X=!1,st):S(O,st,pt,xt)}),O},Vt=function(d,S,O){var X=vt(d)?Nt:Yt,at=arguments.length<3;return X(d,No(S),O,at,Gi)},he=function(d){return typeof d=="string"||!vt(d)&&ar(d)&&Ot(d)=="[object String]"},ge=Rs("length"),Le=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),He=function(d){return Le.test(d)},_r="[\\ud800-\\udfff]",Sr="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Er="\\ud83c[\\udffb-\\udfff]",Kr="[^\\ud800-\\udfff]",an="(?:\\ud83c[\\udde6-\\uddff]){2}",Lr="[\\ud800-\\udbff][\\udc00-\\udfff]",Tn="(?:"+Sr+"|"+Er+")?",_a="[\\ufe0e\\ufe0f]?"+Tn+("(?:\\u200d(?:"+[Kr,an,Lr].join("|")+")[\\ufe0e\\ufe0f]?"+Tn+")*"),Sa="(?:"+[Kr+Sr+"?",Sr,an,Lr,_r].join("|")+")",pa=RegExp(Er+"(?="+Er+")|"+Sa+_a,"g"),na=function(d){for(var S=pa.lastIndex=0;pa.test(d);)++S;return S},da=function(d){return He(d)?na(d):ge(d)},ki=function(d){if(d==null)return 0;if(Yr(d))return he(d)?da(d):d.length;var S=so(d);return S=="[object Map]"||S=="[object Set]"?d.size:Dr(d).length},Li=function(d,S,O){var X=vt(d),at=X||P(d)||Ae(d);if(S=No(S),O==null){var st=d&&d.constructor;O=at?X?new st:[]:Wt(d)&&De(st)?Zi(Ba(d)):{}}return(at?Gn:Ro)(d,function(pt,xt,Mt){return S(O,pt,xt,Mt)}),O},Ai=kt?kt.isConcatSpreadable:void 0,Ni=function(d){return vt(d)||tn(d)||!!(Ai&&d&&d[Ai])},Oi=function d(S,O,X,at,st){var pt=-1,xt=S.length;for(X||(X=Ni),st||(st=[]);++pt<xt;){var Mt=S[pt];O>0&&X(Mt)?O>1?d(Mt,O-1,X,at,st):Za(st,Mt):at||(st[st.length]=Mt)}return st},Xi=function(d,S,O){switch(O.length){case 0:return d.call(S);case 1:return d.call(S,O[0]);case 2:return d.call(S,O[0],O[1]);case 3:return d.call(S,O[0],O[1],O[2])}return d.apply(S,O)},to=Math.max,Ua=function(d,S,O){return S=to(S===void 0?d.length-1:S,0),function(){for(var X=arguments,at=-1,st=to(X.length-S,0),pt=Array(st);++at<st;)pt[at]=X[S+at];at=-1;for(var xt=Array(S+1);++at<S;)xt[at]=X[at];return xt[S]=O(pt),Xi(d,this,xt)}},si=zn?function(d,S){return zn(d,"toString",{configurable:!0,enumerable:!1,value:co(S),writable:!0})}:So,Fs=Date.now,ms=function(d){var S=0,O=0;return function(){var X=Fs(),at=16-(X-O);if(O=X,at>0){if(++S>=800)return arguments[0]}else S=0;return d.apply(void 0,arguments)}}(si),Oo=function(d,S){return ms(Ua(d,S,So),d+"")},Mu=function(d,S,O,X){for(var at=d.length,st=O+(X?1:-1);X?st--:++st<at;)if(S(d[st],st,d))return st;return-1},zf=function(d){return d!=d},yc=function(d,S,O){for(var X=O-1,at=d.length;++X<at;)if(d[X]===S)return X;return-1},mc=function(d,S,O){return S==S?yc(d,S,O):Mu(d,zf,O)},bc=function(d,S){return!!(d!=null&&d.length)&&mc(d,S,0)>-1},Uf=function(d,S,O){for(var X=-1,at=d==null?0:d.length;++X<at;)if(O(S,d[X]))return!0;return!1},Xf=function(){},xc=Ca&&1/zi(new Ca([,-0]))[1]==1/0?function(d){return new Ca(d)}:Xf,af=function(d,S,O){var X=-1,at=bc,st=d.length,pt=!0,xt=[],Mt=xt;if(O)pt=!1,at=Uf;else if(st>=200){var Ft=S?null:xc(d);if(Ft)return zi(Ft);pt=!1,at=go,Mt=new Mo}else Mt=S?[]:xt;t:for(;++X<st;){var re=d[X],qt=S?S(re):re;if(re=O||re!==0?re:0,pt&&qt==qt){for(var Ee=Mt.length;Ee--;)if(Mt[Ee]===qt)continue t;S&&Mt.push(qt),xt.push(re)}else at(Mt,qt,O)||(Mt!==xt&&Mt.push(qt),xt.push(re))}return xt},of=function(d){return ar(d)&&Yr(d)},wc=Oo(function(d){return af(Oi(d,1,of,!0))}),tl=function(d,S){return oi(S,function(O){return d[O]})},Gs,Ec=function(d){return d==null?[]:tl(d,$t(d))};try{Gs={clone:_o,constant:co,each:hi,filter:nf,has:Bs,isArray:vt,isEmpty:h,isFunction:De,isUndefined:L,keys:$t,map:wt,reduce:Vt,size:ki,transform:Li,union:wc,values:Ec}}catch(d){}Gs||(Gs=window._);var In=Gs,Au=Xa;function Xa(d){this._isDirected=!In.has(d,"directed")||d.directed,this._isMultigraph=!!In.has(d,"multigraph")&&d.multigraph,this._isCompound=!!In.has(d,"compound")&&d.compound,this._label=void 0,this._defaultNodeLabelFn=In.constant(void 0),this._defaultEdgeLabelFn=In.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children["\0"]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}function sf(d,S){d[S]?d[S]++:d[S]=1}function Yf(d,S){--d[S]||delete d[S]}function fu(d,S,O,X){var at=""+S,st=""+O;if(!d&&at>st){var pt=at;at=st,st=pt}return at+""+st+""+(In.isUndefined(X)?"\0":X)}function Yu(d,S,O,X){var at=""+S,st=""+O;if(!d&&at>st){var pt=at;at=st,st=pt}var xt={v:at,w:st};return X&&(xt.name=X),xt}function Wu(d,S){return fu(d,S.v,S.w,S.name)}Xa.prototype._nodeCount=0,Xa.prototype._edgeCount=0,Xa.prototype.isDirected=function(){return this._isDirected},Xa.prototype.isMultigraph=function(){return this._isMultigraph},Xa.prototype.isCompound=function(){return this._isCompound},Xa.prototype.setGraph=function(d){return this._label=d,this},Xa.prototype.graph=function(){return this._label},Xa.prototype.setDefaultNodeLabel=function(d){return In.isFunction(d)||(d=In.constant(d)),this._defaultNodeLabelFn=d,this},Xa.prototype.nodeCount=function(){return this._nodeCount},Xa.prototype.nodes=function(){return In.keys(this._nodes)},Xa.prototype.sources=function(){var d=this;return In.filter(this.nodes(),function(S){return In.isEmpty(d._in[S])})},Xa.prototype.sinks=function(){var d=this;return In.filter(this.nodes(),function(S){return In.isEmpty(d._out[S])})},Xa.prototype.setNodes=function(d,S){var O=arguments,X=this;return In.each(d,function(at){O.length>1?X.setNode(at,S):X.setNode(at)}),this},Xa.prototype.setNode=function(d,S){return In.has(this._nodes,d)?(arguments.length>1&&(this._nodes[d]=S),this):(this._nodes[d]=arguments.length>1?S:this._defaultNodeLabelFn(d),this._isCompound&&(this._parent[d]="\0",this._children[d]={},this._children["\0"][d]=!0),this._in[d]={},this._preds[d]={},this._out[d]={},this._sucs[d]={},++this._nodeCount,this)},Xa.prototype.node=function(d){return this._nodes[d]},Xa.prototype.hasNode=function(d){return In.has(this._nodes,d)},Xa.prototype.removeNode=function(d){var S=this;if(In.has(this._nodes,d)){var O=function(X){S.removeEdge(S._edgeObjs[X])};delete this._nodes[d],this._isCompound&&(this._removeFromParentsChildList(d),delete this._parent[d],In.each(this.children(d),function(X){S.setParent(X)}),delete this._children[d]),In.each(In.keys(this._in[d]),O),delete this._in[d],delete this._preds[d],In.each(In.keys(this._out[d]),O),delete this._out[d],delete this._sucs[d],--this._nodeCount}return this},Xa.prototype.setParent=function(d,S){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(In.isUndefined(S))S="\0";else{for(var O=S+="";!In.isUndefined(O);O=this.parent(O))if(O===d)throw new Error("Setting "+S+" as parent of "+d+" would create a cycle");this.setNode(S)}return this.setNode(d),this._removeFromParentsChildList(d),this._parent[d]=S,this._children[S][d]=!0,this},Xa.prototype._removeFromParentsChildList=function(d){delete this._children[this._parent[d]][d]},Xa.prototype.parent=function(d){if(this._isCompound){var S=this._parent[d];if(S!=="\0")return S}},Xa.prototype.children=function(d){if(In.isUndefined(d)&&(d="\0"),this._isCompound){var S=this._children[d];if(S)return In.keys(S)}else{if(d==="\0")return this.nodes();if(this.hasNode(d))return[]}},Xa.prototype.predecessors=function(d){var S=this._preds[d];if(S)return In.keys(S)},Xa.prototype.successors=function(d){var S=this._sucs[d];if(S)return In.keys(S)},Xa.prototype.neighbors=function(d){var S=this.predecessors(d);if(S)return In.union(S,this.successors(d))},Xa.prototype.isLeaf=function(d){return(this.isDirected()?this.successors(d):this.neighbors(d)).length===0},Xa.prototype.filterNodes=function(d){var S=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});S.setGraph(this.graph());var O=this;In.each(this._nodes,function(st,pt){d(pt)&&S.setNode(pt,st)}),In.each(this._edgeObjs,function(st){S.hasNode(st.v)&&S.hasNode(st.w)&&S.setEdge(st,O.edge(st))});var X={};function at(st){var pt=O.parent(st);return pt===void 0||S.hasNode(pt)?(X[st]=pt,pt):pt in X?X[pt]:at(pt)}return this._isCompound&&In.each(S.nodes(),function(st){S.setParent(st,at(st))}),S},Xa.prototype.setDefaultEdgeLabel=function(d){return In.isFunction(d)||(d=In.constant(d)),this._defaultEdgeLabelFn=d,this},Xa.prototype.edgeCount=function(){return this._edgeCount},Xa.prototype.edges=function(){return In.values(this._edgeObjs)},Xa.prototype.setPath=function(d,S){var O=this,X=arguments;return In.reduce(d,function(at,st){return X.length>1?O.setEdge(at,st,S):O.setEdge(at,st),st}),this},Xa.prototype.setEdge=function(){var d,S,O,X,at=!1,st=arguments[0];typeof st=="object"&&st!==null&&"v"in st?(d=st.v,S=st.w,O=st.name,arguments.length===2&&(X=arguments[1],at=!0)):(d=st,S=arguments[1],O=arguments[3],arguments.length>2&&(X=arguments[2],at=!0)),d=""+d,S=""+S,In.isUndefined(O)||(O=""+O);var pt=fu(this._isDirected,d,S,O);if(In.has(this._edgeLabels,pt))return at&&(this._edgeLabels[pt]=X),this;if(!In.isUndefined(O)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(d),this.setNode(S),this._edgeLabels[pt]=at?X:this._defaultEdgeLabelFn(d,S,O);var xt=Yu(this._isDirected,d,S,O);return d=xt.v,S=xt.w,Object.freeze(xt),this._edgeObjs[pt]=xt,sf(this._preds[S],d),sf(this._sucs[d],S),this._in[S][pt]=xt,this._out[d][pt]=xt,this._edgeCount++,this},Xa.prototype.edge=function(d,S,O){var X=arguments.length===1?Wu(this._isDirected,arguments[0]):fu(this._isDirected,d,S,O);return this._edgeLabels[X]},Xa.prototype.hasEdge=function(d,S,O){var X=arguments.length===1?Wu(this._isDirected,arguments[0]):fu(this._isDirected,d,S,O);return In.has(this._edgeLabels,X)},Xa.prototype.removeEdge=function(d,S,O){var X=arguments.length===1?Wu(this._isDirected,arguments[0]):fu(this._isDirected,d,S,O),at=this._edgeObjs[X];return at&&(d=at.v,S=at.w,delete this._edgeLabels[X],delete this._edgeObjs[X],Yf(this._preds[S],d),Yf(this._sucs[d],S),delete this._in[S][X],delete this._out[d][X],this._edgeCount--),this},Xa.prototype.inEdges=function(d,S){var O=this._in[d];if(O){var X=In.values(O);return S?In.filter(X,function(at){return at.v===S}):X}},Xa.prototype.outEdges=function(d,S){var O=this._out[d];if(O){var X=In.values(O);return S?In.filter(X,function(at){return at.w===S}):X}},Xa.prototype.nodeEdges=function(d,S){var O=this.inEdges(d,S);if(O)return O.concat(this.outEdges(d,S))};var uf={Graph:Au,version:"2.1.8"},ff={write:function(d){var S={options:{directed:d.isDirected(),multigraph:d.isMultigraph(),compound:d.isCompound()},nodes:_c(d),edges:bs(d)};return In.isUndefined(d.graph())||(S.value=In.clone(d.graph())),S},read:function(d){var S=new Au(d.options).setGraph(d.value);return In.each(d.nodes,function(O){S.setNode(O.v,O.value),O.parent&&S.setParent(O.v,O.parent)}),In.each(d.edges,function(O){S.setEdge({v:O.v,w:O.w,name:O.name},O.value)}),S}};function _c(d){return In.map(d.nodes(),function(S){var O=d.node(S),X=d.parent(S),at={v:S};return In.isUndefined(O)||(at.value=O),In.isUndefined(X)||(at.parent=X),at})}function bs(d){return In.map(d.edges(),function(S){var O=d.edge(S),X={v:S.v,w:S.w};return In.isUndefined(S.name)||(X.name=S.name),In.isUndefined(O)||(X.value=O),X})}var Sc=function(d){var S,O={},X=[];function at(st){In.has(O,st)||(O[st]=!0,S.push(st),In.each(d.successors(st),at),In.each(d.predecessors(st),at))}return In.each(d.nodes(),function(st){S=[],at(st),S.length&&X.push(S)}),X},cf=xi;function xi(){this._arr=[],this._keyIndices={}}xi.prototype.size=function(){return this._arr.length},xi.prototype.keys=function(){return this._arr.map(function(d){return d.key})},xi.prototype.has=function(d){return In.has(this._keyIndices,d)},xi.prototype.priority=function(d){var S=this._keyIndices[d];if(S!==void 0)return this._arr[S].priority},xi.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},xi.prototype.add=function(d,S){var O=this._keyIndices;if(d=String(d),!In.has(O,d)){var X=this._arr,at=X.length;return O[d]=at,X.push({key:d,priority:S}),this._decrease(at),!0}return!1},xi.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var d=this._arr.pop();return delete this._keyIndices[d.key],this._heapify(0),d.key},xi.prototype.decrease=function(d,S){var O=this._keyIndices[d];if(S>this._arr[O].priority)throw new Error("New priority is greater than current priority. Key: "+d+" Old: "+this._arr[O].priority+" New: "+S);this._arr[O].priority=S,this._decrease(O)},xi.prototype._heapify=function(d){var S=this._arr,O=2*d,X=O+1,at=d;O<S.length&&(at=S[O].priority<S[at].priority?O:at,X<S.length&&(at=S[X].priority<S[at].priority?X:at),at!==d&&(this._swap(d,at),this._heapify(at)))},xi.prototype._decrease=function(d){for(var S,O=this._arr,X=O[d].priority;d!==0&&!(O[S=d>>1].priority<X);)this._swap(d,S),d=S},xi.prototype._swap=function(d,S){var O=this._arr,X=this._keyIndices,at=O[d],st=O[S];O[d]=st,O[S]=at,X[st.key]=d,X[at.key]=S};var Vu=function(d,S,O,X){return function(at,st,pt,xt){var Mt,Ft,re={},qt=new cf,Ee=function(Ve){var Mr=Ve.v!==Mt?Ve.v:Ve.w,Qe=re[Mr],rr=pt(Ve),tr=Ft.distance+rr;if(rr<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+Ve+" Weight: "+rr);tr<Qe.distance&&(Qe.distance=tr,Qe.predecessor=Mt,qt.decrease(Mr,tr))};for(at.nodes().forEach(function(Ve){var Mr=Ve===st?0:Number.POSITIVE_INFINITY;re[Ve]={distance:Mr},qt.add(Ve,Mr)});qt.size()>0&&(Mt=qt.removeMin(),(Ft=re[Mt]).distance!==Number.POSITIVE_INFINITY);)xt(Mt).forEach(Ee);return re}(d,String(S),O||Is,X||function(at){return d.outEdges(at)})},Is=In.constant(1),Cu=function(d,S,O){return In.transform(d.nodes(),function(X,at){X[at]=Vu(d,at,S,O)},{})},J=function(d){var S=0,O=[],X={},at=[];function st(pt){var xt=X[pt]={onStack:!0,lowlink:S,index:S++};if(O.push(pt),d.successors(pt).forEach(function(re){In.has(X,re)?X[re].onStack&&(xt.lowlink=Math.min(xt.lowlink,X[re].index)):(st(re),xt.lowlink=Math.min(xt.lowlink,X[re].lowlink))}),xt.lowlink===xt.index){var Mt,Ft=[];do Mt=O.pop(),X[Mt].onStack=!1,Ft.push(Mt);while(pt!==Mt);at.push(Ft)}}return d.nodes().forEach(function(pt){In.has(X,pt)||st(pt)}),at},gt=function(d){return In.filter(J(d),function(S){return S.length>1||S.length===1&&d.hasEdge(S[0],S[0])})},St=function(d,S,O){return function(X,at,st){var pt={},xt=X.nodes();return xt.forEach(function(Mt){pt[Mt]={},pt[Mt][Mt]={distance:0},xt.forEach(function(Ft){Mt!==Ft&&(pt[Mt][Ft]={distance:Number.POSITIVE_INFINITY})}),st(Mt).forEach(function(Ft){var re=Ft.v===Mt?Ft.w:Ft.v,qt=at(Ft);pt[Mt][re]={distance:qt,predecessor:Mt}})}),xt.forEach(function(Mt){var Ft=pt[Mt];xt.forEach(function(re){var qt=pt[re];xt.forEach(function(Ee){var Ve=qt[Mt],Mr=Ft[Ee],Qe=qt[Ee],rr=Ve.distance+Mr.distance;rr<Qe.distance&&(Qe.distance=rr,Qe.predecessor=Mr.predecessor)})})}),pt}(d,S||Ut,O||function(X){return d.outEdges(X)})},Ut=In.constant(1),ae=Ue;function Ue(d){var S={},O={},X=[];if(In.each(d.sinks(),function at(st){if(In.has(O,st))throw new We;In.has(S,st)||(O[st]=!0,S[st]=!0,In.each(d.predecessors(st),at),delete O[st],X.push(st))}),In.size(S)!==d.nodeCount())throw new We;return X}function We(){}Ue.CycleException=We,We.prototype=new Error;var vr=function(d,S,O){In.isArray(S)||(S=[S]);var X=(d.isDirected()?d.successors:d.neighbors).bind(d),at=[],st={};return In.each(S,function(pt){if(!d.hasNode(pt))throw new Error("Graph does not have node: "+pt);zr(d,pt,O==="post",st,X,at)}),at};function zr(d,S,O,X,at,st){In.has(X,S)||(X[S]=!0,O||st.push(S),In.each(at(S),function(pt){zr(d,pt,O,X,at,st)}),O&&st.push(S))}var qr,Ln={Graph:uf.Graph,json:ff,alg:{components:Sc,dijkstra:Vu,dijkstraAll:Cu,findCycles:gt,floydWarshall:St,isAcyclic:function(d){try{ae(d)}catch(S){if(S instanceof ae.CycleException)return!1;throw S}return!0},postorder:function(d,S){return vr(d,S,"post")},preorder:function(d,S){return vr(d,S,"pre")},prim:function(d,S){var O,X=new Au,at={},st=new cf;function pt(Mt){var Ft=Mt.v===O?Mt.w:Mt.v,re=st.priority(Ft);if(re!==void 0){var qt=S(Mt);qt<re&&(at[Ft]=O,st.decrease(Ft,qt))}}if(d.nodeCount()===0)return X;In.each(d.nodes(),function(Mt){st.add(Mt,Number.POSITIVE_INFINITY),X.setNode(Mt)}),st.decrease(d.nodes()[0],0);for(var xt=!1;st.size()>0;){if(O=st.removeMin(),In.has(at,O))X.setEdge(O,at[O]);else{if(xt)throw new Error("Input graph is not connected: "+d);xt=!0}d.nodeEdges(O).forEach(pt)}return X},tarjan:J,topsort:ae},version:uf.version};try{qr=Ln}catch(d){}qr||(qr=window.graphlib);var Mn=qr,kn=function(d){return Ps(d,5)},sa=function(d,S,O){if(!Wt(O))return!1;var X=typeof S;return!!(X=="number"?Yr(O)&&T(S,O.length):X=="string"&&S in O)&&E(O[S],d)},Ta=Object.prototype,xa=Ta.hasOwnProperty,aa=Oo(function(d,S){d=Object(d);var O=-1,X=S.length,at=X>2?S[2]:void 0;for(at&&sa(S[0],S[1],at)&&(X=1);++O<X;)for(var st=S[O],pt=ke(st),xt=-1,Mt=pt.length;++xt<Mt;){var Ft=pt[xt],re=d[Ft];(re===void 0||E(re,Ta[Ft])&&!xa.call(d,Ft))&&(d[Ft]=st[Ft])}return d}),ka=function(d){return function(S,O,X){var at=Object(S);if(!Yr(S)){var st=No(O);S=$t(S),O=function(xt){return st(at[xt],xt,at)}}var pt=d(S,O,X);return pt>-1?at[st?S[pt]:pt]:void 0}},jn=/^\s+|\s+$/g,Ea=/^[-+]0x[0-9a-f]+$/i,la=/^0b[01]+$/i,Hn=/^0o[0-7]+$/i,La=parseInt,ja=function(d){if(typeof d=="number")return d;if(gs(d))return NaN;if(Wt(d)){var S=typeof d.valueOf=="function"?d.valueOf():d;d=Wt(S)?S+"":S}if(typeof d!="string")return d===0?d:+d;d=d.replace(jn,"");var O=la.test(d);return O||Hn.test(d)?La(d.slice(2),O?2:8):Ea.test(d)?NaN:+d},Qa=function(d){return d?(d=ja(d))===1/0||d===-1/0?17976931348623157e292*(d<0?-1:1):d==d?d:0:d===0?d:0},qa=function(d){var S=Qa(d),O=S%1;return S==S?O?S-O:S:0},Na=Math.max,di=ka(function(d,S,O){var X=d==null?0:d.length;if(!X)return-1;var at=O==null?0:qa(O);return at<0&&(at=Na(X+at,0)),Mu(d,No(S),at)}),wi=function(d){return d!=null&&d.length?Oi(d,1):[]},yi=function(d,S){return d==null?d:As(d,qi(S),ke)},Tu=function(d){var S=d==null?0:d.length;return S?d[S-1]:void 0},Wf=function(d,S){var O={};return S=No(S),Ro(d,function(X,at,st){ya(O,at,S(X,at,st))}),O},as=function(d,S,O){for(var X=-1,at=d.length;++X<at;){var st=d[X],pt=S(st);if(pt!=null&&(xt===void 0?pt==pt&&!gs(pt):O(pt,xt)))var xt=pt,Mt=st}return Mt},cu=function(d,S){return d>S},lf=function(d){return d&&d.length?as(d,So,cu):void 0},ru=function(d,S,O){(O!==void 0&&!E(d[S],O)||O===void 0&&!(S in d))&&ya(d,S,O)},Vf=Function.prototype,el=Object.prototype,Hu=Vf.toString,hf=el.hasOwnProperty,df=Hu.call(Object),lu=function(d){if(!ar(d)||Ot(d)!="[object Object]")return!1;var S=Ba(d);if(S===null)return!0;var O=hf.call(S,"constructor")&&S.constructor;return typeof O=="function"&&O instanceof O&&Hu.call(O)==df},xs=function(d,S){if((S!=="constructor"||typeof d[S]!="function")&&S!="__proto__")return d[S]},js=function(d){return be(d,ke(d))},ju=function(d,S,O,X,at,st,pt){var xt=xs(d,O),Mt=xs(S,O),Ft=pt.get(Mt);if(Ft)ru(d,O,Ft);else{var re=st?st(xt,Mt,O+"",d,S,pt):void 0,qt=re===void 0;if(qt){var Ee=vt(Mt),Ve=!Ee&&P(Mt),Mr=!Ee&&!Ve&&Ae(Mt);re=Mt,Ee||Ve||Mr?vt(xt)?re=xt:of(xt)?re=en(xt):Ve?(qt=!1,re=lr(Mt,!0)):Mr?(qt=!1,re=Ds(Mt,!0)):re=[]:lu(Mt)||tn(Mt)?(re=xt,tn(xt)?re=js(xt):Wt(xt)&&!De(xt)||(re=bi(Mt))):qt=!1}qt&&(pt.set(Mt,re),at(re,Mt,X,st,pt),pt.delete(Mt)),ru(d,O,re)}},ws=function d(S,O,X,at,st){S!==O&&As(O,function(pt,xt){if(st||(st=new qn),Wt(pt))ju(S,O,xt,X,d,at,st);else{var Mt=at?at(xs(S,xt),pt,xt+"",S,O,st):void 0;Mt===void 0&&(Mt=pt),ru(S,xt,Mt)}},ke)},Co=function(d){return Oo(function(S,O){var X=-1,at=O.length,st=at>1?O[at-1]:void 0,pt=at>2?O[2]:void 0;for(st=d.length>3&&typeof st=="function"?(at--,st):void 0,pt&&sa(O[0],O[1],pt)&&(st=at<3?void 0:st,at=1),S=Object(S);++X<at;){var xt=O[X];xt&&d(S,xt,X,st)}return S})}(function(d,S,O){ws(d,S,O)}),ks=function(d,S){return d<S},vf=function(d){return d&&d.length?as(d,So,ks):void 0},Gl=function(d,S){return d&&d.length?as(d,No(S),ks):void 0},pf=function(){return ht.Date.now()},rl=function(d,S,O,X){if(!Wt(d))return d;for(var at=-1,st=(S=Ui(S,d)).length,pt=st-1,xt=d;xt!=null&&++at<st;){var Mt=yo(S[at]),Ft=O;if(Mt==="__proto__"||Mt==="constructor"||Mt==="prototype")return d;if(at!=pt){var re=xt[Mt];(Ft=X?X(re,Mt,xt):void 0)===void 0&&(Ft=Wt(re)?re:T(S[at+1])?[]:{})}qe(xt,Mt,Ft),xt=xt[Mt]}return d},nl=function(d,S,O){for(var X=-1,at=S.length,st={};++X<at;){var pt=S[X],xt=Js(d,pt);O(xt,pt)&&rl(st,Ui(pt,d),xt)}return st},al=function(d,S){return nl(d,S,function(O,X){return uu(d,X)})},il=function(d){return ms(Ua(d,void 0,wi),d+"")}(function(d,S){return d==null?{}:al(d,S)}),Mc=Math.ceil,Hf=Math.max,zl=function(d,S,O,X){for(var at=-1,st=Hf(Mc((S-d)/(O||1)),0),pt=Array(st);st--;)pt[X?st:++at]=d,d+=O;return pt},Ul=function(d){return function(S,O,X){return X&&typeof X!="number"&&sa(S,O,X)&&(O=X=void 0),S=Qa(S),O===void 0?(O=S,S=0):O=Qa(O),X=X===void 0?S<O?1:-1:Qa(X),zl(S,O,X,d)}}(),ol=function(d,S){var O=d.length;for(d.sort(S);O--;)d[O]=d[O].value;return d},gf=function(d,S){if(d!==S){var O=d!==void 0,X=d===null,at=d==d,st=gs(d),pt=S!==void 0,xt=S===null,Mt=S==S,Ft=gs(S);if(!xt&&!Ft&&!st&&d>S||st&&pt&&Mt&&!xt&&!Ft||X&&pt&&Mt||!O&&Mt||!at)return 1;if(!X&&!st&&!Ft&&d<S||Ft&&O&&at&&!X&&!st||xt&&O&&at||!pt&&at||!Mt)return-1}return 0},sl=function(d,S,O){for(var X=-1,at=d.criteria,st=S.criteria,pt=at.length,xt=O.length;++X<pt;){var Mt=gf(at[X],st[X]);if(Mt)return X>=xt?Mt:Mt*(O[X]=="desc"?-1:1)}return d.index-S.index},yf=function(d,S,O){S=S.length?oi(S,function(st){return vt(st)?function(pt){return Js(pt,st.length===1?st[0]:st)}:st}):[So];var X=-1;S=oi(S,Dt(No));var at=lt(d,function(st,pt,xt){return{criteria:oi(S,function(Mt){return Mt(st)}),index:++X,value:st}});return ol(at,function(st,pt){return sl(st,pt,O)})},ul=Oo(function(d,S){if(d==null)return[];var O=S.length;return O>1&&sa(d,S[0],S[1])?S=[]:O>2&&sa(S[0],S[1],S[2])&&(S=[S[0]]),yf(d,Oi(S,1),[])}),jf=0,is=function(d){var S=++jf;return _u(d)+S},fl=function(d,S,O){for(var X=-1,at=d.length,st=S.length,pt={};++X<at;){var xt=X<st?S[X]:void 0;O(pt,d[X],xt)}return pt},Zf,Ac=function(d,S){return fl(d||[],S||[],qe)};try{Zf={cloneDeep:kn,constant:co,defaults:aa,each:hi,filter:nf,find:di,flatten:wi,forEach:Lo,forIn:yi,has:Bs,isUndefined:L,last:Tu,map:wt,mapValues:Wf,max:lf,merge:Co,min:vf,minBy:Gl,now:pf,pick:il,range:Ul,reduce:Vt,sortBy:ul,uniqueId:is,values:Ec,zipObject:Ac}}catch(d){}Zf||(Zf=window._);var Re=Zf,Iu=zs;function zs(){var d={};d._next=d._prev=d,this._sentinel=d}function qf(d){d._prev._next=d._next,d._next._prev=d._prev,delete d._next,delete d._prev}function cl(d,S){if(d!=="_next"&&d!=="_prev")return S}zs.prototype.dequeue=function(){var d=this._sentinel,S=d._prev;if(S!==d)return qf(S),S},zs.prototype.enqueue=function(d){var S=this._sentinel;d._prev&&d._next&&qf(d),d._next=S._next,S._next._prev=d,S._next=d,d._prev=S},zs.prototype.toString=function(){for(var d=[],S=this._sentinel,O=S._prev;O!==S;)d.push(JSON.stringify(O,cl)),O=O._prev;return"["+d.join(", ")+"]"};var ll=Mn.Graph,Us=function(d,S){if(d.nodeCount()<=1)return[];var O=function(at,st){var pt=new ll,xt=0,Mt=0;Re.forEach(at.nodes(),function(qt){pt.setNode(qt,{v:qt,in:0,out:0})}),Re.forEach(at.edges(),function(qt){var Ee=pt.edge(qt.v,qt.w)||0,Ve=st(qt),Mr=Ee+Ve;pt.setEdge(qt.v,qt.w,Mr),Mt=Math.max(Mt,pt.node(qt.v).out+=Ve),xt=Math.max(xt,pt.node(qt.w).in+=Ve)});var Ft=Re.range(Mt+xt+3).map(function(){return new Iu}),re=xt+1;return Re.forEach(pt.nodes(),function(qt){mf(Ft,re,pt.node(qt))}),{graph:pt,buckets:Ft,zeroIdx:re}}(d,S||hl),X=function(at,st,pt){for(var xt,Mt=[],Ft=st[st.length-1],re=st[0];at.nodeCount();){for(;xt=re.dequeue();)ku(at,st,pt,xt);for(;xt=Ft.dequeue();)ku(at,st,pt,xt);if(at.nodeCount()){for(var qt=st.length-2;qt>0;--qt)if(xt=st[qt].dequeue()){Mt=Mt.concat(ku(at,st,pt,xt,!0));break}}}return Mt}(O.graph,O.buckets,O.zeroIdx);return Re.flatten(Re.map(X,function(at){return d.outEdges(at.v,at.w)}),!0)},hl=Re.constant(1);function ku(d,S,O,X,at){var st=at?[]:void 0;return Re.forEach(d.inEdges(X.v),function(pt){var xt=d.edge(pt),Mt=d.node(pt.v);at&&st.push({v:pt.v,w:pt.w}),Mt.out-=xt,mf(S,O,Mt)}),Re.forEach(d.outEdges(X.v),function(pt){var xt=d.edge(pt),Mt=pt.w,Ft=d.node(Mt);Ft.in-=xt,mf(S,O,Ft)}),d.removeNode(X.v),st}function mf(d,S,O){O.out?O.in?d[O.out-O.in+S].enqueue(O):d[d.length-1].enqueue(O):d[0].enqueue(O)}var Cc={run:function(d){var S=d.graph().acyclicer==="greedy"?Us(d,function(O){return function(X){return O.edge(X).weight}}(d)):function(O){var X=[],at={},st={};function pt(xt){Re.has(st,xt)||(st[xt]=!0,at[xt]=!0,Re.forEach(O.outEdges(xt),function(Mt){Re.has(at,Mt.w)?X.push(Mt):pt(Mt.w)}),delete at[xt])}return Re.forEach(O.nodes(),pt),X}(d);Re.forEach(S,function(O){var X=d.edge(O);d.removeEdge(O),X.forwardName=O.name,X.reversed=!0,d.setEdge(O.w,O.v,X,Re.uniqueId("rev"))})},undo:function(d){Re.forEach(d.edges(),function(S){var O=d.edge(S);if(O.reversed){d.removeEdge(S);var X=O.forwardName;delete O.reversed,delete O.forwardName,d.setEdge(S.w,S.v,O,X)}})}},Tc=Mn.Graph,mo={addDummyNode:Lu,simplify:function(d){var S=new Tc().setGraph(d.graph());return Re.forEach(d.nodes(),function(O){S.setNode(O,d.node(O))}),Re.forEach(d.edges(),function(O){var X=S.edge(O.v,O.w)||{weight:0,minlen:1},at=d.edge(O);S.setEdge(O.v,O.w,{weight:X.weight+at.weight,minlen:Math.max(X.minlen,at.minlen)})}),S},asNonCompoundGraph:function(d){var S=new Tc({multigraph:d.isMultigraph()}).setGraph(d.graph());return Re.forEach(d.nodes(),function(O){d.children(O).length||S.setNode(O,d.node(O))}),Re.forEach(d.edges(),function(O){S.setEdge(O,d.edge(O))}),S},successorWeights:function(d){var S=Re.map(d.nodes(),function(O){var X={};return Re.forEach(d.outEdges(O),function(at){X[at.w]=(X[at.w]||0)+d.edge(at).weight}),X});return Re.zipObject(d.nodes(),S)},predecessorWeights:function(d){var S=Re.map(d.nodes(),function(O){var X={};return Re.forEach(d.inEdges(O),function(at){X[at.v]=(X[at.v]||0)+d.edge(at).weight}),X});return Re.zipObject(d.nodes(),S)},intersectRect:function(d,S){var O,X,at=d.x,st=d.y,pt=S.x-at,xt=S.y-st,Mt=d.width/2,Ft=d.height/2;if(!pt&&!xt)throw new Error("Not possible to find intersection inside of the rectangle");return Math.abs(xt)*Mt>Math.abs(pt)*Ft?(xt<0&&(Ft=-Ft),O=Ft*pt/xt,X=Ft):(pt<0&&(Mt=-Mt),O=Mt,X=Mt*xt/pt),{x:at+O,y:st+X}},buildLayerMatrix:function(d){var S=Re.map(Re.range(Ic(d)+1),function(){return[]});return Re.forEach(d.nodes(),function(O){var X=d.node(O),at=X.rank;Re.isUndefined(at)||(S[at][X.order]=O)}),S},normalizeRanks:function(d){var S=Re.min(Re.map(d.nodes(),function(O){return d.node(O).rank}));Re.forEach(d.nodes(),function(O){var X=d.node(O);Re.has(X,"rank")&&(X.rank-=S)})},removeEmptyRanks:function(d){var S=Re.min(Re.map(d.nodes(),function(st){return d.node(st).rank})),O=[];Re.forEach(d.nodes(),function(st){var pt=d.node(st).rank-S;O[pt]||(O[pt]=[]),O[pt].push(st)});var X=0,at=d.graph().nodeRankFactor;Re.forEach(O,function(st,pt){Re.isUndefined(st)&&pt%at!=0?--X:X&&Re.forEach(st,function(xt){d.node(xt).rank+=X})})},addBorderNode:function(d,S,O,X){var at={width:0,height:0};return arguments.length>=4&&(at.rank=O,at.order=X),Lu(d,"border",at,S)},maxRank:Ic,partition:function(d,S){var O={lhs:[],rhs:[]};return Re.forEach(d,function(X){S(X)?O.lhs.push(X):O.rhs.push(X)}),O},time:function(d,S){var O=Re.now();try{return S()}finally{console.log(d+" time: "+(Re.now()-O)+"ms")}},notime:function(d,S){return S()}};function Lu(d,S,O,X){var at;do at=Re.uniqueId(X);while(d.hasNode(at));return O.dummy=S,d.setNode(at,O),at}function Ic(d){return Re.max(Re.map(d.nodes(),function(S){var O=d.node(S).rank;if(!Re.isUndefined(O))return O}))}var $f={run:function(d){d.graph().dummyChains=[],Re.forEach(d.edges(),function(S){(function(O,X){var at,st,pt,xt=X.v,Mt=O.node(xt).rank,Ft=X.w,re=O.node(Ft).rank,qt=X.name,Ee=O.edge(X),Ve=Ee.labelRank;if(re!==Mt+1){for(O.removeEdge(X),pt=0,++Mt;Mt<re;++pt,++Mt)Ee.points=[],st={width:0,height:0,edgeLabel:Ee,edgeObj:X,rank:Mt},at=mo.addDummyNode(O,"edge",st,"_d"),Mt===Ve&&(st.width=Ee.width,st.height=Ee.height,st.dummy="edge-label",st.labelpos=Ee.labelpos),O.setEdge(xt,at,{weight:Ee.weight},qt),pt===0&&O.graph().dummyChains.push(at),xt=at;O.setEdge(xt,Ft,{weight:Ee.weight},qt)}})(d,S)})},undo:function(d){Re.forEach(d.graph().dummyChains,function(S){var O,X=d.node(S),at=X.edgeLabel;for(d.setEdge(X.edgeObj,at);X.dummy;)O=d.successors(S)[0],d.removeNode(S),at.points.push({x:X.x,y:X.y}),X.dummy==="edge-label"&&(at.x=X.x,at.y=X.y,at.width=X.width,at.height=X.height),S=O,X=d.node(S)})}},hu=function(d){var S={};Re.forEach(d.sources(),function O(X){var at=d.node(X);if(Re.has(S,X))return at.rank;S[X]=!0;var st=Re.min(Re.map(d.outEdges(X),function(pt){return O(pt.w)-d.edge(pt).minlen}));return st!==Number.POSITIVE_INFINITY&&st!=null||(st=0),at.rank=st})},bf=function(d,S){return d.node(S.w).rank-d.node(S.v).rank-d.edge(S).minlen},Nu=Mn.Graph,du=bf,Zu=function(d){var S,O,X=new Nu({directed:!1}),at=d.nodes()[0],st=d.nodeCount();for(X.setNode(at,{});xf(X,d)<st;)S=wf(X,d),O=X.hasNode(S.v)?du(d,S):-du(d,S),Ou(X,d,O);return X};function xf(d,S){return Re.forEach(d.nodes(),function O(X){Re.forEach(S.nodeEdges(X),function(at){var st=at.v,pt=X===st?at.w:st;d.hasNode(pt)||du(S,at)||(d.setNode(pt,{}),d.setEdge(X,pt,{}),O(pt))})}),d.nodeCount()}function wf(d,S){return Re.minBy(S.edges(),function(O){if(d.hasNode(O.v)!==d.hasNode(O.w))return du(S,O)})}function Ou(d,S,O){Re.forEach(d.nodes(),function(X){S.node(X).rank+=O})}var Kf=bf,kc=hu,Ef=Mn.alg.preorder,dl=Mn.alg.postorder,Qf=mo.simplify,_f=Es;function Es(d){d=Qf(d),kc(d);var S,O=Zu(d);for(Lc(O),Jf(O,d);S=Sf(O);)qu(O,d,S,Yl(O,d,S))}function Jf(d,S){var O=dl(d,d.nodes());O=O.slice(0,O.length-1),Re.forEach(O,function(X){(function(at,st,pt){var xt=at.node(pt).parent;at.edge(pt,xt).cutvalue=Xl(at,st,pt)})(d,S,X)})}function Xl(d,S,O){var X=d.node(O).parent,at=!0,st=S.edge(O,X),pt=0;return st||(at=!1,st=S.edge(X,O)),pt=st.weight,Re.forEach(S.nodeEdges(O),function(xt){var Mt,Ft,re=xt.v===O,qt=re?xt.w:xt.v;if(qt!==X){var Ee=re===at,Ve=S.edge(xt).weight;if(pt+=Ee?Ve:-Ve,Mt=O,Ft=qt,d.hasEdge(Mt,Ft)){var Mr=d.edge(O,qt).cutvalue;pt+=Ee?-Mr:Mr}}}),pt}function Lc(d,S){arguments.length<2&&(S=d.nodes()[0]),vl(d,{},1,S)}function vl(d,S,O,X,at){var st=O,pt=d.node(X);return S[X]=!0,Re.forEach(d.neighbors(X),function(xt){Re.has(S,xt)||(O=vl(d,S,O,xt,X))}),pt.low=st,pt.lim=O++,at?pt.parent=at:delete pt.parent,O}function Sf(d){return Re.find(d.edges(),function(S){return d.edge(S).cutvalue<0})}function Yl(d,S,O){var X=O.v,at=O.w;S.hasEdge(X,at)||(X=O.w,at=O.v);var st=d.node(X),pt=d.node(at),xt=st,Mt=!1;st.lim>pt.lim&&(xt=pt,Mt=!0);var Ft=Re.filter(S.edges(),function(re){return Mt===Wl(d,d.node(re.v),xt)&&Mt!==Wl(d,d.node(re.w),xt)});return Re.minBy(Ft,function(re){return Kf(S,re)})}function qu(d,S,O,X){var at=O.v,st=O.w;d.removeEdge(at,st),d.setEdge(X.v,X.w,{}),Lc(d),Jf(d,S),function(pt,xt){var Mt=Re.find(pt.nodes(),function(re){return!xt.node(re).parent}),Ft=Ef(pt,Mt);Ft=Ft.slice(1),Re.forEach(Ft,function(re){var qt=pt.node(re).parent,Ee=xt.edge(re,qt),Ve=!1;Ee||(Ee=xt.edge(qt,re),Ve=!0),xt.node(re).rank=xt.node(qt).rank+(Ve?Ee.minlen:-Ee.minlen)})}(d,S)}function Wl(d,S,O){return O.low<=S.lim&&S.lim<=O.lim}Es.initLowLimValues=Lc,Es.initCutValues=Jf,Es.calcCutValue=Xl,Es.leaveEdge=Sf,Es.enterEdge=Yl,Es.exchangeEdges=qu;var pl=hu,gh=function(d){switch(d.graph().ranker){case"network-simplex":gl(d);break;case"tight-tree":(function(S){pl(S),Zu(S)})(d);break;case"longest-path":Vl(d);break;default:gl(d)}},Vl=pl;function gl(d){_f(d)}var yl=function(d){var S=function(O){var X={},at=0;function st(pt){var xt=at;Re.forEach(O.children(pt),st),X[pt]={low:xt,lim:at++}}return Re.forEach(O.children(),st),X}(d);Re.forEach(d.graph().dummyChains,function(O){for(var X=d.node(O),at=X.edgeObj,st=function(qt,Ee,Ve,Mr){var Qe,rr,tr=[],Jr=[],mn=Math.min(Ee[Ve].low,Ee[Mr].low),un=Math.max(Ee[Ve].lim,Ee[Mr].lim);Qe=Ve;do Qe=qt.parent(Qe),tr.push(Qe);while(Qe&&(Ee[Qe].low>mn||un>Ee[Qe].lim));for(rr=Qe,Qe=Mr;(Qe=qt.parent(Qe))!==rr;)Jr.push(Qe);return{path:tr.concat(Jr.reverse()),lca:rr}}(d,S,at.v,at.w),pt=st.path,xt=st.lca,Mt=0,Ft=pt[Mt],re=!0;O!==at.w;){if(X=d.node(O),re){for(;(Ft=pt[Mt])!==xt&&d.node(Ft).maxRank<X.rank;)Mt++;Ft===xt&&(re=!1)}if(!re){for(;Mt<pt.length-1&&d.node(Ft=pt[Mt+1]).minRank<=X.rank;)Mt++;Ft=pt[Mt]}d.setParent(O,Ft),O=d.successors(O)[0]}})},Hl={run:function(d){var S=mo.addDummyNode(d,"root",{},"_root"),O=function(pt){var xt={};function Mt(Ft,re){var qt=pt.children(Ft);qt&&qt.length&&Re.forEach(qt,function(Ee){Mt(Ee,re+1)}),xt[Ft]=re}return Re.forEach(pt.children(),function(Ft){Mt(Ft,1)}),xt}(d),X=Re.max(Re.values(O))-1,at=2*X+1;d.graph().nestingRoot=S,Re.forEach(d.edges(),function(pt){d.edge(pt).minlen*=at});var st=function(pt){return Re.reduce(pt.edges(),function(xt,Mt){return xt+pt.edge(Mt).weight},0)}(d)+1;Re.forEach(d.children(),function(pt){jl(d,S,at,st,X,O,pt)}),d.graph().nodeRankFactor=at},cleanup:function(d){var S=d.graph();d.removeNode(S.nestingRoot),delete S.nestingRoot,Re.forEach(d.edges(),function(O){d.edge(O).nestingEdge&&d.removeEdge(O)})}};function jl(d,S,O,X,at,st,pt){var xt=d.children(pt);if(xt.length){var Mt=mo.addBorderNode(d,"_bt"),Ft=mo.addBorderNode(d,"_bb"),re=d.node(pt);d.setParent(Mt,pt),re.borderTop=Mt,d.setParent(Ft,pt),re.borderBottom=Ft,Re.forEach(xt,function(qt){jl(d,S,O,X,at,st,qt);var Ee=d.node(qt),Ve=Ee.borderTop?Ee.borderTop:qt,Mr=Ee.borderBottom?Ee.borderBottom:qt,Qe=Ee.borderTop?X:2*X,rr=Ve!==Mr?1:at-st[pt]+1;d.setEdge(Mt,Ve,{weight:Qe,minlen:rr,nestingEdge:!0}),d.setEdge(Mr,Ft,{weight:Qe,minlen:rr,nestingEdge:!0})}),d.parent(pt)||d.setEdge(S,Mt,{weight:0,minlen:at+st[pt]})}else pt!==S&&d.setEdge(S,pt,{weight:0,minlen:O})}var Zl=function(d){Re.forEach(d.children(),function S(O){var X=d.children(O),at=d.node(O);if(X.length&&Re.forEach(X,S),Re.has(at,"minRank")){at.borderLeft=[],at.borderRight=[];for(var st=at.minRank,pt=at.maxRank+1;st<pt;++st)ml(d,"borderLeft","_bl",O,at,st),ml(d,"borderRight","_br",O,at,st)}})};function ml(d,S,O,X,at,st){var pt={width:0,height:0,rank:st,borderType:S},xt=at[S][st-1],Mt=mo.addDummyNode(d,"border",pt,O);at[S][st]=Mt,d.setParent(Mt,X),xt&&d.setEdge(xt,Mt,{weight:1})}var bl={adjust:function(d){var S=d.graph().rankdir.toLowerCase();S!=="lr"&&S!=="rl"||ql(d)},undo:function(d){var S=d.graph().rankdir.toLowerCase();S!=="bt"&&S!=="rl"||function(O){Re.forEach(O.nodes(),function(X){Nc(O.node(X))}),Re.forEach(O.edges(),function(X){var at=O.edge(X);Re.forEach(at.points,Nc),Re.has(at,"y")&&Nc(at)})}(d),S!=="lr"&&S!=="rl"||(function(O){Re.forEach(O.nodes(),function(X){Xs(O.node(X))}),Re.forEach(O.edges(),function(X){var at=O.edge(X);Re.forEach(at.points,Xs),Re.has(at,"x")&&Xs(at)})}(d),ql(d))}};function ql(d){Re.forEach(d.nodes(),function(S){$l(d.node(S))}),Re.forEach(d.edges(),function(S){$l(d.edge(S))})}function $l(d){var S=d.width;d.width=d.height,d.height=S}function Nc(d){d.y=-d.y}function Xs(d){var S=d.x;d.x=d.y,d.y=S}var Oc=function(d){var S={},O=Re.filter(d.nodes(),function(xt){return!d.children(xt).length}),X=Re.max(Re.map(O,function(xt){return d.node(xt).rank})),at=Re.map(Re.range(X+1),function(){return[]});function st(xt){if(!Re.has(S,xt)){S[xt]=!0;var Mt=d.node(xt);at[Mt.rank].push(xt),Re.forEach(d.successors(xt),st)}}var pt=Re.sortBy(O,function(xt){return d.node(xt).rank});return Re.forEach(pt,st),at},Dc=function(d,S){for(var O=0,X=1;X<S.length;++X)O+=tc(d,S[X-1],S[X]);return O};function tc(d,S,O){for(var X=Re.zipObject(O,Re.map(O,function(Ft,re){return re})),at=Re.flatten(Re.map(S,function(Ft){return Re.sortBy(Re.map(d.outEdges(Ft),function(re){return{pos:X[re.w],weight:d.edge(re).weight}}),"pos")}),!0),st=1;st<O.length;)st<<=1;var pt=2*st-1;st-=1;var xt=Re.map(new Array(pt),function(){return 0}),Mt=0;return Re.forEach(at.forEach(function(Ft){var re=Ft.pos+st;xt[re]+=Ft.weight;for(var qt=0;re>0;)re%2&&(qt+=xt[re+1]),xt[re=re-1>>1]+=Ft.weight;Mt+=Ft.weight*qt})),Mt}var xl=function(d,S){return Re.map(S,function(O){var X=d.inEdges(O);if(X.length){var at=Re.reduce(X,function(st,pt){var xt=d.edge(pt),Mt=d.node(pt.v);return{sum:st.sum+xt.weight*Mt.order,weight:st.weight+xt.weight}},{sum:0,weight:0});return{v:O,barycenter:at.sum/at.weight,weight:at.weight}}return{v:O}})},Pc=function(d,S){var O={};return Re.forEach(d,function(X,at){var st=O[X.v]={indegree:0,in:[],out:[],vs:[X.v],i:at};Re.isUndefined(X.barycenter)||(st.barycenter=X.barycenter,st.weight=X.weight)}),Re.forEach(S.edges(),function(X){var at=O[X.v],st=O[X.w];Re.isUndefined(at)||Re.isUndefined(st)||(st.indegree++,at.out.push(O[X.w]))}),function(X){var at=[];function st(Mt){return function(Ft){Ft.merged||(Re.isUndefined(Ft.barycenter)||Re.isUndefined(Mt.barycenter)||Ft.barycenter>=Mt.barycenter)&&function(re,qt){var Ee=0,Ve=0;re.weight&&(Ee+=re.barycenter*re.weight,Ve+=re.weight),qt.weight&&(Ee+=qt.barycenter*qt.weight,Ve+=qt.weight),re.vs=qt.vs.concat(re.vs),re.barycenter=Ee/Ve,re.weight=Ve,re.i=Math.min(qt.i,re.i),qt.merged=!0}(Mt,Ft)}}function pt(Mt){return function(Ft){Ft.in.push(Mt),--Ft.indegree==0&&X.push(Ft)}}for(;X.length;){var xt=X.pop();at.push(xt),Re.forEach(xt.in.reverse(),st(xt)),Re.forEach(xt.out,pt(xt))}return Re.map(Re.filter(at,function(Mt){return!Mt.merged}),function(Mt){return Re.pick(Mt,["vs","i","barycenter","weight"])})}(Re.filter(O,function(X){return!X.indegree}))},ec=function(d,S){var O=mo.partition(d,function(qt){return Re.has(qt,"barycenter")}),X=O.lhs,at=Re.sortBy(O.rhs,function(qt){return-qt.i}),st=[],pt=0,xt=0,Mt=0;X.sort((Ft=!!S,function(qt,Ee){return qt.barycenter<Ee.barycenter?-1:qt.barycenter>Ee.barycenter?1:Ft?Ee.i-qt.i:qt.i-Ee.i})),Mt=$u(st,at,Mt),Re.forEach(X,function(qt){Mt+=qt.vs.length,st.push(qt.vs),pt+=qt.barycenter*qt.weight,xt+=qt.weight,Mt=$u(st,at,Mt)});var Ft,re={vs:Re.flatten(st,!0)};return xt&&(re.barycenter=pt/xt,re.weight=xt),re};function $u(d,S,O){for(var X;S.length&&(X=Re.last(S)).i<=O;)S.pop(),d.push(X.vs),O++;return O}var wl=function d(S,O,X,at){var st=S.children(O),pt=S.node(O),xt=pt?pt.borderLeft:void 0,Mt=pt?pt.borderRight:void 0,Ft={};xt&&(st=Re.filter(st,function(Qe){return Qe!==xt&&Qe!==Mt}));var re=xl(S,st);Re.forEach(re,function(Qe){if(S.children(Qe.v).length){var rr=d(S,Qe.v,X,at);Ft[Qe.v]=rr,Re.has(rr,"barycenter")&&(tr=Qe,Jr=rr,Re.isUndefined(tr.barycenter)?(tr.barycenter=Jr.barycenter,tr.weight=Jr.weight):(tr.barycenter=(tr.barycenter*tr.weight+Jr.barycenter*Jr.weight)/(tr.weight+Jr.weight),tr.weight+=Jr.weight))}var tr,Jr});var qt=Pc(re,X);(function(Qe,rr){Re.forEach(Qe,function(tr){tr.vs=Re.flatten(tr.vs.map(function(Jr){return rr[Jr]?rr[Jr].vs:Jr}),!0)})})(qt,Ft);var Ee=ec(qt,at);if(xt&&(Ee.vs=Re.flatten([xt,Ee.vs,Mt],!0),S.predecessors(xt).length)){var Ve=S.node(S.predecessors(xt)[0]),Mr=S.node(S.predecessors(Mt)[0]);Re.has(Ee,"barycenter")||(Ee.barycenter=0,Ee.weight=0),Ee.barycenter=(Ee.barycenter*Ee.weight+Ve.order+Mr.order)/(Ee.weight+2),Ee.weight+=2}return Ee},Rc=Mn.Graph,Bc=function(d,S,O){var X=function(st){for(var pt;st.hasNode(pt=Re.uniqueId("_root")););return pt}(d),at=new Rc({compound:!0}).setGraph({root:X}).setDefaultNodeLabel(function(st){return d.node(st)});return Re.forEach(d.nodes(),function(st){var pt=d.node(st),xt=d.parent(st);(pt.rank===S||pt.minRank<=S&&S<=pt.maxRank)&&(at.setNode(st),at.setParent(st,xt||X),Re.forEach(d[O](st),function(Mt){var Ft=Mt.v===st?Mt.w:Mt.v,re=at.edge(Ft,st),qt=Re.isUndefined(re)?0:re.weight;at.setEdge(Ft,st,{weight:d.edge(Mt).weight+qt})}),Re.has(pt,"minRank")&&at.setNode(st,{borderLeft:pt.borderLeft[S],borderRight:pt.borderRight[S]}))}),at},Fc=function(d,S,O){var X,at={};Re.forEach(O,function(st){for(var pt,xt,Mt=d.parent(st);Mt;){if((pt=d.parent(Mt))?(xt=at[pt],at[pt]=Mt):(xt=X,X=Mt),xt&&xt!==Mt)return void S.setEdge(xt,Mt);Mt=pt}})},rc=Mn.Graph,nc=function(d){var S=mo.maxRank(d),O=Mf(d,Re.range(1,S+1),"inEdges"),X=Mf(d,Re.range(S-1,-1,-1),"outEdges"),at=Oc(d);vu(d,at);for(var st,pt=Number.POSITIVE_INFINITY,xt=0,Mt=0;Mt<4;++xt,++Mt){ac(xt%2?O:X,xt%4>=2),at=mo.buildLayerMatrix(d);var Ft=Dc(d,at);Ft<pt&&(Mt=0,st=Re.cloneDeep(at),pt=Ft)}vu(d,st)};function Mf(d,S,O){return Re.map(S,function(X){return Bc(d,X,O)})}function ac(d,S){var O=new rc;Re.forEach(d,function(X){var at=X.graph().root,st=wl(X,at,O,S);Re.forEach(st.vs,function(pt,xt){X.node(pt).order=xt}),Fc(X,O,st.vs)})}function vu(d,S){Re.forEach(S,function(O){Re.forEach(O,function(X,at){d.node(X).order=at})})}var Kl=Mn.Graph,pu=function(d){var S,O=mo.buildLayerMatrix(d),X=Re.merge(Ku(d,O),Gc(d,O)),at={};Re.forEach(["u","d"],function(pt){S=pt==="u"?O:Re.values(O).reverse(),Re.forEach(["l","r"],function(xt){xt==="r"&&(S=Re.map(S,function(qt){return Re.values(qt).reverse()}));var Mt=(pt==="u"?d.predecessors:d.successors).bind(d),Ft=Ql(d,S,X,Mt),re=Af(d,S,Ft.root,Ft.align,xt==="r");xt==="r"&&(re=Re.mapValues(re,function(qt){return-qt})),at[pt+xt]=re})});var st=nu(d,at);return Uc(at,st),Jl(at,d.graph().align)};function Ku(d,S){var O={};return Re.reduce(S,function(X,at){var st=0,pt=0,xt=X.length,Mt=Re.last(at);return Re.forEach(at,function(Ft,re){var qt=function(Ve,Mr){if(Ve.node(Mr).dummy)return Re.find(Ve.predecessors(Mr),function(Qe){return Ve.node(Qe).dummy})}(d,Ft),Ee=qt?d.node(qt).order:xt;(qt||Ft===Mt)&&(Re.forEach(at.slice(pt,re+1),function(Ve){Re.forEach(d.predecessors(Ve),function(Mr){var Qe=d.node(Mr),rr=Qe.order;!(rr<st||Ee<rr)||Qe.dummy&&d.node(Ve).dummy||zc(O,Mr,Ve)})}),pt=re+1,st=Ee)}),at}),O}function Gc(d,S){var O={};function X(at,st,pt,xt,Mt){var Ft;Re.forEach(Re.range(st,pt),function(re){Ft=at[re],d.node(Ft).dummy&&Re.forEach(d.predecessors(Ft),function(qt){var Ee=d.node(qt);Ee.dummy&&(Ee.order<xt||Ee.order>Mt)&&zc(O,qt,Ft)})})}return Re.reduce(S,function(at,st){var pt,xt=-1,Mt=0;return Re.forEach(st,function(Ft,re){if(d.node(Ft).dummy==="border"){var qt=d.predecessors(Ft);qt.length&&(pt=d.node(qt[0]).order,X(st,Mt,re,xt,pt),Mt=re,xt=pt)}X(st,Mt,st.length,pt,at.length)}),st}),O}function zc(d,S,O){if(S>O){var X=S;S=O,O=X}var at=d[S];at||(d[S]=at={}),at[O]=!0}function yh(d,S,O){if(S>O){var X=S;S=O,O=X}return Re.has(d[S],O)}function Ql(d,S,O,X){var at={},st={},pt={};return Re.forEach(S,function(xt){Re.forEach(xt,function(Mt,Ft){at[Mt]=Mt,st[Mt]=Mt,pt[Mt]=Ft})}),Re.forEach(S,function(xt){var Mt=-1;Re.forEach(xt,function(Ft){var re=X(Ft);if(re.length)for(var qt=((re=Re.sortBy(re,function(Qe){return pt[Qe]})).length-1)/2,Ee=Math.floor(qt),Ve=Math.ceil(qt);Ee<=Ve;++Ee){var Mr=re[Ee];st[Ft]===Ft&&Mt<pt[Mr]&&!yh(O,Ft,Mr)&&(st[Mr]=Ft,st[Ft]=at[Ft]=at[Mr],Mt=pt[Mr])}})}),{root:at,align:st}}function Af(d,S,O,X,at){var st={},pt=function(Ft,re,qt,Ee){var Ve=new Kl,Mr=Ft.graph(),Qe=function(rr,tr,Jr){return function(mn,un,Xn){var Rn,Jn=mn.node(un),va=mn.node(Xn),ua=0;if(ua+=Jn.width/2,Re.has(Jn,"labelpos"))switch(Jn.labelpos.toLowerCase()){case"l":Rn=-Jn.width/2;break;case"r":Rn=Jn.width/2}if(Rn&&(ua+=Jr?Rn:-Rn),Rn=0,ua+=(Jn.dummy?tr:rr)/2,ua+=(va.dummy?tr:rr)/2,ua+=va.width/2,Re.has(va,"labelpos"))switch(va.labelpos.toLowerCase()){case"l":Rn=va.width/2;break;case"r":Rn=-va.width/2}return Rn&&(ua+=Jr?Rn:-Rn),Rn=0,ua}}(Mr.nodesep,Mr.edgesep,Ee);return Re.forEach(re,function(rr){var tr;Re.forEach(rr,function(Jr){var mn=qt[Jr];if(Ve.setNode(mn),tr){var un=qt[tr],Xn=Ve.edge(un,mn);Ve.setEdge(un,mn,Math.max(Qe(Ft,Jr,tr),Xn||0))}tr=Jr})}),Ve}(d,S,O,at),xt=at?"borderLeft":"borderRight";function Mt(Ft,re){for(var qt=pt.nodes(),Ee=qt.pop(),Ve={};Ee;)Ve[Ee]?Ft(Ee):(Ve[Ee]=!0,qt.push(Ee),qt=qt.concat(re(Ee))),Ee=qt.pop()}return Mt(function(Ft){st[Ft]=pt.inEdges(Ft).reduce(function(re,qt){return Math.max(re,st[qt.v]+pt.edge(qt))},0)},pt.predecessors.bind(pt)),Mt(function(Ft){var re=pt.outEdges(Ft).reduce(function(Ee,Ve){return Math.min(Ee,st[Ve.w]-pt.edge(Ve))},Number.POSITIVE_INFINITY),qt=d.node(Ft);re!==Number.POSITIVE_INFINITY&&qt.borderType!==xt&&(st[Ft]=Math.max(st[Ft],re))},pt.successors.bind(pt)),Re.forEach(X,function(Ft){st[Ft]=st[O[Ft]]}),st}function nu(d,S){return Re.minBy(Re.values(S),function(O){var X=Number.NEGATIVE_INFINITY,at=Number.POSITIVE_INFINITY;return Re.forIn(O,function(st,pt){var xt=function(Mt,Ft){return Mt.node(Ft).width}(d,pt)/2;X=Math.max(st+xt,X),at=Math.min(st-xt,at)}),X-at})}function Uc(d,S){var O=Re.values(S),X=Re.min(O),at=Re.max(O);Re.forEach(["u","d"],function(st){Re.forEach(["l","r"],function(pt){var xt,Mt=st+pt,Ft=d[Mt];if(Ft!==S){var re=Re.values(Ft);(xt=pt==="l"?X-Re.min(re):at-Re.max(re))&&(d[Mt]=Re.mapValues(Ft,function(qt){return qt+xt}))}})})}function Jl(d,S){return Re.mapValues(d.ul,function(O,X){if(S)return d[S.toLowerCase()][X];var at=Re.sortBy(Re.map(d,X));return(at[1]+at[2])/2})}var El=pu,mh=function(d){(function(S){var O=mo.buildLayerMatrix(S),X=S.graph().ranksep,at=0;Re.forEach(O,function(st){var pt=Re.max(Re.map(st,function(xt){return S.node(xt).height}));Re.forEach(st,function(xt){S.node(xt).y=at+pt/2}),at+=pt+X})})(d=mo.asNonCompoundGraph(d)),Re.forEach(El(d),function(S,O){d.node(O).x=S})},_l=mo.normalizeRanks,bh=mo.removeEmptyRanks,Ko=mo,th=Mn.Graph,Cf=function(d,S){var O=S&&S.debugTiming?Ko.time:Ko.notime;O("layout",function(){var X=O("  buildLayoutGraph",function(){return function(at){var st=new th({multigraph:!0,compound:!0}),pt=Ml(at.graph());return st.setGraph(Re.merge({},eh,Go(pt,gu),Re.pick(pt,Sl))),Re.forEach(at.nodes(),function(xt){var Mt=Ml(at.node(xt));st.setNode(xt,Re.defaults(Go(Mt,Xc),rh)),st.setParent(xt,at.parent(xt))}),Re.forEach(at.edges(),function(xt){var Mt=Ml(at.edge(xt));st.setEdge(xt,Re.merge({},yu,Go(Mt,os),Re.pick(Mt,eo)))}),st}(d)});O("  runLayout",function(){(function(at,st){st("    makeSpaceForEdgeLabels",function(){(function(pt){var xt=pt.graph();xt.ranksep/=2,Re.forEach(pt.edges(),function(Mt){var Ft=pt.edge(Mt);Ft.minlen*=2,Ft.labelpos.toLowerCase()!=="c"&&(xt.rankdir==="TB"||xt.rankdir==="BT"?Ft.width+=Ft.labeloffset:Ft.height+=Ft.labeloffset)})})(at)}),st("    removeSelfEdges",function(){(function(pt){Re.forEach(pt.edges(),function(xt){if(xt.v===xt.w){var Mt=pt.node(xt.v);Mt.selfEdges||(Mt.selfEdges=[]),Mt.selfEdges.push({e:xt,label:pt.edge(xt)}),pt.removeEdge(xt)}})})(at)}),st("    acyclic",function(){Cc.run(at)}),st("    nestingGraph.run",function(){Hl.run(at)}),st("    rank",function(){gh(Ko.asNonCompoundGraph(at))}),st("    injectEdgeLabelProxies",function(){(function(pt){Re.forEach(pt.edges(),function(xt){var Mt=pt.edge(xt);if(Mt.width&&Mt.height){var Ft=pt.node(xt.v),re={rank:(pt.node(xt.w).rank-Ft.rank)/2+Ft.rank,e:xt};Ko.addDummyNode(pt,"edge-proxy",re,"_ep")}})})(at)}),st("    removeEmptyRanks",function(){bh(at)}),st("    nestingGraph.cleanup",function(){Hl.cleanup(at)}),st("    normalizeRanks",function(){_l(at)}),st("    assignRankMinMax",function(){(function(pt){var xt=0;Re.forEach(pt.nodes(),function(Mt){var Ft=pt.node(Mt);Ft.borderTop&&(Ft.minRank=pt.node(Ft.borderTop).rank,Ft.maxRank=pt.node(Ft.borderBottom).rank,xt=Re.max(xt,Ft.maxRank))}),pt.graph().maxRank=xt})(at)}),st("    removeEdgeLabelProxies",function(){(function(pt){Re.forEach(pt.nodes(),function(xt){var Mt=pt.node(xt);Mt.dummy==="edge-proxy"&&(pt.edge(Mt.e).labelRank=Mt.rank,pt.removeNode(xt))})})(at)}),st("    normalize.run",function(){$f.run(at)}),st("    parentDummyChains",function(){yl(at)}),st("    addBorderSegments",function(){Zl(at)}),st("    order",function(){nc(at)}),st("    insertSelfEdges",function(){(function(pt){var xt=Ko.buildLayerMatrix(pt);Re.forEach(xt,function(Mt){var Ft=0;Re.forEach(Mt,function(re,qt){var Ee=pt.node(re);Ee.order=qt+Ft,Re.forEach(Ee.selfEdges,function(Ve){Ko.addDummyNode(pt,"selfedge",{width:Ve.label.width,height:Ve.label.height,rank:Ee.rank,order:qt+ ++Ft,e:Ve.e,label:Ve.label},"_se")}),delete Ee.selfEdges})})})(at)}),st("    adjustCoordinateSystem",function(){bl.adjust(at)}),st("    position",function(){mh(at)}),st("    positionSelfEdges",function(){(function(pt){Re.forEach(pt.nodes(),function(xt){var Mt=pt.node(xt);if(Mt.dummy==="selfedge"){var Ft=pt.node(Mt.e.v),re=Ft.x+Ft.width/2,qt=Ft.y,Ee=Mt.x-re,Ve=Ft.height/2;pt.setEdge(Mt.e,Mt.label),pt.removeNode(xt),Mt.label.points=[{x:re+2*Ee/3,y:qt-Ve},{x:re+5*Ee/6,y:qt-Ve},{x:re+Ee,y:qt},{x:re+5*Ee/6,y:qt+Ve},{x:re+2*Ee/3,y:qt+Ve}],Mt.label.x=Mt.x,Mt.label.y=Mt.y}})})(at)}),st("    removeBorderNodes",function(){(function(pt){Re.forEach(pt.nodes(),function(xt){if(pt.children(xt).length){var Mt=pt.node(xt),Ft=pt.node(Mt.borderTop),re=pt.node(Mt.borderBottom),qt=pt.node(Re.last(Mt.borderLeft)),Ee=pt.node(Re.last(Mt.borderRight));Mt.width=Math.abs(Ee.x-qt.x),Mt.height=Math.abs(re.y-Ft.y),Mt.x=qt.x+Mt.width/2,Mt.y=Ft.y+Mt.height/2}}),Re.forEach(pt.nodes(),function(xt){pt.node(xt).dummy==="border"&&pt.removeNode(xt)})})(at)}),st("    normalize.undo",function(){$f.undo(at)}),st("    fixupEdgeLabelCoords",function(){(function(pt){Re.forEach(pt.edges(),function(xt){var Mt=pt.edge(xt);if(Re.has(Mt,"x"))switch(Mt.labelpos!=="l"&&Mt.labelpos!=="r"||(Mt.width-=Mt.labeloffset),Mt.labelpos){case"l":Mt.x-=Mt.width/2+Mt.labeloffset;break;case"r":Mt.x+=Mt.width/2+Mt.labeloffset}})})(at)}),st("    undoCoordinateSystem",function(){bl.undo(at)}),st("    translateGraph",function(){(function(pt){var xt=Number.POSITIVE_INFINITY,Mt=0,Ft=Number.POSITIVE_INFINITY,re=0,qt=pt.graph(),Ee=qt.marginx||0,Ve=qt.marginy||0;function Mr(Qe){var rr=Qe.x,tr=Qe.y,Jr=Qe.width,mn=Qe.height;xt=Math.min(xt,rr-Jr/2),Mt=Math.max(Mt,rr+Jr/2),Ft=Math.min(Ft,tr-mn/2),re=Math.max(re,tr+mn/2)}Re.forEach(pt.nodes(),function(Qe){Mr(pt.node(Qe))}),Re.forEach(pt.edges(),function(Qe){var rr=pt.edge(Qe);Re.has(rr,"x")&&Mr(rr)}),xt-=Ee,Ft-=Ve,Re.forEach(pt.nodes(),function(Qe){var rr=pt.node(Qe);rr.x-=xt,rr.y-=Ft}),Re.forEach(pt.edges(),function(Qe){var rr=pt.edge(Qe);Re.forEach(rr.points,function(tr){tr.x-=xt,tr.y-=Ft}),Re.has(rr,"x")&&(rr.x-=xt),Re.has(rr,"y")&&(rr.y-=Ft)}),qt.width=Mt-xt+Ee,qt.height=re-Ft+Ve})(at)}),st("    assignNodeIntersects",function(){(function(pt){Re.forEach(pt.edges(),function(xt){var Mt,Ft,re=pt.edge(xt),qt=pt.node(xt.v),Ee=pt.node(xt.w);re.points?(Mt=re.points[0],Ft=re.points[re.points.length-1]):(re.points=[],Mt=Ee,Ft=qt),re.points.unshift(Ko.intersectRect(qt,Mt)),re.points.push(Ko.intersectRect(Ee,Ft))})})(at)}),st("    reversePoints",function(){(function(pt){Re.forEach(pt.edges(),function(xt){var Mt=pt.edge(xt);Mt.reversed&&Mt.points.reverse()})})(at)}),st("    acyclic.undo",function(){Cc.undo(at)})})(X,O)}),O("  updateInputGraph",function(){(function(at,st){Re.forEach(at.nodes(),function(pt){var xt=at.node(pt),Mt=st.node(pt);xt&&(xt.x=Mt.x,xt.y=Mt.y,st.children(pt).length&&(xt.width=Mt.width,xt.height=Mt.height))}),Re.forEach(at.edges(),function(pt){var xt=at.edge(pt),Mt=st.edge(pt);xt.points=Mt.points,Re.has(Mt,"x")&&(xt.x=Mt.x,xt.y=Mt.y)}),at.graph().width=st.graph().width,at.graph().height=st.graph().height})(d,X)})})},gu=["nodesep","edgesep","ranksep","marginx","marginy"],eh={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},Sl=["acyclicer","ranker","rankdir","align"],Xc=["width","height"],rh={width:0,height:0},os=["minlen","weight","width","height","labeloffset"],yu={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},eo=["labelpos"];function Go(d,S){return Re.mapValues(Re.pick(d,S),Number)}function Ml(d){var S={};return Re.forEach(d,function(O,X){S[X.toLowerCase()]=O}),S}var nh=Mn.Graph,ah={graphlib:Mn,layout:Cf,debug:{debugOrdering:function(d){var S=mo.buildLayerMatrix(d),O=new nh({compound:!0,multigraph:!0}).setGraph({});return Re.forEach(d.nodes(),function(X){O.setNode(X,{label:X}),O.setParent(X,"layer"+d.node(X).rank)}),Re.forEach(d.edges(),function(X){O.setEdge(X.v,X.w,{},X.name)}),Re.forEach(S,function(X,at){var st="layer"+at;O.setNode(st,{rank:"same"}),Re.reduce(X,function(pt,xt){return O.setEdge(pt,xt,{style:"invis"}),xt})}),O}},util:{time:mo.time,notime:mo.notime},version:"0.8.5"},xh=ah.graphlib,wh=ah.layout;class Al{constructor(S){this.cardinality=1,this.include=M.UNSPECIFIED,this.isGroupNode=!1,this.parentNode=null,this.type=F.NODE,this.name=S.name,this.attr=S.attr||{},this.inputs=S.inputs,this.path=S.path||[],this.width=S.width,this.height=S.height}}class ih{constructor(){this.nodes={},this.edges=[],this.nodes={},this.edges=[]}}function Eh(d){const S=new ih;return d.nodes.map(O=>new Al(O)).forEach(O=>{S.nodes[O.name]=O,O.inputs.forEach(X=>{(function(at,st,pt){pt.name!==st.name&&at.edges.push(Object.assign(Object.assign({},pt.attr),{v:pt.name,w:st.name}))})(S,O,X)})}),S}class _h{constructor(S,O={}){this.attr=null,this.bridgeGraph=null,this.cardinality=0,this.depth=1,this.include=M.UNSPECIFIED,this.isGroupNode=!0,this.parentNode=null,this.type=F.META,this.path=[],this.name=S,this.metaGraph=Wc(S,A.META,O)}getFirstChild(){return this.metaGraph.node(this.metaGraph.nodes()[0])}getChildren(){return this.metaGraph.nodes().map(S=>this.metaGraph.node(S))}leaves(){let S,O=[],X=[this];for(;X.length;){let at=X.shift();at.isGroupNode?(S=at.metaGraph,S.nodes().forEach(st=>X.push(S.node(st)))):O.push(at.name)}return O}}class oh{constructor(S,O){this.v=S,this.w=O,this.baseEdgeList=[],this.inbound=null,this.name=null}addBaseEdge(S,O){this.baseEdgeList.push(S)}}function sh(d,S={}){return new _h(d,S)}function Yc(d,S){return new oh(d,S)}function Wc(d,S,O){const X=O||{},at=new xh.Graph(X);return at.setGraph({name:d,rankdir:X.rankdir,type:S,align:X.align}),at}class Cl{constructor(S={}){this.graphOptions=S,this.index={},this.graphOptions.compound=!0,this.root=sh(z,this.graphOptions),this.index[z]=this.root}getNodeMap(){return this.index}node(S){return this.index[S]}setNode(S,O){this.index[S]=O}getBridgeGraph(S){const O=this.index[S];if(!O)throw Error("Could not find node in hierarchy: "+S);if(!("metaGraph"in O))return null;const X=O;if(X.bridgeGraph)return X.bridgeGraph;const at=Wc(H,A.BRIDGE,this.graphOptions);if(X.bridgeGraph=at,!O.parentNode||!("metaGraph"in O.parentNode))return at;const st=O.parentNode;return[st.metaGraph,this.getBridgeGraph(st.name)].forEach(pt=>{pt.edges().filter(xt=>xt.v===S||xt.w===S).forEach(xt=>{const Mt=xt.w===S;pt.edge(xt).baseEdgeList.forEach(Ft=>{const[re,qt]=Mt?[Ft.w,xt.v]:[Ft.v,xt.w],Ee=this.getChildName(S,re),Ve={v:Mt?qt:Ee,w:Mt?Ee:qt};let Mr=at.edge(Ve);Mr||(Mr=Yc(Ve.v,Ve.w),Mr.inbound=Mt,at.setEdge(Ve.v,Ve.w,Mr)),Mr.addBaseEdge(Ft,this)})})}),at}getChildName(S,O){let X=this.index[O];for(;X;){if(X.parentNode&&X.parentNode.name===S)return X.name;X=X.parentNode}throw Error("Could not find immediate child for descendant: "+O)}getPredecessors(S){const O=this.index[S];if(!O)throw Error("Could not find node with name: "+S);return this.getOneWayEdges(O,!0)}getSuccessors(S){const O=this.index[S];if(!O)throw Error("Could not find node with name: "+S);return this.getOneWayEdges(O,!1)}getOneWayEdges(S,O){const X=[];if(!S.parentNode||!S.parentNode.isGroupNode)return X;const at=S.parentNode,st=at.metaGraph,pt=this.getBridgeGraph(at.name);return Zs(st,S,O,X),Zs(pt,S,O,X),X}}function uh(d,S){const{rankDirection:O,align:X}=S,at=new Cl({rankdir:O,align:X});return function(st,pt){Object.keys(pt.nodes).forEach(xt=>{const Mt=pt.nodes[xt],Ft=Mt.path;let re=st.root;re.depth=Math.max(Ft.length,re.depth);for(let qt=0;qt<Ft.length&&(re.depth=Math.max(re.depth,Ft.length-qt),re.cardinality+=Mt.cardinality,qt!==Ft.length-1);qt++){const Ee=Ft[qt];let Ve=st.node(Ee);Ve||(Ve=sh(Ee,st.graphOptions),Ve.path=Mt.path.slice(0,qt+1),Ve.parentNode=re,st.setNode(Ee,Ve),re.metaGraph.setNode(Ee,Ve)),re=Ve}st.setNode(Mt.name,Mt),Mt.parentNode=re,re.metaGraph.setNode(Mt.name,Mt)})}(at,d),function(st,pt){const xt=st.getNodeMap();let Mt=[],Ft=[];const re=(qt,Ee)=>{let Ve=0;for(;qt;)Ee[Ve++]=qt.name,qt=qt.parentNode;return Ve-1};pt.edges.forEach(qt=>{Mt=[],Ft=[];let Ee=re(pt.nodes[qt.v],Mt),Ve=re(pt.nodes[qt.w],Ft);for(;Mt[Ee]===Ft[Ve];)if(Ee--,Ve--,Ee<0||Ve<0)throw Error("No difference found between ancestor paths.");const Mr=xt[Mt[Ee+1]],Qe=Mt[Ee],rr=Ft[Ve];let tr=Mr.metaGraph.edge(Qe,rr);tr||(tr=Yc(Qe,rr),Mr.metaGraph.setEdge(Qe,rr,tr)),tr.addBaseEdge(qt,st)})}(at,d),at}function Zs(d,S,O,X){(O?d.inEdges(S.name):d.outEdges(S.name)).forEach(at=>{const st=d.edge(at);X.push(st)})}class Tl{constructor(S){this.hierarchy=S,this.index={},this.hasSubHierarchy={},this.root=new Kt(this.hierarchy.root,this.hierarchy.graphOptions),this.index[S.root.name]=this.root,this.buildSubHierarchy(S.root.name),this.root.expanded=!0}getRenderInfoNodes(){return Object.values(this.index)}getSubHierarchy(){return this.hasSubHierarchy}buildSubHierarchy(S){if(S in this.hasSubHierarchy)return;this.hasSubHierarchy[S]=!0;const O=this.index[S];if(O.node.type!==F.META)return;const X=O,at=X.node.metaGraph,st=X.coreGraph;at.nodes().forEach(re=>{const qt=this.getOrCreateRenderNodeByName(re);st.setNode(re,qt)}),at.edges().forEach(re=>{const qt=at.edge(re),Ee=new mt(qt);st.setEdge(re.v,re.w,Ee)});const pt=X.node.parentNode;if(!pt)return;const xt=this.getRenderNodeByName(pt.name),Mt=(re,...qt)=>qt.concat([re?"IN":"OUT"]).join("~~"),Ft=this.hierarchy.getBridgeGraph(S);Ft.edges().forEach(re=>{const qt=Ft.edge(re),Ee=!!at.node(re.w),[Ve,Mr]=Ee?[re.w,re.v]:[re.v,re.w],Qe=Xn=>{const Rn=Ee?{v:Xn,w:S}:{v:S,w:Xn};return xt.coreGraph.edge(Rn)};let rr=Qe(Mr);rr||(rr=Qe(Mt(Ee,Mr,pt.name)));const tr=Mt(Ee,S),Jr=Mt(Ee,Mr,S);let mn=st.node(Jr);if(!mn){let Xn=st.node(tr);if(!Xn){const Jn={name:tr,type:F.BRIDGE,isGroupNode:!1,cardinality:0,parentNode:null,include:M.UNSPECIFIED,inbound:Ee,attr:{}};Xn=new ic(Jn),this.index[tr]=Xn,st.setNode(tr,Xn)}const Rn={name:Jr,type:F.BRIDGE,isGroupNode:!1,cardinality:1,parentNode:null,include:M.UNSPECIFIED,inbound:Ee,attr:{}};mn=new ic(Rn),this.index[Jr]=mn,st.setNode(Jr,mn),st.setParent(Jr,tr),Xn.node.cardinality++}const un=new mt(qt);un.adjoiningMetaEdge=rr,Ee?st.setEdge(Jr,Ve,un):st.setEdge(Ve,Jr,un)})}getOrCreateRenderNodeByName(S){if(!S)return null;if(S in this.index)return this.index[S];const O=this.getNodeByName(S);return O?(this.index[S]=O.isGroupNode?new Kt(O,this.hierarchy.graphOptions):new ic(O),this.index[S]):null}getRenderNodeByName(S){return this.index[S]}getNodeByName(S){return this.hierarchy.node(S)}}class ic{constructor(S){this.node=S,this.expanded=!1,this.x=0,this.y=0,this.coreBox={width:0,height:0},this.outboxWidth=0,this.labelOffset=0,this.radius=0,this.labelHeight=0,this.paddingTop=0,this.paddingLeft=0,this.paddingRight=0,this.paddingBottom=0,this.width=S.width||0,this.height=S.height||0,this.displayName=S.name,this.attr=S.attr}}class mt{constructor(S){this.metaEdge=S,this.adjoiningMetaEdge=null,this.weight=1,this.points=[]}}class Kt extends ic{constructor(S,O){super(S);const X=S.metaGraph.graph();O.compound=!0,this.coreGraph=Wc(X.name,A.CORE,O)}}function Me(d,S){d.node.isGroupNode&&function(O,X){const at=nt(X);O.coreGraph.nodes().map(st=>O.coreGraph.node(st)).forEach(st=>{var pt,xt,Mt,Ft,re,qt;const{height:Ee,width:Ve}=st;switch(st.node.type){case F.NODE:Object.assign(st,at.nodeSize.node),st.height=Ee||at.nodeSize.node.height,st.width=Ve||at.nodeSize.node.width;break;case F.BRIDGE:Object.assign(st,at.nodeSize.bridge);break;case F.META:st.expanded?Me(st,X):(Object.assign(st,at.nodeSize.meta),st.height=at.nodeSize.meta.height,st.width=at.nodeSize.meta.width);break;default:throw Error("Unrecognized node type: "+st.node.type)}if(!st.expanded){const Mr=st.attr;(function(Qe,rr=!1){if(Qe.coreBox.width=Qe.width,Qe.coreBox.height=Qe.height,!rr){const tr=`${Qe.displayName}`.length,Jr=3;Qe.width=Math.max(Qe.coreBox.width,tr*Jr)}})(st,X&&(st.node.type===0&&!!(!((xt=(pt=X==null?void 0:X.nodeSize)===null||pt===void 0?void 0:pt.meta)===null||xt===void 0)&&xt.width)||st.node.type===1&&(!!(!((Ft=(Mt=X==null?void 0:X.nodeSize)===null||Mt===void 0?void 0:Mt.node)===null||Ft===void 0)&&Ft.width)||!!Mr.width)||st.node.type===2&&!!(!((qt=(re=X==null?void 0:X.nodeSize)===null||re===void 0?void 0:re.bridge)===null||qt===void 0)&&qt.width)))}})}(d,S),d.node.type===F.META&&function(O,X){const at=nt(X),st=at.subScene.meta;Object.assign(O,st);const{nodeSep:pt,rankSep:xt,edgeSep:Mt,align:Ft}=at.graph.meta,re={nodesep:pt,ranksep:xt,edgesep:Mt,align:Ft};Object.assign(O.coreBox,function(Ve,Mr){const{ranksep:Qe,nodesep:rr,edgesep:tr,align:Jr}=Mr;Object.assign(Ve.graph(),{ranksep:Qe,nodesep:rr,edgesep:tr,align:Jr});const mn=[];if(Ve.nodes().forEach(va=>{Ve.node(va).node.type!==F.BRIDGE&&mn.push(va)}),!mn.length)return{width:0,height:0};wh(Ve);let un=1/0,Xn=1/0,Rn=-1/0,Jn=-1/0;return mn.forEach(va=>{const ua=Ve.node(va),mi=.5*ua.width,ga=ua.x-mi,Ci=ua.x+mi;un=ga<un?ga:un,Rn=Ci>Rn?Ci:Rn;const vi=.5*ua.height,Fa=ua.y-vi,Ti=ua.y+vi;Xn=Fa<Xn?Fa:Xn,Jn=Ti>Jn?Ti:Jn}),Ve.edges().forEach(va=>{const ua=Ve.edge(va),mi=Ve.node(ua.metaEdge.v),ga=Ve.node(ua.metaEdge.w);if(ua.points.length===3&&function(Fa){let Ti=gr(Fa[0],Fa[1]);for(let Yi=1;Yi<Fa.length-1;Yi++){const bo=gr(Fa[Yi],Fa[Yi+1]);if(Math.abs(bo-Ti)>1)return!1;Ti=bo}return!0}(ua.points)){if(mi!=null){const Fa=mi.expanded?mi.x:Or(mi);ua.points[0].x=Fa}if(ga!=null){const Fa=ga.expanded?ga.x:Or(ga);ua.points[2].x=Fa}ua.points=[ua.points[0],ua.points[1]]}const Ci=ua.points[ua.points.length-2];ga!=null&&(ua.points[ua.points.length-1]=yr(Ci,ga));const vi=ua.points[1];mi!=null&&(ua.points[0]=yr(vi,mi)),ua.points.forEach(Fa=>{un=Fa.x<un?Fa.x:un,Rn=Fa.x>Rn?Fa.x:Rn,Xn=Fa.y<Xn?Fa.y:Xn,Jn=Fa.y>Jn?Fa.y:Jn})}),Ve.nodes().forEach(va=>{const ua=Ve.node(va);ua.x-=un,ua.y-=Xn}),Ve.edges().forEach(va=>{Ve.edge(va).points.forEach(ua=>{ua.x-=un,ua.y-=Xn})}),{width:Rn-un,height:Jn-Xn}}(O.coreGraph,re));let qt=0;O.coreGraph.nodeCount()>0&&qt++;const Ee=qt<=1?0:qt;O.coreBox.width+=Ee+Ee,O.coreBox.height=st.labelHeight+O.coreBox.height,O.width=O.coreBox.width+st.paddingLeft+st.paddingRight,O.height=O.paddingTop+O.coreBox.height+O.paddingBottom}(d,S)}function gr(d,S){const O=S.x-d.x,X=S.y-d.y;return 180*Math.atan(X/O)/Math.PI}function Or(d){return d.expanded?d.x:d.x-d.width/2+0+d.coreBox.width/2}function yr(d,S){const O=S.expanded?S.x:Or(S),X=S.y,at=d.x-O,st=d.y-X;let pt,xt,Mt=S.expanded?S.width:S.coreBox.width,Ft=S.expanded?S.height:S.coreBox.height;return Math.abs(st)*Mt/2>Math.abs(at)*Ft/2?(st<0&&(Ft=-Ft),pt=st===0?0:Ft/2*at/st,xt=Ft/2):(at<0&&(Mt=-Mt),pt=Mt/2,xt=at===0?0:Mt/2*st/at),{x:O+pt,y:X+xt}}function mr(d,S,O){var X,at,st,pt;const xt=d.nodes.filter((qt,Ee,Ve)=>Ve.findIndex(Mr=>Mr.id===qt.id)!==Ee).map(qt=>qt.id);if(xt.length)throw new Error(`Duplicated ids found: ${xt.join(", ")}`);const Mt=function(qt){const Ee={nodes:[]},Ve=qt.compound,Mr=Object.keys(Ve||{}),Qe=new Map,rr=(Jr,mn=[])=>{if(Qe.has(Jr))return Qe.get(Jr);for(let un=0;un<Mr.length;un++){let Xn=Mr[un];if(Ve&&Ve[Xn].indexOf(Jr)!==-1)return mn.unshift(Xn),rr(Xn,mn)}return mn.length===0&&Qe.set(Jr,mn),mn},tr=Jr=>qt.edges.filter(mn=>mn.w===Jr).map(mn=>({name:mn.v}));return qt.nodes.forEach(Jr=>{const mn=Jr.id,un=[...rr(mn),mn];let Xn=tr(mn);Ee.nodes.push({name:mn,path:un,inputs:Xn,width:Jr.width,height:Jr.height,attr:Object.assign({},Jr)})}),Ee}(d),Ft=function(qt,Ee){const Ve=(Qe,rr)=>{for(let tr of rr.values())if(tr.includes(Qe))return!0;return!1},Mr=(Qe,rr=[])=>{if(Object.keys(Qe).length===0)return[...new Set(rr)];const tr=new Map(Object.keys(Qe).map(mn=>[mn,Qe[mn]])),Jr={};for(let[mn,un]of tr)Ve(mn,tr)?Jr[mn]=un:rr=rr.concat(mn,un);return Mr(Jr,rr)};return Mr(qt).filter(Qe=>Ee.includes(Qe))}(d.compound||{},(S==null?void 0:S.expanded)||[]),re=function(qt,Ee){return function(Ve){return new Tl(Ve)}(uh(Eh(qt),Ee))}(Mt,{rankDirection:((at=(X=O==null?void 0:O.graph)===null||X===void 0?void 0:X.meta)===null||at===void 0?void 0:at.rankDir)||(S==null?void 0:S.rankDirection)||ft.graph.meta.rankDir,align:((pt=(st=O==null?void 0:O.graph)===null||st===void 0?void 0:st.meta)===null||pt===void 0?void 0:pt.align)||ft.graph.meta.align});return function(qt,Ee){Ee.forEach(Ve=>{const Mr=qt.getRenderInfoNodes().find(tr=>tr.displayName===Ve);let Qe=Mr&&Mr.node&&Mr.node.name||"";const rr=qt.getRenderNodeByName(Qe);if(!rr)throw new Error(`No nodes found: ${Qe}`);rr.expanded=!0,qt.buildSubHierarchy(Qe)})}(re,Ft),Me(re.root,O),nn(re.root)}function $r(d,S=!1){const O=JSON.parse(JSON.stringify(d)),X={nodes:[O],edges:[...O.edges]};return O.nodes.forEach(function at(st){(st.type===0||st.type===1)&&X.nodes.push(st),st.type===0&&(X.edges=X.edges.concat(st.edges)),Array.isArray(st.nodes)&&st.nodes.forEach(at)}),S&&X.nodes.forEach(at=>{const st=X.nodes.find(pt=>pt.id===at.parentNodeName);if(st){const pt=st.x-st.width/2+st.paddingLeft,xt=st.y-st.height/2+st.labelHeight+st.paddingTop;st.id!==z&&(at.x+=pt,at.y+=xt),at.type===0&&at.edges.forEach(Mt=>{Mt.points.forEach(Ft=>{Ft.x+=at.x-at.width/2+at.paddingLeft,Ft.y+=at.y-at.height/2+at.labelHeight+at.paddingTop})})}}),X}function Qr(d,S,O,X){var at,st;let pt=[];const xt=((at=O.find(qt=>qt.id===d))===null||at===void 0?void 0:at.path)||[],Mt=((st=O.find(qt=>qt.id===S))===null||st===void 0?void 0:st.path)||[],Ft=[z,...xt].slice(0,xt.length).reverse(),re=[z,...Mt].slice(0,Mt.length);return Ft.forEach(qt=>{const Ee=O.find(Ve=>Ve.id===qt);pt=pt.concat(Ee.edges.filter(Ve=>Ve.baseEdgeList.some(Mr=>Mr.v===((X==null?void 0:X.v)||d)&&Mr.w===((X==null?void 0:X.w)||S))))}),re.filter(qt=>!Ft.includes(qt)).forEach(qt=>{const Ee=O.find(Ve=>Ve.id===qt);pt=pt.concat(Ee.edges.filter(Ve=>Ve.baseEdgeList.some(Mr=>Mr.v===((X==null?void 0:X.v)||d)&&Mr.w===((X==null?void 0:X.w)||S))))}),pt}function nn(d){const S=d.coreGraph.nodes().map(X=>d.coreGraph.node(X));return Object.assign(Object.assign({},Wr(d)),{expanded:d.expanded,nodes:d.expanded?(O=S,O.map(X=>X.node.type===F.META?nn(X):Wr(X))):[],edges:d.expanded?fn(d):[]});var O}function Wr(d){return{id:d.node.name,name:d.node.name,type:d.node.type,cardinality:d.node.cardinality,attr:d.attr,parentNodeName:d.node.parentNode?d.node.parentNode.name:null,coreBox:Object.assign({},d.coreBox),x:d.x,y:d.y,width:d.width,height:d.height,radius:d.radius,labelHeight:d.labelHeight,labelOffset:d.labelOffset,outboxWidth:d.outboxWidth,paddingLeft:d.paddingLeft,paddingTop:d.paddingTop,paddingRight:d.paddingRight,paddingBottom:d.paddingBottom,path:d.node.path}}function fn(d){return d.coreGraph.edges().map(S=>({renderInfoEdge:d.coreGraph.edge(S),edge:S})).filter(({renderInfoEdge:S})=>S.metaEdge).map(({edge:S,renderInfoEdge:O})=>{const X=function(at,st){const pt=st.points.map(xt=>Object.assign({},xt));if(st.adjoiningMetaEdge){const xt=st.adjoiningMetaEdge.points,Mt=st.metaEdge.inbound,Ft=Mt?xt[xt.length-1]:xt[0],re=pt[Mt?0:pt.length-1],qt=at.x-at.width/2,Ee=at.y-at.height/2,Ve=Ft.x-qt,Mr=Ft.y-Ee,Qe=-at.paddingLeft,rr=-(at.paddingTop+at.labelHeight);re.x=Ve+Qe,re.y=Mr+rr}return pt}(d,O);return{adjoiningEdge:O.adjoiningMetaEdge?{w:O.adjoiningMetaEdge.metaEdge.w,v:O.adjoiningMetaEdge.metaEdge.v}:null,inbound:O.metaEdge.inbound,w:S.w,v:S.v,points:X,weight:O.weight,baseEdgeList:O.metaEdge.baseEdgeList,parentNodeName:d.node.name}})}},49685:function(Se,R,et){"use strict";et.r(R),et.d(R,{ARRAY_TYPE:function(){return nt},EPSILON:function(){return ft},RANDOM:function(){return V},equals:function(){return M},setMatrixArrayType:function(){return z},toRadian:function(){return F}});var ft=1e-6,nt=typeof Float32Array!="undefined"?Float32Array:Array,V=Math.random;function z(A){nt=A}var H=Math.PI/180;function F(A){return A*H}function M(A,y){return Math.abs(A-y)<=ft*Math.max(1,Math.abs(A),Math.abs(y))}Math.hypot||(Math.hypot=function(){for(var A=0,y=arguments.length;y--;)A+=arguments[y]*arguments[y];return Math.sqrt(A)})},58204:function(Se,R,et){"use strict";et.r(R),et.d(R,{glMatrix:function(){return M},mat2:function(){return ft},mat2d:function(){return nt},mat3:function(){return Zr},mat4:function(){return V},quat:function(){return H},quat2:function(){return F},vec2:function(){return Gf},vec3:function(){return Dr},vec4:function(){return z}});var ft={};et.r(ft),et.d(ft,{LDU:function(){return Z},add:function(){return rt},adjoint:function(){return N},clone:function(){return y},copy:function(){return x},create:function(){return A},determinant:function(){return g},equals:function(){return kt},exactEquals:function(){return ht},frob:function(){return Q},fromRotation:function(){return G},fromScaling:function(){return Y},fromValues:function(){return _},identity:function(){return p},invert:function(){return k},mul:function(){return Rt},multiply:function(){return v},multiplyScalar:function(){return At},multiplyScalarAndAdd:function(){return Ht},rotate:function(){return K},scale:function(){return B},set:function(){return E},str:function(){return j},sub:function(){return le},subtract:function(){return ut},transpose:function(){return b}});var nt={};et.r(nt),et.d(nt,{add:function(){return ie},clone:function(){return ot},copy:function(){return yt},create:function(){return dt},determinant:function(){return De},equals:function(){return Tt},exactEquals:function(){return Be},frob:function(){return Xt},fromRotation:function(){return _e},fromScaling:function(){return zt},fromTranslation:function(){return ue},fromValues:function(){return Ot},identity:function(){return Lt},invert:function(){return Jt},mul:function(){return nr},multiply:function(){return te},multiplyScalar:function(){return se},multiplyScalarAndAdd:function(){return Te},rotate:function(){return oe},scale:function(){return me},set:function(){return Wt},str:function(){return Pe},sub:function(){return Ir},subtract:function(){return Ie},translate:function(){return Ce}});var V={};et.r(V),et.d(V,{add:function(){return Ae},adjoint:function(){return cr},clone:function(){return wn},copy:function(){return Xr},create:function(){return Ur},determinant:function(){return dr},equals:function(){return Yn},exactEquals:function(){return hn},frob:function(){return Ye},fromQuat:function(){return xn},fromQuat2:function(){return be},fromRotation:function(){return Gn},fromRotationTranslation:function(){return qe},fromRotationTranslationScale:function(){return Pr},fromRotationTranslationScaleOrigin:function(){return cn},fromScaling:function(){return qn},fromTranslation:function(){return bn},fromValues:function(){return Sn},fromXRotation:function(){return zn},fromYRotation:function(){return ya},fromZRotation:function(){return W},frustum:function(){return tn},getRotation:function(){return Br},getScaling:function(){return ar},getTranslation:function(){return or},identity:function(){return Fn},invert:function(){return er},lookAt:function(){return Gt},mul:function(){return Ze},multiply:function(){return Gr},multiplyScalar:function(){return Hr},multiplyScalarAndAdd:function(){return wr},ortho:function(){return q},orthoNO:function(){return T},orthoZO:function(){return Et},perspective:function(){return bt},perspectiveFromFieldOfView:function(){return I},perspectiveNO:function(){return vt},perspectiveZO:function(){return P},rotate:function(){return ln},rotateX:function(){return Vn},rotateY:function(){return ca},rotateZ:function(){return oa},scale:function(){return yn},set:function(){return Kn},str:function(){return ee},sub:function(){return xr},subtract:function(){return fr},targetTo:function(){return Dt},translate:function(){return sn},transpose:function(){return pn}});var z={};et.r(z),et.d(z,{add:function(){return pe},ceil:function(){return en},clone:function(){return $t},copy:function(){return ne},create:function(){return Yr},cross:function(){return oo},dist:function(){return Mi},distance:function(){return Za},div:function(){return Yo},divide:function(){return lr},dot:function(){return Io},equals:function(){return Hi},exactEquals:function(){return Xo},floor:function(){return Dn},forEach:function(){return Eo},fromValues:function(){return It},inverse:function(){return io},len:function(){return hs},length:function(){return To},lerp:function(){return Ca},max:function(){return ta},min:function(){return En},mul:function(){return Ws},multiply:function(){return sr},negate:function(){return Si},normalize:function(){return fs},random:function(){return ko},round:function(){return Qn},scale:function(){return ba},scaleAndAdd:function(){return Ha},set:function(){return xe},sqrDist:function(){return uo},sqrLen:function(){return Un},squaredDistance:function(){return Ba},squaredLength:function(){return _i},str:function(){return ls},sub:function(){return so},subtract:function(){return ke},transformMat4:function(){return cs},transformQuat:function(){return ri},zero:function(){return Vi}});var H={};et.r(H),et.d(H,{add:function(){return hi},calculateW:function(){return Ho},clone:function(){return Gi},conjugate:function(){return _o},copy:function(){return qi},create:function(){return Po},dot:function(){return lo},equals:function(){return Pa},exactEquals:function(){return zi},exp:function(){return fo},fromEuler:function(){return As},fromMat3:function(){return co},fromValues:function(){return So},getAngle:function(){return $n},getAxisAngle:function(){return Ds},identity:function(){return Ss},invert:function(){return Ps},len:function(){return Zo},length:function(){return Mo},lerp:function(){return jo},ln:function(){return ds},mul:function(){return Cs},multiply:function(){return ji},normalize:function(){return Ri},pow:function(){return Ms},random:function(){return Ia},rotateX:function(){return Zi},rotateY:function(){return bi},rotateZ:function(){return Vo},rotationTo:function(){return Ii},scale:function(){return Bo},set:function(){return Lo},setAxes:function(){return Bi},setAxisAngle:function(){return Wo},slerp:function(){return ns},sqlerp:function(){return qo},sqrLen:function(){return Da},squaredLength:function(){return go},str:function(){return Ro}});var F={};et.r(F),et.d(F,{add:function(){return Ui},clone:function(){return Ao},conjugate:function(){return tu},copy:function(){return Vs},create:function(){return Fo},dot:function(){return Su},equals:function(){return Bs},exactEquals:function(){return Ff},fromMat4:function(){return ou},fromRotation:function(){return ps},fromRotationTranslation:function(){return vs},fromRotationTranslationValues:function(){return Ts},fromTranslation:function(){return $o},fromValues:function(){return $i},getDual:function(){return Xe},getReal:function(){return Zt},getTranslation:function(){return gn},identity:function(){return gs},invert:function(){return uu},len:function(){return eu},length:function(){return Rs},lerp:function(){return su},mul:function(){return Js},multiply:function(){return yo},normalize:function(){return nf},rotateAroundAxis:function(){return _u},rotateByQuatAppend:function(){return ho},rotateByQuatPrepend:function(){return Hs},rotateX:function(){return ra},rotateY:function(){return oi},rotateZ:function(){return Ji},scale:function(){return Xu},set:function(){return Ct},setDual:function(){return kr},setReal:function(){return Ke},sqrLen:function(){return No},squaredLength:function(){return ys},str:function(){return Bf},translate:function(){return Nn}});var M=et(49685);function A(){var h=new M.ARRAY_TYPE(4);return M.ARRAY_TYPE!=Float32Array&&(h[1]=0,h[2]=0),h[0]=1,h[3]=1,h}function y(h){var L=new M.ARRAY_TYPE(4);return L[0]=h[0],L[1]=h[1],L[2]=h[2],L[3]=h[3],L}function x(h,L){return h[0]=L[0],h[1]=L[1],h[2]=L[2],h[3]=L[3],h}function p(h){return h[0]=1,h[1]=0,h[2]=0,h[3]=1,h}function _(h,L,lt,wt){var Nt=new M.ARRAY_TYPE(4);return Nt[0]=h,Nt[1]=L,Nt[2]=lt,Nt[3]=wt,Nt}function E(h,L,lt,wt,Nt){return h[0]=L,h[1]=lt,h[2]=wt,h[3]=Nt,h}function b(h,L){if(h===L){var lt=L[1];h[1]=L[2],h[2]=lt}else h[0]=L[0],h[1]=L[2],h[2]=L[1],h[3]=L[3];return h}function k(h,L){var lt=L[0],wt=L[1],Nt=L[2],Yt=L[3],Vt=lt*Yt-Nt*wt;return Vt?(Vt=1/Vt,h[0]=Yt*Vt,h[1]=-wt*Vt,h[2]=-Nt*Vt,h[3]=lt*Vt,h):null}function N(h,L){var lt=L[0];return h[0]=L[3],h[1]=-L[1],h[2]=-L[2],h[3]=lt,h}function g(h){return h[0]*h[3]-h[2]*h[1]}function v(h,L,lt){var wt=L[0],Nt=L[1],Yt=L[2],Vt=L[3],he=lt[0],ge=lt[1],Le=lt[2],He=lt[3];return h[0]=wt*he+Yt*ge,h[1]=Nt*he+Vt*ge,h[2]=wt*Le+Yt*He,h[3]=Nt*Le+Vt*He,h}function K(h,L,lt){var wt=L[0],Nt=L[1],Yt=L[2],Vt=L[3],he=Math.sin(lt),ge=Math.cos(lt);return h[0]=wt*ge+Yt*he,h[1]=Nt*ge+Vt*he,h[2]=wt*-he+Yt*ge,h[3]=Nt*-he+Vt*ge,h}function B(h,L,lt){var wt=L[0],Nt=L[1],Yt=L[2],Vt=L[3],he=lt[0],ge=lt[1];return h[0]=wt*he,h[1]=Nt*he,h[2]=Yt*ge,h[3]=Vt*ge,h}function G(h,L){var lt=Math.sin(L),wt=Math.cos(L);return h[0]=wt,h[1]=lt,h[2]=-lt,h[3]=wt,h}function Y(h,L){return h[0]=L[0],h[1]=0,h[2]=0,h[3]=L[1],h}function j(h){return"mat2("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+")"}function Q(h){return Math.hypot(h[0],h[1],h[2],h[3])}function Z(h,L,lt,wt){return h[2]=wt[2]/wt[0],lt[0]=wt[0],lt[1]=wt[1],lt[3]=wt[3]-h[2]*lt[1],[h,L,lt]}function rt(h,L,lt){return h[0]=L[0]+lt[0],h[1]=L[1]+lt[1],h[2]=L[2]+lt[2],h[3]=L[3]+lt[3],h}function ut(h,L,lt){return h[0]=L[0]-lt[0],h[1]=L[1]-lt[1],h[2]=L[2]-lt[2],h[3]=L[3]-lt[3],h}function ht(h,L){return h[0]===L[0]&&h[1]===L[1]&&h[2]===L[2]&&h[3]===L[3]}function kt(h,L){var lt=h[0],wt=h[1],Nt=h[2],Yt=h[3],Vt=L[0],he=L[1],ge=L[2],Le=L[3];return Math.abs(lt-Vt)<=M.EPSILON*Math.max(1,Math.abs(lt),Math.abs(Vt))&&Math.abs(wt-he)<=M.EPSILON*Math.max(1,Math.abs(wt),Math.abs(he))&&Math.abs(Nt-ge)<=M.EPSILON*Math.max(1,Math.abs(Nt),Math.abs(ge))&&Math.abs(Yt-Le)<=M.EPSILON*Math.max(1,Math.abs(Yt),Math.abs(Le))}function At(h,L,lt){return h[0]=L[0]*lt,h[1]=L[1]*lt,h[2]=L[2]*lt,h[3]=L[3]*lt,h}function Ht(h,L,lt,wt){return h[0]=L[0]+lt[0]*wt,h[1]=L[1]+lt[1]*wt,h[2]=L[2]+lt[2]*wt,h[3]=L[3]+lt[3]*wt,h}var Rt=v,le=ut;function dt(){var h=new M.ARRAY_TYPE(6);return M.ARRAY_TYPE!=Float32Array&&(h[1]=0,h[2]=0,h[4]=0,h[5]=0),h[0]=1,h[3]=1,h}function ot(h){var L=new M.ARRAY_TYPE(6);return L[0]=h[0],L[1]=h[1],L[2]=h[2],L[3]=h[3],L[4]=h[4],L[5]=h[5],L}function yt(h,L){return h[0]=L[0],h[1]=L[1],h[2]=L[2],h[3]=L[3],h[4]=L[4],h[5]=L[5],h}function Lt(h){return h[0]=1,h[1]=0,h[2]=0,h[3]=1,h[4]=0,h[5]=0,h}function Ot(h,L,lt,wt,Nt,Yt){var Vt=new M.ARRAY_TYPE(6);return Vt[0]=h,Vt[1]=L,Vt[2]=lt,Vt[3]=wt,Vt[4]=Nt,Vt[5]=Yt,Vt}function Wt(h,L,lt,wt,Nt,Yt,Vt){return h[0]=L,h[1]=lt,h[2]=wt,h[3]=Nt,h[4]=Yt,h[5]=Vt,h}function Jt(h,L){var lt=L[0],wt=L[1],Nt=L[2],Yt=L[3],Vt=L[4],he=L[5],ge=lt*Yt-wt*Nt;return ge?(ge=1/ge,h[0]=Yt*ge,h[1]=-wt*ge,h[2]=-Nt*ge,h[3]=lt*ge,h[4]=(Nt*he-Yt*Vt)*ge,h[5]=(wt*Vt-lt*he)*ge,h):null}function De(h){return h[0]*h[3]-h[1]*h[2]}function te(h,L,lt){var wt=L[0],Nt=L[1],Yt=L[2],Vt=L[3],he=L[4],ge=L[5],Le=lt[0],He=lt[1],_r=lt[2],Sr=lt[3],Er=lt[4],Kr=lt[5];return h[0]=wt*Le+Yt*He,h[1]=Nt*Le+Vt*He,h[2]=wt*_r+Yt*Sr,h[3]=Nt*_r+Vt*Sr,h[4]=wt*Er+Yt*Kr+he,h[5]=Nt*Er+Vt*Kr+ge,h}function oe(h,L,lt){var wt=L[0],Nt=L[1],Yt=L[2],Vt=L[3],he=L[4],ge=L[5],Le=Math.sin(lt),He=Math.cos(lt);return h[0]=wt*He+Yt*Le,h[1]=Nt*He+Vt*Le,h[2]=wt*-Le+Yt*He,h[3]=Nt*-Le+Vt*He,h[4]=he,h[5]=ge,h}function me(h,L,lt){var wt=L[0],Nt=L[1],Yt=L[2],Vt=L[3],he=L[4],ge=L[5],Le=lt[0],He=lt[1];return h[0]=wt*Le,h[1]=Nt*Le,h[2]=Yt*He,h[3]=Vt*He,h[4]=he,h[5]=ge,h}function Ce(h,L,lt){var wt=L[0],Nt=L[1],Yt=L[2],Vt=L[3],he=L[4],ge=L[5],Le=lt[0],He=lt[1];return h[0]=wt,h[1]=Nt,h[2]=Yt,h[3]=Vt,h[4]=wt*Le+Yt*He+he,h[5]=Nt*Le+Vt*He+ge,h}function _e(h,L){var lt=Math.sin(L),wt=Math.cos(L);return h[0]=wt,h[1]=lt,h[2]=-lt,h[3]=wt,h[4]=0,h[5]=0,h}function zt(h,L){return h[0]=L[0],h[1]=0,h[2]=0,h[3]=L[1],h[4]=0,h[5]=0,h}function ue(h,L){return h[0]=1,h[1]=0,h[2]=0,h[3]=1,h[4]=L[0],h[5]=L[1],h}function Pe(h){return"mat2d("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+", "+h[4]+", "+h[5]+")"}function Xt(h){return Math.hypot(h[0],h[1],h[2],h[3],h[4],h[5],1)}function ie(h,L,lt){return h[0]=L[0]+lt[0],h[1]=L[1]+lt[1],h[2]=L[2]+lt[2],h[3]=L[3]+lt[3],h[4]=L[4]+lt[4],h[5]=L[5]+lt[5],h}function Ie(h,L,lt){return h[0]=L[0]-lt[0],h[1]=L[1]-lt[1],h[2]=L[2]-lt[2],h[3]=L[3]-lt[3],h[4]=L[4]-lt[4],h[5]=L[5]-lt[5],h}function se(h,L,lt){return h[0]=L[0]*lt,h[1]=L[1]*lt,h[2]=L[2]*lt,h[3]=L[3]*lt,h[4]=L[4]*lt,h[5]=L[5]*lt,h}function Te(h,L,lt,wt){return h[0]=L[0]+lt[0]*wt,h[1]=L[1]+lt[1]*wt,h[2]=L[2]+lt[2]*wt,h[3]=L[3]+lt[3]*wt,h[4]=L[4]+lt[4]*wt,h[5]=L[5]+lt[5]*wt,h}function Be(h,L){return h[0]===L[0]&&h[1]===L[1]&&h[2]===L[2]&&h[3]===L[3]&&h[4]===L[4]&&h[5]===L[5]}function Tt(h,L){var lt=h[0],wt=h[1],Nt=h[2],Yt=h[3],Vt=h[4],he=h[5],ge=L[0],Le=L[1],He=L[2],_r=L[3],Sr=L[4],Er=L[5];return Math.abs(lt-ge)<=M.EPSILON*Math.max(1,Math.abs(lt),Math.abs(ge))&&Math.abs(wt-Le)<=M.EPSILON*Math.max(1,Math.abs(wt),Math.abs(Le))&&Math.abs(Nt-He)<=M.EPSILON*Math.max(1,Math.abs(Nt),Math.abs(He))&&Math.abs(Yt-_r)<=M.EPSILON*Math.max(1,Math.abs(Yt),Math.abs(_r))&&Math.abs(Vt-Sr)<=M.EPSILON*Math.max(1,Math.abs(Vt),Math.abs(Sr))&&Math.abs(he-Er)<=M.EPSILON*Math.max(1,Math.abs(he),Math.abs(Er))}var nr=te,Ir=Ie,Zr=et(35600);function Ur(){var h=new M.ARRAY_TYPE(16);return M.ARRAY_TYPE!=Float32Array&&(h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=0,h[12]=0,h[13]=0,h[14]=0),h[0]=1,h[5]=1,h[10]=1,h[15]=1,h}function wn(h){var L=new M.ARRAY_TYPE(16);return L[0]=h[0],L[1]=h[1],L[2]=h[2],L[3]=h[3],L[4]=h[4],L[5]=h[5],L[6]=h[6],L[7]=h[7],L[8]=h[8],L[9]=h[9],L[10]=h[10],L[11]=h[11],L[12]=h[12],L[13]=h[13],L[14]=h[14],L[15]=h[15],L}function Xr(h,L){return h[0]=L[0],h[1]=L[1],h[2]=L[2],h[3]=L[3],h[4]=L[4],h[5]=L[5],h[6]=L[6],h[7]=L[7],h[8]=L[8],h[9]=L[9],h[10]=L[10],h[11]=L[11],h[12]=L[12],h[13]=L[13],h[14]=L[14],h[15]=L[15],h}function Sn(h,L,lt,wt,Nt,Yt,Vt,he,ge,Le,He,_r,Sr,Er,Kr,an){var Lr=new M.ARRAY_TYPE(16);return Lr[0]=h,Lr[1]=L,Lr[2]=lt,Lr[3]=wt,Lr[4]=Nt,Lr[5]=Yt,Lr[6]=Vt,Lr[7]=he,Lr[8]=ge,Lr[9]=Le,Lr[10]=He,Lr[11]=_r,Lr[12]=Sr,Lr[13]=Er,Lr[14]=Kr,Lr[15]=an,Lr}function Kn(h,L,lt,wt,Nt,Yt,Vt,he,ge,Le,He,_r,Sr,Er,Kr,an,Lr){return h[0]=L,h[1]=lt,h[2]=wt,h[3]=Nt,h[4]=Yt,h[5]=Vt,h[6]=he,h[7]=ge,h[8]=Le,h[9]=He,h[10]=_r,h[11]=Sr,h[12]=Er,h[13]=Kr,h[14]=an,h[15]=Lr,h}function Fn(h){return h[0]=1,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=1,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=1,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function pn(h,L){if(h===L){var lt=L[1],wt=L[2],Nt=L[3],Yt=L[6],Vt=L[7],he=L[11];h[1]=L[4],h[2]=L[8],h[3]=L[12],h[4]=lt,h[6]=L[9],h[7]=L[13],h[8]=wt,h[9]=Yt,h[11]=L[14],h[12]=Nt,h[13]=Vt,h[14]=he}else h[0]=L[0],h[1]=L[4],h[2]=L[8],h[3]=L[12],h[4]=L[1],h[5]=L[5],h[6]=L[9],h[7]=L[13],h[8]=L[2],h[9]=L[6],h[10]=L[10],h[11]=L[14],h[12]=L[3],h[13]=L[7],h[14]=L[11],h[15]=L[15];return h}function er(h,L){var lt=L[0],wt=L[1],Nt=L[2],Yt=L[3],Vt=L[4],he=L[5],ge=L[6],Le=L[7],He=L[8],_r=L[9],Sr=L[10],Er=L[11],Kr=L[12],an=L[13],Lr=L[14],Tn=L[15],_a=lt*he-wt*Vt,Sa=lt*ge-Nt*Vt,pa=lt*Le-Yt*Vt,na=wt*ge-Nt*he,da=wt*Le-Yt*he,ki=Nt*Le-Yt*ge,Li=He*an-_r*Kr,Ai=He*Lr-Sr*Kr,Ni=He*Tn-Er*Kr,Oi=_r*Lr-Sr*an,Xi=_r*Tn-Er*an,to=Sr*Tn-Er*Lr,Ua=_a*to-Sa*Xi+pa*Oi+na*Ni-da*Ai+ki*Li;return Ua?(Ua=1/Ua,h[0]=(he*to-ge*Xi+Le*Oi)*Ua,h[1]=(Nt*Xi-wt*to-Yt*Oi)*Ua,h[2]=(an*ki-Lr*da+Tn*na)*Ua,h[3]=(Sr*da-_r*ki-Er*na)*Ua,h[4]=(ge*Ni-Vt*to-Le*Ai)*Ua,h[5]=(lt*to-Nt*Ni+Yt*Ai)*Ua,h[6]=(Lr*pa-Kr*ki-Tn*Sa)*Ua,h[7]=(He*ki-Sr*pa+Er*Sa)*Ua,h[8]=(Vt*Xi-he*Ni+Le*Li)*Ua,h[9]=(wt*Ni-lt*Xi-Yt*Li)*Ua,h[10]=(Kr*da-an*pa+Tn*_a)*Ua,h[11]=(_r*pa-He*da-Er*_a)*Ua,h[12]=(he*Ai-Vt*Oi-ge*Li)*Ua,h[13]=(lt*Oi-wt*Ai+Nt*Li)*Ua,h[14]=(an*Sa-Kr*na-Lr*_a)*Ua,h[15]=(He*na-_r*Sa+Sr*_a)*Ua,h):null}function cr(h,L){var lt=L[0],wt=L[1],Nt=L[2],Yt=L[3],Vt=L[4],he=L[5],ge=L[6],Le=L[7],He=L[8],_r=L[9],Sr=L[10],Er=L[11],Kr=L[12],an=L[13],Lr=L[14],Tn=L[15];return h[0]=he*(Sr*Tn-Er*Lr)-_r*(ge*Tn-Le*Lr)+an*(ge*Er-Le*Sr),h[1]=-(wt*(Sr*Tn-Er*Lr)-_r*(Nt*Tn-Yt*Lr)+an*(Nt*Er-Yt*Sr)),h[2]=wt*(ge*Tn-Le*Lr)-he*(Nt*Tn-Yt*Lr)+an*(Nt*Le-Yt*ge),h[3]=-(wt*(ge*Er-Le*Sr)-he*(Nt*Er-Yt*Sr)+_r*(Nt*Le-Yt*ge)),h[4]=-(Vt*(Sr*Tn-Er*Lr)-He*(ge*Tn-Le*Lr)+Kr*(ge*Er-Le*Sr)),h[5]=lt*(Sr*Tn-Er*Lr)-He*(Nt*Tn-Yt*Lr)+Kr*(Nt*Er-Yt*Sr),h[6]=-(lt*(ge*Tn-Le*Lr)-Vt*(Nt*Tn-Yt*Lr)+Kr*(Nt*Le-Yt*ge)),h[7]=lt*(ge*Er-Le*Sr)-Vt*(Nt*Er-Yt*Sr)+He*(Nt*Le-Yt*ge),h[8]=Vt*(_r*Tn-Er*an)-He*(he*Tn-Le*an)+Kr*(he*Er-Le*_r),h[9]=-(lt*(_r*Tn-Er*an)-He*(wt*Tn-Yt*an)+Kr*(wt*Er-Yt*_r)),h[10]=lt*(he*Tn-Le*an)-Vt*(wt*Tn-Yt*an)+Kr*(wt*Le-Yt*he),h[11]=-(lt*(he*Er-Le*_r)-Vt*(wt*Er-Yt*_r)+He*(wt*Le-Yt*he)),h[12]=-(Vt*(_r*Lr-Sr*an)-He*(he*Lr-ge*an)+Kr*(he*Sr-ge*_r)),h[13]=lt*(_r*Lr-Sr*an)-He*(wt*Lr-Nt*an)+Kr*(wt*Sr-Nt*_r),h[14]=-(lt*(he*Lr-ge*an)-Vt*(wt*Lr-Nt*an)+Kr*(wt*ge-Nt*he)),h[15]=lt*(he*Sr-ge*_r)-Vt*(wt*Sr-Nt*_r)+He*(wt*ge-Nt*he),h}function dr(h){var L=h[0],lt=h[1],wt=h[2],Nt=h[3],Yt=h[4],Vt=h[5],he=h[6],ge=h[7],Le=h[8],He=h[9],_r=h[10],Sr=h[11],Er=h[12],Kr=h[13],an=h[14],Lr=h[15],Tn=L*Vt-lt*Yt,_a=L*he-wt*Yt,Sa=L*ge-Nt*Yt,pa=lt*he-wt*Vt,na=lt*ge-Nt*Vt,da=wt*ge-Nt*he,ki=Le*Kr-He*Er,Li=Le*an-_r*Er,Ai=Le*Lr-Sr*Er,Ni=He*an-_r*Kr,Oi=He*Lr-Sr*Kr,Xi=_r*Lr-Sr*an;return Tn*Xi-_a*Oi+Sa*Ni+pa*Ai-na*Li+da*ki}function Gr(h,L,lt){var wt=L[0],Nt=L[1],Yt=L[2],Vt=L[3],he=L[4],ge=L[5],Le=L[6],He=L[7],_r=L[8],Sr=L[9],Er=L[10],Kr=L[11],an=L[12],Lr=L[13],Tn=L[14],_a=L[15],Sa=lt[0],pa=lt[1],na=lt[2],da=lt[3];return h[0]=Sa*wt+pa*he+na*_r+da*an,h[1]=Sa*Nt+pa*ge+na*Sr+da*Lr,h[2]=Sa*Yt+pa*Le+na*Er+da*Tn,h[3]=Sa*Vt+pa*He+na*Kr+da*_a,Sa=lt[4],pa=lt[5],na=lt[6],da=lt[7],h[4]=Sa*wt+pa*he+na*_r+da*an,h[5]=Sa*Nt+pa*ge+na*Sr+da*Lr,h[6]=Sa*Yt+pa*Le+na*Er+da*Tn,h[7]=Sa*Vt+pa*He+na*Kr+da*_a,Sa=lt[8],pa=lt[9],na=lt[10],da=lt[11],h[8]=Sa*wt+pa*he+na*_r+da*an,h[9]=Sa*Nt+pa*ge+na*Sr+da*Lr,h[10]=Sa*Yt+pa*Le+na*Er+da*Tn,h[11]=Sa*Vt+pa*He+na*Kr+da*_a,Sa=lt[12],pa=lt[13],na=lt[14],da=lt[15],h[12]=Sa*wt+pa*he+na*_r+da*an,h[13]=Sa*Nt+pa*ge+na*Sr+da*Lr,h[14]=Sa*Yt+pa*Le+na*Er+da*Tn,h[15]=Sa*Vt+pa*He+na*Kr+da*_a,h}function sn(h,L,lt){var wt=lt[0],Nt=lt[1],Yt=lt[2],Vt,he,ge,Le,He,_r,Sr,Er,Kr,an,Lr,Tn;return L===h?(h[12]=L[0]*wt+L[4]*Nt+L[8]*Yt+L[12],h[13]=L[1]*wt+L[5]*Nt+L[9]*Yt+L[13],h[14]=L[2]*wt+L[6]*Nt+L[10]*Yt+L[14],h[15]=L[3]*wt+L[7]*Nt+L[11]*Yt+L[15]):(Vt=L[0],he=L[1],ge=L[2],Le=L[3],He=L[4],_r=L[5],Sr=L[6],Er=L[7],Kr=L[8],an=L[9],Lr=L[10],Tn=L[11],h[0]=Vt,h[1]=he,h[2]=ge,h[3]=Le,h[4]=He,h[5]=_r,h[6]=Sr,h[7]=Er,h[8]=Kr,h[9]=an,h[10]=Lr,h[11]=Tn,h[12]=Vt*wt+He*Nt+Kr*Yt+L[12],h[13]=he*wt+_r*Nt+an*Yt+L[13],h[14]=ge*wt+Sr*Nt+Lr*Yt+L[14],h[15]=Le*wt+Er*Nt+Tn*Yt+L[15]),h}function yn(h,L,lt){var wt=lt[0],Nt=lt[1],Yt=lt[2];return h[0]=L[0]*wt,h[1]=L[1]*wt,h[2]=L[2]*wt,h[3]=L[3]*wt,h[4]=L[4]*Nt,h[5]=L[5]*Nt,h[6]=L[6]*Nt,h[7]=L[7]*Nt,h[8]=L[8]*Yt,h[9]=L[9]*Yt,h[10]=L[10]*Yt,h[11]=L[11]*Yt,h[12]=L[12],h[13]=L[13],h[14]=L[14],h[15]=L[15],h}function ln(h,L,lt,wt){var Nt=wt[0],Yt=wt[1],Vt=wt[2],he=Math.hypot(Nt,Yt,Vt),ge,Le,He,_r,Sr,Er,Kr,an,Lr,Tn,_a,Sa,pa,na,da,ki,Li,Ai,Ni,Oi,Xi,to,Ua,si;return he<M.EPSILON?null:(he=1/he,Nt*=he,Yt*=he,Vt*=he,ge=Math.sin(lt),Le=Math.cos(lt),He=1-Le,_r=L[0],Sr=L[1],Er=L[2],Kr=L[3],an=L[4],Lr=L[5],Tn=L[6],_a=L[7],Sa=L[8],pa=L[9],na=L[10],da=L[11],ki=Nt*Nt*He+Le,Li=Yt*Nt*He+Vt*ge,Ai=Vt*Nt*He-Yt*ge,Ni=Nt*Yt*He-Vt*ge,Oi=Yt*Yt*He+Le,Xi=Vt*Yt*He+Nt*ge,to=Nt*Vt*He+Yt*ge,Ua=Yt*Vt*He-Nt*ge,si=Vt*Vt*He+Le,h[0]=_r*ki+an*Li+Sa*Ai,h[1]=Sr*ki+Lr*Li+pa*Ai,h[2]=Er*ki+Tn*Li+na*Ai,h[3]=Kr*ki+_a*Li+da*Ai,h[4]=_r*Ni+an*Oi+Sa*Xi,h[5]=Sr*Ni+Lr*Oi+pa*Xi,h[6]=Er*Ni+Tn*Oi+na*Xi,h[7]=Kr*Ni+_a*Oi+da*Xi,h[8]=_r*to+an*Ua+Sa*si,h[9]=Sr*to+Lr*Ua+pa*si,h[10]=Er*to+Tn*Ua+na*si,h[11]=Kr*to+_a*Ua+da*si,L!==h&&(h[12]=L[12],h[13]=L[13],h[14]=L[14],h[15]=L[15]),h)}function Vn(h,L,lt){var wt=Math.sin(lt),Nt=Math.cos(lt),Yt=L[4],Vt=L[5],he=L[6],ge=L[7],Le=L[8],He=L[9],_r=L[10],Sr=L[11];return L!==h&&(h[0]=L[0],h[1]=L[1],h[2]=L[2],h[3]=L[3],h[12]=L[12],h[13]=L[13],h[14]=L[14],h[15]=L[15]),h[4]=Yt*Nt+Le*wt,h[5]=Vt*Nt+He*wt,h[6]=he*Nt+_r*wt,h[7]=ge*Nt+Sr*wt,h[8]=Le*Nt-Yt*wt,h[9]=He*Nt-Vt*wt,h[10]=_r*Nt-he*wt,h[11]=Sr*Nt-ge*wt,h}function ca(h,L,lt){var wt=Math.sin(lt),Nt=Math.cos(lt),Yt=L[0],Vt=L[1],he=L[2],ge=L[3],Le=L[8],He=L[9],_r=L[10],Sr=L[11];return L!==h&&(h[4]=L[4],h[5]=L[5],h[6]=L[6],h[7]=L[7],h[12]=L[12],h[13]=L[13],h[14]=L[14],h[15]=L[15]),h[0]=Yt*Nt-Le*wt,h[1]=Vt*Nt-He*wt,h[2]=he*Nt-_r*wt,h[3]=ge*Nt-Sr*wt,h[8]=Yt*wt+Le*Nt,h[9]=Vt*wt+He*Nt,h[10]=he*wt+_r*Nt,h[11]=ge*wt+Sr*Nt,h}function oa(h,L,lt){var wt=Math.sin(lt),Nt=Math.cos(lt),Yt=L[0],Vt=L[1],he=L[2],ge=L[3],Le=L[4],He=L[5],_r=L[6],Sr=L[7];return L!==h&&(h[8]=L[8],h[9]=L[9],h[10]=L[10],h[11]=L[11],h[12]=L[12],h[13]=L[13],h[14]=L[14],h[15]=L[15]),h[0]=Yt*Nt+Le*wt,h[1]=Vt*Nt+He*wt,h[2]=he*Nt+_r*wt,h[3]=ge*Nt+Sr*wt,h[4]=Le*Nt-Yt*wt,h[5]=He*Nt-Vt*wt,h[6]=_r*Nt-he*wt,h[7]=Sr*Nt-ge*wt,h}function bn(h,L){return h[0]=1,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=1,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=1,h[11]=0,h[12]=L[0],h[13]=L[1],h[14]=L[2],h[15]=1,h}function qn(h,L){return h[0]=L[0],h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=L[1],h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=L[2],h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function Gn(h,L,lt){var wt=lt[0],Nt=lt[1],Yt=lt[2],Vt=Math.hypot(wt,Nt,Yt),he,ge,Le;return Vt<M.EPSILON?null:(Vt=1/Vt,wt*=Vt,Nt*=Vt,Yt*=Vt,he=Math.sin(L),ge=Math.cos(L),Le=1-ge,h[0]=wt*wt*Le+ge,h[1]=Nt*wt*Le+Yt*he,h[2]=Yt*wt*Le-Nt*he,h[3]=0,h[4]=wt*Nt*Le-Yt*he,h[5]=Nt*Nt*Le+ge,h[6]=Yt*Nt*Le+wt*he,h[7]=0,h[8]=wt*Yt*Le+Nt*he,h[9]=Nt*Yt*Le-wt*he,h[10]=Yt*Yt*Le+ge,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h)}function zn(h,L){var lt=Math.sin(L),wt=Math.cos(L);return h[0]=1,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=wt,h[6]=lt,h[7]=0,h[8]=0,h[9]=-lt,h[10]=wt,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function ya(h,L){var lt=Math.sin(L),wt=Math.cos(L);return h[0]=wt,h[1]=0,h[2]=-lt,h[3]=0,h[4]=0,h[5]=1,h[6]=0,h[7]=0,h[8]=lt,h[9]=0,h[10]=wt,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function W(h,L){var lt=Math.sin(L),wt=Math.cos(L);return h[0]=wt,h[1]=lt,h[2]=0,h[3]=0,h[4]=-lt,h[5]=wt,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=1,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function qe(h,L,lt){var wt=L[0],Nt=L[1],Yt=L[2],Vt=L[3],he=wt+wt,ge=Nt+Nt,Le=Yt+Yt,He=wt*he,_r=wt*ge,Sr=wt*Le,Er=Nt*ge,Kr=Nt*Le,an=Yt*Le,Lr=Vt*he,Tn=Vt*ge,_a=Vt*Le;return h[0]=1-(Er+an),h[1]=_r+_a,h[2]=Sr-Tn,h[3]=0,h[4]=_r-_a,h[5]=1-(He+an),h[6]=Kr+Lr,h[7]=0,h[8]=Sr+Tn,h[9]=Kr-Lr,h[10]=1-(He+Er),h[11]=0,h[12]=lt[0],h[13]=lt[1],h[14]=lt[2],h[15]=1,h}function be(h,L){var lt=new M.ARRAY_TYPE(3),wt=-L[0],Nt=-L[1],Yt=-L[2],Vt=L[3],he=L[4],ge=L[5],Le=L[6],He=L[7],_r=wt*wt+Nt*Nt+Yt*Yt+Vt*Vt;return _r>0?(lt[0]=(he*Vt+He*wt+ge*Yt-Le*Nt)*2/_r,lt[1]=(ge*Vt+He*Nt+Le*wt-he*Yt)*2/_r,lt[2]=(Le*Vt+He*Yt+he*Nt-ge*wt)*2/_r):(lt[0]=(he*Vt+He*wt+ge*Yt-Le*Nt)*2,lt[1]=(ge*Vt+He*Nt+Le*wt-he*Yt)*2,lt[2]=(Le*Vt+He*Yt+he*Nt-ge*wt)*2),qe(h,L,lt),h}function or(h,L){return h[0]=L[12],h[1]=L[13],h[2]=L[14],h}function ar(h,L){var lt=L[0],wt=L[1],Nt=L[2],Yt=L[4],Vt=L[5],he=L[6],ge=L[8],Le=L[9],He=L[10];return h[0]=Math.hypot(lt,wt,Nt),h[1]=Math.hypot(Yt,Vt,he),h[2]=Math.hypot(ge,Le,He),h}function Br(h,L){var lt=new M.ARRAY_TYPE(3);ar(lt,L);var wt=1/lt[0],Nt=1/lt[1],Yt=1/lt[2],Vt=L[0]*wt,he=L[1]*Nt,ge=L[2]*Yt,Le=L[4]*wt,He=L[5]*Nt,_r=L[6]*Yt,Sr=L[8]*wt,Er=L[9]*Nt,Kr=L[10]*Yt,an=Vt+He+Kr,Lr=0;return an>0?(Lr=Math.sqrt(an+1)*2,h[3]=.25*Lr,h[0]=(_r-Er)/Lr,h[1]=(Sr-ge)/Lr,h[2]=(he-Le)/Lr):Vt>He&&Vt>Kr?(Lr=Math.sqrt(1+Vt-He-Kr)*2,h[3]=(_r-Er)/Lr,h[0]=.25*Lr,h[1]=(he+Le)/Lr,h[2]=(Sr+ge)/Lr):He>Kr?(Lr=Math.sqrt(1+He-Vt-Kr)*2,h[3]=(Sr-ge)/Lr,h[0]=(he+Le)/Lr,h[1]=.25*Lr,h[2]=(_r+Er)/Lr):(Lr=Math.sqrt(1+Kr-Vt-He)*2,h[3]=(he-Le)/Lr,h[0]=(Sr+ge)/Lr,h[1]=(_r+Er)/Lr,h[2]=.25*Lr),h}function Pr(h,L,lt,wt){var Nt=L[0],Yt=L[1],Vt=L[2],he=L[3],ge=Nt+Nt,Le=Yt+Yt,He=Vt+Vt,_r=Nt*ge,Sr=Nt*Le,Er=Nt*He,Kr=Yt*Le,an=Yt*He,Lr=Vt*He,Tn=he*ge,_a=he*Le,Sa=he*He,pa=wt[0],na=wt[1],da=wt[2];return h[0]=(1-(Kr+Lr))*pa,h[1]=(Sr+Sa)*pa,h[2]=(Er-_a)*pa,h[3]=0,h[4]=(Sr-Sa)*na,h[5]=(1-(_r+Lr))*na,h[6]=(an+Tn)*na,h[7]=0,h[8]=(Er+_a)*da,h[9]=(an-Tn)*da,h[10]=(1-(_r+Kr))*da,h[11]=0,h[12]=lt[0],h[13]=lt[1],h[14]=lt[2],h[15]=1,h}function cn(h,L,lt,wt,Nt){var Yt=L[0],Vt=L[1],he=L[2],ge=L[3],Le=Yt+Yt,He=Vt+Vt,_r=he+he,Sr=Yt*Le,Er=Yt*He,Kr=Yt*_r,an=Vt*He,Lr=Vt*_r,Tn=he*_r,_a=ge*Le,Sa=ge*He,pa=ge*_r,na=wt[0],da=wt[1],ki=wt[2],Li=Nt[0],Ai=Nt[1],Ni=Nt[2],Oi=(1-(an+Tn))*na,Xi=(Er+pa)*na,to=(Kr-Sa)*na,Ua=(Er-pa)*da,si=(1-(Sr+Tn))*da,Fs=(Lr+_a)*da,ms=(Kr+Sa)*ki,Oo=(Lr-_a)*ki,Mu=(1-(Sr+an))*ki;return h[0]=Oi,h[1]=Xi,h[2]=to,h[3]=0,h[4]=Ua,h[5]=si,h[6]=Fs,h[7]=0,h[8]=ms,h[9]=Oo,h[10]=Mu,h[11]=0,h[12]=lt[0]+Li-(Oi*Li+Ua*Ai+ms*Ni),h[13]=lt[1]+Ai-(Xi*Li+si*Ai+Oo*Ni),h[14]=lt[2]+Ni-(to*Li+Fs*Ai+Mu*Ni),h[15]=1,h}function xn(h,L){var lt=L[0],wt=L[1],Nt=L[2],Yt=L[3],Vt=lt+lt,he=wt+wt,ge=Nt+Nt,Le=lt*Vt,He=wt*Vt,_r=wt*he,Sr=Nt*Vt,Er=Nt*he,Kr=Nt*ge,an=Yt*Vt,Lr=Yt*he,Tn=Yt*ge;return h[0]=1-_r-Kr,h[1]=He+Tn,h[2]=Sr-Lr,h[3]=0,h[4]=He-Tn,h[5]=1-Le-Kr,h[6]=Er+an,h[7]=0,h[8]=Sr+Lr,h[9]=Er-an,h[10]=1-Le-_r,h[11]=0,h[12]=0,h[13]=0,h[14]=0,h[15]=1,h}function tn(h,L,lt,wt,Nt,Yt,Vt){var he=1/(lt-L),ge=1/(Nt-wt),Le=1/(Yt-Vt);return h[0]=Yt*2*he,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=Yt*2*ge,h[6]=0,h[7]=0,h[8]=(lt+L)*he,h[9]=(Nt+wt)*ge,h[10]=(Vt+Yt)*Le,h[11]=-1,h[12]=0,h[13]=0,h[14]=Vt*Yt*2*Le,h[15]=0,h}function vt(h,L,lt,wt,Nt){var Yt=1/Math.tan(L/2),Vt;return h[0]=Yt/lt,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=Yt,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=-1,h[12]=0,h[13]=0,h[15]=0,Nt!=null&&Nt!==1/0?(Vt=1/(wt-Nt),h[10]=(Nt+wt)*Vt,h[14]=2*Nt*wt*Vt):(h[10]=-1,h[14]=-2*wt),h}var bt=vt;function P(h,L,lt,wt,Nt){var Yt=1/Math.tan(L/2),Vt;return h[0]=Yt/lt,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=Yt,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[11]=-1,h[12]=0,h[13]=0,h[15]=0,Nt!=null&&Nt!==1/0?(Vt=1/(wt-Nt),h[10]=Nt*Vt,h[14]=Nt*wt*Vt):(h[10]=-1,h[14]=-wt),h}function I(h,L,lt,wt){var Nt=Math.tan(L.upDegrees*Math.PI/180),Yt=Math.tan(L.downDegrees*Math.PI/180),Vt=Math.tan(L.leftDegrees*Math.PI/180),he=Math.tan(L.rightDegrees*Math.PI/180),ge=2/(Vt+he),Le=2/(Nt+Yt);return h[0]=ge,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=Le,h[6]=0,h[7]=0,h[8]=-((Vt-he)*ge*.5),h[9]=(Nt-Yt)*Le*.5,h[10]=wt/(lt-wt),h[11]=-1,h[12]=0,h[13]=0,h[14]=wt*lt/(lt-wt),h[15]=0,h}function T(h,L,lt,wt,Nt,Yt,Vt){var he=1/(L-lt),ge=1/(wt-Nt),Le=1/(Yt-Vt);return h[0]=-2*he,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=-2*ge,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=2*Le,h[11]=0,h[12]=(L+lt)*he,h[13]=(Nt+wt)*ge,h[14]=(Vt+Yt)*Le,h[15]=1,h}var q=T;function Et(h,L,lt,wt,Nt,Yt,Vt){var he=1/(L-lt),ge=1/(wt-Nt),Le=1/(Yt-Vt);return h[0]=-2*he,h[1]=0,h[2]=0,h[3]=0,h[4]=0,h[5]=-2*ge,h[6]=0,h[7]=0,h[8]=0,h[9]=0,h[10]=Le,h[11]=0,h[12]=(L+lt)*he,h[13]=(Nt+wt)*ge,h[14]=Yt*Le,h[15]=1,h}function Gt(h,L,lt,wt){var Nt,Yt,Vt,he,ge,Le,He,_r,Sr,Er,Kr=L[0],an=L[1],Lr=L[2],Tn=wt[0],_a=wt[1],Sa=wt[2],pa=lt[0],na=lt[1],da=lt[2];return Math.abs(Kr-pa)<M.EPSILON&&Math.abs(an-na)<M.EPSILON&&Math.abs(Lr-da)<M.EPSILON?Fn(h):(He=Kr-pa,_r=an-na,Sr=Lr-da,Er=1/Math.hypot(He,_r,Sr),He*=Er,_r*=Er,Sr*=Er,Nt=_a*Sr-Sa*_r,Yt=Sa*He-Tn*Sr,Vt=Tn*_r-_a*He,Er=Math.hypot(Nt,Yt,Vt),Er?(Er=1/Er,Nt*=Er,Yt*=Er,Vt*=Er):(Nt=0,Yt=0,Vt=0),he=_r*Vt-Sr*Yt,ge=Sr*Nt-He*Vt,Le=He*Yt-_r*Nt,Er=Math.hypot(he,ge,Le),Er?(Er=1/Er,he*=Er,ge*=Er,Le*=Er):(he=0,ge=0,Le=0),h[0]=Nt,h[1]=he,h[2]=He,h[3]=0,h[4]=Yt,h[5]=ge,h[6]=_r,h[7]=0,h[8]=Vt,h[9]=Le,h[10]=Sr,h[11]=0,h[12]=-(Nt*Kr+Yt*an+Vt*Lr),h[13]=-(he*Kr+ge*an+Le*Lr),h[14]=-(He*Kr+_r*an+Sr*Lr),h[15]=1,h)}function Dt(h,L,lt,wt){var Nt=L[0],Yt=L[1],Vt=L[2],he=wt[0],ge=wt[1],Le=wt[2],He=Nt-lt[0],_r=Yt-lt[1],Sr=Vt-lt[2],Er=He*He+_r*_r+Sr*Sr;Er>0&&(Er=1/Math.sqrt(Er),He*=Er,_r*=Er,Sr*=Er);var Kr=ge*Sr-Le*_r,an=Le*He-he*Sr,Lr=he*_r-ge*He;return Er=Kr*Kr+an*an+Lr*Lr,Er>0&&(Er=1/Math.sqrt(Er),Kr*=Er,an*=Er,Lr*=Er),h[0]=Kr,h[1]=an,h[2]=Lr,h[3]=0,h[4]=_r*Lr-Sr*an,h[5]=Sr*Kr-He*Lr,h[6]=He*an-_r*Kr,h[7]=0,h[8]=He,h[9]=_r,h[10]=Sr,h[11]=0,h[12]=Nt,h[13]=Yt,h[14]=Vt,h[15]=1,h}function ee(h){return"mat4("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+", "+h[4]+", "+h[5]+", "+h[6]+", "+h[7]+", "+h[8]+", "+h[9]+", "+h[10]+", "+h[11]+", "+h[12]+", "+h[13]+", "+h[14]+", "+h[15]+")"}function Ye(h){return Math.hypot(h[0],h[1],h[2],h[3],h[4],h[5],h[6],h[7],h[8],h[9],h[10],h[11],h[12],h[13],h[14],h[15])}function Ae(h,L,lt){return h[0]=L[0]+lt[0],h[1]=L[1]+lt[1],h[2]=L[2]+lt[2],h[3]=L[3]+lt[3],h[4]=L[4]+lt[4],h[5]=L[5]+lt[5],h[6]=L[6]+lt[6],h[7]=L[7]+lt[7],h[8]=L[8]+lt[8],h[9]=L[9]+lt[9],h[10]=L[10]+lt[10],h[11]=L[11]+lt[11],h[12]=L[12]+lt[12],h[13]=L[13]+lt[13],h[14]=L[14]+lt[14],h[15]=L[15]+lt[15],h}function fr(h,L,lt){return h[0]=L[0]-lt[0],h[1]=L[1]-lt[1],h[2]=L[2]-lt[2],h[3]=L[3]-lt[3],h[4]=L[4]-lt[4],h[5]=L[5]-lt[5],h[6]=L[6]-lt[6],h[7]=L[7]-lt[7],h[8]=L[8]-lt[8],h[9]=L[9]-lt[9],h[10]=L[10]-lt[10],h[11]=L[11]-lt[11],h[12]=L[12]-lt[12],h[13]=L[13]-lt[13],h[14]=L[14]-lt[14],h[15]=L[15]-lt[15],h}function Hr(h,L,lt){return h[0]=L[0]*lt,h[1]=L[1]*lt,h[2]=L[2]*lt,h[3]=L[3]*lt,h[4]=L[4]*lt,h[5]=L[5]*lt,h[6]=L[6]*lt,h[7]=L[7]*lt,h[8]=L[8]*lt,h[9]=L[9]*lt,h[10]=L[10]*lt,h[11]=L[11]*lt,h[12]=L[12]*lt,h[13]=L[13]*lt,h[14]=L[14]*lt,h[15]=L[15]*lt,h}function wr(h,L,lt,wt){return h[0]=L[0]+lt[0]*wt,h[1]=L[1]+lt[1]*wt,h[2]=L[2]+lt[2]*wt,h[3]=L[3]+lt[3]*wt,h[4]=L[4]+lt[4]*wt,h[5]=L[5]+lt[5]*wt,h[6]=L[6]+lt[6]*wt,h[7]=L[7]+lt[7]*wt,h[8]=L[8]+lt[8]*wt,h[9]=L[9]+lt[9]*wt,h[10]=L[10]+lt[10]*wt,h[11]=L[11]+lt[11]*wt,h[12]=L[12]+lt[12]*wt,h[13]=L[13]+lt[13]*wt,h[14]=L[14]+lt[14]*wt,h[15]=L[15]+lt[15]*wt,h}function hn(h,L){return h[0]===L[0]&&h[1]===L[1]&&h[2]===L[2]&&h[3]===L[3]&&h[4]===L[4]&&h[5]===L[5]&&h[6]===L[6]&&h[7]===L[7]&&h[8]===L[8]&&h[9]===L[9]&&h[10]===L[10]&&h[11]===L[11]&&h[12]===L[12]&&h[13]===L[13]&&h[14]===L[14]&&h[15]===L[15]}function Yn(h,L){var lt=h[0],wt=h[1],Nt=h[2],Yt=h[3],Vt=h[4],he=h[5],ge=h[6],Le=h[7],He=h[8],_r=h[9],Sr=h[10],Er=h[11],Kr=h[12],an=h[13],Lr=h[14],Tn=h[15],_a=L[0],Sa=L[1],pa=L[2],na=L[3],da=L[4],ki=L[5],Li=L[6],Ai=L[7],Ni=L[8],Oi=L[9],Xi=L[10],to=L[11],Ua=L[12],si=L[13],Fs=L[14],ms=L[15];return Math.abs(lt-_a)<=M.EPSILON*Math.max(1,Math.abs(lt),Math.abs(_a))&&Math.abs(wt-Sa)<=M.EPSILON*Math.max(1,Math.abs(wt),Math.abs(Sa))&&Math.abs(Nt-pa)<=M.EPSILON*Math.max(1,Math.abs(Nt),Math.abs(pa))&&Math.abs(Yt-na)<=M.EPSILON*Math.max(1,Math.abs(Yt),Math.abs(na))&&Math.abs(Vt-da)<=M.EPSILON*Math.max(1,Math.abs(Vt),Math.abs(da))&&Math.abs(he-ki)<=M.EPSILON*Math.max(1,Math.abs(he),Math.abs(ki))&&Math.abs(ge-Li)<=M.EPSILON*Math.max(1,Math.abs(ge),Math.abs(Li))&&Math.abs(Le-Ai)<=M.EPSILON*Math.max(1,Math.abs(Le),Math.abs(Ai))&&Math.abs(He-Ni)<=M.EPSILON*Math.max(1,Math.abs(He),Math.abs(Ni))&&Math.abs(_r-Oi)<=M.EPSILON*Math.max(1,Math.abs(_r),Math.abs(Oi))&&Math.abs(Sr-Xi)<=M.EPSILON*Math.max(1,Math.abs(Sr),Math.abs(Xi))&&Math.abs(Er-to)<=M.EPSILON*Math.max(1,Math.abs(Er),Math.abs(to))&&Math.abs(Kr-Ua)<=M.EPSILON*Math.max(1,Math.abs(Kr),Math.abs(Ua))&&Math.abs(an-si)<=M.EPSILON*Math.max(1,Math.abs(an),Math.abs(si))&&Math.abs(Lr-Fs)<=M.EPSILON*Math.max(1,Math.abs(Lr),Math.abs(Fs))&&Math.abs(Tn-ms)<=M.EPSILON*Math.max(1,Math.abs(Tn),Math.abs(ms))}var Ze=Gr,xr=fr,Dr=et(77160);function Yr(){var h=new M.ARRAY_TYPE(4);return M.ARRAY_TYPE!=Float32Array&&(h[0]=0,h[1]=0,h[2]=0,h[3]=0),h}function $t(h){var L=new M.ARRAY_TYPE(4);return L[0]=h[0],L[1]=h[1],L[2]=h[2],L[3]=h[3],L}function It(h,L,lt,wt){var Nt=new M.ARRAY_TYPE(4);return Nt[0]=h,Nt[1]=L,Nt[2]=lt,Nt[3]=wt,Nt}function ne(h,L){return h[0]=L[0],h[1]=L[1],h[2]=L[2],h[3]=L[3],h}function xe(h,L,lt,wt,Nt){return h[0]=L,h[1]=lt,h[2]=wt,h[3]=Nt,h}function pe(h,L,lt){return h[0]=L[0]+lt[0],h[1]=L[1]+lt[1],h[2]=L[2]+lt[2],h[3]=L[3]+lt[3],h}function ke(h,L,lt){return h[0]=L[0]-lt[0],h[1]=L[1]-lt[1],h[2]=L[2]-lt[2],h[3]=L[3]-lt[3],h}function sr(h,L,lt){return h[0]=L[0]*lt[0],h[1]=L[1]*lt[1],h[2]=L[2]*lt[2],h[3]=L[3]*lt[3],h}function lr(h,L,lt){return h[0]=L[0]/lt[0],h[1]=L[1]/lt[1],h[2]=L[2]/lt[2],h[3]=L[3]/lt[3],h}function en(h,L){return h[0]=Math.ceil(L[0]),h[1]=Math.ceil(L[1]),h[2]=Math.ceil(L[2]),h[3]=Math.ceil(L[3]),h}function Dn(h,L){return h[0]=Math.floor(L[0]),h[1]=Math.floor(L[1]),h[2]=Math.floor(L[2]),h[3]=Math.floor(L[3]),h}function En(h,L,lt){return h[0]=Math.min(L[0],lt[0]),h[1]=Math.min(L[1],lt[1]),h[2]=Math.min(L[2],lt[2]),h[3]=Math.min(L[3],lt[3]),h}function ta(h,L,lt){return h[0]=Math.max(L[0],lt[0]),h[1]=Math.max(L[1],lt[1]),h[2]=Math.max(L[2],lt[2]),h[3]=Math.max(L[3],lt[3]),h}function Qn(h,L){return h[0]=Math.round(L[0]),h[1]=Math.round(L[1]),h[2]=Math.round(L[2]),h[3]=Math.round(L[3]),h}function ba(h,L,lt){return h[0]=L[0]*lt,h[1]=L[1]*lt,h[2]=L[2]*lt,h[3]=L[3]*lt,h}function Ha(h,L,lt,wt){return h[0]=L[0]+lt[0]*wt,h[1]=L[1]+lt[1]*wt,h[2]=L[2]+lt[2]*wt,h[3]=L[3]+lt[3]*wt,h}function Za(h,L){var lt=L[0]-h[0],wt=L[1]-h[1],Nt=L[2]-h[2],Yt=L[3]-h[3];return Math.hypot(lt,wt,Nt,Yt)}function Ba(h,L){var lt=L[0]-h[0],wt=L[1]-h[1],Nt=L[2]-h[2],Yt=L[3]-h[3];return lt*lt+wt*wt+Nt*Nt+Yt*Yt}function To(h){var L=h[0],lt=h[1],wt=h[2],Nt=h[3];return Math.hypot(L,lt,wt,Nt)}function _i(h){var L=h[0],lt=h[1],wt=h[2],Nt=h[3];return L*L+lt*lt+wt*wt+Nt*Nt}function Si(h,L){return h[0]=-L[0],h[1]=-L[1],h[2]=-L[2],h[3]=-L[3],h}function io(h,L){return h[0]=1/L[0],h[1]=1/L[1],h[2]=1/L[2],h[3]=1/L[3],h}function fs(h,L){var lt=L[0],wt=L[1],Nt=L[2],Yt=L[3],Vt=lt*lt+wt*wt+Nt*Nt+Yt*Yt;return Vt>0&&(Vt=1/Math.sqrt(Vt)),h[0]=lt*Vt,h[1]=wt*Vt,h[2]=Nt*Vt,h[3]=Yt*Vt,h}function Io(h,L){return h[0]*L[0]+h[1]*L[1]+h[2]*L[2]+h[3]*L[3]}function oo(h,L,lt,wt){var Nt=lt[0]*wt[1]-lt[1]*wt[0],Yt=lt[0]*wt[2]-lt[2]*wt[0],Vt=lt[0]*wt[3]-lt[3]*wt[0],he=lt[1]*wt[2]-lt[2]*wt[1],ge=lt[1]*wt[3]-lt[3]*wt[1],Le=lt[2]*wt[3]-lt[3]*wt[2],He=L[0],_r=L[1],Sr=L[2],Er=L[3];return h[0]=_r*Le-Sr*ge+Er*he,h[1]=-(He*Le)+Sr*Vt-Er*Yt,h[2]=He*ge-_r*Vt+Er*Nt,h[3]=-(He*he)+_r*Yt-Sr*Nt,h}function Ca(h,L,lt,wt){var Nt=L[0],Yt=L[1],Vt=L[2],he=L[3];return h[0]=Nt+wt*(lt[0]-Nt),h[1]=Yt+wt*(lt[1]-Yt),h[2]=Vt+wt*(lt[2]-Vt),h[3]=he+wt*(lt[3]-he),h}function ko(h,L){L=L||1;var lt,wt,Nt,Yt,Vt,he;do lt=M.RANDOM()*2-1,wt=M.RANDOM()*2-1,Vt=lt*lt+wt*wt;while(Vt>=1);do Nt=M.RANDOM()*2-1,Yt=M.RANDOM()*2-1,he=Nt*Nt+Yt*Yt;while(he>=1);var ge=Math.sqrt((1-Vt)/he);return h[0]=L*lt,h[1]=L*wt,h[2]=L*Nt*ge,h[3]=L*Yt*ge,h}function cs(h,L,lt){var wt=L[0],Nt=L[1],Yt=L[2],Vt=L[3];return h[0]=lt[0]*wt+lt[4]*Nt+lt[8]*Yt+lt[12]*Vt,h[1]=lt[1]*wt+lt[5]*Nt+lt[9]*Yt+lt[13]*Vt,h[2]=lt[2]*wt+lt[6]*Nt+lt[10]*Yt+lt[14]*Vt,h[3]=lt[3]*wt+lt[7]*Nt+lt[11]*Yt+lt[15]*Vt,h}function ri(h,L,lt){var wt=L[0],Nt=L[1],Yt=L[2],Vt=lt[0],he=lt[1],ge=lt[2],Le=lt[3],He=Le*wt+he*Yt-ge*Nt,_r=Le*Nt+ge*wt-Vt*Yt,Sr=Le*Yt+Vt*Nt-he*wt,Er=-Vt*wt-he*Nt-ge*Yt;return h[0]=He*Le+Er*-Vt+_r*-ge-Sr*-he,h[1]=_r*Le+Er*-he+Sr*-Vt-He*-ge,h[2]=Sr*Le+Er*-ge+He*-he-_r*-Vt,h[3]=L[3],h}function Vi(h){return h[0]=0,h[1]=0,h[2]=0,h[3]=0,h}function ls(h){return"vec4("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+")"}function Xo(h,L){return h[0]===L[0]&&h[1]===L[1]&&h[2]===L[2]&&h[3]===L[3]}function Hi(h,L){var lt=h[0],wt=h[1],Nt=h[2],Yt=h[3],Vt=L[0],he=L[1],ge=L[2],Le=L[3];return Math.abs(lt-Vt)<=M.EPSILON*Math.max(1,Math.abs(lt),Math.abs(Vt))&&Math.abs(wt-he)<=M.EPSILON*Math.max(1,Math.abs(wt),Math.abs(he))&&Math.abs(Nt-ge)<=M.EPSILON*Math.max(1,Math.abs(Nt),Math.abs(ge))&&Math.abs(Yt-Le)<=M.EPSILON*Math.max(1,Math.abs(Yt),Math.abs(Le))}var so=ke,Ws=sr,Yo=lr,Mi=Za,uo=Ba,hs=To,Un=_i,Eo=function(){var h=Yr();return function(L,lt,wt,Nt,Yt,Vt){var he,ge;for(lt||(lt=4),wt||(wt=0),Nt?ge=Math.min(Nt*lt+wt,L.length):ge=L.length,he=wt;he<ge;he+=lt)h[0]=L[he],h[1]=L[he+1],h[2]=L[he+2],h[3]=L[he+3],Yt(h,h,Vt),L[he]=h[0],L[he+1]=h[1],L[he+2]=h[2],L[he+3]=h[3];return L}}();function Po(){var h=new M.ARRAY_TYPE(4);return M.ARRAY_TYPE!=Float32Array&&(h[0]=0,h[1]=0,h[2]=0),h[3]=1,h}function Ss(h){return h[0]=0,h[1]=0,h[2]=0,h[3]=1,h}function Wo(h,L,lt){lt=lt*.5;var wt=Math.sin(lt);return h[0]=wt*L[0],h[1]=wt*L[1],h[2]=wt*L[2],h[3]=Math.cos(lt),h}function Ds(h,L){var lt=Math.acos(L[3])*2,wt=Math.sin(lt/2);return wt>M.EPSILON?(h[0]=L[0]/wt,h[1]=L[1]/wt,h[2]=L[2]/wt):(h[0]=1,h[1]=0,h[2]=0),lt}function $n(h,L){var lt=lo(h,L);return Math.acos(2*lt*lt-1)}function ji(h,L,lt){var wt=L[0],Nt=L[1],Yt=L[2],Vt=L[3],he=lt[0],ge=lt[1],Le=lt[2],He=lt[3];return h[0]=wt*He+Vt*he+Nt*Le-Yt*ge,h[1]=Nt*He+Vt*ge+Yt*he-wt*Le,h[2]=Yt*He+Vt*Le+wt*ge-Nt*he,h[3]=Vt*He-wt*he-Nt*ge-Yt*Le,h}function Zi(h,L,lt){lt*=.5;var wt=L[0],Nt=L[1],Yt=L[2],Vt=L[3],he=Math.sin(lt),ge=Math.cos(lt);return h[0]=wt*ge+Vt*he,h[1]=Nt*ge+Yt*he,h[2]=Yt*ge-Nt*he,h[3]=Vt*ge-wt*he,h}function bi(h,L,lt){lt*=.5;var wt=L[0],Nt=L[1],Yt=L[2],Vt=L[3],he=Math.sin(lt),ge=Math.cos(lt);return h[0]=wt*ge-Yt*he,h[1]=Nt*ge+Vt*he,h[2]=Yt*ge+wt*he,h[3]=Vt*ge-Nt*he,h}function Vo(h,L,lt){lt*=.5;var wt=L[0],Nt=L[1],Yt=L[2],Vt=L[3],he=Math.sin(lt),ge=Math.cos(lt);return h[0]=wt*ge+Nt*he,h[1]=Nt*ge-wt*he,h[2]=Yt*ge+Vt*he,h[3]=Vt*ge-Yt*he,h}function Ho(h,L){var lt=L[0],wt=L[1],Nt=L[2];return h[0]=lt,h[1]=wt,h[2]=Nt,h[3]=Math.sqrt(Math.abs(1-lt*lt-wt*wt-Nt*Nt)),h}function fo(h,L){var lt=L[0],wt=L[1],Nt=L[2],Yt=L[3],Vt=Math.sqrt(lt*lt+wt*wt+Nt*Nt),he=Math.exp(Yt),ge=Vt>0?he*Math.sin(Vt)/Vt:0;return h[0]=lt*ge,h[1]=wt*ge,h[2]=Nt*ge,h[3]=he*Math.cos(Vt),h}function ds(h,L){var lt=L[0],wt=L[1],Nt=L[2],Yt=L[3],Vt=Math.sqrt(lt*lt+wt*wt+Nt*Nt),he=Vt>0?Math.atan2(Vt,Yt)/Vt:0;return h[0]=lt*he,h[1]=wt*he,h[2]=Nt*he,h[3]=.5*Math.log(lt*lt+wt*wt+Nt*Nt+Yt*Yt),h}function Ms(h,L,lt){return ds(h,L),Bo(h,h,lt),fo(h,h),h}function ns(h,L,lt,wt){var Nt=L[0],Yt=L[1],Vt=L[2],he=L[3],ge=lt[0],Le=lt[1],He=lt[2],_r=lt[3],Sr,Er,Kr,an,Lr;return Er=Nt*ge+Yt*Le+Vt*He+he*_r,Er<0&&(Er=-Er,ge=-ge,Le=-Le,He=-He,_r=-_r),1-Er>M.EPSILON?(Sr=Math.acos(Er),Kr=Math.sin(Sr),an=Math.sin((1-wt)*Sr)/Kr,Lr=Math.sin(wt*Sr)/Kr):(an=1-wt,Lr=wt),h[0]=an*Nt+Lr*ge,h[1]=an*Yt+Lr*Le,h[2]=an*Vt+Lr*He,h[3]=an*he+Lr*_r,h}function Ia(h){var L=M.RANDOM(),lt=M.RANDOM(),wt=M.RANDOM(),Nt=Math.sqrt(1-L),Yt=Math.sqrt(L);return h[0]=Nt*Math.sin(2*Math.PI*lt),h[1]=Nt*Math.cos(2*Math.PI*lt),h[2]=Yt*Math.sin(2*Math.PI*wt),h[3]=Yt*Math.cos(2*Math.PI*wt),h}function Ps(h,L){var lt=L[0],wt=L[1],Nt=L[2],Yt=L[3],Vt=lt*lt+wt*wt+Nt*Nt+Yt*Yt,he=Vt?1/Vt:0;return h[0]=-lt*he,h[1]=-wt*he,h[2]=-Nt*he,h[3]=Yt*he,h}function _o(h,L){return h[0]=-L[0],h[1]=-L[1],h[2]=-L[2],h[3]=L[3],h}function co(h,L){var lt=L[0]+L[4]+L[8],wt;if(lt>0)wt=Math.sqrt(lt+1),h[3]=.5*wt,wt=.5/wt,h[0]=(L[5]-L[7])*wt,h[1]=(L[6]-L[2])*wt,h[2]=(L[1]-L[3])*wt;else{var Nt=0;L[4]>L[0]&&(Nt=1),L[8]>L[Nt*3+Nt]&&(Nt=2);var Yt=(Nt+1)%3,Vt=(Nt+2)%3;wt=Math.sqrt(L[Nt*3+Nt]-L[Yt*3+Yt]-L[Vt*3+Vt]+1),h[Nt]=.5*wt,wt=.5/wt,h[3]=(L[Yt*3+Vt]-L[Vt*3+Yt])*wt,h[Yt]=(L[Yt*3+Nt]+L[Nt*3+Yt])*wt,h[Vt]=(L[Vt*3+Nt]+L[Nt*3+Vt])*wt}return h}function As(h,L,lt,wt){var Nt=.5*Math.PI/180;L*=Nt,lt*=Nt,wt*=Nt;var Yt=Math.sin(L),Vt=Math.cos(L),he=Math.sin(lt),ge=Math.cos(lt),Le=Math.sin(wt),He=Math.cos(wt);return h[0]=Yt*ge*He-Vt*he*Le,h[1]=Vt*he*He+Yt*ge*Le,h[2]=Vt*ge*Le-Yt*he*He,h[3]=Vt*ge*He+Yt*he*Le,h}function Ro(h){return"quat("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+")"}var Gi=$t,So=It,qi=ne,Lo=xe,hi=pe,Cs=ji,Bo=ba,lo=Io,jo=Ca,Mo=To,Zo=Mo,go=_i,Da=go,Ri=fs,zi=Xo,Pa=Hi,Ii=function(){var h=Dr.create(),L=Dr.fromValues(1,0,0),lt=Dr.fromValues(0,1,0);return function(wt,Nt,Yt){var Vt=Dr.dot(Nt,Yt);return Vt<-.999999?(Dr.cross(h,L,Nt),Dr.len(h)<1e-6&&Dr.cross(h,lt,Nt),Dr.normalize(h,h),Wo(wt,h,Math.PI),wt):Vt>.999999?(wt[0]=0,wt[1]=0,wt[2]=0,wt[3]=1,wt):(Dr.cross(h,Nt,Yt),wt[0]=h[0],wt[1]=h[1],wt[2]=h[2],wt[3]=1+Vt,Ri(wt,wt))}}(),qo=function(){var h=Po(),L=Po();return function(lt,wt,Nt,Yt,Vt,he){return ns(h,wt,Vt,he),ns(L,Nt,Yt,he),ns(lt,h,L,2*he*(1-he)),lt}}(),Bi=function(){var h=Zr.create();return function(L,lt,wt,Nt){return h[0]=wt[0],h[3]=wt[1],h[6]=wt[2],h[1]=Nt[0],h[4]=Nt[1],h[7]=Nt[2],h[2]=-lt[0],h[5]=-lt[1],h[8]=-lt[2],Ri(L,co(L,h))}}();function Fo(){var h=new M.ARRAY_TYPE(8);return M.ARRAY_TYPE!=Float32Array&&(h[0]=0,h[1]=0,h[2]=0,h[4]=0,h[5]=0,h[6]=0,h[7]=0),h[3]=1,h}function Ao(h){var L=new M.ARRAY_TYPE(8);return L[0]=h[0],L[1]=h[1],L[2]=h[2],L[3]=h[3],L[4]=h[4],L[5]=h[5],L[6]=h[6],L[7]=h[7],L}function $i(h,L,lt,wt,Nt,Yt,Vt,he){var ge=new M.ARRAY_TYPE(8);return ge[0]=h,ge[1]=L,ge[2]=lt,ge[3]=wt,ge[4]=Nt,ge[5]=Yt,ge[6]=Vt,ge[7]=he,ge}function Ts(h,L,lt,wt,Nt,Yt,Vt){var he=new M.ARRAY_TYPE(8);he[0]=h,he[1]=L,he[2]=lt,he[3]=wt;var ge=Nt*.5,Le=Yt*.5,He=Vt*.5;return he[4]=ge*wt+Le*lt-He*L,he[5]=Le*wt+He*h-ge*lt,he[6]=He*wt+ge*L-Le*h,he[7]=-ge*h-Le*L-He*lt,he}function vs(h,L,lt){var wt=lt[0]*.5,Nt=lt[1]*.5,Yt=lt[2]*.5,Vt=L[0],he=L[1],ge=L[2],Le=L[3];return h[0]=Vt,h[1]=he,h[2]=ge,h[3]=Le,h[4]=wt*Le+Nt*ge-Yt*he,h[5]=Nt*Le+Yt*Vt-wt*ge,h[6]=Yt*Le+wt*he-Nt*Vt,h[7]=-wt*Vt-Nt*he-Yt*ge,h}function $o(h,L){return h[0]=0,h[1]=0,h[2]=0,h[3]=1,h[4]=L[0]*.5,h[5]=L[1]*.5,h[6]=L[2]*.5,h[7]=0,h}function ps(h,L){return h[0]=L[0],h[1]=L[1],h[2]=L[2],h[3]=L[3],h[4]=0,h[5]=0,h[6]=0,h[7]=0,h}function ou(h,L){var lt=Po();Br(lt,L);var wt=new M.ARRAY_TYPE(3);return or(wt,L),vs(h,lt,wt),h}function Vs(h,L){return h[0]=L[0],h[1]=L[1],h[2]=L[2],h[3]=L[3],h[4]=L[4],h[5]=L[5],h[6]=L[6],h[7]=L[7],h}function gs(h){return h[0]=0,h[1]=0,h[2]=0,h[3]=1,h[4]=0,h[5]=0,h[6]=0,h[7]=0,h}function Ct(h,L,lt,wt,Nt,Yt,Vt,he,ge){return h[0]=L,h[1]=lt,h[2]=wt,h[3]=Nt,h[4]=Yt,h[5]=Vt,h[6]=he,h[7]=ge,h}var Zt=qi;function Xe(h,L){return h[0]=L[4],h[1]=L[5],h[2]=L[6],h[3]=L[7],h}var Ke=qi;function kr(h,L){return h[4]=L[0],h[5]=L[1],h[6]=L[2],h[7]=L[3],h}function gn(h,L){var lt=L[4],wt=L[5],Nt=L[6],Yt=L[7],Vt=-L[0],he=-L[1],ge=-L[2],Le=L[3];return h[0]=(lt*Le+Yt*Vt+wt*ge-Nt*he)*2,h[1]=(wt*Le+Yt*he+Nt*Vt-lt*ge)*2,h[2]=(Nt*Le+Yt*ge+lt*he-wt*Vt)*2,h}function Nn(h,L,lt){var wt=L[0],Nt=L[1],Yt=L[2],Vt=L[3],he=lt[0]*.5,ge=lt[1]*.5,Le=lt[2]*.5,He=L[4],_r=L[5],Sr=L[6],Er=L[7];return h[0]=wt,h[1]=Nt,h[2]=Yt,h[3]=Vt,h[4]=Vt*he+Nt*Le-Yt*ge+He,h[5]=Vt*ge+Yt*he-wt*Le+_r,h[6]=Vt*Le+wt*ge-Nt*he+Sr,h[7]=-wt*he-Nt*ge-Yt*Le+Er,h}function ra(h,L,lt){var wt=-L[0],Nt=-L[1],Yt=-L[2],Vt=L[3],he=L[4],ge=L[5],Le=L[6],He=L[7],_r=he*Vt+He*wt+ge*Yt-Le*Nt,Sr=ge*Vt+He*Nt+Le*wt-he*Yt,Er=Le*Vt+He*Yt+he*Nt-ge*wt,Kr=He*Vt-he*wt-ge*Nt-Le*Yt;return Zi(h,L,lt),wt=h[0],Nt=h[1],Yt=h[2],Vt=h[3],h[4]=_r*Vt+Kr*wt+Sr*Yt-Er*Nt,h[5]=Sr*Vt+Kr*Nt+Er*wt-_r*Yt,h[6]=Er*Vt+Kr*Yt+_r*Nt-Sr*wt,h[7]=Kr*Vt-_r*wt-Sr*Nt-Er*Yt,h}function oi(h,L,lt){var wt=-L[0],Nt=-L[1],Yt=-L[2],Vt=L[3],he=L[4],ge=L[5],Le=L[6],He=L[7],_r=he*Vt+He*wt+ge*Yt-Le*Nt,Sr=ge*Vt+He*Nt+Le*wt-he*Yt,Er=Le*Vt+He*Yt+he*Nt-ge*wt,Kr=He*Vt-he*wt-ge*Nt-Le*Yt;return bi(h,L,lt),wt=h[0],Nt=h[1],Yt=h[2],Vt=h[3],h[4]=_r*Vt+Kr*wt+Sr*Yt-Er*Nt,h[5]=Sr*Vt+Kr*Nt+Er*wt-_r*Yt,h[6]=Er*Vt+Kr*Yt+_r*Nt-Sr*wt,h[7]=Kr*Vt-_r*wt-Sr*Nt-Er*Yt,h}function Ji(h,L,lt){var wt=-L[0],Nt=-L[1],Yt=-L[2],Vt=L[3],he=L[4],ge=L[5],Le=L[6],He=L[7],_r=he*Vt+He*wt+ge*Yt-Le*Nt,Sr=ge*Vt+He*Nt+Le*wt-he*Yt,Er=Le*Vt+He*Yt+he*Nt-ge*wt,Kr=He*Vt-he*wt-ge*Nt-Le*Yt;return Vo(h,L,lt),wt=h[0],Nt=h[1],Yt=h[2],Vt=h[3],h[4]=_r*Vt+Kr*wt+Sr*Yt-Er*Nt,h[5]=Sr*Vt+Kr*Nt+Er*wt-_r*Yt,h[6]=Er*Vt+Kr*Yt+_r*Nt-Sr*wt,h[7]=Kr*Vt-_r*wt-Sr*Nt-Er*Yt,h}function ho(h,L,lt){var wt=lt[0],Nt=lt[1],Yt=lt[2],Vt=lt[3],he=L[0],ge=L[1],Le=L[2],He=L[3];return h[0]=he*Vt+He*wt+ge*Yt-Le*Nt,h[1]=ge*Vt+He*Nt+Le*wt-he*Yt,h[2]=Le*Vt+He*Yt+he*Nt-ge*wt,h[3]=He*Vt-he*wt-ge*Nt-Le*Yt,he=L[4],ge=L[5],Le=L[6],He=L[7],h[4]=he*Vt+He*wt+ge*Yt-Le*Nt,h[5]=ge*Vt+He*Nt+Le*wt-he*Yt,h[6]=Le*Vt+He*Yt+he*Nt-ge*wt,h[7]=He*Vt-he*wt-ge*Nt-Le*Yt,h}function Hs(h,L,lt){var wt=L[0],Nt=L[1],Yt=L[2],Vt=L[3],he=lt[0],ge=lt[1],Le=lt[2],He=lt[3];return h[0]=wt*He+Vt*he+Nt*Le-Yt*ge,h[1]=Nt*He+Vt*ge+Yt*he-wt*Le,h[2]=Yt*He+Vt*Le+wt*ge-Nt*he,h[3]=Vt*He-wt*he-Nt*ge-Yt*Le,he=lt[4],ge=lt[5],Le=lt[6],He=lt[7],h[4]=wt*He+Vt*he+Nt*Le-Yt*ge,h[5]=Nt*He+Vt*ge+Yt*he-wt*Le,h[6]=Yt*He+Vt*Le+wt*ge-Nt*he,h[7]=Vt*He-wt*he-Nt*ge-Yt*Le,h}function _u(h,L,lt,wt){if(Math.abs(wt)<M.EPSILON)return Vs(h,L);var Nt=Math.hypot(lt[0],lt[1],lt[2]);wt=wt*.5;var Yt=Math.sin(wt),Vt=Yt*lt[0]/Nt,he=Yt*lt[1]/Nt,ge=Yt*lt[2]/Nt,Le=Math.cos(wt),He=L[0],_r=L[1],Sr=L[2],Er=L[3];h[0]=He*Le+Er*Vt+_r*ge-Sr*he,h[1]=_r*Le+Er*he+Sr*Vt-He*ge,h[2]=Sr*Le+Er*ge+He*he-_r*Vt,h[3]=Er*Le-He*Vt-_r*he-Sr*ge;var Kr=L[4],an=L[5],Lr=L[6],Tn=L[7];return h[4]=Kr*Le+Tn*Vt+an*ge-Lr*he,h[5]=an*Le+Tn*he+Lr*Vt-Kr*ge,h[6]=Lr*Le+Tn*ge+Kr*he-an*Vt,h[7]=Tn*Le-Kr*Vt-an*he-Lr*ge,h}function Ui(h,L,lt){return h[0]=L[0]+lt[0],h[1]=L[1]+lt[1],h[2]=L[2]+lt[2],h[3]=L[3]+lt[3],h[4]=L[4]+lt[4],h[5]=L[5]+lt[5],h[6]=L[6]+lt[6],h[7]=L[7]+lt[7],h}function yo(h,L,lt){var wt=L[0],Nt=L[1],Yt=L[2],Vt=L[3],he=lt[4],ge=lt[5],Le=lt[6],He=lt[7],_r=L[4],Sr=L[5],Er=L[6],Kr=L[7],an=lt[0],Lr=lt[1],Tn=lt[2],_a=lt[3];return h[0]=wt*_a+Vt*an+Nt*Tn-Yt*Lr,h[1]=Nt*_a+Vt*Lr+Yt*an-wt*Tn,h[2]=Yt*_a+Vt*Tn+wt*Lr-Nt*an,h[3]=Vt*_a-wt*an-Nt*Lr-Yt*Tn,h[4]=wt*He+Vt*he+Nt*Le-Yt*ge+_r*_a+Kr*an+Sr*Tn-Er*Lr,h[5]=Nt*He+Vt*ge+Yt*he-wt*Le+Sr*_a+Kr*Lr+Er*an-_r*Tn,h[6]=Yt*He+Vt*Le+wt*ge-Nt*he+Er*_a+Kr*Tn+_r*Lr-Sr*an,h[7]=Vt*He-wt*he-Nt*ge-Yt*Le+Kr*_a-_r*an-Sr*Lr-Er*Tn,h}var Js=yo;function Xu(h,L,lt){return h[0]=L[0]*lt,h[1]=L[1]*lt,h[2]=L[2]*lt,h[3]=L[3]*lt,h[4]=L[4]*lt,h[5]=L[5]*lt,h[6]=L[6]*lt,h[7]=L[7]*lt,h}var Su=lo;function su(h,L,lt,wt){var Nt=1-wt;return Su(L,lt)<0&&(wt=-wt),h[0]=L[0]*Nt+lt[0]*wt,h[1]=L[1]*Nt+lt[1]*wt,h[2]=L[2]*Nt+lt[2]*wt,h[3]=L[3]*Nt+lt[3]*wt,h[4]=L[4]*Nt+lt[4]*wt,h[5]=L[5]*Nt+lt[5]*wt,h[6]=L[6]*Nt+lt[6]*wt,h[7]=L[7]*Nt+lt[7]*wt,h}function uu(h,L){var lt=ys(L);return h[0]=-L[0]/lt,h[1]=-L[1]/lt,h[2]=-L[2]/lt,h[3]=L[3]/lt,h[4]=-L[4]/lt,h[5]=-L[5]/lt,h[6]=-L[6]/lt,h[7]=L[7]/lt,h}function tu(h,L){return h[0]=-L[0],h[1]=-L[1],h[2]=-L[2],h[3]=L[3],h[4]=-L[4],h[5]=-L[5],h[6]=-L[6],h[7]=L[7],h}var Rs=Mo,eu=Rs,ys=go,No=ys;function nf(h,L){var lt=ys(L);if(lt>0){lt=Math.sqrt(lt);var wt=L[0]/lt,Nt=L[1]/lt,Yt=L[2]/lt,Vt=L[3]/lt,he=L[4],ge=L[5],Le=L[6],He=L[7],_r=wt*he+Nt*ge+Yt*Le+Vt*He;h[0]=wt,h[1]=Nt,h[2]=Yt,h[3]=Vt,h[4]=(he-wt*_r)/lt,h[5]=(ge-Nt*_r)/lt,h[6]=(Le-Yt*_r)/lt,h[7]=(He-Vt*_r)/lt}return h}function Bf(h){return"quat2("+h[0]+", "+h[1]+", "+h[2]+", "+h[3]+", "+h[4]+", "+h[5]+", "+h[6]+", "+h[7]+")"}function Ff(h,L){return h[0]===L[0]&&h[1]===L[1]&&h[2]===L[2]&&h[3]===L[3]&&h[4]===L[4]&&h[5]===L[5]&&h[6]===L[6]&&h[7]===L[7]}function Bs(h,L){var lt=h[0],wt=h[1],Nt=h[2],Yt=h[3],Vt=h[4],he=h[5],ge=h[6],Le=h[7],He=L[0],_r=L[1],Sr=L[2],Er=L[3],Kr=L[4],an=L[5],Lr=L[6],Tn=L[7];return Math.abs(lt-He)<=M.EPSILON*Math.max(1,Math.abs(lt),Math.abs(He))&&Math.abs(wt-_r)<=M.EPSILON*Math.max(1,Math.abs(wt),Math.abs(_r))&&Math.abs(Nt-Sr)<=M.EPSILON*Math.max(1,Math.abs(Nt),Math.abs(Sr))&&Math.abs(Yt-Er)<=M.EPSILON*Math.max(1,Math.abs(Yt),Math.abs(Er))&&Math.abs(Vt-Kr)<=M.EPSILON*Math.max(1,Math.abs(Vt),Math.abs(Kr))&&Math.abs(he-an)<=M.EPSILON*Math.max(1,Math.abs(he),Math.abs(an))&&Math.abs(ge-Lr)<=M.EPSILON*Math.max(1,Math.abs(ge),Math.abs(Lr))&&Math.abs(Le-Tn)<=M.EPSILON*Math.max(1,Math.abs(Le),Math.abs(Tn))}var Gf=et(31437)},35600:function(Se,R,et){"use strict";et.r(R),et.d(R,{add:function(){return rt},adjoint:function(){return p},clone:function(){return z},copy:function(){return H},create:function(){return nt},determinant:function(){return _},equals:function(){return Ht},exactEquals:function(){return At},frob:function(){return Z},fromMat2d:function(){return B},fromMat4:function(){return V},fromQuat:function(){return G},fromRotation:function(){return v},fromScaling:function(){return K},fromTranslation:function(){return g},fromValues:function(){return F},identity:function(){return A},invert:function(){return x},mul:function(){return Rt},multiply:function(){return E},multiplyScalar:function(){return ht},multiplyScalarAndAdd:function(){return kt},normalFromMat4:function(){return Y},projection:function(){return j},rotate:function(){return k},scale:function(){return N},set:function(){return M},str:function(){return Q},sub:function(){return le},subtract:function(){return ut},translate:function(){return b},transpose:function(){return y}});var ft=et(49685);function nt(){var dt=new ft.ARRAY_TYPE(9);return ft.ARRAY_TYPE!=Float32Array&&(dt[1]=0,dt[2]=0,dt[3]=0,dt[5]=0,dt[6]=0,dt[7]=0),dt[0]=1,dt[4]=1,dt[8]=1,dt}function V(dt,ot){return dt[0]=ot[0],dt[1]=ot[1],dt[2]=ot[2],dt[3]=ot[4],dt[4]=ot[5],dt[5]=ot[6],dt[6]=ot[8],dt[7]=ot[9],dt[8]=ot[10],dt}function z(dt){var ot=new ft.ARRAY_TYPE(9);return ot[0]=dt[0],ot[1]=dt[1],ot[2]=dt[2],ot[3]=dt[3],ot[4]=dt[4],ot[5]=dt[5],ot[6]=dt[6],ot[7]=dt[7],ot[8]=dt[8],ot}function H(dt,ot){return dt[0]=ot[0],dt[1]=ot[1],dt[2]=ot[2],dt[3]=ot[3],dt[4]=ot[4],dt[5]=ot[5],dt[6]=ot[6],dt[7]=ot[7],dt[8]=ot[8],dt}function F(dt,ot,yt,Lt,Ot,Wt,Jt,De,te){var oe=new ft.ARRAY_TYPE(9);return oe[0]=dt,oe[1]=ot,oe[2]=yt,oe[3]=Lt,oe[4]=Ot,oe[5]=Wt,oe[6]=Jt,oe[7]=De,oe[8]=te,oe}function M(dt,ot,yt,Lt,Ot,Wt,Jt,De,te,oe){return dt[0]=ot,dt[1]=yt,dt[2]=Lt,dt[3]=Ot,dt[4]=Wt,dt[5]=Jt,dt[6]=De,dt[7]=te,dt[8]=oe,dt}function A(dt){return dt[0]=1,dt[1]=0,dt[2]=0,dt[3]=0,dt[4]=1,dt[5]=0,dt[6]=0,dt[7]=0,dt[8]=1,dt}function y(dt,ot){if(dt===ot){var yt=ot[1],Lt=ot[2],Ot=ot[5];dt[1]=ot[3],dt[2]=ot[6],dt[3]=yt,dt[5]=ot[7],dt[6]=Lt,dt[7]=Ot}else dt[0]=ot[0],dt[1]=ot[3],dt[2]=ot[6],dt[3]=ot[1],dt[4]=ot[4],dt[5]=ot[7],dt[6]=ot[2],dt[7]=ot[5],dt[8]=ot[8];return dt}function x(dt,ot){var yt=ot[0],Lt=ot[1],Ot=ot[2],Wt=ot[3],Jt=ot[4],De=ot[5],te=ot[6],oe=ot[7],me=ot[8],Ce=me*Jt-De*oe,_e=-me*Wt+De*te,zt=oe*Wt-Jt*te,ue=yt*Ce+Lt*_e+Ot*zt;return ue?(ue=1/ue,dt[0]=Ce*ue,dt[1]=(-me*Lt+Ot*oe)*ue,dt[2]=(De*Lt-Ot*Jt)*ue,dt[3]=_e*ue,dt[4]=(me*yt-Ot*te)*ue,dt[5]=(-De*yt+Ot*Wt)*ue,dt[6]=zt*ue,dt[7]=(-oe*yt+Lt*te)*ue,dt[8]=(Jt*yt-Lt*Wt)*ue,dt):null}function p(dt,ot){var yt=ot[0],Lt=ot[1],Ot=ot[2],Wt=ot[3],Jt=ot[4],De=ot[5],te=ot[6],oe=ot[7],me=ot[8];return dt[0]=Jt*me-De*oe,dt[1]=Ot*oe-Lt*me,dt[2]=Lt*De-Ot*Jt,dt[3]=De*te-Wt*me,dt[4]=yt*me-Ot*te,dt[5]=Ot*Wt-yt*De,dt[6]=Wt*oe-Jt*te,dt[7]=Lt*te-yt*oe,dt[8]=yt*Jt-Lt*Wt,dt}function _(dt){var ot=dt[0],yt=dt[1],Lt=dt[2],Ot=dt[3],Wt=dt[4],Jt=dt[5],De=dt[6],te=dt[7],oe=dt[8];return ot*(oe*Wt-Jt*te)+yt*(-oe*Ot+Jt*De)+Lt*(te*Ot-Wt*De)}function E(dt,ot,yt){var Lt=ot[0],Ot=ot[1],Wt=ot[2],Jt=ot[3],De=ot[4],te=ot[5],oe=ot[6],me=ot[7],Ce=ot[8],_e=yt[0],zt=yt[1],ue=yt[2],Pe=yt[3],Xt=yt[4],ie=yt[5],Ie=yt[6],se=yt[7],Te=yt[8];return dt[0]=_e*Lt+zt*Jt+ue*oe,dt[1]=_e*Ot+zt*De+ue*me,dt[2]=_e*Wt+zt*te+ue*Ce,dt[3]=Pe*Lt+Xt*Jt+ie*oe,dt[4]=Pe*Ot+Xt*De+ie*me,dt[5]=Pe*Wt+Xt*te+ie*Ce,dt[6]=Ie*Lt+se*Jt+Te*oe,dt[7]=Ie*Ot+se*De+Te*me,dt[8]=Ie*Wt+se*te+Te*Ce,dt}function b(dt,ot,yt){var Lt=ot[0],Ot=ot[1],Wt=ot[2],Jt=ot[3],De=ot[4],te=ot[5],oe=ot[6],me=ot[7],Ce=ot[8],_e=yt[0],zt=yt[1];return dt[0]=Lt,dt[1]=Ot,dt[2]=Wt,dt[3]=Jt,dt[4]=De,dt[5]=te,dt[6]=_e*Lt+zt*Jt+oe,dt[7]=_e*Ot+zt*De+me,dt[8]=_e*Wt+zt*te+Ce,dt}function k(dt,ot,yt){var Lt=ot[0],Ot=ot[1],Wt=ot[2],Jt=ot[3],De=ot[4],te=ot[5],oe=ot[6],me=ot[7],Ce=ot[8],_e=Math.sin(yt),zt=Math.cos(yt);return dt[0]=zt*Lt+_e*Jt,dt[1]=zt*Ot+_e*De,dt[2]=zt*Wt+_e*te,dt[3]=zt*Jt-_e*Lt,dt[4]=zt*De-_e*Ot,dt[5]=zt*te-_e*Wt,dt[6]=oe,dt[7]=me,dt[8]=Ce,dt}function N(dt,ot,yt){var Lt=yt[0],Ot=yt[1];return dt[0]=Lt*ot[0],dt[1]=Lt*ot[1],dt[2]=Lt*ot[2],dt[3]=Ot*ot[3],dt[4]=Ot*ot[4],dt[5]=Ot*ot[5],dt[6]=ot[6],dt[7]=ot[7],dt[8]=ot[8],dt}function g(dt,ot){return dt[0]=1,dt[1]=0,dt[2]=0,dt[3]=0,dt[4]=1,dt[5]=0,dt[6]=ot[0],dt[7]=ot[1],dt[8]=1,dt}function v(dt,ot){var yt=Math.sin(ot),Lt=Math.cos(ot);return dt[0]=Lt,dt[1]=yt,dt[2]=0,dt[3]=-yt,dt[4]=Lt,dt[5]=0,dt[6]=0,dt[7]=0,dt[8]=1,dt}function K(dt,ot){return dt[0]=ot[0],dt[1]=0,dt[2]=0,dt[3]=0,dt[4]=ot[1],dt[5]=0,dt[6]=0,dt[7]=0,dt[8]=1,dt}function B(dt,ot){return dt[0]=ot[0],dt[1]=ot[1],dt[2]=0,dt[3]=ot[2],dt[4]=ot[3],dt[5]=0,dt[6]=ot[4],dt[7]=ot[5],dt[8]=1,dt}function G(dt,ot){var yt=ot[0],Lt=ot[1],Ot=ot[2],Wt=ot[3],Jt=yt+yt,De=Lt+Lt,te=Ot+Ot,oe=yt*Jt,me=Lt*Jt,Ce=Lt*De,_e=Ot*Jt,zt=Ot*De,ue=Ot*te,Pe=Wt*Jt,Xt=Wt*De,ie=Wt*te;return dt[0]=1-Ce-ue,dt[3]=me-ie,dt[6]=_e+Xt,dt[1]=me+ie,dt[4]=1-oe-ue,dt[7]=zt-Pe,dt[2]=_e-Xt,dt[5]=zt+Pe,dt[8]=1-oe-Ce,dt}function Y(dt,ot){var yt=ot[0],Lt=ot[1],Ot=ot[2],Wt=ot[3],Jt=ot[4],De=ot[5],te=ot[6],oe=ot[7],me=ot[8],Ce=ot[9],_e=ot[10],zt=ot[11],ue=ot[12],Pe=ot[13],Xt=ot[14],ie=ot[15],Ie=yt*De-Lt*Jt,se=yt*te-Ot*Jt,Te=yt*oe-Wt*Jt,Be=Lt*te-Ot*De,Tt=Lt*oe-Wt*De,nr=Ot*oe-Wt*te,Ir=me*Pe-Ce*ue,Zr=me*Xt-_e*ue,Ur=me*ie-zt*ue,wn=Ce*Xt-_e*Pe,Xr=Ce*ie-zt*Pe,Sn=_e*ie-zt*Xt,Kn=Ie*Sn-se*Xr+Te*wn+Be*Ur-Tt*Zr+nr*Ir;return Kn?(Kn=1/Kn,dt[0]=(De*Sn-te*Xr+oe*wn)*Kn,dt[1]=(te*Ur-Jt*Sn-oe*Zr)*Kn,dt[2]=(Jt*Xr-De*Ur+oe*Ir)*Kn,dt[3]=(Ot*Xr-Lt*Sn-Wt*wn)*Kn,dt[4]=(yt*Sn-Ot*Ur+Wt*Zr)*Kn,dt[5]=(Lt*Ur-yt*Xr-Wt*Ir)*Kn,dt[6]=(Pe*nr-Xt*Tt+ie*Be)*Kn,dt[7]=(Xt*Te-ue*nr-ie*se)*Kn,dt[8]=(ue*Tt-Pe*Te+ie*Ie)*Kn,dt):null}function j(dt,ot,yt){return dt[0]=2/ot,dt[1]=0,dt[2]=0,dt[3]=0,dt[4]=-2/yt,dt[5]=0,dt[6]=-1,dt[7]=1,dt[8]=1,dt}function Q(dt){return"mat3("+dt[0]+", "+dt[1]+", "+dt[2]+", "+dt[3]+", "+dt[4]+", "+dt[5]+", "+dt[6]+", "+dt[7]+", "+dt[8]+")"}function Z(dt){return Math.hypot(dt[0],dt[1],dt[2],dt[3],dt[4],dt[5],dt[6],dt[7],dt[8])}function rt(dt,ot,yt){return dt[0]=ot[0]+yt[0],dt[1]=ot[1]+yt[1],dt[2]=ot[2]+yt[2],dt[3]=ot[3]+yt[3],dt[4]=ot[4]+yt[4],dt[5]=ot[5]+yt[5],dt[6]=ot[6]+yt[6],dt[7]=ot[7]+yt[7],dt[8]=ot[8]+yt[8],dt}function ut(dt,ot,yt){return dt[0]=ot[0]-yt[0],dt[1]=ot[1]-yt[1],dt[2]=ot[2]-yt[2],dt[3]=ot[3]-yt[3],dt[4]=ot[4]-yt[4],dt[5]=ot[5]-yt[5],dt[6]=ot[6]-yt[6],dt[7]=ot[7]-yt[7],dt[8]=ot[8]-yt[8],dt}function ht(dt,ot,yt){return dt[0]=ot[0]*yt,dt[1]=ot[1]*yt,dt[2]=ot[2]*yt,dt[3]=ot[3]*yt,dt[4]=ot[4]*yt,dt[5]=ot[5]*yt,dt[6]=ot[6]*yt,dt[7]=ot[7]*yt,dt[8]=ot[8]*yt,dt}function kt(dt,ot,yt,Lt){return dt[0]=ot[0]+yt[0]*Lt,dt[1]=ot[1]+yt[1]*Lt,dt[2]=ot[2]+yt[2]*Lt,dt[3]=ot[3]+yt[3]*Lt,dt[4]=ot[4]+yt[4]*Lt,dt[5]=ot[5]+yt[5]*Lt,dt[6]=ot[6]+yt[6]*Lt,dt[7]=ot[7]+yt[7]*Lt,dt[8]=ot[8]+yt[8]*Lt,dt}function At(dt,ot){return dt[0]===ot[0]&&dt[1]===ot[1]&&dt[2]===ot[2]&&dt[3]===ot[3]&&dt[4]===ot[4]&&dt[5]===ot[5]&&dt[6]===ot[6]&&dt[7]===ot[7]&&dt[8]===ot[8]}function Ht(dt,ot){var yt=dt[0],Lt=dt[1],Ot=dt[2],Wt=dt[3],Jt=dt[4],De=dt[5],te=dt[6],oe=dt[7],me=dt[8],Ce=ot[0],_e=ot[1],zt=ot[2],ue=ot[3],Pe=ot[4],Xt=ot[5],ie=ot[6],Ie=ot[7],se=ot[8];return Math.abs(yt-Ce)<=ft.EPSILON*Math.max(1,Math.abs(yt),Math.abs(Ce))&&Math.abs(Lt-_e)<=ft.EPSILON*Math.max(1,Math.abs(Lt),Math.abs(_e))&&Math.abs(Ot-zt)<=ft.EPSILON*Math.max(1,Math.abs(Ot),Math.abs(zt))&&Math.abs(Wt-ue)<=ft.EPSILON*Math.max(1,Math.abs(Wt),Math.abs(ue))&&Math.abs(Jt-Pe)<=ft.EPSILON*Math.max(1,Math.abs(Jt),Math.abs(Pe))&&Math.abs(De-Xt)<=ft.EPSILON*Math.max(1,Math.abs(De),Math.abs(Xt))&&Math.abs(te-ie)<=ft.EPSILON*Math.max(1,Math.abs(te),Math.abs(ie))&&Math.abs(oe-Ie)<=ft.EPSILON*Math.max(1,Math.abs(oe),Math.abs(Ie))&&Math.abs(me-se)<=ft.EPSILON*Math.max(1,Math.abs(me),Math.abs(se))}var Rt=E,le=ut},31437:function(Se,R,et){"use strict";et.r(R),et.d(R,{add:function(){return M},angle:function(){return dt},ceil:function(){return p},clone:function(){return V},copy:function(){return H},create:function(){return nt},cross:function(){return rt},dist:function(){return oe},distance:function(){return v},div:function(){return te},divide:function(){return x},dot:function(){return Z},equals:function(){return Ot},exactEquals:function(){return Lt},floor:function(){return _},forEach:function(){return _e},fromValues:function(){return z},inverse:function(){return j},len:function(){return Wt},length:function(){return B},lerp:function(){return ut},max:function(){return b},min:function(){return E},mul:function(){return De},multiply:function(){return y},negate:function(){return Y},normalize:function(){return Q},random:function(){return ht},rotate:function(){return le},round:function(){return k},scale:function(){return N},scaleAndAdd:function(){return g},set:function(){return F},sqrDist:function(){return me},sqrLen:function(){return Ce},squaredDistance:function(){return K},squaredLength:function(){return G},str:function(){return yt},sub:function(){return Jt},subtract:function(){return A},transformMat2:function(){return kt},transformMat2d:function(){return At},transformMat3:function(){return Ht},transformMat4:function(){return Rt},zero:function(){return ot}});var ft=et(49685);function nt(){var zt=new ft.ARRAY_TYPE(2);return ft.ARRAY_TYPE!=Float32Array&&(zt[0]=0,zt[1]=0),zt}function V(zt){var ue=new ft.ARRAY_TYPE(2);return ue[0]=zt[0],ue[1]=zt[1],ue}function z(zt,ue){var Pe=new ft.ARRAY_TYPE(2);return Pe[0]=zt,Pe[1]=ue,Pe}function H(zt,ue){return zt[0]=ue[0],zt[1]=ue[1],zt}function F(zt,ue,Pe){return zt[0]=ue,zt[1]=Pe,zt}function M(zt,ue,Pe){return zt[0]=ue[0]+Pe[0],zt[1]=ue[1]+Pe[1],zt}function A(zt,ue,Pe){return zt[0]=ue[0]-Pe[0],zt[1]=ue[1]-Pe[1],zt}function y(zt,ue,Pe){return zt[0]=ue[0]*Pe[0],zt[1]=ue[1]*Pe[1],zt}function x(zt,ue,Pe){return zt[0]=ue[0]/Pe[0],zt[1]=ue[1]/Pe[1],zt}function p(zt,ue){return zt[0]=Math.ceil(ue[0]),zt[1]=Math.ceil(ue[1]),zt}function _(zt,ue){return zt[0]=Math.floor(ue[0]),zt[1]=Math.floor(ue[1]),zt}function E(zt,ue,Pe){return zt[0]=Math.min(ue[0],Pe[0]),zt[1]=Math.min(ue[1],Pe[1]),zt}function b(zt,ue,Pe){return zt[0]=Math.max(ue[0],Pe[0]),zt[1]=Math.max(ue[1],Pe[1]),zt}function k(zt,ue){return zt[0]=Math.round(ue[0]),zt[1]=Math.round(ue[1]),zt}function N(zt,ue,Pe){return zt[0]=ue[0]*Pe,zt[1]=ue[1]*Pe,zt}function g(zt,ue,Pe,Xt){return zt[0]=ue[0]+Pe[0]*Xt,zt[1]=ue[1]+Pe[1]*Xt,zt}function v(zt,ue){var Pe=ue[0]-zt[0],Xt=ue[1]-zt[1];return Math.hypot(Pe,Xt)}function K(zt,ue){var Pe=ue[0]-zt[0],Xt=ue[1]-zt[1];return Pe*Pe+Xt*Xt}function B(zt){var ue=zt[0],Pe=zt[1];return Math.hypot(ue,Pe)}function G(zt){var ue=zt[0],Pe=zt[1];return ue*ue+Pe*Pe}function Y(zt,ue){return zt[0]=-ue[0],zt[1]=-ue[1],zt}function j(zt,ue){return zt[0]=1/ue[0],zt[1]=1/ue[1],zt}function Q(zt,ue){var Pe=ue[0],Xt=ue[1],ie=Pe*Pe+Xt*Xt;return ie>0&&(ie=1/Math.sqrt(ie)),zt[0]=ue[0]*ie,zt[1]=ue[1]*ie,zt}function Z(zt,ue){return zt[0]*ue[0]+zt[1]*ue[1]}function rt(zt,ue,Pe){var Xt=ue[0]*Pe[1]-ue[1]*Pe[0];return zt[0]=zt[1]=0,zt[2]=Xt,zt}function ut(zt,ue,Pe,Xt){var ie=ue[0],Ie=ue[1];return zt[0]=ie+Xt*(Pe[0]-ie),zt[1]=Ie+Xt*(Pe[1]-Ie),zt}function ht(zt,ue){ue=ue||1;var Pe=ft.RANDOM()*2*Math.PI;return zt[0]=Math.cos(Pe)*ue,zt[1]=Math.sin(Pe)*ue,zt}function kt(zt,ue,Pe){var Xt=ue[0],ie=ue[1];return zt[0]=Pe[0]*Xt+Pe[2]*ie,zt[1]=Pe[1]*Xt+Pe[3]*ie,zt}function At(zt,ue,Pe){var Xt=ue[0],ie=ue[1];return zt[0]=Pe[0]*Xt+Pe[2]*ie+Pe[4],zt[1]=Pe[1]*Xt+Pe[3]*ie+Pe[5],zt}function Ht(zt,ue,Pe){var Xt=ue[0],ie=ue[1];return zt[0]=Pe[0]*Xt+Pe[3]*ie+Pe[6],zt[1]=Pe[1]*Xt+Pe[4]*ie+Pe[7],zt}function Rt(zt,ue,Pe){var Xt=ue[0],ie=ue[1];return zt[0]=Pe[0]*Xt+Pe[4]*ie+Pe[12],zt[1]=Pe[1]*Xt+Pe[5]*ie+Pe[13],zt}function le(zt,ue,Pe,Xt){var ie=ue[0]-Pe[0],Ie=ue[1]-Pe[1],se=Math.sin(Xt),Te=Math.cos(Xt);return zt[0]=ie*Te-Ie*se+Pe[0],zt[1]=ie*se+Ie*Te+Pe[1],zt}function dt(zt,ue){var Pe=zt[0],Xt=zt[1],ie=ue[0],Ie=ue[1],se=Math.sqrt(Pe*Pe+Xt*Xt)*Math.sqrt(ie*ie+Ie*Ie),Te=se&&(Pe*ie+Xt*Ie)/se;return Math.acos(Math.min(Math.max(Te,-1),1))}function ot(zt){return zt[0]=0,zt[1]=0,zt}function yt(zt){return"vec2("+zt[0]+", "+zt[1]+")"}function Lt(zt,ue){return zt[0]===ue[0]&&zt[1]===ue[1]}function Ot(zt,ue){var Pe=zt[0],Xt=zt[1],ie=ue[0],Ie=ue[1];return Math.abs(Pe-ie)<=ft.EPSILON*Math.max(1,Math.abs(Pe),Math.abs(ie))&&Math.abs(Xt-Ie)<=ft.EPSILON*Math.max(1,Math.abs(Xt),Math.abs(Ie))}var Wt=B,Jt=A,De=y,te=x,oe=v,me=K,Ce=G,_e=function(){var zt=nt();return function(ue,Pe,Xt,ie,Ie,se){var Te,Be;for(Pe||(Pe=2),Xt||(Xt=0),ie?Be=Math.min(ie*Pe+Xt,ue.length):Be=ue.length,Te=Xt;Te<Be;Te+=Pe)zt[0]=ue[Te],zt[1]=ue[Te+1],Ie(zt,zt,se),ue[Te]=zt[0],ue[Te+1]=zt[1];return ue}}()},77160:function(Se,R,et){"use strict";et.r(R),et.d(R,{add:function(){return A},angle:function(){return Lt},bezier:function(){return kt},ceil:function(){return _},clone:function(){return V},copy:function(){return F},create:function(){return nt},cross:function(){return rt},dist:function(){return Ce},distance:function(){return K},div:function(){return me},divide:function(){return p},dot:function(){return Z},equals:function(){return De},exactEquals:function(){return Jt},floor:function(){return E},forEach:function(){return Pe},fromValues:function(){return H},hermite:function(){return ht},inverse:function(){return j},len:function(){return zt},length:function(){return z},lerp:function(){return ut},max:function(){return k},min:function(){return b},mul:function(){return oe},multiply:function(){return x},negate:function(){return Y},normalize:function(){return Q},random:function(){return At},rotateX:function(){return dt},rotateY:function(){return ot},rotateZ:function(){return yt},round:function(){return N},scale:function(){return g},scaleAndAdd:function(){return v},set:function(){return M},sqrDist:function(){return _e},sqrLen:function(){return ue},squaredDistance:function(){return B},squaredLength:function(){return G},str:function(){return Wt},sub:function(){return te},subtract:function(){return y},transformMat3:function(){return Rt},transformMat4:function(){return Ht},transformQuat:function(){return le},zero:function(){return Ot}});var ft=et(49685);function nt(){var Xt=new ft.ARRAY_TYPE(3);return ft.ARRAY_TYPE!=Float32Array&&(Xt[0]=0,Xt[1]=0,Xt[2]=0),Xt}function V(Xt){var ie=new ft.ARRAY_TYPE(3);return ie[0]=Xt[0],ie[1]=Xt[1],ie[2]=Xt[2],ie}function z(Xt){var ie=Xt[0],Ie=Xt[1],se=Xt[2];return Math.hypot(ie,Ie,se)}function H(Xt,ie,Ie){var se=new ft.ARRAY_TYPE(3);return se[0]=Xt,se[1]=ie,se[2]=Ie,se}function F(Xt,ie){return Xt[0]=ie[0],Xt[1]=ie[1],Xt[2]=ie[2],Xt}function M(Xt,ie,Ie,se){return Xt[0]=ie,Xt[1]=Ie,Xt[2]=se,Xt}function A(Xt,ie,Ie){return Xt[0]=ie[0]+Ie[0],Xt[1]=ie[1]+Ie[1],Xt[2]=ie[2]+Ie[2],Xt}function y(Xt,ie,Ie){return Xt[0]=ie[0]-Ie[0],Xt[1]=ie[1]-Ie[1],Xt[2]=ie[2]-Ie[2],Xt}function x(Xt,ie,Ie){return Xt[0]=ie[0]*Ie[0],Xt[1]=ie[1]*Ie[1],Xt[2]=ie[2]*Ie[2],Xt}function p(Xt,ie,Ie){return Xt[0]=ie[0]/Ie[0],Xt[1]=ie[1]/Ie[1],Xt[2]=ie[2]/Ie[2],Xt}function _(Xt,ie){return Xt[0]=Math.ceil(ie[0]),Xt[1]=Math.ceil(ie[1]),Xt[2]=Math.ceil(ie[2]),Xt}function E(Xt,ie){return Xt[0]=Math.floor(ie[0]),Xt[1]=Math.floor(ie[1]),Xt[2]=Math.floor(ie[2]),Xt}function b(Xt,ie,Ie){return Xt[0]=Math.min(ie[0],Ie[0]),Xt[1]=Math.min(ie[1],Ie[1]),Xt[2]=Math.min(ie[2],Ie[2]),Xt}function k(Xt,ie,Ie){return Xt[0]=Math.max(ie[0],Ie[0]),Xt[1]=Math.max(ie[1],Ie[1]),Xt[2]=Math.max(ie[2],Ie[2]),Xt}function N(Xt,ie){return Xt[0]=Math.round(ie[0]),Xt[1]=Math.round(ie[1]),Xt[2]=Math.round(ie[2]),Xt}function g(Xt,ie,Ie){return Xt[0]=ie[0]*Ie,Xt[1]=ie[1]*Ie,Xt[2]=ie[2]*Ie,Xt}function v(Xt,ie,Ie,se){return Xt[0]=ie[0]+Ie[0]*se,Xt[1]=ie[1]+Ie[1]*se,Xt[2]=ie[2]+Ie[2]*se,Xt}function K(Xt,ie){var Ie=ie[0]-Xt[0],se=ie[1]-Xt[1],Te=ie[2]-Xt[2];return Math.hypot(Ie,se,Te)}function B(Xt,ie){var Ie=ie[0]-Xt[0],se=ie[1]-Xt[1],Te=ie[2]-Xt[2];return Ie*Ie+se*se+Te*Te}function G(Xt){var ie=Xt[0],Ie=Xt[1],se=Xt[2];return ie*ie+Ie*Ie+se*se}function Y(Xt,ie){return Xt[0]=-ie[0],Xt[1]=-ie[1],Xt[2]=-ie[2],Xt}function j(Xt,ie){return Xt[0]=1/ie[0],Xt[1]=1/ie[1],Xt[2]=1/ie[2],Xt}function Q(Xt,ie){var Ie=ie[0],se=ie[1],Te=ie[2],Be=Ie*Ie+se*se+Te*Te;return Be>0&&(Be=1/Math.sqrt(Be)),Xt[0]=ie[0]*Be,Xt[1]=ie[1]*Be,Xt[2]=ie[2]*Be,Xt}function Z(Xt,ie){return Xt[0]*ie[0]+Xt[1]*ie[1]+Xt[2]*ie[2]}function rt(Xt,ie,Ie){var se=ie[0],Te=ie[1],Be=ie[2],Tt=Ie[0],nr=Ie[1],Ir=Ie[2];return Xt[0]=Te*Ir-Be*nr,Xt[1]=Be*Tt-se*Ir,Xt[2]=se*nr-Te*Tt,Xt}function ut(Xt,ie,Ie,se){var Te=ie[0],Be=ie[1],Tt=ie[2];return Xt[0]=Te+se*(Ie[0]-Te),Xt[1]=Be+se*(Ie[1]-Be),Xt[2]=Tt+se*(Ie[2]-Tt),Xt}function ht(Xt,ie,Ie,se,Te,Be){var Tt=Be*Be,nr=Tt*(2*Be-3)+1,Ir=Tt*(Be-2)+Be,Zr=Tt*(Be-1),Ur=Tt*(3-2*Be);return Xt[0]=ie[0]*nr+Ie[0]*Ir+se[0]*Zr+Te[0]*Ur,Xt[1]=ie[1]*nr+Ie[1]*Ir+se[1]*Zr+Te[1]*Ur,Xt[2]=ie[2]*nr+Ie[2]*Ir+se[2]*Zr+Te[2]*Ur,Xt}function kt(Xt,ie,Ie,se,Te,Be){var Tt=1-Be,nr=Tt*Tt,Ir=Be*Be,Zr=nr*Tt,Ur=3*Be*nr,wn=3*Ir*Tt,Xr=Ir*Be;return Xt[0]=ie[0]*Zr+Ie[0]*Ur+se[0]*wn+Te[0]*Xr,Xt[1]=ie[1]*Zr+Ie[1]*Ur+se[1]*wn+Te[1]*Xr,Xt[2]=ie[2]*Zr+Ie[2]*Ur+se[2]*wn+Te[2]*Xr,Xt}function At(Xt,ie){ie=ie||1;var Ie=ft.RANDOM()*2*Math.PI,se=ft.RANDOM()*2-1,Te=Math.sqrt(1-se*se)*ie;return Xt[0]=Math.cos(Ie)*Te,Xt[1]=Math.sin(Ie)*Te,Xt[2]=se*ie,Xt}function Ht(Xt,ie,Ie){var se=ie[0],Te=ie[1],Be=ie[2],Tt=Ie[3]*se+Ie[7]*Te+Ie[11]*Be+Ie[15];return Tt=Tt||1,Xt[0]=(Ie[0]*se+Ie[4]*Te+Ie[8]*Be+Ie[12])/Tt,Xt[1]=(Ie[1]*se+Ie[5]*Te+Ie[9]*Be+Ie[13])/Tt,Xt[2]=(Ie[2]*se+Ie[6]*Te+Ie[10]*Be+Ie[14])/Tt,Xt}function Rt(Xt,ie,Ie){var se=ie[0],Te=ie[1],Be=ie[2];return Xt[0]=se*Ie[0]+Te*Ie[3]+Be*Ie[6],Xt[1]=se*Ie[1]+Te*Ie[4]+Be*Ie[7],Xt[2]=se*Ie[2]+Te*Ie[5]+Be*Ie[8],Xt}function le(Xt,ie,Ie){var se=Ie[0],Te=Ie[1],Be=Ie[2],Tt=Ie[3],nr=ie[0],Ir=ie[1],Zr=ie[2],Ur=Te*Zr-Be*Ir,wn=Be*nr-se*Zr,Xr=se*Ir-Te*nr,Sn=Te*Xr-Be*wn,Kn=Be*Ur-se*Xr,Fn=se*wn-Te*Ur,pn=Tt*2;return Ur*=pn,wn*=pn,Xr*=pn,Sn*=2,Kn*=2,Fn*=2,Xt[0]=nr+Ur+Sn,Xt[1]=Ir+wn+Kn,Xt[2]=Zr+Xr+Fn,Xt}function dt(Xt,ie,Ie,se){var Te=[],Be=[];return Te[0]=ie[0]-Ie[0],Te[1]=ie[1]-Ie[1],Te[2]=ie[2]-Ie[2],Be[0]=Te[0],Be[1]=Te[1]*Math.cos(se)-Te[2]*Math.sin(se),Be[2]=Te[1]*Math.sin(se)+Te[2]*Math.cos(se),Xt[0]=Be[0]+Ie[0],Xt[1]=Be[1]+Ie[1],Xt[2]=Be[2]+Ie[2],Xt}function ot(Xt,ie,Ie,se){var Te=[],Be=[];return Te[0]=ie[0]-Ie[0],Te[1]=ie[1]-Ie[1],Te[2]=ie[2]-Ie[2],Be[0]=Te[2]*Math.sin(se)+Te[0]*Math.cos(se),Be[1]=Te[1],Be[2]=Te[2]*Math.cos(se)-Te[0]*Math.sin(se),Xt[0]=Be[0]+Ie[0],Xt[1]=Be[1]+Ie[1],Xt[2]=Be[2]+Ie[2],Xt}function yt(Xt,ie,Ie,se){var Te=[],Be=[];return Te[0]=ie[0]-Ie[0],Te[1]=ie[1]-Ie[1],Te[2]=ie[2]-Ie[2],Be[0]=Te[0]*Math.cos(se)-Te[1]*Math.sin(se),Be[1]=Te[0]*Math.sin(se)+Te[1]*Math.cos(se),Be[2]=Te[2],Xt[0]=Be[0]+Ie[0],Xt[1]=Be[1]+Ie[1],Xt[2]=Be[2]+Ie[2],Xt}function Lt(Xt,ie){var Ie=Xt[0],se=Xt[1],Te=Xt[2],Be=ie[0],Tt=ie[1],nr=ie[2],Ir=Math.sqrt(Ie*Ie+se*se+Te*Te),Zr=Math.sqrt(Be*Be+Tt*Tt+nr*nr),Ur=Ir*Zr,wn=Ur&&Z(Xt,ie)/Ur;return Math.acos(Math.min(Math.max(wn,-1),1))}function Ot(Xt){return Xt[0]=0,Xt[1]=0,Xt[2]=0,Xt}function Wt(Xt){return"vec3("+Xt[0]+", "+Xt[1]+", "+Xt[2]+")"}function Jt(Xt,ie){return Xt[0]===ie[0]&&Xt[1]===ie[1]&&Xt[2]===ie[2]}function De(Xt,ie){var Ie=Xt[0],se=Xt[1],Te=Xt[2],Be=ie[0],Tt=ie[1],nr=ie[2];return Math.abs(Ie-Be)<=ft.EPSILON*Math.max(1,Math.abs(Ie),Math.abs(Be))&&Math.abs(se-Tt)<=ft.EPSILON*Math.max(1,Math.abs(se),Math.abs(Tt))&&Math.abs(Te-nr)<=ft.EPSILON*Math.max(1,Math.abs(Te),Math.abs(nr))}var te=y,oe=x,me=p,Ce=K,_e=B,zt=z,ue=G,Pe=function(){var Xt=nt();return function(ie,Ie,se,Te,Be,Tt){var nr,Ir;for(Ie||(Ie=3),se||(se=0),Te?Ir=Math.min(Te*Ie+se,ie.length):Ir=ie.length,nr=se;nr<Ir;nr+=Ie)Xt[0]=ie[nr],Xt[1]=ie[nr+1],Xt[2]=ie[nr+2],Be(Xt,Xt,Tt),ie[nr]=Xt[0],ie[nr+1]=Xt[1],ie[nr+2]=Xt[2];return ie}}()},38186:function(Se){var R=[],et=[],ft="insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).";function nt(z,H){if(H=H||{},z===void 0)throw new Error(ft);var F=H.prepend===!0?"prepend":"append",M=H.container!==void 0?H.container:document.querySelector("head"),A=R.indexOf(M);A===-1&&(A=R.push(M)-1,et[A]={});var y;return et[A]!==void 0&&et[A][F]!==void 0?y=et[A][F]:(y=et[A][F]=V(),F==="prepend"?M.insertBefore(y,M.childNodes[0]):M.appendChild(y)),z.charCodeAt(0)===65279&&(z=z.substr(1,z.length)),y.styleSheet?y.styleSheet.cssText+=z:y.textContent+=z,y}function V(){var z=document.createElement("style");return z.setAttribute("type","text/css"),z}Se.exports=nt,Se.exports.insertCss=nt},35171:function(Se){Se.exports=function(et){return!et||typeof et=="string"?!1:et instanceof Array||Array.isArray(et)||et.length>=0&&(et.splice instanceof Function||Object.getOwnPropertyDescriptor(et,et.length-1)&&et.constructor.name!=="String")}},62705:function(Se,R,et){var ft=et(55639),nt=ft.Symbol;Se.exports=nt},44239:function(Se,R,et){var ft=et(62705),nt=et(89607),V=et(2333),z="[object Null]",H="[object Undefined]",F=ft?ft.toStringTag:void 0;function M(A){return A==null?A===void 0?H:z:F&&F in Object(A)?nt(A):V(A)}Se.exports=M},38749:function(Se,R,et){var ft=et(44239),nt=et(41780),V=et(37005),z="[object Arguments]",H="[object Array]",F="[object Boolean]",M="[object Date]",A="[object Error]",y="[object Function]",x="[object Map]",p="[object Number]",_="[object Object]",E="[object RegExp]",b="[object Set]",k="[object String]",N="[object WeakMap]",g="[object ArrayBuffer]",v="[object DataView]",K="[object Float32Array]",B="[object Float64Array]",G="[object Int8Array]",Y="[object Int16Array]",j="[object Int32Array]",Q="[object Uint8Array]",Z="[object Uint8ClampedArray]",rt="[object Uint16Array]",ut="[object Uint32Array]",ht={};ht[K]=ht[B]=ht[G]=ht[Y]=ht[j]=ht[Q]=ht[Z]=ht[rt]=ht[ut]=!0,ht[z]=ht[H]=ht[g]=ht[F]=ht[v]=ht[M]=ht[A]=ht[y]=ht[x]=ht[p]=ht[_]=ht[E]=ht[b]=ht[k]=ht[N]=!1;function kt(At){return V(At)&&nt(At.length)&&!!ht[ft(At)]}Se.exports=kt},51717:function(Se){function R(et){return function(ft){return et(ft)}}Se.exports=R},31957:function(Se,R,et){var ft=typeof et.g=="object"&&et.g&&et.g.Object===Object&&et.g;Se.exports=ft},85924:function(Se,R,et){var ft=et(5569),nt=ft(Object.getPrototypeOf,Object);Se.exports=nt},89607:function(Se,R,et){var ft=et(62705),nt=Object.prototype,V=nt.hasOwnProperty,z=nt.toString,H=ft?ft.toStringTag:void 0;function F(M){var A=V.call(M,H),y=M[H];try{M[H]=void 0;var x=!0}catch(_){}var p=z.call(M);return x&&(A?M[H]=y:delete M[H]),p}Se.exports=F},31167:function(Se,R,et){Se=et.nmd(Se);var ft=et(31957),nt=R&&!R.nodeType&&R,V=nt&&!0&&Se&&!Se.nodeType&&Se,z=V&&V.exports===nt,H=z&&ft.process,F=function(){try{var M=V&&V.require&&V.require("util").types;return M||H&&H.binding&&H.binding("util")}catch(A){}}();Se.exports=F},2333:function(Se){var R=Object.prototype,et=R.toString;function ft(nt){return et.call(nt)}Se.exports=ft},5569:function(Se){function R(et,ft){return function(nt){return et(ft(nt))}}Se.exports=R},55639:function(Se,R,et){var ft=et(31957),nt=typeof self=="object"&&self&&self.Object===Object&&self,V=ft||nt||Function("return this")();Se.exports=V},1469:function(Se){var R=Array.isArray;Se.exports=R},41780:function(Se){var R=9007199254740991;function et(ft){return typeof ft=="number"&&ft>-1&&ft%1==0&&ft<=R}Se.exports=et},81763:function(Se,R,et){var ft=et(44239),nt=et(37005),V="[object Number]";function z(H){return typeof H=="number"||nt(H)&&ft(H)==V}Se.exports=z},37005:function(Se){function R(et){return et!=null&&typeof et=="object"}Se.exports=R},68630:function(Se,R,et){var ft=et(44239),nt=et(85924),V=et(37005),z="[object Object]",H=Function.prototype,F=Object.prototype,M=H.toString,A=F.hasOwnProperty,y=M.call(Object);function x(p){if(!V(p)||ft(p)!=z)return!1;var _=nt(p);if(_===null)return!0;var E=A.call(_,"constructor")&&_.constructor;return typeof E=="function"&&E instanceof E&&M.call(E)==y}Se.exports=x},36719:function(Se,R,et){var ft=et(38749),nt=et(51717),V=et(31167),z=V&&V.isTypedArray,H=z?nt(z):ft;Se.exports=H},34155:function(Se){var R=Se.exports={},et,ft;function nt(){throw new Error("setTimeout has not been defined")}function V(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?et=setTimeout:et=nt}catch(b){et=nt}try{typeof clearTimeout=="function"?ft=clearTimeout:ft=V}catch(b){ft=V}})();function z(b){if(et===setTimeout)return setTimeout(b,0);if((et===nt||!et)&&setTimeout)return et=setTimeout,setTimeout(b,0);try{return et(b,0)}catch(k){try{return et.call(null,b,0)}catch(N){return et.call(this,b,0)}}}function H(b){if(ft===clearTimeout)return clearTimeout(b);if((ft===V||!ft)&&clearTimeout)return ft=clearTimeout,clearTimeout(b);try{return ft(b)}catch(k){try{return ft.call(null,b)}catch(N){return ft.call(this,b)}}}var F=[],M=!1,A,y=-1;function x(){!M||!A||(M=!1,A.length?F=A.concat(F):y=-1,F.length&&p())}function p(){if(!M){var b=z(x);M=!0;for(var k=F.length;k;){for(A=F,F=[];++y<k;)A&&A[y].run();y=-1,k=F.length}A=null,M=!1,H(b)}}R.nextTick=function(b){var k=new Array(arguments.length-1);if(arguments.length>1)for(var N=1;N<arguments.length;N++)k[N-1]=arguments[N];F.push(new _(b,k)),F.length===1&&!M&&z(p)};function _(b,k){this.fun=b,this.array=k}_.prototype.run=function(){this.fun.apply(null,this.array)},R.title="browser",R.browser=!0,R.env={},R.argv=[],R.version="",R.versions={};function E(){}R.on=E,R.addListener=E,R.once=E,R.off=E,R.removeListener=E,R.removeAllListeners=E,R.emit=E,R.prependListener=E,R.prependOnceListener=E,R.listeners=function(b){return[]},R.binding=function(b){throw new Error("process.binding is not supported")},R.cwd=function(){return"/"},R.chdir=function(b){throw new Error("process.chdir is not supported")},R.umask=function(){return 0}},75251:function(Se,R,et){"use strict";var ft=et(67294),nt=Symbol.for("react.element"),V=Symbol.for("react.fragment"),z=Object.prototype.hasOwnProperty,H=ft.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,F={key:!0,ref:!0,__self:!0,__source:!0};function M(A,y,x){var p,_={},E=null,b=null;x!==void 0&&(E=""+x),y.key!==void 0&&(E=""+y.key),y.ref!==void 0&&(b=y.ref);for(p in y)z.call(y,p)&&!F.hasOwnProperty(p)&&(_[p]=y[p]);if(A&&A.defaultProps)for(p in y=A.defaultProps,y)_[p]===void 0&&(_[p]=y[p]);return{$$typeof:nt,type:A,key:E,ref:b,props:_,_owner:H.current}}R.Fragment=V,R.jsx=M,R.jsxs=M},85893:function(Se,R,et){"use strict";Se.exports=et(75251)},81550:function(Se){(function(R,et){Se.exports=et()})(this,function(){"use strict";var R=function(mt){return mt instanceof Uint8Array||mt instanceof Uint16Array||mt instanceof Uint32Array||mt instanceof Int8Array||mt instanceof Int16Array||mt instanceof Int32Array||mt instanceof Float32Array||mt instanceof Float64Array||mt instanceof Uint8ClampedArray},et=function(mt,Kt){for(var Me=Object.keys(Kt),gr=0;gr<Me.length;++gr)mt[Me[gr]]=Kt[Me[gr]];return mt},ft=`
`;function nt(mt){return typeof atob!="undefined"?atob(mt):"base64:"+mt}function V(mt){var Kt=new Error("(regl) "+mt);throw console.error(Kt),Kt}function z(mt,Kt){mt||V(Kt)}function H(mt){return mt?": "+mt:""}function F(mt,Kt,Me){mt in Kt||V("unknown parameter ("+mt+")"+H(Me)+". possible values: "+Object.keys(Kt).join())}function M(mt,Kt){R(mt)||V("invalid parameter type"+H(Kt)+". must be a typed array")}function A(mt,Kt){switch(Kt){case"number":return typeof mt=="number";case"object":return typeof mt=="object";case"string":return typeof mt=="string";case"boolean":return typeof mt=="boolean";case"function":return typeof mt=="function";case"undefined":return typeof mt=="undefined";case"symbol":return typeof mt=="symbol"}}function y(mt,Kt,Me){A(mt,Kt)||V("invalid parameter type"+H(Me)+". expected "+Kt+", got "+typeof mt)}function x(mt,Kt){mt>=0&&(mt|0)===mt||V("invalid parameter type, ("+mt+")"+H(Kt)+". must be a nonnegative integer")}function p(mt,Kt,Me){Kt.indexOf(mt)<0&&V("invalid value"+H(Me)+". must be one of: "+Kt)}var _=["gl","canvas","container","attributes","pixelRatio","extensions","optionalExtensions","profile","onDone"];function E(mt){Object.keys(mt).forEach(function(Kt){_.indexOf(Kt)<0&&V('invalid regl constructor argument "'+Kt+'". must be one of '+_)})}function b(mt,Kt){for(mt=mt+"";mt.length<Kt;)mt=" "+mt;return mt}function k(){this.name="unknown",this.lines=[],this.index={},this.hasErrors=!1}function N(mt,Kt){this.number=mt,this.line=Kt,this.errors=[]}function g(mt,Kt,Me){this.file=mt,this.line=Kt,this.message=Me}function v(){var mt=new Error,Kt=(mt.stack||mt).toString(),Me=/compileProcedure.*\n\s*at.*\((.*)\)/.exec(Kt);if(Me)return Me[1];var gr=/compileProcedure.*\n\s*at\s+(.*)(\n|$)/.exec(Kt);return gr?gr[1]:"unknown"}function K(){var mt=new Error,Kt=(mt.stack||mt).toString(),Me=/at REGLCommand.*\n\s+at.*\((.*)\)/.exec(Kt);if(Me)return Me[1];var gr=/at REGLCommand.*\n\s+at\s+(.*)\n/.exec(Kt);return gr?gr[1]:"unknown"}function B(mt,Kt){var Me=mt.split(`
`),gr=1,Or=0,yr={unknown:new k,0:new k};yr.unknown.name=yr[0].name=Kt||v(),yr.unknown.lines.push(new N(0,""));for(var mr=0;mr<Me.length;++mr){var $r=Me[mr],Qr=/^\s*#\s*(\w+)\s+(.+)\s*$/.exec($r);if(Qr)switch(Qr[1]){case"line":var nn=/(\d+)(\s+\d+)?/.exec(Qr[2]);nn&&(gr=nn[1]|0,nn[2]&&(Or=nn[2]|0,Or in yr||(yr[Or]=new k)));break;case"define":var Wr=/SHADER_NAME(_B64)?\s+(.*)$/.exec(Qr[2]);Wr&&(yr[Or].name=Wr[1]?nt(Wr[2]):Wr[2]);break}yr[Or].lines.push(new N(gr++,$r))}return Object.keys(yr).forEach(function(fn){var d=yr[fn];d.lines.forEach(function(S){d.index[S.number]=S})}),yr}function G(mt){var Kt=[];return mt.split(`
`).forEach(function(Me){if(!(Me.length<5)){var gr=/^ERROR:\s+(\d+):(\d+):\s*(.*)$/.exec(Me);gr?Kt.push(new g(gr[1]|0,gr[2]|0,gr[3].trim())):Me.length>0&&Kt.push(new g("unknown",0,Me))}}),Kt}function Y(mt,Kt){Kt.forEach(function(Me){var gr=mt[Me.file];if(gr){var Or=gr.index[Me.line];if(Or){Or.errors.push(Me),gr.hasErrors=!0;return}}mt.unknown.hasErrors=!0,mt.unknown.lines[0].errors.push(Me)})}function j(mt,Kt,Me,gr,Or){if(!mt.getShaderParameter(Kt,mt.COMPILE_STATUS)){var yr=mt.getShaderInfoLog(Kt),mr=gr===mt.FRAGMENT_SHADER?"fragment":"vertex";At(Me,"string",mr+" shader source must be a string",Or);var $r=B(Me,Or),Qr=G(yr);Y($r,Qr),Object.keys($r).forEach(function(nn){var Wr=$r[nn];if(!Wr.hasErrors)return;var fn=[""],d=[""];function S(O,X){fn.push(O),d.push(X||"")}S("file number "+nn+": "+Wr.name+`
`,"color:red;text-decoration:underline;font-weight:bold"),Wr.lines.forEach(function(O){if(O.errors.length>0){S(b(O.number,4)+"|  ","background-color:yellow; font-weight:bold"),S(O.line+ft,"color:red; background-color:yellow; font-weight:bold");var X=0;O.errors.forEach(function(at){var st=at.message,pt=/^\s*'(.*)'\s*:\s*(.*)$/.exec(st);if(pt){var xt=pt[1];switch(st=pt[2],xt){case"assign":xt="=";break}X=Math.max(O.line.indexOf(xt,X),0)}else X=0;S(b("| ",6)),S(b("^^^",X+3)+ft,"font-weight:bold"),S(b("| ",6)),S(st+ft,"font-weight:bold")}),S(b("| ",6)+ft)}else S(b(O.number,4)+"|  "),S(O.line+ft,"color:red")}),typeof document!="undefined"&&!window.chrome?(d[0]=fn.join("%c"),console.log.apply(console,d)):console.log(fn.join(""))}),z.raise("Error compiling "+mr+" shader, "+$r[0].name)}}function Q(mt,Kt,Me,gr,Or){if(!mt.getProgramParameter(Kt,mt.LINK_STATUS)){var yr=mt.getProgramInfoLog(Kt),mr=B(Me,Or),$r=B(gr,Or),Qr='Error linking program with vertex shader, "'+$r[0].name+'", and fragment shader "'+mr[0].name+'"';typeof document!="undefined"?console.log("%c"+Qr+ft+"%c"+yr,"color:red;text-decoration:underline;font-weight:bold","color:red"):console.log(Qr+ft+yr),z.raise(Qr)}}function Z(mt){mt._commandRef=v()}function rt(mt,Kt,Me,gr){Z(mt);function Or(Qr){return Qr?gr.id(Qr):0}mt._fragId=Or(mt.static.frag),mt._vertId=Or(mt.static.vert);function yr(Qr,nn){Object.keys(nn).forEach(function(Wr){Qr[gr.id(Wr)]=!0})}var mr=mt._uniformSet={};yr(mr,Kt.static),yr(mr,Kt.dynamic);var $r=mt._attributeSet={};yr($r,Me.static),yr($r,Me.dynamic),mt._hasCount="count"in mt.static||"count"in mt.dynamic||"elements"in mt.static||"elements"in mt.dynamic}function ut(mt,Kt){var Me=K();V(mt+" in command "+(Kt||v())+(Me==="unknown"?"":" called from "+Me))}function ht(mt,Kt,Me){mt||ut(Kt,Me||v())}function kt(mt,Kt,Me,gr){mt in Kt||ut("unknown parameter ("+mt+")"+H(Me)+". possible values: "+Object.keys(Kt).join(),gr||v())}function At(mt,Kt,Me,gr){A(mt,Kt)||ut("invalid parameter type"+H(Me)+". expected "+Kt+", got "+typeof mt,gr||v())}function Ht(mt){mt()}function Rt(mt,Kt,Me){mt.texture?p(mt.texture._texture.internalformat,Kt,"unsupported texture format for attachment"):p(mt.renderbuffer._renderbuffer.format,Me,"unsupported renderbuffer format for attachment")}var le=33071,dt=9728,ot=9984,yt=9985,Lt=9986,Ot=9987,Wt=5120,Jt=5121,De=5122,te=5123,oe=5124,me=5125,Ce=5126,_e=32819,zt=32820,ue=33635,Pe=34042,Xt=36193,ie={};ie[Wt]=ie[Jt]=1,ie[De]=ie[te]=ie[Xt]=ie[ue]=ie[_e]=ie[zt]=2,ie[oe]=ie[me]=ie[Ce]=ie[Pe]=4;function Ie(mt,Kt){return mt===zt||mt===_e||mt===ue?2:mt===Pe?4:ie[mt]*Kt}function se(mt){return!(mt&mt-1)&&!!mt}function Te(mt,Kt,Me){var gr,Or=Kt.width,yr=Kt.height,mr=Kt.channels;z(Or>0&&Or<=Me.maxTextureSize&&yr>0&&yr<=Me.maxTextureSize,"invalid texture shape"),(mt.wrapS!==le||mt.wrapT!==le)&&z(se(Or)&&se(yr),"incompatible wrap mode for texture, both width and height must be power of 2"),Kt.mipmask===1?Or!==1&&yr!==1&&z(mt.minFilter!==ot&&mt.minFilter!==Lt&&mt.minFilter!==yt&&mt.minFilter!==Ot,"min filter requires mipmap"):(z(se(Or)&&se(yr),"texture must be a square power of 2 to support mipmapping"),z(Kt.mipmask===(Or<<1)-1,"missing or incomplete mipmap data")),Kt.type===Ce&&(Me.extensions.indexOf("oes_texture_float_linear")<0&&z(mt.minFilter===dt&&mt.magFilter===dt,"filter not supported, must enable oes_texture_float_linear"),z(!mt.genMipmaps,"mipmap generation not supported with float textures"));var $r=Kt.images;for(gr=0;gr<16;++gr)if($r[gr]){var Qr=Or>>gr,nn=yr>>gr;z(Kt.mipmask&1<<gr,"missing mipmap data");var Wr=$r[gr];if(z(Wr.width===Qr&&Wr.height===nn,"invalid shape for mip images"),z(Wr.format===Kt.format&&Wr.internalformat===Kt.internalformat&&Wr.type===Kt.type,"incompatible type for mip image"),!Wr.compressed)if(Wr.data){var fn=Math.ceil(Ie(Wr.type,mr)*Qr/Wr.unpackAlignment)*Wr.unpackAlignment;z(Wr.data.byteLength===fn*nn,"invalid data for image, buffer size is inconsistent with image format")}else Wr.element||Wr.copy}else mt.genMipmaps||z((Kt.mipmask&1<<gr)===0,"extra mipmap data");Kt.compressed&&z(!mt.genMipmaps,"mipmap generation for compressed images not supported")}function Be(mt,Kt,Me,gr){var Or=mt.width,yr=mt.height,mr=mt.channels;z(Or>0&&Or<=gr.maxTextureSize&&yr>0&&yr<=gr.maxTextureSize,"invalid texture shape"),z(Or===yr,"cube map must be square"),z(Kt.wrapS===le&&Kt.wrapT===le,"wrap mode not supported by cube map");for(var $r=0;$r<Me.length;++$r){var Qr=Me[$r];z(Qr.width===Or&&Qr.height===yr,"inconsistent cube map face shape"),Kt.genMipmaps&&(z(!Qr.compressed,"can not generate mipmap for compressed textures"),z(Qr.mipmask===1,"can not specify mipmaps and generate mipmaps"));for(var nn=Qr.images,Wr=0;Wr<16;++Wr){var fn=nn[Wr];if(fn){var d=Or>>Wr,S=yr>>Wr;z(Qr.mipmask&1<<Wr,"missing mipmap data"),z(fn.width===d&&fn.height===S,"invalid shape for mip images"),z(fn.format===mt.format&&fn.internalformat===mt.internalformat&&fn.type===mt.type,"incompatible type for mip image"),fn.compressed||(fn.data?z(fn.data.byteLength===d*S*Math.max(Ie(fn.type,mr),fn.unpackAlignment),"invalid data for image, buffer size is inconsistent with image format"):fn.element||fn.copy)}}}}var Tt=et(z,{optional:Ht,raise:V,commandRaise:ut,command:ht,parameter:F,commandParameter:kt,constructor:E,type:y,commandType:At,isTypedArray:M,nni:x,oneOf:p,shaderError:j,linkError:Q,callSite:K,saveCommandRef:Z,saveDrawInfo:rt,framebufferFormat:Rt,guessCommand:v,texture2D:Te,textureCube:Be}),nr=0,Ir=0,Zr=5,Ur=6;function wn(mt,Kt){this.id=nr++,this.type=mt,this.data=Kt}function Xr(mt){return mt.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}function Sn(mt){if(mt.length===0)return[];var Kt=mt.charAt(0),Me=mt.charAt(mt.length-1);if(mt.length>1&&Kt===Me&&(Kt==='"'||Kt==="'"))return['"'+Xr(mt.substr(1,mt.length-2))+'"'];var gr=/\[(false|true|null|\d+|'[^']*'|"[^"]*")\]/.exec(mt);if(gr)return Sn(mt.substr(0,gr.index)).concat(Sn(gr[1])).concat(Sn(mt.substr(gr.index+gr[0].length)));var Or=mt.split(".");if(Or.length===1)return['"'+Xr(mt)+'"'];for(var yr=[],mr=0;mr<Or.length;++mr)yr=yr.concat(Sn(Or[mr]));return yr}function Kn(mt){return"["+Sn(mt).join("][")+"]"}function Fn(mt,Kt){return new wn(mt,Kn(Kt+""))}function pn(mt){return typeof mt=="function"&&!mt._reglType||mt instanceof wn}function er(mt,Kt){if(typeof mt=="function")return new wn(Ir,mt);if(typeof mt=="number"||typeof mt=="boolean")return new wn(Zr,mt);if(Array.isArray(mt))return new wn(Ur,mt.map((Me,gr)=>er(Me,Kt+"["+gr+"]")));if(mt instanceof wn)return mt;Tt(!1,"invalid option type in uniform "+Kt)}var cr={DynamicVariable:wn,define:Fn,isDynamic:pn,unbox:er,accessor:Kn},dr={next:typeof requestAnimationFrame=="function"?function(mt){return requestAnimationFrame(mt)}:function(mt){return setTimeout(mt,16)},cancel:typeof cancelAnimationFrame=="function"?function(mt){return cancelAnimationFrame(mt)}:clearTimeout},Gr=typeof performance!="undefined"&&performance.now?function(){return performance.now()}:function(){return+new Date};function sn(){var mt={"":0},Kt=[""];return{id:function(Me){var gr=mt[Me];return gr||(gr=mt[Me]=Kt.length,Kt.push(Me),gr)},str:function(Me){return Kt[Me]}}}function yn(mt,Kt,Me){var gr=document.createElement("canvas");et(gr.style,{border:0,margin:0,padding:0,top:0,left:0}),mt.appendChild(gr),mt===document.body&&(gr.style.position="absolute",et(mt.style,{margin:0,padding:0}));function Or(){var $r=window.innerWidth,Qr=window.innerHeight;if(mt!==document.body){var nn=mt.getBoundingClientRect();$r=nn.right-nn.left,Qr=nn.bottom-nn.top}gr.width=Me*$r,gr.height=Me*Qr,et(gr.style,{width:$r+"px",height:Qr+"px"})}var yr;mt!==document.body&&typeof ResizeObserver=="function"?(yr=new ResizeObserver(function(){setTimeout(Or)}),yr.observe(mt)):window.addEventListener("resize",Or,!1);function mr(){yr?yr.disconnect():window.removeEventListener("resize",Or),mt.removeChild(gr)}return Or(),{canvas:gr,onDestroy:mr}}function ln(mt,Kt){function Me(gr){try{return mt.getContext(gr,Kt)}catch(Or){return null}}return Me("webgl")||Me("experimental-webgl")||Me("webgl-experimental")}function Vn(mt){return typeof mt.nodeName=="string"&&typeof mt.appendChild=="function"&&typeof mt.getBoundingClientRect=="function"}function ca(mt){return typeof mt.drawArrays=="function"||typeof mt.drawElements=="function"}function oa(mt){return typeof mt=="string"?mt.split():(Tt(Array.isArray(mt),"invalid extension array"),mt)}function bn(mt){return typeof mt=="string"?(Tt(typeof document!="undefined","not supported outside of DOM"),document.querySelector(mt)):mt}function qn(mt){var Kt=mt||{},Me,gr,Or,yr,mr={},$r=[],Qr=[],nn=typeof window=="undefined"?1:window.devicePixelRatio,Wr=!1,fn=function(O){O&&Tt.raise(O)},d=function(){};if(typeof Kt=="string"?(Tt(typeof document!="undefined","selector queries only supported in DOM enviroments"),Me=document.querySelector(Kt),Tt(Me,"invalid query string for element")):typeof Kt=="object"?Vn(Kt)?Me=Kt:ca(Kt)?(yr=Kt,Or=yr.canvas):(Tt.constructor(Kt),"gl"in Kt?yr=Kt.gl:"canvas"in Kt?Or=bn(Kt.canvas):"container"in Kt&&(gr=bn(Kt.container)),"attributes"in Kt&&(mr=Kt.attributes,Tt.type(mr,"object","invalid context attributes")),"extensions"in Kt&&($r=oa(Kt.extensions)),"optionalExtensions"in Kt&&(Qr=oa(Kt.optionalExtensions)),"onDone"in Kt&&(Tt.type(Kt.onDone,"function","invalid or missing onDone callback"),fn=Kt.onDone),"profile"in Kt&&(Wr=!!Kt.profile),"pixelRatio"in Kt&&(nn=+Kt.pixelRatio,Tt(nn>0,"invalid pixel ratio"))):Tt.raise("invalid arguments to regl"),Me&&(Me.nodeName.toLowerCase()==="canvas"?Or=Me:gr=Me),!yr){if(!Or){Tt(typeof document!="undefined","must manually specify webgl context outside of DOM environments");var S=yn(gr||document.body,fn,nn);if(!S)return null;Or=S.canvas,d=S.onDestroy}mr.premultipliedAlpha===void 0&&(mr.premultipliedAlpha=!0),yr=ln(Or,mr)}return yr?{gl:yr,canvas:Or,container:gr,extensions:$r,optionalExtensions:Qr,pixelRatio:nn,profile:Wr,onDone:fn,onDestroy:d}:(d(),fn("webgl not supported, try upgrading your browser or graphics drivers http://get.webgl.org"),null)}function Gn(mt,Kt){var Me={};function gr(mr){Tt.type(mr,"string","extension name must be string");var $r=mr.toLowerCase(),Qr;try{Qr=Me[$r]=mt.getExtension($r)}catch(nn){}return!!Qr}for(var Or=0;Or<Kt.extensions.length;++Or){var yr=Kt.extensions[Or];if(!gr(yr))return Kt.onDestroy(),Kt.onDone('"'+yr+'" extension is not supported by the current WebGL context, try upgrading your system or a different browser'),null}return Kt.optionalExtensions.forEach(gr),{extensions:Me,restore:function(){Object.keys(Me).forEach(function(mr){if(Me[mr]&&!gr(mr))throw new Error("(regl): error restoring extension "+mr)})}}}function zn(mt,Kt){for(var Me=Array(mt),gr=0;gr<mt;++gr)Me[gr]=Kt(gr);return Me}var ya=5120,W=5121,qe=5122,be=5123,or=5124,ar=5125,Br=5126;function Pr(mt){for(var Kt=16;Kt<=1<<28;Kt*=16)if(mt<=Kt)return Kt;return 0}function cn(mt){var Kt,Me;return Kt=(mt>65535)<<4,mt>>>=Kt,Me=(mt>255)<<3,mt>>>=Me,Kt|=Me,Me=(mt>15)<<2,mt>>>=Me,Kt|=Me,Me=(mt>3)<<1,mt>>>=Me,Kt|=Me,Kt|mt>>1}function xn(){var mt=zn(8,function(){return[]});function Kt(yr){var mr=Pr(yr),$r=mt[cn(mr)>>2];return $r.length>0?$r.pop():new ArrayBuffer(mr)}function Me(yr){mt[cn(yr.byteLength)>>2].push(yr)}function gr(yr,mr){var $r=null;switch(yr){case ya:$r=new Int8Array(Kt(mr),0,mr);break;case W:$r=new Uint8Array(Kt(mr),0,mr);break;case qe:$r=new Int16Array(Kt(2*mr),0,mr);break;case be:$r=new Uint16Array(Kt(2*mr),0,mr);break;case or:$r=new Int32Array(Kt(4*mr),0,mr);break;case ar:$r=new Uint32Array(Kt(4*mr),0,mr);break;case Br:$r=new Float32Array(Kt(4*mr),0,mr);break;default:return null}return $r.length!==mr?$r.subarray(0,mr):$r}function Or(yr){Me(yr.buffer)}return{alloc:Kt,free:Me,allocType:gr,freeType:Or}}var tn=xn();tn.zero=xn();var vt=3408,bt=3410,P=3411,I=3412,T=3413,q=3414,Et=3415,Gt=33901,Dt=33902,ee=3379,Ye=3386,Ae=34921,fr=36347,Hr=36348,wr=35661,hn=35660,Yn=34930,Ze=36349,xr=34076,Dr=34024,Yr=7936,$t=7937,It=7938,ne=35724,xe=34047,pe=36063,ke=34852,sr=3553,lr=34067,en=34069,Dn=33984,En=6408,ta=5126,Qn=5121,ba=36160,Ha=36053,Za=36064,Ba=16384,To=function(mt,Kt){var Me=1;Kt.ext_texture_filter_anisotropic&&(Me=mt.getParameter(xe));var gr=1,Or=1;Kt.webgl_draw_buffers&&(gr=mt.getParameter(ke),Or=mt.getParameter(pe));var yr=!!Kt.oes_texture_float;if(yr){var mr=mt.createTexture();mt.bindTexture(sr,mr),mt.texImage2D(sr,0,En,1,1,0,En,ta,null);var $r=mt.createFramebuffer();if(mt.bindFramebuffer(ba,$r),mt.framebufferTexture2D(ba,Za,sr,mr,0),mt.bindTexture(sr,null),mt.checkFramebufferStatus(ba)!==Ha)yr=!1;else{mt.viewport(0,0,1,1),mt.clearColor(1,0,0,1),mt.clear(Ba);var Qr=tn.allocType(ta,4);mt.readPixels(0,0,1,1,En,ta,Qr),mt.getError()?yr=!1:(mt.deleteFramebuffer($r),mt.deleteTexture(mr),yr=Qr[0]===1),tn.freeType(Qr)}}var nn=typeof navigator!="undefined"&&(/MSIE/.test(navigator.userAgent)||/Trident\//.test(navigator.appVersion)||/Edge/.test(navigator.userAgent)),Wr=!0;if(!nn){var fn=mt.createTexture(),d=tn.allocType(Qn,36);mt.activeTexture(Dn),mt.bindTexture(lr,fn),mt.texImage2D(en,0,En,3,3,0,En,Qn,d),tn.freeType(d),mt.bindTexture(lr,null),mt.deleteTexture(fn),Wr=!mt.getError()}return{colorBits:[mt.getParameter(bt),mt.getParameter(P),mt.getParameter(I),mt.getParameter(T)],depthBits:mt.getParameter(q),stencilBits:mt.getParameter(Et),subpixelBits:mt.getParameter(vt),extensions:Object.keys(Kt).filter(function(S){return!!Kt[S]}),maxAnisotropic:Me,maxDrawbuffers:gr,maxColorAttachments:Or,pointSizeDims:mt.getParameter(Gt),lineWidthDims:mt.getParameter(Dt),maxViewportDims:mt.getParameter(Ye),maxCombinedTextureUnits:mt.getParameter(wr),maxCubeMapSize:mt.getParameter(xr),maxRenderbufferSize:mt.getParameter(Dr),maxTextureUnits:mt.getParameter(Yn),maxTextureSize:mt.getParameter(ee),maxAttributes:mt.getParameter(Ae),maxVertexUniforms:mt.getParameter(fr),maxVertexTextureUnits:mt.getParameter(hn),maxVaryingVectors:mt.getParameter(Hr),maxFragmentUniforms:mt.getParameter(Ze),glsl:mt.getParameter(ne),renderer:mt.getParameter($t),vendor:mt.getParameter(Yr),version:mt.getParameter(It),readFloat:yr,npotTextureCube:Wr}};function _i(mt){return!!mt&&typeof mt=="object"&&Array.isArray(mt.shape)&&Array.isArray(mt.stride)&&typeof mt.offset=="number"&&mt.shape.length===mt.stride.length&&(Array.isArray(mt.data)||R(mt.data))}var Si=function(mt){return Object.keys(mt).map(function(Kt){return mt[Kt]})},io={shape:cs,flatten:ko};function fs(mt,Kt,Me){for(var gr=0;gr<Kt;++gr)Me[gr]=mt[gr]}function Io(mt,Kt,Me,gr){for(var Or=0,yr=0;yr<Kt;++yr)for(var mr=mt[yr],$r=0;$r<Me;++$r)gr[Or++]=mr[$r]}function oo(mt,Kt,Me,gr,Or,yr){for(var mr=yr,$r=0;$r<Kt;++$r)for(var Qr=mt[$r],nn=0;nn<Me;++nn)for(var Wr=Qr[nn],fn=0;fn<gr;++fn)Or[mr++]=Wr[fn]}function Ca(mt,Kt,Me,gr,Or){for(var yr=1,mr=Me+1;mr<Kt.length;++mr)yr*=Kt[mr];var $r=Kt[Me];if(Kt.length-Me===4){var Qr=Kt[Me+1],nn=Kt[Me+2],Wr=Kt[Me+3];for(mr=0;mr<$r;++mr)oo(mt[mr],Qr,nn,Wr,gr,Or),Or+=yr}else for(mr=0;mr<$r;++mr)Ca(mt[mr],Kt,Me+1,gr,Or),Or+=yr}function ko(mt,Kt,Me,gr){var Or=1;if(Kt.length)for(var yr=0;yr<Kt.length;++yr)Or*=Kt[yr];else Or=0;var mr=gr||tn.allocType(Me,Or);switch(Kt.length){case 0:break;case 1:fs(mt,Kt[0],mr);break;case 2:Io(mt,Kt[0],Kt[1],mr);break;case 3:oo(mt,Kt[0],Kt[1],Kt[2],mr,0);break;default:Ca(mt,Kt,0,mr,0)}return mr}function cs(mt){for(var Kt=[],Me=mt;Me.length;Me=Me[0])Kt.push(Me.length);return Kt}var ri={"[object Int8Array]":5120,"[object Int16Array]":5122,"[object Int32Array]":5124,"[object Uint8Array]":5121,"[object Uint8ClampedArray]":5121,"[object Uint16Array]":5123,"[object Uint32Array]":5125,"[object Float32Array]":5126,"[object Float64Array]":5121,"[object ArrayBuffer]":5121},Vi=5120,ls=5122,Xo=5124,Hi=5121,so=5123,Ws=5125,Yo=5126,Mi=5126,uo={int8:Vi,int16:ls,int32:Xo,uint8:Hi,uint16:so,uint32:Ws,float:Yo,float32:Mi},hs=35048,Un=35040,Eo={dynamic:hs,stream:Un,static:35044},Po=io.flatten,Ss=io.shape,Wo=35044,Ds=35040,$n=5121,ji=5126,Zi=[];Zi[5120]=1,Zi[5122]=2,Zi[5124]=4,Zi[5121]=1,Zi[5123]=2,Zi[5125]=4,Zi[5126]=4;function bi(mt){return ri[Object.prototype.toString.call(mt)]|0}function Vo(mt,Kt){for(var Me=0;Me<Kt.length;++Me)mt[Me]=Kt[Me]}function Ho(mt,Kt,Me,gr,Or,yr,mr){for(var $r=0,Qr=0;Qr<Me;++Qr)for(var nn=0;nn<gr;++nn)mt[$r++]=Kt[Or*Qr+yr*nn+mr]}function fo(mt,Kt,Me,gr){var Or=0,yr={};function mr(X){this.id=Or++,this.buffer=mt.createBuffer(),this.type=X,this.usage=Wo,this.byteLength=0,this.dimension=1,this.dtype=$n,this.persistentData=null,Me.profile&&(this.stats={size:0})}mr.prototype.bind=function(){mt.bindBuffer(this.type,this.buffer)},mr.prototype.destroy=function(){d(this)};var $r=[];function Qr(X,at){var st=$r.pop();return st||(st=new mr(X)),st.bind(),fn(st,at,Ds,0,1,!1),st}function nn(X){$r.push(X)}function Wr(X,at,st){X.byteLength=at.byteLength,mt.bufferData(X.type,at,st)}function fn(X,at,st,pt,xt,Mt){var Ft;if(X.usage=st,Array.isArray(at)){if(X.dtype=pt||ji,at.length>0){var re;if(Array.isArray(at[0])){Ft=Ss(at);for(var qt=1,Ee=1;Ee<Ft.length;++Ee)qt*=Ft[Ee];X.dimension=qt,re=Po(at,Ft,X.dtype),Wr(X,re,st),Mt?X.persistentData=re:tn.freeType(re)}else if(typeof at[0]=="number"){X.dimension=xt;var Ve=tn.allocType(X.dtype,at.length);Vo(Ve,at),Wr(X,Ve,st),Mt?X.persistentData=Ve:tn.freeType(Ve)}else R(at[0])?(X.dimension=at[0].length,X.dtype=pt||bi(at[0])||ji,re=Po(at,[at.length,at[0].length],X.dtype),Wr(X,re,st),Mt?X.persistentData=re:tn.freeType(re)):Tt.raise("invalid buffer data")}}else if(R(at))X.dtype=pt||bi(at),X.dimension=xt,Wr(X,at,st),Mt&&(X.persistentData=new Uint8Array(new Uint8Array(at.buffer)));else if(_i(at)){Ft=at.shape;var Mr=at.stride,Qe=at.offset,rr=0,tr=0,Jr=0,mn=0;Ft.length===1?(rr=Ft[0],tr=1,Jr=Mr[0],mn=0):Ft.length===2?(rr=Ft[0],tr=Ft[1],Jr=Mr[0],mn=Mr[1]):Tt.raise("invalid shape"),X.dtype=pt||bi(at.data)||ji,X.dimension=tr;var un=tn.allocType(X.dtype,rr*tr);Ho(un,at.data,rr,tr,Jr,mn,Qe),Wr(X,un,st),Mt?X.persistentData=un:tn.freeType(un)}else at instanceof ArrayBuffer?(X.dtype=$n,X.dimension=xt,Wr(X,at,st),Mt&&(X.persistentData=new Uint8Array(new Uint8Array(at)))):Tt.raise("invalid buffer data")}function d(X){Kt.bufferCount--,gr(X);var at=X.buffer;Tt(at,"buffer must not be deleted already"),mt.deleteBuffer(at),X.buffer=null,delete yr[X.id]}function S(X,at,st,pt){Kt.bufferCount++;var xt=new mr(at);yr[xt.id]=xt;function Mt(qt){var Ee=Wo,Ve=null,Mr=0,Qe=0,rr=1;return Array.isArray(qt)||R(qt)||_i(qt)||qt instanceof ArrayBuffer?Ve=qt:typeof qt=="number"?Mr=qt|0:qt&&(Tt.type(qt,"object","buffer arguments must be an object, a number or an array"),"data"in qt&&(Tt(Ve===null||Array.isArray(Ve)||R(Ve)||_i(Ve),"invalid data for buffer"),Ve=qt.data),"usage"in qt&&(Tt.parameter(qt.usage,Eo,"invalid buffer usage"),Ee=Eo[qt.usage]),"type"in qt&&(Tt.parameter(qt.type,uo,"invalid buffer type"),Qe=uo[qt.type]),"dimension"in qt&&(Tt.type(qt.dimension,"number","invalid dimension"),rr=qt.dimension|0),"length"in qt&&(Tt.nni(Mr,"buffer length must be a nonnegative integer"),Mr=qt.length|0)),xt.bind(),Ve?fn(xt,Ve,Ee,Qe,rr,pt):(Mr&&mt.bufferData(xt.type,Mr,Ee),xt.dtype=Qe||$n,xt.usage=Ee,xt.dimension=rr,xt.byteLength=Mr),Me.profile&&(xt.stats.size=xt.byteLength*Zi[xt.dtype]),Mt}function Ft(qt,Ee){Tt(Ee+qt.byteLength<=xt.byteLength,"invalid buffer subdata call, buffer is too small.  Can't write data of size "+qt.byteLength+" starting from offset "+Ee+" to a buffer of size "+xt.byteLength),mt.bufferSubData(xt.type,Ee,qt)}function re(qt,Ee){var Ve=(Ee||0)|0,Mr;if(xt.bind(),R(qt)||qt instanceof ArrayBuffer)Ft(qt,Ve);else if(Array.isArray(qt)){if(qt.length>0)if(typeof qt[0]=="number"){var Qe=tn.allocType(xt.dtype,qt.length);Vo(Qe,qt),Ft(Qe,Ve),tn.freeType(Qe)}else if(Array.isArray(qt[0])||R(qt[0])){Mr=Ss(qt);var rr=Po(qt,Mr,xt.dtype);Ft(rr,Ve),tn.freeType(rr)}else Tt.raise("invalid buffer data")}else if(_i(qt)){Mr=qt.shape;var tr=qt.stride,Jr=0,mn=0,un=0,Xn=0;Mr.length===1?(Jr=Mr[0],mn=1,un=tr[0],Xn=0):Mr.length===2?(Jr=Mr[0],mn=Mr[1],un=tr[0],Xn=tr[1]):Tt.raise("invalid shape");var Rn=Array.isArray(qt.data)?xt.dtype:bi(qt.data),Jn=tn.allocType(Rn,Jr*mn);Ho(Jn,qt.data,Jr,mn,un,Xn,qt.offset),Ft(Jn,Ve),tn.freeType(Jn)}else Tt.raise("invalid data for buffer subdata");return Mt}return st||Mt(X),Mt._reglType="buffer",Mt._buffer=xt,Mt.subdata=re,Me.profile&&(Mt.stats=xt.stats),Mt.destroy=function(){d(xt)},Mt}function O(){Si(yr).forEach(function(X){X.buffer=mt.createBuffer(),mt.bindBuffer(X.type,X.buffer),mt.bufferData(X.type,X.persistentData||X.byteLength,X.usage)})}return Me.profile&&(Kt.getTotalBufferSize=function(){var X=0;return Object.keys(yr).forEach(function(at){X+=yr[at].stats.size}),X}),{create:S,createStream:Qr,destroyStream:nn,clear:function(){Si(yr).forEach(d),$r.forEach(d)},getBuffer:function(X){return X&&X._buffer instanceof mr?X._buffer:null},restore:O,_initBuffer:fn}}var ds=0,Ms=0,ns=1,Ia=1,Ps=4,_o=4,co={points:ds,point:Ms,lines:ns,line:Ia,triangles:Ps,triangle:_o,"line loop":2,"line strip":3,"triangle strip":5,"triangle fan":6},As=0,Ro=1,Gi=4,So=5120,qi=5121,Lo=5122,hi=5123,Cs=5124,Bo=5125,lo=34963,jo=35040,Mo=35044;function Zo(mt,Kt,Me,gr){var Or={},yr=0,mr={uint8:qi,uint16:hi};Kt.oes_element_index_uint&&(mr.uint32=Bo);function $r(O){this.id=yr++,Or[this.id]=this,this.buffer=O,this.primType=Gi,this.vertCount=0,this.type=0}$r.prototype.bind=function(){this.buffer.bind()};var Qr=[];function nn(O){var X=Qr.pop();return X||(X=new $r(Me.create(null,lo,!0,!1)._buffer)),fn(X,O,jo,-1,-1,0,0),X}function Wr(O){Qr.push(O)}function fn(O,X,at,st,pt,xt,Mt){O.buffer.bind();var Ft;if(X){var re=Mt;!Mt&&(!R(X)||_i(X)&&!R(X.data))&&(re=Kt.oes_element_index_uint?Bo:hi),Me._initBuffer(O.buffer,X,at,re,3)}else mt.bufferData(lo,xt,at),O.buffer.dtype=Ft||qi,O.buffer.usage=at,O.buffer.dimension=3,O.buffer.byteLength=xt;if(Ft=Mt,!Mt){switch(O.buffer.dtype){case qi:case So:Ft=qi;break;case hi:case Lo:Ft=hi;break;case Bo:case Cs:Ft=Bo;break;default:Tt.raise("unsupported type for element array")}O.buffer.dtype=Ft}O.type=Ft,Tt(Ft!==Bo||!!Kt.oes_element_index_uint,"32 bit element buffers not supported, enable oes_element_index_uint first");var qt=pt;qt<0&&(qt=O.buffer.byteLength,Ft===hi?qt>>=1:Ft===Bo&&(qt>>=2)),O.vertCount=qt;var Ee=st;if(st<0){Ee=Gi;var Ve=O.buffer.dimension;Ve===1&&(Ee=As),Ve===2&&(Ee=Ro),Ve===3&&(Ee=Gi)}O.primType=Ee}function d(O){gr.elementsCount--,Tt(O.buffer!==null,"must not double destroy elements"),delete Or[O.id],O.buffer.destroy(),O.buffer=null}function S(O,X){var at=Me.create(null,lo,!0),st=new $r(at._buffer);gr.elementsCount++;function pt(xt){if(!xt)at(),st.primType=Gi,st.vertCount=0,st.type=qi;else if(typeof xt=="number")at(xt),st.primType=Gi,st.vertCount=xt|0,st.type=qi;else{var Mt=null,Ft=Mo,re=-1,qt=-1,Ee=0,Ve=0;Array.isArray(xt)||R(xt)||_i(xt)?Mt=xt:(Tt.type(xt,"object","invalid arguments for elements"),"data"in xt&&(Mt=xt.data,Tt(Array.isArray(Mt)||R(Mt)||_i(Mt),"invalid data for element buffer")),"usage"in xt&&(Tt.parameter(xt.usage,Eo,"invalid element buffer usage"),Ft=Eo[xt.usage]),"primitive"in xt&&(Tt.parameter(xt.primitive,co,"invalid element buffer primitive"),re=co[xt.primitive]),"count"in xt&&(Tt(typeof xt.count=="number"&&xt.count>=0,"invalid vertex count for elements"),qt=xt.count|0),"type"in xt&&(Tt.parameter(xt.type,mr,"invalid buffer type"),Ve=mr[xt.type]),"length"in xt?Ee=xt.length|0:(Ee=qt,Ve===hi||Ve===Lo?Ee*=2:(Ve===Bo||Ve===Cs)&&(Ee*=4))),fn(st,Mt,Ft,re,qt,Ee,Ve)}return pt}return pt(O),pt._reglType="elements",pt._elements=st,pt.subdata=function(xt,Mt){return at.subdata(xt,Mt),pt},pt.destroy=function(){d(st)},pt}return{create:S,createStream:nn,destroyStream:Wr,getElements:function(O){return typeof O=="function"&&O._elements instanceof $r?O._elements:null},clear:function(){Si(Or).forEach(d)}}}var go=new Float32Array(1),Da=new Uint32Array(go.buffer),Ri=5123;function zi(mt){for(var Kt=tn.allocType(Ri,mt.length),Me=0;Me<mt.length;++Me)if(isNaN(mt[Me]))Kt[Me]=65535;else if(mt[Me]===1/0)Kt[Me]=31744;else if(mt[Me]===-1/0)Kt[Me]=64512;else{go[0]=mt[Me];var gr=Da[0],Or=gr>>>31<<15,yr=(gr<<1>>>24)-127,mr=gr>>13&1023;if(yr<-24)Kt[Me]=Or;else if(yr<-14){var $r=-14-yr;Kt[Me]=Or+(mr+1024>>$r)}else yr>15?Kt[Me]=Or+31744:Kt[Me]=Or+(yr+15<<10)+mr}return Kt}function Pa(mt){return Array.isArray(mt)||R(mt)}var Ii=function(mt){return!(mt&mt-1)&&!!mt},qo=34467,Bi=3553,Fo=34067,Ao=34069,$i=6408,Ts=6406,vs=6407,$o=6409,ps=6410,ou=32854,Vs=32855,gs=36194,Ct=32819,Zt=32820,Xe=33635,Ke=34042,kr=6402,gn=34041,Nn=35904,ra=35906,oi=36193,Ji=33776,ho=33777,Hs=33778,_u=33779,Ui=35986,yo=35987,Js=34798,Xu=35840,Su=35841,su=35842,uu=35843,tu=36196,Rs=5121,eu=5123,ys=5125,No=5126,nf=10242,Bf=10243,Ff=10497,Bs=33071,Gf=33648,h=10240,L=10241,lt=9728,wt=9729,Nt=9984,Yt=9985,Vt=9986,he=9987,ge=33170,Le=4352,He=4353,_r=4354,Sr=34046,Er=3317,Kr=37440,an=37441,Lr=37443,Tn=37444,_a=33984,Sa=[Nt,Vt,Yt,he],pa=[0,$o,ps,vs,$i],na={};na[$o]=na[Ts]=na[kr]=1,na[gn]=na[ps]=2,na[vs]=na[Nn]=3,na[$i]=na[ra]=4;function da(mt){return"[object "+mt+"]"}var ki=da("HTMLCanvasElement"),Li=da("OffscreenCanvas"),Ai=da("CanvasRenderingContext2D"),Ni=da("ImageBitmap"),Oi=da("HTMLImageElement"),Xi=da("HTMLVideoElement"),to=Object.keys(ri).concat([ki,Li,Ai,Ni,Oi,Xi]),Ua=[];Ua[Rs]=1,Ua[No]=4,Ua[oi]=2,Ua[eu]=2,Ua[ys]=4;var si=[];si[ou]=2,si[Vs]=2,si[gs]=2,si[gn]=4,si[Ji]=.5,si[ho]=.5,si[Hs]=1,si[_u]=1,si[Ui]=.5,si[yo]=1,si[Js]=1,si[Xu]=.5,si[Su]=.25,si[su]=.5,si[uu]=.25,si[tu]=.5;function Fs(mt){return Array.isArray(mt)&&(mt.length===0||typeof mt[0]=="number")}function ms(mt){if(!Array.isArray(mt))return!1;var Kt=mt.length;return!(Kt===0||!Pa(mt[0]))}function Oo(mt){return Object.prototype.toString.call(mt)}function Mu(mt){return Oo(mt)===ki}function zf(mt){return Oo(mt)===Li}function yc(mt){return Oo(mt)===Ai}function mc(mt){return Oo(mt)===Ni}function bc(mt){return Oo(mt)===Oi}function Uf(mt){return Oo(mt)===Xi}function Xf(mt){if(!mt)return!1;var Kt=Oo(mt);return to.indexOf(Kt)>=0?!0:Fs(mt)||ms(mt)||_i(mt)}function xc(mt){return ri[Object.prototype.toString.call(mt)]|0}function af(mt,Kt){var Me=Kt.length;switch(mt.type){case Rs:case eu:case ys:case No:var gr=tn.allocType(mt.type,Me);gr.set(Kt),mt.data=gr;break;case oi:mt.data=zi(Kt);break;default:Tt.raise("unsupported texture type, must specify a typed array")}}function of(mt,Kt){return tn.allocType(mt.type===oi?No:mt.type,Kt)}function wc(mt,Kt){mt.type===oi?(mt.data=zi(Kt),tn.freeType(Kt)):mt.data=Kt}function tl(mt,Kt,Me,gr,Or,yr){for(var mr=mt.width,$r=mt.height,Qr=mt.channels,nn=mr*$r*Qr,Wr=of(mt,nn),fn=0,d=0;d<$r;++d)for(var S=0;S<mr;++S)for(var O=0;O<Qr;++O)Wr[fn++]=Kt[Me*S+gr*d+Or*O+yr];wc(mt,Wr)}function Gs(mt,Kt,Me,gr,Or,yr){var mr;if(typeof si[mt]!="undefined"?mr=si[mt]:mr=na[mt]*Ua[Kt],yr&&(mr*=6),Or){for(var $r=0,Qr=Me;Qr>=1;)$r+=mr*Qr*Qr,Qr/=2;return $r}else return mr*Me*gr}function Ec(mt,Kt,Me,gr,Or,yr,mr){var $r={"don't care":Le,"dont care":Le,nice:_r,fast:He},Qr={repeat:Ff,clamp:Bs,mirror:Gf},nn={nearest:lt,linear:wt},Wr=et({mipmap:he,"nearest mipmap nearest":Nt,"linear mipmap nearest":Yt,"nearest mipmap linear":Vt,"linear mipmap linear":he},nn),fn={none:0,browser:Tn},d={uint8:Rs,rgba4:Ct,rgb565:Xe,"rgb5 a1":Zt},S={alpha:Ts,luminance:$o,"luminance alpha":ps,rgb:vs,rgba:$i,rgba4:ou,"rgb5 a1":Vs,rgb565:gs},O={};Kt.ext_srgb&&(S.srgb=Nn,S.srgba=ra),Kt.oes_texture_float&&(d.float32=d.float=No),Kt.oes_texture_half_float&&(d.float16=d["half float"]=oi),Kt.webgl_depth_texture&&(et(S,{depth:kr,"depth stencil":gn}),et(d,{uint16:eu,uint32:ys,"depth stencil":Ke})),Kt.webgl_compressed_texture_s3tc&&et(O,{"rgb s3tc dxt1":Ji,"rgba s3tc dxt1":ho,"rgba s3tc dxt3":Hs,"rgba s3tc dxt5":_u}),Kt.webgl_compressed_texture_atc&&et(O,{"rgb atc":Ui,"rgba atc explicit alpha":yo,"rgba atc interpolated alpha":Js}),Kt.webgl_compressed_texture_pvrtc&&et(O,{"rgb pvrtc 4bppv1":Xu,"rgb pvrtc 2bppv1":Su,"rgba pvrtc 4bppv1":su,"rgba pvrtc 2bppv1":uu}),Kt.webgl_compressed_texture_etc1&&(O["rgb etc1"]=tu);var X=Array.prototype.slice.call(mt.getParameter(qo));Object.keys(O).forEach(function(we){var br=O[we];X.indexOf(br)>=0&&(S[we]=br)});var at=Object.keys(S);Me.textureFormats=at;var st=[];Object.keys(S).forEach(function(we){var br=S[we];st[br]=we});var pt=[];Object.keys(d).forEach(function(we){var br=d[we];pt[br]=we});var xt=[];Object.keys(nn).forEach(function(we){var br=nn[we];xt[br]=we});var Mt=[];Object.keys(Wr).forEach(function(we){var br=Wr[we];Mt[br]=we});var Ft=[];Object.keys(Qr).forEach(function(we){var br=Qr[we];Ft[br]=we});var re=at.reduce(function(we,br){var pr=S[br];return pr===$o||pr===Ts||pr===$o||pr===ps||pr===kr||pr===gn||Kt.ext_srgb&&(pr===Nn||pr===ra)?we[pr]=pr:pr===Vs||br.indexOf("rgba")>=0?we[pr]=$i:we[pr]=vs,we},{});function qt(){this.internalformat=$i,this.format=$i,this.type=Rs,this.compressed=!1,this.premultiplyAlpha=!1,this.flipY=!1,this.unpackAlignment=1,this.colorSpace=Tn,this.width=0,this.height=0,this.channels=0}function Ee(we,br){we.internalformat=br.internalformat,we.format=br.format,we.type=br.type,we.compressed=br.compressed,we.premultiplyAlpha=br.premultiplyAlpha,we.flipY=br.flipY,we.unpackAlignment=br.unpackAlignment,we.colorSpace=br.colorSpace,we.width=br.width,we.height=br.height,we.channels=br.channels}function Ve(we,br){if(!(typeof br!="object"||!br)){if("premultiplyAlpha"in br&&(Tt.type(br.premultiplyAlpha,"boolean","invalid premultiplyAlpha"),we.premultiplyAlpha=br.premultiplyAlpha),"flipY"in br&&(Tt.type(br.flipY,"boolean","invalid texture flip"),we.flipY=br.flipY),"alignment"in br&&(Tt.oneOf(br.alignment,[1,2,4,8],"invalid texture unpack alignment"),we.unpackAlignment=br.alignment),"colorSpace"in br&&(Tt.parameter(br.colorSpace,fn,"invalid colorSpace"),we.colorSpace=fn[br.colorSpace]),"type"in br){var pr=br.type;Tt(Kt.oes_texture_float||!(pr==="float"||pr==="float32"),"you must enable the OES_texture_float extension in order to use floating point textures."),Tt(Kt.oes_texture_half_float||!(pr==="half float"||pr==="float16"),"you must enable the OES_texture_half_float extension in order to use 16-bit floating point textures."),Tt(Kt.webgl_depth_texture||!(pr==="uint16"||pr==="uint32"||pr==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),Tt.parameter(pr,d,"invalid texture type"),we.type=d[pr]}var On=we.width,Ra=we.height,ve=we.channels,jt=!1;"shape"in br?(Tt(Array.isArray(br.shape)&&br.shape.length>=2,"shape must be an array"),On=br.shape[0],Ra=br.shape[1],br.shape.length===3&&(ve=br.shape[2],Tt(ve>0&&ve<=4,"invalid number of channels"),jt=!0),Tt(On>=0&&On<=Me.maxTextureSize,"invalid width"),Tt(Ra>=0&&Ra<=Me.maxTextureSize,"invalid height")):("radius"in br&&(On=Ra=br.radius,Tt(On>=0&&On<=Me.maxTextureSize,"invalid radius")),"width"in br&&(On=br.width,Tt(On>=0&&On<=Me.maxTextureSize,"invalid width")),"height"in br&&(Ra=br.height,Tt(Ra>=0&&Ra<=Me.maxTextureSize,"invalid height")),"channels"in br&&(ve=br.channels,Tt(ve>0&&ve<=4,"invalid number of channels"),jt=!0)),we.width=On|0,we.height=Ra|0,we.channels=ve|0;var Fe=!1;if("format"in br){var ir=br.format;Tt(Kt.webgl_depth_texture||!(ir==="depth"||ir==="depth stencil"),"you must enable the WEBGL_depth_texture extension in order to use depth/stencil textures."),Tt.parameter(ir,S,"invalid texture format");var ur=we.internalformat=S[ir];we.format=re[ur],ir in d&&("type"in br||(we.type=d[ir])),ir in O&&(we.compressed=!0),Fe=!0}!jt&&Fe?we.channels=na[we.format]:jt&&!Fe?we.channels!==pa[we.format]&&(we.format=we.internalformat=pa[we.channels]):Fe&&jt&&Tt(we.channels===na[we.format],"number of channels inconsistent with specified format")}}function Mr(we){mt.pixelStorei(Kr,we.flipY),mt.pixelStorei(an,we.premultiplyAlpha),mt.pixelStorei(Lr,we.colorSpace),mt.pixelStorei(Er,we.unpackAlignment)}function Qe(){qt.call(this),this.xOffset=0,this.yOffset=0,this.data=null,this.needsFree=!1,this.element=null,this.needsCopy=!1}function rr(we,br){var pr=null;if(Xf(br)?pr=br:br&&(Tt.type(br,"object","invalid pixel data type"),Ve(we,br),"x"in br&&(we.xOffset=br.x|0),"y"in br&&(we.yOffset=br.y|0),Xf(br.data)&&(pr=br.data)),Tt(!we.compressed||pr instanceof Uint8Array,"compressed texture data must be stored in a uint8array"),br.copy){Tt(!pr,"can not specify copy and data field for the same texture");var On=Or.viewportWidth,Ra=Or.viewportHeight;we.width=we.width||On-we.xOffset,we.height=we.height||Ra-we.yOffset,we.needsCopy=!0,Tt(we.xOffset>=0&&we.xOffset<On&&we.yOffset>=0&&we.yOffset<Ra&&we.width>0&&we.width<=On&&we.height>0&&we.height<=Ra,"copy texture read out of bounds")}else if(!pr)we.width=we.width||1,we.height=we.height||1,we.channels=we.channels||4;else if(R(pr))we.channels=we.channels||4,we.data=pr,!("type"in br)&&we.type===Rs&&(we.type=xc(pr));else if(Fs(pr))we.channels=we.channels||4,af(we,pr),we.alignment=1,we.needsFree=!0;else if(_i(pr)){var ve=pr.data;!Array.isArray(ve)&&we.type===Rs&&(we.type=xc(ve));var jt=pr.shape,Fe=pr.stride,ir,ur,ze,Ge,je,de;jt.length===3?(ze=jt[2],de=Fe[2]):(Tt(jt.length===2,"invalid ndarray pixel data, must be 2 or 3D"),ze=1,de=1),ir=jt[0],ur=jt[1],Ge=Fe[0],je=Fe[1],we.alignment=1,we.width=ir,we.height=ur,we.channels=ze,we.format=we.internalformat=pa[ze],we.needsFree=!0,tl(we,ve,Ge,je,de,pr.offset)}else if(Mu(pr)||zf(pr)||yc(pr))Mu(pr)||zf(pr)?we.element=pr:we.element=pr.canvas,we.width=we.element.width,we.height=we.element.height,we.channels=4;else if(mc(pr))we.element=pr,we.width=pr.width,we.height=pr.height,we.channels=4;else if(bc(pr))we.element=pr,we.width=pr.naturalWidth,we.height=pr.naturalHeight,we.channels=4;else if(Uf(pr))we.element=pr,we.width=pr.videoWidth,we.height=pr.videoHeight,we.channels=4;else if(ms(pr)){var Oe=we.width||pr[0].length,fe=we.height||pr.length,Je=we.channels;Pa(pr[0][0])?Je=Je||pr[0][0].length:Je=Je||1;for(var hr=io.shape(pr),Nr=1,Fr=0;Fr<hr.length;++Fr)Nr*=hr[Fr];var Ar=of(we,Nr);io.flatten(pr,hr,"",Ar),wc(we,Ar),we.alignment=1,we.width=Oe,we.height=fe,we.channels=Je,we.format=we.internalformat=pa[Je],we.needsFree=!0}we.type===No?Tt(Me.extensions.indexOf("oes_texture_float")>=0,"oes_texture_float extension not enabled"):we.type===oi&&Tt(Me.extensions.indexOf("oes_texture_half_float")>=0,"oes_texture_half_float extension not enabled")}function tr(we,br,pr){var On=we.element,Ra=we.data,ve=we.internalformat,jt=we.format,Fe=we.type,ir=we.width,ur=we.height;Mr(we),On?mt.texImage2D(br,pr,jt,jt,Fe,On):we.compressed?mt.compressedTexImage2D(br,pr,ve,ir,ur,0,Ra):we.needsCopy?(gr(),mt.copyTexImage2D(br,pr,jt,we.xOffset,we.yOffset,ir,ur,0)):mt.texImage2D(br,pr,jt,ir,ur,0,jt,Fe,Ra||null)}function Jr(we,br,pr,On,Ra){var ve=we.element,jt=we.data,Fe=we.internalformat,ir=we.format,ur=we.type,ze=we.width,Ge=we.height;Mr(we),ve?mt.texSubImage2D(br,Ra,pr,On,ir,ur,ve):we.compressed?mt.compressedTexSubImage2D(br,Ra,pr,On,Fe,ze,Ge,jt):we.needsCopy?(gr(),mt.copyTexSubImage2D(br,Ra,pr,On,we.xOffset,we.yOffset,ze,Ge)):mt.texSubImage2D(br,Ra,pr,On,ze,Ge,ir,ur,jt)}var mn=[];function un(){return mn.pop()||new Qe}function Xn(we){we.needsFree&&tn.freeType(we.data),Qe.call(we),mn.push(we)}function Rn(){qt.call(this),this.genMipmaps=!1,this.mipmapHint=Le,this.mipmask=0,this.images=Array(16)}function Jn(we,br,pr){var On=we.images[0]=un();we.mipmask=1,On.width=we.width=br,On.height=we.height=pr,On.channels=we.channels=4}function va(we,br){var pr=null;if(Xf(br))pr=we.images[0]=un(),Ee(pr,we),rr(pr,br),we.mipmask=1;else if(Ve(we,br),Array.isArray(br.mipmap))for(var On=br.mipmap,Ra=0;Ra<On.length;++Ra)pr=we.images[Ra]=un(),Ee(pr,we),pr.width>>=Ra,pr.height>>=Ra,rr(pr,On[Ra]),we.mipmask|=1<<Ra;else pr=we.images[0]=un(),Ee(pr,we),rr(pr,br),we.mipmask=1;Ee(we,we.images[0]),we.compressed&&(we.internalformat===Ji||we.internalformat===ho||we.internalformat===Hs||we.internalformat===_u)&&Tt(we.width%4===0&&we.height%4===0,"for compressed texture formats, mipmap level 0 must have width and height that are a multiple of 4")}function ua(we,br){for(var pr=we.images,On=0;On<pr.length;++On){if(!pr[On])return;tr(pr[On],br,On)}}var mi=[];function ga(){var we=mi.pop()||new Rn;qt.call(we),we.mipmask=0;for(var br=0;br<16;++br)we.images[br]=null;return we}function Ci(we){for(var br=we.images,pr=0;pr<br.length;++pr)br[pr]&&Xn(br[pr]),br[pr]=null;mi.push(we)}function vi(){this.minFilter=lt,this.magFilter=lt,this.wrapS=Bs,this.wrapT=Bs,this.anisotropic=1,this.genMipmaps=!1,this.mipmapHint=Le}function Fa(we,br){if("min"in br){var pr=br.min;Tt.parameter(pr,Wr),we.minFilter=Wr[pr],Sa.indexOf(we.minFilter)>=0&&!("faces"in br)&&(we.genMipmaps=!0)}if("mag"in br){var On=br.mag;Tt.parameter(On,nn),we.magFilter=nn[On]}var Ra=we.wrapS,ve=we.wrapT;if("wrap"in br){var jt=br.wrap;typeof jt=="string"?(Tt.parameter(jt,Qr),Ra=ve=Qr[jt]):Array.isArray(jt)&&(Tt.parameter(jt[0],Qr),Tt.parameter(jt[1],Qr),Ra=Qr[jt[0]],ve=Qr[jt[1]])}else{if("wrapS"in br){var Fe=br.wrapS;Tt.parameter(Fe,Qr),Ra=Qr[Fe]}if("wrapT"in br){var ir=br.wrapT;Tt.parameter(ir,Qr),ve=Qr[ir]}}if(we.wrapS=Ra,we.wrapT=ve,"anisotropic"in br){var ur=br.anisotropic;Tt(typeof ur=="number"&&ur>=1&&ur<=Me.maxAnisotropic,"aniso samples must be between 1 and "),we.anisotropic=br.anisotropic}if("mipmap"in br){var ze=!1;switch(typeof br.mipmap){case"string":Tt.parameter(br.mipmap,$r,"invalid mipmap hint"),we.mipmapHint=$r[br.mipmap],we.genMipmaps=!0,ze=!0;break;case"boolean":ze=we.genMipmaps=br.mipmap;break;case"object":Tt(Array.isArray(br.mipmap),"invalid mipmap type"),we.genMipmaps=!1,ze=!0;break;default:Tt.raise("invalid mipmap type")}ze&&!("min"in br)&&(we.minFilter=Nt)}}function Ti(we,br){mt.texParameteri(br,L,we.minFilter),mt.texParameteri(br,h,we.magFilter),mt.texParameteri(br,nf,we.wrapS),mt.texParameteri(br,Bf,we.wrapT),Kt.ext_texture_filter_anisotropic&&mt.texParameteri(br,Sr,we.anisotropic),we.genMipmaps&&(mt.hint(ge,we.mipmapHint),mt.generateMipmap(br))}var Yi=0,bo={},Do=Me.maxTextureUnits,ro=Array(Do).map(function(){return null});function Ma(we){qt.call(this),this.mipmask=0,this.internalformat=$i,this.id=Yi++,this.refCount=1,this.target=we,this.texture=mt.createTexture(),this.unit=-1,this.bindCount=0,this.texInfo=new vi,mr.profile&&(this.stats={size:0})}function Qo(we){mt.activeTexture(_a),mt.bindTexture(we.target,we.texture)}function ii(){var we=ro[0];we?mt.bindTexture(we.target,we.texture):mt.bindTexture(Bi,null)}function ea(we){var br=we.texture;Tt(br,"must not double destroy texture");var pr=we.unit,On=we.target;pr>=0&&(mt.activeTexture(_a+pr),mt.bindTexture(On,null),ro[pr]=null),mt.deleteTexture(br),we.texture=null,we.params=null,we.pixels=null,we.refCount=0,delete bo[we.id],yr.textureCount--}et(Ma.prototype,{bind:function(){var we=this;we.bindCount+=1;var br=we.unit;if(br<0){for(var pr=0;pr<Do;++pr){var On=ro[pr];if(On){if(On.bindCount>0)continue;On.unit=-1}ro[pr]=we,br=pr;break}br>=Do&&Tt.raise("insufficient number of texture units"),mr.profile&&yr.maxTextureUnits<br+1&&(yr.maxTextureUnits=br+1),we.unit=br,mt.activeTexture(_a+br),mt.bindTexture(we.target,we.texture)}return br},unbind:function(){this.bindCount-=1},decRef:function(){--this.refCount<=0&&ea(this)}});function Ga(we,br){var pr=new Ma(Bi);bo[pr.id]=pr,yr.textureCount++;function On(jt,Fe){var ir=pr.texInfo;vi.call(ir);var ur=ga();return typeof jt=="number"?typeof Fe=="number"?Jn(ur,jt|0,Fe|0):Jn(ur,jt|0,jt|0):jt?(Tt.type(jt,"object","invalid arguments to regl.texture"),Fa(ir,jt),va(ur,jt)):Jn(ur,1,1),ir.genMipmaps&&(ur.mipmask=(ur.width<<1)-1),pr.mipmask=ur.mipmask,Ee(pr,ur),Tt.texture2D(ir,ur,Me),pr.internalformat=ur.internalformat,On.width=ur.width,On.height=ur.height,Qo(pr),ua(ur,Bi),Ti(ir,Bi),ii(),Ci(ur),mr.profile&&(pr.stats.size=Gs(pr.internalformat,pr.type,ur.width,ur.height,ir.genMipmaps,!1)),On.format=st[pr.internalformat],On.type=pt[pr.type],On.mag=xt[ir.magFilter],On.min=Mt[ir.minFilter],On.wrapS=Ft[ir.wrapS],On.wrapT=Ft[ir.wrapT],On}function Ra(jt,Fe,ir,ur){Tt(!!jt,"must specify image data");var ze=Fe|0,Ge=ir|0,je=ur|0,de=un();return Ee(de,pr),de.width=0,de.height=0,rr(de,jt),de.width=de.width||(pr.width>>je)-ze,de.height=de.height||(pr.height>>je)-Ge,Tt(pr.type===de.type&&pr.format===de.format&&pr.internalformat===de.internalformat,"incompatible format for texture.subimage"),Tt(ze>=0&&Ge>=0&&ze+de.width<=pr.width&&Ge+de.height<=pr.height,"texture.subimage write out of bounds"),Tt(pr.mipmask&1<<je,"missing mipmap data"),Tt(de.data||de.element||de.needsCopy,"missing image data"),Qo(pr),Jr(de,Bi,ze,Ge,je),ii(),Xn(de),On}function ve(jt,Fe){var ir=jt|0,ur=Fe|0||ir;if(ir===pr.width&&ur===pr.height)return On;On.width=pr.width=ir,On.height=pr.height=ur,Qo(pr);for(var ze=0;pr.mipmask>>ze;++ze){var Ge=ir>>ze,je=ur>>ze;if(!Ge||!je)break;mt.texImage2D(Bi,ze,pr.format,Ge,je,0,pr.format,pr.type,null)}return ii(),mr.profile&&(pr.stats.size=Gs(pr.internalformat,pr.type,ir,ur,!1,!1)),On}return On(we,br),On.subimage=Ra,On.resize=ve,On._reglType="texture2d",On._texture=pr,mr.profile&&(On.stats=pr.stats),On.destroy=function(){pr.decRef()},On}function $a(we,br,pr,On,Ra,ve){var jt=new Ma(Fo);bo[jt.id]=jt,yr.cubeCount++;var Fe=new Array(6);function ir(Ge,je,de,Oe,fe,Je){var hr,Nr=jt.texInfo;for(vi.call(Nr),hr=0;hr<6;++hr)Fe[hr]=ga();if(typeof Ge=="number"||!Ge){var Fr=Ge|0||1;for(hr=0;hr<6;++hr)Jn(Fe[hr],Fr,Fr)}else if(typeof Ge=="object")if(je)va(Fe[0],Ge),va(Fe[1],je),va(Fe[2],de),va(Fe[3],Oe),va(Fe[4],fe),va(Fe[5],Je);else if(Fa(Nr,Ge),Ve(jt,Ge),"faces"in Ge){var Ar=Ge.faces;for(Tt(Array.isArray(Ar)&&Ar.length===6,"cube faces must be a length 6 array"),hr=0;hr<6;++hr)Tt(typeof Ar[hr]=="object"&&!!Ar[hr],"invalid input for cube map face"),Ee(Fe[hr],jt),va(Fe[hr],Ar[hr])}else for(hr=0;hr<6;++hr)va(Fe[hr],Ge);else Tt.raise("invalid arguments to cube map");for(Ee(jt,Fe[0]),Me.npotTextureCube||Tt(Ii(jt.width)&&Ii(jt.height),"your browser does not support non power or two texture dimensions"),Nr.genMipmaps?jt.mipmask=(Fe[0].width<<1)-1:jt.mipmask=Fe[0].mipmask,Tt.textureCube(jt,Nr,Fe,Me),jt.internalformat=Fe[0].internalformat,ir.width=Fe[0].width,ir.height=Fe[0].height,Qo(jt),hr=0;hr<6;++hr)ua(Fe[hr],Ao+hr);for(Ti(Nr,Fo),ii(),mr.profile&&(jt.stats.size=Gs(jt.internalformat,jt.type,ir.width,ir.height,Nr.genMipmaps,!0)),ir.format=st[jt.internalformat],ir.type=pt[jt.type],ir.mag=xt[Nr.magFilter],ir.min=Mt[Nr.minFilter],ir.wrapS=Ft[Nr.wrapS],ir.wrapT=Ft[Nr.wrapT],hr=0;hr<6;++hr)Ci(Fe[hr]);return ir}function ur(Ge,je,de,Oe,fe){Tt(!!je,"must specify image data"),Tt(typeof Ge=="number"&&Ge===(Ge|0)&&Ge>=0&&Ge<6,"invalid face");var Je=de|0,hr=Oe|0,Nr=fe|0,Fr=un();return Ee(Fr,jt),Fr.width=0,Fr.height=0,rr(Fr,je),Fr.width=Fr.width||(jt.width>>Nr)-Je,Fr.height=Fr.height||(jt.height>>Nr)-hr,Tt(jt.type===Fr.type&&jt.format===Fr.format&&jt.internalformat===Fr.internalformat,"incompatible format for texture.subimage"),Tt(Je>=0&&hr>=0&&Je+Fr.width<=jt.width&&hr+Fr.height<=jt.height,"texture.subimage write out of bounds"),Tt(jt.mipmask&1<<Nr,"missing mipmap data"),Tt(Fr.data||Fr.element||Fr.needsCopy,"missing image data"),Qo(jt),Jr(Fr,Ao+Ge,Je,hr,Nr),ii(),Xn(Fr),ir}function ze(Ge){var je=Ge|0;if(je!==jt.width){ir.width=jt.width=je,ir.height=jt.height=je,Qo(jt);for(var de=0;de<6;++de)for(var Oe=0;jt.mipmask>>Oe;++Oe)mt.texImage2D(Ao+de,Oe,jt.format,je>>Oe,je>>Oe,0,jt.format,jt.type,null);return ii(),mr.profile&&(jt.stats.size=Gs(jt.internalformat,jt.type,ir.width,ir.height,!1,!0)),ir}}return ir(we,br,pr,On,Ra,ve),ir.subimage=ur,ir.resize=ze,ir._reglType="textureCube",ir._texture=jt,mr.profile&&(ir.stats=jt.stats),ir.destroy=function(){jt.decRef()},ir}function vo(){for(var we=0;we<Do;++we)mt.activeTexture(_a+we),mt.bindTexture(Bi,null),ro[we]=null;Si(bo).forEach(ea),yr.cubeCount=0,yr.textureCount=0}mr.profile&&(yr.getTotalTextureSize=function(){var we=0;return Object.keys(bo).forEach(function(br){we+=bo[br].stats.size}),we});function Du(){for(var we=0;we<Do;++we){var br=ro[we];br&&(br.bindCount=0,br.unit=-1,ro[we]=null)}Si(bo).forEach(function(pr){pr.texture=mt.createTexture(),mt.bindTexture(pr.target,pr.texture);for(var On=0;On<32;++On)if(pr.mipmask&1<<On)if(pr.target===Bi)mt.texImage2D(Bi,On,pr.internalformat,pr.width>>On,pr.height>>On,0,pr.internalformat,pr.type,null);else for(var Ra=0;Ra<6;++Ra)mt.texImage2D(Ao+Ra,On,pr.internalformat,pr.width>>On,pr.height>>On,0,pr.internalformat,pr.type,null);Ti(pr.texInfo,pr.target)})}function oc(){for(var we=0;we<Do;++we){var br=ro[we];br&&(br.bindCount=0,br.unit=-1,ro[we]=null),mt.activeTexture(_a+we),mt.bindTexture(Bi,null),mt.bindTexture(Fo,null)}}return{create2D:Ga,createCube:$a,clear:vo,getTexture:function(we){return null},restore:Du,refresh:oc}}var In=36161,Au=32854,Xa=32855,sf=36194,Yf=33189,fu=36168,Yu=34041,Wu=35907,uf=34836,ff=34842,_c=34843,bs=[];bs[Au]=2,bs[Xa]=2,bs[sf]=2,bs[Yf]=2,bs[fu]=1,bs[Yu]=4,bs[Wu]=4,bs[uf]=16,bs[ff]=8,bs[_c]=6;function Sc(mt,Kt,Me){return bs[mt]*Kt*Me}var cf=function(mt,Kt,Me,gr,Or){var yr={rgba4:Au,rgb565:sf,"rgb5 a1":Xa,depth:Yf,stencil:fu,"depth stencil":Yu};Kt.ext_srgb&&(yr.srgba=Wu),Kt.ext_color_buffer_half_float&&(yr.rgba16f=ff,yr.rgb16f=_c),Kt.webgl_color_buffer_float&&(yr.rgba32f=uf);var mr=[];Object.keys(yr).forEach(function(S){var O=yr[S];mr[O]=S});var $r=0,Qr={};function nn(S){this.id=$r++,this.refCount=1,this.renderbuffer=S,this.format=Au,this.width=0,this.height=0,Or.profile&&(this.stats={size:0})}nn.prototype.decRef=function(){--this.refCount<=0&&Wr(this)};function Wr(S){var O=S.renderbuffer;Tt(O,"must not double destroy renderbuffer"),mt.bindRenderbuffer(In,null),mt.deleteRenderbuffer(O),S.renderbuffer=null,S.refCount=0,delete Qr[S.id],gr.renderbufferCount--}function fn(S,O){var X=new nn(mt.createRenderbuffer());Qr[X.id]=X,gr.renderbufferCount++;function at(pt,xt){var Mt=0,Ft=0,re=Au;if(typeof pt=="object"&&pt){var qt=pt;if("shape"in qt){var Ee=qt.shape;Tt(Array.isArray(Ee)&&Ee.length>=2,"invalid renderbuffer shape"),Mt=Ee[0]|0,Ft=Ee[1]|0}else"radius"in qt&&(Mt=Ft=qt.radius|0),"width"in qt&&(Mt=qt.width|0),"height"in qt&&(Ft=qt.height|0);"format"in qt&&(Tt.parameter(qt.format,yr,"invalid renderbuffer format"),re=yr[qt.format])}else typeof pt=="number"?(Mt=pt|0,typeof xt=="number"?Ft=xt|0:Ft=Mt):pt?Tt.raise("invalid arguments to renderbuffer constructor"):Mt=Ft=1;if(Tt(Mt>0&&Ft>0&&Mt<=Me.maxRenderbufferSize&&Ft<=Me.maxRenderbufferSize,"invalid renderbuffer size"),!(Mt===X.width&&Ft===X.height&&re===X.format))return at.width=X.width=Mt,at.height=X.height=Ft,X.format=re,mt.bindRenderbuffer(In,X.renderbuffer),mt.renderbufferStorage(In,re,Mt,Ft),Tt(mt.getError()===0,"invalid render buffer format"),Or.profile&&(X.stats.size=Sc(X.format,X.width,X.height)),at.format=mr[X.format],at}function st(pt,xt){var Mt=pt|0,Ft=xt|0||Mt;return Mt===X.width&&Ft===X.height||(Tt(Mt>0&&Ft>0&&Mt<=Me.maxRenderbufferSize&&Ft<=Me.maxRenderbufferSize,"invalid renderbuffer size"),at.width=X.width=Mt,at.height=X.height=Ft,mt.bindRenderbuffer(In,X.renderbuffer),mt.renderbufferStorage(In,X.format,Mt,Ft),Tt(mt.getError()===0,"invalid render buffer format"),Or.profile&&(X.stats.size=Sc(X.format,X.width,X.height))),at}return at(S,O),at.resize=st,at._reglType="renderbuffer",at._renderbuffer=X,Or.profile&&(at.stats=X.stats),at.destroy=function(){X.decRef()},at}Or.profile&&(gr.getTotalRenderbufferSize=function(){var S=0;return Object.keys(Qr).forEach(function(O){S+=Qr[O].stats.size}),S});function d(){Si(Qr).forEach(function(S){S.renderbuffer=mt.createRenderbuffer(),mt.bindRenderbuffer(In,S.renderbuffer),mt.renderbufferStorage(In,S.format,S.width,S.height)}),mt.bindRenderbuffer(In,null)}return{create:fn,clear:function(){Si(Qr).forEach(Wr)},restore:d}},xi=36160,Vu=36161,Is=3553,Cu=34069,J=36064,gt=36096,St=36128,Ut=33306,ae=36053,Ue=36054,We=36055,vr=36057,zr=36061,qr=36193,Ln=5121,Mn=5126,kn=6407,sa=6408,Ta=6402,xa=[kn,sa],aa=[];aa[sa]=4,aa[kn]=3;var ka=[];ka[Ln]=1,ka[Mn]=4,ka[qr]=2;var jn=32854,Ea=32855,la=36194,Hn=33189,La=36168,ja=34041,Qa=35907,qa=34836,Na=34842,di=34843,wi=[jn,Ea,la,Qa,Na,di,qa],yi={};yi[ae]="complete",yi[Ue]="incomplete attachment",yi[vr]="incomplete dimensions",yi[We]="incomplete, missing attachment",yi[zr]="unsupported";function Tu(mt,Kt,Me,gr,Or,yr){var mr={cur:null,next:null,dirty:!1,setFBO:null},$r=["rgba"],Qr=["rgba4","rgb565","rgb5 a1"];Kt.ext_srgb&&Qr.push("srgba"),Kt.ext_color_buffer_half_float&&Qr.push("rgba16f","rgb16f"),Kt.webgl_color_buffer_float&&Qr.push("rgba32f");var nn=["uint8"];Kt.oes_texture_half_float&&nn.push("half float","float16"),Kt.oes_texture_float&&nn.push("float","float32");function Wr(Qe,rr,tr){this.target=Qe,this.texture=rr,this.renderbuffer=tr;var Jr=0,mn=0;rr?(Jr=rr.width,mn=rr.height):tr&&(Jr=tr.width,mn=tr.height),this.width=Jr,this.height=mn}function fn(Qe){Qe&&(Qe.texture&&Qe.texture._texture.decRef(),Qe.renderbuffer&&Qe.renderbuffer._renderbuffer.decRef())}function d(Qe,rr,tr){if(Qe)if(Qe.texture){var Jr=Qe.texture._texture,mn=Math.max(1,Jr.width),un=Math.max(1,Jr.height);Tt(mn===rr&&un===tr,"inconsistent width/height for supplied texture"),Jr.refCount+=1}else{var Xn=Qe.renderbuffer._renderbuffer;Tt(Xn.width===rr&&Xn.height===tr,"inconsistent width/height for renderbuffer"),Xn.refCount+=1}}function S(Qe,rr){rr&&(rr.texture?mt.framebufferTexture2D(xi,Qe,rr.target,rr.texture._texture.texture,0):mt.framebufferRenderbuffer(xi,Qe,Vu,rr.renderbuffer._renderbuffer.renderbuffer))}function O(Qe){var rr=Is,tr=null,Jr=null,mn=Qe;typeof Qe=="object"&&(mn=Qe.data,"target"in Qe&&(rr=Qe.target|0)),Tt.type(mn,"function","invalid attachment data");var un=mn._reglType;return un==="texture2d"?(tr=mn,Tt(rr===Is)):un==="textureCube"?(tr=mn,Tt(rr>=Cu&&rr<Cu+6,"invalid cube map target")):un==="renderbuffer"?(Jr=mn,rr=Vu):Tt.raise("invalid regl object for attachment"),new Wr(rr,tr,Jr)}function X(Qe,rr,tr,Jr,mn){if(tr){var un=gr.create2D({width:Qe,height:rr,format:Jr,type:mn});return un._texture.refCount=0,new Wr(Is,un,null)}else{var Xn=Or.create({width:Qe,height:rr,format:Jr});return Xn._renderbuffer.refCount=0,new Wr(Vu,null,Xn)}}function at(Qe){return Qe&&(Qe.texture||Qe.renderbuffer)}function st(Qe,rr,tr){Qe&&(Qe.texture?Qe.texture.resize(rr,tr):Qe.renderbuffer&&Qe.renderbuffer.resize(rr,tr),Qe.width=rr,Qe.height=tr)}var pt=0,xt={};function Mt(){this.id=pt++,xt[this.id]=this,this.framebuffer=mt.createFramebuffer(),this.width=0,this.height=0,this.colorAttachments=[],this.depthAttachment=null,this.stencilAttachment=null,this.depthStencilAttachment=null}function Ft(Qe){Qe.colorAttachments.forEach(fn),fn(Qe.depthAttachment),fn(Qe.stencilAttachment),fn(Qe.depthStencilAttachment)}function re(Qe){var rr=Qe.framebuffer;Tt(rr,"must not double destroy framebuffer"),mt.deleteFramebuffer(rr),Qe.framebuffer=null,yr.framebufferCount--,delete xt[Qe.id]}function qt(Qe){var rr;mt.bindFramebuffer(xi,Qe.framebuffer);var tr=Qe.colorAttachments;for(rr=0;rr<tr.length;++rr)S(J+rr,tr[rr]);for(rr=tr.length;rr<Me.maxColorAttachments;++rr)mt.framebufferTexture2D(xi,J+rr,Is,null,0);mt.framebufferTexture2D(xi,Ut,Is,null,0),mt.framebufferTexture2D(xi,gt,Is,null,0),mt.framebufferTexture2D(xi,St,Is,null,0),S(gt,Qe.depthAttachment),S(St,Qe.stencilAttachment),S(Ut,Qe.depthStencilAttachment);var Jr=mt.checkFramebufferStatus(xi);!mt.isContextLost()&&Jr!==ae&&Tt.raise("framebuffer configuration not supported, status = "+yi[Jr]),mt.bindFramebuffer(xi,mr.next?mr.next.framebuffer:null),mr.cur=mr.next,mt.getError()}function Ee(Qe,rr){var tr=new Mt;yr.framebufferCount++;function Jr(un,Xn){var Rn;Tt(mr.next!==tr,"can not update framebuffer which is currently in use");var Jn=0,va=0,ua=!0,mi=!0,ga=null,Ci=!0,vi="rgba",Fa="uint8",Ti=1,Yi=null,bo=null,Do=null,ro=!1;if(typeof un=="number")Jn=un|0,va=Xn|0||Jn;else if(!un)Jn=va=1;else{Tt.type(un,"object","invalid arguments for framebuffer");var Ma=un;if("shape"in Ma){var Qo=Ma.shape;Tt(Array.isArray(Qo)&&Qo.length>=2,"invalid shape for framebuffer"),Jn=Qo[0],va=Qo[1]}else"radius"in Ma&&(Jn=va=Ma.radius),"width"in Ma&&(Jn=Ma.width),"height"in Ma&&(va=Ma.height);("color"in Ma||"colors"in Ma)&&(ga=Ma.color||Ma.colors,Array.isArray(ga)&&Tt(ga.length===1||Kt.webgl_draw_buffers,"multiple render targets not supported")),ga||("colorCount"in Ma&&(Ti=Ma.colorCount|0,Tt(Ti>0,"invalid color buffer count")),"colorTexture"in Ma&&(Ci=!!Ma.colorTexture,vi="rgba4"),"colorType"in Ma&&(Fa=Ma.colorType,Ci?(Tt(Kt.oes_texture_float||!(Fa==="float"||Fa==="float32"),"you must enable OES_texture_float in order to use floating point framebuffer objects"),Tt(Kt.oes_texture_half_float||!(Fa==="half float"||Fa==="float16"),"you must enable OES_texture_half_float in order to use 16-bit floating point framebuffer objects")):Fa==="half float"||Fa==="float16"?(Tt(Kt.ext_color_buffer_half_float,"you must enable EXT_color_buffer_half_float to use 16-bit render buffers"),vi="rgba16f"):(Fa==="float"||Fa==="float32")&&(Tt(Kt.webgl_color_buffer_float,"you must enable WEBGL_color_buffer_float in order to use 32-bit floating point renderbuffers"),vi="rgba32f"),Tt.oneOf(Fa,nn,"invalid color type")),"colorFormat"in Ma&&(vi=Ma.colorFormat,$r.indexOf(vi)>=0?Ci=!0:Qr.indexOf(vi)>=0?Ci=!1:Ci?Tt.oneOf(Ma.colorFormat,$r,"invalid color format for texture"):Tt.oneOf(Ma.colorFormat,Qr,"invalid color format for renderbuffer"))),("depthTexture"in Ma||"depthStencilTexture"in Ma)&&(ro=!!(Ma.depthTexture||Ma.depthStencilTexture),Tt(!ro||Kt.webgl_depth_texture,"webgl_depth_texture extension not supported")),"depth"in Ma&&(typeof Ma.depth=="boolean"?ua=Ma.depth:(Yi=Ma.depth,mi=!1)),"stencil"in Ma&&(typeof Ma.stencil=="boolean"?mi=Ma.stencil:(bo=Ma.stencil,ua=!1)),"depthStencil"in Ma&&(typeof Ma.depthStencil=="boolean"?ua=mi=Ma.depthStencil:(Do=Ma.depthStencil,ua=!1,mi=!1))}var ii=null,ea=null,Ga=null,$a=null;if(Array.isArray(ga))ii=ga.map(O);else if(ga)ii=[O(ga)];else for(ii=new Array(Ti),Rn=0;Rn<Ti;++Rn)ii[Rn]=X(Jn,va,Ci,vi,Fa);Tt(Kt.webgl_draw_buffers||ii.length<=1,"you must enable the WEBGL_draw_buffers extension in order to use multiple color buffers."),Tt(ii.length<=Me.maxColorAttachments,"too many color attachments, not supported"),Jn=Jn||ii[0].width,va=va||ii[0].height,Yi?ea=O(Yi):ua&&!mi&&(ea=X(Jn,va,ro,"depth","uint32")),bo?Ga=O(bo):mi&&!ua&&(Ga=X(Jn,va,!1,"stencil","uint8")),Do?$a=O(Do):!Yi&&!bo&&mi&&ua&&($a=X(Jn,va,ro,"depth stencil","depth stencil")),Tt(!!Yi+!!bo+!!Do<=1,"invalid framebuffer configuration, can specify exactly one depth/stencil attachment");var vo=null;for(Rn=0;Rn<ii.length;++Rn)if(d(ii[Rn],Jn,va),Tt(!ii[Rn]||ii[Rn].texture&&xa.indexOf(ii[Rn].texture._texture.format)>=0||ii[Rn].renderbuffer&&wi.indexOf(ii[Rn].renderbuffer._renderbuffer.format)>=0,"framebuffer color attachment "+Rn+" is invalid"),ii[Rn]&&ii[Rn].texture){var Du=aa[ii[Rn].texture._texture.format]*ka[ii[Rn].texture._texture.type];vo===null?vo=Du:Tt(vo===Du,"all color attachments much have the same number of bits per pixel.")}return d(ea,Jn,va),Tt(!ea||ea.texture&&ea.texture._texture.format===Ta||ea.renderbuffer&&ea.renderbuffer._renderbuffer.format===Hn,"invalid depth attachment for framebuffer object"),d(Ga,Jn,va),Tt(!Ga||Ga.renderbuffer&&Ga.renderbuffer._renderbuffer.format===La,"invalid stencil attachment for framebuffer object"),d($a,Jn,va),Tt(!$a||$a.texture&&$a.texture._texture.format===ja||$a.renderbuffer&&$a.renderbuffer._renderbuffer.format===ja,"invalid depth-stencil attachment for framebuffer object"),Ft(tr),tr.width=Jn,tr.height=va,tr.colorAttachments=ii,tr.depthAttachment=ea,tr.stencilAttachment=Ga,tr.depthStencilAttachment=$a,Jr.color=ii.map(at),Jr.depth=at(ea),Jr.stencil=at(Ga),Jr.depthStencil=at($a),Jr.width=tr.width,Jr.height=tr.height,qt(tr),Jr}function mn(un,Xn){Tt(mr.next!==tr,"can not resize a framebuffer which is currently in use");var Rn=Math.max(un|0,1),Jn=Math.max(Xn|0||Rn,1);if(Rn===tr.width&&Jn===tr.height)return Jr;for(var va=tr.colorAttachments,ua=0;ua<va.length;++ua)st(va[ua],Rn,Jn);return st(tr.depthAttachment,Rn,Jn),st(tr.stencilAttachment,Rn,Jn),st(tr.depthStencilAttachment,Rn,Jn),tr.width=Jr.width=Rn,tr.height=Jr.height=Jn,qt(tr),Jr}return Jr(Qe,rr),et(Jr,{resize:mn,_reglType:"framebuffer",_framebuffer:tr,destroy:function(){re(tr),Ft(tr)},use:function(un){mr.setFBO({framebuffer:Jr},un)}})}function Ve(Qe){var rr=Array(6);function tr(mn){var un;Tt(rr.indexOf(mr.next)<0,"can not update framebuffer which is currently in use");var Xn={color:null},Rn=0,Jn=null,va="rgba",ua="uint8",mi=1;if(typeof mn=="number")Rn=mn|0;else if(!mn)Rn=1;else{Tt.type(mn,"object","invalid arguments for framebuffer");var ga=mn;if("shape"in ga){var Ci=ga.shape;Tt(Array.isArray(Ci)&&Ci.length>=2,"invalid shape for framebuffer"),Tt(Ci[0]===Ci[1],"cube framebuffer must be square"),Rn=Ci[0]}else"radius"in ga&&(Rn=ga.radius|0),"width"in ga?(Rn=ga.width|0,"height"in ga&&Tt(ga.height===Rn,"must be square")):"height"in ga&&(Rn=ga.height|0);("color"in ga||"colors"in ga)&&(Jn=ga.color||ga.colors,Array.isArray(Jn)&&Tt(Jn.length===1||Kt.webgl_draw_buffers,"multiple render targets not supported")),Jn||("colorCount"in ga&&(mi=ga.colorCount|0,Tt(mi>0,"invalid color buffer count")),"colorType"in ga&&(Tt.oneOf(ga.colorType,nn,"invalid color type"),ua=ga.colorType),"colorFormat"in ga&&(va=ga.colorFormat,Tt.oneOf(ga.colorFormat,$r,"invalid color format for texture"))),"depth"in ga&&(Xn.depth=ga.depth),"stencil"in ga&&(Xn.stencil=ga.stencil),"depthStencil"in ga&&(Xn.depthStencil=ga.depthStencil)}var vi;if(Jn)if(Array.isArray(Jn))for(vi=[],un=0;un<Jn.length;++un)vi[un]=Jn[un];else vi=[Jn];else{vi=Array(mi);var Fa={radius:Rn,format:va,type:ua};for(un=0;un<mi;++un)vi[un]=gr.createCube(Fa)}for(Xn.color=Array(vi.length),un=0;un<vi.length;++un){var Ti=vi[un];Tt(typeof Ti=="function"&&Ti._reglType==="textureCube","invalid cube map"),Rn=Rn||Ti.width,Tt(Ti.width===Rn&&Ti.height===Rn,"invalid cube map shape"),Xn.color[un]={target:Cu,data:vi[un]}}for(un=0;un<6;++un){for(var Yi=0;Yi<vi.length;++Yi)Xn.color[Yi].target=Cu+un;un>0&&(Xn.depth=rr[0].depth,Xn.stencil=rr[0].stencil,Xn.depthStencil=rr[0].depthStencil),rr[un]?rr[un](Xn):rr[un]=Ee(Xn)}return et(tr,{width:Rn,height:Rn,color:vi})}function Jr(mn){var un,Xn=mn|0;if(Tt(Xn>0&&Xn<=Me.maxCubeMapSize,"invalid radius for cube fbo"),Xn===tr.width)return tr;var Rn=tr.color;for(un=0;un<Rn.length;++un)Rn[un].resize(Xn);for(un=0;un<6;++un)rr[un].resize(Xn);return tr.width=tr.height=Xn,tr}return tr(Qe),et(tr,{faces:rr,resize:Jr,_reglType:"framebufferCube",destroy:function(){rr.forEach(function(mn){mn.destroy()})}})}function Mr(){mr.cur=null,mr.next=null,mr.dirty=!0,Si(xt).forEach(function(Qe){Qe.framebuffer=mt.createFramebuffer(),qt(Qe)})}return et(mr,{getFramebuffer:function(Qe){if(typeof Qe=="function"&&Qe._reglType==="framebuffer"){var rr=Qe._framebuffer;if(rr instanceof Mt)return rr}return null},create:Ee,createCube:Ve,clear:function(){Si(xt).forEach(re)},restore:Mr})}var Wf=5126,as=34962;function cu(){this.state=0,this.x=0,this.y=0,this.z=0,this.w=0,this.buffer=null,this.size=0,this.normalized=!1,this.type=Wf,this.offset=0,this.stride=0,this.divisor=0}function lf(mt,Kt,Me,gr,Or){for(var yr=Me.maxAttributes,mr=new Array(yr),$r=0;$r<yr;++$r)mr[$r]=new cu;var Qr=0,nn={},Wr={Record:cu,scope:{},state:mr,currentVAO:null,targetVAO:null,restore:d()?xt:function(){},createVAO:Mt,getVAO:O,destroyBuffer:fn,setVAO:d()?X:at,clear:d()?st:function(){}};function fn(Ft){for(var re=0;re<mr.length;++re){var qt=mr[re];qt.buffer===Ft&&(mt.disableVertexAttribArray(re),qt.buffer=null)}}function d(){return Kt.oes_vertex_array_object}function S(){return Kt.angle_instanced_arrays}function O(Ft){return typeof Ft=="function"&&Ft._vao?Ft._vao:null}function X(Ft){if(Ft!==Wr.currentVAO){var re=d();Ft?re.bindVertexArrayOES(Ft.vao):re.bindVertexArrayOES(null),Wr.currentVAO=Ft}}function at(Ft){if(Ft!==Wr.currentVAO){if(Ft)Ft.bindAttrs();else for(var re=S(),qt=0;qt<mr.length;++qt){var Ee=mr[qt];Ee.buffer?(mt.enableVertexAttribArray(qt),mt.vertexAttribPointer(qt,Ee.size,Ee.type,Ee.normalized,Ee.stride,Ee.offfset),re&&Ee.divisor&&re.vertexAttribDivisorANGLE(qt,Ee.divisor)):(mt.disableVertexAttribArray(qt),mt.vertexAttrib4f(qt,Ee.x,Ee.y,Ee.z,Ee.w))}Wr.currentVAO=Ft}}function st(){Si(nn).forEach(function(Ft){Ft.destroy()})}function pt(){this.id=++Qr,this.attributes=[];var Ft=d();Ft?this.vao=Ft.createVertexArrayOES():this.vao=null,nn[this.id]=this,this.buffers=[]}pt.prototype.bindAttrs=function(){for(var Ft=S(),re=this.attributes,qt=0;qt<re.length;++qt){var Ee=re[qt];Ee.buffer?(mt.enableVertexAttribArray(qt),mt.bindBuffer(as,Ee.buffer.buffer),mt.vertexAttribPointer(qt,Ee.size,Ee.type,Ee.normalized,Ee.stride,Ee.offset),Ft&&Ee.divisor&&Ft.vertexAttribDivisorANGLE(qt,Ee.divisor)):(mt.disableVertexAttribArray(qt),mt.vertexAttrib4f(qt,Ee.x,Ee.y,Ee.z,Ee.w))}for(var Ve=re.length;Ve<yr;++Ve)mt.disableVertexAttribArray(Ve)},pt.prototype.refresh=function(){var Ft=d();Ft&&(Ft.bindVertexArrayOES(this.vao),this.bindAttrs(),Wr.currentVAO=this)},pt.prototype.destroy=function(){if(this.vao){var Ft=d();this===Wr.currentVAO&&(Wr.currentVAO=null,Ft.bindVertexArrayOES(null)),Ft.deleteVertexArrayOES(this.vao),this.vao=null}nn[this.id]&&(delete nn[this.id],gr.vaoCount-=1)};function xt(){var Ft=d();Ft&&Si(nn).forEach(function(re){re.refresh()})}function Mt(Ft){var re=new pt;gr.vaoCount+=1;function qt(Ee){Tt(Array.isArray(Ee),"arguments to vertex array constructor must be an array"),Tt(Ee.length<yr,"too many attributes"),Tt(Ee.length>0,"must specify at least one attribute");var Ve={},Mr=re.attributes;Mr.length=Ee.length;for(var Qe=0;Qe<Ee.length;++Qe){var rr=Ee[Qe],tr=Mr[Qe]=new cu,Jr=rr.data||rr;if(Array.isArray(Jr)||R(Jr)||_i(Jr)){var mn;re.buffers[Qe]&&(mn=re.buffers[Qe],R(Jr)&&mn._buffer.byteLength>=Jr.byteLength?mn.subdata(Jr):(mn.destroy(),re.buffers[Qe]=null)),re.buffers[Qe]||(mn=re.buffers[Qe]=Or.create(rr,as,!1,!0)),tr.buffer=Or.getBuffer(mn),tr.size=tr.buffer.dimension|0,tr.normalized=!1,tr.type=tr.buffer.dtype,tr.offset=0,tr.stride=0,tr.divisor=0,tr.state=1,Ve[Qe]=1}else Or.getBuffer(rr)?(tr.buffer=Or.getBuffer(rr),tr.size=tr.buffer.dimension|0,tr.normalized=!1,tr.type=tr.buffer.dtype,tr.offset=0,tr.stride=0,tr.divisor=0,tr.state=1):Or.getBuffer(rr.buffer)?(tr.buffer=Or.getBuffer(rr.buffer),tr.size=(+rr.size||tr.buffer.dimension)|0,tr.normalized=!!rr.normalized||!1,"type"in rr?(Tt.parameter(rr.type,uo,"invalid buffer type"),tr.type=uo[rr.type]):tr.type=tr.buffer.dtype,tr.offset=(rr.offset||0)|0,tr.stride=(rr.stride||0)|0,tr.divisor=(rr.divisor||0)|0,tr.state=1,Tt(tr.size>=1&&tr.size<=4,"size must be between 1 and 4"),Tt(tr.offset>=0,"invalid offset"),Tt(tr.stride>=0&&tr.stride<=255,"stride must be between 0 and 255"),Tt(tr.divisor>=0,"divisor must be positive"),Tt(!tr.divisor||!!Kt.angle_instanced_arrays,"ANGLE_instanced_arrays must be enabled to use divisor")):"x"in rr?(Tt(Qe>0,"first attribute must not be a constant"),tr.x=+rr.x||0,tr.y=+rr.y||0,tr.z=+rr.z||0,tr.w=+rr.w||0,tr.state=2):Tt(!1,"invalid attribute spec for location "+Qe)}for(var un=0;un<re.buffers.length;++un)!Ve[un]&&re.buffers[un]&&(re.buffers[un].destroy(),re.buffers[un]=null);return re.refresh(),qt}return qt.destroy=function(){for(var Ee=0;Ee<re.buffers.length;++Ee)re.buffers[Ee]&&re.buffers[Ee].destroy();re.buffers.length=0,re.destroy()},qt._vao=re,qt._reglType="vao",qt(Ft)}return Wr}var ru=35632,Vf=35633,el=35718,Hu=35721;function hf(mt,Kt,Me,gr){var Or={},yr={};function mr(X,at,st,pt){this.name=X,this.id=at,this.location=st,this.info=pt}function $r(X,at){for(var st=0;st<X.length;++st)if(X[st].id===at.id){X[st].location=at.location;return}X.push(at)}function Qr(X,at,st){var pt=X===ru?Or:yr,xt=pt[at];if(!xt){var Mt=Kt.str(at);xt=mt.createShader(X),mt.shaderSource(xt,Mt),mt.compileShader(xt),Tt.shaderError(mt,xt,Mt,X,st),pt[at]=xt}return xt}var nn={},Wr=[],fn=0;function d(X,at){this.id=fn++,this.fragId=X,this.vertId=at,this.program=null,this.uniforms=[],this.attributes=[],this.refCount=1,gr.profile&&(this.stats={uniformsCount:0,attributesCount:0})}function S(X,at,st){var pt,xt,Mt=Qr(ru,X.fragId),Ft=Qr(Vf,X.vertId),re=X.program=mt.createProgram();if(mt.attachShader(re,Mt),mt.attachShader(re,Ft),st)for(pt=0;pt<st.length;++pt){var qt=st[pt];mt.bindAttribLocation(re,qt[0],qt[1])}mt.linkProgram(re),Tt.linkError(mt,re,Kt.str(X.fragId),Kt.str(X.vertId),at);var Ee=mt.getProgramParameter(re,el);gr.profile&&(X.stats.uniformsCount=Ee);var Ve=X.uniforms;for(pt=0;pt<Ee;++pt)if(xt=mt.getActiveUniform(re,pt),xt)if(xt.size>1)for(var Mr=0;Mr<xt.size;++Mr){var Qe=xt.name.replace("[0]","["+Mr+"]");$r(Ve,new mr(Qe,Kt.id(Qe),mt.getUniformLocation(re,Qe),xt))}else $r(Ve,new mr(xt.name,Kt.id(xt.name),mt.getUniformLocation(re,xt.name),xt));var rr=mt.getProgramParameter(re,Hu);gr.profile&&(X.stats.attributesCount=rr);var tr=X.attributes;for(pt=0;pt<rr;++pt)xt=mt.getActiveAttrib(re,pt),xt&&$r(tr,new mr(xt.name,Kt.id(xt.name),mt.getAttribLocation(re,xt.name),xt))}gr.profile&&(Me.getMaxUniformsCount=function(){var X=0;return Wr.forEach(function(at){at.stats.uniformsCount>X&&(X=at.stats.uniformsCount)}),X},Me.getMaxAttributesCount=function(){var X=0;return Wr.forEach(function(at){at.stats.attributesCount>X&&(X=at.stats.attributesCount)}),X});function O(){Or={},yr={};for(var X=0;X<Wr.length;++X)S(Wr[X],null,Wr[X].attributes.map(function(at){return[at.location,at.name]}))}return{clear:function(){var X=mt.deleteShader.bind(mt);Si(Or).forEach(X),Or={},Si(yr).forEach(X),yr={},Wr.forEach(function(at){mt.deleteProgram(at.program)}),Wr.length=0,nn={},Me.shaderCount=0},program:function(X,at,st,pt){Tt.command(X>=0,"missing vertex shader",st),Tt.command(at>=0,"missing fragment shader",st);var xt=nn[at];xt||(xt=nn[at]={});var Mt=xt[X];if(Mt&&(Mt.refCount++,!pt))return Mt;var Ft=new d(at,X);return Me.shaderCount++,S(Ft,st,pt),Mt||(xt[X]=Ft),Wr.push(Ft),et(Ft,{destroy:function(){if(Ft.refCount--,Ft.refCount<=0){mt.deleteProgram(Ft.program);var re=Wr.indexOf(Ft);Wr.splice(re,1),Me.shaderCount--}xt[Ft.vertId].refCount<=0&&(mt.deleteShader(yr[Ft.vertId]),delete yr[Ft.vertId],delete nn[Ft.fragId][Ft.vertId]),Object.keys(nn[Ft.fragId]).length||(mt.deleteShader(Or[Ft.fragId]),delete Or[Ft.fragId],delete nn[Ft.fragId])}})},restore:O,shader:Qr,frag:-1,vert:-1}}var df=6408,lu=5121,xs=3333,js=5126;function ju(mt,Kt,Me,gr,Or,yr,mr){function $r(Wr){var fn;Kt.next===null?(Tt(Or.preserveDrawingBuffer,'you must create a webgl context with "preserveDrawingBuffer":true in order to read pixels from the drawing buffer'),fn=lu):(Tt(Kt.next.colorAttachments[0].texture!==null,"You cannot read from a renderbuffer"),fn=Kt.next.colorAttachments[0].texture._texture.type,yr.oes_texture_float?(Tt(fn===lu||fn===js,"Reading from a framebuffer is only allowed for the types 'uint8' and 'float'"),fn===js&&Tt(mr.readFloat,"Reading 'float' values is not permitted in your browser. For a fallback, please see: https://www.npmjs.com/package/glsl-read-float")):Tt(fn===lu,"Reading from a framebuffer is only allowed for the type 'uint8'"));var d=0,S=0,O=gr.framebufferWidth,X=gr.framebufferHeight,at=null;R(Wr)?at=Wr:Wr&&(Tt.type(Wr,"object","invalid arguments to regl.read()"),d=Wr.x|0,S=Wr.y|0,Tt(d>=0&&d<gr.framebufferWidth,"invalid x offset for regl.read"),Tt(S>=0&&S<gr.framebufferHeight,"invalid y offset for regl.read"),O=(Wr.width||gr.framebufferWidth-d)|0,X=(Wr.height||gr.framebufferHeight-S)|0,at=Wr.data||null),at&&(fn===lu?Tt(at instanceof Uint8Array,"buffer must be 'Uint8Array' when reading from a framebuffer of type 'uint8'"):fn===js&&Tt(at instanceof Float32Array,"buffer must be 'Float32Array' when reading from a framebuffer of type 'float'")),Tt(O>0&&O+d<=gr.framebufferWidth,"invalid width for read pixels"),Tt(X>0&&X+S<=gr.framebufferHeight,"invalid height for read pixels"),Me();var st=O*X*4;return at||(fn===lu?at=new Uint8Array(st):fn===js&&(at=at||new Float32Array(st))),Tt.isTypedArray(at,"data buffer for regl.read() must be a typedarray"),Tt(at.byteLength>=st,"data buffer for regl.read() too small"),mt.pixelStorei(xs,4),mt.readPixels(d,S,O,X,df,fn,at),at}function Qr(Wr){var fn;return Kt.setFBO({framebuffer:Wr.framebuffer},function(){fn=$r(Wr)}),fn}function nn(Wr){return!Wr||!("framebuffer"in Wr)?$r(Wr):Qr(Wr)}return nn}function ws(mt){return Array.prototype.slice.call(mt)}function Co(mt){return ws(mt).join("")}function ks(){var mt=0,Kt=[],Me=[];function gr(fn){for(var d=0;d<Me.length;++d)if(Me[d]===fn)return Kt[d];var S="g"+mt++;return Kt.push(S),Me.push(fn),S}function Or(){var fn=[];function d(){fn.push.apply(fn,ws(arguments))}var S=[];function O(){var X="v"+mt++;return S.push(X),arguments.length>0&&(fn.push(X,"="),fn.push.apply(fn,ws(arguments)),fn.push(";")),X}return et(d,{def:O,toString:function(){return Co([S.length>0?"var "+S.join(",")+";":"",Co(fn)])}})}function yr(){var fn=Or(),d=Or(),S=fn.toString,O=d.toString;function X(at,st){d(at,st,"=",fn.def(at,st),";")}return et(function(){fn.apply(fn,ws(arguments))},{def:fn.def,entry:fn,exit:d,save:X,set:function(at,st,pt){X(at,st),fn(at,st,"=",pt,";")},toString:function(){return S()+O()}})}function mr(){var fn=Co(arguments),d=yr(),S=yr(),O=d.toString,X=S.toString;return et(d,{then:function(){return d.apply(d,ws(arguments)),this},else:function(){return S.apply(S,ws(arguments)),this},toString:function(){var at=X();return at&&(at="else{"+at+"}"),Co(["if(",fn,"){",O(),"}",at])}})}var $r=Or(),Qr={};function nn(fn,d){var S=[];function O(){var xt="a"+S.length;return S.push(xt),xt}d=d||0;for(var X=0;X<d;++X)O();var at=yr(),st=at.toString,pt=Qr[fn]=et(at,{arg:O,toString:function(){return Co(["function(",S.join(),"){",st(),"}"])}});return pt}function Wr(){var fn=['"use strict";',$r,"return {"];Object.keys(Qr).forEach(function(O){fn.push('"',O,'":',Qr[O].toString(),",")}),fn.push("}");var d=Co(fn).replace(/;/g,`;
`).replace(/}/g,`}
`).replace(/{/g,`{
`),S=Function.apply(null,Kt.concat(d));return S.apply(null,Me)}return{global:$r,link:gr,block:Or,proc:nn,scope:yr,cond:mr,compile:Wr}}var vf="xyzw".split(""),Gl=5121,pf=1,rl=2,nl=0,al=1,il=2,Mc=3,Hf=4,zl=5,Ul=6,ol="dither",gf="blend.enable",sl="blend.color",yf="blend.equation",ul="blend.func",jf="depth.enable",is="depth.func",fl="depth.range",Zf="depth.mask",Ac="colorMask",Re="cull.enable",Iu="cull.face",zs="frontFace",qf="lineWidth",cl="polygonOffset.enable",ll="polygonOffset.offset",Us="sample.alpha",hl="sample.enable",ku="sample.coverage",mf="stencil.enable",Cc="stencil.mask",Tc="stencil.func",mo="stencil.opFront",Lu="stencil.opBack",Ic="scissor.enable",$f="scissor.box",hu="viewport",bf="profile",Nu="framebuffer",du="vert",Zu="frag",xf="elements",wf="primitive",Ou="count",Kf="offset",kc="instances",Ef="vao",dl="Width",Qf="Height",_f=Nu+dl,Es=Nu+Qf,Jf=hu+dl,Xl=hu+Qf,Lc="drawingBuffer",vl=Lc+dl,Sf=Lc+Qf,Yl=[ul,yf,Tc,mo,Lu,ku,hu,$f,ll],qu=34962,Wl=34963,pl=35632,gh=35633,Vl=3553,gl=34067,yl=2884,Hl=3042,jl=3024,Zl=2960,ml=2929,bl=3089,ql=32823,$l=32926,Nc=32928,Xs=5126,Oc=35664,Dc=35665,tc=35666,xl=5124,Pc=35667,ec=35668,$u=35669,wl=35670,Rc=35671,Bc=35672,Fc=35673,rc=35674,nc=35675,Mf=35676,ac=35678,vu=35680,Kl=4,pu=1028,Ku=1029,Gc=2304,zc=2305,yh=32775,Ql=32776,Af=519,nu=7680,Uc=0,Jl=1,El=32774,mh=513,_l=36160,bh=36064,Ko={0:0,1:1,zero:0,one:1,"src color":768,"one minus src color":769,"src alpha":770,"one minus src alpha":771,"dst color":774,"one minus dst color":775,"dst alpha":772,"one minus dst alpha":773,"constant color":32769,"one minus constant color":32770,"constant alpha":32771,"one minus constant alpha":32772,"src alpha saturate":776},th=["constant color, constant alpha","one minus constant color, constant alpha","constant color, one minus constant alpha","one minus constant color, one minus constant alpha","constant alpha, constant color","constant alpha, one minus constant color","one minus constant alpha, constant color","one minus constant alpha, one minus constant color"],Cf={never:512,less:513,"<":513,equal:514,"=":514,"==":514,"===":514,lequal:515,"<=":515,greater:516,">":516,notequal:517,"!=":517,"!==":517,gequal:518,">=":518,always:519},gu={0:0,zero:0,keep:7680,replace:7681,increment:7682,decrement:7683,"increment wrap":34055,"decrement wrap":34056,invert:5386},eh={frag:pl,vert:gh},Sl={cw:Gc,ccw:zc};function Xc(mt){return Array.isArray(mt)||R(mt)||_i(mt)}function rh(mt){return mt.sort(function(Kt,Me){return Kt===hu?-1:Me===hu?1:Kt<Me?-1:1})}function os(mt,Kt,Me,gr){this.thisDep=mt,this.contextDep=Kt,this.propDep=Me,this.append=gr}function yu(mt){return mt&&!(mt.thisDep||mt.contextDep||mt.propDep)}function eo(mt){return new os(!1,!1,!1,mt)}function Go(mt,Kt){var Me=mt.type;if(Me===nl){var gr=mt.data.length;return new os(!0,gr>=1,gr>=2,Kt)}else if(Me===Hf){var Or=mt.data;return new os(Or.thisDep,Or.contextDep,Or.propDep,Kt)}else{if(Me===zl)return new os(!1,!1,!1,Kt);if(Me===Ul){for(var yr=!1,mr=!1,$r=!1,Qr=0;Qr<mt.data.length;++Qr){var nn=mt.data[Qr];if(nn.type===al)$r=!0;else if(nn.type===il)mr=!0;else if(nn.type===Mc)yr=!0;else if(nn.type===nl){yr=!0;var Wr=nn.data;Wr>=1&&(mr=!0),Wr>=2&&($r=!0)}else nn.type===Hf&&(yr=yr||nn.data.thisDep,mr=mr||nn.data.contextDep,$r=$r||nn.data.propDep)}return new os(yr,mr,$r,Kt)}else return new os(Me===Mc,Me===il,Me===al,Kt)}}var Ml=new os(!1,!1,!1,function(){});function nh(mt,Kt,Me,gr,Or,yr,mr,$r,Qr,nn,Wr,fn,d,S,O){var X=nn.Record,at={add:32774,subtract:32778,"reverse subtract":32779};Me.ext_blend_minmax&&(at.min=yh,at.max=Ql);var st=Me.angle_instanced_arrays,pt=Me.webgl_draw_buffers,xt={dirty:!0,profile:O.profile},Mt={},Ft=[],re={},qt={};function Ee(ve){return ve.replace(".","_")}function Ve(ve,jt,Fe){var ir=Ee(ve);Ft.push(ve),Mt[ir]=xt[ir]=!!Fe,re[ir]=jt}function Mr(ve,jt,Fe){var ir=Ee(ve);Ft.push(ve),Array.isArray(Fe)?(xt[ir]=Fe.slice(),Mt[ir]=Fe.slice()):xt[ir]=Mt[ir]=Fe,qt[ir]=jt}Ve(ol,jl),Ve(gf,Hl),Mr(sl,"blendColor",[0,0,0,0]),Mr(yf,"blendEquationSeparate",[El,El]),Mr(ul,"blendFuncSeparate",[Jl,Uc,Jl,Uc]),Ve(jf,ml,!0),Mr(is,"depthFunc",mh),Mr(fl,"depthRange",[0,1]),Mr(Zf,"depthMask",!0),Mr(Ac,Ac,[!0,!0,!0,!0]),Ve(Re,yl),Mr(Iu,"cullFace",Ku),Mr(zs,zs,zc),Mr(qf,qf,1),Ve(cl,ql),Mr(ll,"polygonOffset",[0,0]),Ve(Us,$l),Ve(hl,Nc),Mr(ku,"sampleCoverage",[1,!1]),Ve(mf,Zl),Mr(Cc,"stencilMask",-1),Mr(Tc,"stencilFunc",[Af,0,-1]),Mr(mo,"stencilOpSeparate",[pu,nu,nu,nu]),Mr(Lu,"stencilOpSeparate",[Ku,nu,nu,nu]),Ve(Ic,bl),Mr($f,"scissor",[0,0,mt.drawingBufferWidth,mt.drawingBufferHeight]),Mr(hu,hu,[0,0,mt.drawingBufferWidth,mt.drawingBufferHeight]);var Qe={gl:mt,context:d,strings:Kt,next:Mt,current:xt,draw:fn,elements:yr,buffer:Or,shader:Wr,attributes:nn.state,vao:nn,uniforms:Qr,framebuffer:$r,extensions:Me,timer:S,isBufferArgs:Xc},rr={primTypes:co,compareFuncs:Cf,blendFuncs:Ko,blendEquations:at,stencilOps:gu,glTypes:uo,orientationType:Sl};Tt.optional(function(){Qe.isArrayLike=Pa}),pt&&(rr.backBuffer=[Ku],rr.drawBuffer=zn(gr.maxDrawbuffers,function(ve){return ve===0?[0]:zn(ve,function(jt){return bh+jt})}));var tr=0;function Jr(){var ve=ks(),jt=ve.link,Fe=ve.global;ve.id=tr++,ve.batchId="0";var ir=jt(Qe),ur=ve.shared={props:"a0"};Object.keys(Qe).forEach(function(Oe){ur[Oe]=Fe.def(ir,".",Oe)}),Tt.optional(function(){ve.CHECK=jt(Tt),ve.commandStr=Tt.guessCommand(),ve.command=jt(ve.commandStr),ve.assert=function(Oe,fe,Je){Oe("if(!(",fe,"))",this.CHECK,".commandRaise(",jt(Je),",",this.command,");")},rr.invalidBlendCombinations=th});var ze=ve.next={},Ge=ve.current={};Object.keys(qt).forEach(function(Oe){Array.isArray(xt[Oe])&&(ze[Oe]=Fe.def(ur.next,".",Oe),Ge[Oe]=Fe.def(ur.current,".",Oe))});var je=ve.constants={};Object.keys(rr).forEach(function(Oe){je[Oe]=Fe.def(JSON.stringify(rr[Oe]))}),ve.invoke=function(Oe,fe){switch(fe.type){case nl:var Je=["this",ur.context,ur.props,ve.batchId];return Oe.def(jt(fe.data),".call(",Je.slice(0,Math.max(fe.data.length+1,4)),")");case al:return Oe.def(ur.props,fe.data);case il:return Oe.def(ur.context,fe.data);case Mc:return Oe.def("this",fe.data);case Hf:return fe.data.append(ve,Oe),fe.data.ref;case zl:return fe.data.toString();case Ul:return fe.data.map(function(hr){return ve.invoke(Oe,hr)})}},ve.attribCache={};var de={};return ve.scopeAttrib=function(Oe){var fe=Kt.id(Oe);if(fe in de)return de[fe];var Je=nn.scope[fe];Je||(Je=nn.scope[fe]=new X);var hr=de[fe]=jt(Je);return hr},ve}function mn(ve){var jt=ve.static,Fe=ve.dynamic,ir;if(bf in jt){var ur=!!jt[bf];ir=eo(function(Ge,je){return ur}),ir.enable=ur}else if(bf in Fe){var ze=Fe[bf];ir=Go(ze,function(Ge,je){return Ge.invoke(je,ze)})}return ir}function un(ve,jt){var Fe=ve.static,ir=ve.dynamic;if(Nu in Fe){var ur=Fe[Nu];return ur?(ur=$r.getFramebuffer(ur),Tt.command(ur,"invalid framebuffer object"),eo(function(Ge,je){var de=Ge.link(ur),Oe=Ge.shared;je.set(Oe.framebuffer,".next",de);var fe=Oe.context;return je.set(fe,"."+_f,de+".width"),je.set(fe,"."+Es,de+".height"),de})):eo(function(Ge,je){var de=Ge.shared;je.set(de.framebuffer,".next","null");var Oe=de.context;return je.set(Oe,"."+_f,Oe+"."+vl),je.set(Oe,"."+Es,Oe+"."+Sf),"null"})}else if(Nu in ir){var ze=ir[Nu];return Go(ze,function(Ge,je){var de=Ge.invoke(je,ze),Oe=Ge.shared,fe=Oe.framebuffer,Je=je.def(fe,".getFramebuffer(",de,")");Tt.optional(function(){Ge.assert(je,"!"+de+"||"+Je,"invalid framebuffer object")}),je.set(fe,".next",Je);var hr=Oe.context;return je.set(hr,"."+_f,Je+"?"+Je+".width:"+hr+"."+vl),je.set(hr,"."+Es,Je+"?"+Je+".height:"+hr+"."+Sf),Je})}else return null}function Xn(ve,jt,Fe){var ir=ve.static,ur=ve.dynamic;function ze(de){if(de in ir){var Oe=ir[de];Tt.commandType(Oe,"object","invalid "+de,Fe.commandStr);var fe=!0,Je=Oe.x|0,hr=Oe.y|0,Nr,Fr;return"width"in Oe?(Nr=Oe.width|0,Tt.command(Nr>=0,"invalid "+de,Fe.commandStr)):fe=!1,"height"in Oe?(Fr=Oe.height|0,Tt.command(Fr>=0,"invalid "+de,Fe.commandStr)):fe=!1,new os(!fe&&jt&&jt.thisDep,!fe&&jt&&jt.contextDep,!fe&&jt&&jt.propDep,function(Zn,Aa){var Bn=Zn.shared.context,ia=Nr;"width"in Oe||(ia=Aa.def(Bn,".",_f,"-",Je));var wa=Fr;return"height"in Oe||(wa=Aa.def(Bn,".",Es,"-",hr)),[Je,hr,ia,wa]})}else if(de in ur){var Ar=ur[de],on=Go(Ar,function(Zn,Aa){var Bn=Zn.invoke(Aa,Ar);Tt.optional(function(){Zn.assert(Aa,Bn+"&&typeof "+Bn+'==="object"',"invalid "+de)});var ia=Zn.shared.context,wa=Aa.def(Bn,".x|0"),za=Aa.def(Bn,".y|0"),Wi=Aa.def('"width" in ',Bn,"?",Bn,".width|0:","(",ia,".",_f,"-",wa,")"),Ls=Aa.def('"height" in ',Bn,"?",Bn,".height|0:","(",ia,".",Es,"-",za,")");return Tt.optional(function(){Zn.assert(Aa,Wi+">=0&&"+Ls+">=0","invalid "+de)}),[wa,za,Wi,Ls]});return jt&&(on.thisDep=on.thisDep||jt.thisDep,on.contextDep=on.contextDep||jt.contextDep,on.propDep=on.propDep||jt.propDep),on}else return jt?new os(jt.thisDep,jt.contextDep,jt.propDep,function(Zn,Aa){var Bn=Zn.shared.context;return[0,0,Aa.def(Bn,".",_f),Aa.def(Bn,".",Es)]}):null}var Ge=ze(hu);if(Ge){var je=Ge;Ge=new os(Ge.thisDep,Ge.contextDep,Ge.propDep,function(de,Oe){var fe=je.append(de,Oe),Je=de.shared.context;return Oe.set(Je,"."+Jf,fe[2]),Oe.set(Je,"."+Xl,fe[3]),fe})}return{viewport:Ge,scissor_box:ze($f)}}function Rn(ve,jt){var Fe=ve.static,ir=typeof Fe[Zu]=="string"&&typeof Fe[du]=="string";if(ir){if(Object.keys(jt.dynamic).length>0)return null;var ur=jt.static,ze=Object.keys(ur);if(ze.length>0&&typeof ur[ze[0]]=="number"){for(var Ge=[],je=0;je<ze.length;++je)Tt(typeof ur[ze[je]]=="number","must specify all vertex attribute locations when using vaos"),Ge.push([ur[ze[je]]|0,ze[je]]);return Ge}}return null}function Jn(ve,jt,Fe){var ir=ve.static,ur=ve.dynamic;function ze(fe){if(fe in ir){var Je=Kt.id(ir[fe]);Tt.optional(function(){Wr.shader(eh[fe],Je,Tt.guessCommand())});var hr=eo(function(){return Je});return hr.id=Je,hr}else if(fe in ur){var Nr=ur[fe];return Go(Nr,function(Fr,Ar){var on=Fr.invoke(Ar,Nr),Zn=Ar.def(Fr.shared.strings,".id(",on,")");return Tt.optional(function(){Ar(Fr.shared.shader,".shader(",eh[fe],",",Zn,",",Fr.command,");")}),Zn})}return null}var Ge=ze(Zu),je=ze(du),de=null,Oe;return yu(Ge)&&yu(je)?(de=Wr.program(je.id,Ge.id,null,Fe),Oe=eo(function(fe,Je){return fe.link(de)})):Oe=new os(Ge&&Ge.thisDep||je&&je.thisDep,Ge&&Ge.contextDep||je&&je.contextDep,Ge&&Ge.propDep||je&&je.propDep,function(fe,Je){var hr=fe.shared.shader,Nr;Ge?Nr=Ge.append(fe,Je):Nr=Je.def(hr,".",Zu);var Fr;je?Fr=je.append(fe,Je):Fr=Je.def(hr,".",du);var Ar=hr+".program("+Fr+","+Nr;return Tt.optional(function(){Ar+=","+fe.command}),Je.def(Ar+")")}),{frag:Ge,vert:je,progVar:Oe,program:de}}function va(ve,jt){var Fe=ve.static,ir=ve.dynamic;function ur(){if(xf in Fe){var fe=Fe[xf];Xc(fe)?fe=yr.getElements(yr.create(fe,!0)):fe&&(fe=yr.getElements(fe),Tt.command(fe,"invalid elements",jt.commandStr));var Je=eo(function(Nr,Fr){if(fe){var Ar=Nr.link(fe);return Nr.ELEMENTS=Ar,Ar}return Nr.ELEMENTS=null,null});return Je.value=fe,Je}else if(xf in ir){var hr=ir[xf];return Go(hr,function(Nr,Fr){var Ar=Nr.shared,on=Ar.isBufferArgs,Zn=Ar.elements,Aa=Nr.invoke(Fr,hr),Bn=Fr.def("null"),ia=Fr.def(on,"(",Aa,")"),wa=Nr.cond(ia).then(Bn,"=",Zn,".createStream(",Aa,");").else(Bn,"=",Zn,".getElements(",Aa,");");return Tt.optional(function(){Nr.assert(wa.else,"!"+Aa+"||"+Bn,"invalid elements")}),Fr.entry(wa),Fr.exit(Nr.cond(ia).then(Zn,".destroyStream(",Bn,");")),Nr.ELEMENTS=Bn,Bn})}return null}var ze=ur();function Ge(){if(wf in Fe){var fe=Fe[wf];return Tt.commandParameter(fe,co,"invalid primitve",jt.commandStr),eo(function(hr,Nr){return co[fe]})}else if(wf in ir){var Je=ir[wf];return Go(Je,function(hr,Nr){var Fr=hr.constants.primTypes,Ar=hr.invoke(Nr,Je);return Tt.optional(function(){hr.assert(Nr,Ar+" in "+Fr,"invalid primitive, must be one of "+Object.keys(co))}),Nr.def(Fr,"[",Ar,"]")})}else if(ze)return yu(ze)?ze.value?eo(function(hr,Nr){return Nr.def(hr.ELEMENTS,".primType")}):eo(function(){return Kl}):new os(ze.thisDep,ze.contextDep,ze.propDep,function(hr,Nr){var Fr=hr.ELEMENTS;return Nr.def(Fr,"?",Fr,".primType:",Kl)});return null}function je(fe,Je){if(fe in Fe){var hr=Fe[fe]|0;return Tt.command(!Je||hr>=0,"invalid "+fe,jt.commandStr),eo(function(Fr,Ar){return Je&&(Fr.OFFSET=hr),hr})}else if(fe in ir){var Nr=ir[fe];return Go(Nr,function(Fr,Ar){var on=Fr.invoke(Ar,Nr);return Je&&(Fr.OFFSET=on,Tt.optional(function(){Fr.assert(Ar,on+">=0","invalid "+fe)})),on})}else if(Je&&ze)return eo(function(Fr,Ar){return Fr.OFFSET="0",0});return null}var de=je(Kf,!0);function Oe(){if(Ou in Fe){var fe=Fe[Ou]|0;return Tt.command(typeof fe=="number"&&fe>=0,"invalid vertex count",jt.commandStr),eo(function(){return fe})}else if(Ou in ir){var Je=ir[Ou];return Go(Je,function(Fr,Ar){var on=Fr.invoke(Ar,Je);return Tt.optional(function(){Fr.assert(Ar,"typeof "+on+'==="number"&&'+on+">=0&&"+on+"===("+on+"|0)","invalid vertex count")}),on})}else if(ze)if(yu(ze)){if(ze)return de?new os(de.thisDep,de.contextDep,de.propDep,function(Fr,Ar){var on=Ar.def(Fr.ELEMENTS,".vertCount-",Fr.OFFSET);return Tt.optional(function(){Fr.assert(Ar,on+">=0","invalid vertex offset/element buffer too small")}),on}):eo(function(Fr,Ar){return Ar.def(Fr.ELEMENTS,".vertCount")});var hr=eo(function(){return-1});return Tt.optional(function(){hr.MISSING=!0}),hr}else{var Nr=new os(ze.thisDep||de.thisDep,ze.contextDep||de.contextDep,ze.propDep||de.propDep,function(Fr,Ar){var on=Fr.ELEMENTS;return Fr.OFFSET?Ar.def(on,"?",on,".vertCount-",Fr.OFFSET,":-1"):Ar.def(on,"?",on,".vertCount:-1")});return Tt.optional(function(){Nr.DYNAMIC=!0}),Nr}return null}return{elements:ze,primitive:Ge(),count:Oe(),instances:je(kc,!1),offset:de}}function ua(ve,jt){var Fe=ve.static,ir=ve.dynamic,ur={};return Ft.forEach(function(ze){var Ge=Ee(ze);function je(de,Oe){if(ze in Fe){var fe=de(Fe[ze]);ur[Ge]=eo(function(){return fe})}else if(ze in ir){var Je=ir[ze];ur[Ge]=Go(Je,function(hr,Nr){return Oe(hr,Nr,hr.invoke(Nr,Je))})}}switch(ze){case Re:case gf:case ol:case mf:case jf:case Ic:case cl:case Us:case hl:case Zf:return je(function(de){return Tt.commandType(de,"boolean",ze,jt.commandStr),de},function(de,Oe,fe){return Tt.optional(function(){de.assert(Oe,"typeof "+fe+'==="boolean"',"invalid flag "+ze,de.commandStr)}),fe});case is:return je(function(de){return Tt.commandParameter(de,Cf,"invalid "+ze,jt.commandStr),Cf[de]},function(de,Oe,fe){var Je=de.constants.compareFuncs;return Tt.optional(function(){de.assert(Oe,fe+" in "+Je,"invalid "+ze+", must be one of "+Object.keys(Cf))}),Oe.def(Je,"[",fe,"]")});case fl:return je(function(de){return Tt.command(Pa(de)&&de.length===2&&typeof de[0]=="number"&&typeof de[1]=="number"&&de[0]<=de[1],"depth range is 2d array",jt.commandStr),de},function(de,Oe,fe){Tt.optional(function(){de.assert(Oe,de.shared.isArrayLike+"("+fe+")&&"+fe+".length===2&&typeof "+fe+'[0]==="number"&&typeof '+fe+'[1]==="number"&&'+fe+"[0]<="+fe+"[1]","depth range must be a 2d array")});var Je=Oe.def("+",fe,"[0]"),hr=Oe.def("+",fe,"[1]");return[Je,hr]});case ul:return je(function(de){Tt.commandType(de,"object","blend.func",jt.commandStr);var Oe="srcRGB"in de?de.srcRGB:de.src,fe="srcAlpha"in de?de.srcAlpha:de.src,Je="dstRGB"in de?de.dstRGB:de.dst,hr="dstAlpha"in de?de.dstAlpha:de.dst;return Tt.commandParameter(Oe,Ko,Ge+".srcRGB",jt.commandStr),Tt.commandParameter(fe,Ko,Ge+".srcAlpha",jt.commandStr),Tt.commandParameter(Je,Ko,Ge+".dstRGB",jt.commandStr),Tt.commandParameter(hr,Ko,Ge+".dstAlpha",jt.commandStr),Tt.command(th.indexOf(Oe+", "+Je)===-1,"unallowed blending combination (srcRGB, dstRGB) = ("+Oe+", "+Je+")",jt.commandStr),[Ko[Oe],Ko[Je],Ko[fe],Ko[hr]]},function(de,Oe,fe){var Je=de.constants.blendFuncs;Tt.optional(function(){de.assert(Oe,fe+"&&typeof "+fe+'==="object"',"invalid blend func, must be an object")});function hr(Bn,ia){var wa=Oe.def('"',Bn,ia,'" in ',fe,"?",fe,".",Bn,ia,":",fe,".",Bn);return Tt.optional(function(){de.assert(Oe,wa+" in "+Je,"invalid "+ze+"."+Bn+ia+", must be one of "+Object.keys(Ko))}),wa}var Nr=hr("src","RGB"),Fr=hr("dst","RGB");Tt.optional(function(){var Bn=de.constants.invalidBlendCombinations;de.assert(Oe,Bn+".indexOf("+Nr+'+", "+'+Fr+") === -1 ","unallowed blending combination for (srcRGB, dstRGB)")});var Ar=Oe.def(Je,"[",Nr,"]"),on=Oe.def(Je,"[",hr("src","Alpha"),"]"),Zn=Oe.def(Je,"[",Fr,"]"),Aa=Oe.def(Je,"[",hr("dst","Alpha"),"]");return[Ar,Zn,on,Aa]});case yf:return je(function(de){if(typeof de=="string")return Tt.commandParameter(de,at,"invalid "+ze,jt.commandStr),[at[de],at[de]];if(typeof de=="object")return Tt.commandParameter(de.rgb,at,ze+".rgb",jt.commandStr),Tt.commandParameter(de.alpha,at,ze+".alpha",jt.commandStr),[at[de.rgb],at[de.alpha]];Tt.commandRaise("invalid blend.equation",jt.commandStr)},function(de,Oe,fe){var Je=de.constants.blendEquations,hr=Oe.def(),Nr=Oe.def(),Fr=de.cond("typeof ",fe,'==="string"');return Tt.optional(function(){function Ar(on,Zn,Aa){de.assert(on,Aa+" in "+Je,"invalid "+Zn+", must be one of "+Object.keys(at))}Ar(Fr.then,ze,fe),de.assert(Fr.else,fe+"&&typeof "+fe+'==="object"',"invalid "+ze),Ar(Fr.else,ze+".rgb",fe+".rgb"),Ar(Fr.else,ze+".alpha",fe+".alpha")}),Fr.then(hr,"=",Nr,"=",Je,"[",fe,"];"),Fr.else(hr,"=",Je,"[",fe,".rgb];",Nr,"=",Je,"[",fe,".alpha];"),Oe(Fr),[hr,Nr]});case sl:return je(function(de){return Tt.command(Pa(de)&&de.length===4,"blend.color must be a 4d array",jt.commandStr),zn(4,function(Oe){return+de[Oe]})},function(de,Oe,fe){return Tt.optional(function(){de.assert(Oe,de.shared.isArrayLike+"("+fe+")&&"+fe+".length===4","blend.color must be a 4d array")}),zn(4,function(Je){return Oe.def("+",fe,"[",Je,"]")})});case Cc:return je(function(de){return Tt.commandType(de,"number",Ge,jt.commandStr),de|0},function(de,Oe,fe){return Tt.optional(function(){de.assert(Oe,"typeof "+fe+'==="number"',"invalid stencil.mask")}),Oe.def(fe,"|0")});case Tc:return je(function(de){Tt.commandType(de,"object",Ge,jt.commandStr);var Oe=de.cmp||"keep",fe=de.ref||0,Je="mask"in de?de.mask:-1;return Tt.commandParameter(Oe,Cf,ze+".cmp",jt.commandStr),Tt.commandType(fe,"number",ze+".ref",jt.commandStr),Tt.commandType(Je,"number",ze+".mask",jt.commandStr),[Cf[Oe],fe,Je]},function(de,Oe,fe){var Je=de.constants.compareFuncs;Tt.optional(function(){function Ar(){de.assert(Oe,Array.prototype.join.call(arguments,""),"invalid stencil.func")}Ar(fe+"&&typeof ",fe,'==="object"'),Ar('!("cmp" in ',fe,")||(",fe,".cmp in ",Je,")")});var hr=Oe.def('"cmp" in ',fe,"?",Je,"[",fe,".cmp]",":",nu),Nr=Oe.def(fe,".ref|0"),Fr=Oe.def('"mask" in ',fe,"?",fe,".mask|0:-1");return[hr,Nr,Fr]});case mo:case Lu:return je(function(de){Tt.commandType(de,"object",Ge,jt.commandStr);var Oe=de.fail||"keep",fe=de.zfail||"keep",Je=de.zpass||"keep";return Tt.commandParameter(Oe,gu,ze+".fail",jt.commandStr),Tt.commandParameter(fe,gu,ze+".zfail",jt.commandStr),Tt.commandParameter(Je,gu,ze+".zpass",jt.commandStr),[ze===Lu?Ku:pu,gu[Oe],gu[fe],gu[Je]]},function(de,Oe,fe){var Je=de.constants.stencilOps;Tt.optional(function(){de.assert(Oe,fe+"&&typeof "+fe+'==="object"',"invalid "+ze)});function hr(Nr){return Tt.optional(function(){de.assert(Oe,'!("'+Nr+'" in '+fe+")||("+fe+"."+Nr+" in "+Je+")","invalid "+ze+"."+Nr+", must be one of "+Object.keys(gu))}),Oe.def('"',Nr,'" in ',fe,"?",Je,"[",fe,".",Nr,"]:",nu)}return[ze===Lu?Ku:pu,hr("fail"),hr("zfail"),hr("zpass")]});case ll:return je(function(de){Tt.commandType(de,"object",Ge,jt.commandStr);var Oe=de.factor|0,fe=de.units|0;return Tt.commandType(Oe,"number",Ge+".factor",jt.commandStr),Tt.commandType(fe,"number",Ge+".units",jt.commandStr),[Oe,fe]},function(de,Oe,fe){Tt.optional(function(){de.assert(Oe,fe+"&&typeof "+fe+'==="object"',"invalid "+ze)});var Je=Oe.def(fe,".factor|0"),hr=Oe.def(fe,".units|0");return[Je,hr]});case Iu:return je(function(de){var Oe=0;return de==="front"?Oe=pu:de==="back"&&(Oe=Ku),Tt.command(!!Oe,Ge,jt.commandStr),Oe},function(de,Oe,fe){return Tt.optional(function(){de.assert(Oe,fe+'==="front"||'+fe+'==="back"',"invalid cull.face")}),Oe.def(fe,'==="front"?',pu,":",Ku)});case qf:return je(function(de){return Tt.command(typeof de=="number"&&de>=gr.lineWidthDims[0]&&de<=gr.lineWidthDims[1],"invalid line width, must be a positive number between "+gr.lineWidthDims[0]+" and "+gr.lineWidthDims[1],jt.commandStr),de},function(de,Oe,fe){return Tt.optional(function(){de.assert(Oe,"typeof "+fe+'==="number"&&'+fe+">="+gr.lineWidthDims[0]+"&&"+fe+"<="+gr.lineWidthDims[1],"invalid line width")}),fe});case zs:return je(function(de){return Tt.commandParameter(de,Sl,Ge,jt.commandStr),Sl[de]},function(de,Oe,fe){return Tt.optional(function(){de.assert(Oe,fe+'==="cw"||'+fe+'==="ccw"',"invalid frontFace, must be one of cw,ccw")}),Oe.def(fe+'==="cw"?'+Gc+":"+zc)});case Ac:return je(function(de){return Tt.command(Pa(de)&&de.length===4,"color.mask must be length 4 array",jt.commandStr),de.map(function(Oe){return!!Oe})},function(de,Oe,fe){return Tt.optional(function(){de.assert(Oe,de.shared.isArrayLike+"("+fe+")&&"+fe+".length===4","invalid color.mask")}),zn(4,function(Je){return"!!"+fe+"["+Je+"]"})});case ku:return je(function(de){Tt.command(typeof de=="object"&&de,Ge,jt.commandStr);var Oe="value"in de?de.value:1,fe=!!de.invert;return Tt.command(typeof Oe=="number"&&Oe>=0&&Oe<=1,"sample.coverage.value must be a number between 0 and 1",jt.commandStr),[Oe,fe]},function(de,Oe,fe){Tt.optional(function(){de.assert(Oe,fe+"&&typeof "+fe+'==="object"',"invalid sample.coverage")});var Je=Oe.def('"value" in ',fe,"?+",fe,".value:1"),hr=Oe.def("!!",fe,".invert");return[Je,hr]})}}),ur}function mi(ve,jt){var Fe=ve.static,ir=ve.dynamic,ur={};return Object.keys(Fe).forEach(function(ze){var Ge=Fe[ze],je;if(typeof Ge=="number"||typeof Ge=="boolean")je=eo(function(){return Ge});else if(typeof Ge=="function"){var de=Ge._reglType;de==="texture2d"||de==="textureCube"?je=eo(function(Oe){return Oe.link(Ge)}):de==="framebuffer"||de==="framebufferCube"?(Tt.command(Ge.color.length>0,'missing color attachment for framebuffer sent to uniform "'+ze+'"',jt.commandStr),je=eo(function(Oe){return Oe.link(Ge.color[0])})):Tt.commandRaise('invalid data for uniform "'+ze+'"',jt.commandStr)}else Pa(Ge)?je=eo(function(Oe){var fe=Oe.global.def("[",zn(Ge.length,function(Je){return Tt.command(typeof Ge[Je]=="number"||typeof Ge[Je]=="boolean","invalid uniform "+ze,Oe.commandStr),Ge[Je]}),"]");return fe}):Tt.commandRaise('invalid or missing data for uniform "'+ze+'"',jt.commandStr);je.value=Ge,ur[ze]=je}),Object.keys(ir).forEach(function(ze){var Ge=ir[ze];ur[ze]=Go(Ge,function(je,de){return je.invoke(de,Ge)})}),ur}function ga(ve,jt){var Fe=ve.static,ir=ve.dynamic,ur={};return Object.keys(Fe).forEach(function(ze){var Ge=Fe[ze],je=Kt.id(ze),de=new X;if(Xc(Ge))de.state=pf,de.buffer=Or.getBuffer(Or.create(Ge,qu,!1,!0)),de.type=0;else{var Oe=Or.getBuffer(Ge);if(Oe)de.state=pf,de.buffer=Oe,de.type=0;else if(Tt.command(typeof Ge=="object"&&Ge,"invalid data for attribute "+ze,jt.commandStr),"constant"in Ge){var fe=Ge.constant;de.buffer="null",de.state=rl,typeof fe=="number"?de.x=fe:(Tt.command(Pa(fe)&&fe.length>0&&fe.length<=4,"invalid constant for attribute "+ze,jt.commandStr),vf.forEach(function(Zn,Aa){Aa<fe.length&&(de[Zn]=fe[Aa])}))}else{Xc(Ge.buffer)?Oe=Or.getBuffer(Or.create(Ge.buffer,qu,!1,!0)):Oe=Or.getBuffer(Ge.buffer),Tt.command(!!Oe,'missing buffer for attribute "'+ze+'"',jt.commandStr);var Je=Ge.offset|0;Tt.command(Je>=0,'invalid offset for attribute "'+ze+'"',jt.commandStr);var hr=Ge.stride|0;Tt.command(hr>=0&&hr<256,'invalid stride for attribute "'+ze+'", must be integer betweeen [0, 255]',jt.commandStr);var Nr=Ge.size|0;Tt.command(!("size"in Ge)||Nr>0&&Nr<=4,'invalid size for attribute "'+ze+'", must be 1,2,3,4',jt.commandStr);var Fr=!!Ge.normalized,Ar=0;"type"in Ge&&(Tt.commandParameter(Ge.type,uo,"invalid type for attribute "+ze,jt.commandStr),Ar=uo[Ge.type]);var on=Ge.divisor|0;"divisor"in Ge&&(Tt.command(on===0||st,'cannot specify divisor for attribute "'+ze+'", instancing not supported',jt.commandStr),Tt.command(on>=0,'invalid divisor for attribute "'+ze+'"',jt.commandStr)),Tt.optional(function(){var Zn=jt.commandStr,Aa=["buffer","offset","divisor","normalized","type","size","stride"];Object.keys(Ge).forEach(function(Bn){Tt.command(Aa.indexOf(Bn)>=0,'unknown parameter "'+Bn+'" for attribute pointer "'+ze+'" (valid parameters are '+Aa+")",Zn)})}),de.buffer=Oe,de.state=pf,de.size=Nr,de.normalized=Fr,de.type=Ar||Oe.dtype,de.offset=Je,de.stride=hr,de.divisor=on}}ur[ze]=eo(function(Zn,Aa){var Bn=Zn.attribCache;if(je in Bn)return Bn[je];var ia={isStream:!1};return Object.keys(de).forEach(function(wa){ia[wa]=de[wa]}),de.buffer&&(ia.buffer=Zn.link(de.buffer),ia.type=ia.type||ia.buffer+".dtype"),Bn[je]=ia,ia})}),Object.keys(ir).forEach(function(ze){var Ge=ir[ze];function je(de,Oe){var fe=de.invoke(Oe,Ge),Je=de.shared,hr=de.constants,Nr=Je.isBufferArgs,Fr=Je.buffer;Tt.optional(function(){de.assert(Oe,fe+"&&(typeof "+fe+'==="object"||typeof '+fe+'==="function")&&('+Nr+"("+fe+")||"+Fr+".getBuffer("+fe+")||"+Fr+".getBuffer("+fe+".buffer)||"+Nr+"("+fe+'.buffer)||("constant" in '+fe+"&&(typeof "+fe+'.constant==="number"||'+Je.isArrayLike+"("+fe+".constant))))",'invalid dynamic attribute "'+ze+'"')});var Ar={isStream:Oe.def(!1)},on=new X;on.state=pf,Object.keys(on).forEach(function(ia){Ar[ia]=Oe.def(""+on[ia])});var Zn=Ar.buffer,Aa=Ar.type;Oe("if(",Nr,"(",fe,")){",Ar.isStream,"=true;",Zn,"=",Fr,".createStream(",qu,",",fe,");",Aa,"=",Zn,".dtype;","}else{",Zn,"=",Fr,".getBuffer(",fe,");","if(",Zn,"){",Aa,"=",Zn,".dtype;",'}else if("constant" in ',fe,"){",Ar.state,"=",rl,";","if(typeof "+fe+'.constant === "number"){',Ar[vf[0]],"=",fe,".constant;",vf.slice(1).map(function(ia){return Ar[ia]}).join("="),"=0;","}else{",vf.map(function(ia,wa){return Ar[ia]+"="+fe+".constant.length>"+wa+"?"+fe+".constant["+wa+"]:0;"}).join(""),"}}else{","if(",Nr,"(",fe,".buffer)){",Zn,"=",Fr,".createStream(",qu,",",fe,".buffer);","}else{",Zn,"=",Fr,".getBuffer(",fe,".buffer);","}",Aa,'="type" in ',fe,"?",hr.glTypes,"[",fe,".type]:",Zn,".dtype;",Ar.normalized,"=!!",fe,".normalized;");function Bn(ia){Oe(Ar[ia],"=",fe,".",ia,"|0;")}return Bn("size"),Bn("offset"),Bn("stride"),Bn("divisor"),Oe("}}"),Oe.exit("if(",Ar.isStream,"){",Fr,".destroyStream(",Zn,");","}"),Ar}ur[ze]=Go(Ge,je)}),ur}function Ci(ve,jt){var Fe=ve.static,ir=ve.dynamic;if(Ef in Fe){var ur=Fe[Ef];return ur!==null&&nn.getVAO(ur)===null&&(ur=nn.createVAO(ur)),eo(function(Ge){return Ge.link(nn.getVAO(ur))})}else if(Ef in ir){var ze=ir[Ef];return Go(ze,function(Ge,je){var de=Ge.invoke(je,ze);return je.def(Ge.shared.vao+".getVAO("+de+")")})}return null}function vi(ve){var jt=ve.static,Fe=ve.dynamic,ir={};return Object.keys(jt).forEach(function(ur){var ze=jt[ur];ir[ur]=eo(function(Ge,je){return typeof ze=="number"||typeof ze=="boolean"?""+ze:Ge.link(ze)})}),Object.keys(Fe).forEach(function(ur){var ze=Fe[ur];ir[ur]=Go(ze,function(Ge,je){return Ge.invoke(je,ze)})}),ir}function Fa(ve,jt,Fe,ir,ur){var ze=ve.static,Ge=ve.dynamic;Tt.optional(function(){var Bn=[Nu,du,Zu,xf,wf,Kf,Ou,kc,bf,Ef].concat(Ft);function ia(wa){Object.keys(wa).forEach(function(za){Tt.command(Bn.indexOf(za)>=0,'unknown parameter "'+za+'"',ur.commandStr)})}ia(ze),ia(Ge)});var je=Rn(ve,jt),de=un(ve,ur),Oe=Xn(ve,de,ur),fe=va(ve,ur),Je=ua(ve,ur),hr=Jn(ve,ur,je);function Nr(Bn){var ia=Oe[Bn];ia&&(Je[Bn]=ia)}Nr(hu),Nr(Ee($f));var Fr=Object.keys(Je).length>0,Ar={framebuffer:de,draw:fe,shader:hr,state:Je,dirty:Fr,scopeVAO:null,drawVAO:null,useVAO:!1,attributes:{}};if(Ar.profile=mn(ve,ur),Ar.uniforms=mi(Fe,ur),Ar.drawVAO=Ar.scopeVAO=Ci(ve,ur),!Ar.drawVAO&&hr.program&&!je&&Me.angle_instanced_arrays){var on=!0,Zn=hr.program.attributes.map(function(Bn){var ia=jt.static[Bn];return on=on&&!!ia,ia});if(on&&Zn.length>0){var Aa=nn.getVAO(nn.createVAO(Zn));Ar.drawVAO=new os(null,null,null,function(Bn,ia){return Bn.link(Aa)}),Ar.useVAO=!0}}return je?Ar.useVAO=!0:Ar.attributes=ga(jt,ur),Ar.context=vi(ir,ur),Ar}function Ti(ve,jt,Fe){var ir=ve.shared,ur=ir.context,ze=ve.scope();Object.keys(Fe).forEach(function(Ge){jt.save(ur,"."+Ge);var je=Fe[Ge],de=je.append(ve,jt);Array.isArray(de)?ze(ur,".",Ge,"=[",de.join(),"];"):ze(ur,".",Ge,"=",de,";")}),jt(ze)}function Yi(ve,jt,Fe,ir){var ur=ve.shared,ze=ur.gl,Ge=ur.framebuffer,je;pt&&(je=jt.def(ur.extensions,".webgl_draw_buffers"));var de=ve.constants,Oe=de.drawBuffer,fe=de.backBuffer,Je;Fe?Je=Fe.append(ve,jt):Je=jt.def(Ge,".next"),ir||jt("if(",Je,"!==",Ge,".cur){"),jt("if(",Je,"){",ze,".bindFramebuffer(",_l,",",Je,".framebuffer);"),pt&&jt(je,".drawBuffersWEBGL(",Oe,"[",Je,".colorAttachments.length]);"),jt("}else{",ze,".bindFramebuffer(",_l,",null);"),pt&&jt(je,".drawBuffersWEBGL(",fe,");"),jt("}",Ge,".cur=",Je,";"),ir||jt("}")}function bo(ve,jt,Fe){var ir=ve.shared,ur=ir.gl,ze=ve.current,Ge=ve.next,je=ir.current,de=ir.next,Oe=ve.cond(je,".dirty");Ft.forEach(function(fe){var Je=Ee(fe);if(!(Je in Fe.state)){var hr,Nr;if(Je in Ge){hr=Ge[Je],Nr=ze[Je];var Fr=zn(xt[Je].length,function(on){return Oe.def(hr,"[",on,"]")});Oe(ve.cond(Fr.map(function(on,Zn){return on+"!=="+Nr+"["+Zn+"]"}).join("||")).then(ur,".",qt[Je],"(",Fr,");",Fr.map(function(on,Zn){return Nr+"["+Zn+"]="+on}).join(";"),";"))}else{hr=Oe.def(de,".",Je);var Ar=ve.cond(hr,"!==",je,".",Je);Oe(Ar),Je in re?Ar(ve.cond(hr).then(ur,".enable(",re[Je],");").else(ur,".disable(",re[Je],");"),je,".",Je,"=",hr,";"):Ar(ur,".",qt[Je],"(",hr,");",je,".",Je,"=",hr,";")}}}),Object.keys(Fe.state).length===0&&Oe(je,".dirty=false;"),jt(Oe)}function Do(ve,jt,Fe,ir){var ur=ve.shared,ze=ve.current,Ge=ur.current,je=ur.gl;rh(Object.keys(Fe)).forEach(function(de){var Oe=Fe[de];if(!(ir&&!ir(Oe))){var fe=Oe.append(ve,jt);if(re[de]){var Je=re[de];yu(Oe)?fe?jt(je,".enable(",Je,");"):jt(je,".disable(",Je,");"):jt(ve.cond(fe).then(je,".enable(",Je,");").else(je,".disable(",Je,");")),jt(Ge,".",de,"=",fe,";")}else if(Pa(fe)){var hr=ze[de];jt(je,".",qt[de],"(",fe,");",fe.map(function(Nr,Fr){return hr+"["+Fr+"]="+Nr}).join(";"),";")}else jt(je,".",qt[de],"(",fe,");",Ge,".",de,"=",fe,";")}})}function ro(ve,jt){st&&(ve.instancing=jt.def(ve.shared.extensions,".angle_instanced_arrays"))}function Ma(ve,jt,Fe,ir,ur){var ze=ve.shared,Ge=ve.stats,je=ze.current,de=ze.timer,Oe=Fe.profile;function fe(){return typeof performance=="undefined"?"Date.now()":"performance.now()"}var Je,hr;function Nr(Bn){Je=jt.def(),Bn(Je,"=",fe(),";"),typeof ur=="string"?Bn(Ge,".count+=",ur,";"):Bn(Ge,".count++;"),S&&(ir?(hr=jt.def(),Bn(hr,"=",de,".getNumPendingQueries();")):Bn(de,".beginQuery(",Ge,");"))}function Fr(Bn){Bn(Ge,".cpuTime+=",fe(),"-",Je,";"),S&&(ir?Bn(de,".pushScopeStats(",hr,",",de,".getNumPendingQueries(),",Ge,");"):Bn(de,".endQuery();"))}function Ar(Bn){var ia=jt.def(je,".profile");jt(je,".profile=",Bn,";"),jt.exit(je,".profile=",ia,";")}var on;if(Oe){if(yu(Oe)){Oe.enable?(Nr(jt),Fr(jt.exit),Ar("true")):Ar("false");return}on=Oe.append(ve,jt),Ar(on)}else on=jt.def(je,".profile");var Zn=ve.block();Nr(Zn),jt("if(",on,"){",Zn,"}");var Aa=ve.block();Fr(Aa),jt.exit("if(",on,"){",Aa,"}")}function Qo(ve,jt,Fe,ir,ur){var ze=ve.shared;function Ge(de){switch(de){case Oc:case Pc:case Rc:return 2;case Dc:case ec:case Bc:return 3;case tc:case $u:case Fc:return 4;default:return 1}}function je(de,Oe,fe){var Je=ze.gl,hr=jt.def(de,".location"),Nr=jt.def(ze.attributes,"[",hr,"]"),Fr=fe.state,Ar=fe.buffer,on=[fe.x,fe.y,fe.z,fe.w],Zn=["buffer","normalized","offset","stride"];function Aa(){jt("if(!",Nr,".buffer){",Je,".enableVertexAttribArray(",hr,");}");var ia=fe.type,wa;if(fe.size?wa=jt.def(fe.size,"||",Oe):wa=Oe,jt("if(",Nr,".type!==",ia,"||",Nr,".size!==",wa,"||",Zn.map(function(Wi){return Nr+"."+Wi+"!=="+fe[Wi]}).join("||"),"){",Je,".bindBuffer(",qu,",",Ar,".buffer);",Je,".vertexAttribPointer(",[hr,wa,ia,fe.normalized,fe.stride,fe.offset],");",Nr,".type=",ia,";",Nr,".size=",wa,";",Zn.map(function(Wi){return Nr+"."+Wi+"="+fe[Wi]+";"}).join(""),"}"),st){var za=fe.divisor;jt("if(",Nr,".divisor!==",za,"){",ve.instancing,".vertexAttribDivisorANGLE(",[hr,za],");",Nr,".divisor=",za,";}")}}function Bn(){jt("if(",Nr,".buffer){",Je,".disableVertexAttribArray(",hr,");",Nr,".buffer=null;","}if(",vf.map(function(ia,wa){return Nr+"."+ia+"!=="+on[wa]}).join("||"),"){",Je,".vertexAttrib4f(",hr,",",on,");",vf.map(function(ia,wa){return Nr+"."+ia+"="+on[wa]+";"}).join(""),"}")}Fr===pf?Aa():Fr===rl?Bn():(jt("if(",Fr,"===",pf,"){"),Aa(),jt("}else{"),Bn(),jt("}"))}ir.forEach(function(de){var Oe=de.name,fe=Fe.attributes[Oe],Je;if(fe){if(!ur(fe))return;Je=fe.append(ve,jt)}else{if(!ur(Ml))return;var hr=ve.scopeAttrib(Oe);Tt.optional(function(){ve.assert(jt,hr+".state","missing attribute "+Oe)}),Je={},Object.keys(new X).forEach(function(Nr){Je[Nr]=jt.def(hr,".",Nr)})}je(ve.link(de),Ge(de.info.type),Je)})}function ii(ve,jt,Fe,ir,ur){for(var ze=ve.shared,Ge=ze.gl,je,de=0;de<ir.length;++de){var Oe=ir[de],fe=Oe.name,Je=Oe.info.type,hr=Fe.uniforms[fe],Nr=ve.link(Oe),Fr=Nr+".location",Ar;if(hr){if(!ur(hr))continue;if(yu(hr)){var on=hr.value;if(Tt.command(on!==null&&typeof on!="undefined",'missing uniform "'+fe+'"',ve.commandStr),Je===ac||Je===vu){Tt.command(typeof on=="function"&&(Je===ac&&(on._reglType==="texture2d"||on._reglType==="framebuffer")||Je===vu&&(on._reglType==="textureCube"||on._reglType==="framebufferCube")),"invalid texture for uniform "+fe,ve.commandStr);var Zn=ve.link(on._texture||on.color[0]._texture);jt(Ge,".uniform1i(",Fr,",",Zn+".bind());"),jt.exit(Zn,".unbind();")}else if(Je===rc||Je===nc||Je===Mf){Tt.optional(function(){Tt.command(Pa(on),"invalid matrix for uniform "+fe,ve.commandStr),Tt.command(Je===rc&&on.length===4||Je===nc&&on.length===9||Je===Mf&&on.length===16,"invalid length for matrix uniform "+fe,ve.commandStr)});var Aa=ve.global.def("new Float32Array(["+Array.prototype.slice.call(on)+"])"),Bn=2;Je===nc?Bn=3:Je===Mf&&(Bn=4),jt(Ge,".uniformMatrix",Bn,"fv(",Fr,",false,",Aa,");")}else{switch(Je){case Xs:Tt.commandType(on,"number","uniform "+fe,ve.commandStr),je="1f";break;case Oc:Tt.command(Pa(on)&&on.length===2,"uniform "+fe,ve.commandStr),je="2f";break;case Dc:Tt.command(Pa(on)&&on.length===3,"uniform "+fe,ve.commandStr),je="3f";break;case tc:Tt.command(Pa(on)&&on.length===4,"uniform "+fe,ve.commandStr),je="4f";break;case wl:Tt.commandType(on,"boolean","uniform "+fe,ve.commandStr),je="1i";break;case xl:Tt.commandType(on,"number","uniform "+fe,ve.commandStr),je="1i";break;case Rc:Tt.command(Pa(on)&&on.length===2,"uniform "+fe,ve.commandStr),je="2i";break;case Pc:Tt.command(Pa(on)&&on.length===2,"uniform "+fe,ve.commandStr),je="2i";break;case Bc:Tt.command(Pa(on)&&on.length===3,"uniform "+fe,ve.commandStr),je="3i";break;case ec:Tt.command(Pa(on)&&on.length===3,"uniform "+fe,ve.commandStr),je="3i";break;case Fc:Tt.command(Pa(on)&&on.length===4,"uniform "+fe,ve.commandStr),je="4i";break;case $u:Tt.command(Pa(on)&&on.length===4,"uniform "+fe,ve.commandStr),je="4i";break}jt(Ge,".uniform",je,"(",Fr,",",Pa(on)?Array.prototype.slice.call(on):on,");")}continue}else Ar=hr.append(ve,jt)}else{if(!ur(Ml))continue;Ar=jt.def(ze.uniforms,"[",Kt.id(fe),"]")}Je===ac?(Tt(!Array.isArray(Ar),"must specify a scalar prop for textures"),jt("if(",Ar,"&&",Ar,'._reglType==="framebuffer"){',Ar,"=",Ar,".color[0];","}")):Je===vu&&(Tt(!Array.isArray(Ar),"must specify a scalar prop for cube maps"),jt("if(",Ar,"&&",Ar,'._reglType==="framebufferCube"){',Ar,"=",Ar,".color[0];","}")),Tt.optional(function(){function Ls(mu,Pd){ve.assert(jt,mu,'bad data or missing for uniform "'+fe+'".  '+Pd)}function fh(mu){Tt(!Array.isArray(Ar),"must not specify an array type for uniform"),Ls("typeof "+Ar+'==="'+mu+'"',"invalid type, expected "+mu)}function qs(mu,Pd){Array.isArray(Ar)?Tt(Ar.length===mu,"must have length "+mu):Ls(ze.isArrayLike+"("+Ar+")&&"+Ar+".length==="+mu,"invalid vector, should have length "+mu,ve.commandStr)}function Hh(mu){Tt(!Array.isArray(Ar),"must not specify a value type"),Ls("typeof "+Ar+'==="function"&&'+Ar+'._reglType==="texture'+(mu===Vl?"2d":"Cube")+'"',"invalid texture type",ve.commandStr)}switch(Je){case xl:fh("number");break;case Pc:qs(2,"number");break;case ec:qs(3,"number");break;case $u:qs(4,"number");break;case Xs:fh("number");break;case Oc:qs(2,"number");break;case Dc:qs(3,"number");break;case tc:qs(4,"number");break;case wl:fh("boolean");break;case Rc:qs(2,"boolean");break;case Bc:qs(3,"boolean");break;case Fc:qs(4,"boolean");break;case rc:qs(4,"number");break;case nc:qs(9,"number");break;case Mf:qs(16,"number");break;case ac:Hh(Vl);break;case vu:Hh(gl);break}});var ia=1;switch(Je){case ac:case vu:var wa=jt.def(Ar,"._texture");jt(Ge,".uniform1i(",Fr,",",wa,".bind());"),jt.exit(wa,".unbind();");continue;case xl:case wl:je="1i";break;case Pc:case Rc:je="2i",ia=2;break;case ec:case Bc:je="3i",ia=3;break;case $u:case Fc:je="4i",ia=4;break;case Xs:je="1f";break;case Oc:je="2f",ia=2;break;case Dc:je="3f",ia=3;break;case tc:je="4f",ia=4;break;case rc:je="Matrix2fv";break;case nc:je="Matrix3fv";break;case Mf:je="Matrix4fv";break}if(jt(Ge,".uniform",je,"(",Fr,","),je.charAt(0)==="M"){var za=Math.pow(Je-rc+2,2),Wi=ve.global.def("new Float32Array(",za,")");Array.isArray(Ar)?jt("false,(",zn(za,function(Ls){return Wi+"["+Ls+"]="+Ar[Ls]}),",",Wi,")"):jt("false,(Array.isArray(",Ar,")||",Ar," instanceof Float32Array)?",Ar,":(",zn(za,function(Ls){return Wi+"["+Ls+"]="+Ar+"["+Ls+"]"}),",",Wi,")")}else ia>1?jt(zn(ia,function(Ls){return Array.isArray(Ar)?Ar[Ls]:Ar+"["+Ls+"]"})):(Tt(!Array.isArray(Ar),"uniform value must not be an array"),jt(Ar));jt(");")}}function ea(ve,jt,Fe,ir){var ur=ve.shared,ze=ur.gl,Ge=ur.draw,je=ir.draw;function de(){var wa=je.elements,za,Wi=jt;return wa?((wa.contextDep&&ir.contextDynamic||wa.propDep)&&(Wi=Fe),za=wa.append(ve,Wi)):za=Wi.def(Ge,".",xf),za&&Wi("if("+za+")"+ze+".bindBuffer("+Wl+","+za+".buffer.buffer);"),za}function Oe(){var wa=je.count,za,Wi=jt;return wa?((wa.contextDep&&ir.contextDynamic||wa.propDep)&&(Wi=Fe),za=wa.append(ve,Wi),Tt.optional(function(){wa.MISSING&&ve.assert(jt,"false","missing vertex count"),wa.DYNAMIC&&ve.assert(Wi,za+">=0","missing vertex count")})):(za=Wi.def(Ge,".",Ou),Tt.optional(function(){ve.assert(Wi,za+">=0","missing vertex count")})),za}var fe=de();function Je(wa){var za=je[wa];return za?za.contextDep&&ir.contextDynamic||za.propDep?za.append(ve,Fe):za.append(ve,jt):jt.def(Ge,".",wa)}var hr=Je(wf),Nr=Je(Kf),Fr=Oe();if(typeof Fr=="number"){if(Fr===0)return}else Fe("if(",Fr,"){"),Fe.exit("}");var Ar,on;st&&(Ar=Je(kc),on=ve.instancing);var Zn=fe+".type",Aa=je.elements&&yu(je.elements);function Bn(){function wa(){Fe(on,".drawElementsInstancedANGLE(",[hr,Fr,Zn,Nr+"<<(("+Zn+"-"+Gl+")>>1)",Ar],");")}function za(){Fe(on,".drawArraysInstancedANGLE(",[hr,Nr,Fr,Ar],");")}fe?Aa?wa():(Fe("if(",fe,"){"),wa(),Fe("}else{"),za(),Fe("}")):za()}function ia(){function wa(){Fe(ze+".drawElements("+[hr,Fr,Zn,Nr+"<<(("+Zn+"-"+Gl+")>>1)"]+");")}function za(){Fe(ze+".drawArrays("+[hr,Nr,Fr]+");")}fe?Aa?wa():(Fe("if(",fe,"){"),wa(),Fe("}else{"),za(),Fe("}")):za()}st&&(typeof Ar!="number"||Ar>=0)?typeof Ar=="string"?(Fe("if(",Ar,">0){"),Bn(),Fe("}else if(",Ar,"<0){"),ia(),Fe("}")):Bn():ia()}function Ga(ve,jt,Fe,ir,ur){var ze=Jr(),Ge=ze.proc("body",ur);return Tt.optional(function(){ze.commandStr=jt.commandStr,ze.command=ze.link(jt.commandStr)}),st&&(ze.instancing=Ge.def(ze.shared.extensions,".angle_instanced_arrays")),ve(ze,Ge,Fe,ir),ze.compile().body}function $a(ve,jt,Fe,ir){ro(ve,jt),Fe.useVAO?Fe.drawVAO?jt(ve.shared.vao,".setVAO(",Fe.drawVAO.append(ve,jt),");"):jt(ve.shared.vao,".setVAO(",ve.shared.vao,".targetVAO);"):(jt(ve.shared.vao,".setVAO(null);"),Qo(ve,jt,Fe,ir.attributes,function(){return!0})),ii(ve,jt,Fe,ir.uniforms,function(){return!0}),ea(ve,jt,jt,Fe)}function vo(ve,jt){var Fe=ve.proc("draw",1);ro(ve,Fe),Ti(ve,Fe,jt.context),Yi(ve,Fe,jt.framebuffer),bo(ve,Fe,jt),Do(ve,Fe,jt.state),Ma(ve,Fe,jt,!1,!0);var ir=jt.shader.progVar.append(ve,Fe);if(Fe(ve.shared.gl,".useProgram(",ir,".program);"),jt.shader.program)$a(ve,Fe,jt,jt.shader.program);else{Fe(ve.shared.vao,".setVAO(null);");var ur=ve.global.def("{}"),ze=Fe.def(ir,".id"),Ge=Fe.def(ur,"[",ze,"]");Fe(ve.cond(Ge).then(Ge,".call(this,a0);").else(Ge,"=",ur,"[",ze,"]=",ve.link(function(je){return Ga($a,ve,jt,je,1)}),"(",ir,");",Ge,".call(this,a0);"))}Object.keys(jt.state).length>0&&Fe(ve.shared.current,".dirty=true;")}function Du(ve,jt,Fe,ir){ve.batchId="a1",ro(ve,jt);function ur(){return!0}Qo(ve,jt,Fe,ir.attributes,ur),ii(ve,jt,Fe,ir.uniforms,ur),ea(ve,jt,jt,Fe)}function oc(ve,jt,Fe,ir){ro(ve,jt);var ur=Fe.contextDep,ze=jt.def(),Ge="a0",je="a1",de=jt.def();ve.shared.props=de,ve.batchId=ze;var Oe=ve.scope(),fe=ve.scope();jt(Oe.entry,"for(",ze,"=0;",ze,"<",je,";++",ze,"){",de,"=",Ge,"[",ze,"];",fe,"}",Oe.exit);function Je(Zn){return Zn.contextDep&&ur||Zn.propDep}function hr(Zn){return!Je(Zn)}if(Fe.needsContext&&Ti(ve,fe,Fe.context),Fe.needsFramebuffer&&Yi(ve,fe,Fe.framebuffer),Do(ve,fe,Fe.state,Je),Fe.profile&&Je(Fe.profile)&&Ma(ve,fe,Fe,!1,!0),ir)Fe.useVAO?Fe.drawVAO?Je(Fe.drawVAO)?fe(ve.shared.vao,".setVAO(",Fe.drawVAO.append(ve,fe),");"):Oe(ve.shared.vao,".setVAO(",Fe.drawVAO.append(ve,Oe),");"):Oe(ve.shared.vao,".setVAO(",ve.shared.vao,".targetVAO);"):(Oe(ve.shared.vao,".setVAO(null);"),Qo(ve,Oe,Fe,ir.attributes,hr),Qo(ve,fe,Fe,ir.attributes,Je)),ii(ve,Oe,Fe,ir.uniforms,hr),ii(ve,fe,Fe,ir.uniforms,Je),ea(ve,Oe,fe,Fe);else{var Nr=ve.global.def("{}"),Fr=Fe.shader.progVar.append(ve,fe),Ar=fe.def(Fr,".id"),on=fe.def(Nr,"[",Ar,"]");fe(ve.shared.gl,".useProgram(",Fr,".program);","if(!",on,"){",on,"=",Nr,"[",Ar,"]=",ve.link(function(Zn){return Ga(Du,ve,Fe,Zn,2)}),"(",Fr,");}",on,".call(this,a0[",ze,"],",ze,");")}}function we(ve,jt){var Fe=ve.proc("batch",2);ve.batchId="0",ro(ve,Fe);var ir=!1,ur=!0;Object.keys(jt.context).forEach(function(Nr){ir=ir||jt.context[Nr].propDep}),ir||(Ti(ve,Fe,jt.context),ur=!1);var ze=jt.framebuffer,Ge=!1;ze?(ze.propDep?ir=Ge=!0:ze.contextDep&&ir&&(Ge=!0),Ge||Yi(ve,Fe,ze)):Yi(ve,Fe,null),jt.state.viewport&&jt.state.viewport.propDep&&(ir=!0);function je(Nr){return Nr.contextDep&&ir||Nr.propDep}bo(ve,Fe,jt),Do(ve,Fe,jt.state,function(Nr){return!je(Nr)}),(!jt.profile||!je(jt.profile))&&Ma(ve,Fe,jt,!1,"a1"),jt.contextDep=ir,jt.needsContext=ur,jt.needsFramebuffer=Ge;var de=jt.shader.progVar;if(de.contextDep&&ir||de.propDep)oc(ve,Fe,jt,null);else{var Oe=de.append(ve,Fe);if(Fe(ve.shared.gl,".useProgram(",Oe,".program);"),jt.shader.program)oc(ve,Fe,jt,jt.shader.program);else{Fe(ve.shared.vao,".setVAO(null);");var fe=ve.global.def("{}"),Je=Fe.def(Oe,".id"),hr=Fe.def(fe,"[",Je,"]");Fe(ve.cond(hr).then(hr,".call(this,a0,a1);").else(hr,"=",fe,"[",Je,"]=",ve.link(function(Nr){return Ga(oc,ve,jt,Nr,2)}),"(",Oe,");",hr,".call(this,a0,a1);"))}}Object.keys(jt.state).length>0&&Fe(ve.shared.current,".dirty=true;")}function br(ve,jt){var Fe=ve.proc("scope",3);ve.batchId="a2";var ir=ve.shared,ur=ir.current;Ti(ve,Fe,jt.context),jt.framebuffer&&jt.framebuffer.append(ve,Fe),rh(Object.keys(jt.state)).forEach(function(Ge){var je=jt.state[Ge],de=je.append(ve,Fe);Pa(de)?de.forEach(function(Oe,fe){Fe.set(ve.next[Ge],"["+fe+"]",Oe)}):Fe.set(ir.next,"."+Ge,de)}),Ma(ve,Fe,jt,!0,!0),[xf,Kf,Ou,kc,wf].forEach(function(Ge){var je=jt.draw[Ge];je&&Fe.set(ir.draw,"."+Ge,""+je.append(ve,Fe))}),Object.keys(jt.uniforms).forEach(function(Ge){var je=jt.uniforms[Ge].append(ve,Fe);Array.isArray(je)&&(je="["+je.join()+"]"),Fe.set(ir.uniforms,"["+Kt.id(Ge)+"]",je)}),Object.keys(jt.attributes).forEach(function(Ge){var je=jt.attributes[Ge].append(ve,Fe),de=ve.scopeAttrib(Ge);Object.keys(new X).forEach(function(Oe){Fe.set(de,"."+Oe,je[Oe])})}),jt.scopeVAO&&Fe.set(ir.vao,".targetVAO",jt.scopeVAO.append(ve,Fe));function ze(Ge){var je=jt.shader[Ge];je&&Fe.set(ir.shader,"."+Ge,je.append(ve,Fe))}ze(du),ze(Zu),Object.keys(jt.state).length>0&&(Fe(ur,".dirty=true;"),Fe.exit(ur,".dirty=true;")),Fe("a1(",ve.shared.context,",a0,",ve.batchId,");")}function pr(ve){if(!(typeof ve!="object"||Pa(ve))){for(var jt=Object.keys(ve),Fe=0;Fe<jt.length;++Fe)if(cr.isDynamic(ve[jt[Fe]]))return!0;return!1}}function On(ve,jt,Fe){var ir=jt.static[Fe];if(!ir||!pr(ir))return;var ur=ve.global,ze=Object.keys(ir),Ge=!1,je=!1,de=!1,Oe=ve.global.def("{}");ze.forEach(function(Je){var hr=ir[Je];if(cr.isDynamic(hr)){typeof hr=="function"&&(hr=ir[Je]=cr.unbox(hr));var Nr=Go(hr,null);Ge=Ge||Nr.thisDep,de=de||Nr.propDep,je=je||Nr.contextDep}else{switch(ur(Oe,".",Je,"="),typeof hr){case"number":ur(hr);break;case"string":ur('"',hr,'"');break;case"object":Array.isArray(hr)&&ur("[",hr.join(),"]");break;default:ur(ve.link(hr));break}ur(";")}});function fe(Je,hr){ze.forEach(function(Nr){var Fr=ir[Nr];if(cr.isDynamic(Fr)){var Ar=Je.invoke(hr,Fr);hr(Oe,".",Nr,"=",Ar,";")}})}jt.dynamic[Fe]=new cr.DynamicVariable(Hf,{thisDep:Ge,contextDep:je,propDep:de,ref:Oe,append:fe}),delete jt.static[Fe]}function Ra(ve,jt,Fe,ir,ur){var ze=Jr();ze.stats=ze.link(ur),Object.keys(jt.static).forEach(function(je){On(ze,jt,je)}),Yl.forEach(function(je){On(ze,ve,je)});var Ge=Fa(ve,jt,Fe,ir,ze);return vo(ze,Ge),br(ze,Ge),we(ze,Ge),et(ze.compile(),{destroy:function(){Ge.shader.program.destroy()}})}return{next:Mt,current:xt,procs:function(){var ve=Jr(),jt=ve.proc("poll"),Fe=ve.proc("refresh"),ir=ve.block();jt(ir),Fe(ir);var ur=ve.shared,ze=ur.gl,Ge=ur.next,je=ur.current;ir(je,".dirty=false;"),Yi(ve,jt),Yi(ve,Fe,null,!0);var de;st&&(de=ve.link(st)),Me.oes_vertex_array_object&&Fe(ve.link(Me.oes_vertex_array_object),".bindVertexArrayOES(null);");for(var Oe=0;Oe<gr.maxAttributes;++Oe){var fe=Fe.def(ur.attributes,"[",Oe,"]"),Je=ve.cond(fe,".buffer");Je.then(ze,".enableVertexAttribArray(",Oe,");",ze,".bindBuffer(",qu,",",fe,".buffer.buffer);",ze,".vertexAttribPointer(",Oe,",",fe,".size,",fe,".type,",fe,".normalized,",fe,".stride,",fe,".offset);").else(ze,".disableVertexAttribArray(",Oe,");",ze,".vertexAttrib4f(",Oe,",",fe,".x,",fe,".y,",fe,".z,",fe,".w);",fe,".buffer=null;"),Fe(Je),st&&Fe(de,".vertexAttribDivisorANGLE(",Oe,",",fe,".divisor);")}return Fe(ve.shared.vao,".currentVAO=null;",ve.shared.vao,".setVAO(",ve.shared.vao,".targetVAO);"),Object.keys(re).forEach(function(hr){var Nr=re[hr],Fr=ir.def(Ge,".",hr),Ar=ve.block();Ar("if(",Fr,"){",ze,".enable(",Nr,")}else{",ze,".disable(",Nr,")}",je,".",hr,"=",Fr,";"),Fe(Ar),jt("if(",Fr,"!==",je,".",hr,"){",Ar,"}")}),Object.keys(qt).forEach(function(hr){var Nr=qt[hr],Fr=xt[hr],Ar,on,Zn=ve.block();if(Zn(ze,".",Nr,"("),Pa(Fr)){var Aa=Fr.length;Ar=ve.global.def(Ge,".",hr),on=ve.global.def(je,".",hr),Zn(zn(Aa,function(Bn){return Ar+"["+Bn+"]"}),");",zn(Aa,function(Bn){return on+"["+Bn+"]="+Ar+"["+Bn+"];"}).join("")),jt("if(",zn(Aa,function(Bn){return Ar+"["+Bn+"]!=="+on+"["+Bn+"]"}).join("||"),"){",Zn,"}")}else Ar=ir.def(Ge,".",hr),on=ir.def(je,".",hr),Zn(Ar,");",je,".",hr,"=",Ar,";"),jt("if(",Ar,"!==",on,"){",Zn,"}");Fe(Zn)}),ve.compile()}(),compile:Ra}}function ah(){return{vaoCount:0,bufferCount:0,elementsCount:0,framebufferCount:0,shaderCount:0,textureCount:0,cubeCount:0,renderbufferCount:0,maxTextureUnits:0}}var xh=34918,wh=34919,Al=35007,ih=function(mt,Kt){if(!Kt.ext_disjoint_timer_query)return null;var Me=[];function gr(){return Me.pop()||Kt.ext_disjoint_timer_query.createQueryEXT()}function Or(st){Me.push(st)}var yr=[];function mr(st){var pt=gr();Kt.ext_disjoint_timer_query.beginQueryEXT(Al,pt),yr.push(pt),S(yr.length-1,yr.length,st)}function $r(){Kt.ext_disjoint_timer_query.endQueryEXT(Al)}function Qr(){this.startQueryIndex=-1,this.endQueryIndex=-1,this.sum=0,this.stats=null}var nn=[];function Wr(){return nn.pop()||new Qr}function fn(st){nn.push(st)}var d=[];function S(st,pt,xt){var Mt=Wr();Mt.startQueryIndex=st,Mt.endQueryIndex=pt,Mt.sum=0,Mt.stats=xt,d.push(Mt)}var O=[],X=[];function at(){var st,pt,xt=yr.length;if(xt!==0){X.length=Math.max(X.length,xt+1),O.length=Math.max(O.length,xt+1),O[0]=0,X[0]=0;var Mt=0;for(st=0,pt=0;pt<yr.length;++pt){var Ft=yr[pt];Kt.ext_disjoint_timer_query.getQueryObjectEXT(Ft,wh)?(Mt+=Kt.ext_disjoint_timer_query.getQueryObjectEXT(Ft,xh),Or(Ft)):yr[st++]=Ft,O[pt+1]=Mt,X[pt+1]=st}for(yr.length=st,st=0,pt=0;pt<d.length;++pt){var re=d[pt],qt=re.startQueryIndex,Ee=re.endQueryIndex;re.sum+=O[Ee]-O[qt];var Ve=X[qt],Mr=X[Ee];Mr===Ve?(re.stats.gpuTime+=re.sum/1e6,fn(re)):(re.startQueryIndex=Ve,re.endQueryIndex=Mr,d[st++]=re)}d.length=st}}return{beginQuery:mr,endQuery:$r,pushScopeStats:S,update:at,getNumPendingQueries:function(){return yr.length},clear:function(){Me.push.apply(Me,yr);for(var st=0;st<Me.length;st++)Kt.ext_disjoint_timer_query.deleteQueryEXT(Me[st]);yr.length=0,Me.length=0},restore:function(){yr.length=0,Me.length=0}}},Eh=16384,_h=256,oh=1024,sh=34962,Yc="webglcontextlost",Wc="webglcontextrestored",Cl=1,uh=2,Zs=3;function Tl(mt,Kt){for(var Me=0;Me<mt.length;++Me)if(mt[Me]===Kt)return Me;return-1}function ic(mt){var Kt=qn(mt);if(!Kt)return null;var Me=Kt.gl,gr=Me.getContextAttributes(),Or=Me.isContextLost(),yr=Gn(Me,Kt);if(!yr)return null;var mr=sn(),$r=ah(),Qr=yr.extensions,nn=ih(Me,Qr),Wr=Gr(),fn=Me.drawingBufferWidth,d=Me.drawingBufferHeight,S={tick:0,time:0,viewportWidth:fn,viewportHeight:d,framebufferWidth:fn,framebufferHeight:d,drawingBufferWidth:fn,drawingBufferHeight:d,pixelRatio:Kt.pixelRatio},O={},X={elements:null,primitive:4,count:-1,offset:0,instances:-1},at=To(Me,Qr),st=fo(Me,$r,Kt,xt),pt=lf(Me,Qr,at,$r,st);function xt(ea){return pt.destroyBuffer(ea)}var Mt=Zo(Me,Qr,st,$r),Ft=hf(Me,mr,$r,Kt),re=Ec(Me,Qr,at,function(){Ve.procs.poll()},S,$r,Kt),qt=cf(Me,Qr,at,$r,Kt),Ee=Tu(Me,Qr,at,re,qt,$r),Ve=nh(Me,mr,Qr,at,st,Mt,re,Ee,O,pt,Ft,X,S,nn,Kt),Mr=ju(Me,Ee,Ve.procs.poll,S,gr,Qr,at),Qe=Ve.next,rr=Me.canvas,tr=[],Jr=[],mn=[],un=[Kt.onDestroy],Xn=null;function Rn(){if(tr.length===0){nn&&nn.update(),Xn=null;return}Xn=dr.next(Rn),Do();for(var ea=tr.length-1;ea>=0;--ea){var Ga=tr[ea];Ga&&Ga(S,null,0)}Me.flush(),nn&&nn.update()}function Jn(){!Xn&&tr.length>0&&(Xn=dr.next(Rn))}function va(){Xn&&(dr.cancel(Rn),Xn=null)}function ua(ea){ea.preventDefault(),Or=!0,va(),Jr.forEach(function(Ga){Ga()})}function mi(ea){Me.getError(),Or=!1,yr.restore(),Ft.restore(),st.restore(),re.restore(),qt.restore(),Ee.restore(),pt.restore(),nn&&nn.restore(),Ve.procs.refresh(),Jn(),mn.forEach(function(Ga){Ga()})}rr&&(rr.addEventListener(Yc,ua,!1),rr.addEventListener(Wc,mi,!1));function ga(){tr.length=0,va(),rr&&(rr.removeEventListener(Yc,ua),rr.removeEventListener(Wc,mi)),Ft.clear(),Ee.clear(),qt.clear(),re.clear(),Mt.clear(),st.clear(),pt.clear(),nn&&nn.clear(),un.forEach(function(ea){ea()})}function Ci(ea){Tt(!!ea,"invalid args to regl({...})"),Tt.type(ea,"object","invalid args to regl({...})");function Ga(ur){var ze=et({},ur);delete ze.uniforms,delete ze.attributes,delete ze.context,delete ze.vao,"stencil"in ze&&ze.stencil.op&&(ze.stencil.opBack=ze.stencil.opFront=ze.stencil.op,delete ze.stencil.op);function Ge(je){if(je in ze){var de=ze[je];delete ze[je],Object.keys(de).forEach(function(Oe){ze[je+"."+Oe]=de[Oe]})}}return Ge("blend"),Ge("depth"),Ge("cull"),Ge("stencil"),Ge("polygonOffset"),Ge("scissor"),Ge("sample"),"vao"in ur&&(ze.vao=ur.vao),ze}function $a(ur,ze){var Ge={},je={};return Object.keys(ur).forEach(function(de){var Oe=ur[de];if(cr.isDynamic(Oe)){je[de]=cr.unbox(Oe,de);return}else if(ze&&Array.isArray(Oe)){for(var fe=0;fe<Oe.length;++fe)if(cr.isDynamic(Oe[fe])){je[de]=cr.unbox(Oe,de);return}}Ge[de]=Oe}),{dynamic:je,static:Ge}}var vo=$a(ea.context||{},!0),Du=$a(ea.uniforms||{},!0),oc=$a(ea.attributes||{},!1),we=$a(Ga(ea),!1),br={gpuTime:0,cpuTime:0,count:0},pr=Ve.compile(we,oc,Du,vo,br),On=pr.draw,Ra=pr.batch,ve=pr.scope,jt=[];function Fe(ur){for(;jt.length<ur;)jt.push(null);return jt}function ir(ur,ze){var Ge;if(Or&&Tt.raise("context lost"),typeof ur=="function")return ve.call(this,null,ur,0);if(typeof ze=="function")if(typeof ur=="number")for(Ge=0;Ge<ur;++Ge)ve.call(this,null,ze,Ge);else if(Array.isArray(ur))for(Ge=0;Ge<ur.length;++Ge)ve.call(this,ur[Ge],ze,Ge);else return ve.call(this,ur,ze,0);else if(typeof ur=="number"){if(ur>0)return Ra.call(this,Fe(ur|0),ur|0)}else if(Array.isArray(ur)){if(ur.length)return Ra.call(this,ur,ur.length)}else return On.call(this,ur)}return et(ir,{stats:br,destroy:function(){pr.destroy()}})}var vi=Ee.setFBO=Ci({framebuffer:cr.define.call(null,Cl,"framebuffer")});function Fa(ea,Ga){var $a=0;Ve.procs.poll();var vo=Ga.color;vo&&(Me.clearColor(+vo[0]||0,+vo[1]||0,+vo[2]||0,+vo[3]||0),$a|=Eh),"depth"in Ga&&(Me.clearDepth(+Ga.depth),$a|=_h),"stencil"in Ga&&(Me.clearStencil(Ga.stencil|0),$a|=oh),Tt(!!$a,"called regl.clear with no buffer specified"),Me.clear($a)}function Ti(ea){if(Tt(typeof ea=="object"&&ea,"regl.clear() takes an object as input"),"framebuffer"in ea)if(ea.framebuffer&&ea.framebuffer_reglType==="framebufferCube")for(var Ga=0;Ga<6;++Ga)vi(et({framebuffer:ea.framebuffer.faces[Ga]},ea),Fa);else vi(ea,Fa);else Fa(null,ea)}function Yi(ea){Tt.type(ea,"function","regl.frame() callback must be a function"),tr.push(ea);function Ga(){var $a=Tl(tr,ea);Tt($a>=0,"cannot cancel a frame twice");function vo(){var Du=Tl(tr,vo);tr[Du]=tr[tr.length-1],tr.length-=1,tr.length<=0&&va()}tr[$a]=vo}return Jn(),{cancel:Ga}}function bo(){var ea=Qe.viewport,Ga=Qe.scissor_box;ea[0]=ea[1]=Ga[0]=Ga[1]=0,S.viewportWidth=S.framebufferWidth=S.drawingBufferWidth=ea[2]=Ga[2]=Me.drawingBufferWidth,S.viewportHeight=S.framebufferHeight=S.drawingBufferHeight=ea[3]=Ga[3]=Me.drawingBufferHeight}function Do(){S.tick+=1,S.time=Ma(),bo(),Ve.procs.poll()}function ro(){re.refresh(),bo(),Ve.procs.refresh(),nn&&nn.update()}function Ma(){return(Gr()-Wr)/1e3}ro();function Qo(ea,Ga){Tt.type(Ga,"function","listener callback must be a function");var $a;switch(ea){case"frame":return Yi(Ga);case"lost":$a=Jr;break;case"restore":$a=mn;break;case"destroy":$a=un;break;default:Tt.raise("invalid event, must be one of frame,lost,restore,destroy")}return $a.push(Ga),{cancel:function(){for(var vo=0;vo<$a.length;++vo)if($a[vo]===Ga){$a[vo]=$a[$a.length-1],$a.pop();return}}}}var ii=et(Ci,{clear:Ti,prop:cr.define.bind(null,Cl),context:cr.define.bind(null,uh),this:cr.define.bind(null,Zs),draw:Ci({}),buffer:function(ea){return st.create(ea,sh,!1,!1)},elements:function(ea){return Mt.create(ea,!1)},texture:re.create2D,cube:re.createCube,renderbuffer:qt.create,framebuffer:Ee.create,framebufferCube:Ee.createCube,vao:pt.createVAO,attributes:gr,frame:Yi,on:Qo,limits:at,hasExtension:function(ea){return at.extensions.indexOf(ea.toLowerCase())>=0},read:Mr,destroy:ga,_gl:Me,_refresh:ro,poll:function(){Do(),nn&&nn.update()},now:Ma,stats:$r});return Kt.onDone(null,ii),ii}return ic})},86851:function(Se,R,et){"use strict";var ft=et(35171),nt=Array.prototype.concat,V=Array.prototype.slice,z=Se.exports=function(F){for(var M=[],A=0,y=F.length;A<y;A++){var x=F[A];ft(x)?M=nt.call(M,V.call(x)):M.push(x)}return M};z.wrap=function(H){return function(){return H(z(arguments))}}},17061:function(Se,R,et){var ft=et(18698).default;function nt(){"use strict";Se.exports=nt=function(){return z},Se.exports.__esModule=!0,Se.exports.default=Se.exports;var V,z={},H=Object.prototype,F=H.hasOwnProperty,M=Object.defineProperty||function(ot,yt,Lt){ot[yt]=Lt.value},A=typeof Symbol=="function"?Symbol:{},y=A.iterator||"@@iterator",x=A.asyncIterator||"@@asyncIterator",p=A.toStringTag||"@@toStringTag";function _(ot,yt,Lt){return Object.defineProperty(ot,yt,{value:Lt,enumerable:!0,configurable:!0,writable:!0}),ot[yt]}try{_({},"")}catch(ot){_=function(Lt,Ot,Wt){return Lt[Ot]=Wt}}function E(ot,yt,Lt,Ot){var Wt=yt&&yt.prototype instanceof B?yt:B,Jt=Object.create(Wt.prototype),De=new le(Ot||[]);return M(Jt,"_invoke",{value:kt(ot,Lt,De)}),Jt}function b(ot,yt,Lt){try{return{type:"normal",arg:ot.call(yt,Lt)}}catch(Ot){return{type:"throw",arg:Ot}}}z.wrap=E;var k="suspendedStart",N="suspendedYield",g="executing",v="completed",K={};function B(){}function G(){}function Y(){}var j={};_(j,y,function(){return this});var Q=Object.getPrototypeOf,Z=Q&&Q(Q(dt([])));Z&&Z!==H&&F.call(Z,y)&&(j=Z);var rt=Y.prototype=B.prototype=Object.create(j);function ut(ot){["next","throw","return"].forEach(function(yt){_(ot,yt,function(Lt){return this._invoke(yt,Lt)})})}function ht(ot,yt){function Lt(Wt,Jt,De,te){var oe=b(ot[Wt],ot,Jt);if(oe.type!=="throw"){var me=oe.arg,Ce=me.value;return Ce&&ft(Ce)=="object"&&F.call(Ce,"__await")?yt.resolve(Ce.__await).then(function(_e){Lt("next",_e,De,te)},function(_e){Lt("throw",_e,De,te)}):yt.resolve(Ce).then(function(_e){me.value=_e,De(me)},function(_e){return Lt("throw",_e,De,te)})}te(oe.arg)}var Ot;M(this,"_invoke",{value:function(Jt,De){function te(){return new yt(function(oe,me){Lt(Jt,De,oe,me)})}return Ot=Ot?Ot.then(te,te):te()}})}function kt(ot,yt,Lt){var Ot=k;return function(Wt,Jt){if(Ot===g)throw Error("Generator is already running");if(Ot===v){if(Wt==="throw")throw Jt;return{value:V,done:!0}}for(Lt.method=Wt,Lt.arg=Jt;;){var De=Lt.delegate;if(De){var te=At(De,Lt);if(te){if(te===K)continue;return te}}if(Lt.method==="next")Lt.sent=Lt._sent=Lt.arg;else if(Lt.method==="throw"){if(Ot===k)throw Ot=v,Lt.arg;Lt.dispatchException(Lt.arg)}else Lt.method==="return"&&Lt.abrupt("return",Lt.arg);Ot=g;var oe=b(ot,yt,Lt);if(oe.type==="normal"){if(Ot=Lt.done?v:N,oe.arg===K)continue;return{value:oe.arg,done:Lt.done}}oe.type==="throw"&&(Ot=v,Lt.method="throw",Lt.arg=oe.arg)}}}function At(ot,yt){var Lt=yt.method,Ot=ot.iterator[Lt];if(Ot===V)return yt.delegate=null,Lt==="throw"&&ot.iterator.return&&(yt.method="return",yt.arg=V,At(ot,yt),yt.method==="throw")||Lt!=="return"&&(yt.method="throw",yt.arg=new TypeError("The iterator does not provide a '"+Lt+"' method")),K;var Wt=b(Ot,ot.iterator,yt.arg);if(Wt.type==="throw")return yt.method="throw",yt.arg=Wt.arg,yt.delegate=null,K;var Jt=Wt.arg;return Jt?Jt.done?(yt[ot.resultName]=Jt.value,yt.next=ot.nextLoc,yt.method!=="return"&&(yt.method="next",yt.arg=V),yt.delegate=null,K):Jt:(yt.method="throw",yt.arg=new TypeError("iterator result is not an object"),yt.delegate=null,K)}function Ht(ot){var yt={tryLoc:ot[0]};1 in ot&&(yt.catchLoc=ot[1]),2 in ot&&(yt.finallyLoc=ot[2],yt.afterLoc=ot[3]),this.tryEntries.push(yt)}function Rt(ot){var yt=ot.completion||{};yt.type="normal",delete yt.arg,ot.completion=yt}function le(ot){this.tryEntries=[{tryLoc:"root"}],ot.forEach(Ht,this),this.reset(!0)}function dt(ot){if(ot||ot===""){var yt=ot[y];if(yt)return yt.call(ot);if(typeof ot.next=="function")return ot;if(!isNaN(ot.length)){var Lt=-1,Ot=function Wt(){for(;++Lt<ot.length;)if(F.call(ot,Lt))return Wt.value=ot[Lt],Wt.done=!1,Wt;return Wt.value=V,Wt.done=!0,Wt};return Ot.next=Ot}}throw new TypeError(ft(ot)+" is not iterable")}return G.prototype=Y,M(rt,"constructor",{value:Y,configurable:!0}),M(Y,"constructor",{value:G,configurable:!0}),G.displayName=_(Y,p,"GeneratorFunction"),z.isGeneratorFunction=function(ot){var yt=typeof ot=="function"&&ot.constructor;return!!yt&&(yt===G||(yt.displayName||yt.name)==="GeneratorFunction")},z.mark=function(ot){return Object.setPrototypeOf?Object.setPrototypeOf(ot,Y):(ot.__proto__=Y,_(ot,p,"GeneratorFunction")),ot.prototype=Object.create(rt),ot},z.awrap=function(ot){return{__await:ot}},ut(ht.prototype),_(ht.prototype,x,function(){return this}),z.AsyncIterator=ht,z.async=function(ot,yt,Lt,Ot,Wt){Wt===void 0&&(Wt=Promise);var Jt=new ht(E(ot,yt,Lt,Ot),Wt);return z.isGeneratorFunction(yt)?Jt:Jt.next().then(function(De){return De.done?De.value:Jt.next()})},ut(rt),_(rt,p,"Generator"),_(rt,y,function(){return this}),_(rt,"toString",function(){return"[object Generator]"}),z.keys=function(ot){var yt=Object(ot),Lt=[];for(var Ot in yt)Lt.push(Ot);return Lt.reverse(),function Wt(){for(;Lt.length;){var Jt=Lt.pop();if(Jt in yt)return Wt.value=Jt,Wt.done=!1,Wt}return Wt.done=!0,Wt}},z.values=dt,le.prototype={constructor:le,reset:function(yt){if(this.prev=0,this.next=0,this.sent=this._sent=V,this.done=!1,this.delegate=null,this.method="next",this.arg=V,this.tryEntries.forEach(Rt),!yt)for(var Lt in this)Lt.charAt(0)==="t"&&F.call(this,Lt)&&!isNaN(+Lt.slice(1))&&(this[Lt]=V)},stop:function(){this.done=!0;var yt=this.tryEntries[0].completion;if(yt.type==="throw")throw yt.arg;return this.rval},dispatchException:function(yt){if(this.done)throw yt;var Lt=this;function Ot(me,Ce){return De.type="throw",De.arg=yt,Lt.next=me,Ce&&(Lt.method="next",Lt.arg=V),!!Ce}for(var Wt=this.tryEntries.length-1;Wt>=0;--Wt){var Jt=this.tryEntries[Wt],De=Jt.completion;if(Jt.tryLoc==="root")return Ot("end");if(Jt.tryLoc<=this.prev){var te=F.call(Jt,"catchLoc"),oe=F.call(Jt,"finallyLoc");if(te&&oe){if(this.prev<Jt.catchLoc)return Ot(Jt.catchLoc,!0);if(this.prev<Jt.finallyLoc)return Ot(Jt.finallyLoc)}else if(te){if(this.prev<Jt.catchLoc)return Ot(Jt.catchLoc,!0)}else{if(!oe)throw Error("try statement without catch or finally");if(this.prev<Jt.finallyLoc)return Ot(Jt.finallyLoc)}}}},abrupt:function(yt,Lt){for(var Ot=this.tryEntries.length-1;Ot>=0;--Ot){var Wt=this.tryEntries[Ot];if(Wt.tryLoc<=this.prev&&F.call(Wt,"finallyLoc")&&this.prev<Wt.finallyLoc){var Jt=Wt;break}}Jt&&(yt==="break"||yt==="continue")&&Jt.tryLoc<=Lt&&Lt<=Jt.finallyLoc&&(Jt=null);var De=Jt?Jt.completion:{};return De.type=yt,De.arg=Lt,Jt?(this.method="next",this.next=Jt.finallyLoc,K):this.complete(De)},complete:function(yt,Lt){if(yt.type==="throw")throw yt.arg;return yt.type==="break"||yt.type==="continue"?this.next=yt.arg:yt.type==="return"?(this.rval=this.arg=yt.arg,this.method="return",this.next="end"):yt.type==="normal"&&Lt&&(this.next=Lt),K},finish:function(yt){for(var Lt=this.tryEntries.length-1;Lt>=0;--Lt){var Ot=this.tryEntries[Lt];if(Ot.finallyLoc===yt)return this.complete(Ot.completion,Ot.afterLoc),Rt(Ot),K}},catch:function(yt){for(var Lt=this.tryEntries.length-1;Lt>=0;--Lt){var Ot=this.tryEntries[Lt];if(Ot.tryLoc===yt){var Wt=Ot.completion;if(Wt.type==="throw"){var Jt=Wt.arg;Rt(Ot)}return Jt}}throw Error("illegal catch attempt")},delegateYield:function(yt,Lt,Ot){return this.delegate={iterator:dt(yt),resultName:Lt,nextLoc:Ot},this.method==="next"&&(this.arg=V),K}},z}Se.exports=nt,Se.exports.__esModule=!0,Se.exports.default=Se.exports},18698:function(Se){function R(et){"@babel/helpers - typeof";return Se.exports=R=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ft){return typeof ft}:function(ft){return ft&&typeof Symbol=="function"&&ft.constructor===Symbol&&ft!==Symbol.prototype?"symbol":typeof ft},Se.exports.__esModule=!0,Se.exports.default=Se.exports,R(et)}Se.exports=R,Se.exports.__esModule=!0,Se.exports.default=Se.exports},64687:function(Se,R,et){var ft=et(17061)();Se.exports=ft;try{regeneratorRuntime=ft}catch(nt){typeof globalThis=="object"?globalThis.regeneratorRuntime=ft:Function("r","regeneratorRuntime = r")(ft)}},25098:function(Se){function R(et){if(et===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return et}Se.exports=R,Se.exports.__esModule=!0,Se.exports.default=Se.exports},12444:function(Se){function R(et,ft){if(!(et instanceof ft))throw new TypeError("Cannot call a class as a function")}Se.exports=R,Se.exports.__esModule=!0,Se.exports.default=Se.exports},72004:function(Se,R,et){var ft=et(51883);function nt(z,H){for(var F=0;F<H.length;F++){var M=H[F];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(z,ft(M.key),M)}}function V(z,H,F){return H&&nt(z.prototype,H),F&&nt(z,F),Object.defineProperty(z,"prototype",{writable:!1}),z}Se.exports=V,Se.exports.__esModule=!0,Se.exports.default=Se.exports},26037:function(Se,R,et){var ft=et(48374),nt=et(21771),V=et(73408);function z(H){var F=nt();return function(){var A=ft(H),y;if(F){var x=ft(this).constructor;y=Reflect.construct(A,arguments,x)}else y=A.apply(this,arguments);return V(this,y)}}Se.exports=z,Se.exports.__esModule=!0,Se.exports.default=Se.exports},48374:function(Se){function R(et){return Se.exports=R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(nt){return nt.__proto__||Object.getPrototypeOf(nt)},Se.exports.__esModule=!0,Se.exports.default=Se.exports,R(et)}Se.exports=R,Se.exports.__esModule=!0,Se.exports.default=Se.exports},31996:function(Se,R,et){var ft=et(21314);function nt(V,z){if(typeof z!="function"&&z!==null)throw new TypeError("Super expression must either be null or a function");V.prototype=Object.create(z&&z.prototype,{constructor:{value:V,writable:!0,configurable:!0}}),Object.defineProperty(V,"prototype",{writable:!1}),z&&ft(V,z)}Se.exports=nt,Se.exports.__esModule=!0,Se.exports.default=Se.exports},21771:function(Se){function R(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(et){return!1}}Se.exports=R,Se.exports.__esModule=!0,Se.exports.default=Se.exports},73408:function(Se,R,et){var ft=et(52677).default,nt=et(25098);function V(z,H){if(H&&(ft(H)==="object"||typeof H=="function"))return H;if(H!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nt(z)}Se.exports=V,Se.exports.__esModule=!0,Se.exports.default=Se.exports},21314:function(Se){function R(et,ft){return Se.exports=R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(V,z){return V.__proto__=z,V},Se.exports.__esModule=!0,Se.exports.default=Se.exports,R(et,ft)}Se.exports=R,Se.exports.__esModule=!0,Se.exports.default=Se.exports},30907:function(Se,R,et){"use strict";et.d(R,{Z:function(){return ft}});function ft(nt,V){(V==null||V>nt.length)&&(V=nt.length);for(var z=0,H=Array(V);z<V;z++)H[z]=nt[z];return H}},15861:function(Se,R,et){"use strict";et.d(R,{Z:function(){return nt}});function ft(V,z,H,F,M,A,y){try{var x=V[A](y),p=x.value}catch(_){return void H(_)}x.done?z(p):Promise.resolve(p).then(F,M)}function nt(V){return function(){var z=this,H=arguments;return new Promise(function(F,M){var A=V.apply(z,H);function y(p){ft(A,F,M,y,x,"next",p)}function x(p){ft(A,F,M,y,x,"throw",p)}y(void 0)})}}},15671:function(Se,R,et){"use strict";et.d(R,{Z:function(){return ft}});function ft(nt,V){if(!(nt instanceof V))throw new TypeError("Cannot call a class as a function")}},43144:function(Se,R,et){"use strict";et.d(R,{Z:function(){return V}});var ft=et(83997);function nt(z,H){for(var F=0;F<H.length;F++){var M=H[F];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(z,(0,ft.Z)(M.key),M)}}function V(z,H,F){return H&&nt(z.prototype,H),F&&nt(z,F),Object.defineProperty(z,"prototype",{writable:!1}),z}},4942:function(Se,R,et){"use strict";et.d(R,{Z:function(){return nt}});var ft=et(83997);function nt(V,z,H){return(z=(0,ft.Z)(z))in V?Object.defineProperty(V,z,{value:H,enumerable:!0,configurable:!0,writable:!0}):V[z]=H,V}},59199:function(Se,R,et){"use strict";et.d(R,{Z:function(){return ft}});function ft(nt){if(typeof Symbol!="undefined"&&nt[Symbol.iterator]!=null||nt["@@iterator"]!=null)return Array.from(nt)}},74902:function(Se,R,et){"use strict";et.d(R,{Z:function(){return F}});var ft=et(30907);function nt(M){if(Array.isArray(M))return(0,ft.Z)(M)}var V=et(59199),z=et(40181);function H(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function F(M){return nt(M)||(0,V.Z)(M)||(0,z.Z)(M)||H()}},83997:function(Se,R,et){"use strict";et.d(R,{Z:function(){return V}});var ft=et(71002);function nt(z,H){if((0,ft.Z)(z)!="object"||!z)return z;var F=z[Symbol.toPrimitive];if(F!==void 0){var M=F.call(z,H||"default");if((0,ft.Z)(M)!="object")return M;throw new TypeError("@@toPrimitive must return a primitive value.")}return(H==="string"?String:Number)(z)}function V(z){var H=nt(z,"string");return(0,ft.Z)(H)=="symbol"?H:H+""}},71002:function(Se,R,et){"use strict";et.d(R,{Z:function(){return ft}});function ft(nt){"@babel/helpers - typeof";return ft=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(V){return typeof V}:function(V){return V&&typeof Symbol=="function"&&V.constructor===Symbol&&V!==Symbol.prototype?"symbol":typeof V},ft(nt)}},40181:function(Se,R,et){"use strict";et.d(R,{Z:function(){return nt}});var ft=et(30907);function nt(V,z){if(V){if(typeof V=="string")return(0,ft.Z)(V,z);var H={}.toString.call(V).slice(8,-1);return H==="Object"&&V.constructor&&(H=V.constructor.name),H==="Map"||H==="Set"?Array.from(V):H==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(H)?(0,ft.Z)(V,z):void 0}}},97582:function(Se,R,et){"use strict";et.r(R),et.d(R,{__addDisposableResource:function(){return Rt},__assign:function(){return V},__asyncDelegator:function(){return j},__asyncGenerator:function(){return Y},__asyncValues:function(){return Q},__await:function(){return G},__awaiter:function(){return _},__classPrivateFieldGet:function(){return kt},__classPrivateFieldIn:function(){return Ht},__classPrivateFieldSet:function(){return At},__createBinding:function(){return b},__decorate:function(){return H},__disposeResources:function(){return dt},__esDecorate:function(){return M},__exportStar:function(){return k},__extends:function(){return nt},__generator:function(){return E},__importDefault:function(){return ht},__importStar:function(){return ut},__makeTemplateObject:function(){return Z},__metadata:function(){return p},__param:function(){return F},__propKey:function(){return y},__read:function(){return g},__rest:function(){return z},__runInitializers:function(){return A},__setFunctionName:function(){return x},__spread:function(){return v},__spreadArray:function(){return B},__spreadArrays:function(){return K},__values:function(){return N}});var ft=function(ot,yt){return ft=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(Lt,Ot){Lt.__proto__=Ot}||function(Lt,Ot){for(var Wt in Ot)Object.prototype.hasOwnProperty.call(Ot,Wt)&&(Lt[Wt]=Ot[Wt])},ft(ot,yt)};function nt(ot,yt){if(typeof yt!="function"&&yt!==null)throw new TypeError("Class extends value "+String(yt)+" is not a constructor or null");ft(ot,yt);function Lt(){this.constructor=ot}ot.prototype=yt===null?Object.create(yt):(Lt.prototype=yt.prototype,new Lt)}var V=function(){return V=Object.assign||function(yt){for(var Lt,Ot=1,Wt=arguments.length;Ot<Wt;Ot++){Lt=arguments[Ot];for(var Jt in Lt)Object.prototype.hasOwnProperty.call(Lt,Jt)&&(yt[Jt]=Lt[Jt])}return yt},V.apply(this,arguments)};function z(ot,yt){var Lt={};for(var Ot in ot)Object.prototype.hasOwnProperty.call(ot,Ot)&&yt.indexOf(Ot)<0&&(Lt[Ot]=ot[Ot]);if(ot!=null&&typeof Object.getOwnPropertySymbols=="function")for(var Wt=0,Ot=Object.getOwnPropertySymbols(ot);Wt<Ot.length;Wt++)yt.indexOf(Ot[Wt])<0&&Object.prototype.propertyIsEnumerable.call(ot,Ot[Wt])&&(Lt[Ot[Wt]]=ot[Ot[Wt]]);return Lt}function H(ot,yt,Lt,Ot){var Wt=arguments.length,Jt=Wt<3?yt:Ot===null?Ot=Object.getOwnPropertyDescriptor(yt,Lt):Ot,De;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")Jt=Reflect.decorate(ot,yt,Lt,Ot);else for(var te=ot.length-1;te>=0;te--)(De=ot[te])&&(Jt=(Wt<3?De(Jt):Wt>3?De(yt,Lt,Jt):De(yt,Lt))||Jt);return Wt>3&&Jt&&Object.defineProperty(yt,Lt,Jt),Jt}function F(ot,yt){return function(Lt,Ot){yt(Lt,Ot,ot)}}function M(ot,yt,Lt,Ot,Wt,Jt){function De(Ie){if(Ie!==void 0&&typeof Ie!="function")throw new TypeError("Function expected");return Ie}for(var te=Ot.kind,oe=te==="getter"?"get":te==="setter"?"set":"value",me=!yt&&ot?Ot.static?ot:ot.prototype:null,Ce=yt||(me?Object.getOwnPropertyDescriptor(me,Ot.name):{}),_e,zt=!1,ue=Lt.length-1;ue>=0;ue--){var Pe={};for(var Xt in Ot)Pe[Xt]=Xt==="access"?{}:Ot[Xt];for(var Xt in Ot.access)Pe.access[Xt]=Ot.access[Xt];Pe.addInitializer=function(Ie){if(zt)throw new TypeError("Cannot add initializers after decoration has completed");Jt.push(De(Ie||null))};var ie=(0,Lt[ue])(te==="accessor"?{get:Ce.get,set:Ce.set}:Ce[oe],Pe);if(te==="accessor"){if(ie===void 0)continue;if(ie===null||typeof ie!="object")throw new TypeError("Object expected");(_e=De(ie.get))&&(Ce.get=_e),(_e=De(ie.set))&&(Ce.set=_e),(_e=De(ie.init))&&Wt.unshift(_e)}else(_e=De(ie))&&(te==="field"?Wt.unshift(_e):Ce[oe]=_e)}me&&Object.defineProperty(me,Ot.name,Ce),zt=!0}function A(ot,yt,Lt){for(var Ot=arguments.length>2,Wt=0;Wt<yt.length;Wt++)Lt=Ot?yt[Wt].call(ot,Lt):yt[Wt].call(ot);return Ot?Lt:void 0}function y(ot){return typeof ot=="symbol"?ot:"".concat(ot)}function x(ot,yt,Lt){return typeof yt=="symbol"&&(yt=yt.description?"[".concat(yt.description,"]"):""),Object.defineProperty(ot,"name",{configurable:!0,value:Lt?"".concat(Lt," ",yt):yt})}function p(ot,yt){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(ot,yt)}function _(ot,yt,Lt,Ot){function Wt(Jt){return Jt instanceof Lt?Jt:new Lt(function(De){De(Jt)})}return new(Lt||(Lt=Promise))(function(Jt,De){function te(Ce){try{me(Ot.next(Ce))}catch(_e){De(_e)}}function oe(Ce){try{me(Ot.throw(Ce))}catch(_e){De(_e)}}function me(Ce){Ce.done?Jt(Ce.value):Wt(Ce.value).then(te,oe)}me((Ot=Ot.apply(ot,yt||[])).next())})}function E(ot,yt){var Lt={label:0,sent:function(){if(Jt[0]&1)throw Jt[1];return Jt[1]},trys:[],ops:[]},Ot,Wt,Jt,De;return De={next:te(0),throw:te(1),return:te(2)},typeof Symbol=="function"&&(De[Symbol.iterator]=function(){return this}),De;function te(me){return function(Ce){return oe([me,Ce])}}function oe(me){if(Ot)throw new TypeError("Generator is already executing.");for(;De&&(De=0,me[0]&&(Lt=0)),Lt;)try{if(Ot=1,Wt&&(Jt=me[0]&2?Wt.return:me[0]?Wt.throw||((Jt=Wt.return)&&Jt.call(Wt),0):Wt.next)&&!(Jt=Jt.call(Wt,me[1])).done)return Jt;switch(Wt=0,Jt&&(me=[me[0]&2,Jt.value]),me[0]){case 0:case 1:Jt=me;break;case 4:return Lt.label++,{value:me[1],done:!1};case 5:Lt.label++,Wt=me[1],me=[0];continue;case 7:me=Lt.ops.pop(),Lt.trys.pop();continue;default:if(Jt=Lt.trys,!(Jt=Jt.length>0&&Jt[Jt.length-1])&&(me[0]===6||me[0]===2)){Lt=0;continue}if(me[0]===3&&(!Jt||me[1]>Jt[0]&&me[1]<Jt[3])){Lt.label=me[1];break}if(me[0]===6&&Lt.label<Jt[1]){Lt.label=Jt[1],Jt=me;break}if(Jt&&Lt.label<Jt[2]){Lt.label=Jt[2],Lt.ops.push(me);break}Jt[2]&&Lt.ops.pop(),Lt.trys.pop();continue}me=yt.call(ot,Lt)}catch(Ce){me=[6,Ce],Wt=0}finally{Ot=Jt=0}if(me[0]&5)throw me[1];return{value:me[0]?me[1]:void 0,done:!0}}}var b=Object.create?function(ot,yt,Lt,Ot){Ot===void 0&&(Ot=Lt);var Wt=Object.getOwnPropertyDescriptor(yt,Lt);(!Wt||("get"in Wt?!yt.__esModule:Wt.writable||Wt.configurable))&&(Wt={enumerable:!0,get:function(){return yt[Lt]}}),Object.defineProperty(ot,Ot,Wt)}:function(ot,yt,Lt,Ot){Ot===void 0&&(Ot=Lt),ot[Ot]=yt[Lt]};function k(ot,yt){for(var Lt in ot)Lt!=="default"&&!Object.prototype.hasOwnProperty.call(yt,Lt)&&b(yt,ot,Lt)}function N(ot){var yt=typeof Symbol=="function"&&Symbol.iterator,Lt=yt&&ot[yt],Ot=0;if(Lt)return Lt.call(ot);if(ot&&typeof ot.length=="number")return{next:function(){return ot&&Ot>=ot.length&&(ot=void 0),{value:ot&&ot[Ot++],done:!ot}}};throw new TypeError(yt?"Object is not iterable.":"Symbol.iterator is not defined.")}function g(ot,yt){var Lt=typeof Symbol=="function"&&ot[Symbol.iterator];if(!Lt)return ot;var Ot=Lt.call(ot),Wt,Jt=[],De;try{for(;(yt===void 0||yt-- >0)&&!(Wt=Ot.next()).done;)Jt.push(Wt.value)}catch(te){De={error:te}}finally{try{Wt&&!Wt.done&&(Lt=Ot.return)&&Lt.call(Ot)}finally{if(De)throw De.error}}return Jt}function v(){for(var ot=[],yt=0;yt<arguments.length;yt++)ot=ot.concat(g(arguments[yt]));return ot}function K(){for(var ot=0,yt=0,Lt=arguments.length;yt<Lt;yt++)ot+=arguments[yt].length;for(var Ot=Array(ot),Wt=0,yt=0;yt<Lt;yt++)for(var Jt=arguments[yt],De=0,te=Jt.length;De<te;De++,Wt++)Ot[Wt]=Jt[De];return Ot}function B(ot,yt,Lt){if(Lt||arguments.length===2)for(var Ot=0,Wt=yt.length,Jt;Ot<Wt;Ot++)(Jt||!(Ot in yt))&&(Jt||(Jt=Array.prototype.slice.call(yt,0,Ot)),Jt[Ot]=yt[Ot]);return ot.concat(Jt||Array.prototype.slice.call(yt))}function G(ot){return this instanceof G?(this.v=ot,this):new G(ot)}function Y(ot,yt,Lt){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ot=Lt.apply(ot,yt||[]),Wt,Jt=[];return Wt={},te("next"),te("throw"),te("return",De),Wt[Symbol.asyncIterator]=function(){return this},Wt;function De(ue){return function(Pe){return Promise.resolve(Pe).then(ue,_e)}}function te(ue,Pe){Ot[ue]&&(Wt[ue]=function(Xt){return new Promise(function(ie,Ie){Jt.push([ue,Xt,ie,Ie])>1||oe(ue,Xt)})},Pe&&(Wt[ue]=Pe(Wt[ue])))}function oe(ue,Pe){try{me(Ot[ue](Pe))}catch(Xt){zt(Jt[0][3],Xt)}}function me(ue){ue.value instanceof G?Promise.resolve(ue.value.v).then(Ce,_e):zt(Jt[0][2],ue)}function Ce(ue){oe("next",ue)}function _e(ue){oe("throw",ue)}function zt(ue,Pe){ue(Pe),Jt.shift(),Jt.length&&oe(Jt[0][0],Jt[0][1])}}function j(ot){var yt,Lt;return yt={},Ot("next"),Ot("throw",function(Wt){throw Wt}),Ot("return"),yt[Symbol.iterator]=function(){return this},yt;function Ot(Wt,Jt){yt[Wt]=ot[Wt]?function(De){return(Lt=!Lt)?{value:G(ot[Wt](De)),done:!1}:Jt?Jt(De):De}:Jt}}function Q(ot){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var yt=ot[Symbol.asyncIterator],Lt;return yt?yt.call(ot):(ot=typeof N=="function"?N(ot):ot[Symbol.iterator](),Lt={},Ot("next"),Ot("throw"),Ot("return"),Lt[Symbol.asyncIterator]=function(){return this},Lt);function Ot(Jt){Lt[Jt]=ot[Jt]&&function(De){return new Promise(function(te,oe){De=ot[Jt](De),Wt(te,oe,De.done,De.value)})}}function Wt(Jt,De,te,oe){Promise.resolve(oe).then(function(me){Jt({value:me,done:te})},De)}}function Z(ot,yt){return Object.defineProperty?Object.defineProperty(ot,"raw",{value:yt}):ot.raw=yt,ot}var rt=Object.create?function(ot,yt){Object.defineProperty(ot,"default",{enumerable:!0,value:yt})}:function(ot,yt){ot.default=yt};function ut(ot){if(ot&&ot.__esModule)return ot;var yt={};if(ot!=null)for(var Lt in ot)Lt!=="default"&&Object.prototype.hasOwnProperty.call(ot,Lt)&&b(yt,ot,Lt);return rt(yt,ot),yt}function ht(ot){return ot&&ot.__esModule?ot:{default:ot}}function kt(ot,yt,Lt,Ot){if(Lt==="a"&&!Ot)throw new TypeError("Private accessor was defined without a getter");if(typeof yt=="function"?ot!==yt||!Ot:!yt.has(ot))throw new TypeError("Cannot read private member from an object whose class did not declare it");return Lt==="m"?Ot:Lt==="a"?Ot.call(ot):Ot?Ot.value:yt.get(ot)}function At(ot,yt,Lt,Ot,Wt){if(Ot==="m")throw new TypeError("Private method is not writable");if(Ot==="a"&&!Wt)throw new TypeError("Private accessor was defined without a setter");if(typeof yt=="function"?ot!==yt||!Wt:!yt.has(ot))throw new TypeError("Cannot write private member to an object whose class did not declare it");return Ot==="a"?Wt.call(ot,Lt):Wt?Wt.value=Lt:yt.set(ot,Lt),Lt}function Ht(ot,yt){if(yt===null||typeof yt!="object"&&typeof yt!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof ot=="function"?yt===ot:ot.has(yt)}function Rt(ot,yt,Lt){if(yt!=null){if(typeof yt!="object"&&typeof yt!="function")throw new TypeError("Object expected.");var Ot,Wt;if(Lt){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");Ot=yt[Symbol.asyncDispose]}if(Ot===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");Ot=yt[Symbol.dispose],Lt&&(Wt=Ot)}if(typeof Ot!="function")throw new TypeError("Object not disposable.");Wt&&(Ot=function(){try{Wt.call(this)}catch(Jt){return Promise.reject(Jt)}}),ot.stack.push({value:yt,dispose:Ot,async:Lt})}else Lt&&ot.stack.push({async:!0});return yt}var le=typeof SuppressedError=="function"?SuppressedError:function(ot,yt,Lt){var Ot=new Error(Lt);return Ot.name="SuppressedError",Ot.error=ot,Ot.suppressed=yt,Ot};function dt(ot){function yt(Ot){ot.error=ot.hasError?new le(Ot,ot.error,"An error was suppressed during disposal."):Ot,ot.hasError=!0}function Lt(){for(;ot.stack.length;){var Ot=ot.stack.pop();try{var Wt=Ot.dispose&&Ot.dispose.call(Ot.value);if(Ot.async)return Promise.resolve(Wt).then(Lt,function(Jt){return yt(Jt),Lt()})}catch(Jt){yt(Jt)}}if(ot.hasError)throw ot.error}return Lt()}R.default={__extends:nt,__assign:V,__rest:z,__decorate:H,__param:F,__metadata:p,__awaiter:_,__generator:E,__createBinding:b,__exportStar:k,__values:N,__read:g,__spread:v,__spreadArrays:K,__spreadArray:B,__await:G,__asyncGenerator:Y,__asyncDelegator:j,__asyncValues:Q,__makeTemplateObject:Z,__importStar:ut,__importDefault:ht,__classPrivateFieldGet:kt,__classPrivateFieldSet:At,__classPrivateFieldIn:Ht,__addDisposableResource:Rt,__disposeResources:dt}}}]);
